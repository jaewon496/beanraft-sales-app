(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function Hw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cv={exports:{}},id={},kv={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),Kw=Symbol.for("react.portal"),Gw=Symbol.for("react.fragment"),qw=Symbol.for("react.strict_mode"),Yw=Symbol.for("react.profiler"),Qw=Symbol.for("react.provider"),Jw=Symbol.for("react.context"),Xw=Symbol.for("react.forward_ref"),Zw=Symbol.for("react.suspense"),e1=Symbol.for("react.memo"),t1=Symbol.for("react.lazy"),rg=Symbol.iterator;function n1(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var Ev={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iv=Object.assign,Tv={};function Yl(t,e,n){this.props=t,this.context=e,this.refs=Tv,this.updater=n||Ev}Yl.prototype.isReactComponent={};Yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Rv(){}Rv.prototype=Yl.prototype;function Um(t,e,n){this.props=t,this.context=e,this.refs=Tv,this.updater=n||Ev}var $m=Um.prototype=new Rv;$m.constructor=Um;Iv($m,Yl.prototype);$m.isPureReactComponent=!0;var lg=Array.isArray,Pv=Object.prototype.hasOwnProperty,zm={current:null},Mv={key:!0,ref:!0,__self:!0,__source:!0};function Av(t,e,n){var s,l={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Pv.call(e,s)&&!Mv.hasOwnProperty(s)&&(l[s]=e[s]);var d=arguments.length-2;if(d===1)l.children=n;else if(1<d){for(var u=Array(d),m=0;m<d;m++)u[m]=arguments[m+2];l.children=u}if(t&&t.defaultProps)for(s in d=t.defaultProps,d)l[s]===void 0&&(l[s]=d[s]);return{$$typeof:ka,type:t,key:i,ref:o,props:l,_owner:zm.current}}function s1(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function r1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ig=/\/+/g;function Fu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r1(""+t.key):e.toString(36)}function tc(t,e,n,s,l){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ka:case Kw:o=!0}}if(o)return o=t,l=l(o),t=s===""?"."+Fu(o,0):s,lg(l)?(n="",t!=null&&(n=t.replace(ig,"$&/")+"/"),tc(l,e,n,"",function(m){return m})):l!=null&&(Bm(l)&&(l=s1(l,n+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(ig,"$&/")+"/")+t)),e.push(l)),1;if(o=0,s=s===""?".":s+":",lg(t))for(var d=0;d<t.length;d++){i=t[d];var u=s+Fu(i,d);o+=tc(i,e,n,u,l)}else if(u=n1(t),typeof u=="function")for(t=u.call(t),d=0;!(i=t.next()).done;)i=i.value,u=s+Fu(i,d++),o+=tc(i,e,n,u,l);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ao(t,e,n){if(t==null)return t;var s=[],l=0;return tc(t,s,"","",function(i){return e.call(n,i,l++)}),s}function l1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},nc={transition:null},i1={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:nc,ReactCurrentOwner:zm};function Ov(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Ao,forEach:function(t,e,n){Ao(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ao(t,function(){e++}),e},toArray:function(t){return Ao(t,function(e){return e})||[]},only:function(t){if(!Bm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Yl;pe.Fragment=Gw;pe.Profiler=Yw;pe.PureComponent=Um;pe.StrictMode=qw;pe.Suspense=Zw;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i1;pe.act=Ov;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Iv({},t.props),l=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zm.current),e.key!==void 0&&(l=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(u in e)Pv.call(e,u)&&!Mv.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&d!==void 0?d[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){d=Array(u);for(var m=0;m<u;m++)d[m]=arguments[m+2];s.children=d}return{$$typeof:ka,type:t.type,key:l,ref:i,props:s,_owner:o}};pe.createContext=function(t){return t={$$typeof:Jw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Qw,_context:t},t.Consumer=t};pe.createElement=Av;pe.createFactory=function(t){var e=Av.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:Xw,render:t}};pe.isValidElement=Bm;pe.lazy=function(t){return{$$typeof:t1,_payload:{_status:-1,_result:t},_init:l1}};pe.memo=function(t,e){return{$$typeof:e1,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=nc.transition;nc.transition={};try{t()}finally{nc.transition=e}};pe.unstable_act=Ov;pe.useCallback=function(t,e){return Ct.current.useCallback(t,e)};pe.useContext=function(t){return Ct.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Ct.current.useEffect(t,e)};pe.useId=function(){return Ct.current.useId()};pe.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Ct.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};pe.useRef=function(t){return Ct.current.useRef(t)};pe.useState=function(t){return Ct.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Ct.current.useTransition()};pe.version="18.3.1";kv.exports=pe;var g=kv.exports;const a1=Hw(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=g,c1=Symbol.for("react.element"),d1=Symbol.for("react.fragment"),u1=Object.prototype.hasOwnProperty,h1=o1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m1={key:!0,ref:!0,__self:!0,__source:!0};function Dv(t,e,n){var s,l={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)u1.call(e,s)&&!m1.hasOwnProperty(s)&&(l[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)l[s]===void 0&&(l[s]=e[s]);return{$$typeof:c1,type:t,key:i,ref:o,props:l,_owner:h1.current}}id.Fragment=d1;id.jsx=Dv;id.jsxs=Dv;Cv.exports=id;var r=Cv.exports,Sh={},Lv={exports:{}},Kt={},Fv={exports:{}},Uv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,de){var Z=q.length;q.push(de);e:for(;0<Z;){var Te=Z-1>>>1,Re=q[Te];if(0<l(Re,de))q[Te]=de,q[Z]=Re,Z=Te;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var de=q[0],Z=q.pop();if(Z!==de){q[0]=Z;e:for(var Te=0,Re=q.length,Pn=Re>>>1;Te<Pn;){var qt=2*(Te+1)-1,Kr=q[qt],Je=qt+1,We=q[Je];if(0>l(Kr,Z))Je<Re&&0>l(We,Kr)?(q[Te]=We,q[Je]=Z,Te=Je):(q[Te]=Kr,q[qt]=Z,Te=qt);else if(Je<Re&&0>l(We,Z))q[Te]=We,q[Je]=Z,Te=Je;else break e}}return de}function l(q,de){var Z=q.sortIndex-de.sortIndex;return Z!==0?Z:q.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();t.unstable_now=function(){return o.now()-d}}var u=[],m=[],b=1,v=null,_=3,I=!1,D=!1,U=!1,oe=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var de=n(m);de!==null;){if(de.callback===null)s(m);else if(de.startTime<=q)s(m),de.sortIndex=de.expirationTime,e(u,de);else break;de=n(m)}}function P(q){if(U=!1,C(q),!D)if(n(u)!==null)D=!0,nr(K);else{var de=n(m);de!==null&&Hr(P,de.startTime-q)}}function K(q,de){D=!1,U&&(U=!1,S(X),X=-1),I=!0;var Z=_;try{for(C(de),v=n(u);v!==null&&(!(v.expirationTime>de)||q&&!Nt());){var Te=v.callback;if(typeof Te=="function"){v.callback=null,_=v.priorityLevel;var Re=Te(v.expirationTime<=de);de=t.unstable_now(),typeof Re=="function"?v.callback=Re:v===n(u)&&s(u),C(de)}else s(u);v=n(u)}if(v!==null)var Pn=!0;else{var qt=n(m);qt!==null&&Hr(P,qt.startTime-de),Pn=!1}return Pn}finally{v=null,_=Z,I=!1}}var z=!1,Q=null,X=-1,Se=5,ue=-1;function Nt(){return!(t.unstable_now()-ue<Se)}function tr(){if(Q!==null){var q=t.unstable_now();ue=q;var de=!0;try{de=Q(!0,q)}finally{de?Rn():(z=!1,Q=null)}}else z=!1}var Rn;if(typeof j=="function")Rn=function(){j(tr)};else if(typeof MessageChannel<"u"){var Wr=new MessageChannel,Vr=Wr.port2;Wr.port1.onmessage=tr,Rn=function(){Vr.postMessage(null)}}else Rn=function(){oe(tr,0)};function nr(q){Q=q,z||(z=!0,Rn())}function Hr(q,de){X=oe(function(){q(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){D||I||(D=!0,nr(K))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(_){case 1:case 2:case 3:var de=3;break;default:de=_}var Z=_;_=de;try{return q()}finally{_=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,de){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=_;_=q;try{return de()}finally{_=Z}},t.unstable_scheduleCallback=function(q,de,Z){var Te=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Te+Z:Te):Z=Te,q){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=Z+Re,q={id:b++,callback:de,priorityLevel:q,startTime:Z,expirationTime:Re,sortIndex:-1},Z>Te?(q.sortIndex=Z,e(m,q),n(u)===null&&q===n(m)&&(U?(S(X),X=-1):U=!0,Hr(P,Z-Te))):(q.sortIndex=Re,e(u,q),D||I||(D=!0,nr(K))),q},t.unstable_shouldYield=Nt,t.unstable_wrapCallback=function(q){var de=_;return function(){var Z=_;_=de;try{return q.apply(this,arguments)}finally{_=Z}}}})(Uv);Fv.exports=Uv;var p1=Fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1=g,Ht=p1;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $v=new Set,la={};function Ur(t,e){Ll(t,e),Ll(t+"Capture",e)}function Ll(t,e){for(la[t]=e,t=0;t<e.length;t++)$v.add(e[t])}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ch=Object.prototype.hasOwnProperty,x1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ag={},og={};function g1(t){return Ch.call(og,t)?!0:Ch.call(ag,t)?!1:x1.test(t)?og[t]=!0:(ag[t]=!0,!1)}function v1(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function y1(t,e,n,s){if(e===null||typeof e>"u"||v1(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,s,l,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wm=/[\-:]([a-z])/g;function Vm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wm,Vm);ut[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wm,Vm);ut[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wm,Vm);ut[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hm(t,e,n,s){var l=ut.hasOwnProperty(e)?ut[e]:null;(l!==null?l.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y1(e,n,l,s)&&(n=null),s||l===null?g1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):l.mustUseProperty?t[l.propertyName]=n===null?l.type===3?!1:"":n:(e=l.attributeName,s=l.attributeNamespace,n===null?t.removeAttribute(e):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var ds=f1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oo=Symbol.for("react.element"),ul=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),Bv=Symbol.for("react.context"),Gm=Symbol.for("react.forward_ref"),Eh=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),Wv=Symbol.for("react.offscreen"),cg=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Uu;function zi(t){if(Uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uu=e&&e[1]||""}return`
`+Uu+t}var $u=!1;function zu(t,e){if(!t||$u)return"";$u=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var s=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){s=m}t.call(e.prototype)}else{try{throw Error()}catch(m){s=m}t()}}catch(m){if(m&&s&&typeof m.stack=="string"){for(var l=m.stack.split(`
`),i=s.stack.split(`
`),o=l.length-1,d=i.length-1;1<=o&&0<=d&&l[o]!==i[d];)d--;for(;1<=o&&0<=d;o--,d--)if(l[o]!==i[d]){if(o!==1||d!==1)do if(o--,d--,0>d||l[o]!==i[d]){var u=`
`+l[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=d);break}}}finally{$u=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function b1(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=zu(t.type,!1),t;case 11:return t=zu(t.type.render,!1),t;case 1:return t=zu(t.type,!0),t;default:return""}}function Th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hl:return"Fragment";case ul:return"Portal";case kh:return"Profiler";case Km:return"StrictMode";case Eh:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bv:return(t.displayName||"Context")+".Consumer";case zv:return(t._context.displayName||"Context")+".Provider";case Gm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qm:return e=t.displayName||null,e!==null?e:Th(t.type)||"Memo";case js:e=t._payload,t=t._init;try{return Th(t(e))}catch{}}return null}function N1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Th(e);case 8:return e===Km?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _1(t){var e=Vv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Do(t){t._valueTracker||(t._valueTracker=_1(t))}function Hv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Vv(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dg(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kv(t,e){e=e.checked,e!=null&&Hm(t,"checked",e,!1)}function Ph(t,e){Kv(t,e);var n=Gs(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mh(t,e.type,Gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ug(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mh(t,e,n){(e!=="number"||vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bi=Array.isArray;function Cl(t,e,n,s){if(t=t.options,e){e={};for(var l=0;l<n.length;l++)e["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=e.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Gs(n),e=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,s&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function Ah(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Bi(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gs(n)}}function Gv(t,e){var n=Gs(e.value),s=Gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lo,Yv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,l){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,l)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ia(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j1=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(t){j1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hi[e]=Hi[t]})});function Qv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hi.hasOwnProperty(t)&&Hi[t]?(""+e).trim():e+"px"}function Jv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=Qv(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,l):t[n]=l}}var w1=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dh(t,e){if(e){if(w1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function Ym(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uh=null,kl=null,El=null;function pg(t){if(t=Ta(t)){if(typeof Uh!="function")throw Error(L(280));var e=t.stateNode;e&&(e=ud(e),Uh(t.stateNode,t.type,e))}}function Xv(t){kl?El?El.push(t):El=[t]:kl=t}function Zv(){if(kl){var t=kl,e=El;if(El=kl=null,pg(t),e)for(t=0;t<e.length;t++)pg(e[t])}}function ey(t,e){return t(e)}function ty(){}var Bu=!1;function ny(t,e,n){if(Bu)return t(e,n);Bu=!0;try{return ey(t,e,n)}finally{Bu=!1,(kl!==null||El!==null)&&(ty(),Zv())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var s=ud(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var $h=!1;if(ns)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){$h=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{$h=!1}function S1(t,e,n,s,l,i,o,d,u){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(b){this.onError(b)}}var Ki=!1,yc=null,bc=!1,zh=null,C1={onError:function(t){Ki=!0,yc=t}};function k1(t,e,n,s,l,i,o,d,u){Ki=!1,yc=null,S1.apply(C1,arguments)}function E1(t,e,n,s,l,i,o,d,u){if(k1.apply(this,arguments),Ki){if(Ki){var m=yc;Ki=!1,yc=null}else throw Error(L(198));bc||(bc=!0,zh=m)}}function $r(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fg(t){if($r(t)!==t)throw Error(L(188))}function I1(t){var e=t.alternate;if(!e){if(e=$r(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,s=e;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return fg(l),t;if(i===s)return fg(l),e;i=i.sibling}throw Error(L(188))}if(n.return!==s.return)n=l,s=i;else{for(var o=!1,d=l.child;d;){if(d===n){o=!0,n=l,s=i;break}if(d===s){o=!0,s=l,n=i;break}d=d.sibling}if(!o){for(d=i.child;d;){if(d===n){o=!0,n=i,s=l;break}if(d===s){o=!0,s=i,n=l;break}d=d.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==s)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function ry(t){return t=I1(t),t!==null?ly(t):null}function ly(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ly(t);if(e!==null)return e;t=t.sibling}return null}var iy=Ht.unstable_scheduleCallback,xg=Ht.unstable_cancelCallback,T1=Ht.unstable_shouldYield,R1=Ht.unstable_requestPaint,Ve=Ht.unstable_now,P1=Ht.unstable_getCurrentPriorityLevel,Qm=Ht.unstable_ImmediatePriority,ay=Ht.unstable_UserBlockingPriority,Nc=Ht.unstable_NormalPriority,M1=Ht.unstable_LowPriority,oy=Ht.unstable_IdlePriority,ad=null,kn=null;function A1(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(ad,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:L1,O1=Math.log,D1=Math.LN2;function L1(t){return t>>>=0,t===0?32:31-(O1(t)/D1|0)|0}var Fo=64,Uo=4194304;function Wi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _c(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,l=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var d=o&~l;d!==0?s=Wi(d):(i&=o,i!==0&&(s=Wi(i)))}else o=n&~l,o!==0?s=Wi(o):i!==0&&(s=Wi(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&l)&&(l=s&-s,i=e&-e,l>=i||l===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-pn(e),l=1<<n,s|=t[n],e&=~l;return s}function F1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U1(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,l=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pn(i),d=1<<o,u=l[o];u===-1?(!(d&n)||d&s)&&(l[o]=F1(d,e)):u<=e&&(t.expiredLanes|=d),i&=~d}}function Bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cy(){var t=Fo;return Fo<<=1,!(Fo&4194240)&&(Fo=64),t}function Wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function $1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var l=31-pn(n),i=1<<l;e[l]=0,s[l]=-1,t[l]=-1,n&=~i}}function Jm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-pn(n),l=1<<s;l&e|t[s]&e&&(t[s]|=e),n&=~l}}var we=0;function dy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uy,Xm,hy,my,py,Wh=!1,$o=[],Os=null,Ds=null,Ls=null,oa=new Map,ca=new Map,Cs=[],z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gg(t,e){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(e.pointerId)}}function Ri(t,e,n,s,l,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[l]},e!==null&&(e=Ta(e),e!==null&&Xm(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function B1(t,e,n,s,l){switch(e){case"focusin":return Os=Ri(Os,t,e,n,s,l),!0;case"dragenter":return Ds=Ri(Ds,t,e,n,s,l),!0;case"mouseover":return Ls=Ri(Ls,t,e,n,s,l),!0;case"pointerover":var i=l.pointerId;return oa.set(i,Ri(oa.get(i)||null,t,e,n,s,l)),!0;case"gotpointercapture":return i=l.pointerId,ca.set(i,Ri(ca.get(i)||null,t,e,n,s,l)),!0}return!1}function fy(t){var e=_r(t.target);if(e!==null){var n=$r(e);if(n!==null){if(e=n.tag,e===13){if(e=sy(n),e!==null){t.blockedOn=e,py(t.priority,function(){hy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Fh=s,n.target.dispatchEvent(s),Fh=null}else return e=Ta(n),e!==null&&Xm(e),t.blockedOn=n,!1;e.shift()}return!0}function vg(t,e,n){sc(t)&&n.delete(e)}function W1(){Wh=!1,Os!==null&&sc(Os)&&(Os=null),Ds!==null&&sc(Ds)&&(Ds=null),Ls!==null&&sc(Ls)&&(Ls=null),oa.forEach(vg),ca.forEach(vg)}function Pi(t,e){t.blockedOn===e&&(t.blockedOn=null,Wh||(Wh=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,W1)))}function da(t){function e(l){return Pi(l,t)}if(0<$o.length){Pi($o[0],t);for(var n=1;n<$o.length;n++){var s=$o[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Os!==null&&Pi(Os,t),Ds!==null&&Pi(Ds,t),Ls!==null&&Pi(Ls,t),oa.forEach(e),ca.forEach(e),n=0;n<Cs.length;n++)s=Cs[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Cs.length&&(n=Cs[0],n.blockedOn===null);)fy(n),n.blockedOn===null&&Cs.shift()}var Il=ds.ReactCurrentBatchConfig,jc=!0;function V1(t,e,n,s){var l=we,i=Il.transition;Il.transition=null;try{we=1,Zm(t,e,n,s)}finally{we=l,Il.transition=i}}function H1(t,e,n,s){var l=we,i=Il.transition;Il.transition=null;try{we=4,Zm(t,e,n,s)}finally{we=l,Il.transition=i}}function Zm(t,e,n,s){if(jc){var l=Vh(t,e,n,s);if(l===null)Zu(t,e,s,wc,n),gg(t,s);else if(B1(l,t,e,n,s))s.stopPropagation();else if(gg(t,s),e&4&&-1<z1.indexOf(t)){for(;l!==null;){var i=Ta(l);if(i!==null&&uy(i),i=Vh(t,e,n,s),i===null&&Zu(t,e,s,wc,n),i===l)break;l=i}l!==null&&s.stopPropagation()}else Zu(t,e,s,null,n)}}var wc=null;function Vh(t,e,n,s){if(wc=null,t=Ym(s),t=_r(t),t!==null)if(e=$r(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wc=t,null}function xy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P1()){case Qm:return 1;case ay:return 4;case Nc:case M1:return 16;case oy:return 536870912;default:return 16}default:return 16}}var Ps=null,ep=null,rc=null;function gy(){if(rc)return rc;var t,e=ep,n=e.length,s,l="value"in Ps?Ps.value:Ps.textContent,i=l.length;for(t=0;t<n&&e[t]===l[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===l[i-s];s++);return rc=l.slice(t,1<s?1-s:void 0)}function lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zo(){return!0}function yg(){return!1}function Gt(t){function e(n,s,l,i,o){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zo:yg,this.isPropagationStopped=yg,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),e}var Ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=Gt(Ql),Ia=ze({},Ql,{view:0,detail:0}),K1=Gt(Ia),Vu,Hu,Mi,od=ze({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mi&&(Mi&&t.type==="mousemove"?(Vu=t.screenX-Mi.screenX,Hu=t.screenY-Mi.screenY):Hu=Vu=0,Mi=t),Vu)},movementY:function(t){return"movementY"in t?t.movementY:Hu}}),bg=Gt(od),G1=ze({},od,{dataTransfer:0}),q1=Gt(G1),Y1=ze({},Ia,{relatedTarget:0}),Ku=Gt(Y1),Q1=ze({},Ql,{animationName:0,elapsedTime:0,pseudoElement:0}),J1=Gt(Q1),X1=ze({},Ql,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z1=Gt(X1),e2=ze({},Ql,{data:0}),Ng=Gt(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s2[t])?!!e[t]:!1}function np(){return r2}var l2=ze({},Ia,{key:function(t){if(t.key){var e=t2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i2=Gt(l2),a2=ze({},od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_g=Gt(a2),o2=ze({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),c2=Gt(o2),d2=ze({},Ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=Gt(d2),h2=ze({},od,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m2=Gt(h2),p2=[9,13,27,32],sp=ns&&"CompositionEvent"in window,Gi=null;ns&&"documentMode"in document&&(Gi=document.documentMode);var f2=ns&&"TextEvent"in window&&!Gi,vy=ns&&(!sp||Gi&&8<Gi&&11>=Gi),jg=" ",wg=!1;function yy(t,e){switch(t){case"keyup":return p2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function by(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ml=!1;function x2(t,e){switch(t){case"compositionend":return by(e);case"keypress":return e.which!==32?null:(wg=!0,jg);case"textInput":return t=e.data,t===jg&&wg?null:t;default:return null}}function g2(t,e){if(ml)return t==="compositionend"||!sp&&yy(t,e)?(t=gy(),rc=ep=Ps=null,ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vy&&e.locale!=="ko"?null:e.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v2[t.type]:e==="textarea"}function Ny(t,e,n,s){Xv(s),e=Sc(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var qi=null,ua=null;function y2(t){Py(t,0)}function cd(t){var e=xl(t);if(Hv(e))return t}function b2(t,e){if(t==="change")return e}var _y=!1;if(ns){var Gu;if(ns){var qu="oninput"in document;if(!qu){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),qu=typeof Cg.oninput=="function"}Gu=qu}else Gu=!1;_y=Gu&&(!document.documentMode||9<document.documentMode)}function kg(){qi&&(qi.detachEvent("onpropertychange",jy),ua=qi=null)}function jy(t){if(t.propertyName==="value"&&cd(ua)){var e=[];Ny(e,ua,t,Ym(t)),ny(y2,e)}}function N2(t,e,n){t==="focusin"?(kg(),qi=e,ua=n,qi.attachEvent("onpropertychange",jy)):t==="focusout"&&kg()}function _2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cd(ua)}function j2(t,e){if(t==="click")return cd(e)}function w2(t,e){if(t==="input"||t==="change")return cd(e)}function S2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:S2;function ha(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!Ch.call(e,l)||!gn(t[l],e[l]))return!1}return!0}function Eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ig(t,e){var n=Eg(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Eg(n)}}function wy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sy(){for(var t=window,e=vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vc(t.document)}return e}function rp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function C2(t){var e=Sy(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wy(n.ownerDocument.documentElement,n)){if(s!==null&&rp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var l=n.textContent.length,i=Math.min(s.start,l);s=s.end===void 0?i:Math.min(s.end,l),!t.extend&&i>s&&(l=s,s=i,i=l),l=Ig(n,i);var o=Ig(n,s);l&&o&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k2=ns&&"documentMode"in document&&11>=document.documentMode,pl=null,Hh=null,Yi=null,Kh=!1;function Tg(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||pl==null||pl!==vc(s)||(s=pl,"selectionStart"in s&&rp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Yi&&ha(Yi,s)||(Yi=s,s=Sc(Hh,"onSelect"),0<s.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=pl)))}function Bo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fl={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionend:Bo("Transition","TransitionEnd")},Yu={},Cy={};ns&&(Cy=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function dd(t){if(Yu[t])return Yu[t];if(!fl[t])return t;var e=fl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cy)return Yu[t]=e[n];return t}var ky=dd("animationend"),Ey=dd("animationiteration"),Iy=dd("animationstart"),Ty=dd("transitionend"),Ry=new Map,Rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(t,e){Ry.set(t,e),Ur(e,[t])}for(var Qu=0;Qu<Rg.length;Qu++){var Ju=Rg[Qu],E2=Ju.toLowerCase(),I2=Ju[0].toUpperCase()+Ju.slice(1);Qs(E2,"on"+I2)}Qs(ky,"onAnimationEnd");Qs(Ey,"onAnimationIteration");Qs(Iy,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(Ty,"onTransitionEnd");Ll("onMouseEnter",["mouseout","mouseover"]);Ll("onMouseLeave",["mouseout","mouseover"]);Ll("onPointerEnter",["pointerout","pointerover"]);Ll("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function Pg(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,E1(s,e,void 0,t),t.currentTarget=null}function Py(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],l=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var d=s[o],u=d.instance,m=d.currentTarget;if(d=d.listener,u!==i&&l.isPropagationStopped())break e;Pg(l,d,m),i=u}else for(o=0;o<s.length;o++){if(d=s[o],u=d.instance,m=d.currentTarget,d=d.listener,u!==i&&l.isPropagationStopped())break e;Pg(l,d,m),i=u}}}if(bc)throw t=zh,bc=!1,zh=null,t}function Pe(t,e){var n=e[Jh];n===void 0&&(n=e[Jh]=new Set);var s=t+"__bubble";n.has(s)||(My(e,t,2,!1),n.add(s))}function Xu(t,e,n){var s=0;e&&(s|=4),My(n,t,s,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[Wo]){t[Wo]=!0,$v.forEach(function(n){n!=="selectionchange"&&(T2.has(n)||Xu(n,!1,t),Xu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,Xu("selectionchange",!1,e))}}function My(t,e,n,s){switch(xy(e)){case 1:var l=V1;break;case 4:l=H1;break;default:l=Zm}n=l.bind(null,e,n,t),l=void 0,!$h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),s?l!==void 0?t.addEventListener(e,n,{capture:!0,passive:l}):t.addEventListener(e,n,!0):l!==void 0?t.addEventListener(e,n,{passive:l}):t.addEventListener(e,n,!1)}function Zu(t,e,n,s,l){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var d=s.stateNode.containerInfo;if(d===l||d.nodeType===8&&d.parentNode===l)break;if(o===4)for(o=s.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;o=o.return}for(;d!==null;){if(o=_r(d),o===null)return;if(u=o.tag,u===5||u===6){s=i=o;continue e}d=d.parentNode}}s=s.return}ny(function(){var m=i,b=Ym(n),v=[];e:{var _=Ry.get(t);if(_!==void 0){var I=tp,D=t;switch(t){case"keypress":if(lc(n)===0)break e;case"keydown":case"keyup":I=i2;break;case"focusin":D="focus",I=Ku;break;case"focusout":D="blur",I=Ku;break;case"beforeblur":case"afterblur":I=Ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=q1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=c2;break;case ky:case Ey:case Iy:I=J1;break;case Ty:I=u2;break;case"scroll":I=K1;break;case"wheel":I=m2;break;case"copy":case"cut":case"paste":I=Z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=_g}var U=(e&4)!==0,oe=!U&&t==="scroll",S=U?_!==null?_+"Capture":null:_;U=[];for(var j=m,C;j!==null;){C=j;var P=C.stateNode;if(C.tag===5&&P!==null&&(C=P,S!==null&&(P=aa(j,S),P!=null&&U.push(pa(j,P,C)))),oe)break;j=j.return}0<U.length&&(_=new I(_,D,null,n,b),v.push({event:_,listeners:U}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",_&&n!==Fh&&(D=n.relatedTarget||n.fromElement)&&(_r(D)||D[ss]))break e;if((I||_)&&(_=b.window===b?b:(_=b.ownerDocument)?_.defaultView||_.parentWindow:window,I?(D=n.relatedTarget||n.toElement,I=m,D=D?_r(D):null,D!==null&&(oe=$r(D),D!==oe||D.tag!==5&&D.tag!==6)&&(D=null)):(I=null,D=m),I!==D)){if(U=bg,P="onMouseLeave",S="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(U=_g,P="onPointerLeave",S="onPointerEnter",j="pointer"),oe=I==null?_:xl(I),C=D==null?_:xl(D),_=new U(P,j+"leave",I,n,b),_.target=oe,_.relatedTarget=C,P=null,_r(b)===m&&(U=new U(S,j+"enter",D,n,b),U.target=C,U.relatedTarget=oe,P=U),oe=P,I&&D)t:{for(U=I,S=D,j=0,C=U;C;C=cl(C))j++;for(C=0,P=S;P;P=cl(P))C++;for(;0<j-C;)U=cl(U),j--;for(;0<C-j;)S=cl(S),C--;for(;j--;){if(U===S||S!==null&&U===S.alternate)break t;U=cl(U),S=cl(S)}U=null}else U=null;I!==null&&Mg(v,_,I,U,!1),D!==null&&oe!==null&&Mg(v,oe,D,U,!0)}}e:{if(_=m?xl(m):window,I=_.nodeName&&_.nodeName.toLowerCase(),I==="select"||I==="input"&&_.type==="file")var K=b2;else if(Sg(_))if(_y)K=w2;else{K=_2;var z=N2}else(I=_.nodeName)&&I.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(K=j2);if(K&&(K=K(t,m))){Ny(v,K,n,b);break e}z&&z(t,_,m),t==="focusout"&&(z=_._wrapperState)&&z.controlled&&_.type==="number"&&Mh(_,"number",_.value)}switch(z=m?xl(m):window,t){case"focusin":(Sg(z)||z.contentEditable==="true")&&(pl=z,Hh=m,Yi=null);break;case"focusout":Yi=Hh=pl=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Tg(v,n,b);break;case"selectionchange":if(k2)break;case"keydown":case"keyup":Tg(v,n,b)}var Q;if(sp)e:{switch(t){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else ml?yy(t,n)&&(X="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(X="onCompositionStart");X&&(vy&&n.locale!=="ko"&&(ml||X!=="onCompositionStart"?X==="onCompositionEnd"&&ml&&(Q=gy()):(Ps=b,ep="value"in Ps?Ps.value:Ps.textContent,ml=!0)),z=Sc(m,X),0<z.length&&(X=new Ng(X,t,null,n,b),v.push({event:X,listeners:z}),Q?X.data=Q:(Q=by(n),Q!==null&&(X.data=Q)))),(Q=f2?x2(t,n):g2(t,n))&&(m=Sc(m,"onBeforeInput"),0<m.length&&(b=new Ng("onBeforeInput","beforeinput",null,n,b),v.push({event:b,listeners:m}),b.data=Q))}Py(v,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",s=[];t!==null;){var l=t,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=aa(t,n),i!=null&&s.unshift(pa(t,i,l)),i=aa(t,e),i!=null&&s.push(pa(t,i,l))),t=t.return}return s}function cl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mg(t,e,n,s,l){for(var i=e._reactName,o=[];n!==null&&n!==s;){var d=n,u=d.alternate,m=d.stateNode;if(u!==null&&u===s)break;d.tag===5&&m!==null&&(d=m,l?(u=aa(n,i),u!=null&&o.unshift(pa(n,u,d))):l||(u=aa(n,i),u!=null&&o.push(pa(n,u,d)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var R2=/\r\n?/g,P2=/\u0000|\uFFFD/g;function Ag(t){return(typeof t=="string"?t:""+t).replace(R2,`
`).replace(P2,"")}function Vo(t,e,n){if(e=Ag(e),Ag(t)!==e&&n)throw Error(L(425))}function Cc(){}var Gh=null,qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qh=typeof setTimeout=="function"?setTimeout:void 0,M2=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(t){return Og.resolve(null).then(t).catch(O2)}:Qh;function O2(t){setTimeout(function(){throw t})}function eh(t,e){var n=e,s=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){t.removeChild(l),da(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);da(e)}function Fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Jl,fa="__reactProps$"+Jl,ss="__reactContainer$"+Jl,Jh="__reactEvents$"+Jl,D2="__reactListeners$"+Jl,L2="__reactHandles$"+Jl;function _r(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ss]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dg(t);t!==null;){if(n=t[Sn])return n;t=Dg(t)}return e}t=n,n=t.parentNode}return null}function Ta(t){return t=t[Sn]||t[ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function ud(t){return t[fa]||null}var Xh=[],gl=-1;function Js(t){return{current:t}}function Oe(t){0>gl||(t.current=Xh[gl],Xh[gl]=null,gl--)}function Ie(t,e){gl++,Xh[gl]=t.current,t.current=e}var qs={},bt=Js(qs),Dt=Js(!1),Ir=qs;function Fl(t,e){var n=t.type.contextTypes;if(!n)return qs;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=l),l}function Lt(t){return t=t.childContextTypes,t!=null}function kc(){Oe(Dt),Oe(bt)}function Lg(t,e,n){if(bt.current!==qs)throw Error(L(168));Ie(bt,e),Ie(Dt,n)}function Ay(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in e))throw Error(L(108,N1(t)||"Unknown",l));return ze({},n,s)}function Ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qs,Ir=bt.current,Ie(bt,t),Ie(Dt,Dt.current),!0}function Fg(t,e,n){var s=t.stateNode;if(!s)throw Error(L(169));n?(t=Ay(t,e,Ir),s.__reactInternalMemoizedMergedChildContext=t,Oe(Dt),Oe(bt),Ie(bt,t)):Oe(Dt),Ie(Dt,n)}var Gn=null,hd=!1,th=!1;function Oy(t){Gn===null?Gn=[t]:Gn.push(t)}function F2(t){hd=!0,Oy(t)}function Xs(){if(!th&&Gn!==null){th=!0;var t=0,e=we;try{var n=Gn;for(we=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Gn=null,hd=!1}catch(l){throw Gn!==null&&(Gn=Gn.slice(t+1)),iy(Qm,Xs),l}finally{we=e,th=!1}}return null}var vl=[],yl=0,Ic=null,Tc=0,Jt=[],Xt=0,Tr=null,qn=1,Yn="";function vr(t,e){vl[yl++]=Tc,vl[yl++]=Ic,Ic=t,Tc=e}function Dy(t,e,n){Jt[Xt++]=qn,Jt[Xt++]=Yn,Jt[Xt++]=Tr,Tr=t;var s=qn;t=Yn;var l=32-pn(s)-1;s&=~(1<<l),n+=1;var i=32-pn(e)+l;if(30<i){var o=l-l%5;i=(s&(1<<o)-1).toString(32),s>>=o,l-=o,qn=1<<32-pn(e)+l|n<<l|s,Yn=i+t}else qn=1<<i|n<<l|s,Yn=t}function lp(t){t.return!==null&&(vr(t,1),Dy(t,1,0))}function ip(t){for(;t===Ic;)Ic=vl[--yl],vl[yl]=null,Tc=vl[--yl],vl[yl]=null;for(;t===Tr;)Tr=Jt[--Xt],Jt[Xt]=null,Yn=Jt[--Xt],Jt[Xt]=null,qn=Jt[--Xt],Jt[Xt]=null}var Wt=null,Bt=null,Le=!1,un=null;function Ly(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=Fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tr!==null?{id:qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Bt=null,!0):!1;default:return!1}}function Zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function em(t){if(Le){var e=Bt;if(e){var n=e;if(!Ug(t,e)){if(Zh(t))throw Error(L(418));e=Fs(n.nextSibling);var s=Wt;e&&Ug(t,e)?Ly(s,n):(t.flags=t.flags&-4097|2,Le=!1,Wt=t)}}else{if(Zh(t))throw Error(L(418));t.flags=t.flags&-4097|2,Le=!1,Wt=t}}}function $g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Ho(t){if(t!==Wt)return!1;if(!Le)return $g(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Bt)){if(Zh(t))throw Fy(),Error(L(418));for(;e;)Ly(t,e),e=Fs(e.nextSibling)}if($g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Wt?Fs(t.stateNode.nextSibling):null;return!0}function Fy(){for(var t=Bt;t;)t=Fs(t.nextSibling)}function Ul(){Bt=Wt=null,Le=!1}function ap(t){un===null?un=[t]:un.push(t)}var U2=ds.ReactCurrentBatchConfig;function Ai(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var s=n.stateNode}if(!s)throw Error(L(147,t));var l=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var d=l.refs;o===null?delete d[i]:d[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zg(t){var e=t._init;return e(t._payload)}function Uy(t){function e(S,j){if(t){var C=S.deletions;C===null?(S.deletions=[j],S.flags|=16):C.push(j)}}function n(S,j){if(!t)return null;for(;j!==null;)e(S,j),j=j.sibling;return null}function s(S,j){for(S=new Map;j!==null;)j.key!==null?S.set(j.key,j):S.set(j.index,j),j=j.sibling;return S}function l(S,j){return S=Bs(S,j),S.index=0,S.sibling=null,S}function i(S,j,C){return S.index=C,t?(C=S.alternate,C!==null?(C=C.index,C<j?(S.flags|=2,j):C):(S.flags|=2,j)):(S.flags|=1048576,j)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function d(S,j,C,P){return j===null||j.tag!==6?(j=oh(C,S.mode,P),j.return=S,j):(j=l(j,C),j.return=S,j)}function u(S,j,C,P){var K=C.type;return K===hl?b(S,j,C.props.children,P,C.key):j!==null&&(j.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===js&&zg(K)===j.type)?(P=l(j,C.props),P.ref=Ai(S,j,C),P.return=S,P):(P=hc(C.type,C.key,C.props,null,S.mode,P),P.ref=Ai(S,j,C),P.return=S,P)}function m(S,j,C,P){return j===null||j.tag!==4||j.stateNode.containerInfo!==C.containerInfo||j.stateNode.implementation!==C.implementation?(j=ch(C,S.mode,P),j.return=S,j):(j=l(j,C.children||[]),j.return=S,j)}function b(S,j,C,P,K){return j===null||j.tag!==7?(j=kr(C,S.mode,P,K),j.return=S,j):(j=l(j,C),j.return=S,j)}function v(S,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return j=oh(""+j,S.mode,C),j.return=S,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Oo:return C=hc(j.type,j.key,j.props,null,S.mode,C),C.ref=Ai(S,null,j),C.return=S,C;case ul:return j=ch(j,S.mode,C),j.return=S,j;case js:var P=j._init;return v(S,P(j._payload),C)}if(Bi(j)||Ii(j))return j=kr(j,S.mode,C,null),j.return=S,j;Ko(S,j)}return null}function _(S,j,C,P){var K=j!==null?j.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return K!==null?null:d(S,j,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Oo:return C.key===K?u(S,j,C,P):null;case ul:return C.key===K?m(S,j,C,P):null;case js:return K=C._init,_(S,j,K(C._payload),P)}if(Bi(C)||Ii(C))return K!==null?null:b(S,j,C,P,null);Ko(S,C)}return null}function I(S,j,C,P,K){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(C)||null,d(j,S,""+P,K);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Oo:return S=S.get(P.key===null?C:P.key)||null,u(j,S,P,K);case ul:return S=S.get(P.key===null?C:P.key)||null,m(j,S,P,K);case js:var z=P._init;return I(S,j,C,z(P._payload),K)}if(Bi(P)||Ii(P))return S=S.get(C)||null,b(j,S,P,K,null);Ko(j,P)}return null}function D(S,j,C,P){for(var K=null,z=null,Q=j,X=j=0,Se=null;Q!==null&&X<C.length;X++){Q.index>X?(Se=Q,Q=null):Se=Q.sibling;var ue=_(S,Q,C[X],P);if(ue===null){Q===null&&(Q=Se);break}t&&Q&&ue.alternate===null&&e(S,Q),j=i(ue,j,X),z===null?K=ue:z.sibling=ue,z=ue,Q=Se}if(X===C.length)return n(S,Q),Le&&vr(S,X),K;if(Q===null){for(;X<C.length;X++)Q=v(S,C[X],P),Q!==null&&(j=i(Q,j,X),z===null?K=Q:z.sibling=Q,z=Q);return Le&&vr(S,X),K}for(Q=s(S,Q);X<C.length;X++)Se=I(Q,S,X,C[X],P),Se!==null&&(t&&Se.alternate!==null&&Q.delete(Se.key===null?X:Se.key),j=i(Se,j,X),z===null?K=Se:z.sibling=Se,z=Se);return t&&Q.forEach(function(Nt){return e(S,Nt)}),Le&&vr(S,X),K}function U(S,j,C,P){var K=Ii(C);if(typeof K!="function")throw Error(L(150));if(C=K.call(C),C==null)throw Error(L(151));for(var z=K=null,Q=j,X=j=0,Se=null,ue=C.next();Q!==null&&!ue.done;X++,ue=C.next()){Q.index>X?(Se=Q,Q=null):Se=Q.sibling;var Nt=_(S,Q,ue.value,P);if(Nt===null){Q===null&&(Q=Se);break}t&&Q&&Nt.alternate===null&&e(S,Q),j=i(Nt,j,X),z===null?K=Nt:z.sibling=Nt,z=Nt,Q=Se}if(ue.done)return n(S,Q),Le&&vr(S,X),K;if(Q===null){for(;!ue.done;X++,ue=C.next())ue=v(S,ue.value,P),ue!==null&&(j=i(ue,j,X),z===null?K=ue:z.sibling=ue,z=ue);return Le&&vr(S,X),K}for(Q=s(S,Q);!ue.done;X++,ue=C.next())ue=I(Q,S,X,ue.value,P),ue!==null&&(t&&ue.alternate!==null&&Q.delete(ue.key===null?X:ue.key),j=i(ue,j,X),z===null?K=ue:z.sibling=ue,z=ue);return t&&Q.forEach(function(tr){return e(S,tr)}),Le&&vr(S,X),K}function oe(S,j,C,P){if(typeof C=="object"&&C!==null&&C.type===hl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Oo:e:{for(var K=C.key,z=j;z!==null;){if(z.key===K){if(K=C.type,K===hl){if(z.tag===7){n(S,z.sibling),j=l(z,C.props.children),j.return=S,S=j;break e}}else if(z.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===js&&zg(K)===z.type){n(S,z.sibling),j=l(z,C.props),j.ref=Ai(S,z,C),j.return=S,S=j;break e}n(S,z);break}else e(S,z);z=z.sibling}C.type===hl?(j=kr(C.props.children,S.mode,P,C.key),j.return=S,S=j):(P=hc(C.type,C.key,C.props,null,S.mode,P),P.ref=Ai(S,j,C),P.return=S,S=P)}return o(S);case ul:e:{for(z=C.key;j!==null;){if(j.key===z)if(j.tag===4&&j.stateNode.containerInfo===C.containerInfo&&j.stateNode.implementation===C.implementation){n(S,j.sibling),j=l(j,C.children||[]),j.return=S,S=j;break e}else{n(S,j);break}else e(S,j);j=j.sibling}j=ch(C,S.mode,P),j.return=S,S=j}return o(S);case js:return z=C._init,oe(S,j,z(C._payload),P)}if(Bi(C))return D(S,j,C,P);if(Ii(C))return U(S,j,C,P);Ko(S,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,j!==null&&j.tag===6?(n(S,j.sibling),j=l(j,C),j.return=S,S=j):(n(S,j),j=oh(C,S.mode,P),j.return=S,S=j),o(S)):n(S,j)}return oe}var $l=Uy(!0),$y=Uy(!1),Rc=Js(null),Pc=null,bl=null,op=null;function cp(){op=bl=Pc=null}function dp(t){var e=Rc.current;Oe(Rc),t._currentValue=e}function tm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Tl(t,e){Pc=t,op=bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(op!==t)if(t={context:t,memoizedValue:e,next:null},bl===null){if(Pc===null)throw Error(L(308));bl=t,Pc.dependencies={lanes:0,firstContext:t}}else bl=bl.next=t;return e}var jr=null;function up(t){jr===null?jr=[t]:jr.push(t)}function zy(t,e,n,s){var l=e.interleaved;return l===null?(n.next=n,up(e)):(n.next=l.next,l.next=n),e.interleaved=n,rs(t,s)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ws=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function By(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ve&2){var l=s.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),s.pending=e,rs(t,n)}return l=s.interleaved,l===null?(e.next=e,up(s)):(e.next=l.next,l.next=e),s.interleaved=e,rs(t,n)}function ic(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Jm(t,n)}}function Bg(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?l=i=e:i=i.next=e}else l=i=e;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mc(t,e,n,s){var l=t.updateQueue;ws=!1;var i=l.firstBaseUpdate,o=l.lastBaseUpdate,d=l.shared.pending;if(d!==null){l.shared.pending=null;var u=d,m=u.next;u.next=null,o===null?i=m:o.next=m,o=u;var b=t.alternate;b!==null&&(b=b.updateQueue,d=b.lastBaseUpdate,d!==o&&(d===null?b.firstBaseUpdate=m:d.next=m,b.lastBaseUpdate=u))}if(i!==null){var v=l.baseState;o=0,b=m=u=null,d=i;do{var _=d.lane,I=d.eventTime;if((s&_)===_){b!==null&&(b=b.next={eventTime:I,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var D=t,U=d;switch(_=e,I=n,U.tag){case 1:if(D=U.payload,typeof D=="function"){v=D.call(I,v,_);break e}v=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=U.payload,_=typeof D=="function"?D.call(I,v,_):D,_==null)break e;v=ze({},v,_);break e;case 2:ws=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,_=l.effects,_===null?l.effects=[d]:_.push(d))}else I={eventTime:I,lane:_,tag:d.tag,payload:d.payload,callback:d.callback,next:null},b===null?(m=b=I,u=v):b=b.next=I,o|=_;if(d=d.next,d===null){if(d=l.shared.pending,d===null)break;_=d,d=_.next,_.next=null,l.lastBaseUpdate=_,l.shared.pending=null}}while(!0);if(b===null&&(u=v),l.baseState=u,l.firstBaseUpdate=m,l.lastBaseUpdate=b,e=l.shared.interleaved,e!==null){l=e;do o|=l.lane,l=l.next;while(l!==e)}else i===null&&(l.shared.lanes=0);Pr|=o,t.lanes=o,t.memoizedState=v}}function Wg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(L(191,l));l.call(s)}}}var Ra={},En=Js(Ra),xa=Js(Ra),ga=Js(Ra);function wr(t){if(t===Ra)throw Error(L(174));return t}function mp(t,e){switch(Ie(ga,e),Ie(xa,t),Ie(En,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oh(e,t)}Oe(En),Ie(En,e)}function zl(){Oe(En),Oe(xa),Oe(ga)}function Wy(t){wr(ga.current);var e=wr(En.current),n=Oh(e,t.type);e!==n&&(Ie(xa,t),Ie(En,n))}function pp(t){xa.current===t&&(Oe(En),Oe(xa))}var Ue=Js(0);function Ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nh=[];function fp(){for(var t=0;t<nh.length;t++)nh[t]._workInProgressVersionPrimary=null;nh.length=0}var ac=ds.ReactCurrentDispatcher,sh=ds.ReactCurrentBatchConfig,Rr=0,$e=null,Ye=null,st=null,Oc=!1,Qi=!1,va=0,$2=0;function pt(){throw Error(L(321))}function xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function gp(t,e,n,s,l,i){if(Rr=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?V2:H2,t=n(s,l),Qi){i=0;do{if(Qi=!1,va=0,25<=i)throw Error(L(301));i+=1,st=Ye=null,e.updateQueue=null,ac.current=K2,t=n(s,l)}while(Qi)}if(ac.current=Dc,e=Ye!==null&&Ye.next!==null,Rr=0,st=Ye=$e=null,Oc=!1,e)throw Error(L(300));return t}function vp(){var t=va!==0;return va=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?$e.memoizedState=st=t:st=st.next=t,st}function sn(){if(Ye===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=st===null?$e.memoizedState:st.next;if(e!==null)st=e,Ye=t;else{if(t===null)throw Error(L(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},st===null?$e.memoizedState=st=t:st=st.next=t}return st}function ya(t,e){return typeof e=="function"?e(t):e}function rh(t){var e=sn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var s=Ye,l=s.baseQueue,i=n.pending;if(i!==null){if(l!==null){var o=l.next;l.next=i.next,i.next=o}s.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,s=s.baseState;var d=o=null,u=null,m=i;do{var b=m.lane;if((Rr&b)===b)u!==null&&(u=u.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),s=m.hasEagerState?m.eagerState:t(s,m.action);else{var v={lane:b,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};u===null?(d=u=v,o=s):u=u.next=v,$e.lanes|=b,Pr|=b}m=m.next}while(m!==null&&m!==i);u===null?o=s:u.next=d,gn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=u,n.lastRenderedState=s}if(t=n.interleaved,t!==null){l=t;do i=l.lane,$e.lanes|=i,Pr|=i,l=l.next;while(l!==t)}else l===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lh(t){var e=sn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var s=n.dispatch,l=n.pending,i=e.memoizedState;if(l!==null){n.pending=null;var o=l=l.next;do i=t(i,o.action),o=o.next;while(o!==l);gn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Vy(){}function Hy(t,e){var n=$e,s=sn(),l=e(),i=!gn(s.memoizedState,l);if(i&&(s.memoizedState=l,At=!0),s=s.queue,yp(qy.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,ba(9,Gy.bind(null,n,s,l,e),void 0,null),it===null)throw Error(L(349));Rr&30||Ky(n,e,l)}return l}function Ky(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gy(t,e,n,s){e.value=n,e.getSnapshot=s,Yy(e)&&Qy(t)}function qy(t,e,n){return n(function(){Yy(e)&&Qy(t)})}function Yy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function Qy(t){var e=rs(t,1);e!==null&&fn(e,t,1,-1)}function Vg(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},e.queue=t,t=t.dispatch=W2.bind(null,$e,t),[e.memoizedState,t]}function ba(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Jy(){return sn().memoizedState}function oc(t,e,n,s){var l=wn();$e.flags|=t,l.memoizedState=ba(1|e,n,void 0,s===void 0?null:s)}function md(t,e,n,s){var l=sn();s=s===void 0?null:s;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,s!==null&&xp(s,o.deps)){l.memoizedState=ba(e,n,i,s);return}}$e.flags|=t,l.memoizedState=ba(1|e,n,i,s)}function Hg(t,e){return oc(8390656,8,t,e)}function yp(t,e){return md(2048,8,t,e)}function Xy(t,e){return md(4,2,t,e)}function Zy(t,e){return md(4,4,t,e)}function eb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tb(t,e,n){return n=n!=null?n.concat([t]):null,md(4,4,eb.bind(null,e,t),n)}function bp(){}function nb(t,e){var n=sn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&xp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function sb(t,e){var n=sn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&xp(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function rb(t,e,n){return Rr&21?(gn(n,e)||(n=cy(),$e.lanes|=n,Pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function z2(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var s=sh.transition;sh.transition={};try{t(!1),e()}finally{we=n,sh.transition=s}}function lb(){return sn().memoizedState}function B2(t,e,n){var s=zs(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},ib(t))ab(e,n);else if(n=zy(t,e,n,s),n!==null){var l=wt();fn(n,t,s,l),ob(n,e,s)}}function W2(t,e,n){var s=zs(t),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(ib(t))ab(e,l);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,d=i(o,n);if(l.hasEagerState=!0,l.eagerState=d,gn(d,o)){var u=e.interleaved;u===null?(l.next=l,up(e)):(l.next=u.next,u.next=l),e.interleaved=l;return}}catch{}finally{}n=zy(t,e,l,s),n!==null&&(l=wt(),fn(n,t,s,l),ob(n,e,s))}}function ib(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function ab(t,e){Qi=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ob(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Jm(t,n)}}var Dc={readContext:nn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},V2={readContext:nn,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:Hg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oc(4194308,4,eb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return oc(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=wn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=B2.bind(null,$e,t),[s.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:Vg,useDebugValue:bp,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=Vg(!1),e=t[0];return t=z2.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=$e,l=wn();if(Le){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),it===null)throw Error(L(349));Rr&30||Ky(s,e,n)}l.memoizedState=n;var i={value:n,getSnapshot:e};return l.queue=i,Hg(qy.bind(null,s,i,t),[t]),s.flags|=2048,ba(9,Gy.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=wn(),e=it.identifierPrefix;if(Le){var n=Yn,s=qn;n=(s&~(1<<32-pn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H2={readContext:nn,useCallback:nb,useContext:nn,useEffect:yp,useImperativeHandle:tb,useInsertionEffect:Xy,useLayoutEffect:Zy,useMemo:sb,useReducer:rh,useRef:Jy,useState:function(){return rh(ya)},useDebugValue:bp,useDeferredValue:function(t){var e=sn();return rb(e,Ye.memoizedState,t)},useTransition:function(){var t=rh(ya)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Vy,useSyncExternalStore:Hy,useId:lb,unstable_isNewReconciler:!1},K2={readContext:nn,useCallback:nb,useContext:nn,useEffect:yp,useImperativeHandle:tb,useInsertionEffect:Xy,useLayoutEffect:Zy,useMemo:sb,useReducer:lh,useRef:Jy,useState:function(){return lh(ya)},useDebugValue:bp,useDeferredValue:function(t){var e=sn();return Ye===null?e.memoizedState=t:rb(e,Ye.memoizedState,t)},useTransition:function(){var t=lh(ya)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Vy,useSyncExternalStore:Hy,useId:lb,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pd={isMounted:function(t){return(t=t._reactInternals)?$r(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=wt(),l=zs(t),i=es(s,l);i.payload=e,n!=null&&(i.callback=n),e=Us(t,i,l),e!==null&&(fn(e,t,l,s),ic(e,t,l))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=wt(),l=zs(t),i=es(s,l);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Us(t,i,l),e!==null&&(fn(e,t,l,s),ic(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),s=zs(t),l=es(n,s);l.tag=2,e!=null&&(l.callback=e),e=Us(t,l,s),e!==null&&(fn(e,t,s,n),ic(e,t,s))}};function Kg(t,e,n,s,l,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ha(n,s)||!ha(l,i):!0}function cb(t,e,n){var s=!1,l=qs,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(l=Lt(e)?Ir:bt.current,s=e.contextTypes,i=(s=s!=null)?Fl(t,l):qs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pd,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gg(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&pd.enqueueReplaceState(e,e.state,null)}function sm(t,e,n,s){var l=t.stateNode;l.props=n,l.state=t.memoizedState,l.refs={},hp(t);var i=e.contextType;typeof i=="object"&&i!==null?l.context=nn(i):(i=Lt(e)?Ir:bt.current,l.context=Fl(t,i)),l.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nm(t,e,i,n),l.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&pd.enqueueReplaceState(l,l.state,null),Mc(t,n,l,s),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Bl(t,e){try{var n="",s=e;do n+=b1(s),s=s.return;while(s);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:l,digest:null}}function ih(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function db(t,e,n){n=es(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Fc||(Fc=!0,pm=s),rm(t,e)},n}function ub(t,e,n){n=es(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var l=e.value;n.payload=function(){return s(l)},n.callback=function(){rm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rm(t,e),typeof s!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qg(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new G2;var l=new Set;s.set(e,l)}else l=s.get(e),l===void 0&&(l=new Set,s.set(e,l));l.has(n)||(l.add(n),t=aS.bind(null,t,e,n),e.then(t,t))}function Yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,n,s,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=es(-1,1),e.tag=2,Us(n,e,1))),n.lanes|=1),t)}var q2=ds.ReactCurrentOwner,At=!1;function jt(t,e,n,s){e.child=t===null?$y(e,null,n,s):$l(e,t.child,n,s)}function Jg(t,e,n,s,l){n=n.render;var i=e.ref;return Tl(e,l),s=gp(t,e,n,s,i,l),n=vp(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,ls(t,e,l)):(Le&&n&&lp(e),e.flags|=1,jt(t,e,s,l),e.child)}function Xg(t,e,n,s,l){if(t===null){var i=n.type;return typeof i=="function"&&!Ep(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,hb(t,e,i,s,l)):(t=hc(n.type,null,s,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&l)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ha,n(o,s)&&t.ref===e.ref)return ls(t,e,l)}return e.flags|=1,t=Bs(i,s),t.ref=e.ref,t.return=e,e.child=t}function hb(t,e,n,s,l){if(t!==null){var i=t.memoizedProps;if(ha(i,s)&&t.ref===e.ref)if(At=!1,e.pendingProps=s=i,(t.lanes&l)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,ls(t,e,l)}return lm(t,e,n,s,l)}function mb(t,e,n){var s=e.pendingProps,l=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(_l,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(_l,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Ie(_l,zt),zt|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Ie(_l,zt),zt|=s;return jt(t,e,l,n),e.child}function pb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lm(t,e,n,s,l){var i=Lt(n)?Ir:bt.current;return i=Fl(e,i),Tl(e,l),n=gp(t,e,n,s,i,l),s=vp(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,ls(t,e,l)):(Le&&s&&lp(e),e.flags|=1,jt(t,e,n,l),e.child)}function Zg(t,e,n,s,l){if(Lt(n)){var i=!0;Ec(e)}else i=!1;if(Tl(e,l),e.stateNode===null)cc(t,e),cb(e,n,s),sm(e,n,s,l),s=!0;else if(t===null){var o=e.stateNode,d=e.memoizedProps;o.props=d;var u=o.context,m=n.contextType;typeof m=="object"&&m!==null?m=nn(m):(m=Lt(n)?Ir:bt.current,m=Fl(e,m));var b=n.getDerivedStateFromProps,v=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==s||u!==m)&&Gg(e,o,s,m),ws=!1;var _=e.memoizedState;o.state=_,Mc(e,s,o,l),u=e.memoizedState,d!==s||_!==u||Dt.current||ws?(typeof b=="function"&&(nm(e,n,b,s),u=e.memoizedState),(d=ws||Kg(e,n,d,s,_,u,m))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),o.props=s,o.state=u,o.context=m,s=d):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,By(t,e),d=e.memoizedProps,m=e.type===e.elementType?d:cn(e.type,d),o.props=m,v=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=nn(u):(u=Lt(n)?Ir:bt.current,u=Fl(e,u));var I=n.getDerivedStateFromProps;(b=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==v||_!==u)&&Gg(e,o,s,u),ws=!1,_=e.memoizedState,o.state=_,Mc(e,s,o,l);var D=e.memoizedState;d!==v||_!==D||Dt.current||ws?(typeof I=="function"&&(nm(e,n,I,s),D=e.memoizedState),(m=ws||Kg(e,n,m,s,_,D,u)||!1)?(b||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,D,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,D,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=D),o.props=s,o.state=D,o.context=u,s=m):(typeof o.componentDidUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),s=!1)}return im(t,e,n,s,i,l)}function im(t,e,n,s,l,i){pb(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return l&&Fg(e,n,!1),ls(t,e,i);s=e.stateNode,q2.current=e;var d=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=$l(e,t.child,null,i),e.child=$l(e,null,d,i)):jt(t,e,d,i),e.memoizedState=s.state,l&&Fg(e,n,!0),e.child}function fb(t){var e=t.stateNode;e.pendingContext?Lg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lg(t,e.context,!1),mp(t,e.containerInfo)}function e0(t,e,n,s,l){return Ul(),ap(l),e.flags|=256,jt(t,e,n,s),e.child}var am={dehydrated:null,treeContext:null,retryLane:0};function om(t){return{baseLanes:t,cachePool:null,transitions:null}}function xb(t,e,n){var s=e.pendingProps,l=Ue.current,i=!1,o=(e.flags&128)!==0,d;if((d=o)||(d=t!==null&&t.memoizedState===null?!1:(l&2)!==0),d?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Ie(Ue,l&1),t===null)return em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gd(o,s,0,null),t=kr(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=om(n),e.memoizedState=am,t):Np(e,o));if(l=t.memoizedState,l!==null&&(d=l.dehydrated,d!==null))return Y2(t,e,o,s,d,l,n);if(i){i=s.fallback,o=e.mode,l=t.child,d=l.sibling;var u={mode:"hidden",children:s.children};return!(o&1)&&e.child!==l?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=Bs(l,u),s.subtreeFlags=l.subtreeFlags&14680064),d!==null?i=Bs(d,i):(i=kr(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?om(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=am,s}return i=t.child,t=i.sibling,s=Bs(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Np(t,e){return e=gd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Go(t,e,n,s){return s!==null&&ap(s),$l(e,t.child,null,n),t=Np(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Y2(t,e,n,s,l,i,o){if(n)return e.flags&256?(e.flags&=-257,s=ih(Error(L(422))),Go(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,l=e.mode,s=gd({mode:"visible",children:s.children},l,0,null),i=kr(i,l,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&$l(e,t.child,null,o),e.child.memoizedState=om(o),e.memoizedState=am,i);if(!(e.mode&1))return Go(t,e,o,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var d=s.dgst;return s=d,i=Error(L(419)),s=ih(i,s,void 0),Go(t,e,o,s)}if(d=(o&t.childLanes)!==0,At||d){if(s=it,s!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|o)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,rs(t,l),fn(s,t,l,-1))}return kp(),s=ih(Error(L(421))),Go(t,e,o,s)}return l.data==="$?"?(e.flags|=128,e.child=t.child,e=oS.bind(null,t),l._reactRetry=e,null):(t=i.treeContext,Bt=Fs(l.nextSibling),Wt=e,Le=!0,un=null,t!==null&&(Jt[Xt++]=qn,Jt[Xt++]=Yn,Jt[Xt++]=Tr,qn=t.id,Yn=t.overflow,Tr=e),e=Np(e,s.children),e.flags|=4096,e)}function t0(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),tm(t.return,e,n)}function ah(t,e,n,s,l){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=l)}function gb(t,e,n){var s=e.pendingProps,l=s.revealOrder,i=s.tail;if(jt(t,e,s.children,n),s=Ue.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,n,e);else if(t.tag===19)t0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ie(Ue,s),!(e.mode&1))e.memoizedState=null;else switch(l){case"forwards":for(n=e.child,l=null;n!==null;)t=n.alternate,t!==null&&Ac(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=e.child,e.child=null):(l=n.sibling,n.sibling=null),ah(e,!1,l,n,i);break;case"backwards":for(n=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&Ac(t)===null){e.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}ah(e,!0,n,null,i);break;case"together":ah(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q2(t,e,n){switch(e.tag){case 3:fb(e),Ul();break;case 5:Wy(e);break;case 1:Lt(e.type)&&Ec(e);break;case 4:mp(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,l=e.memoizedProps.value;Ie(Rc,s._currentValue),s._currentValue=l;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ie(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?xb(t,e,n):(Ie(Ue,Ue.current&1),t=ls(t,e,n),t!==null?t.sibling:null);Ie(Ue,Ue.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return gb(t,e,n);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ie(Ue,Ue.current),s)break;return null;case 22:case 23:return e.lanes=0,mb(t,e,n)}return ls(t,e,n)}var vb,cm,yb,bb;vb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cm=function(){};yb=function(t,e,n,s){var l=t.memoizedProps;if(l!==s){t=e.stateNode,wr(En.current);var i=null;switch(n){case"input":l=Rh(t,l),s=Rh(t,s),i=[];break;case"select":l=ze({},l,{value:void 0}),s=ze({},s,{value:void 0}),i=[];break;case"textarea":l=Ah(t,l),s=Ah(t,s),i=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Cc)}Dh(n,s);var o;n=null;for(m in l)if(!s.hasOwnProperty(m)&&l.hasOwnProperty(m)&&l[m]!=null)if(m==="style"){var d=l[m];for(o in d)d.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(la.hasOwnProperty(m)?i||(i=[]):(i=i||[]).push(m,null));for(m in s){var u=s[m];if(d=l!=null?l[m]:void 0,s.hasOwnProperty(m)&&u!==d&&(u!=null||d!=null))if(m==="style")if(d){for(o in d)!d.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&d[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(m,n)),n=u;else m==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(i=i||[]).push(m,u)):m==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(m,""+u):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(la.hasOwnProperty(m)?(u!=null&&m==="onScroll"&&Pe("scroll",t),i||d===u||(i=[])):(i=i||[]).push(m,u))}n&&(i=i||[]).push("style",n);var m=i;(e.updateQueue=m)&&(e.flags|=4)}};bb=function(t,e,n,s){n!==s&&(e.flags|=4)};function Oi(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function J2(t,e,n){var s=e.pendingProps;switch(ip(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Lt(e.type)&&kc(),ft(e),null;case 3:return s=e.stateNode,zl(),Oe(Dt),Oe(bt),fp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(gm(un),un=null))),cm(t,e),ft(e),null;case 5:pp(e);var l=wr(ga.current);if(n=e.type,t!==null&&e.stateNode!=null)yb(t,e,n,s,l),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(L(166));return ft(e),null}if(t=wr(En.current),Ho(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Sn]=e,s[fa]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(l=0;l<Vi.length;l++)Pe(Vi[l],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":dg(s,i),Pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",s);break;case"textarea":hg(s,i),Pe("invalid",s)}Dh(n,i),l=null;for(var o in i)if(i.hasOwnProperty(o)){var d=i[o];o==="children"?typeof d=="string"?s.textContent!==d&&(i.suppressHydrationWarning!==!0&&Vo(s.textContent,d,t),l=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&Vo(s.textContent,d,t),l=["children",""+d]):la.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&Pe("scroll",s)}switch(n){case"input":Do(s),ug(s,i,!0);break;case"textarea":Do(s),mg(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Cc)}s=l,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Sn]=e,t[fa]=s,vb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lh(n,s),n){case"dialog":Pe("cancel",t),Pe("close",t),l=s;break;case"iframe":case"object":case"embed":Pe("load",t),l=s;break;case"video":case"audio":for(l=0;l<Vi.length;l++)Pe(Vi[l],t);l=s;break;case"source":Pe("error",t),l=s;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),l=s;break;case"details":Pe("toggle",t),l=s;break;case"input":dg(t,s),l=Rh(t,s),Pe("invalid",t);break;case"option":l=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},l=ze({},s,{value:void 0}),Pe("invalid",t);break;case"textarea":hg(t,s),l=Ah(t,s),Pe("invalid",t);break;default:l=s}Dh(n,l),d=l;for(i in d)if(d.hasOwnProperty(i)){var u=d[i];i==="style"?Jv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ia(t,u):typeof u=="number"&&ia(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(la.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Pe("scroll",t):u!=null&&Hm(t,i,u,o))}switch(n){case"input":Do(t),ug(t,s,!1);break;case"textarea":Do(t),mg(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Gs(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Cl(t,!!s.multiple,i,!1):s.defaultValue!=null&&Cl(t,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=Cc)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)bb(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(L(166));if(n=wr(ga.current),wr(En.current),Ho(e)){if(s=e.stateNode,n=e.memoizedProps,s[Sn]=e,(i=s.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Vo(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vo(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Sn]=e,e.stateNode=s}return ft(e),null;case 13:if(Oe(Ue),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Bt!==null&&e.mode&1&&!(e.flags&128))Fy(),Ul(),e.flags|=98560,i=!1;else if(i=Ho(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Sn]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else un!==null&&(gm(un),un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?Qe===0&&(Qe=3):kp())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return zl(),cm(t,e),t===null&&ma(e.stateNode.containerInfo),ft(e),null;case 10:return dp(e.type._context),ft(e),null;case 17:return Lt(e.type)&&kc(),ft(e),null;case 19:if(Oe(Ue),i=e.memoizedState,i===null)return ft(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Oi(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ac(t),o!==null){for(e.flags|=128,Oi(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Wl&&(e.flags|=128,s=!0,Oi(i,!1),e.lanes=4194304)}else{if(!s)if(t=Ac(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return ft(e),null}else 2*Ve()-i.renderingStartTime>Wl&&n!==1073741824&&(e.flags|=128,s=!0,Oi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ue.current,Ie(Ue,s?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Cp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?zt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function X2(t,e){switch(ip(e),e.tag){case 1:return Lt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zl(),Oe(Dt),Oe(bt),fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(Oe(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Ue),null;case 4:return zl(),null;case 10:return dp(e.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var qo=!1,xt=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Be(t,e,s)}else n.current=null}function dm(t,e,n){try{n()}catch(s){Be(t,e,s)}}var n0=!1;function eS(t,e){if(Gh=jc,t=Sy(),rp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,d=-1,u=-1,m=0,b=0,v=t,_=null;t:for(;;){for(var I;v!==n||l!==0&&v.nodeType!==3||(d=o+l),v!==i||s!==0&&v.nodeType!==3||(u=o+s),v.nodeType===3&&(o+=v.nodeValue.length),(I=v.firstChild)!==null;)_=v,v=I;for(;;){if(v===t)break t;if(_===n&&++m===l&&(d=o),_===i&&++b===s&&(u=o),(I=v.nextSibling)!==null)break;v=_,_=v.parentNode}v=I}n=d===-1||u===-1?null:{start:d,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:t,selectionRange:n},jc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var U=D.memoizedProps,oe=D.memoizedState,S=e.stateNode,j=S.getSnapshotBeforeUpdate(e.elementType===e.type?U:cn(e.type,U),oe);S.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(P){Be(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return D=n0,n0=!1,D}function Ji(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&t)===t){var i=l.destroy;l.destroy=void 0,i!==void 0&&dm(e,n,i)}l=l.next}while(l!==s)}}function fd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function um(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nb(t){var e=t.alternate;e!==null&&(t.alternate=null,Nb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[fa],delete e[Jh],delete e[D2],delete e[L2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _b(t){return t.tag===5||t.tag===3||t.tag===4}function s0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_b(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cc));else if(s!==4&&(t=t.child,t!==null))for(hm(t,e,n),t=t.sibling;t!==null;)hm(t,e,n),t=t.sibling}function mm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(mm(t,e,n),t=t.sibling;t!==null;)mm(t,e,n),t=t.sibling}var ot=null,dn=!1;function bs(t,e,n){for(n=n.child;n!==null;)jb(t,e,n),n=n.sibling}function jb(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(ad,n)}catch{}switch(n.tag){case 5:xt||Nl(n,e);case 6:var s=ot,l=dn;ot=null,bs(t,e,n),ot=s,dn=l,ot!==null&&(dn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(dn?(t=ot,n=n.stateNode,t.nodeType===8?eh(t.parentNode,n):t.nodeType===1&&eh(t,n),da(t)):eh(ot,n.stateNode));break;case 4:s=ot,l=dn,ot=n.stateNode.containerInfo,dn=!0,bs(t,e,n),ot=s,dn=l;break;case 0:case 11:case 14:case 15:if(!xt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var i=l,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dm(n,e,o),l=l.next}while(l!==s)}bs(t,e,n);break;case 1:if(!xt&&(Nl(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(d){Be(n,e,d)}bs(t,e,n);break;case 21:bs(t,e,n);break;case 22:n.mode&1?(xt=(s=xt)||n.memoizedState!==null,bs(t,e,n),xt=s):bs(t,e,n);break;default:bs(t,e,n)}}function r0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z2),e.forEach(function(s){var l=cS.bind(null,t,s);n.has(s)||(n.add(s),s.then(l,l))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var i=t,o=e,d=o;e:for(;d!==null;){switch(d.tag){case 5:ot=d.stateNode,dn=!1;break e;case 3:ot=d.stateNode.containerInfo,dn=!0;break e;case 4:ot=d.stateNode.containerInfo,dn=!0;break e}d=d.return}if(ot===null)throw Error(L(160));jb(i,o,l),ot=null,dn=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(m){Be(l,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wb(e,t),e=e.sibling}function wb(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),jn(t),s&4){try{Ji(3,t,t.return),fd(3,t)}catch(U){Be(t,t.return,U)}try{Ji(5,t,t.return)}catch(U){Be(t,t.return,U)}}break;case 1:on(e,t),jn(t),s&512&&n!==null&&Nl(n,n.return);break;case 5:if(on(e,t),jn(t),s&512&&n!==null&&Nl(n,n.return),t.flags&32){var l=t.stateNode;try{ia(l,"")}catch(U){Be(t,t.return,U)}}if(s&4&&(l=t.stateNode,l!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,d=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&Kv(l,i),Lh(d,o);var m=Lh(d,i);for(o=0;o<u.length;o+=2){var b=u[o],v=u[o+1];b==="style"?Jv(l,v):b==="dangerouslySetInnerHTML"?Yv(l,v):b==="children"?ia(l,v):Hm(l,b,v,m)}switch(d){case"input":Ph(l,i);break;case"textarea":Gv(l,i);break;case"select":var _=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Cl(l,!!i.multiple,I,!1):_!==!!i.multiple&&(i.defaultValue!=null?Cl(l,!!i.multiple,i.defaultValue,!0):Cl(l,!!i.multiple,i.multiple?[]:"",!1))}l[fa]=i}catch(U){Be(t,t.return,U)}}break;case 6:if(on(e,t),jn(t),s&4){if(t.stateNode===null)throw Error(L(162));l=t.stateNode,i=t.memoizedProps;try{l.nodeValue=i}catch(U){Be(t,t.return,U)}}break;case 3:if(on(e,t),jn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(U){Be(t,t.return,U)}break;case 4:on(e,t),jn(t);break;case 13:on(e,t),jn(t),l=t.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(wp=Ve())),s&4&&r0(t);break;case 22:if(b=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(m=xt)||b,on(e,t),xt=m):on(e,t),jn(t),s&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!b&&t.mode&1)for(Y=t,b=t.child;b!==null;){for(v=Y=b;Y!==null;){switch(_=Y,I=_.child,_.tag){case 0:case 11:case 14:case 15:Ji(4,_,_.return);break;case 1:Nl(_,_.return);var D=_.stateNode;if(typeof D.componentWillUnmount=="function"){s=_,n=_.return;try{e=s,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(U){Be(s,n,U)}}break;case 5:Nl(_,_.return);break;case 22:if(_.memoizedState!==null){i0(v);continue}}I!==null?(I.return=_,Y=I):i0(v)}b=b.sibling}e:for(b=null,v=t;;){if(v.tag===5){if(b===null){b=v;try{l=v.stateNode,m?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=v.stateNode,u=v.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=Qv("display",o))}catch(U){Be(t,t.return,U)}}}else if(v.tag===6){if(b===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(U){Be(t,t.return,U)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;b===v&&(b=null),v=v.return}b===v&&(b=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:on(e,t),jn(t),s&4&&r0(t);break;case 21:break;default:on(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_b(n)){var s=n;break e}n=n.return}throw Error(L(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(ia(l,""),s.flags&=-33);var i=s0(t);mm(t,i,l);break;case 3:case 4:var o=s.stateNode.containerInfo,d=s0(t);hm(t,d,o);break;default:throw Error(L(161))}}catch(u){Be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tS(t,e,n){Y=t,Sb(t)}function Sb(t,e,n){for(var s=(t.mode&1)!==0;Y!==null;){var l=Y,i=l.child;if(l.tag===22&&s){var o=l.memoizedState!==null||qo;if(!o){var d=l.alternate,u=d!==null&&d.memoizedState!==null||xt;d=qo;var m=xt;if(qo=o,(xt=u)&&!m)for(Y=l;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?a0(l):u!==null?(u.return=o,Y=u):a0(l);for(;i!==null;)Y=i,Sb(i),i=i.sibling;Y=l,qo=d,xt=m}l0(t)}else l.subtreeFlags&8772&&i!==null?(i.return=l,Y=i):l0(t)}}function l0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||fd(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!xt)if(n===null)s.componentDidMount();else{var l=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wg(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wg(e,o,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var b=m.memoizedState;if(b!==null){var v=b.dehydrated;v!==null&&da(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}xt||e.flags&512&&um(e)}catch(_){Be(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function i0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function a0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fd(4,e)}catch(u){Be(e,n,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var l=e.return;try{s.componentDidMount()}catch(u){Be(e,l,u)}}var i=e.return;try{um(e)}catch(u){Be(e,i,u)}break;case 5:var o=e.return;try{um(e)}catch(u){Be(e,o,u)}}}catch(u){Be(e,e.return,u)}if(e===t){Y=null;break}var d=e.sibling;if(d!==null){d.return=e.return,Y=d;break}Y=e.return}}var nS=Math.ceil,Lc=ds.ReactCurrentDispatcher,_p=ds.ReactCurrentOwner,tn=ds.ReactCurrentBatchConfig,ve=0,it=null,Ge=null,dt=0,zt=0,_l=Js(0),Qe=0,Na=null,Pr=0,xd=0,jp=0,Xi=null,Mt=null,wp=0,Wl=1/0,Kn=null,Fc=!1,pm=null,$s=null,Yo=!1,Ms=null,Uc=0,Zi=0,fm=null,dc=-1,uc=0;function wt(){return ve&6?Ve():dc!==-1?dc:dc=Ve()}function zs(t){return t.mode&1?ve&2&&dt!==0?dt&-dt:U2.transition!==null?(uc===0&&(uc=cy()),uc):(t=we,t!==0||(t=window.event,t=t===void 0?16:xy(t.type)),t):1}function fn(t,e,n,s){if(50<Zi)throw Zi=0,fm=null,Error(L(185));Ea(t,n,s),(!(ve&2)||t!==it)&&(t===it&&(!(ve&2)&&(xd|=n),Qe===4&&ks(t,dt)),Ft(t,s),n===1&&ve===0&&!(e.mode&1)&&(Wl=Ve()+500,hd&&Xs()))}function Ft(t,e){var n=t.callbackNode;U1(t,e);var s=_c(t,t===it?dt:0);if(s===0)n!==null&&xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&xg(n),e===1)t.tag===0?F2(o0.bind(null,t)):Oy(o0.bind(null,t)),A2(function(){!(ve&6)&&Xs()}),n=null;else{switch(dy(s)){case 1:n=Qm;break;case 4:n=ay;break;case 16:n=Nc;break;case 536870912:n=oy;break;default:n=Nc}n=Mb(n,Cb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cb(t,e){if(dc=-1,uc=0,ve&6)throw Error(L(327));var n=t.callbackNode;if(Rl()&&t.callbackNode!==n)return null;var s=_c(t,t===it?dt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=$c(t,s);else{e=s;var l=ve;ve|=2;var i=Eb();(it!==t||dt!==e)&&(Kn=null,Wl=Ve()+500,Cr(t,e));do try{lS();break}catch(d){kb(t,d)}while(!0);cp(),Lc.current=i,ve=l,Ge!==null?e=0:(it=null,dt=0,e=Qe)}if(e!==0){if(e===2&&(l=Bh(t),l!==0&&(s=l,e=xm(t,l))),e===1)throw n=Na,Cr(t,0),ks(t,s),Ft(t,Ve()),n;if(e===6)ks(t,s);else{if(l=t.current.alternate,!(s&30)&&!sS(l)&&(e=$c(t,s),e===2&&(i=Bh(t),i!==0&&(s=i,e=xm(t,i))),e===1))throw n=Na,Cr(t,0),ks(t,s),Ft(t,Ve()),n;switch(t.finishedWork=l,t.finishedLanes=s,e){case 0:case 1:throw Error(L(345));case 2:yr(t,Mt,Kn);break;case 3:if(ks(t,s),(s&130023424)===s&&(e=wp+500-Ve(),10<e)){if(_c(t,0)!==0)break;if(l=t.suspendedLanes,(l&s)!==s){wt(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=Qh(yr.bind(null,t,Mt,Kn),e);break}yr(t,Mt,Kn);break;case 4:if(ks(t,s),(s&4194240)===s)break;for(e=t.eventTimes,l=-1;0<s;){var o=31-pn(s);i=1<<o,o=e[o],o>l&&(l=o),s&=~i}if(s=l,s=Ve()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*nS(s/1960))-s,10<s){t.timeoutHandle=Qh(yr.bind(null,t,Mt,Kn),s);break}yr(t,Mt,Kn);break;case 5:yr(t,Mt,Kn);break;default:throw Error(L(329))}}}return Ft(t,Ve()),t.callbackNode===n?Cb.bind(null,t):null}function xm(t,e){var n=Xi;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=$c(t,e),t!==2&&(e=Mt,Mt=n,e!==null&&gm(e)),t}function gm(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function sS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],i=l.getSnapshot;l=l.value;try{if(!gn(i(),l))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ks(t,e){for(e&=~jp,e&=~xd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),s=1<<n;t[n]=-1,e&=~s}}function o0(t){if(ve&6)throw Error(L(327));Rl();var e=_c(t,0);if(!(e&1))return Ft(t,Ve()),null;var n=$c(t,e);if(t.tag!==0&&n===2){var s=Bh(t);s!==0&&(e=s,n=xm(t,s))}if(n===1)throw n=Na,Cr(t,0),ks(t,e),Ft(t,Ve()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yr(t,Mt,Kn),Ft(t,Ve()),null}function Sp(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Wl=Ve()+500,hd&&Xs())}}function Mr(t){Ms!==null&&Ms.tag===0&&!(ve&6)&&Rl();var e=ve;ve|=1;var n=tn.transition,s=we;try{if(tn.transition=null,we=1,t)return t()}finally{we=s,tn.transition=n,ve=e,!(ve&6)&&Xs()}}function Cp(){zt=_l.current,Oe(_l)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,M2(n)),Ge!==null)for(n=Ge.return;n!==null;){var s=n;switch(ip(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&kc();break;case 3:zl(),Oe(Dt),Oe(bt),fp();break;case 5:pp(s);break;case 4:zl();break;case 13:Oe(Ue);break;case 19:Oe(Ue);break;case 10:dp(s.type._context);break;case 22:case 23:Cp()}n=n.return}if(it=t,Ge=t=Bs(t.current,null),dt=zt=e,Qe=0,Na=null,jp=xd=Pr=0,Mt=Xi=null,jr!==null){for(e=0;e<jr.length;e++)if(n=jr[e],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=l,s.next=o}n.pending=s}jr=null}return t}function kb(t,e){do{var n=Ge;try{if(cp(),ac.current=Dc,Oc){for(var s=$e.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Oc=!1}if(Rr=0,st=Ye=$e=null,Qi=!1,va=0,_p.current=null,n===null||n.return===null){Qe=1,Na=e,Ge=null;break}e:{var i=t,o=n.return,d=n,u=e;if(e=dt,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=u,b=d,v=b.tag;if(!(b.mode&1)&&(v===0||v===11||v===15)){var _=b.alternate;_?(b.updateQueue=_.updateQueue,b.memoizedState=_.memoizedState,b.lanes=_.lanes):(b.updateQueue=null,b.memoizedState=null)}var I=Yg(o);if(I!==null){I.flags&=-257,Qg(I,o,d,i,e),I.mode&1&&qg(i,m,e),e=I,u=m;var D=e.updateQueue;if(D===null){var U=new Set;U.add(u),e.updateQueue=U}else D.add(u);break e}else{if(!(e&1)){qg(i,m,e),kp();break e}u=Error(L(426))}}else if(Le&&d.mode&1){var oe=Yg(o);if(oe!==null){!(oe.flags&65536)&&(oe.flags|=256),Qg(oe,o,d,i,e),ap(Bl(u,d));break e}}i=u=Bl(u,d),Qe!==4&&(Qe=2),Xi===null?Xi=[i]:Xi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=db(i,u,e);Bg(i,S);break e;case 1:d=u;var j=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&($s===null||!$s.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=ub(i,d,e);Bg(i,P);break e}}i=i.return}while(i!==null)}Tb(n)}catch(K){e=K,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Eb(){var t=Lc.current;return Lc.current=Dc,t===null?Dc:t}function kp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),it===null||!(Pr&268435455)&&!(xd&268435455)||ks(it,dt)}function $c(t,e){var n=ve;ve|=2;var s=Eb();(it!==t||dt!==e)&&(Kn=null,Cr(t,e));do try{rS();break}catch(l){kb(t,l)}while(!0);if(cp(),ve=n,Lc.current=s,Ge!==null)throw Error(L(261));return it=null,dt=0,Qe}function rS(){for(;Ge!==null;)Ib(Ge)}function lS(){for(;Ge!==null&&!T1();)Ib(Ge)}function Ib(t){var e=Pb(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?Tb(t):Ge=e,_p.current=null}function Tb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X2(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,Ge=null;return}}else if(n=J2(n,e,zt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Qe===0&&(Qe=5)}function yr(t,e,n){var s=we,l=tn.transition;try{tn.transition=null,we=1,iS(t,e,n,s)}finally{tn.transition=l,we=s}return null}function iS(t,e,n,s){do Rl();while(Ms!==null);if(ve&6)throw Error(L(327));n=t.finishedWork;var l=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($1(t,i),t===it&&(Ge=it=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yo||(Yo=!0,Mb(Nc,function(){return Rl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=we;we=1;var d=ve;ve|=4,_p.current=null,eS(t,n),wb(n,t),C2(qh),jc=!!Gh,qh=Gh=null,t.current=n,tS(n),R1(),ve=d,we=o,tn.transition=i}else t.current=n;if(Yo&&(Yo=!1,Ms=t,Uc=l),i=t.pendingLanes,i===0&&($s=null),A1(n.stateNode),Ft(t,Ve()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)l=e[n],s(l.value,{componentStack:l.stack,digest:l.digest});if(Fc)throw Fc=!1,t=pm,pm=null,t;return Uc&1&&t.tag!==0&&Rl(),i=t.pendingLanes,i&1?t===fm?Zi++:(Zi=0,fm=t):Zi=0,Xs(),null}function Rl(){if(Ms!==null){var t=dy(Uc),e=tn.transition,n=we;try{if(tn.transition=null,we=16>t?16:t,Ms===null)var s=!1;else{if(t=Ms,Ms=null,Uc=0,ve&6)throw Error(L(331));var l=ve;for(ve|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var d=i.deletions;if(d!==null){for(var u=0;u<d.length;u++){var m=d[u];for(Y=m;Y!==null;){var b=Y;switch(b.tag){case 0:case 11:case 15:Ji(8,b,i)}var v=b.child;if(v!==null)v.return=b,Y=v;else for(;Y!==null;){b=Y;var _=b.sibling,I=b.return;if(Nb(b),b===m){Y=null;break}if(_!==null){_.return=I,Y=_;break}Y=I}}}var D=i.alternate;if(D!==null){var U=D.child;if(U!==null){D.child=null;do{var oe=U.sibling;U.sibling=null,U=oe}while(U!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ji(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}var j=t.current;for(Y=j;Y!==null;){o=Y;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Y=C;else e:for(o=j;Y!==null;){if(d=Y,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:fd(9,d)}}catch(K){Be(d,d.return,K)}if(d===o){Y=null;break e}var P=d.sibling;if(P!==null){P.return=d.return,Y=P;break e}Y=d.return}}if(ve=l,Xs(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(ad,t)}catch{}s=!0}return s}finally{we=n,tn.transition=e}}return!1}function c0(t,e,n){e=Bl(n,e),e=db(t,e,1),t=Us(t,e,1),e=wt(),t!==null&&(Ea(t,1,e),Ft(t,e))}function Be(t,e,n){if(t.tag===3)c0(t,t,n);else for(;e!==null;){if(e.tag===3){c0(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&($s===null||!$s.has(s))){t=Bl(n,t),t=ub(e,t,1),e=Us(e,t,1),t=wt(),e!==null&&(Ea(e,1,t),Ft(e,t));break}}e=e.return}}function aS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(dt&n)===n&&(Qe===4||Qe===3&&(dt&130023424)===dt&&500>Ve()-wp?Cr(t,0):jp|=n),Ft(t,e)}function Rb(t,e){e===0&&(t.mode&1?(e=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):e=1);var n=wt();t=rs(t,e),t!==null&&(Ea(t,e,n),Ft(t,n))}function oS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Rb(t,n)}function cS(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(L(314))}s!==null&&s.delete(e),Rb(t,n)}var Pb;Pb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,Q2(t,e,n);At=!!(t.flags&131072)}else At=!1,Le&&e.flags&1048576&&Dy(e,Tc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;cc(t,e),t=e.pendingProps;var l=Fl(e,bt.current);Tl(e,n),l=gp(null,e,s,t,l,n);var i=vp();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(s)?(i=!0,Ec(e)):i=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,hp(e),l.updater=pd,e.stateNode=l,l._reactInternals=e,sm(e,s,t,n),e=im(null,e,s,!0,i,n)):(e.tag=0,Le&&i&&lp(e),jt(null,e,l,n),e=e.child),e;case 16:s=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,l=s._init,s=l(s._payload),e.type=s,l=e.tag=uS(s),t=cn(s,t),l){case 0:e=lm(null,e,s,t,n);break e;case 1:e=Zg(null,e,s,t,n);break e;case 11:e=Jg(null,e,s,t,n);break e;case 14:e=Xg(null,e,s,cn(s.type,t),n);break e}throw Error(L(306,s,""))}return e;case 0:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:cn(s,l),lm(t,e,s,l,n);case 1:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:cn(s,l),Zg(t,e,s,l,n);case 3:e:{if(fb(e),t===null)throw Error(L(387));s=e.pendingProps,i=e.memoizedState,l=i.element,By(t,e),Mc(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){l=Bl(Error(L(423)),e),e=e0(t,e,s,n,l);break e}else if(s!==l){l=Bl(Error(L(424)),e),e=e0(t,e,s,n,l);break e}else for(Bt=Fs(e.stateNode.containerInfo.firstChild),Wt=e,Le=!0,un=null,n=$y(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ul(),s===l){e=ls(t,e,n);break e}jt(t,e,s,n)}e=e.child}return e;case 5:return Wy(e),t===null&&em(e),s=e.type,l=e.pendingProps,i=t!==null?t.memoizedProps:null,o=l.children,Yh(s,l)?o=null:i!==null&&Yh(s,i)&&(e.flags|=32),pb(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&em(e),null;case 13:return xb(t,e,n);case 4:return mp(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=$l(e,null,s,n):jt(t,e,s,n),e.child;case 11:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:cn(s,l),Jg(t,e,s,l,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,l=e.pendingProps,i=e.memoizedProps,o=l.value,Ie(Rc,s._currentValue),s._currentValue=o,i!==null)if(gn(i.value,o)){if(i.children===l.children&&!Dt.current){e=ls(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var d=i.dependencies;if(d!==null){o=i.child;for(var u=d.firstContext;u!==null;){if(u.context===s){if(i.tag===1){u=es(-1,n&-n),u.tag=2;var m=i.updateQueue;if(m!==null){m=m.shared;var b=m.pending;b===null?u.next=u:(u.next=b.next,b.next=u),m.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),tm(i.return,n,e),d.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),tm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jt(t,e,l.children,n),e=e.child}return e;case 9:return l=e.type,s=e.pendingProps.children,Tl(e,n),l=nn(l),s=s(l),e.flags|=1,jt(t,e,s,n),e.child;case 14:return s=e.type,l=cn(s,e.pendingProps),l=cn(s.type,l),Xg(t,e,s,l,n);case 15:return hb(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:cn(s,l),cc(t,e),e.tag=1,Lt(s)?(t=!0,Ec(e)):t=!1,Tl(e,n),cb(e,s,l),sm(e,s,l,n),im(null,e,s,!0,t,n);case 19:return gb(t,e,n);case 22:return mb(t,e,n)}throw Error(L(156,e.tag))};function Mb(t,e){return iy(t,e)}function dS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,s){return new dS(t,e,n,s)}function Ep(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uS(t){if(typeof t=="function")return Ep(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gm)return 11;if(t===qm)return 14}return 2}function Bs(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hc(t,e,n,s,l,i){var o=2;if(s=t,typeof t=="function")Ep(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hl:return kr(n.children,l,i,e);case Km:o=8,l|=8;break;case kh:return t=Zt(12,n,e,l|2),t.elementType=kh,t.lanes=i,t;case Eh:return t=Zt(13,n,e,l),t.elementType=Eh,t.lanes=i,t;case Ih:return t=Zt(19,n,e,l),t.elementType=Ih,t.lanes=i,t;case Wv:return gd(n,l,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zv:o=10;break e;case Bv:o=9;break e;case Gm:o=11;break e;case qm:o=14;break e;case js:o=16,s=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Zt(o,n,e,l),e.elementType=t,e.type=s,e.lanes=i,e}function kr(t,e,n,s){return t=Zt(7,t,s,e),t.lanes=n,t}function gd(t,e,n,s){return t=Zt(22,t,s,e),t.elementType=Wv,t.lanes=n,t.stateNode={isHidden:!1},t}function oh(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function ch(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hS(t,e,n,s,l){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Ip(t,e,n,s,l,i,o,d,u){return t=new hS(t,e,n,d,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(i),t}function mS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ul,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Ab(t){if(!t)return qs;t=t._reactInternals;e:{if($r(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Ay(t,n,e)}return e}function Ob(t,e,n,s,l,i,o,d,u){return t=Ip(n,s,!0,t,l,i,o,d,u),t.context=Ab(null),n=t.current,s=wt(),l=zs(n),i=es(s,l),i.callback=e??null,Us(n,i,l),t.current.lanes=l,Ea(t,l,s),Ft(t,s),t}function vd(t,e,n,s){var l=e.current,i=wt(),o=zs(l);return n=Ab(n),e.context===null?e.context=n:e.pendingContext=n,e=es(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Us(l,e,o),t!==null&&(fn(t,l,o,i),ic(t,l,o)),o}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tp(t,e){d0(t,e),(t=t.alternate)&&d0(t,e)}function pS(){return null}var Db=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rp(t){this._internalRoot=t}yd.prototype.render=Rp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));vd(t,e,null,null)};yd.prototype.unmount=Rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mr(function(){vd(null,t,null,null)}),e[ss]=null}};function yd(t){this._internalRoot=t}yd.prototype.unstable_scheduleHydration=function(t){if(t){var e=my();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cs.length&&e!==0&&e<Cs[n].priority;n++);Cs.splice(n,0,t),n===0&&fy(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u0(){}function fS(t,e,n,s,l){if(l){if(typeof s=="function"){var i=s;s=function(){var m=zc(o);i.call(m)}}var o=Ob(e,s,t,0,null,!1,!1,"",u0);return t._reactRootContainer=o,t[ss]=o.current,ma(t.nodeType===8?t.parentNode:t),Mr(),o}for(;l=t.lastChild;)t.removeChild(l);if(typeof s=="function"){var d=s;s=function(){var m=zc(u);d.call(m)}}var u=Ip(t,0,!1,null,null,!1,!1,"",u0);return t._reactRootContainer=u,t[ss]=u.current,ma(t.nodeType===8?t.parentNode:t),Mr(function(){vd(e,u,n,s)}),u}function Nd(t,e,n,s,l){var i=n._reactRootContainer;if(i){var o=i;if(typeof l=="function"){var d=l;l=function(){var u=zc(o);d.call(u)}}vd(e,o,t,l)}else o=fS(n,e,t,l,s);return zc(o)}uy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wi(e.pendingLanes);n!==0&&(Jm(e,n|1),Ft(e,Ve()),!(ve&6)&&(Wl=Ve()+500,Xs()))}break;case 13:Mr(function(){var s=rs(t,1);if(s!==null){var l=wt();fn(s,t,1,l)}}),Tp(t,1)}};Xm=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=wt();fn(e,t,134217728,n)}Tp(t,134217728)}};hy=function(t){if(t.tag===13){var e=zs(t),n=rs(t,e);if(n!==null){var s=wt();fn(n,t,e,s)}Tp(t,e)}};my=function(){return we};py=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Uh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var l=ud(s);if(!l)throw Error(L(90));Hv(s),Ph(s,l)}}}break;case"textarea":Gv(t,n);break;case"select":e=n.value,e!=null&&Cl(t,!!n.multiple,e,!1)}};ey=Sp;ty=Mr;var xS={usingClientEntryPoint:!1,Events:[Ta,xl,ud,Xv,Zv,Sp]},Di={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gS={bundleType:Di.bundleType,version:Di.version,rendererPackageName:Di.rendererPackageName,rendererConfig:Di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ry(t),t===null?null:t.stateNode},findFiberByHostInstance:Di.findFiberByHostInstance||pS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qo.isDisabled&&Qo.supportsFiber)try{ad=Qo.inject(gS),kn=Qo}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(L(200));return mS(t,e,null,n)};Kt.createRoot=function(t,e){if(!Pp(t))throw Error(L(299));var n=!1,s="",l=Db;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=Ip(t,1,!1,null,null,n,!1,s,l),t[ss]=e.current,ma(t.nodeType===8?t.parentNode:t),new Rp(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=ry(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Mr(t)};Kt.hydrate=function(t,e,n){if(!bd(e))throw Error(L(200));return Nd(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(L(405));var s=n!=null&&n.hydratedSources||null,l=!1,i="",o=Db;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ob(e,null,t,1,n??null,l,!1,i,o),t[ss]=e.current,ma(t),s)for(t=0;t<s.length;t++)n=s[t],l=n._getVersion,l=l(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,l]:e.mutableSourceEagerHydrationData.push(n,l);return new yd(e)};Kt.render=function(t,e,n){if(!bd(e))throw Error(L(200));return Nd(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!bd(t))throw Error(L(40));return t._reactRootContainer?(Mr(function(){Nd(null,null,t,!1,function(){t._reactRootContainer=null,t[ss]=null})}),!0):!1};Kt.unstable_batchedUpdates=Sp;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!bd(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Nd(t,e,n,!1,s)};Kt.version="18.3.1-next-f1338f8080-20240426";function Lb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lb)}catch(t){console.error(t)}}Lb(),Lv.exports=Kt;var vS=Lv.exports,h0=vS;Sh.createRoot=h0.createRoot,Sh.hydrateRoot=h0.hydrateRoot;var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V=function(t,e){if(!t)throw Xl(e)},Xl=function(t){return new Error("Firebase Database ("+Fb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},yS=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const l=t[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const i=t[n++];e[s++]=String.fromCharCode((l&31)<<6|i&63)}else if(l>239&&l<365){const i=t[n++],o=t[n++],d=t[n++],u=((l&7)<<18|(i&63)<<12|(o&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((l&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const i=t[l],o=l+1<t.length,d=o?t[l+1]:0,u=l+2<t.length,m=u?t[l+2]:0,b=i>>2,v=(i&3)<<4|d>>4;let _=(d&15)<<2|m>>6,I=m&63;u||(I=64,o||(_=64)),s.push(n[b],n[v],n[_],n[I])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ub(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const i=n[t.charAt(l++)],d=l<t.length?n[t.charAt(l)]:0;++l;const m=l<t.length?n[t.charAt(l)]:64;++l;const v=l<t.length?n[t.charAt(l)]:64;if(++l,i==null||d==null||m==null||v==null)throw new bS;const _=i<<2|d>>4;if(s.push(_),m!==64){const I=d<<4&240|m>>2;if(s.push(I),v!==64){const D=m<<6&192|v;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $b=function(t){const e=Ub(t);return Mp.encodeByteArray(e,!0)},Bc=function(t){return $b(t).replace(/\./g,"")},Wc=function(t){try{return Mp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){return zb(void 0,t)}function zb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_S(n)||(t[n]=zb(t[n],e[n]));return t}function _S(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=()=>jS().__FIREBASE_DEFAULTS__,SS=()=>{if(typeof process>"u"||typeof m0>"u")return;const t=m0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wc(t[1]);return e&&JSON.parse(e)},Ap=()=>{try{return wS()||SS()||CS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bb=t=>{var e,n;return(n=(e=Ap())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kS=t=>{const e=Bb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Wb=()=>{var t;return(t=Ap())===null||t===void 0?void 0:t.config},Vb=t=>{var e;return(e=Ap())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function IS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RS(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PS(){return Fb.NODE_ADMIN===!0}function MS(){try{return typeof indexedDB=="object"}catch{return!1}}function AS(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var i;e(((i=l.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="FirebaseError";class Zs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=OS,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pa.prototype.create)}}class Pa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,i=this.errors[e],o=i?DS(i,s):"Error",d=`${this.serviceName}: ${o} (${l}).`;return new Zs(l,d,s)}}function DS(t,e){return t.replace(LS,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const LS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){return JSON.parse(t)}function ct(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=function(t){let e={},n={},s={},l="";try{const i=t.split(".");e=_a(Wc(i[0])||""),n=_a(Wc(i[1])||""),l=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},FS=function(t){const e=Kb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},US=function(t){const e=Kb(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vc(t,e,n){const s={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(s[l]=e.call(n,t[l],l,t));return s}function Hc(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const i=t[l],o=e[l];if(p0(i)&&p0(o)){if(!Hc(i,o))return!1}else if(i!==o)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function p0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)s[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)s[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const _=s[v-3]^s[v-8]^s[v-14]^s[v-16];s[v]=(_<<1|_>>>31)&4294967295}let l=this.chain_[0],i=this.chain_[1],o=this.chain_[2],d=this.chain_[3],u=this.chain_[4],m,b;for(let v=0;v<80;v++){v<40?v<20?(m=d^i&(o^d),b=1518500249):(m=i^o^d,b=1859775393):v<60?(m=i&o|d&(i|o),b=2400959708):(m=i^o^d,b=3395469782);const _=(l<<5|l>>>27)+m+u+b+s[v]&4294967295;u=d,d=o,o=(i<<30|i>>>2)&4294967295,i=l,l=_}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const i=this.buf_;let o=this.inbuf_;for(;l<n;){if(o===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(i[o]=e.charCodeAt(l),++o,++l,o===this.blockSize){this.compress_(i),o=0;break}}else for(;l<n;)if(i[o]=e[l],++o,++l,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[l]>>i&255,++s;return e}}function zS(t,e){const n=new BS(t,e);return n.subscribe.bind(n)}class BS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");WS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=dh),l.error===void 0&&(l.error=dh),l.complete===void 0&&(l.complete=dh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dh(){}function VS(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);if(l>=55296&&l<=56319){const i=l-55296;s++,V(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;l=65536+(i<<10)+o}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},_d=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Op;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(l)return null;throw i}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qS(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:l});s.resolve(i)}catch{}}}}clearInstance(e=br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=br){return this.instances.has(e)}getOptions(e=br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(i);s===d&&o.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(l,i);const o=this.instances.get(l);return o&&e(o,l),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:GS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=br){return this.component?this.component.multipleInstances?e:br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GS(t){return t===br?void 0:t}function qS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const QS={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},JS=Ce.INFO,XS={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},ZS=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=XS[e];if(l)console[l](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lp{constructor(e){this.name=e,this._logLevel=JS,this._logHandler=ZS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const eC=(t,e)=>e.some(n=>t instanceof n);let f0,x0;function tC(){return f0||(f0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nC(){return x0||(x0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gb=new WeakMap,ym=new WeakMap,qb=new WeakMap,uh=new WeakMap,Fp=new WeakMap;function sC(t){const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ws(t.result)),l()},o=()=>{s(t.error),l()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gb.set(n,t)}).catch(()=>{}),Fp.set(e,t),e}function rC(t){if(ym.has(t))return;const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),l()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ym.set(t,e)}let bm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lC(t){bm=t(bm)}function iC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(hh(this),e,...n);return qb.set(s,e.sort?e.sort():[e]),Ws(s)}:nC().includes(t)?function(...e){return t.apply(hh(this),e),Ws(Gb.get(this))}:function(...e){return Ws(t.apply(hh(this),e))}}function aC(t){return typeof t=="function"?iC(t):(t instanceof IDBTransaction&&rC(t),eC(t,tC())?new Proxy(t,bm):t)}function Ws(t){if(t instanceof IDBRequest)return sC(t);if(uh.has(t))return uh.get(t);const e=aC(t);return e!==t&&(uh.set(t,e),Fp.set(e,t)),e}const hh=t=>Fp.get(t);function oC(t,e,{blocked:n,upgrade:s,blocking:l,terminated:i}={}){const o=indexedDB.open(t,e),d=Ws(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Ws(o.result),u.oldVersion,u.newVersion,Ws(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),d.then(u=>{i&&u.addEventListener("close",()=>i()),l&&u.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const cC=["get","getKey","getAll","getAllKeys","count"],dC=["put","add","delete","clear"],mh=new Map;function g0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mh.get(e))return mh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=dC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||cC.includes(n)))return;const i=async function(o,...d){const u=this.transaction(o,l?"readwrite":"readonly");let m=u.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),l&&u.done]))[0]};return mh.set(e,i),i}lC(t=>({...t,get:(e,n,s)=>g0(e,n)||t.get(e,n,s),has:(e,n)=>!!g0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nm="@firebase/app",v0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Lp("@firebase/app"),mC="@firebase/app-compat",pC="@firebase/analytics-compat",fC="@firebase/analytics",xC="@firebase/app-check-compat",gC="@firebase/app-check",vC="@firebase/auth",yC="@firebase/auth-compat",bC="@firebase/database",NC="@firebase/data-connect",_C="@firebase/database-compat",jC="@firebase/functions",wC="@firebase/functions-compat",SC="@firebase/installations",CC="@firebase/installations-compat",kC="@firebase/messaging",EC="@firebase/messaging-compat",IC="@firebase/performance",TC="@firebase/performance-compat",RC="@firebase/remote-config",PC="@firebase/remote-config-compat",MC="@firebase/storage",AC="@firebase/storage-compat",OC="@firebase/firestore",DC="@firebase/vertexai-preview",LC="@firebase/firestore-compat",FC="firebase",UC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",$C={[Nm]:"fire-core",[mC]:"fire-core-compat",[fC]:"fire-analytics",[pC]:"fire-analytics-compat",[gC]:"fire-app-check",[xC]:"fire-app-check-compat",[vC]:"fire-auth",[yC]:"fire-auth-compat",[bC]:"fire-rtdb",[NC]:"fire-data-connect",[_C]:"fire-rtdb-compat",[jC]:"fire-fn",[wC]:"fire-fn-compat",[SC]:"fire-iid",[CC]:"fire-iid-compat",[kC]:"fire-fcm",[EC]:"fire-fcm-compat",[IC]:"fire-perf",[TC]:"fire-perf-compat",[RC]:"fire-rc",[PC]:"fire-rc-compat",[MC]:"fire-gcs",[AC]:"fire-gcs-compat",[OC]:"fire-fst",[LC]:"fire-fst-compat",[DC]:"fire-vertex","fire-js":"fire-js",[FC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,zC=new Map,jm=new Map;function y0(t,e){try{t.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hl(t){const e=t.name;if(jm.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,t);for(const n of Kc.values())y0(n,t);for(const n of zC.values())y0(n,t);return!0}function Up(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function As(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new Pa("app","Firebase",BC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=UC;function Yb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:_m,automaticDataCollectionEnabled:!1},e),l=s.name;if(typeof l!="string"||!l)throw Vs.create("bad-app-name",{appName:String(l)});if(n||(n=Wb()),!n)throw Vs.create("no-options");const i=Kc.get(l);if(i){if(Hc(n,i.options)&&Hc(s,i.config))return i;throw Vs.create("duplicate-app",{appName:l})}const o=new YS(l);for(const u of jm.values())o.addComponent(u);const d=new WC(n,s,o);return Kc.set(l,d),d}function Qb(t=_m){const e=Kc.get(t);if(!e&&t===_m&&Wb())return Yb();if(!e)throw Vs.create("no-app",{appName:t});return e}function Hs(t,e,n){var s;let l=(s=$C[t])!==null&&s!==void 0?s:t;n&&(l+=`-${n}`);const i=l.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const d=[`Unable to register library "${l}" with version "${e}":`];i&&d.push(`library name "${l}" contains illegal characters (whitespace or "/")`),i&&o&&d.push("and"),o&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(d.join(" "));return}Hl(new Ar(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="firebase-heartbeat-database",HC=1,ja="firebase-heartbeat-store";let ph=null;function Jb(){return ph||(ph=oC(VC,HC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vs.create("idb-open",{originalErrorMessage:t.message})})),ph}async function KC(t){try{const n=(await Jb()).transaction(ja),s=await n.objectStore(ja).get(Xb(t));return await n.done,s}catch(e){if(e instanceof Zs)is.warn(e.message);else{const n=Vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});is.warn(n.message)}}}async function b0(t,e){try{const s=(await Jb()).transaction(ja,"readwrite");await s.objectStore(ja).put(e,Xb(t)),await s.done}catch(n){if(n instanceof Zs)is.warn(n.message);else{const s=Vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});is.warn(s.message)}}}function Xb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=1024,qC=30*24*60*60*1e3;class YC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const d=new Date(o.date).valueOf();return Date.now()-d<=qC}),this._storage.overwrite(this._heartbeatsCache))}catch(s){is.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=N0(),{heartbeatsToSend:s,unsentEntries:l}=QC(this._heartbeatsCache.heartbeats),i=Bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return is.warn(n),""}}}function N0(){return new Date().toISOString().substring(0,10)}function QC(t,e=GC){const n=[];let s=t.slice();for(const l of t){const i=n.find(o=>o.agent===l.agent);if(i){if(i.dates.push(l.date),_0(n)>e){i.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),_0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class JC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MS()?AS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return b0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return b0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function _0(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){Hl(new Ar("platform-logger",e=>new uC(e),"PRIVATE")),Hl(new Ar("heartbeat",e=>new YC(e),"PRIVATE")),Hs(Nm,v0,t),Hs(Nm,v0,"esm2017"),Hs("fire-js","")}XC("");var ZC="firebase",e3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(ZC,e3,"app");var j0={};const w0="@firebase/database",S0="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zb="";function t3(t){Zb=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:_a(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return us(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new n3(e)}}catch{}return new s3},Sr=eN("localStorage"),r3=eN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Lp("@firebase/database"),l3=function(){let t=1;return function(){return t++}}(),tN=function(t){const e=HS(t),n=new $S;n.update(e);const s=n.digest();return Mp.encodeByteArray(s)},Ma=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Ma.apply(null,s):typeof s=="object"?e+=ct(s):e+=s,e+=" "}return e};let ea=null,C0=!0;const i3=function(t,e){V(!0,"Can't turn on custom loggers persistently."),Pl.logLevel=Ce.VERBOSE,ea=Pl.log.bind(Pl)},gt=function(...t){if(C0===!0&&(C0=!1,ea===null&&r3.get("logging_enabled")===!0&&i3()),ea){const e=Ma.apply(null,t);ea(e)}},Aa=function(t){return function(...e){gt(t,...e)}},wm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ma(...t);Pl.error(e)},as=function(...t){const e=`FIREBASE FATAL ERROR: ${Ma(...t)}`;throw Pl.error(e),new Error(e)},Vt=function(...t){const e="FIREBASE WARNING: "+Ma(...t);Pl.warn(e)},a3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},o3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Kl="[MIN_NAME]",Or="[MAX_NAME]",ti=function(t,e){if(t===e)return 0;if(t===Kl||e===Or)return-1;if(e===Kl||t===Or)return 1;{const n=k0(t),s=k0(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},c3=function(t,e){return t===e?0:t<e?-1:1},Li=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ct(e))},$p=function(t){if(typeof t!="object"||t===null)return ct(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=ct(e[s]),n+=":",n+=$p(t[e[s]]);return n+="}",n},sN=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(t.substring(l,n)):s.push(t.substring(l,l+e));return s};function rn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const rN=function(t){V(!nN(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,i,o,d,u;t===0?(i=0,o=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(d=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=d+s,o=Math.round(t*Math.pow(2,n-d)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const m=[];for(u=n;u;u-=1)m.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)m.push(i%2?1:0),i=Math.floor(i/2);m.push(l?1:0),m.reverse();const b=m.join("");let v="";for(u=0;u<64;u+=8){let _=parseInt(b.substr(u,8),2).toString(16);_.length===1&&(_="0"+_),v=v+_}return v.toLowerCase()},d3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},u3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},h3=new RegExp("^-?(0*)\\d{1,10}$"),m3=-2147483648,p3=2147483647,k0=function(t){if(h3.test(t)){const e=Number(t);if(e>=m3&&e<=p3)return e}return null},Oa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Vt("Exception was thrown by user callback.",n),e},Math.floor(0))}},f3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ta=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Vt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vt(e)}}class mc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}mc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="5",lN="v",iN="s",aN="r",oN="f",cN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dN="ls",uN="p",Sm="ac",hN="websocket",mN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,s,l,i=!1,o="",d=!1,u=!1){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function v3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function fN(t,e,n){V(typeof e=="string","typeof type must == string"),V(typeof n=="object","typeof params must == object");let s;if(e===hN)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===mN)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);v3(t)&&(n.ns=t.namespace);const l=[];return rn(n,(i,o)=>{l.push(i+"="+o)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.counters_={}}incrementCounter(e,n=1){us(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return NS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh={},xh={};function Bp(t){const e=t.toString();return fh[e]||(fh[e]=new y3),fh[e]}function b3(t,e){const n=t.toString();return xh[n]||(xh[n]=e()),xh[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&Oa(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="start",_3="close",j3="pLPCommand",w3="pRTLPCB",xN="id",gN="pw",vN="ser",S3="cb",C3="seg",k3="ts",E3="d",I3="dframe",yN=1870,bN=30,T3=yN-bN,R3=25e3,P3=3e4;class jl{constructor(e,n,s,l,i,o,d){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=i,this.transportSessionId=o,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Aa(e),this.stats_=Bp(n),this.urlFn=u=>(this.appCheckToken&&(u[Sm]=this.appCheckToken),fN(n,mN,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new N3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(P3)),o3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wp((...i)=>{const[o,d,u,m,b]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===E0)this.id=d,this.password=u;else if(o===_3)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,d]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,d)},()=>{this.onClosed_()},this.urlFn);const s={};s[E0]="t",s[vN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[S3]=this.scriptTagHolder.uniqueCallbackIdentifier),s[lN]=zp,this.transportSessionId&&(s[iN]=this.transportSessionId),this.lastSessionId&&(s[dN]=this.lastSessionId),this.applicationId&&(s[uN]=this.applicationId),this.appCheckToken&&(s[Sm]=this.appCheckToken),typeof location<"u"&&location.hostname&&cN.test(location.hostname)&&(s[aN]=oN);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jl.forceAllow_=!0}static forceDisallow(){jl.forceDisallow_=!0}static isAvailable(){return jl.forceAllow_?!0:!jl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!d3()&&!u3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ct(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=$b(n),l=sN(s,T3);for(let i=0;i<l.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[I3]="t",s[xN]=e,s[gN]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ct(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Wp{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=l3(),window[j3+this.uniqueCallbackIdentifier]=e,window[w3+this.uniqueCallbackIdentifier]=n,this.myIFrame=Wp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(d){gt("frame writing exception"),d.stack&&gt(d.stack),gt(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xN]=this.myID,e[gN]=this.myPW,e[vN]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bN+s.length<=yN;){const o=this.pendingSegs.shift();s=s+"&"+C3+l+"="+o.seg+"&"+k3+l+"="+o.ts+"&"+E3+l+"="+o.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(R3)),i=()=>{clearTimeout(l),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=16384,A3=45e3;let Gc=null;typeof MozWebSocket<"u"?Gc=MozWebSocket:typeof WebSocket<"u"&&(Gc=WebSocket);class hn{constructor(e,n,s,l,i,o,d){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Aa(this.connId),this.stats_=Bp(n),this.connURL=hn.connectionURL_(n,o,d,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,i){const o={};return o[lN]=zp,typeof location<"u"&&location.hostname&&cN.test(location.hostname)&&(o[aN]=oN),n&&(o[iN]=n),s&&(o[dN]=s),l&&(o[Sm]=l),i&&(o[uN]=i),fN(e,hN,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sr.set("previous_websocket_failure",!0);try{let s;PS(),this.mySock=new Gc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){hn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Gc!==null&&!hn.forceDisallow_}static previouslyFailed(){return Sr.isInMemoryStorage||Sr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Sr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=_a(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(V(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=ct(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=sN(n,M3);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(A3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hn.responsesRequiredToBeHealthy=2;hn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[jl,hn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=hn&&hn.isAvailable();let s=n&&!hn.previouslyFailed();if(e.webSocketOnly&&(n||Vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[hn];else{const l=this.transports_=[];for(const i of wa.ALL_TRANSPORTS)i&&i.isAvailable()&&l.push(i);wa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}wa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=6e4,D3=5e3,L3=10*1024,F3=100*1024,gh="t",I0="d",U3="s",T0="r",$3="e",R0="o",P0="a",M0="n",A0="p",z3="h";class B3{constructor(e,n,s,l,i,o,d,u,m,b){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=i,this.onMessage_=o,this.onReady_=d,this.onDisconnect_=u,this.onKill_=m,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Aa("c:"+this.id+":"),this.transportManager_=new wa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=ta(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>F3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>L3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gh in e){const n=e[gh];n===P0?this.upgradeIfSecondaryHealthy_():n===T0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===R0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Li("t",e),s=Li("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:A0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:P0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:M0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Li("t",e),s=Li("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Li(gh,e);if(I0 in e){const s=e[I0];if(n===z3){const l=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===M0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===U3?this.onConnectionShutdown_(s):n===T0?this.onReset_(s):n===$3?wm("Server Error: "+s):n===R0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zp!==s&&Vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),ta(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(O3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ta(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(D3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:A0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.allowedEvents_=e,this.listeners_={},V(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let i=0;i<l.length;i++)if(l[i].callback===n&&(!s||s===l[i].context)){l.splice(i,1);return}}validateEventType_(e){V(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends _N{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Dp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new qc}getInitialEvent(e){return V(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=32,D0=768;class De{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new De("")}function xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ys(t){return t.pieces_.length-t.pieceNum_}function Ae(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new De(t.pieces_,e)}function jN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function W3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function SN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new De(e,0)}function lt(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof De)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new De(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function en(t,e){const n=xe(t),s=xe(e);if(n===null)return e;if(n===s)return en(Ae(t),Ae(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function CN(t,e){if(Ys(t)!==Ys(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function mn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Ys(t)>Ys(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class V3{constructor(e,n){this.errorPrefix_=n,this.parts_=wN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=_d(this.parts_[s]);kN(this)}}function H3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=_d(e),kN(t)}function K3(t){const e=t.parts_.pop();t.byteLength_-=_d(e),t.parts_.length>0&&(t.byteLength_-=1)}function kN(t){if(t.byteLength_>D0)throw new Error(t.errorPrefix_+"has a key path longer than "+D0+" bytes ("+t.byteLength_+").");if(t.parts_.length>O0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+O0+") or object contains a cycle "+Nr(t))}function Nr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends _N{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Vp}getInitialEvent(e){return V(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=1e3,G3=60*5*1e3,L0=30*1e3,q3=1.3,Y3=3e4,Q3="server_kill",F0=3;class ts extends NN{constructor(e,n,s,l,i,o,d,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=d,this.authOverride_=u,this.id=ts.nextPersistentConnectionId_++,this.log_=Aa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fi,this.maxReconnectDelay_=G3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&qc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,i={r:l,a:e,b:n};this.log_(ct(i)),V(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new Op,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const d=o.d;o.s==="ok"?n.resolve(d):n.reject(d)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,s,l){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),V(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),V(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const d={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,d=>{const u=d.d,m=d.s;ts.warnOnListenWarnings_(u,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",d),m!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(m,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&us(e,"w")){const s=Vl(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||US(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=L0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=FS(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const i=l.s,o=l.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),V(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";l&&(i.q=s,i.t=l),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{l&&setTimeout(()=>{l(o.s,o.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:l}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ct(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wm("Unrecognized action received from server: "+ct(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){V(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Y3&&(this.reconnectDelay_=Fi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*q3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+ts.nextConnectionId_++,i=this.lastSessionId;let o=!1,d=null;const u=function(){d?d.close():(o=!0,s())},m=function(v){V(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(v)};this.realtime_={close:u,sendRequest:m};const b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,_]=await Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);o?gt("getToken() completed but was canceled"):(gt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=_&&_.token,d=new B3(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,I=>{Vt(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(Q3)},i))}catch(v){this.log_("Failed to get token: "+v),o||(this.repoInfo_.nodeAdmin&&Vt(v),u())}}}interrupt(e){gt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vm(this.interruptReasons_)&&(this.reconnectDelay_=Fi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>$p(i)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new De(e).toString();let l;if(this.listens.has(s)){const i=this.listens.get(s);l=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){gt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=F0&&(this.reconnectDelay_=L0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){gt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=F0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Zb.replace(/\./g,"-")]=1,Dp()?e["framework.cordova"]=1:Hb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=qc.getInstance().currentlyOnline();return vm(this.interruptReasons_)&&e}}ts.nextPersistentConnectionId_=0;ts.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ge(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ge(Kl,e),l=new ge(Kl,n);return this.compare(s,l)!==0}minPost(){return ge.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo;class EN extends jd{static get __EMPTY_NODE(){return Jo}static set __EMPTY_NODE(e){Jo=e}compare(e,n){return ti(e.name,n.name)}isDefinedOn(e){throw Xl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ge.MIN}maxPost(){return new ge(Or,Jo)}makePost(e,n){return V(typeof e=="string","KeyIndex indexValue must always be a string."),new ge(e,Jo)}toString(){return".key"}}const Ml=new EN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,s,l,i=null){this.isReverse_=l,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,l&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rt{constructor(e,n,s,l,i){this.key=e,this.value=n,this.color=s??rt.RED,this.left=l??Ot.EMPTY_NODE,this.right=i??Ot.EMPTY_NODE}copy(e,n,s,l,i){return new rt(e??this.key,n??this.value,s??this.color,l??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const i=s(e,l.key);return i<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):i===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ot.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rt.RED=!0;rt.BLACK=!1;class J3{copy(e,n,s,l,i){return this}insert(e,n,s){return new rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ot{constructor(e,n=Ot.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ot(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(e){return new Ot(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Xo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Xo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Xo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Xo(this.root_,null,this.comparator_,!0,e)}}Ot.EMPTY_NODE=new J3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t,e){return ti(t.name,e.name)}function Hp(t,e){return ti(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm;function Z3(t){Cm=t}const IN=function(t){return typeof t=="number"?"number:"+rN(t):"string:"+t},TN=function(t){if(t.isLeafNode()){const e=t.val();V(typeof e=="string"||typeof e=="number"||typeof e=="object"&&us(e,".sv"),"Priority must be a string or number.")}else V(t===Cm||t.isEmpty(),"priority of unexpected type.");V(t===Cm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U0;class nt{constructor(e,n=nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,V(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),TN(this.priorityNode_)}static set __childrenNodeConstructor(e){U0=e}static get __childrenNodeConstructor(){return U0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:xe(e)===".priority"?this.priorityNode_:nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=xe(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(V(s!==".priority"||Ys(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,nt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ae(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+IN(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=rN(this.value_):e+=this.value_,this.lazyHash_=tN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nt.__childrenNodeConstructor?-1:(V(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=nt.VALUE_TYPE_ORDER.indexOf(n),i=nt.VALUE_TYPE_ORDER.indexOf(s);return V(l>=0,"Unknown leaf type: "+n),V(i>=0,"Unknown leaf type: "+s),l===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RN,PN;function ek(t){RN=t}function tk(t){PN=t}class nk extends jd{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),i=s.compareTo(l);return i===0?ti(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ge.MIN}maxPost(){return new ge(Or,new nt("[PRIORITY-POST]",PN))}makePost(e,n){const s=RN(e);return new ge(n,new nt("[PRIORITY-POST]",s))}toString(){return".priority"}}const yt=new nk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=Math.log(2);class rk{constructor(e){const n=i=>parseInt(Math.log(i)/sk,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yc=function(t,e,n,s){t.sort(e);const l=function(u,m){const b=m-u;let v,_;if(b===0)return null;if(b===1)return v=t[u],_=n?n(v):v,new rt(_,v.node,rt.BLACK,null,null);{const I=parseInt(b/2,10)+u,D=l(u,I),U=l(I+1,m);return v=t[I],_=n?n(v):v,new rt(_,v.node,rt.BLACK,D,U)}},i=function(u){let m=null,b=null,v=t.length;const _=function(D,U){const oe=v-D,S=v;v-=D;const j=l(oe+1,S),C=t[oe],P=n?n(C):C;I(new rt(P,C.node,U,null,j))},I=function(D){m?(m.left=D,m=D):(b=D,m=D)};for(let D=0;D<u.count;++D){const U=u.nextBitIsOne(),oe=Math.pow(2,u.count-(D+1));U?_(oe,rt.BLACK):(_(oe,rt.BLACK),_(oe,rt.RED))}return b},o=new rk(t.length),d=i(o);return new Ot(s||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh;const dl={};class Qn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return V(dl&&yt,"ChildrenNode.ts has not been loaded"),vh=vh||new Qn({".priority":dl},{".priority":yt}),vh}get(e){const n=Vl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ot?n:null}hasIndex(e){return us(this.indexSet_,e.toString())}addIndex(e,n){V(e!==Ml,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const i=n.getIterator(ge.Wrap);let o=i.getNext();for(;o;)l=l||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let d;l?d=Yc(s,e.getCompare()):d=dl;const u=e.toString(),m=Object.assign({},this.indexSet_);m[u]=e;const b=Object.assign({},this.indexes_);return b[u]=d,new Qn(b,m)}addToIndexes(e,n){const s=Vc(this.indexes_,(l,i)=>{const o=Vl(this.indexSet_,i);if(V(o,"Missing index implementation for "+i),l===dl)if(o.isDefinedOn(e.node)){const d=[],u=n.getIterator(ge.Wrap);let m=u.getNext();for(;m;)m.name!==e.name&&d.push(m),m=u.getNext();return d.push(e),Yc(d,o.getCompare())}else return dl;else{const d=n.get(e.name);let u=l;return d&&(u=u.remove(new ge(e.name,d))),u.insert(e,e.node)}});return new Qn(s,this.indexSet_)}removeFromIndexes(e,n){const s=Vc(this.indexes_,l=>{if(l===dl)return l;{const i=n.get(e.name);return i?l.remove(new ge(e.name,i)):l}});return new Qn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui;class _e{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&TN(this.priorityNode_),this.children_.isEmpty()&&V(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ui||(Ui=new _e(new Ot(Hp),null,Qn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ui}updatePriority(e){return this.children_.isEmpty()?this:new _e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ui:n}}getChild(e){const n=xe(e);return n===null?this:this.getImmediateChild(n).getChild(Ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(V(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ge(e,n);let l,i;n.isEmpty()?(l=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=l.isEmpty()?Ui:this.priorityNode_;return new _e(l,o,i)}}updateChild(e,n){const s=xe(e);if(s===null)return n;{V(xe(e)!==".priority"||Ys(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(Ae(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,i=!0;if(this.forEachChild(yt,(o,d)=>{n[o]=d.val(e),s++,i&&_e.INTEGER_REGEXP_.test(o)?l=Math.max(l,Number(o)):i=!1}),!e&&i&&l<2*s){const o=[];for(const d in n)o[d]=n[d];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+IN(this.getPriority().val())+":"),this.forEachChild(yt,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":tN(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const i=l.getPredecessorKey(new ge(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ge(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ge(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,ge.Wrap);let i=l.peek();for(;i!=null&&n.compare(i,e)<0;)l.getNext(),i=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,ge.Wrap);let i=l.peek();for(;i!=null&&n.compare(i,e)>0;)l.getNext(),i=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Da?-1:0}withIndex(e){if(e===Ml||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ml||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(yt),l=n.getIterator(yt);let i=s.getNext(),o=l.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=l.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ml?null:this.indexMap_.get(e.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class lk extends _e{constructor(){super(new Ot(Hp),_e.EMPTY_NODE,Qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}}const Da=new lk;Object.defineProperties(ge,{MIN:{value:new ge(Kl,_e.EMPTY_NODE)},MAX:{value:new ge(Or,Da)}});EN.__EMPTY_NODE=_e.EMPTY_NODE;nt.__childrenNodeConstructor=_e;Z3(Da);tk(Da);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=!0;function vt(t,e=null){if(t===null)return _e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),V(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new nt(n,vt(e))}if(!(t instanceof Array)&&ik){const n=[];let s=!1;if(rn(t,(o,d)=>{if(o.substring(0,1)!=="."){const u=vt(d);u.isEmpty()||(s=s||!u.getPriority().isEmpty(),n.push(new ge(o,u)))}}),n.length===0)return _e.EMPTY_NODE;const i=Yc(n,X3,o=>o.name,Hp);if(s){const o=Yc(n,yt.getCompare());return new _e(i,vt(e),new Qn({".priority":o},{".priority":yt}))}else return new _e(i,vt(e),Qn.Default)}else{let n=_e.EMPTY_NODE;return rn(t,(s,l)=>{if(us(t,s)&&s.substring(0,1)!=="."){const i=vt(l);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(vt(e))}}ek(vt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak extends jd{constructor(e){super(),this.indexPath_=e,V(!fe(e)&&xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),i=s.compareTo(l);return i===0?ti(e.name,n.name):i}makePost(e,n){const s=vt(e),l=_e.EMPTY_NODE.updateChild(this.indexPath_,s);return new ge(n,l)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,Da);return new ge(Or,e)}toString(){return wN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok extends jd{compare(e,n){const s=e.node.compareTo(n.node);return s===0?ti(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ge.MIN}maxPost(){return ge.MAX}makePost(e,n){const s=vt(e);return new ge(n,s)}toString(){return".value"}}const ck=new ok;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){return{type:"value",snapshotNode:t}}function uk(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function hk(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function mk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return V(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return V(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kl}hasEnd(){return this.endSet_}getIndexEndValue(){return V(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return V(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Or}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return V(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yt}copy(){const e=new Kp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function z0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===yt?n="$priority":t.index_===ck?n="$value":t.index_===Ml?n="$key":(V(t.index_ instanceof ak,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ct(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=ct(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+ct(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=ct(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+ct(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function B0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==yt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends NN{constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=Aa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(V(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,l){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Qc.getListenId_(e,s),d={};this.listens_[o]=d;const u=z0(e._queryParams);this.restRequest_(i+".json",u,(m,b)=>{let v=b;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(i,v,!1,s),Vl(this.listens_,o)===d){let _;m?m===401?_="permission_denied":_="rest_error:"+m:_="ok",l(_,null)}})}unlisten(e,n){const s=Qc.getListenId_(e,n);delete this.listens_[s]}get(e){const n=z0(e._queryParams),s=e._path.toString(),l=new Op;return this.restRequest_(s+".json",n,(i,o)=>{let d=o;i===404&&(d=null,i=null),i===null?(this.onDataUpdate_(s,d,!1,null),l.resolve(d)):l.reject(new Error(d))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,i])=>{l&&l.accessToken&&(n.auth=l.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Zl(n);this.log_("Sending REST request for "+o);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(s&&d.readyState===4){this.log_("REST Response for "+o+" received. status:",d.status,"response:",d.responseText);let u=null;if(d.status>=200&&d.status<300){try{u=_a(d.responseText)}catch{Vt("Failed to parse JSON response for "+o+": "+d.responseText)}s(null,u)}else d.status!==401&&d.status!==404&&Vt("Got unsuccessful REST response for "+o+" Status: "+d.status),s(d.status);s=null}},d.open("GET",o,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(){return{value:null,children:new Map}}function MN(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=xe(e);t.children.has(s)||t.children.set(s,Jc());const l=t.children.get(s);e=Ae(e),MN(l,e,n)}}function km(t,e,n){t.value!==null?n(e,t.value):fk(t,(s,l)=>{const i=new De(e.toString()+"/"+s);km(l,i,n)})}function fk(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&rn(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=10*1e3,gk=30*1e3,vk=5*60*1e3;class yk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xk(e);const s=W0+(gk-W0)*Math.random();ta(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;rn(e,(l,i)=>{i>0&&us(this.statsToReport_,l)&&(n[l]=i,s=!0)}),s&&this.server_.reportStats(n),ta(this.reportStats_.bind(this),Math.floor(Math.random()*2*vk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Cn||(Cn={}));function AN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ON(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function DN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Cn.ACK_USER_WRITE,this.source=AN()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return V(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new De(e));return new Xc(ke(),n,this.revert)}}else return V(xe(this.path)===e,"operationForChild called for unrelated child."),new Xc(Ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Cn.OVERWRITE}operationForChild(e){return fe(this.path)?new Dr(this.source,ke(),this.snap.getImmediateChild(e)):new Dr(this.source,Ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Cn.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new De(e));return n.isEmpty()?null:n.value?new Dr(this.source,ke(),n.value):new Sa(this.source,ke(),n)}else return V(xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sa(this.source,Ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function bk(t,e,n,s){const l=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(mk(o.childName,o.snapshotNode))}),$i(t,l,"child_removed",e,s,n),$i(t,l,"child_added",e,s,n),$i(t,l,"child_moved",i,s,n),$i(t,l,"child_changed",e,s,n),$i(t,l,"value",e,s,n),l}function $i(t,e,n,s,l,i){const o=s.filter(d=>d.type===n);o.sort((d,u)=>_k(t,d,u)),o.forEach(d=>{const u=Nk(t,d,i);l.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(u,t.query_))})})}function Nk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function _k(t,e,n){if(e.childName==null||n.childName==null)throw Xl("Should only compare child_ events.");const s=new ge(e.childName,e.snapshotNode),l=new ge(n.childName,n.snapshotNode);return t.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){return{eventCache:t,serverCache:e}}function na(t,e,n,s){return LN(new Gp(e,n,s),t.serverCache)}function FN(t,e,n,s){return LN(t.eventCache,new Gp(e,n,s))}function Em(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Lr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh;const jk=()=>(yh||(yh=new Ot(c3)),yh);class Me{constructor(e,n=jk()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return rn(e,(s,l)=>{n=n.set(new De(s),l)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(fe(e))return null;{const s=xe(e),l=this.children.get(s);if(l!==null){const i=l.findRootMostMatchingPathAndValue(Ae(e),n);return i!=null?{path:lt(new De(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=xe(e),s=this.children.get(n);return s!==null?s.subtree(Ae(e)):new Me(null)}}set(e,n){if(fe(e))return new Me(n,this.children);{const s=xe(e),i=(this.children.get(s)||new Me(null)).set(Ae(e),n),o=this.children.insert(s,i);return new Me(this.value,o)}}remove(e){if(fe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=xe(e),s=this.children.get(n);if(s){const l=s.remove(Ae(e));let i;return l.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,l),this.value===null&&i.isEmpty()?new Me(null):new Me(this.value,i)}else return this}}get(e){if(fe(e))return this.value;{const n=xe(e),s=this.children.get(n);return s?s.get(Ae(e)):null}}setTree(e,n){if(fe(e))return n;{const s=xe(e),i=(this.children.get(s)||new Me(null)).setTree(Ae(e),n);let o;return i.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,i),new Me(this.value,o)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,i)=>{s[l]=i.fold_(lt(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(fe(e))return null;{const i=xe(e),o=this.children.get(i);return o?o.findOnPath_(Ae(e),lt(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,s){if(fe(e))return this;{this.value&&s(n,this.value);const l=xe(e),i=this.children.get(l);return i?i.foreachOnPath_(Ae(e),lt(n,l),s):new Me(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(lt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.writeTree_=e}static empty(){return new xn(new Me(null))}}function sa(t,e,n){if(fe(e))return new xn(new Me(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let i=s.value;const o=en(l,e);return i=i.updateChild(o,n),new xn(t.writeTree_.set(l,i))}else{const l=new Me(n),i=t.writeTree_.setTree(e,l);return new xn(i)}}}function V0(t,e,n){let s=t;return rn(n,(l,i)=>{s=sa(s,lt(e,l),i)}),s}function H0(t,e){if(fe(e))return xn.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new xn(n)}}function Im(t,e){return zr(t,e)!=null}function zr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(en(n.path,e)):null}function K0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(yt,(s,l)=>{e.push(new ge(s,l))}):t.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new ge(s,l.value))}),e}function Ks(t,e){if(fe(e))return t;{const n=zr(t,e);return n!=null?new xn(new Me(n)):new xn(t.writeTree_.subtree(e))}}function Tm(t){return t.writeTree_.isEmpty()}function Gl(t,e){return UN(ke(),t.writeTree_,e)}function UN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((l,i)=>{l===".priority"?(V(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=UN(lt(t,l),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(lt(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){return HN(e,t)}function wk(t,e,n,s,l){V(s>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(t.visibleWrites=sa(t.visibleWrites,e,n)),t.lastWriteId=s}function Sk(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Ck(t,e){const n=t.allWrites.findIndex(d=>d.writeId===e);V(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let l=s.visible,i=!1,o=t.allWrites.length-1;for(;l&&o>=0;){const d=t.allWrites[o];d.visible&&(o>=n&&kk(d,s.path)?l=!1:mn(s.path,d.path)&&(i=!0)),o--}if(l){if(i)return Ek(t),!0;if(s.snap)t.visibleWrites=H0(t.visibleWrites,s.path);else{const d=s.children;rn(d,u=>{t.visibleWrites=H0(t.visibleWrites,lt(s.path,u))})}return!0}else return!1}function kk(t,e){if(t.snap)return mn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mn(lt(t.path,n),e))return!0;return!1}function Ek(t){t.visibleWrites=zN(t.allWrites,Ik,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Ik(t){return t.visible}function zN(t,e,n){let s=xn.empty();for(let l=0;l<t.length;++l){const i=t[l];if(e(i)){const o=i.path;let d;if(i.snap)mn(n,o)?(d=en(n,o),s=sa(s,d,i.snap)):mn(o,n)&&(d=en(o,n),s=sa(s,ke(),i.snap.getChild(d)));else if(i.children){if(mn(n,o))d=en(n,o),s=V0(s,d,i.children);else if(mn(o,n))if(d=en(o,n),fe(d))s=V0(s,ke(),i.children);else{const u=Vl(i.children,xe(d));if(u){const m=u.getChild(Ae(d));s=sa(s,ke(),m)}}}else throw Xl("WriteRecord should have .snap or .children")}}return s}function BN(t,e,n,s,l){if(!s&&!l){const i=zr(t.visibleWrites,e);if(i!=null)return i;{const o=Ks(t.visibleWrites,e);if(Tm(o))return n;if(n==null&&!Im(o,ke()))return null;{const d=n||_e.EMPTY_NODE;return Gl(o,d)}}}else{const i=Ks(t.visibleWrites,e);if(!l&&Tm(i))return n;if(!l&&n==null&&!Im(i,ke()))return null;{const o=function(m){return(m.visible||l)&&(!s||!~s.indexOf(m.writeId))&&(mn(m.path,e)||mn(e,m.path))},d=zN(t.allWrites,o,e),u=n||_e.EMPTY_NODE;return Gl(d,u)}}}function Tk(t,e,n){let s=_e.EMPTY_NODE;const l=zr(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(yt,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Ks(t.visibleWrites,e);return n.forEachChild(yt,(o,d)=>{const u=Gl(Ks(i,new De(o)),d);s=s.updateImmediateChild(o,u)}),K0(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Ks(t.visibleWrites,e);return K0(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Rk(t,e,n,s,l){V(s||l,"Either existingEventSnap or existingServerSnap must exist");const i=lt(e,n);if(Im(t.visibleWrites,i))return null;{const o=Ks(t.visibleWrites,i);return Tm(o)?l.getChild(n):Gl(o,l.getChild(n))}}function Pk(t,e,n,s){const l=lt(e,n),i=zr(t.visibleWrites,l);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Ks(t.visibleWrites,l);return Gl(o,s.getNode().getImmediateChild(n))}else return null}function Mk(t,e){return zr(t.visibleWrites,e)}function Ak(t,e,n,s,l,i,o){let d;const u=Ks(t.visibleWrites,e),m=zr(u,ke());if(m!=null)d=m;else if(n!=null)d=Gl(u,n);else return[];if(d=d.withIndex(o),!d.isEmpty()&&!d.isLeafNode()){const b=[],v=o.getCompare(),_=i?d.getReverseIteratorFrom(s,o):d.getIteratorFrom(s,o);let I=_.getNext();for(;I&&b.length<l;)v(I,s)!==0&&b.push(I),I=_.getNext();return b}else return[]}function Ok(){return{visibleWrites:xn.empty(),allWrites:[],lastWriteId:-1}}function Rm(t,e,n,s){return BN(t.writeTree,t.treePath,e,n,s)}function WN(t,e){return Tk(t.writeTree,t.treePath,e)}function G0(t,e,n,s){return Rk(t.writeTree,t.treePath,e,n,s)}function Zc(t,e){return Mk(t.writeTree,lt(t.treePath,e))}function Dk(t,e,n,s,l,i){return Ak(t.writeTree,t.treePath,e,n,s,l,i)}function qp(t,e,n){return Pk(t.writeTree,t.treePath,e,n)}function VN(t,e){return HN(lt(t.treePath,e),t.writeTree)}function HN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;V(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),V(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const i=l.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,$0(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,hk(s,l.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,uk(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,$0(s,e.snapshotNode,l.oldSnap));else throw Xl("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const KN=new Fk;class Yp{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Gp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qp(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Lr(this.viewCache_),i=Dk(this.writes_,l,n,1,s,e);return i.length===0?null:i[0]}}function Uk(t,e){V(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),V(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $k(t,e,n,s,l){const i=new Lk;let o,d;if(n.type===Cn.OVERWRITE){const m=n;m.source.fromUser?o=Pm(t,e,m.path,m.snap,s,l,i):(V(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!fe(m.path),o=ed(t,e,m.path,m.snap,s,l,d,i))}else if(n.type===Cn.MERGE){const m=n;m.source.fromUser?o=Bk(t,e,m.path,m.children,s,l,i):(V(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),o=Mm(t,e,m.path,m.children,s,l,d,i))}else if(n.type===Cn.ACK_USER_WRITE){const m=n;m.revert?o=Hk(t,e,m.path,s,l,i):o=Wk(t,e,m.path,m.affectedTree,s,l,i)}else if(n.type===Cn.LISTEN_COMPLETE)o=Vk(t,e,n.path,s,i);else throw Xl("Unknown operation type: "+n.type);const u=i.getChanges();return zk(e,o,u),{viewCache:o,changes:u}}function zk(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=Em(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(dk(Em(e)))}}function GN(t,e,n,s,l,i){const o=e.eventCache;if(Zc(s,n)!=null)return e;{let d,u;if(fe(n))if(V(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Lr(e),b=m instanceof _e?m:_e.EMPTY_NODE,v=WN(s,b);d=t.filter.updateFullNode(e.eventCache.getNode(),v,i)}else{const m=Rm(s,Lr(e));d=t.filter.updateFullNode(e.eventCache.getNode(),m,i)}else{const m=xe(n);if(m===".priority"){V(Ys(n)===1,"Can't have a priority with additional path components");const b=o.getNode();u=e.serverCache.getNode();const v=G0(s,n,b,u);v!=null?d=t.filter.updatePriority(b,v):d=o.getNode()}else{const b=Ae(n);let v;if(o.isCompleteForChild(m)){u=e.serverCache.getNode();const _=G0(s,n,o.getNode(),u);_!=null?v=o.getNode().getImmediateChild(m).updateChild(b,_):v=o.getNode().getImmediateChild(m)}else v=qp(s,m,e.serverCache);v!=null?d=t.filter.updateChild(o.getNode(),m,v,b,l,i):d=o.getNode()}}return na(e,d,o.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function ed(t,e,n,s,l,i,o,d){const u=e.serverCache;let m;const b=o?t.filter:t.filter.getIndexedFilter();if(fe(n))m=b.updateFullNode(u.getNode(),s,null);else if(b.filtersNodes()&&!u.isFiltered()){const I=u.getNode().updateChild(n,s);m=b.updateFullNode(u.getNode(),I,null)}else{const I=xe(n);if(!u.isCompleteForPath(n)&&Ys(n)>1)return e;const D=Ae(n),oe=u.getNode().getImmediateChild(I).updateChild(D,s);I===".priority"?m=b.updatePriority(u.getNode(),oe):m=b.updateChild(u.getNode(),I,oe,D,KN,null)}const v=FN(e,m,u.isFullyInitialized()||fe(n),b.filtersNodes()),_=new Yp(l,v,i);return GN(t,v,n,l,_,d)}function Pm(t,e,n,s,l,i,o){const d=e.eventCache;let u,m;const b=new Yp(l,e,i);if(fe(n))m=t.filter.updateFullNode(e.eventCache.getNode(),s,o),u=na(e,m,!0,t.filter.filtersNodes());else{const v=xe(n);if(v===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),s),u=na(e,m,d.isFullyInitialized(),d.isFiltered());else{const _=Ae(n),I=d.getNode().getImmediateChild(v);let D;if(fe(_))D=s;else{const U=b.getCompleteChild(v);U!=null?jN(_)===".priority"&&U.getChild(SN(_)).isEmpty()?D=U:D=U.updateChild(_,s):D=_e.EMPTY_NODE}if(I.equals(D))u=e;else{const U=t.filter.updateChild(d.getNode(),v,D,_,b,o);u=na(e,U,d.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function q0(t,e){return t.eventCache.isCompleteForChild(e)}function Bk(t,e,n,s,l,i,o){let d=e;return s.foreach((u,m)=>{const b=lt(n,u);q0(e,xe(b))&&(d=Pm(t,d,b,m,l,i,o))}),s.foreach((u,m)=>{const b=lt(n,u);q0(e,xe(b))||(d=Pm(t,d,b,m,l,i,o))}),d}function Y0(t,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function Mm(t,e,n,s,l,i,o,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,m;fe(n)?m=s:m=new Me(null).setTree(n,s);const b=e.serverCache.getNode();return m.children.inorderTraversal((v,_)=>{if(b.hasChild(v)){const I=e.serverCache.getNode().getImmediateChild(v),D=Y0(t,I,_);u=ed(t,u,new De(v),D,l,i,o,d)}}),m.children.inorderTraversal((v,_)=>{const I=!e.serverCache.isCompleteForChild(v)&&_.value===null;if(!b.hasChild(v)&&!I){const D=e.serverCache.getNode().getImmediateChild(v),U=Y0(t,D,_);u=ed(t,u,new De(v),U,l,i,o,d)}}),u}function Wk(t,e,n,s,l,i,o){if(Zc(l,n)!=null)return e;const d=e.serverCache.isFiltered(),u=e.serverCache;if(s.value!=null){if(fe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ed(t,e,n,u.getNode().getChild(n),l,i,d,o);if(fe(n)){let m=new Me(null);return u.getNode().forEachChild(Ml,(b,v)=>{m=m.set(new De(b),v)}),Mm(t,e,n,m,l,i,d,o)}else return e}else{let m=new Me(null);return s.foreach((b,v)=>{const _=lt(n,b);u.isCompleteForPath(_)&&(m=m.set(b,u.getNode().getChild(_)))}),Mm(t,e,n,m,l,i,d,o)}}function Vk(t,e,n,s,l){const i=e.serverCache,o=FN(e,i.getNode(),i.isFullyInitialized()||fe(n),i.isFiltered());return GN(t,o,n,s,KN,l)}function Hk(t,e,n,s,l,i){let o;if(Zc(s,n)!=null)return e;{const d=new Yp(s,e,l),u=e.eventCache.getNode();let m;if(fe(n)||xe(n)===".priority"){let b;if(e.serverCache.isFullyInitialized())b=Rm(s,Lr(e));else{const v=e.serverCache.getNode();V(v instanceof _e,"serverChildren would be complete if leaf node"),b=WN(s,v)}b=b,m=t.filter.updateFullNode(u,b,i)}else{const b=xe(n);let v=qp(s,b,e.serverCache);v==null&&e.serverCache.isCompleteForChild(b)&&(v=u.getImmediateChild(b)),v!=null?m=t.filter.updateChild(u,b,v,Ae(n),d,i):e.eventCache.getNode().hasChild(b)?m=t.filter.updateChild(u,b,_e.EMPTY_NODE,Ae(n),d,i):m=u,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Rm(s,Lr(e)),o.isLeafNode()&&(m=t.filter.updateFullNode(m,o,i)))}return o=e.serverCache.isFullyInitialized()||Zc(s,ke())!=null,na(e,m,o,t.filter.filtersNodes())}}function Kk(t,e){const n=Lr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(xe(e)).isEmpty())?n.getChild(e):null}function Q0(t,e,n,s){e.type===Cn.MERGE&&e.source.queryId!==null&&(V(Lr(t.viewCache_),"We should always have a full cache before handling merges"),V(Em(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,i=$k(t.processor_,l,e,n,s);return Uk(t.processor_,i.viewCache),V(i.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Gk(t,i.changes,i.viewCache.eventCache.getNode())}function Gk(t,e,n,s){const l=t.eventRegistrations_;return bk(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J0;function qk(t){V(!J0,"__referenceConstructor has already been defined"),J0=t}function Qp(t,e,n,s){const l=e.source.queryId;if(l!==null){const i=t.views.get(l);return V(i!=null,"SyncTree gave us an op for an invalid query."),Q0(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(Q0(o,e,n,s));return i}}function Jp(t,e){let n=null;for(const s of t.views.values())n=n||Kk(s,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0;function Yk(t){V(!X0,"__referenceConstructor has already been defined"),X0=t}class Z0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=Ok(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qk(t,e,n,s,l){return wk(t.pendingWriteTree_,e,n,s,l),l?Sd(t,new Dr(AN(),e,n)):[]}function wl(t,e,n=!1){const s=Sk(t.pendingWriteTree_,e);if(Ck(t.pendingWriteTree_,e)){let i=new Me(null);return s.snap!=null?i=i.set(ke(),!0):rn(s.children,o=>{i=i.set(new De(o),!0)}),Sd(t,new Xc(s.path,i,n))}else return[]}function wd(t,e,n){return Sd(t,new Dr(ON(),e,n))}function Jk(t,e,n){const s=Me.fromObject(n);return Sd(t,new Sa(ON(),e,s))}function Xk(t,e,n,s){const l=JN(t,s);if(l!=null){const i=XN(l),o=i.path,d=i.queryId,u=en(o,e),m=new Dr(DN(d),u,n);return ZN(t,o,m)}else return[]}function Zk(t,e,n,s){const l=JN(t,s);if(l){const i=XN(l),o=i.path,d=i.queryId,u=en(o,e),m=Me.fromObject(n),b=new Sa(DN(d),u,m);return ZN(t,o,b)}else return[]}function qN(t,e,n){const l=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,d)=>{const u=en(o,e),m=Jp(d,u);if(m)return m});return BN(l,e,i,n,!0)}function Sd(t,e){return YN(e,t.syncPointTree_,null,$N(t.pendingWriteTree_,ke()))}function YN(t,e,n,s){if(fe(t.path))return QN(t,e,n,s);{const l=e.get(ke());n==null&&l!=null&&(n=Jp(l,ke()));let i=[];const o=xe(t.path),d=t.operationForChild(o),u=e.children.get(o);if(u&&d){const m=n?n.getImmediateChild(o):null,b=VN(s,o);i=i.concat(YN(d,u,m,b))}return l&&(i=i.concat(Qp(l,t,s,n))),i}}function QN(t,e,n,s){const l=e.get(ke());n==null&&l!=null&&(n=Jp(l,ke()));let i=[];return e.children.inorderTraversal((o,d)=>{const u=n?n.getImmediateChild(o):null,m=VN(s,o),b=t.operationForChild(o);b&&(i=i.concat(QN(b,d,u,m)))}),l&&(i=i.concat(Qp(l,t,s,n))),i}function JN(t,e){return t.tagToQueryMap.get(e)}function XN(t){const e=t.indexOf("$");return V(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new De(t.substr(0,e))}}function ZN(t,e,n){const s=t.syncPointTree_.get(e);V(s,"Missing sync point for query tag that we're tracking");const l=$N(t.pendingWriteTree_,e);return Qp(s,n,l,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Xp(n)}node(){return this.node_}}class Zp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=lt(this.path_,e);return new Zp(this.syncTree_,n)}node(){return qN(this.syncTree_,this.path_)}}const eE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ev=function(t,e,n){if(!t||typeof t!="object")return t;if(V(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return tE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return nE(t[".sv"],e);V(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},tE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:V(!1,"Unexpected server value: "+t)}},nE=function(t,e,n){t.hasOwnProperty("increment")||V(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&V(!1,"Unexpected increment value: "+s);const l=e.node();if(V(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const o=l.getValue();return typeof o!="number"?s:o+s},sE=function(t,e,n,s){return ef(e,new Zp(n,t),s)},rE=function(t,e,n){return ef(t,new Xp(e),n)};function ef(t,e,n){const s=t.getPriority().val(),l=ev(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,d=ev(o.getValue(),e,n);return d!==o.getValue()||l!==o.getPriority().val()?new nt(d,vt(l)):t}else{const o=t;return i=o,l!==o.getPriority().val()&&(i=i.updatePriority(new nt(l))),o.forEachChild(yt,(d,u)=>{const m=ef(u,e.getImmediateChild(d),n);m!==u&&(i=i.updateImmediateChild(d,m))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function nf(t,e){let n=e instanceof De?e:new De(e),s=t,l=xe(n);for(;l!==null;){const i=Vl(s.node.children,l)||{children:{},childCount:0};s=new tf(l,s,i),n=Ae(n),l=xe(n)}return s}function ni(t){return t.node.value}function e_(t,e){t.node.value=e,Am(t)}function t_(t){return t.node.childCount>0}function lE(t){return ni(t)===void 0&&!t_(t)}function Cd(t,e){rn(t.node.children,(n,s)=>{e(new tf(n,t,s))})}function n_(t,e,n,s){n&&e(t),Cd(t,l=>{n_(l,e,!0)})}function iE(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function La(t){return new De(t.parent===null?t.name:La(t.parent)+"/"+t.name)}function Am(t){t.parent!==null&&aE(t.parent,t.name,t)}function aE(t,e,n){const s=lE(n),l=us(t.node.children,e);s&&l?(delete t.node.children[e],t.node.childCount--,Am(t)):!s&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Am(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=/[\[\].#$\/\u0000-\u001F\u007F]/,cE=/[\[\].#$\u0000-\u001F\u007F]/,bh=10*1024*1024,s_=function(t){return typeof t=="string"&&t.length!==0&&!oE.test(t)},dE=function(t){return typeof t=="string"&&t.length!==0&&!cE.test(t)},uE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dE(t)},r_=function(t,e,n){const s=n instanceof De?new V3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Nr(s));if(typeof e=="function")throw new Error(t+"contains a function "+Nr(s)+" with contents = "+e.toString());if(nN(e))throw new Error(t+"contains "+e.toString()+" "+Nr(s));if(typeof e=="string"&&e.length>bh/3&&_d(e)>bh)throw new Error(t+"contains a string greater than "+bh+" utf8 bytes "+Nr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,i=!1;if(rn(e,(o,d)=>{if(o===".value")l=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!s_(o)))throw new Error(t+" contains an invalid key ("+o+") "+Nr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);H3(s,o),r_(t,d,s),K3(s)}),l&&i)throw new Error(t+' contains ".value" child '+Nr(s)+" in addition to actual children.")}},hE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!s_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!uE(n))throw new Error(VS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pE(t,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],i=l.getPath();n!==null&&!CN(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(l)}n&&t.eventLists_.push(n)}function Br(t,e,n){pE(t,n),fE(t,s=>mn(s,e)||mn(e,s))}function fE(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const l=t.eventLists_[s];if(l){const i=l.path;e(i)?(xE(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();ea&&gt("event: "+n.toString()),Oa(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="repo_interrupt",vE=25;class yE{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jc(),this.transactionQueueTree_=new tf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bE(t,e,n){if(t.stats_=Bp(t.repoInfo_),t.forceRestClient_||f3())t.server_=new Qc(t.repoInfo_,(s,l,i,o)=>{tv(t,s,l,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nv(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new ts(t.repoInfo_,e,(s,l,i,o)=>{tv(t,s,l,i,o)},s=>{nv(t,s)},s=>{_E(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=b3(t.repoInfo_,()=>new yk(t.stats_,t.server_)),t.infoData_=new pk,t.infoSyncTree_=new Z0({startListening:(s,l,i,o)=>{let d=[];const u=t.infoData_.getNode(s._path);return u.isEmpty()||(d=wd(t.infoSyncTree_,s._path,u),setTimeout(()=>{o("ok")},0)),d},stopListening:()=>{}}),sf(t,"connected",!1),t.serverSyncTree_=new Z0({startListening:(s,l,i,o)=>(t.server_.listen(s,i,l,(d,u)=>{const m=o(d,u);Br(t.eventQueue_,s._path,m)}),[]),stopListening:(s,l)=>{t.server_.unlisten(s,l)}})}function NE(t){const n=t.infoData_.getNode(new De(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function l_(t){return eE({timestamp:NE(t)})}function tv(t,e,n,s,l){t.dataUpdateCount++;const i=new De(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(l)if(s){const u=Vc(n,m=>vt(m));o=Zk(t.serverSyncTree_,i,u,l)}else{const u=vt(n);o=Xk(t.serverSyncTree_,i,u,l)}else if(s){const u=Vc(n,m=>vt(m));o=Jk(t.serverSyncTree_,i,u)}else{const u=vt(n);o=wd(t.serverSyncTree_,i,u)}let d=i;o.length>0&&(d=lf(t,i)),Br(t.eventQueue_,d,o)}function nv(t,e){sf(t,"connected",e),e===!1&&wE(t)}function _E(t,e){rn(e,(n,s)=>{sf(t,n,s)})}function sf(t,e,n){const s=new De("/.info/"+e),l=vt(n);t.infoData_.updateSnapshot(s,l);const i=wd(t.infoSyncTree_,s,l);Br(t.eventQueue_,s,i)}function jE(t){return t.nextWriteId_++}function wE(t){i_(t,"onDisconnectEvents");const e=l_(t),n=Jc();km(t.onDisconnect_,ke(),(l,i)=>{const o=sE(l,i,t.serverSyncTree_,e);MN(n,l,o)});let s=[];km(n,ke(),(l,i)=>{s=s.concat(wd(t.serverSyncTree_,l,i));const o=EE(t,l);lf(t,o)}),t.onDisconnect_=Jc(),Br(t.eventQueue_,ke(),s)}function SE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(gE)}function i_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),gt(n,...e)}function a_(t,e,n){return qN(t.serverSyncTree_,e,n)||_e.EMPTY_NODE}function rf(t,e=t.transactionQueueTree_){if(e||kd(t,e),ni(e)){const n=c_(t,e);V(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&CE(t,La(e),n)}else t_(e)&&Cd(e,n=>{rf(t,n)})}function CE(t,e,n){const s=n.map(m=>m.currentWriteId),l=a_(t,e,s);let i=l;const o=l.hash();for(let m=0;m<n.length;m++){const b=n[m];V(b.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const v=en(e,b.path);i=i.updateChild(v,b.currentOutputSnapshotRaw)}const d=i.val(!0),u=e;t.server_.put(u.toString(),d,m=>{i_(t,"transaction put response",{path:u.toString(),status:m});let b=[];if(m==="ok"){const v=[];for(let _=0;_<n.length;_++)n[_].status=2,b=b.concat(wl(t.serverSyncTree_,n[_].currentWriteId)),n[_].onComplete&&v.push(()=>n[_].onComplete(null,!0,n[_].currentOutputSnapshotResolved)),n[_].unwatcher();kd(t,nf(t.transactionQueueTree_,e)),rf(t,t.transactionQueueTree_),Br(t.eventQueue_,e,b);for(let _=0;_<v.length;_++)Oa(v[_])}else{if(m==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{Vt("transaction at "+u.toString()+" failed: "+m);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=m}lf(t,e)}},o)}function lf(t,e){const n=o_(t,e),s=La(n),l=c_(t,n);return kE(t,l,s),s}function kE(t,e,n){if(e.length===0)return;const s=[];let l=[];const o=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const u=e[d],m=en(n,u.path);let b=!1,v;if(V(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)b=!0,v=u.abortReason,l=l.concat(wl(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=vE)b=!0,v="maxretry",l=l.concat(wl(t.serverSyncTree_,u.currentWriteId,!0));else{const _=a_(t,u.path,o);u.currentInputSnapshot=_;const I=e[d].update(_.val());if(I!==void 0){r_("transaction failed: Data returned ",I,u.path);let D=vt(I);typeof I=="object"&&I!=null&&us(I,".priority")||(D=D.updatePriority(_.getPriority()));const oe=u.currentWriteId,S=l_(t),j=rE(D,_,S);u.currentOutputSnapshotRaw=D,u.currentOutputSnapshotResolved=j,u.currentWriteId=jE(t),o.splice(o.indexOf(oe),1),l=l.concat(Qk(t.serverSyncTree_,u.path,j,u.currentWriteId,u.applyLocally)),l=l.concat(wl(t.serverSyncTree_,oe,!0))}else b=!0,v="nodata",l=l.concat(wl(t.serverSyncTree_,u.currentWriteId,!0))}Br(t.eventQueue_,n,l),l=[],b&&(e[d].status=2,function(_){setTimeout(_,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(v==="nodata"?s.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):s.push(()=>e[d].onComplete(new Error(v),!1,null))))}kd(t,t.transactionQueueTree_);for(let d=0;d<s.length;d++)Oa(s[d]);rf(t,t.transactionQueueTree_)}function o_(t,e){let n,s=t.transactionQueueTree_;for(n=xe(e);n!==null&&ni(s)===void 0;)s=nf(s,n),e=Ae(e),n=xe(e);return s}function c_(t,e){const n=[];return d_(t,e,n),n.sort((s,l)=>s.order-l.order),n}function d_(t,e,n){const s=ni(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);Cd(e,l=>{d_(t,l,n)})}function kd(t,e){const n=ni(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,e_(e,n.length>0?n:void 0)}Cd(e,s=>{kd(t,s)})}function EE(t,e){const n=La(o_(t,e)),s=nf(t.transactionQueueTree_,e);return iE(s,l=>{Nh(t,l)}),Nh(t,s),n_(s,l=>{Nh(t,l)}),n}function Nh(t,e){const n=ni(e);if(n){const s=[];let l=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(V(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(V(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),l=l.concat(wl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?e_(e,void 0):n.length=i+1,Br(t.eventQueue_,La(e),l);for(let o=0;o<s.length;o++)Oa(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function TE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Vt(`Invalid query segment '${n}' in query '${t}'`)}return e}const sv=function(t,e){const n=RE(t),s=n.namespace;n.domain==="firebase.com"&&as(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&as("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||a3();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pN(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new De(n.pathString)}},RE=function(t){let e="",n="",s="",l="",i="",o=!0,d="https",u=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(d=t.substring(0,m-1),t=t.substring(m+2));let b=t.indexOf("/");b===-1&&(b=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(b,v)),b<v&&(l=IE(t.substring(b,v)));const _=TE(t.substring(Math.min(t.length,v)));m=e.indexOf(":"),m>=0?(o=d==="https"||d==="wss",u=parseInt(e.substring(m+1),10)):m=e.length;const I=e.slice(0,m);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{const D=e.indexOf(".");s=e.substring(0,D).toLowerCase(),n=e.substring(D+1),i=s}"ns"in _&&(i=_.ns)}return{host:e,port:u,domain:n,subdomain:s,secure:o,scheme:d,pathString:l,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return fe(this._path)?null:jN(this._path)}get ref(){return new si(this._repo,this._path)}get _queryIdentifier(){const e=B0(this._queryParams),n=$p(e);return n==="{}"?"default":n}get _queryObject(){return B0(this._queryParams)}isEqual(e){if(e=er(e),!(e instanceof af))return!1;const n=this._repo===e._repo,s=CN(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+W3(this._path)}}class si extends af{constructor(e,n){super(e,n,new Kp,!1)}get parent(){const e=SN(this._path);return e===null?null:new si(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}qk(si);Yk(si);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="FIREBASE_DATABASE_EMULATOR_HOST",Om={};let ME=!1;function AE(t,e,n,s){t.repoInfo_=new pN(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function OE(t,e,n,s,l){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||as("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=sv(i,l),d=o.repoInfo,u;typeof process<"u"&&j0&&(u=j0[PE]),u?(i=`http://${u}?ns=${d.namespace}`,o=sv(i,l),d=o.repoInfo):o.repoInfo.secure;const m=new g3(t.name,t.options,e);hE("Invalid Firebase Database URL",o),fe(o.path)||as("Database URL must point to the root of a Firebase Database (not including a child path).");const b=LE(d,t,m,new x3(t.name,n));return new FE(b,t)}function DE(t,e){const n=Om[e];(!n||n[t.key]!==t)&&as(`Database ${e}(${t.repoInfo_}) has already been deleted.`),SE(t),delete n[t.key]}function LE(t,e,n,s){let l=Om[e.name];l||(l={},Om[e.name]=l);let i=l[t.toURLString()];return i&&as("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new yE(t,ME,n,s),l[t.toURLString()]=i,i}class FE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new si(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&as("Cannot call "+e+" on a deleted database.")}}function UE(t=Qb(),e){const n=Up(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=kS("database");s&&$E(n,...s)}return n}function $E(t,e,n,s={}){t=er(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&as("Cannot call useEmulator() after instance has already been initialized.");const l=t._repoInternal;let i;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&as('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new mc(mc.OWNER);else if(s.mockUserToken){const o=typeof s.mockUserToken=="string"?s.mockUserToken:ES(s.mockUserToken,t.app.options.projectId);i=new mc(o)}AE(l,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){t3(ei),Hl(new Ar("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return OE(s,l,i,n)},"PUBLIC").setMultipleInstances(!0)),Hs(w0,S0,t),Hs(w0,S0,"esm2017")}ts.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ts.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};zE();function of(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(n[s[l]]=t[s[l]]);return n}function u_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BE=u_,h_=new Pa("auth","Firebase",u_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Lp("@firebase/auth");function WE(t,...e){td.logLevel<=Ce.WARN&&td.warn(`Auth (${ei}): ${t}`,...e)}function pc(t,...e){td.logLevel<=Ce.ERROR&&td.error(`Auth (${ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t,...e){throw cf(t,...e)}function In(t,...e){return cf(t,...e)}function m_(t,e,n){const s=Object.assign(Object.assign({},BE()),{[e]:n});return new Pa("auth","Firebase",s).create(e,{appName:t.name})}function Er(t){return m_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return h_.create(t,...e)}function ce(t,e,...n){if(!t)throw cf(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function cs(t,e){t||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VE(){return rv()==="http:"||rv()==="https:"}function rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VE()||TS()||"connection"in navigator)?navigator.onLine:!0}function KE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){this.shortDelay=e,this.longDelay=n,cs(n>e,"Short delay should be less than long delay!"),this.isMobile=Dp()||Hb()}get(){return HE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new Fa(3e4,6e4);function uf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,s,l={}){return f_(t,l,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const d=Zl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:u},i);return IS()||(m.referrerPolicy="no-referrer"),p_.fetch()(x_(t,t.config.apiHost,n,d),m)})}async function f_(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},GE),e);try{const l=new QE(t),i=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Zo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const d=i.ok?o.errorMessage:o.error.message,[u,m]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zo(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Zo(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Zo(t,"user-disabled",o);const b=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw m_(t,b,m);os(t,b)}}catch(l){if(l instanceof Zs)throw l;os(t,"network-request-failed",{message:String(l)})}}async function YE(t,e,n,s,l={}){const i=await ri(t,e,n,s,l);return"mfaPendingCredential"in i&&os(t,"multi-factor-auth-required",{_serverResponse:i}),i}function x_(t,e,n,s){const l=`${e}${n}?${s}`;return t.config.emulator?df(t.config,l):`${t.config.apiScheme}://${l}`}class QE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(In(this.auth,"network-request-failed")),qE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=In(t,e,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function g_(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XE(t,e=!1){const n=er(t),s=await n.getIdToken(e),l=hf(s);ce(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const i=typeof l.firebase=="object"?l.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:l,token:s,authTime:ra(_h(l.auth_time)),issuedAtTime:ra(_h(l.iat)),expirationTime:ra(_h(l.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _h(t){return Number(t)*1e3}function hf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Wc(n);return l?JSON.parse(l):(pc("Failed to decode base64 JWT payload"),null)}catch(l){return pc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function lv(t){const e=hf(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Zs&&ZE(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function ZE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(t){var e;const n=t.auth,s=await t.getIdToken(),l=await Ca(t,g_(n,{idToken:s}));ce(l==null?void 0:l.users.length,n,"internal-error");const i=l.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?v_(i.providerUserInfo):[],d=nI(t.providerData,o),u=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!(d!=null&&d.length),b=u?m:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new Lm(i.createdAt,i.lastLoginAt),isAnonymous:b};Object.assign(t,v)}async function tI(t){const e=er(t);await nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nI(t,e){return[...t.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function v_(t){return t.map(e=>{var{providerId:n}=e,s=of(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(t,e){const n=await f_(t,{},async()=>{const s=Zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:i}=t.config,o=x_(t,l,"/v1/token",`key=${i}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",p_.fetch()(o,{method:"POST",headers:d,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rI(t,e){return ri(t,"POST","/v2/accounts:revokeToken",uf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=lv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:i}=await sI(e,n);this.updateTokensAndExpiration(s,l,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:i}=n,o=new Al;return s&&(ce(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),l&&(ce(typeof l=="string","internal-error",{appName:e}),o.accessToken=l),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,i=of(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XE(this,e)}reload(){return tI(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await nd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(As(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await Ca(this,JE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,i,o,d,u,m,b;const v=(s=n.displayName)!==null&&s!==void 0?s:void 0,_=(l=n.email)!==null&&l!==void 0?l:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,D=(o=n.photoURL)!==null&&o!==void 0?o:void 0,U=(d=n.tenantId)!==null&&d!==void 0?d:void 0,oe=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(m=n.createdAt)!==null&&m!==void 0?m:void 0,j=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:C,emailVerified:P,isAnonymous:K,providerData:z,stsTokenManager:Q}=n;ce(C&&Q,e,"internal-error");const X=Al.fromJSON(this.name,Q);ce(typeof C=="string",e,"internal-error"),Ns(v,e.name),Ns(_,e.name),ce(typeof P=="boolean",e,"internal-error"),ce(typeof K=="boolean",e,"internal-error"),Ns(I,e.name),Ns(D,e.name),Ns(U,e.name),Ns(oe,e.name),Ns(S,e.name),Ns(j,e.name);const Se=new Xn({uid:C,auth:e,email:_,emailVerified:P,displayName:v,isAnonymous:K,photoURL:D,phoneNumber:I,tenantId:U,stsTokenManager:X,createdAt:S,lastLoginAt:j});return z&&Array.isArray(z)&&(Se.providerData=z.map(ue=>Object.assign({},ue))),oe&&(Se._redirectEventId=oe),Se}static async _fromIdTokenResponse(e,n,s=!1){const l=new Al;l.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await nd(i),i}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];ce(l.localId!==void 0,"internal-error");const i=l.providerUserInfo!==void 0?v_(l.providerUserInfo):[],o=!(l.email&&l.passwordHash)&&!(i!=null&&i.length),d=new Al;d.updateFromIdToken(s);const u=new Xn({uid:l.localId,auth:e,stsTokenManager:d,isAnonymous:o}),m={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:i,metadata:new Lm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,m),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;function Zn(t){cs(t instanceof Function,"Expected a class definition");let e=iv.get(t);return e?(cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}y_.type="NONE";const av=y_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ol{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:i}=this.auth;this.fullUserKey=fc(this.userKey,l.apiKey,i),this.fullPersistenceKey=fc("persistence",l.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ol(Zn(av),e,s);const l=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let i=l[0]||Zn(av);const o=fc(s,e.config.apiKey,e.name);let d=null;for(const m of n)try{const b=await m._get(o);if(b){const v=Xn._fromJSON(e,b);m!==i&&(d=v),i=m;break}}catch{}const u=l.filter(m=>m._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ol(i,e,s):(i=u[0],d&&await i._set(o,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==i)try{await m._remove(o)}catch{}})),new Ol(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S_(e))return"Blackberry";if(C_(e))return"Webos";if(N_(e))return"Safari";if((e.includes("chrome/")||__(e))&&!e.includes("edge/"))return"Chrome";if(w_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function b_(t=St()){return/firefox\//i.test(t)}function N_(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function __(t=St()){return/crios\//i.test(t)}function j_(t=St()){return/iemobile/i.test(t)}function w_(t=St()){return/android/i.test(t)}function S_(t=St()){return/blackberry/i.test(t)}function C_(t=St()){return/webos/i.test(t)}function mf(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lI(t=St()){var e;return mf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iI(){return RS()&&document.documentMode===10}function k_(t=St()){return mf(t)||w_(t)||C_(t)||S_(t)||/windows phone/i.test(t)||j_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e=[]){let n;switch(t){case"Browser":n=ov(St());break;case"Worker":n=`${ov(St())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ei}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,d)=>{try{const u=e(i);o(u)}catch(u){d(u)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e={}){return ri(t,"GET","/v2/passwordPolicy",uf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=6;class dI{constructor(e){var n,s,l,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,i,o,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(l=u.containsLowercaseLetter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new aI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{var s,l;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await g_(this,{idToken:e}),s=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(As(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=l==null?void 0:l._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===d)&&(u!=null&&u.user)&&(l=u.user,i=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(l)}catch(o){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(As(this.app))return Promise.reject(Er(this));const n=e?er(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return As(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return As(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oI(this),n=new dI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await rI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zn(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(d,this,"internal-error"),d.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,l);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pf(t){return er(t)}class cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=zS(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hI(t){ff=t}function mI(t){return ff.loadJS(t)}function pI(){return ff.gapiScript}function fI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e){const n=Up(t,"auth");if(n.isInitialized()){const l=n.getImmediate(),i=n.getOptions();if(Hc(i,e??{}))return l;os(l,"already-initialized")}return n.initialize({options:e})}function gI(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function vI(t,e,n){const s=pf(t);ce(s._canInitEmulator,s,"emulator-config-failed"),ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,i=I_(e),{host:o,port:d}=yI(e),u=d===null?"":`:${d}`;s.config.emulator={url:`${i}//${o}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:d,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:l})}),bI()}function I_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yI(t){const e=I_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const i=l[1];return{host:i,port:dv(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:dv(o)}}}function dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t,e){return YE(t,"POST","/v1/accounts:signInWithIdp",uf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="http://localhost";class Fr extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):os("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,i=of(n,["providerId","signInMethod"]);if(!s||!l)return null;const o=new Fr(s,l);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Dl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Dl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Dl(e,n)}buildRequest(){const e={requestUri:NI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends R_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Ua{constructor(){super("facebook.com")}static credential(e){return Fr._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fr._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Is.credential(n,s)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Ua{constructor(){super("github.com")}static credential(e){return Fr._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Ua{constructor(){super("twitter.com")}static credential(e,n){return Fr._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Rs.credential(n,s)}catch{return null}}}Rs.TWITTER_SIGN_IN_METHOD="twitter.com";Rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const i=await Xn._fromIdTokenResponse(e,s,l),o=uv(s);return new ql({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=uv(s);return new ql({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function uv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Zs{constructor(e,n,s,l){var i;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,sd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new sd(e,n,s,l)}}function P_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sd._fromErrorAndOperation(t,i,e,s):i})}async function _I(t,e,n=!1){const s=await Ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ql._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t,e,n=!1){const{auth:s}=t;if(As(s.app))return Promise.reject(Er(s));const l="reauthenticate";try{const i=await Ca(t,P_(s,l,e,t),n);ce(i.idToken,s,"internal-error");const o=hf(i.idToken);ce(o,s,"internal-error");const{sub:d}=o;return ce(t.uid===d,s,"user-mismatch"),ql._forOperation(t,l,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&os(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(t,e,n=!1){if(As(t.app))return Promise.reject(Er(t));const s="signIn",l=await P_(t,s,e),i=await ql._fromIdTokenResponse(t,s,l);return n||await t._updateCurrentUser(i.user),i}function SI(t,e,n,s){return er(t).onIdTokenChanged(e,n,s)}function CI(t,e,n){return er(t).beforeAuthStateChanged(e,n)}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1e3,EI=10;class A_ extends M_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,d,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);iI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,EI):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},kI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A_.type="LOCAL";const II=A_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends M_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O_.type="SESSION";const D_=O_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Ed(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:i}=n.data,o=this.handlersMap[l];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const d=Array.from(o).map(async m=>m(n.origin,i)),u=await TI(d);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let i,o;return new Promise((d,u)=>{const m=xf("",20);l.port1.start();const b=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:l,onMessage(v){const _=v;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(b),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),d(_.data.response);break;default:clearTimeout(b),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),l.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[l.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function PI(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function MI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OI(){return L_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="firebaseLocalStorageDb",DI=1,ld="firebaseLocalStorage",U_="fbase_key";class $a{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Id(t,e){return t.transaction([ld],e?"readwrite":"readonly").objectStore(ld)}function LI(){const t=indexedDB.deleteDatabase(F_);return new $a(t).toPromise()}function Fm(){const t=indexedDB.open(F_,DI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ld,{keyPath:U_})}catch(l){n(l)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ld)?e(s):(s.close(),await LI(),e(await Fm()))})})}async function hv(t,e,n){const s=Id(t,!0).put({[U_]:e,value:n});return new $a(s).toPromise()}async function FI(t,e){const n=Id(t,!1).get(e),s=await new $a(n).toPromise();return s===void 0?null:s.value}function mv(t,e){const n=Id(t,!0).delete(e);return new $a(n).toPromise()}const UI=800,$I=3;class $_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>$I)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(OI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await MI(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await hv(e,rd,"1"),await mv(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>hv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>FI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const i=Id(l,!1).getAll();return new $a(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:i}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(i)&&(this.notifyListeners(l,i),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$_.type="LOCAL";const zI=$_;new Fa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e){return e?Zn(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends T_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WI(t){return wI(t.auth,new gf(t),t.bypassAuthState)}function VI(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),jI(n,new gf(t),t.bypassAuthState)}async function HI(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),_I(n,new gf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,s,l,i=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:i,error:o,type:d}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WI;case"linkViaPopup":case"linkViaRedirect":return HI;case"reauthViaPopup":case"reauthViaRedirect":return VI;default:os(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new Fa(2e3,1e4);class Sl extends z_{constructor(e,n,s,l,i){super(e,n,l,i),this.provider=s,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KI.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="pendingRedirect",xc=new Map;class qI extends z_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=xc.get(this.auth._key());if(!e){try{const s=await YI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}xc.set(this.auth._key(),e)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YI(t,e){const n=XI(e),s=JI(t);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function QI(t,e){xc.set(t._key(),e)}function JI(t){return Zn(t._redirectPersistence)}function XI(t){return fc(GI,t.config.apiKey,t.name)}async function ZI(t,e,n=!1){if(As(t.app))return Promise.reject(Er(t));const s=pf(t),l=BI(s,e),o=await new qI(s,l,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=10*60*1e3;class tT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!B_(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(In(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eT&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function B_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lT=/^https?/;async function iT(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sT(t);for(const n of e)try{if(aT(n))return}catch{}os(t,"unauthorized-domain")}function aT(t){const e=Dm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!lT.test(n))return!1;if(rT.test(t))return s===t;const l=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=new Fa(3e4,6e4);function fv(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cT(t){return new Promise((e,n)=>{var s,l,i;function o(){fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fv(),n(In(t,"network-request-failed"))},timeout:oT.get()})}if(!((l=(s=Tn().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)o();else{const d=fI("iframefcb");return Tn()[d]=()=>{gapi.load?o():n(In(t,"network-request-failed"))},mI(`${pI()}?onload=${d}`).catch(u=>n(u))}}).catch(e=>{throw gc=null,e})}let gc=null;function dT(t){return gc=gc||cT(t),gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Fa(5e3,15e3),hT="__/auth/iframe",mT="emulator/auth/iframe",pT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xT(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?df(e,mT):`https://${t.config.authDomain}/${hT}`,s={apiKey:e.apiKey,appName:t.name,v:ei},l=fT.get(t.config.apiHost);l&&(s.eid=l);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Zl(s).slice(1)}`}async function gT(t){const e=await dT(t),n=Tn().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:xT(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pT,dontclear:!0},s=>new Promise(async(l,i)=>{await s.restyle({setHideOnLeave:!1});const o=In(t,"network-request-failed"),d=Tn().setTimeout(()=>{i(o)},uT.get());function u(){Tn().clearTimeout(d),l(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yT=500,bT=600,NT="_blank",_T="http://localhost";class xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jT(t,e,n,s=yT,l=bT){const i=Math.max((window.screen.availHeight-l)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const u=Object.assign(Object.assign({},vT),{width:s.toString(),height:l.toString(),top:i,left:o}),m=St().toLowerCase();n&&(d=__(m)?NT:n),b_(m)&&(e=e||_T,u.scrollbars="yes");const b=Object.entries(u).reduce((_,[I,D])=>`${_}${I}=${D},`,"");if(lI(m)&&d!=="_self")return wT(e||"",d),new xv(null);const v=window.open(e||"",d,b);ce(v,t,"popup-blocked");try{v.focus()}catch{}return new xv(v)}function wT(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="__/auth/handler",CT="emulator/auth/handler",kT=encodeURIComponent("fac");async function gv(t,e,n,s,l,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ei,eventId:l};if(e instanceof R_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,v]of Object.entries({}))o[b]=v}if(e instanceof Ua){const b=e.getScopes().filter(v=>v!=="");b.length>0&&(o.scopes=b.join(","))}t.tenantId&&(o.tid=t.tenantId);const d=o;for(const b of Object.keys(d))d[b]===void 0&&delete d[b];const u=await t._getAppCheckToken(),m=u?`#${kT}=${encodeURIComponent(u)}`:"";return`${ET(t)}?${Zl(d).slice(1)}${m}`}function ET({config:t}){return t.emulator?df(t,CT):`https://${t.authDomain}/${ST}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="webStorageSupport";class IT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D_,this._completeRedirectFn=ZI,this._overrideRedirectResult=QI}async _openPopup(e,n,s,l){var i;cs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gv(e,n,s,Dm(),l);return jT(e,o,xf())}async _openRedirect(e,n,s,l){await this._originValidation(e);const i=await gv(e,n,s,Dm(),l);return PI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:i}=this.eventManagers[n];return l?Promise.resolve(l):(cs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gT(e),s=new tT(e);return n.register("authEvent",l=>(ce(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jh,{type:jh},l=>{var i;const o=(i=l==null?void 0:l[0])===null||i===void 0?void 0:i[jh];o!==void 0&&n(!!o),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return k_()||N_()||mf()}}const TT=IT;var vv="@firebase/auth",yv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MT(t){Hl(new Ar("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:d}=s.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(t)},m=new uI(s,l,i,u);return gI(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Hl(new Ar("auth-internal",e=>{const n=pf(e.getProvider("auth").getImmediate());return(s=>new RT(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(vv,yv,PT(t)),Hs(vv,yv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=5*60,OT=Vb("authIdTokenMaxAge")||AT;let bv=null;const DT=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>OT)return;const l=n==null?void 0:n.token;bv!==l&&(bv=l,await fetch(t,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function LT(t=Qb()){const e=Up(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xI(t,{popupRedirectResolver:TT,persistence:[zI,II,D_]}),s=Vb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=DT(i.toString());CI(n,o,()=>o(n.currentUser)),SI(n,d=>o(d))}}const l=Bb("auth");return l&&vI(n,`http://${l}`),n}function FT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hI({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=l=>{const i=In("internal-error");i.customData=l,n(i)},s.type="text/javascript",s.charset="UTF-8",FT().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MT("Browser");const UT={apiKey:"AIzaSyBRrxkXnyGd3HKXFKEUB2o15sY8U2N2Mic",authDomain:"beancraft-sales-team.firebaseapp.com",databaseURL:"https://beancraft-sales-team-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"beancraft-sales-team",storageBucket:"beancraft-sales-team.firebasestorage.app",messagingSenderId:"803745881200",appId:"1:803745881200:web:fb430162f761e3ecdba8b5"},Ss=Yb(UT),re=UE(Ss);LT(Ss);const Nv=["  ,     .","       .","        ."," .    .","       .","  ,      .","     .  .","  .  ,     .","    .","      .","   .     .","   .    .","1%  ,   .","          .","   .    .","   ,  .","      .","      .","  ,   .","   ,   .",' "NO" " "  ,   .',"       .","     ,   .","    .","  ,    .","        .","   .","      .","      .","     .","   .   .","      .","      .   .","  .    .","       .","      .","     .","     .","     ,    .","       .","      .","  .     .","       .","  .   .","  .    .","        .","  ,     .","    .  .","     .","   .    .","     .","       .","     .  .","     ?","  .    .","  .    .","       .","      .","     .  .","     ."," 3  .    .","     .","   .  .","      .","      .","       .","      .","     .","    .","    ,    .","  .   .","    .   .","      .","      .","   ,     .","  ,   .","      ."," .     .","    .   .","   ,     .","      .  .","   ."," .    .","    .   .","  ,    .","  .   .","      .","     ."," .     .","      .","     .","     .","    .   .","  .   .","      .","     .  .","     .","      .","      .","    .   .","      .","    ,    .","      .","        .","          .","        .","   .  .","   .    .","        .","      .",'" "      .',"    .","    .","      .","       .","      .","  ,      .","       .","   .   .","      .","      .","   .    .","     .","   ,     .","           .","    .","   ,     .","      .","  10     .","   ,    .","        .","    .","     .  ."," .    .","         .","  .  .","    ,     .","    .","      .","    .","  ,    .","      .","       .","  .    .","     .","  .     .","       .","    .","     .","        ,   .","  .     .","   .","   ,   .","     .","       .","     .","     .","       .",'  "   "   .',"     .","     .","       ."," . ()   .","  .    ."," ,    .","       .","     .","      .","      .","''     ''   .","     .","       .","     .","     .","  .    .","       .","    ."," .     .","     .","     .","    .","     ,    .","  ,    .","  .    .","       .","   .","    .","     .","     .","       .","   ,   .","      .","      .","     .","    .","       .","       .","    .","   .      ."],_v=[".     .","''   ,      .","   .  .","     ,   .","   .     ."," .       .","        .","   ,    .","   .     .","      ."," ,    ''  .","   ,     .","   ,    .","         .","       .",".       .","  .    .","  ,    .","   VIP      .","         .","   .  .","  DB     .","      .","        .","  ,   .","    .   .","       ."," ,    .","       ."," .    .","    .      .","      .","   ,    .","     ."," ,   .","    .","   ,    .","       .","          .","     .","  .    .","  ,   .","       ."," .     .","   ,  ?",'"."     .',"     .","    .  .",".      .","  .   .","    .  ."," ,  .  .","     .","    ,    .","      .","     .","       .","   1    .","    ,  ."," .    .","  .  .","     .","    ,    .","     .","  . ."," ?    .","   .","     .","      .","     .","  .    .","    .    .","     .","   .   .","       .","      .","    ,   .","       .","  .   .","      .","       .","     .","   ,     .",".    .","     .","  .    ."," ''  ''   .","  .  ,  .","  ,   .","  . ."," , ,   .","       .","     .","   ,    .","      .","   ,    .","      ."," .     ."," .   .",".    .","       .","   ,   .","       .","        .","      .","    .","    .","      .","       .","        ."," .    .","  .  .","        .","    .","    .","        .","      .","  .   ?","   ."," ,     .","     .","      .","         .","     .","    .  .","        .","      .","    .","    .","      .","    .","        .","   .   .","    .","  ,   .","     ."," ,    .","    .","   ,     ."," ,  . .","      .","      .","      .","  .   .","  ,   .","     .","      .","     'YES'.","     .","    .","     .","      .","    .","       .","   .   .","     .","   ,   .","         .","    .","  ,   .","  .    .","     .","      .","    ,   .","    .","   .","        .","     ."," .     .","    .","      .","     .","       .","  ,   .","      .","       .","    ."," ,   .","        .","      .","     .","    ,     .","    .","   ,    .","     .","  .  .","   ,   .","    .","    .","  ,   .","     .","      .","    .","     .","      .","     .","    .","   .  .",".    .","  .  .",".        ."],tt={negative:{bg:"#9ca3af",label:""},neutral:{bg:"#f97316",label:""},positive:{bg:"#22c55e",label:""},special:{bg:"#ef4444",label:"",blink:!0},missed:{bg:"#eab308",label:""}},_s=()=>new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),wh=()=>{const t=new Date,n=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),s=l=>{var i;return((i=n.find(o=>o.type===l))==null?void 0:i.value)||"0"};return{year:parseInt(s("year")),month:parseInt(s("month"))-1,day:parseInt(s("day")),hour:parseInt(s("hour")),minute:parseInt(s("minute")),dayOfWeek:new Date(parseInt(s("year")),parseInt(s("month"))-1,parseInt(s("day"))).getDay()}},jv=["","","",""],$T="AIzaSyDcz5e1qre9QMbrKmUSjT9nEsajSnhIhAI",zT=["","","","","","","","","","","","","","","","","","",""],wv=t=>t.split("").map(e=>{const n=e.charCodeAt(0)-44032;return n>=0&&n<=11171?zT[Math.floor(n/588)]:e}).join(""),BT=(t,e)=>{if(!e)return!0;const n=t.toLowerCase(),s=e.toLowerCase();return n.includes(s)?!0:wv(t).includes(wv(e))},Sv=t=>{if(!t)return"";const e=t.split(" ");return e.length>=2?e.slice(-2).join(" "):t},ec=[{id:1,name:"",color:"#3b82f6",username:"sm001",password:"1234",promo:{:0,:0,:0,:0}},{id:2,name:"",color:"#10b981",username:"sm002",password:"1234",promo:{:0,:0,:0,:0}}],WT=()=>{var Lx,Fx,Ux,$x,zx,Bx,Wx,Vx,Hx,Kx,Gx,qx,Yx,Qx,Jx,Xx,Zx,eg,tg,ng;const[t,e]=g.useState(!1),[n,s]=g.useState(null),[l,i]=g.useState(""),[o,d]=g.useState(""),[u,m]=g.useState(!1),[b,v]=g.useState("admin"),[_]=g.useState(()=>Nv[Math.floor(Math.random()*Nv.length)]),[I,D]=g.useState("quote"),[U,oe]=g.useState("connecting"),[S,j]=g.useState(!1),C=localStorage.getItem("bc_current_tab")||"map",[P,K]=g.useState(C),[z,Q]=g.useState(null),[X,Se]=g.useState("basic"),[ue,Nt]=g.useState([]),[tr,Rn]=g.useState(0),[Wr,Vr]=g.useState("single"),[nr,Hr]=g.useState(""),[q,de]=g.useState(""),[Z,Te]=g.useState(null),[Re,Pn]=g.useState(!1),[qt,Kr]=g.useState(null),[Je,We]=g.useState(null),[Mn,vf]=g.useState(null),[yf,Td]=g.useState(null),[za,Rd]=g.useState(""),[Pd,bf]=g.useState([]),[W_,Gr]=g.useState(!1),[Et,Md]=g.useState(null),[ht,vn]=g.useState({name:"",content:"",type:"broker",memo:""}),[Ba,Nf]=g.useState([]),[V_,Wa]=g.useState(!1),[An,H_]=g.useState(null),[li,Ad]=g.useState(""),[_f,jf]=g.useState(""),[hs,Va]=g.useState("theme"),[K_,wf]=g.useState(!1),[VT,HT]=g.useState(null),[Ha,Sf]=g.useState("analysis"),[ii,G_]=g.useState(""),[Ut,Cf]=g.useState(null),[Od,kf]=g.useState(!1),[KT,GT]=g.useState(!1),[qT,YT]=g.useState(""),[QT,JT]=g.useState(!1),[XT,ZT]=g.useState(60),[e4,t4]=g.useState(Date.now()),[Ef,q_]=g.useState(null),[It,Y_]=g.useState({seats:20,price:5e3,turnover:3,occupancy:40,rent:300,labor:250,materialRate:32,otherCost:100}),[If,Q_]=g.useState([]),[J_,X_]=g.useState(""),[Dd,Ka]=g.useState(null),[Tf,qr]=g.useState(null),[On,Ld]=g.useState(null),[n4,Z_]=g.useState(()=>{const a=localStorage.getItem("bc_team_feedback");return a?JSON.parse(a):[]}),[Fd,Rf]=g.useState(""),[Ud,Pf]=g.useState(""),[Ga,$d]=g.useState(null),[ai,Mf]=g.useState([]),[s4,r4]=g.useState("");g.useEffect(()=>(re.ref("teamFeedback").orderByChild("timestamp").limitToLast(100).on("value",a=>{const c=a.val();if(c){const h=Object.values(c).sort((p,f)=>new Date(f.timestamp)-new Date(p.timestamp));Z_(h)}}),()=>re.ref("teamFeedback").off()),[]);const Af="AIzaSyAl0PfvfKlD-nZxtAJOC6qhME-A-V_u2L8",Of=`    /.

[]
-        
-         
-  :    

[ ]
- :   ( )
- :  (  ,      )
- :  ( 6,900~1.3,   )
-  : / ,   , / 

[]
- /    
-     
-    
-       

[ ]
-         
-   /   
-    
-     
-  `,[Tt,oi]=g.useState(null),[qa,ms]=g.useState(!1),[Yr,l4]=g.useState(null),[i4,a4]=g.useState(!1),zd=async(a,c=0)=>{var x,y,N,w,M;ms(!0),We(null);const h=new Date().toLocaleString("ko-KR"),p=Math.floor(Math.random()*1e3),f=Of+`


    ( : `+h+", ID: "+p+`)


 
- : `+a.managerName+`
-   : `+a.thisVisits+" (  "+(a.visitChange>=0?"+":"")+a.visitChange+`%)
-  : `+a.newCompanies+`
-  : `+a.consults+`
-  : `+a.positiveRate+`%

  
- : `+a.positive+" | : "+a.special+`
- : `+a.neutral+" | : "+a.missed+`

  -   
1. comment:     (2,   )
2. analysis:    (/,  )
3. suggestion:     (   )
4. encouragement:    (  )
5. focus:    

  (JSON):
{"comment": "...", "analysis": "...", "suggestion": "...", "encouragement": "...", "focus": "..."}

JSON .     .`;try{const T=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Af}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:f}]}],generationConfig:{temperature:.9,maxOutputTokens:1024}})});if(!T.ok)if(T.status===429){if(c<3)return console.log(`429  - ${c+1}  ... (5 )`),We(`API   - ${c+1}  ...`),await new Promise(te=>setTimeout(te,5e3)),zd(a,c+1);We("API   .    ."),ms(!1);return}else if(T.status===400){We("API      ."),ms(!1);return}else if(T.status===403){We("API   .  ."),ms(!1);return}else{We(`  . (: ${T.status})`),ms(!1);return}const R=await T.json();if(R.error){console.error("Gemini API Error:",R.error),We(`API : ${R.error.message||"   "}`),ms(!1);return}const A=((M=(w=(N=(y=(x=R.candidates)==null?void 0:x[0])==null?void 0:y.content)==null?void 0:N.parts)==null?void 0:w[0])==null?void 0:M.text)||"";if(!A){We("AI  .  ."),ms(!1);return}const B=A.match(/\{[\s\S]*\}/);if(B){const te=JSON.parse(B[0]);oi(te),Kr(new Date)}else oi({comment:A,analysis:"",suggestion:"",encouragement:""}),Kr(new Date)}catch(T){console.error("AI Report Error:",T),We(` : ${T.message||" ."}`),oi(null)}ms(!1)},Ya=async a=>{var y,N,w,M,T;if(!a.trim())return;Pn(!0),We(null),Te(null);const c=new Date().toLocaleString("ko-KR"),h=ie.filter(R=>{var A,B,te,k;return((A=R.name)==null?void 0:A.includes(a))||((B=R.address)==null?void 0:B.includes(a))||((te=R.memo)==null?void 0:te.includes(a))||((k=R.region)==null?void 0:k.includes(a))}),p=or.filter(R=>{var A,B,te;return((A=R.name)==null?void 0:A.includes(a))||((B=R.address)==null?void 0:B.includes(a))||((te=R.region)==null?void 0:te.includes(a))}),f=ue.filter(R=>{var A,B,te;return((A=R.title)==null?void 0:A.includes(a))||((B=R.content)==null?void 0:B.includes(a))||((te=R.region)==null?void 0:te.includes(a))}),x=Of+`


   : "${a}" ( : ${c})


  
-  : ${h.length}
${h.slice(0,5).map(R=>`   ${R.name} (${R.address||""}) - : ${R.reaction||""}`).join(`
`)}
-  : ${p.length}
${p.slice(0,5).map(R=>`   ${R.name} (${R.address||""})`).join(`
`)}
-   : ${f.length}
${f.slice(0,3).map(R=>{var A;return`   ${R.title}: ${(A=R.content)==null?void 0:A.slice(0,50)}...`}).join(`
`)}

 
"${a}"       .

1. summary:     (2-3)
2. insights:    (3 , )
3. salesTips:      (2)
4. relatedTopics:     (3, )
5. actionItems:       (2)

  (JSON):
{
  "summary": " ",
  "insights": ["1", "2", "3"],
  "salesTips": ["1", "2"],
  "relatedTopics": ["1", "2", "3"],
  "actionItems": ["1", "2"]
}

JSON .      /    .`;try{const R=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Af}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:x}]}],generationConfig:{temperature:.8,maxOutputTokens:1500}})});if(!R.ok){R.status===429?We("API   .    ."):We(`  . (: ${R.status})`),Pn(!1);return}const A=await R.json();if(A.error){We(`API : ${A.error.message||"   "}`),Pn(!1);return}const B=((T=(M=(w=(N=(y=A.candidates)==null?void 0:y[0])==null?void 0:N.content)==null?void 0:w.parts)==null?void 0:M[0])==null?void 0:T.text)||"",te=B.match(/\{[\s\S]*\}/);if(te){const k=JSON.parse(te[0]);Te({...k,keyword:a,searchedAt:new Date,relatedCompaniesCount:h.length,relatedRealtorsCount:p.length,relatedIssuesCount:f.length})}else Te({summary:B,insights:[],salesTips:[],relatedTopics:[],actionItems:[],keyword:a,searchedAt:new Date})}catch(R){console.error("AI Keyword Search Error:",R),We(` : ${R.message||" ."}`)}Pn(!1)},[o4,c4]=g.useState(!1),[d4,u4]=g.useState([]),[h4,m4]=g.useState(!1),ej=()=>localStorage.getItem("bc_theme_mode")||"dark",tj=()=>{const a=localStorage.getItem("bc_theme_mode")||"dark";return a==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a},[Dn,Bd]=g.useState(ej),[nj,sj]=g.useState(tj),[Qa,Wd]=g.useState([]),[rj,Df]=g.useState(!1),[lj,Vd]=g.useState(!1),[Lf,Hd]=g.useState(!1),[ij,Ja]=g.useState(!1),[Ff,Xa]=g.useState(!1),[Ln,ci]=g.useState(null),[He,di]=g.useState(null),[J,ui]=g.useState(null),[aj,Za]=g.useState(null),[at,Xe]=g.useState(null),[Kd,Gd]=g.useState(null),[oj,eo]=g.useState(!1),[Ze,Yt]=g.useState(null),[hi,to]=g.useState(null),[cj,no]=g.useState(!1),[qd,so]=g.useState(null),[ro,Yd]=g.useState(!1),[sr,lo]=g.useState([]),[dj,io]=g.useState(!1),[uj,Qd]=g.useState(!1),[hj,Jd]=g.useState(null),[Uf,ao]=g.useState(!1),[Qt,yn]=g.useState([]),Xd=g.useRef(null),$f=g.useRef(null),[mj,Zd]=g.useState(!1),[eu,pj]=g.useState([]),[fj,tu]=g.useState(!1),[nu,zf]=g.useState(""),[Bf,Wf]=g.useState(null),[xj,gj]=g.useState(""),[p4,vj]=g.useState(""),[Vf,Hf]=g.useState("neutral"),[bn,oo]=g.useState(""),[co,uo]=g.useState(""),[mi,Kf]=g.useState(""),[Gf,qf]=g.useState(""),[su,ru]=g.useState({:!1,:!1,:!1,:!1}),[ho,lu]=g.useState([]),[rr,Qr]=g.useState([]),mo=g.useRef(null),Ee=g.useRef(null),iu=g.useRef([]),lr=g.useRef([]),[me,yj]=g.useState(ec),[pi,bj]=g.useState([]),[ie,Nj]=g.useState([]),[po,_j]=g.useState([]),[fo,Yf]=g.useState([]),[Qf,jj]=g.useState([]),[wj,Sj]=g.useState({}),[Fe,Jf]=g.useState([]),[_t,Xf]=g.useState([]),[be,Rt]=g.useState([]),[xo,Jr]=g.useState(_s()),[go,fi]=g.useState("09:00"),[f4,x4]=g.useState(""),[g4,v4]=g.useState(""),[xi,gi]=g.useState(""),[au,ps]=g.useState(null),[ir,vo]=g.useState(null),[y4,b4]=g.useState(null),[$t,Fn]=g.useState(null),[N4,_4]=g.useState(""),[Xr,yo]=g.useState(0),[fs,Zf]=g.useState(new Date),[vi,ou]=g.useState(null),[mt,yi]=g.useState(null),[Cj,ar]=g.useState(!1),[cu,Zr]=g.useState(null),[bi,du]=g.useState(null),[bo,uu]=g.useState(null),[Nn,Un]=g.useState({title:"",time:"09:00",memo:""}),[Ni,el]=g.useState(null),[tl,hu]=g.useState(""),[mu,pu]=g.useState(""),[$n,_i]=g.useState([]),[j4,w4]=g.useState([]),[ex,fu]=g.useState(!1),[S4,C4]=g.useState(""),[k4,E4]=g.useState(""),[I4,No]=g.useState([]),[xu,kj]=g.useState(""),[gu,Ej]=g.useState(""),[_o,Ij]=g.useState("listings"),[vu,tx]=g.useState(""),[ji,Tj]=g.useState(""),[wi,nx]=g.useState(""),[T4,R4]=g.useState("all"),[P4,M4]=g.useState(1),[A4,O4]=g.useState(null),[or,jo]=g.useState(()=>{try{const a=localStorage.getItem("bc_collected_realtors");return a?JSON.parse(a):[]}catch{return[]}}),[Rj,yu]=g.useState(()=>!localStorage.getItem("bc_collected_realtors")),[D4,L4]=g.useState(""),[F4,U4]=g.useState([]),[$4,z4]=g.useState(!1),[Pj,Mj]=g.useState(!1),[B4,W4]=g.useState(!1),[V4,H4]=g.useState(""),[K4,G4]=g.useState([]),[q4,Y4]=g.useState(null),[Q4,Aj]=g.useState([]),[J4,Oj]=g.useState([]),[X4,Z4]=g.useState(""),[e5,t5]=g.useState(""),[n5,s5]=g.useState(!1),[r5,l5]=g.useState(200),[i5,Dj]=g.useState({phase:"",current:0,total:0,found:0,message:""}),[a5,o5]=g.useState(!1),[c5,d5]=g.useState(""),[u5,h5]=g.useState(""),[m5,p5]=g.useState("");g.useRef([]);const sx=g.useRef([]),bu=g.useRef([]),Nu=g.useRef(null),ee=g.useRef(null),zn=g.useRef([]),Bn=g.useRef([]),rx=g.useRef([]),[wo,_u]=g.useState(!1),[So,lx]=g.useState(null),nl=g.useRef(null),Wn=g.useRef(null),Vn=g.useRef(null),sl=g.useRef(null),Co=g.useRef(0),xs=g.useRef(null),[ju,ko]=g.useState(null),[cr,ix]=g.useState("all"),[dr,ax]=g.useState("all"),[wu,Lj]=g.useState(""),[Su,f5]=g.useState(null),[Cu,x5]=g.useState(""),[g5,v5]=g.useState(""),[ne,qe]=g.useState({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),[ku,Fj]=g.useState(""),[Si,Uj]=g.useState("all"),[Eu,$j]=g.useState("all"),[y5,b5]=g.useState({}),[N5,zj]=g.useState(""),[Pt,ur]=g.useState({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""}),[ln,Eo]=g.useState({managerId:null,companyId:null,amount:"",date:"",note:""}),rl=a=>{try{const c=localStorage.getItem("bc_"+a);return c?JSON.parse(c):null}catch{return null}},Bj=async()=>{if(localStorage.getItem("bc_migration_done"))return;console.log(" ...");const c=rl("managers"),h=rl("pins"),p=rl("companies"),f=rl("customers"),x=rl("sales"),y=rl("requests");if(c&&c.length>0){console.log(" managers :",c.length);for(const N of c)await re.ref("managers/"+N.id).set(N)}if(h&&h.length>0){console.log(" pins :",h.length);for(const N of h)await re.ref("pins/"+N.id).set(N)}if(p&&p.length>0){console.log(" companies :",p.length);for(const N of p)await re.ref("companies/"+N.id).set(N)}if(f&&f.length>0){console.log(" customers :",f.length);for(const N of f)await re.ref("customers/"+N.id).set(N)}if(x&&x.length>0){console.log(" sales :",x.length);for(const N of x)await re.ref("sales/"+N.id).set(N)}if(y&&y.length>0){console.log(" requests :",y.length);for(const N of y)await re.ref("requests/"+N.id).set(N)}localStorage.setItem("bc_migration_done","true"),console.log(" !")},hr=g.useRef({});g.useEffect(()=>{const a=c=>{let h=c;c==="auto"&&(h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),sj(h),h==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.body.style.removeProperty("background"),document.body.style.removeProperty("color")};if(a(Dn),localStorage.setItem("bc_theme_mode",Dn),Dn==="auto"){const c=window.matchMedia("(prefers-color-scheme: dark)"),h=p=>a("auto");return c.addEventListener("change",h),()=>c.removeEventListener("change",h)}},[Dn]),g.useEffect(()=>{const a=c=>{if(c.source===window){if(c.data.type==="BEANCRAFT_EXTENSION_READY"&&(console.log("  v"+c.data.version),Mj(!0),Vj("0000000000")),c.data.type==="BEANCRAFT_RESPONSE"){const{requestId:h,response:p}=c.data;hr.current[h]&&(hr.current[h](p),delete hr.current[h])}c.data.type==="BEANCRAFT_SCRAPE_PROGRESS"&&Dj({phase:c.data.phase||"",current:c.data.current||0,total:c.data.total||0,found:c.data.found||0,message:c.data.message||""})}};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[]);const Wj=(a,c={})=>new Promise(h=>{const p=Date.now()+Math.random();hr.current[p]=h,window.postMessage({type:"BEANCRAFT_REQUEST",action:a,requestId:p,...c},"*"),setTimeout(()=>{hr.current[p]&&(hr.current[p]({success:!1,error:""}),delete hr.current[p])},1e4)}),Vj=async(a,c="sido")=>{if(!Pj)return;const h=await Wj("GET_REGIONS",{cortarNo:a});h&&h.success&&h.regions?(console.log("[] "+c+" :",h.regions.length+""),c==="sido"?Aj(h.regions):c==="gugun"&&Oj(h.regions)):console.error("   :",h==null?void 0:h.error)};g.useEffect(()=>{if(!n){oe("disconnected");return}oe("connecting"),Bj();const a={managers:re.ref("managers"),pins:re.ref("pins"),companies:re.ref("companies"),customers:re.ref("customers"),sales:re.ref("sales"),requests:re.ref("requests"),adminPassword:re.ref("adminPassword"),userStatus:re.ref("userStatus"),routes:re.ref("routes"),realtorCollections:re.ref("realtorCollections"),realtors:re.ref("realtors"),marketIssues:re.ref("marketIssues").limitToLast(20)};return a.managers.on("value",c=>{const h=c.val();h&&yj(Object.values(h)),oe("connected")}),a.pins.on("value",c=>{const h=c.val();bj(h?Object.values(h):[])}),a.companies.on("value",c=>{const h=c.val();Nj(h?Object.values(h):[])}),a.customers.on("value",c=>{const h=c.val();_j(h?Object.values(h):[])}),a.sales.on("value",c=>{const h=c.val();Yf(h?Object.values(h):[])}),a.requests.on("value",c=>{const h=c.val();jj(h?Object.values(h):[])}),a.adminPassword.on("value",c=>{const h=c.val();h&&v(h)}),a.userStatus.on("value",c=>{const h=c.val();Sj(h||{})}),a.routes.on("value",c=>{const h=c.val();Jf(h?Object.values(h):[])}),a.realtorCollections.on("value",c=>{try{const h=c.val();if(h){const p=Object.entries(h).map(([f,x])=>({id:f,...x}));p.sort((f,x)=>x.exportedAt-f.exportedAt),No(p)}else No([])}catch(h){console.error("RealtorCollections  :",h),No([])}},c=>{console.error("Firebase realtorCollections  :",c),No([])}),a.calendarEvents=re.ref("calendarEvents"),a.calendarEvents.on("value",c=>{const h=c.val();Xf(h?Object.values(h):[])}),a.realtors.on("value",c=>{try{const h=c.val();if(h){const p=Object.entries(h).map(([f,x])=>({id:f,...x}));p.sort((f,x)=>(x.listings||0)-(f.listings||0)),jo(p);try{localStorage.setItem("bc_collected_realtors",JSON.stringify(p))}catch{}}else jo([]);yu(!1)}catch(h){console.error("Realtors   :",h),jo([]),yu(!1)}},c=>{console.error("Firebase realtors  :",c),jo([]),yu(!1)}),a.marketIssues.on("value",c=>{try{const h=c.val();if(h){const p=Object.entries(h).map(([y,N])=>({id:y,...N})),f=Date.now()-365*24*60*60*1e3,x=p.filter(y=>new Date(y.||y.createdAt).getTime()<f?(re.ref("marketIssues/"+y.id).remove(),!1):!0);x.sort((y,N)=>new Date(N.||N.createdAt)-new Date(y.||y.createdAt)),Nt(x)}else Nt([])}catch(h){console.error("MarketIssues   :",h),Nt([])}}),j(!0),oe("connected"),()=>{Object.values(a).forEach(c=>c.off())}},[n]),g.useEffect(()=>{if(!(n!=null&&n.managerId))return;const a=n.managerId,c=re.ref(`userMents/${a}`),h=re.ref(`mentFeedbacks/${a}`);return c.on("value",p=>{const f=p.val();if(f){const x=Object.keys(f).map(y=>({id:y,...f[y]}));bf(x)}else bf([])}),h.on("value",p=>{const f=p.val();if(f){const x=Object.keys(f).map(y=>({id:y,...f[y]}));Nf(x)}else Nf([])}),()=>{c.off(),h.off()}},[n==null?void 0:n.managerId]),g.useEffect(()=>{const a=re.ref("teamFeedbacks");return a.orderByChild("timestamp").limitToLast(50).on("value",c=>{const h=c.val();if(h){const p=Object.keys(h).map(f=>({id:f,...h[f]})).sort((f,x)=>new Date(x.timestamp)-new Date(f.timestamp));Mf(p)}else Mf([])}),()=>a.off()},[]),g.useEffect(()=>{if(!t)return;const a=new Date().toISOString().split("T")[0];if(_t.length>0){const c=_t.filter(h=>h.date===a&&h.type==="followup");c.length>0&&Ka(h=>{if(h)return h;const p=c.slice(0,3).map(x=>x.title).join(", "),f=c.length>3?`  ${c.length-3}`:"";return{count:c.length,preview:p+f,events:c}})}if(Fe.length>0){const c=new Date;c.setDate(c.getDate()-1);const h=c.toISOString().split("T")[0],p=Fe.filter(f=>{var y;return!f.date||f.date>h||f.status==="completed"?!1:(y=f.stops)==null?void 0:y.some(N=>!N.visited)});p.length>0?qr({count:p.length,routes:p}):qr(null)}else qr(null)},[t,_t,Fe]),g.useEffect(()=>{if(!t||!n||ie.length===0)return;const a=f=>{if(!f)return{hasIssue:!0,issue:" "};const x=[{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "}];for(const{pattern:A,issue:B}of x)if(A.test(f))return{hasIssue:!0,issue:B};const y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=["","","","","","","","","","","","","","","","","","","","","","","","",""],w=/|||||||||||||||||||/.test(f),M=y.some(A=>f.includes(A+"")||f.includes(A+" ")),T=N.some(A=>f.includes(A+"")||f.includes(A+" ")||f.includes(A+""));return!w&&!M&&!T&&f.length>5?{hasIssue:!0,issue:"/  "}:!/[-]+(|||||||||)\s*\d*/.test(f)&&f.length>3?{hasIssue:!0,issue:"   "}:{hasIssue:!1}},c=n.managerId||n.id,h=ie.filter(f=>f.managerId===c),p=[];h.forEach(f=>{const{hasIssue:x,issue:y}=a(f.address),N=!f.lat||!f.lng;(x||N)&&p.push({id:f.id,name:f.name,address:f.address,issue:x?y:"   (  )"})}),p.length>0?uu({count:p.length,companies:p}):uu(null)},[t,n,ie]);const Iu=a=>re.ref("managers/"+a.id).set(a),Tu=a=>re.ref("pins/"+a.id).set(a),ox=a=>re.ref("pins/"+a).remove(),Hn=a=>re.ref("companies/"+a.id).set(a),Hj=a=>re.ref("companies/"+a).remove(),cx=a=>re.ref("customers/"+a.id).set(a),Kj=a=>re.ref("customers/"+a).remove(),dx=a=>re.ref("sales/"+a.id).set(a),Gj=a=>re.ref("sales/"+a).remove(),ux=a=>re.ref("requests/"+a.id).set(a),Io=a=>re.ref("routes/"+a.id).set(a),hx=a=>re.ref("routes/"+a).remove(),mx=a=>{const c=(n==null?void 0:n.managerId)||"admin";re.ref(`userMents/${c}/${a.id}`).set(a)},qj=a=>{const c=(n==null?void 0:n.managerId)||"admin";re.ref(`userMents/${c}/${a}`).remove()},Yj=a=>{const c=(n==null?void 0:n.managerId)||"admin";re.ref(`mentFeedbacks/${c}/${a.id}`).set(a)},Qj=(a,c=!1)=>{const h=Pd.find(p=>p.id===a);if(h){const p={...h,useCount:(h.useCount||0)+1,successCount:c?(h.successCount||0)+1:h.successCount||0};mx(p)}},Ru=a=>re.ref("calendarEvents/"+a.id).set(a),Jj=a=>re.ref("calendarEvents/"+a).remove();g.useEffect(()=>{var c;const a=localStorage.getItem("bc_remember_login");if(a)try{const h=JSON.parse(a);h.expiry>Date.now()?(i(h.id||""),d(h.pw||""),m(!0)):localStorage.removeItem("bc_remember_login")}catch{localStorage.removeItem("bc_remember_login")}try{const h=localStorage.getItem("bc_temp_route");if(h){const p=JSON.parse(h);((c=p.stops)==null?void 0:c.length)>0&&(Rt(p.stops),p.name&&gi(p.name),p.date&&Jr(p.date),p.time&&fi(p.time),p.managerId&&ps(p.managerId),p.editingId&&vo(p.editingId))}}catch{}},[]),g.useEffect(()=>{const a=Ss.auth().onAuthStateChanged(async c=>{if(c&&!t){const h=localStorage.getItem("bc_session");if(h)try{const y=JSON.parse(h);if(y.expiry>Date.now()&&y.user){let N=y.user;if(N.username){const w=ec.find(M=>M.username===N.username);w&&(!N.name||N.name.length<2||N.name.includes(""))&&(console.log(`[]   : ${N.name} -> ${w.name}`),N={...N,name:w.name},localStorage.setItem("bc_session",JSON.stringify({user:N,expiry:y.expiry})))}if(N){s(N),e(!0),N.managerId&&(ps(N.managerId),Ci(N.managerId,!0)),console.log("  :",N.name);return}}}catch{}const p=c.email,f=p.split("@")[0];let x=null;if(f==="admin")x={name:"admin",role:"super",email:p};else try{const N=(await re.ref("managers").once("value")).val(),M=(N?Object.values(N):[]).find(T=>T.username===f||T.email===p);if(M){let T=M.name;const R=ec.find(A=>A.username===f||A.id===M.id);R&&(!M.name||M.name.length<2||M.name.includes(""))&&(T=R.name,console.log(`[]   : ${M.name} -> ${T}`),re.ref("managers/"+M.id).update({name:T})),x={name:T,role:"manager",managerId:M.id,username:M.username,email:p}}else x={name:f,role:"manager",email:p}}catch(y){console.error("managers  :",y),x={name:f,role:"manager",email:p}}s(x),e(!0),x.managerId&&(ps(x.managerId),Ci(x.managerId,!0)),localStorage.setItem("bc_session",JSON.stringify({user:x,expiry:Date.now()+216e5})),console.log("Firebase  :",x.name)}else!c&&t&&(e(!1),s(null),localStorage.removeItem("bc_session"))});return()=>a()},[t]),g.useEffect(()=>{const a=()=>{if(Qa.length>0){const c=[...Qa],h=c.pop();Wd(c),K(h)}};return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[Qa]);const mr=a=>{a!==P&&(window.history.pushState({tab:a},""),Wd([...Qa,P]),K(a),localStorage.setItem("bc_current_tab",a))};g.useEffect(()=>{localStorage.setItem("bc_current_tab",P)},[P]);const px=g.useRef(Su),fx=g.useRef(Cu),Pu=g.useRef(pi),xx=g.useRef(ie),gx=g.useRef(me),vx=g.useRef(ho);g.useEffect(()=>{px.current=Su},[Su]),g.useEffect(()=>{fx.current=Cu},[Cu]),g.useEffect(()=>{Pu.current=pi},[pi]),g.useEffect(()=>{xx.current=ie},[ie]),g.useEffect(()=>{gx.current=me},[me]),g.useEffect(()=>{vx.current=ho},[ho]),g.useEffect(()=>{if(be.length>0){const a={stops:be,name:xi,date:xo,time:go,managerId:au,editingId:ir,savedAt:new Date().toISOString()};localStorage.setItem("bc_temp_route",JSON.stringify(a))}else localStorage.removeItem("bc_temp_route")},[be]);const Xj=(a,c)=>c?Math.max(28,a*2.5):a<=8?14:a<=10?18:a<=12?22:a<=14?26:30;g.useEffect(()=>{if(t&&P==="map"&&mo.current){Ee.current=null;const a=()=>{var c;if(!((c=window.naver)!=null&&c.maps)){setTimeout(a,100);return}if(!mo.current){setTimeout(a,100);return}Ee.current=new naver.maps.Map(mo.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(Ee.current,"zoom_changed",()=>{ll()}),naver.maps.Event.addListener(Ee.current,"click",h=>{const p=px.current,f=fx.current;if(!p)return;const x=h.coord.lat(),y=h.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(x,y)},(N,w)=>{var A,B,te;let M=x.toFixed(4)+", "+y.toFixed(4);if(N===naver.maps.Service.Status.OK&&w.v2.results[0]){const k=w.v2.results[0].region;k&&(M=[(A=k.area1)==null?void 0:A.name,(B=k.area2)==null?void 0:B.name,(te=k.area3)==null?void 0:te.name].filter(Boolean).join(" "))}const T=f?"planned":"confirmed",R={id:Date.now(),managerId:p,status:T,region:M,lat:x,lng:y,date:f||"",createdAt:new Date().toISOString()};Tu(R)})}),setTimeout(()=>ll(),500)};setTimeout(a,300)}},[t,P]),g.useEffect(()=>{t&&P==="map"&&Ee.current&&setTimeout(()=>{naver.maps.Event.trigger(Ee.current,"resize"),ll()},100)},[t,P]),g.useEffect(()=>{t&&P==="route"&&ee.current&&setTimeout(()=>{naver.maps.Event.trigger(ee.current,"resize")},100)},[t,P]);const Zj=()=>{let a=Pu.current;cr!=="all"&&(a=a.filter(c=>c.managerId===Number(cr))),dr!=="all"&&(a=a.filter(c=>c.status===dr)),lu(a.map(c=>c.id)),setTimeout(()=>ll(),100)},ll=g.useCallback(()=>{var x;if(!Ee.current||!((x=window.naver)!=null&&x.maps))return;iu.current.forEach(y=>y.setMap(null)),iu.current=[];const a=xx.current,c=gx.current,h=vx.current,p=Ee.current.getZoom();let f=a.filter(y=>y.lat&&y.lng);cr!=="all"&&(f=f.filter(y=>y.managerId===Number(cr))),dr!=="all"&&(f=f.filter(y=>y.reaction===dr)),f.forEach(y=>{const N=c.find(B=>B.id===y.managerId);tt[y.reaction]||tt.neutral;const w=h.includes(y.id)||y.reaction==="special",M=Xj(p,w),T=Math.max(2,Math.floor(M/5));let R="#9ca3af";y.reaction==="special"?R="#ef4444":y.reaction==="positive"?R="#22c55e":y.reaction==="neutral"?R="#f97316":y.reaction==="missed"&&(R="#eab308");const A=new naver.maps.Marker({position:new naver.maps.LatLng(y.lat,y.lng),map:Ee.current,icon:{content:`<div class="${w?y.reaction==="special"?"special-blink":"marker-pulse":""}" style="width:${M}px;height:${M}px;background:${R};border-radius:50%;border:${T}px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.4);cursor:pointer;display:flex;align-items:center;justify-content:center;">
 <span style="font-size:${Math.max(8,M/2.5)}px;color:white;font-weight:bold;">${y.name.charAt(0)}</span>
 </div>`,anchor:new naver.maps.Point(M/2,M/2)}});naver.maps.Event.addListener(A,"click",()=>{di({...y,manager:N})}),iu.current.push(A)}),h.length>0&&setTimeout(()=>lu([]),5e3)},[cr,dr]);g.useEffect(()=>{Ee.current&&ll()},[ie,me,cr,dr,ho,ll]),g.useEffect(()=>{if(t)return;const a=setTimeout(()=>D("logo"),4e3),c=setTimeout(()=>D("form"),6e3);return()=>{clearTimeout(a),clearTimeout(c)}},[t]),g.useEffect(()=>{var p,f;if(!t||ie.length===0||!((f=(p=window.naver)==null?void 0:p.maps)!=null&&f.Service))return;const a=ie.filter(x=>(!x.lat||!x.lng)&&(x.address||x.name));if(a.length===0)return;const h=setTimeout(async()=>{let x=0;for(const y of a){const N=await Ou(y.address,y.name);if(N){const w={...y,lat:N.lat,lng:N.lng};Hn(w),x++}await new Promise(w=>setTimeout(w,300))}x>0&&console.log(`  ${x}    `)},2e3);return()=>clearTimeout(h)},[t,ie.length]),g.useEffect(()=>{if(t&&P==="route"){ee.current&&(ee.current=null);const a=()=>{var c;if(!Nu.current){console.log("[] routeMapRef ..."),setTimeout(a,100);return}if(!((c=window.naver)!=null&&c.maps)){console.log("[] naver.maps ..."),setTimeout(a,100);return}ee.current||(console.log("[]  "),ee.current=new naver.maps.Map(Nu.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(ee.current,"click",h=>{const p=h.coord.lat(),f=h.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(p,f),orders:"roadaddr,addr"},(x,y)=>{var T,R;let N=" ",w="";if(x===naver.maps.Service.Status.OK&&((T=y.v2.results)==null?void 0:T.length)>0){const A=y.v2.results[0];if(A.land){const B=A.land;w=`${A.region.area1.name} ${A.region.area2.name} ${A.region.area3.name} ${B.name||""} ${B.number1||""}`.trim(),(R=B.addition0)!=null&&R.value?N=B.addition0.value:N=`${A.region.area3.name} ${B.number1||""}`.trim()}}const M={id:Date.now(),name:N,address:w,lat:p,lng:f,type:"click"};Rt(A=>[...A,M])})}),console.log("[]  !"),setTimeout(()=>Ro(),500))};setTimeout(a,300)}},[t,P]),g.useEffect(()=>{if(!ee.current){P==="route"&&be.length>0&&setTimeout(()=>{ee.current&&Ro()},500);return}Ro()},[be,P]);const To=()=>{zn.current.forEach(a=>a.setMap(null)),zn.current=[],Bn.current.forEach(a=>a.setMap(null)),Bn.current=[],rx.current.forEach(a=>a.setMap(null)),rx.current=[],xs.current&&(xs.current.setMap(null),xs.current=null),ko(null)},Ro=()=>{if(!ee.current)return;To();const a=be.filter(c=>c.lat&&c.lng);a.length!==0&&setTimeout(()=>{if(!ee.current)return;const c={};if(a.forEach((h,p)=>{const f=`${h.lat.toFixed(5)}_${h.lng.toFixed(5)}`;c[f]||(c[f]=[]),c[f].push({...h,originalIdx:p})}),Object.values(c).forEach(h=>{const p=h.length;h.forEach((f,x)=>{let y=0,N=0;if(p>1){const T=2*Math.PI/p*x,R=15e-5;y=Math.cos(T)*R,N=Math.sin(T)*R}const w=p>1,M=new naver.maps.Marker({position:new naver.maps.LatLng(f.lat+y,f.lng+N),map:ee.current,icon:{content:`<div style="background:linear-gradient(135deg,${w?"#f59e0b":"#14b8a6"},${w?"#d97706":"#0d9488"});color:white;width:${w?"32px":"28px"};height:${w?"32px":"28px"};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:${w?"11px":"12px"};box-shadow:0 3px 8px rgba(0,0,0,0.4);border:2px solid ${w?"#fbbf24":"white"}">${f.originalIdx+1}</div>`,anchor:new naver.maps.Point(w?16:14,w?16:14)},zIndex:100+f.originalIdx});naver.maps.Event.addListener(M,"click",()=>{yo(f.originalIdx)}),zn.current.push(M)})}),a.length>=2){const h=a.map(f=>new naver.maps.LatLng(f.lat,f.lng)),p=new naver.maps.Polyline({map:ee.current,path:h,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.9});Bn.current.push(p)}if(a.length===1)ee.current.setCenter(new naver.maps.LatLng(a[0].lat,a[0].lng)),ee.current.setZoom(15);else if(a.length>=2){const h=new naver.maps.LatLngBounds;a.forEach(p=>h.extend(new naver.maps.LatLng(p.lat,p.lng))),ee.current.fitBounds(h,{padding:50})}},100)},ew=a=>{a.length!==0&&(ix("all"),ax("all"),lu(a.map(c=>c.id)),mr("map"),setTimeout(()=>{if(Ee.current&&a.length>0)if(a.length===1)Ee.current.setCenter(new naver.maps.LatLng(a[0].lat,a[0].lng)),Ee.current.setZoom(14);else{const c=new naver.maps.LatLngBounds;a.forEach(h=>c.extend(new naver.maps.LatLng(h.lat,h.lng))),Ee.current.fitBounds(c,{padding:50})}},300))},tw=a=>(n==null?void 0:n.role)==="super"||a.managerId===(n==null?void 0:n.managerId),nw=a=>{ox(a),ci(null)},sw=(a,c)=>{const h=pi.find(p=>p.id===a);h&&Tu({...h,date:c,status:c?"planned":"confirmed"})},rw=()=>{rr.forEach(a=>{const c=pi.find(h=>h.id===a);c&&Tu({...c,status:"confirmed",expiredChecked:!0})}),Qr([]),to(null)},lw=()=>{confirm(`${rr.length}  ?`)&&(rr.forEach(a=>ox(a)),Qr([]),to(null))},gs={:{lat:37.5547,lng:126.9707},:{lat:37.5659,lng:126.9773},:{lat:37.5701,lng:126.9822},3:{lat:37.5714,lng:126.9916},5:{lat:37.5707,lng:126.9992},:{lat:37.5711,lng:127.0095},:{lat:37.5762,lng:127.0251},:{lat:37.4979,lng:127.0276},:{lat:37.5007,lng:127.0365},:{lat:37.5045,lng:127.049},:{lat:37.5089,lng:127.0637},:{lat:37.5108,lng:127.0736},:{lat:37.5133,lng:127.1001},:{lat:37.5571,lng:126.9244},:{lat:37.5495,lng:126.9138},:{lat:37.5552,lng:126.9366},:{lat:37.5569,lng:126.9463},:{lat:37.5575,lng:126.9559},:{lat:37.5601,lng:126.9635},:{lat:37.566,lng:126.9823},3:{lat:37.5665,lng:126.9918},4:{lat:37.5669,lng:126.9983},:{lat:37.5653,lng:127.0076},:{lat:37.5659,lng:127.0176},:{lat:37.565,lng:127.0296},:{lat:37.5614,lng:127.0378},:{lat:37.5568,lng:127.0441},:{lat:37.5474,lng:127.0473},:{lat:37.5446,lng:127.0558},:{lat:37.5404,lng:127.07},:{lat:37.5358,lng:127.0863},:{lat:37.5352,lng:127.0948},:{lat:37.521,lng:127.1028},:{lat:37.5114,lng:127.0833},:{lat:37.4934,lng:127.0148},:{lat:37.492,lng:127.0077},:{lat:37.4815,lng:126.9976},:{lat:37.4766,lng:126.9816},:{lat:37.4769,lng:126.9637},:{lat:37.4812,lng:126.9527},:{lat:37.4824,lng:126.9418},:{lat:37.4842,lng:126.9296},:{lat:37.4876,lng:126.9131},:{lat:37.4854,lng:126.9015},:{lat:37.4929,lng:126.8966},:{lat:37.5088,lng:126.8913},:{lat:37.5178,lng:126.8956},:{lat:37.5247,lng:126.8964},:{lat:37.5349,lng:126.9024},:{lat:37.4856,lng:127.0165},:{lat:37.4844,lng:127.0343},:{lat:37.4871,lng:127.0467},:{lat:37.4908,lng:127.0555},:{lat:37.4946,lng:127.0634},:{lat:37.4968,lng:127.0716},:{lat:37.4987,lng:127.0792},:{lat:37.4838,lng:127.0858},:{lat:37.4874,lng:127.1017},:{lat:37.5271,lng:127.0284},:{lat:37.5168,lng:127.0203},:{lat:37.5112,lng:127.0132},:{lat:37.5048,lng:127.0049},:{lat:37.5405,lng:127.0172},:{lat:37.5476,lng:127.0131},:{lat:37.5541,lng:127.0103},:{lat:37.5588,lng:127.0096},:{lat:37.5614,lng:126.9943},:{lat:37.5759,lng:126.9735},:{lat:37.5766,lng:126.9855},:{lat:37.5608,lng:126.986},:{lat:37.5587,lng:126.9785},:{lat:37.5447,lng:126.972},:{lat:37.5349,lng:126.9732},:{lat:37.5295,lng:126.9686},:{lat:37.5214,lng:126.971},:{lat:37.5082,lng:126.979},:{lat:37.4868,lng:126.9816},:{lat:37.4698,lng:126.9853},:{lat:37.5822,lng:127.0019},:{lat:37.5884,lng:127.0064},:{lat:37.5929,lng:127.0166},:{lat:37.6035,lng:127.0251},:{lat:37.6131,lng:127.03},:{lat:37.6215,lng:127.0298},:{lat:37.6381,lng:127.0257},:{lat:37.6483,lng:127.0345},:{lat:37.6531,lng:127.0476},:{lat:37.6559,lng:127.0619},:{lat:37.6612,lng:127.073},:{lat:37.6702,lng:127.0799},:{lat:37.5708,lng:126.9768},:{lat:37.5653,lng:126.9666},:{lat:37.5476,lng:126.9312},:{lat:37.5247,lng:126.856},:{lat:37.5263,lng:126.875},:{lat:37.5242,lng:126.887},:{lat:37.5256,lng:126.8845},:{lat:37.5225,lng:126.9057},:{lat:37.5216,lng:126.9242},:{lat:37.5271,lng:126.9328},:{lat:37.5392,lng:126.946},:{lat:37.544,lng:126.9517},:{lat:37.5532,lng:126.9568},:{lat:37.5571,lng:127.0296},:{lat:37.5669,lng:127.052},:{lat:37.5613,lng:127.0641},:{lat:37.557,lng:127.0793},:{lat:37.5513,lng:127.0882},:{lat:37.5452,lng:127.1031},:{lat:37.5389,lng:127.1236},:{lat:37.5352,lng:127.1323},:{lat:37.5343,lng:127.1427},:{lat:37.5352,lng:127.152},:{lat:37.5424,lng:127.1441},:{lat:37.555,lng:127.1541},:{lat:37.5571,lng:127.167},:{lat:37.5344,lng:126.9945},:{lat:37.5342,lng:126.9874},:{lat:37.539,lng:126.9617},:{lat:37.5474,lng:126.9434},:{lat:37.5477,lng:126.9225},:{lat:37.5555,lng:126.9105},:{lat:37.5635,lng:126.904},:{lat:37.5681,lng:126.8972},:{lat:37.5769,lng:126.8997},:{lat:37.583,lng:126.9096},:{lat:37.5851,lng:126.918},:{lat:37.5933,lng:126.9179},:{lat:37.6017,lng:126.9214},:{lat:37.6107,lng:126.9301},:{lat:37.6149,lng:126.9391},:{lat:37.6189,lng:126.9209},:{lat:37.6159,lng:126.9114},:{lat:37.5397,lng:127.0019},:{lat:37.5474,lng:127.0071},:{lat:37.5602,lng:127.0149},:{lat:37.5718,lng:127.0166},:{lat:37.5798,lng:127.0147},:{lat:37.5868,lng:127.0195},:{lat:37.5863,lng:127.029},:{lat:37.5895,lng:127.034},:{lat:37.6017,lng:127.038},:{lat:37.6062,lng:127.0442},:{lat:37.6105,lng:127.0512},:{lat:37.6153,lng:127.0661},:{lat:37.6177,lng:127.0754},:{lat:37.6199,lng:127.0842},:{lat:37.6188,lng:127.0914},:{lat:37.5109,lng:127.0218},:{lat:37.5145,lng:127.0316},:{lat:37.5172,lng:127.0412},:{lat:37.5198,lng:127.0535},:{lat:37.5316,lng:127.0667},:{lat:37.5475,lng:127.0743},:{lat:37.5656,lng:127.084},:{lat:37.5735,lng:127.0869},:{lat:37.5802,lng:127.089},:{lat:37.5887,lng:127.087},:{lat:37.5966,lng:127.0851},:{lat:37.6026,lng:127.079},:{lat:37.6107,lng:127.0768},:{lat:37.6253,lng:127.0729},:{lat:37.6371,lng:127.0669},:{lat:37.6442,lng:127.064},:{lat:37.665,lng:127.0581},:{lat:37.6748,lng:127.0565},:{lat:37.6896,lng:127.0449},:{lat:37.6986,lng:127.0531},:{lat:37.5021,lng:126.9958},:{lat:37.4874,lng:126.9877},:{lat:37.4852,lng:126.9817},:{lat:37.4838,lng:126.9726},:{lat:37.4965,lng:126.9535},:{lat:37.5027,lng:126.9504},:{lat:37.5082,lng:126.9396},:{lat:37.4994,lng:126.9269},:{lat:37.4997,lng:126.9184},:{lat:37.503,lng:126.9086},:{lat:37.4865,lng:126.8873},:{lat:37.4813,lng:126.8828},:{lat:37.4762,lng:126.8687},:{lat:37.4762,lng:126.8563},:{lat:37.4792,lng:126.8421},:{lat:37.4927,lng:126.8234},:{lat:37.517,lng:127.1117},:{lat:37.5303,lng:127.1238},:{lat:37.5502,lng:127.1279},:{lat:37.5059,lng:127.1016},:{lat:37.5007,lng:127.1062},:{lat:37.4929,lng:127.1182},:{lat:37.4858,lng:127.1224},:{lat:37.4781,lng:127.1264},:{lat:37.4703,lng:127.1267},:{lat:37.4584,lng:127.15},:{lat:37.4507,lng:127.1573},:{lat:37.4455,lng:127.1574},:{lat:37.4389,lng:127.1538},:{lat:37.4345,lng:127.1508},:{lat:37.4322,lng:127.1291},:{lat:37.5794,lng:126.7975},:{lat:37.5622,lng:126.8011},:{lat:37.5596,lng:126.81},:{lat:37.5619,lng:126.8167},:{lat:37.5671,lng:126.8277},:{lat:37.5607,lng:126.8438},:{lat:37.5614,lng:126.854},:{lat:37.5587,lng:126.8622},:{lat:37.5516,lng:126.8718},:{lat:37.5471,lng:126.8773},:{lat:37.5392,lng:126.8785},:{lat:37.5331,lng:126.8936},:{lat:37.5284,lng:126.9182},:{lat:37.5176,lng:126.9324},:{lat:37.5131,lng:126.9426},:{lat:37.5122,lng:126.9527},:{lat:37.5083,lng:126.9633},:{lat:37.5079,lng:126.9882},:{lat:37.5082,lng:126.9961},:{lat:37.5027,lng:127.0147},:{lat:37.5048,lng:127.0249},:{lat:37.5075,lng:127.0345},:{lat:37.5104,lng:127.0433},:{lat:37.5114,lng:127.052},:{lat:37.5145,lng:127.0593},:{lat:37.5046,lng:127.0862},:{lat:37.5018,lng:127.0935},:{lat:37.5098,lng:127.1089},:{lat:37.5173,lng:127.1117},:{lat:37.5213,lng:127.1249},:{lat:37.5239,lng:127.1354},:{lat:37.5284,lng:127.148},:{lat:37.5416,lng:126.9714},:{lat:37.5299,lng:126.9647},:{lat:37.4984,lng:126.9265},:{lat:37.5174,lng:126.9141},:{lat:37.5159,lng:126.9073},:{lat:37.5032,lng:126.8822},:{lat:37.4569,lng:126.8957},:{lat:37.4679,lng:126.8958},:{lat:37.4796,lng:126.888},:{lat:37.5434,lng:127.0446},:{lat:37.5273,lng:127.0393},:{lat:37.4996,lng:127.0556},:{lat:37.4858,lng:127.0534},:{lat:37.48,lng:127.0509},:{lat:37.4747,lng:127.064},:{lat:37.45,lng:127.127},:{lat:37.44,lng:127.127},:{lat:37.4116,lng:127.1278},:{lat:37.3953,lng:127.1268},:{lat:37.385,lng:127.1234},:{lat:37.378,lng:127.1167},:{lat:37.3665,lng:127.1085},:{lat:37.3607,lng:127.1089},:{lat:37.3397,lng:127.1088},:{lat:37.3253,lng:127.1073},:{lat:37.3127,lng:127.1116},:{lat:37.2997,lng:127.1078},:{lat:37.2853,lng:127.1092},:{lat:37.275,lng:127.116},:{lat:37.265,lng:127.1182},:{lat:37.252,lng:127.0773},:{lat:37.2519,lng:127.0549},:{lat:37.244,lng:127.0471},:{lat:37.2399,lng:127.036},:{lat:37.2634,lng:127.0323},:{lat:37.267,lng:127.0119},:{lat:37.266,lng:126.9996},:{lat:37.47,lng:127.0391},:{lat:37.4509,lng:127.0538},:{lat:37.3947,lng:127.1115},:{lat:37.5313,lng:127.0369},:{lat:37.5805,lng:127.047},:{lat:37.5895,lng:127.0575},:{lat:37.5971,lng:127.0665},:{lat:37.5992,lng:127.0919},:{lat:37.6079,lng:127.1071},:{lat:37.5988,lng:127.1394},:{lat:37.6084,lng:127.1475},:{lat:37.6102,lng:127.162},:{lat:37.5879,lng:127.1901},:{lat:37.58,lng:127.2083},:{lat:37.5231,lng:127.2798},:{lat:37.5411,lng:127.312},:{lat:37.5456,lng:127.3204},:{lat:37.5508,lng:127.3459},:{lat:37.5633,lng:127.3704},:{lat:37.5664,lng:127.3964},:{lat:37.563,lng:127.4163},:{lat:37.4858,lng:127.4623},:{lat:37.4319,lng:127.5053},:{lat:37.6635,lng:127.0115},:{lat:37.6575,lng:127.0123},"4.19":{lat:37.6517,lng:127.0134},:{lat:37.6459,lng:127.0147},:{lat:37.6398,lng:127.0161},:{lat:37.6316,lng:127.0183},:{lat:37.6263,lng:127.0197},:{lat:37.6188,lng:127.0215},:{lat:37.6135,lng:127.0224},:{lat:37.6073,lng:127.0243},:{lat:37.5359,lng:126.7385},:{lat:37.559,lng:126.6882},:{lat:37.5323,lng:126.6416},:{lat:37.4929,lng:126.4939},:{lat:37.4974,lng:126.4692},:{lat:37.4465,lng:126.4519},1:{lat:37.4493,lng:126.4514},2:{lat:37.4604,lng:126.4419},:{lat:37.512,lng:127.059},:{lat:37.5111,lng:127.098},:{lat:37.5512,lng:126.9882},:{lat:37.5796,lng:126.977},:{lat:37.5794,lng:126.991},:{lat:37.5658,lng:126.9749},:{lat:37.5673,lng:127.0095},DDP:{lat:37.5673,lng:127.0095},:{lat:37.5344,lng:126.9945},:{lat:37.5608,lng:126.986},:{lat:37.574,lng:126.985},:{lat:37.5825,lng:126.985},:{lat:37.5716,lng:126.9769},:{lat:37.5695,lng:126.978},:{lat:37.5256,lng:126.9227},:{lat:37.5284,lng:126.934},:{lat:37.5213,lng:127.1249},:{lat:37.5434,lng:127.0446},:{lat:37.6207,lng:127.0404},:{lat:37.5681,lng:126.8972},:{lat:37.5151,lng:127.073},:{lat:37.4982,lng:126.8671},:{lat:37.5203,lng:127.023},:{lat:37.5198,lng:127.0535},:{lat:37.5273,lng:127.0393},:{lat:37.5446,lng:127.0558},:{lat:37.5665,lng:126.9918},:{lat:37.574,lng:126.989},:{lat:37.56,lng:126.922},:{lat:37.55,lng:126.91},:{lat:37.542,lng:126.985},:{lat:37.537,lng:126.992}},yx=a=>{const c=a.trim();if(gs[c])return gs[c];if(gs[c+""])return gs[c+""];if(c.endsWith("")&&gs[c.slice(0,-1)])return gs[c.slice(0,-1)];const p=Object.keys(gs).find(f=>f.includes(c)||c.includes(f));return p?gs[p]:null},bx=()=>{if(wu.trim()&&Ee.current){const a=wu.trim(),c=yx(a);if(c){Ee.current.setCenter(new naver.maps.LatLng(c.lat,c.lng)),Ee.current.setZoom(16),lr.current.forEach(f=>f.setMap(null)),lr.current=[];const p=new naver.maps.Circle({map:Ee.current,center:new naver.maps.LatLng(c.lat,c.lng),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});lr.current.push(p),setTimeout(()=>p.setMap(null),5e3);return}const h=Pu.current.filter(p=>p.region&&p.region.toLowerCase().includes(a.toLowerCase()));if(h.length>0){ew(h);return}naver.maps.Service.geocode({query:a},(p,f)=>{if(p===naver.maps.Service.Status.OK&&f.v2.addresses&&f.v2.addresses.length>0){const x=f.v2.addresses[0],y=parseFloat(x.y),N=parseFloat(x.x);Ee.current.setCenter(new naver.maps.LatLng(y,N)),Ee.current.setZoom(16),lr.current.forEach(M=>M.setMap(null)),lr.current=[];const w=new naver.maps.Circle({map:Ee.current,center:new naver.maps.LatLng(y,N),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});lr.current.push(w),setTimeout(()=>w.setMap(null),5e3)}else alert("  .")})}else Zj()},pr=a=>a?a.replace(/[^0-9]/g,""):"",iw=(a,c,h,p)=>{if(!a||!c||!h||!p)return 1/0;const f=6371e3,x=(h-a)*Math.PI/180,y=(p-c)*Math.PI/180,N=Math.sin(x/2)*Math.sin(x/2)+Math.cos(a*Math.PI/180)*Math.cos(h*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2),w=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N));return f*w},Mu=(a,c)=>{if(!a||!c||c.length===0)return{isDuplicate:!1,matchedCompany:null};const h=a.name||a.officeName||a.realtorName||"",p=a.address||"",f=a.regNo||"",x=a.lat,y=a.lng,N=[pr(a.phone||""),pr(a.cellPhone||""),pr(a.officePhone||""),pr(a.mobile||"")].filter(A=>A&&A.length>=4),w=A=>(A||"").replace(/||||||/g,"").replace(/\s+/g,"").trim(),M=A=>{if(!A)return"";const te=A.replace(/|||||/g,"").replace(/\([^)]*\)/g,"").trim().match(/(\S+)\s*(\S+(?:||))\s*(\d+(?:-\d+)?)/);return te?`${te[1]}_${te[2]}_${te[3]}`:""},T=w(h),R=M(p);for(const A of c){const B=A.name||"",te=A.address||"",k=A.regNo||"",se=A.lat,F=A.lng,W=[pr(A.phone||""),pr(A.contact||""),pr(A.mobile||"")].filter(ae=>ae&&ae.length>=4),G=w(B),$=M(te);if(f&&k&&f===k)return{isDuplicate:!0,matchedCompany:A,reason:"regNo"};if(iw(x,y,se,F)<=30&&T&&G&&T===G)return{isDuplicate:!0,matchedCompany:A,reason:"location+name"};if(N.some(ae=>W.some(he=>ae===he)))return{isDuplicate:!0,matchedCompany:A,reason:"phone"};if(R&&$&&R===$&&T&&G&&T===G)return{isDuplicate:!0,matchedCompany:A,reason:"address+name"};if(T&&G&&T===G){const ae=p.match(/(\S+)/),he=te.match(/(\S+)/);if(ae&&he&&ae[1]===he[1])return{isDuplicate:!0,matchedCompany:A,reason:"name_in_gu"}}}return{isDuplicate:!1,matchedCompany:null}},Au=(a,c)=>Mu(a,c).isDuplicate,Ou=(a,c=null)=>new Promise(h=>{var x,y;if(!((y=(x=window.naver)==null?void 0:x.maps)!=null&&y.Service)){h(null);return}const p=N=>new Promise(w=>{if(!N){w(null);return}naver.maps.Service.geocode({query:N},(M,T)=>{var R;if(M===naver.maps.Service.Status.OK&&((R=T.v2.addresses)==null?void 0:R.length)>0){const A=T.v2.addresses[0];w({lat:parseFloat(A.y),lng:parseFloat(A.x)})}else w(null)})});(async()=>{if(a){const N=await p(a);if(N)return h(N)}if(c){const N=await p(c);if(N)return h(N)}if(a){const N=a.replace(/\s*\d+.*$/,"").replace(/\s*\d+.*$/,"").replace(/\s*,.*$/,"").trim();if(N!==a){const w=await p(N);if(w)return h(w)}}if(a){const N=a.match(/(||||||||||||||||)[^\s]*\s+[^\s]+/);if(N){const w=await p(N[0]);if(w)return h(w)}}h(null)})()}),aw=a=>{const c=_s(),h=_t.filter(x=>x.date!==c?!1:a.role==="super"?!0:x.managerId===a.managerId),p=Fe.filter(x=>x.date!==c?!1:a.role==="super"?!0:x.managerId===a.managerId),f=[...h.map(x=>({type:"calendar",...x})),...p.map(x=>{var y;return{type:"route",title:`: ${((y=x.stops)==null?void 0:y.length)||0} `,...x}})];f.length>0&&(pj(f),Zd(!0))},ow=()=>{const a=wh();return a.dayOfWeek!==1?!1:a.day>=22&&a.day<=28},cw=a=>{if(a.role==="super"||!ow())return;const c=wh(),h=c.month+1>11?0:c.month+1,f=`${c.month+1>11?c.year+1:c.year}-${String(h+1).padStart(2,"0")}`;_t.some(y=>{var N;return y.managerId===a.managerId&&((N=y.date)==null?void 0:N.startsWith(f))})||tu(!0)},Nx=async a=>new Promise((c,h)=>{const p=new FileReader;p.onload=async()=>{var f,x,y,N;try{const w=p.result.split(",")[1],T=await(await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${$T}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:w},features:[{type:"TEXT_DETECTION"}]}]})})).json();if((N=(y=(x=(f=T.responses)==null?void 0:f[0])==null?void 0:x.textAnnotations)==null?void 0:y[0])!=null&&N.description){const R=T.responses[0].textAnnotations[0].description,A=dw(R);c(A)}else c({raw:"",name:"",contact:"",phone:"",address:""})}catch(w){h(w)}},p.onerror=h,p.readAsDataURL(a)}),dw=a=>{const c=a.split(`
`).map(T=>T.trim()).filter(T=>T);let h="",p="",f="",x="";const y=[/010[-\s]?\d{4}[-\s]?\d{4}/,/02[-\s]?\d{3,4}[-\s]?\d{4}/,/0\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/];for(const T of c){for(const R of y){const A=T.match(R);if(A){f=A[0].replace(/[-\s]/g,"");break}}if(f)break}const N=/(||||||||||||||||)[^\n]+?(|||||)[^\n]*\d*/;for(const T of c){const R=T.match(N);if(R){x=R[0];break}}const w=[/\s*[:\s]*([-]{2,4})/,/([-]{2,4})\s*(|||||||)/,/^([-]{2,4})$/];for(const T of c){for(const R of w){const A=T.match(R);if(A){p=A[1]||A[0];break}}if(p)break}const M=[/([-]+)/,/([-]+)/,/([-]+)/];for(const T of c){for(const R of M){const A=T.match(R);if(A){h=A[1];break}}if(h)break}return{raw:a,name:h,contact:p,phone:f,address:x}},uw=async a=>{var h;const c=(h=a.target.files)==null?void 0:h[0];if(c){ao(!0),io(!0);try{const p=await Nx(c);Jd(p),qe({...ne,name:p.name||"",contact:p.contact||"",phone:p.phone||"",address:p.address||""})}catch(p){console.error("OCR :",p),alert("  .")}finally{ao(!1),a.target.value=""}}},hw=async a=>{const c=Array.from(a.target.files||[]).slice(0,10);if(c.length!==0){ao(!0),Qd(!0),yn([]);try{const h=[];for(let p=0;p<c.length;p++){const f=await Nx(c[p]);h.push({...f,managerId:(n==null?void 0:n.managerId)||null,reaction:"neutral",memo:""})}yn(h)}catch(h){console.error("OCR :",h),alert("    .")}finally{ao(!1),a.target.value=""}}},mw=()=>{const a=Qt.filter(c=>c.name);if(a.length===0)return alert("  .");a.forEach((c,h)=>{const p={id:Date.now()+h,name:c.name,contact:c.contact,phone:c.phone,address:c.address,region:c.address,managerId:c.managerId,reaction:c.reaction,memo:c.memo,createdAt:new Date().toLocaleString("ko-KR")};Hn(p)}),alert(`${a.length}  .`),yn([]),Qd(!1)},pw=(a,c,h,p)=>{const f=T=>T*Math.PI/180,x=T=>T*180/Math.PI,y=f(p-c),N=Math.sin(y)*Math.cos(f(h)),w=Math.cos(f(a))*Math.sin(f(h))-Math.sin(f(a))*Math.cos(f(h))*Math.cos(y);return(x(Math.atan2(N,w))+360)%360},fw=(a,c,h,p)=>{if(!ee.current)return;const f=new naver.maps.LatLng(a,c);Wn.current||(Wn.current=new naver.maps.Marker({position:f,map:ee.current,icon:{content:"",anchor:new naver.maps.Point(20,20)},zIndex:1e3})),Wn.current.setPosition(f);const x=h||0;Wn.current.setIcon({content:`<div style="position: relative; width: 40px; height: 40px;">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(${x}deg);">
 <div style="width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 20px solid #4285f4; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));"></div>
 </div>
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #4285f4; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6px; height: 6px; background: white; border-radius: 50%;"></div>
 </div>
 </div>`,anchor:new naver.maps.Point(20,20)}),p&&p<500&&(Vn.current?(Vn.current.setCenter(f),Vn.current.setRadius(p)):Vn.current=new naver.maps.Circle({map:ee.current,center:f,radius:p,fillColor:"#4285f4",fillOpacity:.1,strokeColor:"#4285f4",strokeOpacity:.3,strokeWeight:1}))},xw=()=>{if(wo)nl.current&&(navigator.geolocation.clearWatch(nl.current),nl.current=null),Wn.current&&(Wn.current.setMap(null),Wn.current=null),Vn.current&&(Vn.current.setMap(null),Vn.current=null),sl.current=null,Co.current=0,_u(!1),lx(null);else{if(!navigator.geolocation)return alert("GPS   .");_u(!0),nl.current=navigator.geolocation.watchPosition(a=>{const{latitude:c,longitude:h,accuracy:p,heading:f,speed:x}=a.coords,y={lat:c,lng:h};lx(y);let N=Co.current;if(sl.current){const w=sl.current.lat,M=sl.current.lng;Math.sqrt(Math.pow(c-w,2)+Math.pow(h-M,2))*111e3>2&&(N=pw(w,M,c,h),Co.current=N,sl.current=y)}else sl.current=y;f&&!isNaN(f)&&x>.3&&(N=f,Co.current=f),fw(c,h,N,p)},a=>{console.error("GPS :",a);let c="GPS  .";a.code===1?c="GPS  .    .":a.code===2?c="GPS    .":a.code===3&&(c="GPS   ."),alert(c),_u(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},gw=()=>{So&&ee.current?(ee.current.setCenter(new naver.maps.LatLng(So.lat,So.lng)),ee.current.setZoom(16)):alert("    . GPS .")};g.useEffect(()=>()=>{nl.current&&navigator.geolocation.clearWatch(nl.current),Wn.current&&Wn.current.setMap(null),Vn.current&&Vn.current.setMap(null),xs.current&&xs.current.setMap(null)},[]),g.useEffect(()=>{if(t&&S&&n&&(_t.length>0||Fe.length>0)){const a=`bc_alert_shown_${_s()}_${n.managerId||"admin"}`;sessionStorage.getItem(a)||setTimeout(()=>{aw(n),sessionStorage.setItem(a,"true")},1e3)}},[t,S,_t,Fe,n]),g.useEffect(()=>{t&&P==="calendar"&&n&&n.role!=="super"&&cw(n)},[P,t,n,_t]);const Po=g.useRef([]),_x=()=>{Po.current.forEach(a=>a.setMap(null)),Po.current=[]},Du=async()=>{if(!tl.trim())return alert(" ");if($n.length>=10)return alert(` 10   .
    .`);fu(!0);const a=yx(tl);if(a&&ee.current){fu(!1),ee.current.setCenter(new naver.maps.LatLng(a.lat,a.lng)),ee.current.setZoom(16),$n.some(h=>h.lat===a.lat&&h.lng===a.lng)||_i(h=>[...h,{id:Date.now(),name:mu.trim()||tl,address:"",lat:a.lat,lng:a.lng}]),hu(""),pu(""),setTimeout(()=>{const h=new naver.maps.Marker({position:new naver.maps.LatLng(a.lat,a.lng),map:ee.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});Po.current.push(h)},200);return}naver.maps.Service.geocode({query:tl},async(c,h)=>{var N;if(fu(!1),c!==naver.maps.Service.Status.OK||!((N=h.v2.addresses)!=null&&N.length))return alert("    ");const p=h.v2.addresses[0],f=parseFloat(p.y),x=parseFloat(p.x);$n.some(w=>w.lat===f&&w.lng===x)||_i(w=>[...w,{id:Date.now(),name:mu.trim()||tl,address:p.roadAddress||p.jibunAddress||"",lat:f,lng:x}]),hu(""),pu(""),ee.current&&(ee.current.setCenter(new naver.maps.LatLng(f,x)),ee.current.setZoom(16),setTimeout(()=>{const w=new naver.maps.Marker({position:new naver.maps.LatLng(f,x),map:ee.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});Po.current.push(w)},200))})},vw=a=>{_i(c=>c.filter(h=>h.id!==a))},yw=()=>{if($n.length===0)return alert("  ");let a=0;const c=[];$n.forEach(h=>{be.some(f=>f.lat===h.lat&&f.lng===h.lng)||(c.push({id:Date.now()+Math.random(),name:h.name,address:h.address,lat:h.lat,lng:h.lng,type:"search"}),a++)}),c.length>0&&Rt(h=>[...h,...c]),_i([]),_x(),alert(`${a}   !`)},[_5,j5]=g.useState(!1);g.useRef(null);const bw=a=>{Rt(c=>c.filter(h=>h.id!==a))},jx=(a,c)=>{const h=[...be],p=a+c;p<0||p>=h.length||([h[a],h[p]]=[h[p],h[a]],Rt(h))},Mo=(a,c,h,p)=>{const x=(h-a)*Math.PI/180,y=(p-c)*Math.PI/180,N=Math.sin(x/2)*Math.sin(x/2)+Math.cos(a*Math.PI/180)*Math.cos(h*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 6371*(2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N)))},wx=(a,c,h)=>{const p=[...a],f=[];let x=c,y=h;for(;p.length>0;){let N=0,w=1/0;for(let T=0;T<p.length;T++){const R=Mo(x,y,p[T].lat,p[T].lng);R<w&&(w=R,N=T)}const M=p.splice(N,1)[0];f.push(M),x=M.lat,y=M.lng}return f},Sx=async(a,c,h)=>{var x,y;if(h.length<1)return null;const p="dx2ymyk2b1",f=localStorage.getItem("ncp_client_secret")||"";if(!f)return console.log("Directions API   -   "),null;try{const N=`${c},${a}`,w=`${h[h.length-1].lng},${h[h.length-1].lat}`;let M="";h.length>1&&(M=h.slice(0,-1).map(te=>`${te.lng},${te.lat}`).join("|"));let T=`https://naveropenapi.apigw.ntruss.com/map-direction-15/v1/driving?start=${N}&goal=${w}&option=trafast`;M&&(T+=`&waypoints=${M}`);const R=await fetch(T,{headers:{"X-NCP-APIGW-API-KEY-ID":p,"X-NCP-APIGW-API-KEY":f}});if(!R.ok)return null;const A=await R.json();if(A.code!==0||!((y=(x=A.route)==null?void 0:x.trafast)!=null&&y[0]))return null;const B=A.route.trafast[0];return{path:B.path,distance:B.summary.distance,duration:B.summary.duration}}catch(N){return console.error("Directions API  :",N),null}},Cx=a=>{if(!ee.current||!(a!=null&&a.path))return;xs.current&&xs.current.setMap(null);const c=a.path.map(([f,x])=>new naver.maps.LatLng(x,f));xs.current=new naver.maps.Polyline({map:ee.current,path:c,strokeColor:"#4285f4",strokeWeight:5,strokeOpacity:.8,strokeLineCap:"round",strokeLineJoin:"round"});const h=(a.distance/1e3).toFixed(1),p=Math.round(a.duration/6e4);ko({distance:h,duration:p})},Nw=async()=>{const a=be.filter(h=>h.lat&&h.lng),c=be.filter(h=>!h.lat||!h.lng);if(a.length<2){alert(`   2  .
  .`);return}navigator.geolocation?navigator.geolocation.getCurrentPosition(async h=>{const p=h.coords.latitude,f=h.coords.longitude,x=wx(a,p,f),y=[...x,...c];Rt(y);const N=await Sx(p,f,x);if(N){Cx(N);const w=(N.distance/1e3).toFixed(1),M=Math.round(N.duration/6e4);alert(`  !

 ${x.length} 
  : ${w}km
  : ${M}

   !`)}else{let w=Mo(p,f,x[0].lat,x[0].lng);for(let M=0;M<x.length-1;M++)w+=Mo(x[M].lat,x[M].lng,x[M+1].lat,x[M+1].lng);ko(null),alert(`  !

 ${x.length} 
 : ${w.toFixed(1)}km

     API  .`)}},h=>{kx(a,c)},{enableHighAccuracy:!0,timeout:5e3}):kx(a,c)},_w=()=>{if(be.length<2){alert(" 2  .");return}Rt([...be].reverse()),alert("   !")},kx=async(a,c)=>{const h=a[0],p=wx(a,h.lat,h.lng),f=[...p,...c];Rt(f);const x=await Sx(h.lat,h.lng,p.slice(1));if(x){Cx(x);const y=(x.distance/1e3).toFixed(1),N=Math.round(x.duration/6e4);alert(`  !

 ${p.length} 
  : ${y}km
  : ${N}

(GPS   -   )`)}else{let y=0;for(let N=0;N<p.length-1;N++)y+=Mo(p[N].lat,p[N].lng,p[N+1].lat,p[N+1].lng);ko(null),alert(`  !

 ${p.length} 
 : ${y.toFixed(1)}km

(GPS   -   )`)}},jw=a=>{const c=(a.stops||[]).filter(h=>h.lat&&h.lng);if(c.length===0)return alert("   .");Ex(a),setTimeout(()=>{if(ee.current)if(zn.current.forEach(h=>h.setMap(null)),zn.current=[],Bn.current.forEach(h=>h.setMap(null)),Bn.current=[],c.forEach((h,p)=>{const f=new naver.maps.Marker({position:new naver.maps.LatLng(h.lat,h.lng),map:ee.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 3px 8px rgba(0,0,0,0.4); border: 3px solid white;">${p+1}</div>`,anchor:new naver.maps.Point(16,16)}});zn.current.push(f)}),c.length>=2){const h=c.map(x=>new naver.maps.LatLng(x.lat,x.lng)),p=new naver.maps.Polyline({map:ee.current,path:h,strokeColor:"#14b8a6",strokeWeight:5,strokeOpacity:.9,strokeStyle:"solid"});Bn.current.push(p);const f=new naver.maps.LatLngBounds;c.forEach(x=>f.extend(new naver.maps.LatLng(x.lat,x.lng))),ee.current.fitBounds(f,{padding:50})}else ee.current.setCenter(new naver.maps.LatLng(c[0].lat,c[0].lng)),ee.current.setZoom(15)},400)},Ex=a=>{vo(a.id),gi(a.name||""),Jr(a.date||new Date().toISOString().split("T")[0]),fi(a.time||"09:00"),ps(a.managerId||null),Rt(a.stops||[]),yo(0),setTimeout(()=>{ee.current&&Ro()},100),window.scrollTo({top:0,behavior:"smooth"})},ww=a=>{var h;const c=((h=a.stops)==null?void 0:h.filter(p=>!p.visited))||[];c.length>0?du({route:a,unvisitedStops:c}):Lu(a,!1)},Lu=(a,c=!1)=>{var f;const h={...a,status:"completed",completedAt:new Date().toISOString()},p=Fe.map(x=>x.id===a.id?h:x);if(Jf(p),localStorage.setItem("bc_routes",JSON.stringify(p)),c){const x=((f=a.stops)==null?void 0:f.filter(N=>!N.visited))||[];let y=0;x.forEach(N=>{const w=ie.find(M=>{var T,R;return M.name===N.name||((T=M.name)==null?void 0:T.includes(N.name))||((R=N.name)==null?void 0:R.includes(M.name))});if(w&&w.managerId){const M={...w,managerId:null};Hn(M),y++}}),y>0?alert(`  .
  ${y}   .`):alert("  .")}else alert("  .");du(null)},Sw=()=>{vo(null),gi(""),Rt([]),Jr(_s()),fi("09:00"),ps((n==null?void 0:n.managerId)||null),To(),localStorage.removeItem("bc_temp_route")},Ix=()=>{if(be.length===0)return alert(" /  ");if(!xi.trim())return alert("  (:  )");const a=au||(n==null?void 0:n.managerId)||0;if(!a&&(n==null?void 0:n.role)!=="super")return alert(" ");if(ir){const h={...Fe.find(p=>p.id===ir),name:xi.trim(),date:xo,time:go,managerId:a,stops:be.map(p=>({...p,visited:p.visited||!1}))};Io(h),vo(null),alert(" !")}else{const c={id:Date.now(),name:xi.trim(),date:xo,time:go,managerId:a,stops:be.map(h=>({...h,visited:!1})),status:"planned",createdAt:new Date().toISOString()};Io(c),alert(" !")}gi(""),Rt([]),Jr(_s()),fi("09:00"),ps((n==null?void 0:n.managerId)||null),To(),localStorage.removeItem("bc_temp_route")},Tx=a=>{if(a<0||a>=be.length)return;yo(a);const c=be[a];c.lat&&c.lng&&ee.current&&(ee.current.setCenter(new naver.maps.LatLng(c.lat,c.lng)),ee.current.setZoom(16))},Cw=(a,c)=>{yo(c),a.lat&&a.lng&&ee.current&&(ee.current.setCenter(new naver.maps.LatLng(a.lat,a.lng)),ee.current.setZoom(16))},kw=(a,c)=>{const h=Fe.find(N=>N.id===a);if(!h)return;const p=h.stops.find(N=>N.id===c),f=!(p!=null&&p.visited),x=h.stops.map(N=>N.id===c?{...N,visited:!N.visited}:N),y=x.every(N=>N.visited);if(Io({...h,stops:x,status:y?"completed":"planned"}),f&&(p!=null&&p.name)){const N=ie.find(w=>w.name===p.name);N&&Hn({...N,lastVisitDate:new Date().toISOString()})}($t==null?void 0:$t.id)===a&&Fn({...h,stops:x,status:y?"completed":"planned"})},Ew=a=>{const c=Fe.find(f=>f.id===a);if(!c)return;const h=c.stops.map(f=>({...f,visited:!0}));Io({...c,stops:h,status:"completed"});const p=(c.stops||[]).filter(f=>f.name&&!ie.find(x=>x.name===f.name));p.forEach(f=>{const x={id:Date.now()+Math.random(),name:f.name,address:f.address||"",managerId:c.managerId,reaction:"positive",fromRoute:c.name,createdAt:new Date().toISOString()};Hn(x)}),Fn(null),p.length>0?alert(`  !
${p.length}   .`):alert("  !")},Iw=a=>{if(!a.lat||!a.lng)return alert("    ");Fn(null),mr("map"),setTimeout(()=>{if(!Ee.current)return;Tw(),Ee.current.setCenter(new naver.maps.LatLng(a.lat,a.lng)),Ee.current.setZoom(17);const c=new naver.maps.Marker({position:new naver.maps.LatLng(a.lat,a.lng),map:Ee.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; padding: 8px 12px; border-radius: 20px; font-weight: bold; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white; white-space: nowrap;">${a.name}</div>`,anchor:new naver.maps.Point(50,20)}});bu.current.push(c);const h=new naver.maps.Circle({map:Ee.current,center:new naver.maps.LatLng(a.lat,a.lng),radius:100,fillColor:"#14b8a6",fillOpacity:.2,strokeColor:"#d97706",strokeWeight:2});lr.current.push(h)},300)},Tw=()=>{sx.current.forEach(a=>a.setMap(null)),sx.current=[],bu.current.forEach(a=>a.setMap(null)),bu.current=[]},Rw=a=>{const c=(a.stops||[]).filter(h=>h.lat&&h.lng);if(c.length===0)return alert("   ");mr("route"),setTimeout(()=>{if(ee.current)if(zn.current.forEach(h=>h.setMap(null)),zn.current=[],Bn.current.forEach(h=>h.setMap(null)),Bn.current=[],c.forEach((h,p)=>{const f=new naver.maps.Marker({position:new naver.maps.LatLng(h.lat,h.lng),map:ee.current,icon:{content:`<div style="background: linear-gradient(135deg, #00C73C, #00a832); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 13px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">${p+1}</div>`,anchor:new naver.maps.Point(14,14)}});zn.current.push(f)}),c.length>=2){const h=c.map(x=>new naver.maps.LatLng(x.lat,x.lng)),p=new naver.maps.Polyline({map:ee.current,path:h,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.8,strokeStyle:"solid"});Bn.current.push(p);const f=new naver.maps.LatLngBounds;c.forEach(x=>f.extend(new naver.maps.LatLng(x.lat,x.lng))),ee.current.fitBounds(f,{padding:50})}else ee.current.setCenter(new naver.maps.LatLng(c[0].lat,c[0].lng)),ee.current.setZoom(15)},300)},Ci=(a,c)=>{if(!a)return;const h={isOnline:c,lastSeen:new Date().toISOString()};re.ref("userStatus/"+a).set(h)},Rx=async()=>{try{const a=l.includes("@")?l:`${l}@beancraft.com`,h=(await Ss.auth().signInWithEmailAndPassword(a,o)).user;let p=null;const f=a.split("@")[0];if(f==="admin")p={name:"admin",role:"super",email:h.email};else{const y=(await re.ref("managers").once("value")).val(),w=(y?Object.values(y):[]).find(M=>M.username===f||M.email===a);if(w){let M=w.name;const T=ec.find(R=>R.username===f||R.id===w.id);T&&(!w.name||w.name.length<2||w.name.includes(""))&&(M=T.name,console.log(`[]   : ${w.name} -> ${M}`),re.ref("managers/"+w.id).update({name:M})),p={name:M,role:"manager",managerId:w.id,username:w.username,email:h.email}}else p={name:f,role:"manager",email:h.email}}s(p),e(!0),setTimeout(()=>{s(x=>x&&{...x})},150),p.managerId&&ps(p.managerId),localStorage.setItem("bc_session",JSON.stringify({user:p,expiry:Date.now()+6*60*60*1e3})),u?localStorage.setItem("bc_remember_login",JSON.stringify({id:l,pw:o,expiry:Date.now()+30*24*60*60*1e3})):localStorage.removeItem("bc_remember_login"),p.managerId&&Ci(p.managerId,!0)}catch(a){console.error(" :",a),a.code==="auth/user-not-found"?alert("  "):a.code==="auth/wrong-password"?alert("  "):a.code==="auth/invalid-email"?alert("   "):alert(" : "+a.message)}},Pw=async()=>{n!=null&&n.managerId&&Ci(n.managerId,!1);try{await Ss.auth().signOut()}catch{}e(!1),s(null),localStorage.removeItem("bc_session"),Ee.current=null,ee.current=null,Wd([]),Ka(null),qr(null)};g.useEffect(()=>{const a=()=>{n!=null&&n.managerId&&re.ref("userStatus/"+n.managerId).set({isOnline:!1,lastSeen:new Date().toISOString()})};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[n]),g.useEffect(()=>{if(!(n!=null&&n.managerId))return;const a=setInterval(()=>{Ci(n.managerId,!0)},6e4);return()=>clearInterval(a)},[n]);const Px=async()=>{if(!bn.trim())return alert("  ");if(bn!==co)return alert("  ");if(bn.length<6)return alert(" 6  ");try{const a=Ss.auth().currentUser;if(!a)return alert(" ");await a.updatePassword(bn),Vd(!1),oo(""),uo(""),alert(" ")}catch(a){console.error("  :",a),a.code==="auth/requires-recent-login"?alert("     "):alert("  : "+a.message)}},Mx=async()=>{if(Lf){if(!mi.trim())return alert("  ");if(mi!==Gf)return alert("  ");if(mi.length<6)return alert(" 6  ");try{const a=Ss.auth().currentUser;if(!a)return alert(" ");await a.updatePassword(mi),Hd(!1),Kf(""),qf(""),alert("  ")}catch(a){a.code==="auth/requires-recent-login"?alert("     "):alert("  : "+a.message)}}else{if(!bn.trim())return alert("  ");if(bn!==co)return alert("  ");if(bn.length<6)return alert(" 6  ");try{const a=Ss.auth().currentUser;if(!a)return alert(" ");await a.updatePassword(bn),oo(""),uo(""),alert("  ")}catch(a){a.code==="auth/requires-recent-login"?alert("     "):alert("  : "+a.message)}}},Ax=async()=>{if(!ne.name.trim())return alert(" ");let a=null,c=null;if(ne.address){const y=await Ou(ne.address,ne.name);y&&(a=y.lat,c=y.lng)}const h=an?ne.managerId:n==null?void 0:n.managerId,p={id:Date.now(),...ne,managerId:h,lat:a,lng:c,isReregistered:ne.isReregistered||!1,usedMents:If,mentMemo:J_,createdAt:new Date().toLocaleString("ko-KR")};Hn(p);const f=ne.reaction==="positive"||ne.reaction==="special";If.forEach(y=>Qj(y,f));const x=_v[Math.floor(Math.random()*_v.length)];if(Gd({companyName:ne.name,quote:x}),ne.reaction==="positive"||ne.reaction==="special"){const y=new Date;y.setDate(y.getDate()+1);const N=y.toISOString().split("T")[0],w={id:Date.now()+1,date:N,title:`${ne.name}`,managerId:h,memo:`, .    .    ?

: ${ne.contact||"-"}
: ${ne.phone||"-"}
: ${ne.address||"-"}`,type:"followup",companyId:p.id};Ru(w);const M=new Date;M.setMonth(M.getMonth()+1);const T=M.toISOString().split("T")[0],R={id:Date.now()+2,date:T,title:`${ne.name}`,managerId:h,memo:`, . .      ?

: ${ne.contact||"-"}
: ${ne.phone||"-"}
: ${ne.address||"-"}`,type:"followup",companyId:p.id};Ru(R)}qe({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),zj(""),Q_([]),X_("")},Mw=async()=>{if(!at)return;let a={...at};if(a.address&&(!a.lat||!a.lng)){const c=await Ou(a.address,a.name);c&&(a.lat=c.lat,a.lng=c.lng)}Hn(a),Xe(null)},Ox=a=>{Zr({type:"company",id:a.id,name:a.name})},Aw=()=>{if(!nu.trim())return alert(" ");const a=nu.split(`
`).map(h=>h.trim()).filter(h=>h),c=[];a.forEach(h=>{const p=h.split("/").map(R=>R.trim());if(p.length<1||!p[0])return;const[f,x,y,N,w]=p;let M=Vf;w&&(w===""?M="negative":w===""?M="neutral":w===""?M="positive":w===""&&(M="special"));const T=N||xj||"";c.push({name:f,contact:x||"",phone:y||"",managerId:Bf,region:T,address:T,reaction:M})}),c.forEach((h,p)=>{const f={id:Date.now()+p,...h,createdAt:new Date().toLocaleString("ko-KR")};Hn(f)}),zf(""),Wf(null),gj(""),vj(""),Hf("neutral"),Ja(!1),alert(`${c.length}  .`)},Ow=()=>{if(!Pt.name.trim())return alert(" ");const a={id:Date.now(),...Pt,createdAt:new Date().toLocaleString("ko-KR")};cx(a),ur({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""})},Dw=()=>{Ze&&(cx(Ze),Yt(null))},Lw=()=>{if(!ln.managerId||!ln.amount)return alert("  ");const a={id:Date.now(),...ln,amount:Number(ln.amount),date:ln.date||_s()};dx(a),Eo({managerId:null,companyId:null,amount:"",date:"",note:""}),no(!1)},Dx=async()=>{var a,c,h,p,f;if(ii.trim()){kf(!0),Cf(null);try{const x=`    .      .

: ${ii}

 JSON   (  JSON):
{
  "overview": {
    "population": " 2.5",
    "households": " 1.2 ",
    "stores": "127",
    "avgRent": " 300",
    "source": "https://sg.sbiz.or.kr"
  },
  "consumers": [
    {"label": "20", "percent": 35, "source": "https://kosis.kr"},
    {"label": "30", "percent": 28, "source": "https://kosis.kr"},
    {"label": "40", "percent": 22, "source": "https://kosis.kr"},
    {"label": "50 ", "percent": 15, "source": "https://kosis.kr"}
  ],
  "franchises": [
    {"name": "", "count": 12},
    {"name": "", "count": 8},
    {"name": "", "count": 6},
    {"name": "", "count": 5},
    {"name": "", "count": 3}
  ],
  "development": [
    "2025 GTX-A   ",
    "    ",
    "  "
  ],
  "risks": [
    "   ",
    "  ",
    "  "
  ],
  "insight": "      20-30  .   ,        .            ."
}`,M=(((f=(p=(h=(c=(a=(await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyAl0PfvfKlD-nZxtAJOC6qhME-A-V_u2L8",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:x}]}],generationConfig:{temperature:.7}})})).json()).candidates)==null?void 0:a[0])==null?void 0:c.content)==null?void 0:h.parts)==null?void 0:p[0])==null?void 0:f.text)||"").match(/\{[\s\S]*\}/);if(M){const T=JSON.parse(M[0]);Cf(T),setTimeout(()=>{if(window.naver&&window.naver.maps){const R=document.getElementById("sales-mode-map");R&&window.naver.maps.Service.geocode({query:ii},(A,B)=>{let te=new window.naver.maps.LatLng(37.5665,126.978);if(A===window.naver.maps.Service.Status.OK&&B.v2.addresses.length>0){const se=B.v2.addresses[0];te=new window.naver.maps.LatLng(parseFloat(se.y),parseFloat(se.x))}const k=new window.naver.maps.Map(R,{center:te,zoom:16});new window.naver.maps.Marker({position:te,map:k}),new window.naver.maps.Circle({map:k,center:te,radius:500,fillColor:"#FFA500",fillOpacity:.15,strokeColor:"#FFA500",strokeWeight:2})})}},100)}}catch(x){console.error("Sales mode search error:",x),alert("   .  .")}finally{kf(!1)}}},Fw=a=>fo.filter(c=>c.managerId===a).reduce((c,h)=>c+h.amount,0),Uw=()=>{const a=Object.entries(su).filter(([h,p])=>p).map(([h])=>h);if(a.length===0)return alert("  ");const c={id:Date.now(),managerId:n.managerId,managerName:n.name,items:a,timestamp:new Date().toLocaleString("ko-KR"),status:"pending"};ux(c),ru({:!1,:!1,:!1,:!1}),Za(null),alert(" .")},$w=a=>{const c=Qf.find(h=>h.id===a);c&&ux({...c,status:"confirmed"})},zw=(a,c,h)=>{const p=String(h).replace(/^0+/,"")||"0",f=me.find(x=>x.id===a);f&&Iu({...f,promo:{...f.promo,[c]:Number(p)||0}})},vs=ku.trim()?ie.filter(a=>BT(a.name,ku)):ie,an=(n==null?void 0:n.role)==="super",ki=Qf.filter(a=>a.status==="pending"),Bw=()=>me,Ww=a=>{if(!a)return"";const c=new Date(a),p=new Date-c,f=Math.floor(p/6e4),x=Math.floor(p/36e5),y=Math.floor(p/864e5);return f<1?" ":f<60?`${f} `:x<24?`${x} `:y<7?`${y} `:c.toLocaleDateString("ko-KR")};if(!t){const a={transition:"opacity 1.5s ease-in-out, transform 1.5s ease-in-out",willChange:"opacity, transform"};return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 login-gradient-bg overflow-hidden",children:r.jsxs("div",{className:"w-full max-w-md relative",style:{minHeight:"500px"},children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...a,opacity:I==="quote"?1:0,transform:I==="quote"?"translateY(0)":"translateY(-30px)",pointerEvents:I==="quote"?"auto":"none"},children:r.jsxs("p",{className:"text-slate-300 text-sm sm:text-base font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto text-center",style:{wordBreak:"keep-all"},children:['"',_,'"']})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...a,opacity:I==="logo"?1:0,transform:I==="logo"?"scale(1)":I==="quote"?"scale(0.9)":"scale(1.05)",pointerEvents:I==="logo"?"auto":"none"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-40 h-40 sm:w-56 sm:h-56 mx-auto mb-4 object-contain"}),r.jsx("p",{className:"text-slate-200 text-base sm:text-lg tracking-widest font-semibold",children:" "})]})}),r.jsxs("div",{className:"absolute inset-0",style:{...a,opacity:I==="form"?1:0,transform:I==="form"?"translateY(0)":"translateY(50px)",pointerEvents:I==="form"?"auto":"none"},children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-28 h-28 sm:w-40 sm:h-40 mx-auto mb-3 object-contain"}),r.jsx("p",{className:"text-slate-200 text-sm sm:text-base tracking-widest font-semibold",children:" "})]}),r.jsx("div",{className:"text-center mb-5 px-4",children:r.jsxs("p",{className:"text-slate-300 text-xs sm:text-sm font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto",style:{wordBreak:"keep-all"},children:['"',_,'"']})}),r.jsxs("div",{className:"bg-slate-900/80 rounded-xl p-4 sm:p-6 shadow-xl border border-slate-700",children:[r.jsx("input",{type:"text",placeholder:"",value:l,onChange:c=>i(c.target.value),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),r.jsx("input",{type:"password",placeholder:"",value:o,onChange:c=>d(c.target.value),onKeyPress:c=>c.key==="Enter"&&Rx(),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),r.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm mb-4 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u,onChange:c=>m(c.target.checked),className:"w-4 h-4 rounded accent-primary-500"}),"  "]}),r.jsx("button",{type:"button",onClick:Rx,className:"w-full p-3 bg-[#1e3a5f] hover:bg-[#264a73] text-white rounded-lg font-semibold transition-all text-sm",children:""})]})]})]})})}const Vw=[{key:"sales",icon:"",label:""},{key:"report",icon:"",label:""},{key:"calendar",icon:"",label:""},{key:"route",icon:"",label:""},{key:"map",icon:"",label:""},{key:"managers",icon:"",label:""},{key:"companies",icon:"",label:""},{key:"realtors",icon:"",label:""},{key:"customers",icon:"",label:""},...an?[]:[{key:"requests",icon:"",label:""}],{key:"settings",icon:"",label:""}];return r.jsxs("div",{className:`min-h-screen pb-6 ${nj==="dark"?"bg-black":"bg-slate-50"}`,children:[r.jsxs("div",{className:"bg-slate-800 border-b border-slate-600 px-4 py-3 flex justify-between items-center sticky top-0 z-50 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-8 h-8 object-contain"}),r.jsx("span",{className:"font-semibold text-slate-200 text-sm tracking-wide",children:"BEANCRAFT"})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[an&&ki.length>0&&r.jsx("span",{className:"bg-rose-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:ki.length}),r.jsx("span",{className:"text-sm text-slate-200 bg-slate-700 px-2 py-1 rounded-lg font-medium",children:((Lx=me.find(a=>a.id===(n==null?void 0:n.managerId)))==null?void 0:Lx.name)||(n==null?void 0:n.name)}),r.jsx("button",{type:"button",onClick:Pw,className:"text-slate-200 hover:text-rose-500 text-sm font-medium transition-colors",children:""})]})]}),r.jsx("div",{className:"bg-slate-800 border-b border-slate-600 tabs-container scrollbar-hide",children:r.jsx("div",{className:"flex justify-start sm:justify-center min-w-max px-2",children:Vw.map(a=>r.jsx("button",{onClick:()=>mr(a.key),className:`tab-btn ${P===a.key?"active":""}`,children:a.label},a.key))})}),Dd&&r.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-lg",children:""})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",Dd.count,""]}),r.jsx("p",{className:"text-white/80 text-xs",children:Dd.preview})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{mr("calendar"),Ka(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:" "}),r.jsx("button",{onClick:()=>Ka(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),Tf&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-lg",children:""})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-bold text-sm",children:["  ",Tf.count,""]}),r.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{mr("calendar"),qr(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),r.jsx("button",{onClick:()=>qr(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),bo&&r.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-pink-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-lg",children:""})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",bo.count,""]}),r.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{bo.companies[0],alert(`[  ]

${bo.companies.map((a,c)=>`${c+1}. ${a.name}
   : ${a.address||""}
   : ${a.issue}`).join(`

`)}

     .`)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),r.jsx("button",{onClick:()=>uu(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),r.jsxs("div",{className:"p-3 sm:p-4 max-w-6xl mx-auto",children:[P==="report"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsx("div",{className:"flex gap-2",children:an?r.jsxs("select",{className:"select-premium text-sm py-2",value:z||"all",onChange:a=>Q(a.target.value==="all"?null:a.target.value),children:[r.jsx("option",{value:"all",children:" "}),me.filter(a=>a.role!=="super").map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Q(n==null?void 0:n.id),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${!z||z===(n==null?void 0:n.id)?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),r.jsx("button",{onClick:()=>Q("all"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${z==="all"?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "})]})})]}),r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800 rounded-xl w-fit",children:[r.jsx("button",{onClick:()=>Se("basic"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${X==="basic"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:" "}),r.jsx("button",{onClick:()=>{var a;if(Se("ai"),!qa){oi(null);const c=new Date,h=c.getMonth(),p=c.getFullYear(),f=z==="all"||!z?null:Number(z),x=f?ie.filter(w=>w.managerId===f):ie,N=Fe.filter(w=>{const M=new Date(w.date);return M.getMonth()===h&&M.getFullYear()===p&&(!f||w.managerId===f)}).reduce((w,M)=>{var T;return w+(((T=M.stops)==null?void 0:T.length)||0)},0);zd({managerName:f?((a=me.find(w=>w.id===f))==null?void 0:a.name)||"":" ",thisVisits:N,visitChange:0,newCompanies:ie.filter(w=>w.createdAt&&new Date(w.createdAt).getMonth()===h&&(!f||w.managerId===f)).length,consults:po.filter(w=>w.status==="completed"&&w.createdAt&&new Date(w.createdAt).getMonth()===h).length,positiveRate:Math.round(x.filter(w=>w.reaction==="positive").length/Math.max(x.length,1)*100),positive:x.filter(w=>w.reaction==="positive").length,special:x.filter(w=>w.reaction==="special").length,neutral:x.filter(w=>w.reaction==="neutral").length,missed:x.filter(w=>w.reaction==="missed").length})}},className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${X==="ai"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:"AI "})]})]}),X==="basic"&&(()=>{const a=new Date,c=a.getMonth(),h=a.getFullYear(),p=c===0?11:c-1,f=c===0?h-1:h,x=z==="all"||!z?null:Number(z),y=Fe.filter(H=>{const le=new Date(H.date),je=le.getMonth()===c&&le.getFullYear()===h,ye=!x||H.managerId===x;return je&&ye}),N=ie.filter(H=>{if(!H.createdAt||H.isReregistered)return!1;const le=new Date(H.createdAt),je=le.getMonth()===c&&le.getFullYear()===h,ye=!x||H.managerId===x;return je&&ye}),w=Fe.filter(H=>{const le=new Date(H.date),je=le.getMonth()===p&&le.getFullYear()===f,ye=!x||H.managerId===x;return je&&ye}),M=ie.filter(H=>{if(!H.createdAt||H.isReregistered)return!1;const le=new Date(H.createdAt),je=le.getMonth()===p&&le.getFullYear()===f,ye=!x||H.managerId===x;return je&&ye}),T=y.reduce((H,le)=>{var je;return H+(((je=le.stops)==null?void 0:je.length)||0)},0),R=w.reduce((H,le)=>{var je;return H+(((je=le.stops)==null?void 0:je.length)||0)},0),A=N.length,B=M.length,te=x?ie.filter(H=>H.managerId===x):ie,k=te.filter(H=>H.reaction==="positive"||H.reaction==="special").length,se=te.length>0?Math.round(k/te.length*100):0,F=Math.max(0,se-Math.floor(Math.random()*10)+5),W=y.reduce((H,le)=>{var je,ye;return H+(((ye=(je=le.stops)==null?void 0:je.filter(Ke=>Ke.visited))==null?void 0:ye.length)||0)},0),G=w.reduce((H,le)=>{var je,ye;return H+(((ye=(je=le.stops)==null?void 0:je.filter(Ke=>Ke.visited))==null?void 0:ye.length)||0)},0),$=(H,le)=>le===0?H>0?100:0:Math.round((H-le)/le*100),E=$(T,R),O=$(A,B),ae=$(W,G),he=se-F,ys=(()=>{var Ke;const H=x?((Ke=me.find(_n=>_n.id===x))==null?void 0:Ke.name)||"":" ";let le="",je="",ye="";return le=`${H} :    ${T},   ${E>=0?"+":""}${E}%`,ye=`  ${A} |   ${W} |   ${se}%`,E>=0?je="     .":je="   .",{comment:le,suggestion:je,analysis:ye}})(),al=H=>{const le=new Date(h,c-H,1),je=le.getMonth(),ye=le.getFullYear();return Fe.filter(Ke=>{const _n=new Date(Ke.date),et=_n.getMonth()===je&&_n.getFullYear()===ye,Ne=!x||Ke.managerId===x;return et&&Ne}).reduce((Ke,_n)=>{var et;return Ke+(((et=_n.stops)==null?void 0:et.length)||0)},0)},ol=["1","2","3","4","5","6","7","8","9","10","11","12"],fr=[{month:ol[(c-2+12)%12],visits:al(2)},{month:ol[(c-1+12)%12],visits:al(1)},{month:ol[c],visits:al(0)}],Ei=Math.max(...fr.map(H=>H.visits),1),xr=me.filter(H=>H.role!=="super").map(H=>{const je=y.filter(et=>et.managerId===H.id).reduce((et,Ne)=>{var gr;return et+(((gr=Ne.stops)==null?void 0:gr.length)||0)},0),ye=ie.filter(et=>et.managerId===H.id),Ke=ye.filter(et=>et.reaction==="positive"||et.reaction==="special").length,_n=ye.length>0?Math.round(Ke/ye.length*100):0;return{...H,visits:je,positiveRate:_n,newCompanies:N.filter(et=>et.managerId===H.id).length}}).sort((H,le)=>le.visits-H.visits);return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:""}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[T,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),r.jsxs("div",{className:`text-xs mt-1 ${E>=0?"text-emerald-400":"text-rose-400"}`,children:[E>=0?"":""," ",Math.abs(E),"%"]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[A,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),r.jsxs("div",{className:`text-xs mt-1 ${O>=0?"text-emerald-400":"text-rose-400"}`,children:[O>=0?"":""," ",Math.abs(O),"%"]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[W,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),r.jsxs("div",{className:`text-xs mt-1 ${ae>=0?"text-emerald-400":"text-rose-400"}`,children:[ae>=0?"":""," ",Math.abs(ae),"%"]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[se,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:"%"})]}),r.jsxs("div",{className:`text-xs mt-1 ${he>=0?"text-emerald-400":"text-rose-400"}`,children:[he>=0?"":""," ",Math.abs(he),"%p"]})]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),r.jsx("div",{className:"flex items-end gap-4 h-32",children:fr.map((H,le)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[H.visits,""]}),r.jsx("div",{className:"w-full rounded-t transition-all duration-500 bg-slate-600",style:{height:`${Math.max(H.visits/Ei*100,8)}%`,background:le===fr.length-1?"#475569":"#334155"}}),r.jsx("div",{className:"text-xs text-slate-400 mt-2",children:H.month})]},le))})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),r.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"positive",label:"",count:te.filter(H=>H.reaction==="positive").length},{key:"special",label:"",count:te.filter(H=>H.reaction==="special").length},{key:"neutral",label:"",count:te.filter(H=>H.reaction==="neutral").length},{key:"missed",label:"",count:te.filter(H=>H.reaction==="missed").length}].map(H=>r.jsxs("div",{className:"text-center p-3 rounded-xl border border-slate-600",children:[r.jsx("div",{className:"text-xl font-bold text-slate-100",children:H.count}),r.jsx("div",{className:"text-xs text-slate-500",children:H.label})]},H.key))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-bold text-slate-100",children:"AI "}),r.jsx("button",{onClick:()=>{var et;oi(null);const H=new Date,le=H.getMonth(),je=H.getFullYear(),ye=z==="all"||!z?null:Number(z),Ke=ye?ie.filter(Ne=>Ne.managerId===ye):ie,_n=Fe.filter(Ne=>{const gr=new Date(Ne.date);return gr.getMonth()===le&&gr.getFullYear()===je&&(!ye||Ne.managerId===ye)});zd({managerName:ye?((et=me.find(Ne=>Ne.id===ye))==null?void 0:et.name)||"":" ",thisVisits:_n.reduce((Ne,gr)=>{var sg;return Ne+(((sg=gr.stops)==null?void 0:sg.length)||0)},0),visitChange:0,newCompanies:ie.filter(Ne=>Ne.createdAt&&new Date(Ne.createdAt).getMonth()===le&&(!ye||Ne.managerId===ye)).length,consults:po.filter(Ne=>Ne.status==="completed"&&Ne.createdAt&&new Date(Ne.createdAt).getMonth()===le).length,positiveRate:Math.round(Ke.filter(Ne=>Ne.reaction==="positive").length/Math.max(Ke.length,1)*100),positive:Ke.filter(Ne=>Ne.reaction==="positive").length,special:Ke.filter(Ne=>Ne.reaction==="special").length,neutral:Ke.filter(Ne=>Ne.reaction==="neutral").length,missed:Ke.filter(Ne=>Ne.reaction==="missed").length})},disabled:qa,className:"text-xs px-2 py-1 rounded-full border border-slate-600 text-slate-400 hover:border-slate-500 disabled:opacity-50",children:" "})]}),qa?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-2",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),r.jsx("span",{className:"text-slate-400 text-sm",children:"AI  ..."}),Je&&r.jsx("span",{className:"text-yellow-400 text-xs",children:Je})]}):Je&&!Tt?r.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[r.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"  "}),r.jsx("p",{className:"text-slate-300 text-sm",children:Je}),r.jsx("button",{onClick:()=>We(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:""})]}):Tt?r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("p",{className:"text-slate-300",children:Tt.comment}),Tt.analysis&&r.jsx("p",{className:"text-slate-400 text-xs",children:Tt.analysis}),r.jsx("div",{className:"pt-2 border-t border-slate-700",children:r.jsx("p",{className:"text-slate-400 text-xs",children:Tt.suggestion})}),qt&&r.jsxs("p",{className:"text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[" : ",qt.toLocaleString("ko-KR")]})]}):r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("p",{className:"text-slate-300",children:ys.comment}),ys.analysis&&r.jsx("p",{className:"text-slate-400 text-xs",children:ys.analysis}),r.jsx("div",{className:"pt-2 border-t border-slate-700",children:r.jsx("p",{className:"text-slate-400 text-xs",children:ys.suggestion})})]})]}),an&&(!z||z==="all")&&xr.length>0&&r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-200 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:xr.slice(0,5).map((H,le)=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:le<3?["","",""][le]:`${le+1}`}),r.jsx("span",{className:"text-slate-200 text-sm",children:H.name})]}),r.jsxs("span",{className:"text-slate-400 text-sm",children:[H.visits,""]})]},H.id))})]})]})]})})(),X==="ai"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-4 border border-brand-purple/30 bg-brand-purple/5",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:""})," AI  ",r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:"NEW"})]}),r.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"   AI   ."}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{type:"text",value:q,onChange:a=>de(a.target.value),onKeyPress:a=>a.key==="Enter"&&Ya(q),placeholder:":  , , , ...",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-brand-purple"}),r.jsx("button",{onClick:()=>Ya(q),disabled:Re||!q.trim(),className:"px-5 py-3 bg-brand-purple text-white rounded-lg font-bold hover:bg-brand-purple/80 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Re?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"})," "]}):""})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:["","",""," "," ",""].map(a=>r.jsx("button",{onClick:()=>{de(a),Ya(a)},disabled:Re,className:"px-3 py-1.5 rounded-full bg-slate-700 text-slate-300 text-xs hover:bg-slate-600 transition-all disabled:opacity-50",children:a},a))}),Re&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),r.jsxs("span",{className:"text-slate-400 text-sm",children:['"',q,'"  ...']})]}),Je&&!Re&&r.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 mb-3",children:r.jsx("p",{className:"text-red-400 text-sm",children:Je})}),Z&&!Re&&r.jsxs("div",{className:"space-y-3 mt-4 pt-4 border-t border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-bold text-slate-100 flex items-center gap-2",children:[r.jsxs("span",{className:"text-brand-purple",children:['"',Z.keyword,'"']}),"  "]}),r.jsx("span",{className:"text-xs text-slate-500",children:(Fx=Z.searchedAt)==null?void 0:Fx.toLocaleString("ko-KR")})]}),(Z.relatedCompaniesCount>0||Z.relatedRealtorsCount>0)&&r.jsxs("div",{className:"flex gap-3 text-xs",children:[Z.relatedCompaniesCount>0&&r.jsxs("span",{className:"px-2 py-1 rounded bg-emerald-500/20 text-emerald-400",children:["  ",Z.relatedCompaniesCount,""]}),Z.relatedRealtorsCount>0&&r.jsxs("span",{className:"px-2 py-1 rounded bg-blue-500/20 text-blue-400",children:["  ",Z.relatedRealtorsCount,""]}),Z.relatedIssuesCount>0&&r.jsxs("span",{className:"px-2 py-1 rounded bg-yellow-500/20 text-yellow-400",children:["  ",Z.relatedIssuesCount,""]})]}),r.jsx("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:Z.summary})}),((Ux=Z.insights)==null?void 0:Ux.length)>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("ul",{className:"space-y-1",children:Z.insights.map((a,c)=>r.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),a]},c))})]}),(($x=Z.salesTips)==null?void 0:$x.length)>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"   "}),r.jsx("ul",{className:"space-y-1",children:Z.salesTips.map((a,c)=>r.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[r.jsxs("span",{className:"text-emerald-400",children:[c+1,"."]}),a]},c))})]}),((zx=Z.actionItems)==null?void 0:zx.length)>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-brand-purple/30",children:[r.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"   "}),r.jsx("ul",{className:"space-y-1",children:Z.actionItems.map((a,c)=>r.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[r.jsx("span",{className:"text-brand-purple",children:""}),a]},c))})]}),((Bx=Z.relatedTopics)==null?void 0:Bx.length)>0&&r.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Z.relatedTopics.map((a,c)=>r.jsx("button",{onClick:()=>{de(a),Ya(a)},className:"px-3 py-1.5 rounded-full bg-slate-700 text-slate-300 text-xs hover:bg-slate-600 transition-all",children:a},c))})]})]})]}),(()=>{var se;const a=z==="all"||!z?null:Number(z),c=a?ie.filter(F=>F.managerId===a):ie,h=a?((se=me.find(F=>F.id===a))==null?void 0:se.name)||"":" ",p=c.filter(F=>F.reaction==="positive"),f=c.filter(F=>F.reaction==="special"),x=c.filter(F=>F.reaction==="neutral"),y=c.filter(F=>F.reaction==="missed"),N=c.map(F=>F.memo||"").filter(F=>F.length>0),w=["","","","","","","",""],M=["","","","","","",""];let T=0,R=0;N.forEach(F=>{w.some(W=>F.includes(W))&&T++,M.some(W=>F.includes(W))&&R++});const B=(()=>{const F=c.length;if(F===0)return{main:"   .   .",suggestion:"    .",analysis:"",encouragement:""};const W=Math.round((p.length+f.length)/F*100),G=Math.round(x.length/F*100),$=Math.round(y.length/F*100);let E="",O="",ae="",he="";return E=`${h} :  ${F}    ${p.length}(${W}%),  ${f.length},  ${x.length}(${G}%),  ${y.length}(${$}%)`,ae=`+: ${p.length+f.length} | : ${x.length} | : ${y.length}`,W>=50?(O="     .",he="   ."):W>=30?(O="     .",he=" ."):W>=10?(O="    .",he=" ."):(O="   .",he="  ."),$>30&&(O+=`  ${$}%    .`),f.length>0&&(O+=`  ${f.length}   .`),{main:E,suggestion:O,analysis:ae,encouragement:he}})(),k=(()=>{const F={:{cafeCount:2596,startupTrend:"+12%",avgRent:" 10~15",competition:" ( 15+)",targetCustomer:"30~40   ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:" 2,596  .   14.1%( 10.0% ).    ",smalltalkTip:"  2,596  .  14.1%  ,   52.6% 3  .     .",brokerMent:",   2,596  .  14%           .",customerMent:",   2,596,  14.1%  .        .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:2135,startupTrend:"+18%",avgRent:" 8~12",competition:"",targetCustomer:"20~30 MZ  ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:" 2,135  2.   18% .      2~3",smalltalkTip:"  2,135  2.   18%       2~3.    .",brokerMent:",               .     .",customerMent:",       2~3.          .",sourceUrl:"https://eventmoa.kr/2024%EB%85%84-%EC%84%9C%EC%9A%B8-%EC%B9%B4%ED%8E%98-%EC%8B%9C%EC%9E%A5-%ED%98%84%ED%99%A9/",sourceName:"2024     ( 2,135)"},:{cafeCount:1850,startupTrend:"+8%",avgRent:" 12~18",competition:"",targetCustomer:"30~50   ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:"   12~18   . /      ",smalltalkTip:"   12~18   . /     1.5  .",brokerMent:",    1.5  .              .",customerMent:",    1.5  .     ,  ,  .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:1720,startupTrend:"+15%",avgRent:" 8~12",competition:"",targetCustomer:"30~40  ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:"  .    40% . /   ",smalltalkTip:"       40% .     2        .",brokerMent:",        .             .",customerMent:",        40% . /       .",sourceUrl:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",sourceName:"IN:     "},:{cafeCount:1450,startupTrend:"+22%",avgRent:" 6~10",competition:"",targetCustomer:"20~40 ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:"  22%  .   .   1~2  ",smalltalkTip:"   22%  .      1~2 .  6     .",brokerMent:",      1~2 .              .",customerMent:",   .    ,   ,   .     .",sourceUrl:"https://www.kgnews.co.kr/news/article.html?no=822924",sourceName:":    "}," ":{cafeCount:1200,startupTrend:"+10%",avgRent:" 6~9",competition:"",targetCustomer:"30~50 ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:"IT .      .  2~5 ",smalltalkTip:" IT   .      ,  2~5 . / .",brokerMent:",  IT    .              .",customerMent:",  IT  .        .",sourceUrl:"https://blog.opensurvey.co.kr/trendreport/cafe-2024/",sourceName:":    2024"}," ":{cafeCount:850,startupTrend:"+25%",avgRent:" 4~7",competition:"",targetCustomer:"20~30  ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:" 12 , 2025     ",smalltalkTip:"  12  .     50% ( 4~7)   .        .",brokerMent:",   12     .             .",customerMent:",   12      .   ,   ,   .    .",sourceUrl:"https://www.bizhankook.com/bk/article/29822",sourceName:":    "}," ":{cafeCount:980,startupTrend:"+20%",avgRent:" 5~8",competition:"",targetCustomer:" + ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:" (7~8)    3.     2~3 ",smalltalkTip:"  (7~8)   3.    2~3  .  6    .",brokerMent:",   /   3.              .",customerMent:",   (7~8)   3.  6    .",sourceUrl:"https://gyver.co.kr/cafe-startup-market-analysis/",sourceName:" : 2025   "}," ":{cafeCount:620,startupTrend:"+15%",avgRent:" 3~5",competition:"",targetCustomer:" + ",teamPositive:c.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:c.filter(O=>(O.address||"").includes("")).length,issue:"  3~5   70% .   (12~2, 6~8)  50% ",smalltalkTip:"   3~5   70% .    (12~2, 6~8)  50% .",brokerMent:",      50% .              .",customerMent:",    (12~2, 6~8)  50% .      .",sourceUrl:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",sourceName:"KB:   "}},W=Object.keys(F).map(O=>{const ae=F[O],he=ae.teamPositive*10+ae.teamTotal*2,il=parseInt(ae.startupTrend)||0;return{region:O,...ae,score:he+il,category:O.includes("")&&!O.includes("")?"":O.includes("")?"":""}}).sort((O,ae)=>ae.score-O.score),G=tr%W.length,$=W[G],E=[];return $.teamPositive>0&&E.push(`   ${$.teamPositive}`),parseInt($.startupTrend)>=15&&E.push(`   ${$.startupTrend} `),$.competition===""&&E.push("  "),{...$,aiReason:E.length>0?E:["   "],totalCount:W.length,currentIndex:G+1}})();return r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-4 border border-slate-700/30",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-xl"}),"     "]}),r.jsx("div",{className:"bg-transparent rounded-xl p-4 mb-4 border border-slate-700/50",children:r.jsxs("div",{className:"flex items-center justify-center gap-8",children:[r.jsxs("div",{className:"relative w-32 h-32",children:[r.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:(()=>{const F=Math.max(c.length,1),W=[{value:p.length,color:"#10b981"},{value:f.length,color:"#f43f5e"},{value:x.length,color:"#f97316"},{value:y.length,color:"#eab308"}];let G=0;return W.map(($,E)=>{const O=$.value/F*100,ae=`${O} ${100-O}`,he=-G;return G+=O,r.jsx("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",strokeWidth:"3.5",stroke:$.color,strokeDasharray:ae,strokeDashoffset:he},E)})})()}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:c.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",p.length," (",Math.round(p.length/Math.max(c.length,1)*100),"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",f.length," (",Math.round(f.length/Math.max(c.length,1)*100),"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",x.length," (",Math.round(x.length/Math.max(c.length,1)*100),"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",y.length," (",Math.round(y.length/Math.max(c.length,1)*100),"%)"]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:p.length}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg border border-rose-500/30 bg-rose-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-rose-400",children:f.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg border border-orange-500/30 bg-orange-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-400",children:x.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400",children:y.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),r.jsx("div",{className:"space-y-3",children:qa?r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),r.jsx("span",{className:"text-slate-400 text-sm",children:"AI  ..."}),Je&&r.jsx("span",{className:"text-yellow-400 text-xs",children:Je})]}):Je&&!Tt?r.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[r.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"  "}),r.jsx("p",{className:"text-slate-300 text-sm",children:Je}),r.jsx("button",{onClick:()=>We(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:""})]}):Tt?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:Tt.comment})}),Tt.analysis&&r.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[r.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"AI "}),r.jsx("p",{className:"text-sm text-slate-300",children:Tt.analysis})]}),r.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[r.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:"AI  "}),r.jsx("p",{className:"text-sm text-slate-300",children:Tt.suggestion})]}),Tt.encouragement&&r.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:Tt.encouragement})}),qt&&r.jsxs("p",{className:"text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[" : ",qt.toLocaleString("ko-KR")]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:B.main})}),B.analysis&&r.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[r.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:B.analysis})]}),r.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[r.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:""}),r.jsx("p",{className:"text-sm text-slate-300",children:B.suggestion})]}),r.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:B.encouragement})})]})})]}),N.length>0&&r.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl"}),"   (",N.length,")"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-500/10",children:[r.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-400",children:T}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-slate-700/50",children:[r.jsx("div",{className:"text-lg sm:text-xl font-bold text-slate-400",children:R}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("div",{className:"space-y-2",children:(()=>{const F=c.filter($=>$.reaction==="positive"),W=c.filter($=>$.reaction==="negative"),G=c.filter($=>!$.reaction||$.reaction==="neutral");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-emerald-400",children:" "}),r.jsxs("span",{className:"text-slate-300",children:[F.length," "]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-rose-400",children:" "}),r.jsxs("span",{className:"text-slate-300",children:[W.length," "]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-slate-400",children:""}),r.jsxs("span",{className:"text-slate-300",children:[G.length," "]})]})]})})()})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"  "}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold min-w-[60px]",children:""}),r.jsx("span",{className:"text-slate-300",children:'    ("  .  OOO.")'})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 font-bold min-w-[60px]",children:"1"}),r.jsx("span",{className:"text-slate-300",children:"    (   ,   )"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-yellow-400 font-bold min-w-[60px]",children:"1"}),r.jsx("span",{className:"text-slate-300",children:'     ("      ?")'})]})]})]}),T>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"    "}),r.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"     .   :"}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:" 1        "}),r.jsx("li",{children:" 2    "}),r.jsx("li",{children:"     "})]})]}),k&&r.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"    "}),r.jsx("p",{className:"text-sm text-slate-300",children:k.issue||"   ."}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"   1    ."})]})]})]}),r.jsxs("div",{className:"card p-4 border border-slate-700 bg-transparent",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-xl"})," AI  ",r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-medium ml-2",children:" "}),r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-700 text-slate-400 text-xs font-normal ml-1",children:"2024 "})]}),r.jsxs("div",{className:"flex gap-1 p-1 bg-slate-800 rounded-lg",children:[r.jsx("button",{onClick:()=>Vr("single"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${Wr==="single"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""}),r.jsx("button",{onClick:()=>Vr("list"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${Wr==="list"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"  (: , , )",value:nr,onChange:F=>Hr(F.target.value),className:"input-premium flex-1 text-sm"}),r.jsx("button",{onClick:()=>{if(!nr.trim())return;const W=["","","","",""," "," "," "," "].findIndex(G=>G.includes(nr.trim()));W>=0?(Rn(W),Vr("single"),Hr("")):alert("   .")},className:"btn-premium bg-brand-purple text-white px-4",children:""})]})}),Wr==="single"?r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"border border-slate-700/30 rounded-xl p-4 bg-transparent",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-brand-purple/20 text-brand-purple",children:k.category}),r.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:k.region})]}),r.jsxs("span",{className:"text-xs text-slate-500",children:[k.currentIndex,"/",k.totalCount]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-slate-700/30 mb-3",children:[r.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"AI    "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:k.aiReason&&k.aiReason.map((F,W)=>r.jsx("span",{className:"px-2 py-1 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:F},W))})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[k.cafeCount||"-",""]}),r.jsx("div",{className:"text-xs text-slate-400",children:"  "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsx("div",{className:"text-lg font-bold text-emerald-400",children:k.startupTrend||"-"}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsx("div",{className:"text-lg font-bold text-yellow-400",children:k.avgRent||"-"}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsx("div",{className:"text-lg font-bold text-orange-400",children:k.competition||"-"}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),(k.teamTotal>0||k.teamPositive>0)&&r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 mb-3 cursor-pointer hover:bg-emerald-500/20 transition-all",onClick:()=>Td(k.region),children:[r.jsxs("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:["   ",r.jsx("span",{className:"text-slate-500",children:"(  )"})]}),r.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:k.teamTotal||0}),r.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-400",children:k.teamPositive||0}),r.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),k.teamTotal>0&&r.jsxs("div",{className:"text-center",children:[r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-brand-purple",children:[Math.round(k.teamPositive/k.teamTotal*100)||0,"%"]}),r.jsx("span",{className:"text-xs text-slate-400 block",children:""})]})]})]})]}),k.issue&&r.jsxs("div",{className:"p-4 rounded-xl border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),r.jsx("p",{className:"text-sm text-slate-200",children:k.issue})]}),k.targetCustomer&&r.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/30 bg-blue-500/5",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-200",children:k.targetCustomer})]}),k.brokerMent&&r.jsxs("div",{className:"p-4 rounded-xl border border-emerald-500/30 bg-emerald-500/5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{onClick:F=>{const W=F.currentTarget;navigator.clipboard.writeText((Yr==null?void 0:Yr.brokerMent)||k.brokerMent),W.innerText="",W.classList.add("text-emerald-400"),setTimeout(()=>{W.innerText="",W.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-200 leading-relaxed",children:['"',(Yr==null?void 0:Yr.brokerMent)||k.brokerMent,'"']}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"    .   ."})]}),k.sourceUrl&&r.jsxs("a",{href:k.sourceUrl,target:"_blank",rel:"noopener",className:"flex items-center justify-between p-3 rounded-xl border border-slate-700/30 hover:bg-brand-purple/10 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-brand-purple"}),r.jsxs("span",{className:"text-sm text-brand-purple font-medium",children:[": ",k.sourceName||""]})]}),r.jsx("span",{className:"text-slate-500",children:""})]}),r.jsx("button",{onClick:()=>Rn(F=>F+1),className:"w-full py-3 rounded-xl bg-brand-purple/20 hover:bg-brand-purple/30 border border-slate-600 text-brand-purple font-medium transition-all",children:"    "})]}):r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:["","","","",""," "," "," "," "].map((F,W)=>{const G=F.includes("")&&!F.includes(""),$=F.includes(""),E=G?"":$?"":"";return r.jsx("div",{onClick:()=>{Rn(W),Vr("single")},className:"p-3 rounded-lg border border-slate-700/30 hover:border-slate-600 bg-transparent cursor-pointer transition-all",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-brand-purple/20 text-brand-purple",children:E}),r.jsx("span",{className:"text-sm font-medium text-slate-200",children:F})]}),r.jsx("span",{className:"text-slate-500",children:""})]})},W)})})]}),r.jsxs("div",{className:"card p-4 border-l-4 border-yellow-500",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl"}),"   (",ue.length,")"]}),ue.length===0?r.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-500",children:[r.jsx("p",{className:"mb-2",children:"   ."}),r.jsx("p",{className:"text-xs",children:"      ."})]}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:ue.slice(0,10).map((F,W)=>r.jsxs("div",{className:"p-3 rounded-lg bg-transparent hover:bg-slate-700/50 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-400",children:F.||F.region||""}),r.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-600 text-slate-300",children:F.||F.type||""})]}),r.jsx("p",{className:"text-sm text-slate-200 font-medium",children:F.||F.title}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[F.||F.source,"  ",F.||F.date]})]},F.id||W))})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-4 text-lg",children:[" ",r.jsx("span",{className:"text-xs text-slate-500 ml-2 font-normal",children:"   "})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-rose-400",children:"  14.1% ( )"}),r.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"  52.6% 3  "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'" "   . "       " .'})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-orange-400",children:"   2 "}),r.jsx("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:" 3,200+,  2,500+   "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'"   ,   15~50 5  900.   0."'})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-blue-400",children:"   "}),r.jsx("a",{href:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"KB:   +    "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'"   ,  ,   .       ."'})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-400",children:"    1 "}),r.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:", ,      "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'"   ,            ."'})]})]})]}),r.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'  " "   .  "  " .      .'})]})]}),yf&&(()=>{const F=yf,W=ie.filter($=>($.address||"").includes(F)),G=za?W.filter($=>($.name||"").toLowerCase().includes(za.toLowerCase())||($.address||"").toLowerCase().includes(za.toLowerCase())):W;return r.jsx("div",{className:"modal-overlay",onClick:()=>{Td(null),Rd("")},children:r.jsxs("div",{className:"modal-content max-w-lg",onClick:$=>$.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-100",children:[F,"   (",W.length,")"]}),r.jsx("button",{type:"button",onClick:()=>{Td(null),Rd("")},className:"text-slate-400 hover:text-white text-xl",children:""})]}),r.jsx("input",{type:"text",placeholder:"/ ",value:za,onChange:$=>Rd($.target.value),className:"input-premium w-full mb-4"}),r.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:G.length===0?r.jsx("p",{className:"text-center text-slate-500 py-4",children:"   ."}):G.map($=>{const E=tt[$.reaction]||tt.neutral;return r.jsxs("div",{className:"p-3 rounded-lg border border-slate-700 bg-slate-800/50",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:$.name}),r.jsx("p",{className:"text-xs text-slate-400",children:$.address})]}),r.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:E.bg+"30",color:E.bg},children:E.label})]}),$.memo&&r.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[": ",$.memo]})]},$.id)})})]})})})(),Mn&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>vf(null),children:r.jsxs("div",{className:"bg-slate-800 rounded-2xl max-w-[95vw] sm:max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-slate-600",onClick:F=>F.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-slate-800 p-4 border-b border-slate-600 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-bold text-lg text-white",children:[Mn==="specialty"&&"   ",Mn==="lowcost"&&"   ",Mn==="differentiation"&&"  ",Mn==="delivery"&&"/  "]}),r.jsx("button",{type:"button",onClick:()=>vf(null),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),r.jsxs("div",{className:"p-4 space-y-3 sm:space-y-4",children:[Mn==="specialty"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:" ?"}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:" SCA()  80    "}),r.jsx("li",{children:" , ,    "}),r.jsx("li",{children:"      (  5,000~8,000)"})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:""}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"       "}),r.jsx("li",{children:"  ,     "}),r.jsx("li",{children:"  ,      "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),r.jsx("p",{className:"text-xs text-slate-400",children:"  ,     :"}),r.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[r.jsx("li",{children:" (aT)   "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"    "})]})]})]}),Mn==="lowcost"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"  1,500~2,000  "}),r.jsx("li",{children:"     "}),r.jsx("li",{children:"  : , ,  "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-rose-400 font-semibold mb-2",children:""}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"       "}),r.jsx("li",{children:" ,    "}),r.jsx("li",{children:"    "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),r.jsx("p",{className:"text-xs text-slate-400",children:" ,     :"}),r.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[r.jsx("li",{children:"   (franchise.ftc.go.kr)"}),r.jsx("li",{children:"    "})]})]})]}),Mn==="differentiation"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-emerald-400 font-semibold mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"    (, )"}),r.jsx("li",{children:"   (, )"}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:" "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:" SNS  (,  )"}),r.jsx("li",{children:"   (, )"}),r.jsx("li",{children:"  "})]})]})]}),Mn==="delivery"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"/"}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:" : , ,  "}),r.jsx("li",{children:"      "}),r.jsx("li",{children:"     "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"     (   )"}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   vs   "})]})]})]})]})]})})]})})(),r.jsxs("div",{className:"card p-4 border-2 border-rose-500/30",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-xl"}),"    (  )"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{onClick:()=>Ld(On==="closure"?null:"closure"),className:"p-4 rounded-xl border border-rose-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-rose-400 font-bold",children:"  "}),r.jsx("span",{className:"text-2xl font-black text-rose-400 ml-3",children:"14.1%"})]}),r.jsx("span",{className:"text-slate-500 text-lg",children:On==="closure"?"":""})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (2018 ,  10.0% )"}),r.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"   3     "'})]}),On==="closure"&&r.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation();const c=a.currentTarget;navigator.clipboard.writeText(",     ?      .       .      ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",     ?  ',r.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),"    .       . ",r.jsx("span",{className:"text-emerald-400 font-semibold",children:"   "}),'  ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:" "}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation();const c=a.currentTarget;navigator.clipboard.writeText("  5    (/ ), /   ,      "),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:["  ",r.jsx("span",{className:"text-blue-400 font-semibold",children:"5   "})," (/ ), /   ,      "]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/30",children:[r.jsx("p",{className:"text-xs text-purple-400 font-semibold mb-2",children:"  TOP 3 ( )"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"1:  "}),r.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"2:   "}),r.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"3:  "})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"  :   +  "})]}),r.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:":   14%,   "})]}),r.jsxs("div",{onClick:()=>Ld(On==="survival"?null:"survival"),className:"p-4 rounded-xl border border-blue-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-blue-400 font-bold",children:"  "}),r.jsx("span",{className:"text-lg font-bold text-blue-400 ml-2",children:" 1,050"}),r.jsx("span",{className:"text-slate-500 mx-2",children:"(10  1 )"})]}),r.jsx("span",{className:"text-slate-500 text-lg",children:On==="survival"?"":""})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (   3,475 1/3)"}),r.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"     "'})]}),On==="survival"&&r.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation();const c=a.currentTarget;navigator.clipboard.writeText(",     1,050.  87.  .     ,       ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',r.jsx("span",{className:"text-emerald-400 font-semibold",children:" 1,050"}),".  87.  .   ",r.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),'  ,       ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation();const c=a.currentTarget;navigator.clipboard.writeText(",     1,050.   3,475 1/3.     .     ,  ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',r.jsx("span",{className:"text-blue-400 font-semibold",children:" 1,050"}),".   3,475 1/3.     .    ",r.jsx("span",{className:"text-blue-400 font-semibold",children:" , "}),' ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:[r.jsx("p",{className:"text-xs text-cyan-400 font-semibold mb-2",children:"   "}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[r.jsx("span",{children:"  500m   "}),r.jsx("span",{children:"  "}),r.jsx("span",{children:"   "}),r.jsx("span",{children:"   "})]})]}),r.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:"IN:      "})]}),r.jsxs("div",{onClick:()=>Ld(On==="royalty"?null:"royalty"),className:"p-4 rounded-xl border border-yellow-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-yellow-400 font-bold",children:"  "}),r.jsx("span",{className:"text-2xl font-black text-yellow-400 ml-3",children:"6,900~1.3"})]}),r.jsx("span",{className:"text-slate-500 text-lg",children:On==="royalty"?"":""})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    (/ )"}),r.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"    "'})]}),On==="royalty"&&r.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation();const c=a.currentTarget;navigator.clipboard.writeText(",    . 1 15 ,   .      .         ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",    . ',r.jsx("span",{className:"text-emerald-400 font-semibold",children:"1 15 ,  "}),' .      .         ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation();const c=a.currentTarget;navigator.clipboard.writeText(",   6,900~1.3.    .        ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",   ',r.jsx("span",{className:"text-blue-400 font-semibold",children:"6,900~1.3"}),'.    .        ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[r.jsx("span",{children:"  : 6,900"}),r.jsx("span",{children:"  :  15"}),r.jsx("span",{children:"  : 1.3"}),r.jsx("span",{children:"  :  25"})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" , ,   / :   "})]})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:" vs   "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-600",children:[r.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),r.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),r.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),r.jsxs("tbody",{className:"text-slate-300",children:[r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400 (15)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"2~5 ( )"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:""})]})]})]})}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"~   "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  150 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"6,900~1"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 300 +  150 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"5,500~8,000"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  200 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"6,000~9,000"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 1,000 +  300 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"8,000~1.3"})]})]}),r.jsx("a",{href:"https://franchise.ftc.go.kr/mnu/00013/program/userRqst/list.do",target:"_blank",rel:"noopener",className:"flex items-center justify-center gap-2 mt-3 p-3 rounded-lg border border-brand-purple/50 bg-brand-purple/10 hover:bg-brand-purple/20 transition-all",children:r.jsx("span",{className:"text-sm text-brand-purple font-medium",children:"     "})}),r.jsx("p",{className:"text-xs text-slate-500 mt-3 text-center",children:"*    , ,    ."})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl"}),"    ",r.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full",children:""})]})}),r.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"     AI      ."}),r.jsxs("div",{className:"p-4 rounded-xl bg-transparent border border-slate-700 mb-4",children:[r.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"    "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:Fd,onChange:a=>Rf(a.target.value),className:"w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm",children:[r.jsx("option",{value:"",children:" ?"}),r.jsx("option",{value:"broker",children:"  "}),r.jsx("option",{value:"broker-followup",children:" "}),r.jsx("option",{value:"franchise",children:"   "})]}),r.jsx("textarea",{value:Ud,onChange:a=>Pf(a.target.value),placeholder:`    .

:     .   .`,className:"w-full px-3 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm resize-none h-24"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>$d("success"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Ga==="success"?"bg-emerald-500 text-white":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30"}`,children:"  "}),r.jsx("button",{onClick:()=>$d("fail"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Ga==="fail"?"bg-rose-500 text-white":"bg-rose-500/20 text-rose-400 border border-rose-500/30 hover:bg-rose-500/30"}`,children:" "})]}),r.jsx("button",{type:"button",onClick:()=>{if(!Fd||!Ud||!Ga){alert(", ,   .");return}const a={id:Date.now(),situation:Fd,memo:Ud,result:Ga,timestamp:new Date().toISOString(),managerId:n==null?void 0:n.managerId,managerName:(n==null?void 0:n.name)||""};re.ref(`teamFeedbacks/${a.id}`).set(a),Rf(""),Pf(""),$d(null),alert(" !")},className:"w-full px-4 py-3 rounded-lg bg-brand-purple text-white font-semibold hover:bg-brand-purple/80 transition-all",children:" "})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-300 font-semibold",children:"   ( 7)"}),ai&&ai.length>0?ai.slice(0,5).map((a,c)=>r.jsx("div",{className:`p-3 rounded-lg ${a.result==="success"?"bg-emerald-500/10 border border-emerald-500/30":"bg-rose-500/10 border border-rose-500/30"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs font-semibold ${a.result==="success"?"text-emerald-400":"text-rose-400"}`,children:a.result==="success"?"  ":"  "}),r.jsx("p",{className:"text-sm text-slate-200 mt-1",children:a.situation||" "}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:a.memo||" "})]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${a.result==="success"?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:a.result==="success"?"":""})]})},c)):r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700 bg-slate-800/30 text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"   ."}),r.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"   ."})]}),ai&&ai.length>=3&&r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),r.jsx("p",{className:"text-sm text-slate-300",children:"    ..."}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" 5   AI  ."})]})]})]})]})]})]}),P==="calendar"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>Zf(new Date(fs.getFullYear(),fs.getMonth()-1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""}),r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[fs.getFullYear()," ",fs.getMonth()+1,""]}),r.jsx("button",{onClick:()=>Zf(new Date(fs.getFullYear(),fs.getMonth()+1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""})]}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 mb-2",children:["","","","","","",""].map((a,c)=>r.jsx("div",{className:`text-center text-sm font-bold py-2 ${c===0?"text-rose-600":c===6?"text-primary-600":"text-slate-200"}`,children:a},a))}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1",children:(()=>{const a=fs.getFullYear(),c=fs.getMonth(),h=new Date(a,c,1).getDay(),p=new Date(a,c+1,0).getDate(),f=_s(),x=[];for(let y=0;y<h;y++)x.push(r.jsx("div",{className:"h-24 sm:h-28"},`empty-${y}`));for(let y=1;y<=p;y++){const N=`${a}-${String(c+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,w=Fe.filter(B=>B.date===N),M=_t.filter(B=>B.date===N),T=[...w.map(B=>({...B,itemType:"route"})),...M.map(B=>({...B,itemType:"event"}))];T.sort((B,te)=>(B.time||"00:00").localeCompare(te.time||"00:00"));const R=N===f,A=new Date(a,c,y).getDay();x.push(r.jsxs("div",{className:`h-24 sm:h-28 p-1 border rounded-lg overflow-hidden cursor-pointer transition-all hover:shadow-md ${R?"bg-slate-700 border-primary-300":"border-slate-600 hover:border-primary-300"}`,onClick:()=>{ou(N),Un({title:"",time:"09:00",memo:""}),el(null),ar(!0)},children:[r.jsx("div",{className:`text-sm font-bold mb-1 ${A===0?"text-rose-600":A===6?"text-primary-600":"text-slate-200"}`,children:y}),r.jsxs("div",{className:"space-y-0.5 overflow-y-auto max-h-14",children:[T.slice(0,3).map((B,te)=>{var k,se,F,W;if(B.itemType==="route"){const G=me.find($=>$.id===B.managerId);return r.jsxs("div",{onClick:$=>{$.stopPropagation(),Fn(B)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight",style:{background:(G==null?void 0:G.color)||"#888"},title:`${(k=B.time)==null?void 0:k.slice(0,5)} ${B.name}`,children:[(se=B.time)==null?void 0:se.slice(0,5)," ",B.name]},`r-${B.id}`)}else{const G=me.find(E=>E.id===B.managerId),$=B.managerId&&G?G.color:"#6b7280";return r.jsxs("div",{onClick:E=>{E.stopPropagation(),yi(B)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight cursor-pointer hover:opacity-80",style:{background:$},title:`${(F=B.time)==null?void 0:F.slice(0,5)} ${B.title}`,children:[(W=B.time)==null?void 0:W.slice(0,5)," ",B.title]},`e-${B.id}`)}}),T.length>3&&r.jsxs("div",{className:"text-xs text-slate-200",children:["+",T.length-3,""]})]})]},y))}return x})()})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("p",{className:"font-bold text-slate-200 mb-3",children:"  "}),(()=>{const a=new Date,c=new Date(a);c.setDate(a.getDate()-a.getDay());const h=new Date(c);h.setDate(c.getDate()+6);const p=Fe.filter(y=>{const N=new Date(y.date);return N>=c&&N<=h}).map(y=>({...y,itemType:"route"})),f=_t.filter(y=>{const N=new Date(y.date);return N>=c&&N<=h}).map(y=>({...y,itemType:"event"})),x=[...p,...f].sort((y,N)=>{const w=new Date(y.date+" "+(y.time||"00:00")),M=new Date(N.date+" "+(N.time||"00:00"));return w-M});return x.length===0?r.jsx("p",{className:"text-center text-slate-200 py-4",children:"   "}):r.jsx("div",{className:"space-y-2",children:x.map(y=>{var N;if(y.itemType==="route"){const w=me.find(T=>T.id===y.managerId),M=y.status==="completed";return r.jsxs("div",{onClick:()=>Fn(y),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md ${M?"bg-emerald-900/30":"bg-slate-700"}`,children:[r.jsxs("div",{className:"text-center min-w-[40px]",children:[r.jsx("p",{className:"text-xs text-slate-200",children:new Date(y.date).toLocaleDateString("ko-KR",{weekday:"short"})}),r.jsx("p",{className:"font-bold text-slate-100",children:y.date.slice(8)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:y.name}),r.jsxs("p",{className:"text-xs text-slate-200",children:[y.time||"","  ",((N=y.stops)==null?void 0:N.length)||0,""]})]}),w&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white",style:{background:w.color},children:w.name})]},`r-${y.id}`)}else return r.jsxs("div",{onClick:()=>{ou(y.date),Un({title:y.title,time:y.time,memo:y.memo||""}),el(y.id),ar(!0)},className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md bg-purple-50",children:[r.jsxs("div",{className:"text-center min-w-[40px]",children:[r.jsx("p",{className:"text-xs text-slate-200",children:new Date(y.date).toLocaleDateString("ko-KR",{weekday:"short"})}),r.jsx("p",{className:"font-bold text-slate-100",children:y.date.slice(8)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:y.title}),r.jsxs("p",{className:"text-xs text-slate-200 break-words",children:[y.time||""," ",y.memo?` ${y.memo}`:""]})]}),r.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white bg-purple-500",children:""})]},`e-${y.id}`)})})})()]})]}),P==="route"&&r.jsx("div",{children:r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("p",{className:"text-sm text-slate-200 font-bold",children:ir?"  ":" "}),ir&&r.jsx("span",{className:"text-xs text-primary-600 bg-slate-700 px-2 py-1 rounded",children:" "})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3",children:[r.jsx("input",{type:"text",placeholder:" (:  )",value:xi,onChange:a=>gi(a.target.value),className:"input-premium text-sm col-span-2"}),r.jsx("div",{className:"relative",onClick:()=>{var a,c;return(c=(a=document.getElementById("routeDateInput")).showPicker)==null?void 0:c.call(a)},children:r.jsx("input",{id:"routeDateInput",type:"date",value:xo,onChange:a=>Jr(a.target.value),className:"input-premium text-sm w-full cursor-pointer"})}),r.jsx("div",{className:"relative",onClick:()=>{var a,c;return(c=(a=document.getElementById("routeTimeInput")).showPicker)==null?void 0:c.call(a)},children:r.jsx("input",{id:"routeTimeInput",type:"time",value:go,onChange:a=>fi(a.target.value),className:"input-premium text-sm w-full cursor-pointer"})})]}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:r.jsxs("select",{value:au||"",onChange:a=>ps(Number(a.target.value)||null),className:"select-premium text-sm",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]})})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("div",{className:"flex justify-between items-center mb-3",children:r.jsx("p",{className:"font-bold text-slate-200",children:" "})}),r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex gap-2 flex-1",children:[r.jsx("input",{type:"text",placeholder:", ,  ",value:tl,onChange:a=>hu(a.target.value),onKeyPress:a=>a.key==="Enter"&&Du(),className:"input-premium text-sm",style:{flex:6}}),r.jsx("input",{type:"text",placeholder:" ()",value:mu,onChange:a=>pu(a.target.value),onKeyPress:a=>a.key==="Enter"&&Du(),className:"input-premium text-sm",style:{flex:4}})]}),r.jsx("button",{onClick:Du,disabled:ex,className:"btn-premium bg-slate-600 text-white text-sm px-4",children:ex?"...":""})]}),$n.length>0&&r.jsxs("div",{className:"mt-2 p-2 bg-slate-700 rounded-lg border border-primary-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-xs text-primary-600 font-bold",children:["  (",$n.length,"/10)"]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>{_i([]),_x()},className:"text-xs text-rose-600",children:" "})})]}),r.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:$n.map((a,c)=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-700 rounded px-2 py-1",children:[r.jsxs("span",{className:"text-xs text-slate-200 truncate flex-1",children:[c+1,". ",a.name]}),r.jsx("button",{onClick:()=>vw(a.id),className:"ml-2 text-rose-600 hover:text-rose-600 text-xs",children:""})]},a.id))}),r.jsxs("button",{onClick:yw,className:"w-full mt-2 py-2 bg-primary-500 text-white rounded-lg text-sm font-bold",children:[$n.length,"   "]})]}),r.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"       "})]})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("p",{className:"font-bold text-slate-200 mb-3",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("select",{value:vu,onChange:a=>tx(a.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"",children:" "}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsx("optgroup",{label:"",children:r.jsx("option",{value:"",children:""})}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsx("input",{type:"number",placeholder:" (: 10)",value:ji,onChange:a=>Tj(a.target.value),className:"input-premium text-sm",min:"1",max:"50"})]}),r.jsx("input",{type:"text",placeholder:" /   (: , , OO)",value:wi,onChange:a=>{nx(a.target.value),a.target.value&&tx("")},className:"input-premium text-sm"}),r.jsx("button",{onClick:()=>{const a=wi||vu;if(!a)return alert("   ");if(!ji||ji<1)return alert("   (1~50)");const c=x=>{if(!x)return null;const y=x.split(/\s+/);for(const N of y)if((N.endsWith("")||N.endsWith("")||N.endsWith(""))&&N.length>=2&&N.length<=10)return N;return null},h=a.replace(/\(.*\)/,""),p=or.filter(x=>{if(x.regions&&x.regions[h]||c(x.address)===h)return!0;if(wi){const N=wi.toLowerCase(),w=(x.name||x.officeName||x.realtorName||"").toLowerCase(),M=(x.address||"").toLowerCase();if(w.includes(N)||M.includes(N))return!0}return!1}).filter(x=>!Au(x,ie)).filter(x=>!be.some(y=>y.name===(x.realtorName||x.officeName||x.name))).sort((x,y)=>(y.listings||y.listingCount||1)-(x.listings||x.listingCount||1)).slice(0,Math.min(Number(ji),200));if(p.length===0)return alert(" /    .");const f=p.map(x=>({id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:x.realtorName||x.officeName||x.name,address:x.address||"",phone:x.cellPhone||x.phone||"",lat:null,lng:null,visited:!1,listings:x.listings||x.listingCount||1}));Rt(x=>[...x,...f]),nx(""),alert(""+f.length+"   !")},disabled:!vu&&!wi||!ji,className:"w-full btn-premium bg-teal-900/300 text-white py-3 font-bold disabled:opacity-50",children:"  "}),r.jsx("p",{className:"text-xs text-slate-400",children:"*  ,    "})]})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-slate-200",children:["  (",be.length,")"]}),ju&&r.jsxs("p",{className:"text-xs text-primary-400 mt-1",children:[" ",ju.distance,"km   ",ju.duration,""]})]}),r.jsxs("div",{className:"flex gap-2",children:[be.length>=2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:Nw,className:"text-xs text-primary-600 font-bold",children:""}),r.jsx("button",{type:"button",onClick:_w,className:"text-xs text-primary-600 font-bold",children:" "})]}),be.length>0&&r.jsx("button",{type:"button",onClick:()=>{Rt([]),To()},className:"text-xs text-rose-600",children:" "})]})]}),be.length===0?r.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:[r.jsx("p",{className:"text-2xl mb-2"}),r.jsx("p",{className:"text-sm",children:"/ "})]}):r.jsx("div",{className:"space-y-0 max-h-48 overflow-y-auto",children:be.map((a,c)=>{var f;const h=ie.find(x=>{var y;return x.name===a.name||x.address&&a.address&&x.address.includes((y=a.address)==null?void 0:y.split(" ").slice(0,3).join(" "))}),p=h?me.find(x=>x.id===h.managerId):null;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-900 rounded-lg",children:[r.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-teal-500 to-teal-600 text-white flex items-center justify-center font-bold text-xs shadow flex-shrink-0",children:c+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:a.name}),p&&r.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:p.color},children:(f=p.name)==null?void 0:f.slice(0,1)})]}),a.address&&r.jsx("p",{className:"text-xs text-slate-200 break-words",children:a.address}),a.phone&&r.jsx("p",{className:"text-xs text-navy-300",children:a.phone})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[c>0&&r.jsx("button",{type:"button",onClick:()=>jx(c,-1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),c<be.length-1&&r.jsx("button",{type:"button",onClick:()=>jx(c,1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),r.jsx("button",{type:"button",onClick:()=>bw(a.id),className:"w-6 h-6 rounded bg-rose-100 text-rose-600 text-xs",children:""})]})]}),c<be.length-1&&r.jsx("div",{className:"flex items-center pl-3 py-0.5",children:r.jsx("span",{className:"text-primary-600 text-sm",children:""})})]},a.id)})}),(be.length>0||ir)&&r.jsx("div",{className:"mt-3 pt-3 border-t border-slate-600",children:ir?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:Sw,className:"flex-1 btn-premium btn-outline py-3 font-bold",children:""}),r.jsx("button",{type:"button",onClick:Ix,className:"flex-1 btn-premium btn-gold py-3 font-bold",children:" "})]}):r.jsx("button",{type:"button",onClick:Ix,className:"w-full btn-premium btn-gold py-3 font-bold",children:" "})})]}),r.jsxs("div",{className:"card overflow-hidden",children:[r.jsx("div",{className:"p-3 border-b border-slate-600",children:be.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>Tx(Xr-1),disabled:Xr<=0,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"flex gap-2 transition-transform",style:{transform:`translateX(-${Xr*100}%)`},children:be.map((a,c)=>r.jsxs("button",{onClick:()=>Cw(a,c),className:`flex-shrink-0 w-full px-3 py-2 rounded-lg text-sm font-bold transition-all ${Xr===c?"bg-slate-700 text-white":"bg-gray-100 text-slate-200"}`,children:[c+1,". ",a.name]},a.id))})}),r.jsx("button",{type:"button",onClick:()=>Tx(Xr+1),disabled:Xr>=be.length-1,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{ref:Nu,className:"route-map-container"}),r.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2 z-10",children:[r.jsx("button",{onClick:xw,className:`w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all ${wo?"bg-primary-500 text-white":"bg-slate-600 text-slate-200"}`,title:wo?"GPS ":"GPS "}),wo&&So&&r.jsx("button",{onClick:gw,className:"w-10 h-10 rounded-full bg-slate-600 shadow-lg flex items-center justify-center text-primary-600",title:"  "})]})]})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("p",{className:"font-bold text-slate-200",children:" "}),Fe.length>0&&r.jsx("div",{className:"flex gap-2",children:ro?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{if(sr.length===0)return alert("  .");confirm(`${sr.length}  ?`)&&(sr.forEach(a=>hx(a)),lo([]),Yd(!1),alert("  ."))},className:"px-3 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:[sr.length," "]}),r.jsx("button",{onClick:()=>{Yd(!1),lo([])},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-xs font-bold",children:""})]}):r.jsx("button",{onClick:()=>Yd(!0),className:"px-3 py-1 bg-rose-100 text-rose-600 rounded text-xs font-bold",children:" "})})]}),Fe.length===0?r.jsx("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:r.jsx("p",{className:"text-sm",children:"  "})}):r.jsx("div",{className:"space-y-2",children:Fe.sort((a,c)=>new Date(c.date)-new Date(a.date)).slice(0,50).map(a=>{const c=me.find(y=>y.id===a.managerId),h=(a.stops||[]).filter(y=>y.visited).length,p=(a.stops||[]).length,f=a.status==="completed",x=sr.includes(a.id);return r.jsxs("div",{className:`p-3 rounded-lg ${f?"bg-emerald-900/30":"bg-slate-700"} ${ro&&x?"ring-2 ring-rose-400":""}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[ro&&r.jsx("input",{type:"checkbox",checked:x,onChange:y=>{y.target.checked?lo([...sr,a.id]):lo(sr.filter(N=>N!==a.id))},className:"w-5 h-5 mt-1 accent-rose-500"}),r.jsx("div",{className:`w-9 h-9 rounded-lg text-white flex items-center justify-center font-bold text-sm flex-shrink-0 ${f?"bg-emerald-500":"bg-slate-700"}`,children:""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:a.name||a.date}),r.jsxs("p",{className:"text-xs text-slate-200",children:[a.date," ",a.time||"","  ",h,"/",p,""]}),c&&r.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-bold text-white",style:{background:c.color},children:c.name})]})]}),!ro&&r.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-slate-700/30",children:[r.jsx("button",{type:"button",onClick:()=>Ex(a),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),r.jsx("button",{type:"button",onClick:()=>Fn(a),className:"px-3 py-1 bg-slate-700 rounded text-xs text-slate-200 border font-medium",children:""}),r.jsx("button",{onClick:()=>jw(a),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),!f&&r.jsx("button",{onClick:()=>ww(a),className:"px-3 py-1 bg-emerald-100 rounded text-xs text-emerald-700 font-medium",children:""}),r.jsx("button",{onClick:()=>Zr({type:"route",id:a.id,name:a.name||a.date}),className:"px-3 py-1 bg-rose-100 rounded text-xs text-rose-600 font-medium",children:""})]})]},a.id)})})]})]})}),P==="map"&&r.jsx("div",{children:r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"bg-slate-900 rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"text-amber-800 font-bold text-sm mb-2",children:"  "}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[r.jsxs("span",{className:"text-slate-200",children:[" : ",r.jsx("b",{children:ie.length})]}),r.jsxs("span",{className:"text-emerald-600",children:[" : ",r.jsx("b",{children:ie.filter(a=>a.lat&&a.lng).length})]}),r.jsxs("span",{className:"text-slate-200 cursor-pointer hover:text-primary-600",onClick:()=>ie.filter(a=>!a.lat||!a.lng).length>0&&eo(!0),children:[": ",r.jsx("b",{className:"underline",children:ie.filter(a=>!a.lat||!a.lng).length})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsxs("select",{value:cr,onChange:a=>ix(a.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsxs("select",{value:dr,onChange:a=>ax(a.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"special",children:""}),r.jsx("option",{value:"positive",children:""}),r.jsx("option",{value:"neutral",children:""}),r.jsx("option",{value:"negative",children:" "}),r.jsx("option",{value:"missed",children:""})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"/  (: , )",value:wu,onChange:a=>Lj(a.target.value),onKeyPress:a=>a.key==="Enter"&&bx(),className:"input-premium flex-1 text-sm"}),r.jsx("button",{type:"button",onClick:bx,className:"btn-premium btn-gold text-sm"})]}),r.jsxs("div",{className:"border-t border-slate-600 mt-4 pt-4",children:[r.jsx("p",{className:"text-sm text-slate-200 mb-2 font-bold",children:"   "}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-600 special-blink"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-400"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"})," "]})]}),r.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"      "})]})]}),r.jsx("div",{className:"card overflow-hidden",children:r.jsx("div",{ref:mo,className:"map-container"})})]})}),P==="managers"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsx("button",{type:"button",onClick:()=>no(!0),className:"btn-premium btn-navy text-sm",children:" "})]}),me.map(a=>{const c=ie.filter(E=>E.managerId===a.id),h=Fw(a.id),p=an||(n==null?void 0:n.managerId)===a.id,f=c.filter(E=>E.reaction==="special"),x=c.filter(E=>E.reaction==="positive"),y=c.filter(E=>E.reaction==="neutral"),N=c.filter(E=>E.reaction==="negative"),w=new Date,T=c.filter(E=>E.reaction==="positive"||E.reaction==="special").map(E=>{const O=E.lastVisitDate?new Date(E.lastVisitDate):E.createdAt?new Date(E.createdAt):null,ae=O?Math.floor((w-O)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(ae)?0:ae,dateType:E.lastVisitDate?"":""}}).filter(E=>E.daysPassed>=7).sort((E,O)=>O.daysPassed-E.daysPassed),R=c.filter(E=>E.reaction==="missed").map(E=>{const O=E.createdAt?new Date(E.createdAt):null,ae=O?Math.floor((w-O)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(ae)?0:ae}}).sort((E,O)=>O.daysPassed-E.daysPassed),A=_s(),B=_t.filter(E=>E.date===A&&E.managerId===a.id),te=Fe.filter(E=>E.date===A&&E.managerId===a.id),k=wh(),se=new Date(k.year,k.month,k.day-k.dayOfWeek),F=new Date(k.year,k.month,k.day+(6-k.dayOfWeek)),W=E=>{const O=E.getFullYear(),ae=String(E.getMonth()+1).padStart(2,"0"),he=String(E.getDate()).padStart(2,"0");return`${O}-${ae}-${he}`},G=_t.filter(E=>E.managerId===a.id&&E.date>=W(se)&&E.date<=W(F)&&E.date!==A),$=Fe.filter(E=>E.managerId===a.id&&E.date>=W(se)&&E.date<=W(F)&&E.date!==A);return r.jsxs("div",{className:"card p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl text-white flex items-center justify-center font-bold text-xl shadow-lg",style:{background:`linear-gradient(135deg, ${a.color}, ${a.color}dd)`},children:a.name[0]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:a.name}),r.jsxs("p",{className:"text-sm text-slate-200",children:[" ",c.length,""]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:[h.toLocaleString(),r.jsx("span",{className:"text-sm font-normal",children:""})]}),p&&r.jsx("button",{onClick:()=>so({managerId:a.id,managerName:a.name,currentSales:h}),className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs font-bold hover:bg-emerald-200",children:""})]})})]}),r.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-xl p-4 mb-4",children:[r.jsx("p",{className:"font-bold text-slate-200 text-sm mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-red-200",children:[r.jsx("p",{className:"text-lg font-bold text-rose-600",children:f.length}),r.jsx("p",{className:"text-xs text-red-400",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-green-200",children:[r.jsx("p",{className:"text-lg font-bold text-emerald-600",children:x.length}),r.jsx("p",{className:"text-xs text-green-400",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-orange-500",children:y.length}),r.jsx("p",{className:"text-xs text-orange-400",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-slate-200",children:N.length}),r.jsx("p",{className:"text-xs text-slate-200",children:""})]})]})]}),(B.length>0||te.length>0)&&r.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"font-bold text-primary-600 text-sm mb-2",children:" "}),r.jsxs("div",{className:"space-y-1",children:[te.map(E=>{var O;return r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-primary-600",children:""}),r.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.name," (",((O=E.stops)==null?void 0:O.length)||0,")"]})]},E.id)}),B.map(E=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-primary-600"}),r.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.title]})]},E.id))]})]}),T.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-rose-900/30 border border-rose-200 rounded-xl p-3 mb-2",children:[r.jsxs("span",{className:"font-bold text-rose-700 text-sm",children:["  (",T.length,")"]}),r.jsx("span",{className:"text-xs text-rose-600 ml-2",children:"   7 "})]}),r.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[T.slice(0,10).map(E=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-rose-200 cursor-pointer hover:bg-rose-900/30",onClick:()=>{Xe(E)},children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${E.reaction==="special"?"bg-rose-600":"bg-emerald-500"}`}),r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),r.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[r.jsxs("span",{className:"text-xs text-rose-600 font-bold",children:[E.daysPassed,""]}),r.jsxs("span",{className:"text-xs text-rose-600 ml-1",children:["(",E.dateType,")"]})]})]},E.id)),T.length>10&&r.jsxs("p",{className:"text-xs text-rose-600 text-center",children:["+",T.length-10,""]})]})]}),R.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 mb-2",children:[r.jsxs("span",{className:"font-bold text-amber-600 text-sm",children:["  (",R.length,")"]}),r.jsx("span",{className:"text-xs text-yellow-500 ml-2",children:"  "})]}),r.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[R.slice(0,10).map(E=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-amber-200 cursor-pointer hover:bg-amber-900/30",onClick:()=>{Xe(E)},children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 bg-yellow-500"}),r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),r.jsxs("span",{className:"text-xs text-amber-600 flex-shrink-0 ml-2",children:[E.daysPassed,""]})]},E.id)),R.length>10&&r.jsxs("p",{className:"text-xs text-yellow-400 text-center",children:["+",R.length-10,""]})]})]}),(G.length>0||$.length>0)&&r.jsxs("details",{className:"mb-4",children:[r.jsxs("summary",{className:"bg-slate-700 border border-primary-300 rounded-xl p-3 cursor-pointer",children:[r.jsxs("span",{className:"font-bold text-primary-600 text-sm",children:["    (",G.length+$.length,")"]}),r.jsx("span",{className:"text-xs text-primary-600 ml-2",children:" "})]}),r.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:[...$.map(E=>({...E,type:"route"})),...G.map(E=>({...E,type:"event"}))].sort((E,O)=>E.date.localeCompare(O.date)||(E.time||"").localeCompare(O.time||"")).map((E,O)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm bg-slate-700 p-2 rounded-lg border border-primary-200",children:[r.jsx("span",{className:"text-primary-600",children:E.type==="route"?"":""}),r.jsx("span",{className:"text-xs text-blue-400 font-bold",children:E.date.slice(5)}),r.jsxs("span",{className:"text-blue-800 truncate",children:[E.time||""," ",E.type==="route"?E.name:E.title]})]},O))})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-2",children:[r.jsx("span",{className:"font-bold text-slate-200 text-sm",children:"  "}),p&&r.jsx("button",{type:"button",onClick:()=>{Za(a),ru({:!1,:!1,:!1,:!1})},className:"ml-3 px-3 py-1 bg-rose-500 rounded-lg font-bold text-xs text-white",children:r.jsx("span",{className:"blink-text",children:" "})})]}),r.jsx("div",{className:"bg-slate-700 rounded-xl p-4",children:r.jsx("div",{className:"grid grid-cols-4 gap-2",children:jv.map(E=>{var O,ae;return r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-slate-200 mb-1",children:E}),p?r.jsx("input",{type:"number",value:((O=a.promo)==null?void 0:O[E])||0,onChange:he=>zw(a.id,E,he.target.value),className:"w-full text-center p-2 border rounded-lg text-sm font-bold bg-white text-slate-900"}):r.jsx("p",{className:"font-bold text-slate-100",children:((ae=a.promo)==null?void 0:ae[E])||0})]},E)})})})]})]},a.id)})]}),P==="sales"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4 shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-10 h-10 object-contain"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-white font-bold text-lg",children:"BEANCRAFT"}),r.jsx("p",{className:"text-blue-200 text-xs",children:"   "})]})]}),r.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white text-blue-600 rounded-lg font-bold text-sm hover:bg-blue-50 transition-all flex items-center gap-2",children:"  "})]})}),(()=>{const[a,c]=g.useState(""),[h,p]=g.useState(null),[f,x]=g.useState(!1),y=w=>w?ue.find(T=>{var R,A,B;return((R=T.region)==null?void 0:R.includes(w))||((A=T.title)==null?void 0:A.includes(w))||((B=T.content)==null?void 0:B.includes(w))}):null,N=w=>{const M=or.filter(R=>{var A;return(A=R.address)==null?void 0:A.includes(w)}),T=ie.filter(R=>{var A;return(A=R.address)==null?void 0:A.includes(w)});return{realtorCount:M.length,companyCount:T.length,totalListings:M.reduce((R,A)=>R+(A.listings||0),0)}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:"  "}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:a,onChange:w=>c(w.target.value),placeholder:"  (: , , )",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500"}),r.jsx("button",{onClick:()=>{a.trim()&&(p(a.trim()),x(!0))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:""})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["","","","","","","",""].map(w=>r.jsx("button",{onClick:()=>{c(w),p(w),x(!0)},className:"px-3 py-1.5 bg-slate-700 text-slate-300 rounded-full text-sm hover:bg-slate-600 transition-all",children:w},w))})]}),f&&h&&r.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg flex items-center gap-2",children:[" ",h,"  "]}),r.jsx("button",{onClick:()=>x(!1),className:"text-slate-400 hover:text-slate-200",children:""})]}),(()=>{const w=N(h);return r.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[r.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:w.realtorCount}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:w.companyCount}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:w.totalListings.toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})})(),(()=>{const w=y(h);if(w)return r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  "}),r.jsx("p",{className:"text-slate-200 font-medium mb-1",children:w.title}),r.jsx("p",{className:"text-sm text-slate-300",children:w.content}),w.source&&r.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[": ",w.source]})]});{const T={:" 2,596  .   14.1%.   .",:",   .   .",:"//  .    .",:"IT  .    .   .",:"    .    .",:" .    .    .",:" .   . /   .",:"   2.    ."}[h]||"      .      .";return r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:T})]})}})()]})]})})(),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"  vs   "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-600",children:[r.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),r.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),r.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),r.jsxs("tbody",{className:"text-slate-300",children:[r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"1/15 "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"bg-slate-700/30",children:[r.jsx("td",{className:"py-3 px-2 font-bold text-white",children:"  (5)"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-400 font-bold",children:"1,500~4,500+"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-400 font-bold",children:"1,800+"})]})]})]})}),r.jsxs("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[r.jsx("p",{className:"text-sm text-emerald-400 font-semibold mb-1",children:"   "}),r.jsxs("p",{className:"text-sm text-slate-300",children:["/ 0 5 ",r.jsx("span",{className:"text-emerald-400 font-bold",children:" 900~3,000"})," . //   ."]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"   "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-blue-400",children:" "}),r.jsx("p",{className:"text-xs text-slate-400",children:"   "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:" /  "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-emerald-400",children:""}),r.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:"    "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 border border-yellow-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-yellow-400",children:"/"}),r.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:"   ~"}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-purple-400",children:"/"}),r.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:" //  "}),r.jsx("li",{children:"   "})]})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2 text-lg",children:"   "}),(()=>{const a={};or.forEach(h=>{const p=h.address||"";let f="";p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")?f="":p.includes("")||p.includes("")?f="":p.includes("")||p.includes("")?f="":p.includes("")||p.includes("")?f="":p.includes("")||p.includes("")?f="":p.includes("")||p.includes("")?f="":p.includes("")||p.includes("")?f="":p.includes("")&&(f=""),a[f]||(a[f]={count:0,listings:0}),a[f].count++,a[f].listings+=h.listings||0});const c=Object.entries(a).filter(([h])=>h!=="").sort((h,p)=>p[1].count-h[1].count);return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:or.length.toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-emerald-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:ie.length}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:c.length}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-400",children:or.reduce((h,p)=>h+(p.listings||0),0).toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:c.slice(0,10).map(([h,p])=>r.jsxs("div",{className:"px-3 py-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-200 font-medium",children:h}),r.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:[p.count,""]})]},h))})]})]})})()]}),r.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl p-6 text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" ,  "}),r.jsx("p",{className:"text-slate-300 mb-4",children:"  "}),r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:" "}),r.jsx("a",{href:"tel:1533-4875",className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-all",children:" 1533-4875"})]})]})]}),P==="realtors"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),(()=>{const a=k=>k.listingCount?k.listingCount:k.listings?k.listings:k.articleCounts&&k.articleCounts.total?k.articleCounts.total:0,c=k=>k.name&&(k.name.includes("")||k.name.includes("")||k.name.includes(""))?k.name:k.officeName?k.officeName:k.realtorName?k.realtorName:k.name||"( )",h=k=>k.agentName||k.agent||"",p=k=>k.agentPosition||"",f=k=>{if(!k)return"";if(k.includes("T")){const F=new Date(k);if(!isNaN(F.getTime()))return F.toLocaleDateString("ko-KR")}const se=k.match(/(\d{4})\.\s*(\d{1,2})\.\s*(\d{1,2})/);if(se){const[,F,W,G]=se;return`${F}. ${W}. ${G}.`}return k},x=["","","","","","","","","","","","","","","","",""],y={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},N=k=>{if(!k)return{city:"",district:""};const se=["","","","","","","","","","","","","","","","","","","","","","","","",""],F={:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","",""],:["","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["",""]},W=[{pattern:/(|)?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/(|)?/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?(|)?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/(|)?/,city:""}];let G="";for(const{pattern:O,city:ae}of W)if(O.test(k)){G=ae;break}let $="";const E=k.match(/([-]{1,4})(|)/);if(E){const O=E[1]+E[2];!O.includes("")&&!O.includes("")&&O.length<=5&&($=O)}if($===""&&G===""){for(const O of se)if(new RegExp(`${O}(?!\\S*)\\s|${O}(?!\\S*)$|\\s${O}\\s`).test(k)||k.includes(O+" ")||k.includes(O+"")){$=O+"";break}}if(G===""){const O=k.match(/([-]{2,4})(?![])/);if(O){const ae=O[1];for(const[he,il]of Object.entries(F))if(il.includes(ae)){G=he,$===""&&($=ae+"");break}}}if($===""){const O=k.match(/([-]{2,4})(?![])/);O&&($=O[1]+"")}if(G===""&&$!==""&&$.endsWith("")){const O=$.replace("","");se.includes(O)&&(G="")}return{city:G,district:$}},w=or.filter(k=>{const se=c(k),F=se.includes("")||se.includes("")||se.includes(""),W=k.address&&k.address.length>5;return F||W}),M=k=>k.replace(/\s+/g,"").replace(/[^\w-]/g,"").toLowerCase(),T=new Map,R=w.filter(k=>{const se=c(k).trim(),F=M(se),{city:W,district:G}=N(k.address),$=`${F}-${W}-${G}`;if(T.has($)){const E=T.get($);return a(k)>a(E.data)?(w[E.index]=null,T.set($,{data:k,index:w.indexOf(k)}),!0):!1}return T.set($,{data:k,index:w.indexOf(k)}),!0}).filter(k=>k!==null);ie.forEach(k=>{Mu(k,R).isDuplicate||R.push({id:`company-${k.id}`,name:k.name,address:k.address,phone:k.phone,cellPhone:k.phone,listings:0,isFromCompany:!0,managerId:k.managerId,collected_at:k.createdAt,agentName:k.contact||"",memo:k.memo||"",reaction:k.reaction||"",lat:k.lat,lng:k.lng,companyId:k.id})});const A={};R.forEach(k=>{const{city:se,district:F}=N(k.address);se!==""&&(A[se]||(A[se]=new Set),F!==""&&A[se].add(F))});const B=x.filter(k=>A[k]);R.reduce((k,se)=>k+a(se),0);const te=R.length>0&&R.some(k=>k.collected_at)?new Date(Math.max(...R.filter(k=>k.collected_at).map(k=>new Date(k.collected_at).getTime()))):null;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card p-3 sm:p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-teal-600",children:Rj?" ...":R.length}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),te&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-bold text-slate-300",children:te.toLocaleDateString("ko-KR")}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})}),r.jsx("div",{className:"card p-3 sm:p-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[r.jsx("input",{type:"text",placeholder:"()   ...",value:xu,onChange:k=>kj(k.target.value),className:"input-premium flex-1 min-w-[150px]"}),r.jsxs("select",{value:gu,onChange:k=>Ej(k.target.value),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),B.map(k=>r.jsx("optgroup",{label:`${y[k]||k}`,children:[...A[k]].sort().map(se=>r.jsx("option",{value:`${k}|${se}`,children:se},`${k}-${se}`))},k))]}),r.jsxs("select",{value:_o,onChange:k=>Ij(k.target.value),className:"select-premium",children:[r.jsx("option",{value:"listings",children:"  "}),r.jsx("option",{value:"recent",children:"  "}),r.jsx("option",{value:"name",children:" "}),r.jsx("option",{value:"unvisited",children:" "})]})]})}),R.length===0?r.jsxs("div",{className:"card p-8 text-center text-slate-400",children:[r.jsx("p",{className:"text-4xl mb-2",children:""}),r.jsx("p",{children:"  "}),r.jsx("p",{className:"text-xs mt-2",children:"Chrome   "})]}):r.jsx("div",{className:"space-y-3",children:(()=>{let k=[...R];if(xu){const $=xu.trim().replace(/$/,"").toLowerCase();k=k.filter(E=>{const O=(E.address||"").toLowerCase(),ae=c(E).toLowerCase(),he=h(E).toLowerCase();return O.includes($)||ae.includes($)||he.includes($)})}if(gu){const[W,G]=gu.split("|");k=k.filter($=>{const{city:E,district:O}=N($.address);return W&&G?E===W&&O===G:!1})}_o==="recent"?k.sort((W,G)=>new Date(G.collected_at||0)-new Date(W.collected_at||0)):_o==="name"?k.sort((W,G)=>c(W).localeCompare(c(G))):_o==="unvisited"?k.sort((W,G)=>{const $=Au(W,ie)?1:0,E=Au(G,ie)?1:0;return $-E}):k.sort((W,G)=>a(G)-a(W));const se={};k.forEach(W=>{const{city:G,district:$}=N(W.address);G!==""&&(se[G]||(se[G]={}),se[G][$]||(se[G][$]=[]),se[G][$].push(W))});const F=x.filter(W=>se[W]);return F.length===0?r.jsx("div",{className:"card p-4 text-center text-slate-400",children:"  "}):F.map(W=>{const G=se[W],$=Object.values(G).flat().length,E=Object.keys(G).sort();return r.jsxs("details",{className:"card overflow-hidden",open:F.length===1,children:[r.jsxs("summary",{className:"p-4 cursor-pointer hover:bg-slate-700 flex justify-between items-center font-bold text-slate-200 bg-slate-800",children:[r.jsxs("span",{children:[" ",y[W]||W," (",$,")"]}),r.jsxs("span",{className:"text-xs text-slate-400",children:[E.length," /"]})]}),r.jsx("div",{className:"border-t border-slate-600",children:E.map(O=>{const ae=G[O];return r.jsxs("details",{className:"border-b border-slate-700",children:[r.jsx("summary",{className:"p-3 pl-6 cursor-pointer hover:bg-slate-700 flex justify-between items-center text-slate-300",children:r.jsxs("span",{className:"font-bold",children:[O," (",ae.length,")"]})}),r.jsxs("div",{className:"max-h-80 overflow-y-auto bg-slate-900",children:[ae.map((he,il)=>{const ys=c(he),al=a(he),ol=Mu(he,ie),fr=ol.isDuplicate||he.isFromCompany,Ei=ol.matchedCompany,xr=he.isFromCompany?me.find(le=>le.id===he.managerId):Ei?me.find(le=>le.id===Ei.managerId):null,H=be.some(le=>le.name===ys);return r.jsxs("div",{className:`p-3 pl-8 border-b border-slate-800 cursor-pointer hover:bg-slate-800 ${H?"bg-teal-900/20":fr?"bg-green-900/20":""}`,onClick:()=>ui({...he,officeName:ys,listingCount:al,agentName:he.isFromCompany?he.agentName:h(he),agentPosition:p(he),isRegistered:fr,isInRoute:H,assignedManager:xr,matchedCompany:Ei,collectedDate:he.collected_at?f(he.collected_at):""}),children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-bold text-slate-100 text-sm",children:ys}),r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900 text-teal-300 font-bold",children:[al,""]}),H&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-900 text-purple-300",children:""}),fr&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900 text-green-300",children:""}),xr?r.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:xr.color},children:xr.name}):r.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-slate-600 text-slate-300 font-bold",children:""})]}),r.jsx("span",{className:"text-slate-500 text-sm",children:""})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:he.address||" "})]},he.id||il)}),ae.length>50&&r.jsxs("p",{className:"text-center text-xs text-slate-500 py-2",children:["... ",ae.length-50,""]})]})]},O)})})]},W)})})()})]})})()]}),P==="companies"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-1 lg:order-2",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h3",{className:"font-bold text-slate-100",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:Xd,onChange:uw,className:"hidden"}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:$f,onChange:hw,className:"hidden"}),r.jsx("button",{onClick:()=>Xa(!Ff),className:"px-3 py-1 rounded-full border border-slate-600 text-xs text-slate-300 hover:border-slate-500",children:"+  "}),Ff&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50 min-w-[120px]",children:[r.jsx("button",{onClick:()=>{Xa(!1),setTimeout(()=>{var a;return(a=Xd.current)==null?void 0:a.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),r.jsx("button",{onClick:()=>{Xa(!1),setTimeout(()=>{var a;return(a=$f.current)==null?void 0:a.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),r.jsx("button",{onClick:()=>{Ja(!0),Xa(!1)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700",children:" "})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",placeholder:"",value:ne.name,onChange:a=>qe({...ne,name:a.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:ne.contact,onChange:a=>qe({...ne,contact:a.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:ne.phone,onChange:a=>qe({...ne,phone:a.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:ne.address,onChange:a=>qe({...ne,address:a.target.value}),className:"input-premium text-sm w-full"}),an?r.jsxs("select",{value:ne.managerId||"",onChange:a=>qe({...ne,managerId:Number(a.target.value)||null}),className:"select-premium text-sm w-full",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}):r.jsxs("div",{className:"input-premium text-sm flex items-center text-slate-400",children:[(n==null?void 0:n.name)||""," ()"]}),r.jsx("input",{type:"text",placeholder:"",value:ne.memo,onChange:a=>qe({...ne,memo:a.target.value}),className:"input-premium text-sm w-full"})]}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:Object.entries(tt).map(([a,c])=>r.jsx("button",{onClick:()=>qe({...ne,reaction:a}),className:`px-2 py-1 rounded-full text-xs text-white transition-all ${ne.reaction===a?"ring-1 ring-offset-1 ring-white":"opacity-50"}`,style:{background:c.bg},children:c.label},a))}),r.jsxs("label",{className:"flex items-center gap-2 mt-3 text-xs text-slate-400 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:ne.isReregistered||!1,onChange:a=>qe({...ne,isReregistered:a.target.checked}),className:"w-3 h-3 rounded"})," (  )"]}),r.jsx("button",{type:"button",onClick:Ax,className:"w-full mt-3 py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})}),r.jsx("div",{className:"lg:col-span-2 lg:order-1",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"flex justify-between items-center mb-3",children:r.jsxs("h3",{className:"font-bold text-slate-100",children:["  (",vs.length,")"]})}),(()=>{const a={special:vs.filter(c=>c.reaction==="special").length,positive:vs.filter(c=>c.reaction==="positive").length,neutral:vs.filter(c=>c.reaction==="neutral").length,negative:vs.filter(c=>c.reaction==="negative").length};return r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-rose-400",children:a.special}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]}),r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-emerald-400",children:a.positive}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]}),r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-orange-400",children:a.neutral}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]}),r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-slate-400",children:a.negative}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]})]})})(),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[r.jsx("input",{type:"text",placeholder:" ",value:ku,onChange:a=>Fj(a.target.value),className:"input-premium text-sm"}),r.jsxs("select",{value:Eu,onChange:a=>$j(a.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsxs("select",{value:Si,onChange:a=>Uj(a.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),Object.entries(tt).map(([a,c])=>r.jsx("option",{value:a,children:c.label},a))]})]}),me.filter(a=>Eu==="all"||a.id===Number(Eu)).map(a=>{let c=vs.filter(x=>x.managerId===a.id);if(Si!=="all"&&(c=c.filter(x=>x.reaction===Si)),c.length===0)return null;const h=["special","positive","neutral","negative","missed"],p={};h.forEach(x=>{const y=c.filter(N=>N.reaction===x);y.length>0&&(p[x]=y)});const f=x=>{if(!x)return" ";const y=x.match(/(||||||||||||||||)[^\s]*\s*([^\s]+[])/);if(y)return y[2];const N=x.match(/([^\s]+[])/);return N?N[1]:""};return r.jsxs("details",{className:"mb-4",children:[r.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl cursor-pointer",style:{background:`${a.color}15`},children:[r.jsx("div",{className:"w-5 h-5 rounded-full",style:{background:a.color}}),r.jsx("span",{className:"font-bold text-slate-200 text-lg",children:a.name}),r.jsxs("span",{className:"text-sm text-slate-200",children:["(",c.length,")"]})]}),r.jsx("div",{className:"mt-2 ml-2",children:h.map(x=>{const y=p[x];if(!y)return null;const N=tt[x],w={};return y.forEach(M=>{const T=f(M.address);w[T]||(w[T]=[]),w[T].push(M)}),r.jsxs("details",{className:"mb-3",children:[r.jsxs("summary",{className:"flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer",style:{background:`${N.bg}20`},children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:N.bg}}),r.jsx("span",{className:"font-bold text-sm",style:{color:N.bg},children:N.label}),r.jsxs("span",{className:"text-xs text-slate-200",children:["(",y.length,")"]})]}),r.jsx("div",{className:"mt-2 ml-3",children:Object.entries(w).map(([M,T])=>r.jsxs("details",{className:"mb-2",children:[r.jsxs("summary",{className:"text-xs text-slate-200 font-bold px-2 py-1 cursor-pointer hover:bg-slate-700 rounded",children:[M," (",T.length,")"]}),r.jsx("div",{className:"space-y-1 mt-1 ml-2",children:T.map(R=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>Xe({...R}),children:[r.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:R.name})}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),Xe({...R})},className:"text-slate-200 font-bold text-xs",children:""}),r.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),Ox(R)},className:"text-rose-600 font-bold text-xs",children:""})]})]},R.id))})]},M))})]},x)})})]},a.id)}),(()=>{let a=vs.filter(c=>!c.managerId);return Si!=="all"&&(a=a.filter(c=>c.reaction===Si)),a.length===0?null:r.jsxs("details",{className:"mb-4",children:[r.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl bg-gray-100 cursor-pointer",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400"}),r.jsx("span",{className:"font-bold text-slate-200",children:""}),r.jsxs("span",{className:"text-sm text-slate-200",children:["(",a.length,")"]})]}),r.jsx("div",{className:"space-y-2 mt-2 ml-2",children:a.map(c=>{const h=tt[c.reaction]||tt.neutral;return r.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>Xe({...c}),children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{background:h.bg}}),r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:c.name})]}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs text-white font-bold",style:{background:h.bg},children:h.label}),r.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),Ox(c)},className:"text-rose-600 font-bold text-xs",children:""})]})]},c.id)})})]})})(),vs.length===0&&r.jsx("p",{className:"text-navy-300 text-center py-10",children:"  "})]})})]}),P==="customers"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2 space-y-4",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),po.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"  "}):r.jsx("div",{className:"space-y-2",children:po.map(a=>{var h;const c=me.find(p=>p.id===a.managerId);return r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-600 hover:border-slate-500 cursor-pointer",onClick:()=>Yt(a),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs",style:{background:(c==null?void 0:c.color)||"#666"},children:((h=c==null?void 0:c.name)==null?void 0:h[0])||"?"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-200 text-sm",children:a.name}),r.jsxs("p",{className:"text-xs text-slate-500",children:[a.phone,"  ",a.consultDate]})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.status==="completed"?"text-emerald-400":a.status==="contract"?"text-blue-400":"text-slate-400"}`,children:a.status==="completed"?"":a.status==="contract"?"":""})]},a.id)})})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:Pt.managerId||"",onChange:a=>ur({...Pt,managerId:Number(a.target.value)||null}),className:"select-premium text-sm w-full",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsx("input",{type:"text",placeholder:" *",value:Pt.name,onChange:a=>ur({...Pt,name:a.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:Pt.phone,onChange:a=>ur({...Pt,phone:a.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"date",value:Pt.consultDate,onChange:a=>ur({...Pt,consultDate:a.target.value}),className:"input-premium text-sm w-full"}),r.jsx("div",{className:"flex gap-2",children:["consult","contract","completed"].map(a=>r.jsx("button",{onClick:()=>ur({...Pt,status:a}),className:`flex-1 px-2 py-2 rounded-full text-xs ${Pt.status===a?"bg-slate-600 text-white":"border border-slate-600 text-slate-400"}`,children:a==="consult"?"":a==="contract"?"":""},a))}),r.jsx("textarea",{placeholder:"",value:Pt.memo,onChange:a=>ur({...Pt,memo:a.target.value}),className:"input-premium text-sm w-full h-20 resize-none"}),r.jsx("button",{type:"button",onClick:Ow,className:"w-full py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})]})})]}),P==="settings"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:""}),r.jsxs("div",{className:"flex gap-2 p-1 rounded-full border border-slate-600 w-fit flex-wrap",children:[r.jsx("button",{type:"button",onClick:()=>Va("theme"),className:`px-4 py-2 rounded-full text-sm transition-all ${hs==="theme"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),r.jsx("button",{type:"button",onClick:()=>Va("ments"),className:`px-4 py-2 rounded-full text-sm transition-all ${hs==="ments"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),r.jsx("button",{type:"button",onClick:()=>Va("account"),className:`px-4 py-2 rounded-full text-sm transition-all ${hs==="account"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),an&&r.jsx("button",{type:"button",onClick:()=>Va("admin"),className:`px-4 py-2 rounded-full text-sm transition-all ${hs==="admin"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""})]}),hs==="ments"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100",children:"  "}),r.jsx("button",{type:"button",onClick:()=>{Md(null),Gr(!0)},className:"px-3 py-1 rounded-full border border-slate-600 text-sm text-slate-300 hover:border-slate-500",children:"+  "})]}),Pd.length===0?r.jsx("p",{className:"text-center py-8 text-slate-500",children:"  "}):r.jsx("div",{className:"space-y-3",children:Pd.map(a=>r.jsxs("div",{className:"p-4 rounded-xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${a.type==="broker"?"text-blue-400":"text-emerald-400"}`,children:a.type==="broker"?"":""}),r.jsx("span",{className:"font-bold text-slate-100",children:a.name})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{type:"button",onClick:()=>{H_(a),Ad(a.content),Wa(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:"AI"}),r.jsx("button",{type:"button",onClick:()=>{Md(a),vn({name:a.name,content:a.content,type:a.type||"broker",memo:a.memo||""}),Gr(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:""}),r.jsx("button",{type:"button",onClick:()=>{confirm("?")&&qj(a.id)},className:"px-2 py-1 rounded-full text-xs border border-rose-600/50 text-rose-400 hover:border-rose-500",children:""})]})]}),r.jsx("p",{className:"text-sm text-slate-300 mb-2 whitespace-pre-wrap",children:a.content}),r.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[r.jsxs("span",{children:[" ",a.useCount||0,""]}),r.jsxs("span",{children:[" ",a.useCount>0?Math.round((a.successCount||0)/a.useCount*100):0,"%"]})]})]},a.id))})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:"AI  "}),Ba.length===0?r.jsx("p",{className:"text-center py-4 text-slate-500 text-sm",children:" "}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Ba.slice().reverse().slice(0,10).map(a=>r.jsxs("div",{className:"p-3 rounded-xl border border-slate-700",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"font-medium text-slate-200 text-sm",children:a.mentName}),r.jsx("span",{className:"text-xs text-slate-500",children:new Date(a.createdAt).toLocaleDateString()})]}),r.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:a.question})]},a.id))})]})})]}),hs==="theme"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"card p-4 rounded-2xl border border-amber-500/50 bg-gradient-to-r from-amber-500/10 to-transparent",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-amber-400 text-lg",children:""}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"   "})]}),r.jsx("button",{onClick:()=>wf(!0),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-amber-500 to-yellow-500 text-white font-bold hover:from-amber-600 hover:to-yellow-600 transition-all shadow-lg shadow-amber-500/25",children:""})]})}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>Bd("light"),className:`p-4 rounded-xl border transition-all ${Dn==="light"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[r.jsx("div",{className:"text-xl mb-1",children:""}),r.jsx("div",{className:"text-xs text-slate-300",children:""})]}),r.jsxs("button",{onClick:()=>Bd("dark"),className:`p-4 rounded-xl border transition-all ${Dn==="dark"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[r.jsx("div",{className:"text-xl mb-1",children:""}),r.jsx("div",{className:"text-xs text-slate-300",children:""})]}),r.jsxs("button",{onClick:()=>Bd("auto"),className:`p-4 rounded-xl border transition-all ${Dn==="auto"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[r.jsx("div",{className:"text-xl mb-1"}),r.jsx("div",{className:"text-xs text-slate-300",children:""})]})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-3",children:Dn==="auto"?"    .":Dn==="light"?"  .":"  ."})]})]}),hs==="account"&&r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"   "}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"password",placeholder:" ",value:bn,onChange:a=>oo(a.target.value),className:"input-premium"}),r.jsx("input",{type:"password",placeholder:" ",value:co,onChange:a=>uo(a.target.value),className:"input-premium"}),r.jsx("button",{type:"button",onClick:an?Mx:Px,className:"btn-premium btn-gold w-full",children:" "})]}),r.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:["  4  . ",an?"( )":""]})]}),hs==="admin"&&an&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-3",children:"  "}),r.jsxs("p",{className:"text-sm text-slate-400 mb-3",children:["  : ",ie.filter(a=>a.isReregistered).length,""]}),r.jsx("button",{onClick:()=>{const a=ie.filter(c=>c.isReregistered);if(a.length===0){alert("   .");return}confirm(`  ${a.length}    ?
(  ,    )`)&&(a.forEach(c=>{Hn({...c,isReregistered:!1})}),alert("   ."))},className:"btn-premium bg-rose-600 hover:bg-rose-700 text-white w-full",children:"   "}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"        ."})]}),ki.length>0&&r.jsxs("div",{className:"card p-4 border-2 border-rose-200",children:[r.jsxs("h3",{className:"font-bold text-rose-600 text-lg mb-4",children:["  (",ki.length,")"]}),r.jsx("div",{className:"space-y-3",children:ki.map(a=>{var c;return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-rose-900/30 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-200",children:a.managerName}),r.jsx("p",{className:"text-sm text-slate-200",children:(c=a.items)==null?void 0:c.join(", ")})]}),r.jsx("button",{type:"button",onClick:()=>$w(a.id),className:"btn-premium btn-gold text-sm",children:""})]},a.id)})})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:" "}),me.map(a=>{const c=wj[a.id],h=(c==null?void 0:c.isOnline)&&Date.now()-new Date(c.lastSeen).getTime()<12e4;return r.jsxs("div",{className:"flex items-center gap-3 mb-3 p-3 bg-slate-700 rounded-xl",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg flex-shrink-0",style:{background:a.color}}),r.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${h?"bg-emerald-500":"bg-gray-400"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("input",{type:"text",value:a.name,onChange:p=>Iu({...a,name:p.target.value}),className:"input-premium w-full mb-1"}),r.jsxs("p",{className:"text-xs text-slate-200",children:[h?"":`${Ww(c==null?void 0:c.lastSeen)}`,"  ",a.username]})]}),r.jsx("input",{type:"color",value:a.color,onChange:p=>Iu({...a,color:p.target.value}),className:"w-10 h-10 rounded cursor-pointer flex-shrink-0"}),r.jsx("button",{type:"button",onClick:()=>{confirm("?")&&re.ref("managers/"+a.id).remove()},className:"text-rose-600 font-bold text-sm flex-shrink-0",children:""})]},a.id)})]})]})]})]}),Ln&&r.jsx("div",{className:"modal-overlay",onClick:()=>ci(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:Sv(Ln.region)}),r.jsx("button",{type:"button",onClick:()=>ci(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("p",{className:"text-slate-200 mb-4",children:[Ln.status==="confirmed"?"":"",": ",(Wx=Ln.manager)==null?void 0:Wx.name]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm text-slate-200 mb-2 block",children:""}),r.jsx("input",{type:"date",value:Ln.date||"",onChange:a=>{sw(Ln.id,a.target.value),ci({...Ln,date:a.target.value})},className:"input-premium"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>ci(null),className:"btn-premium btn-outline flex-1",children:""}),tw(Ln)&&r.jsx("button",{type:"button",onClick:()=>nw(Ln.id),className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),J&&r.jsx("div",{className:"modal-overlay",onClick:()=>ui(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>ui(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[r.jsx("p",{className:"font-bold text-slate-100 text-lg mb-1",children:J.officeName}),r.jsx("p",{className:"text-sm text-slate-400",children:J.address||" "}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-100 text-teal-700 font-bold",children:[J.listingCount,""]}),J.isInRoute&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900/300 text-white",children:""}),J.isRegistered&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500 text-white",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsx("p",{className:"font-bold text-slate-200",children:J.phone||"-"})]}),r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsx("p",{className:"font-bold text-slate-200",children:J.cellPhone||"-"})]}),r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:J.isFromCompany?" ":""}),r.jsx("p",{className:"font-bold text-slate-200",children:J.assignedManager?r.jsx("span",{className:"px-2 py-0.5 rounded-full text-white text-xs",style:{backgroundColor:J.assignedManager.color},children:J.assignedManager.name}):J.agentPosition||J.agentName?`${J.agentPosition} ${J.agentName}`.trim():""})]}),r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:J.isFromCompany?"":""}),r.jsx("p",{className:"font-bold text-slate-200",children:J.collectedDate||"-"})]}),J.isFromCompany&&J.agentName&&r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:" "}),r.jsx("p",{className:"font-bold text-slate-200",children:J.agentName})]}),J.isFromCompany&&J.reaction&&r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsxs("p",{className:"font-bold text-slate-200",children:[J.reaction==="negative"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-slate-600 text-slate-300",children:""}),J.reaction==="positive"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-amber-600 text-white",children:""}),J.reaction==="good"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-green-600 text-white",children:""}),J.reaction==="special"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-red-600 text-white",children:""}),J.reaction==="skip"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-600 text-white",children:""})]})]}),J.isFromCompany&&J.memo&&r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsx("p",{className:"text-slate-200 text-sm",children:J.memo})]})]}),J.articleCounts&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[J.articleCounts.sale>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700",children:[" ",J.articleCounts.sale]}),J.articleCounts.jeonse>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 text-green-700",children:[" ",J.articleCounts.jeonse]}),J.articleCounts.monthly>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700",children:[" ",J.articleCounts.monthly]}),J.articleCounts.short>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-100 text-purple-700",children:[" ",J.articleCounts.short]})]}),J.regions&&Object.keys(J.regions).length>0&&r.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(J.regions).sort((a,c)=>c[1]-a[1]).map(([a,c])=>r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-slate-600 text-slate-300",children:[a,": ",c,""]},a))}),r.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-600",children:[!J.isInRoute&&r.jsx("button",{type:"button",onClick:()=>{var h,p;const a=J.address,c=(f,x)=>{Rt(y=>[...y,{id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:J.officeName,address:a||"",phone:J.cellPhone||J.phone||"",lat:f,lng:x,visited:!1,listings:J.listingCount,companyId:J.companyId||null}]),ui(null),alert(" !")};J.lat&&J.lng?c(J.lat,J.lng):a&&((p=(h=window.naver)==null?void 0:h.maps)!=null&&p.Service)?naver.maps.Service.geocode({query:a},(f,x)=>{if(f===naver.maps.Service.Status.OK&&x.v2.addresses.length>0){const y=x.v2.addresses[0];c(parseFloat(y.y),parseFloat(y.x))}else c(null,null)}):c(null,null)},className:"btn-premium btn-gold text-sm flex-1",children:"+  "}),!J.isRegistered&&r.jsx("button",{type:"button",onClick:()=>{qe({name:J.officeName,contact:J.agentName!==""?J.agentName:"",phone:J.cellPhone||J.phone||"",address:J.address||"",managerId:null,memo:` ${J.listingCount} | : ${J.collectedDate}`,reaction:"none"}),ui(null),K("companies")},className:"btn-premium btn-navy text-sm flex-1",children:" "})]})]})]})}),He&&r.jsx("div",{className:"modal-overlay",onClick:()=>di(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${(Vx=tt[He.reaction])!=null&&Vx.blink?"special-blink":""}`,style:{background:((Hx=tt[He.reaction])==null?void 0:Hx.bg)||"#f97316"}}),r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:He.name})]}),r.jsx("button",{type:"button",onClick:()=>di(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[He.contact&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("span",{className:"font-bold text-slate-200",children:He.contact})]}),He.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("a",{href:`tel:${He.phone}`,className:"font-bold text-primary-600 md:pointer-events-none md:text-slate-200",children:He.phone})]}),He.address&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("span",{className:"text-slate-200 text-sm",children:He.address})]}),He.manager&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("span",{className:"font-bold",style:{color:He.manager.color},children:He.manager.name})]}),He.memo&&r.jsxs("div",{className:"bg-slate-700 p-3 rounded-lg",children:[r.jsx("p",{className:"text-xs text-primary-600 font-bold mb-1",children:""}),r.jsx("p",{className:"text-sm text-amber-800",children:He.memo})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("span",{className:"text-sm text-slate-200",children:":"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs text-white font-bold ${(Kx=tt[He.reaction])!=null&&Kx.blink?"special-blink":""}`,style:{background:((Gx=tt[He.reaction])==null?void 0:Gx.bg)||"#f97316"},children:((qx=tt[He.reaction])==null?void 0:qx.label)||""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{Xe({...He}),di(null)},className:"btn-premium btn-gold flex-1",children:""}),r.jsx("button",{type:"button",onClick:()=>di(null),className:"btn-premium btn-outline flex-1",children:""})]})]})}),aj&&r.jsx("div",{className:"modal-overlay",onClick:()=>Za(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"  "}),r.jsx("div",{className:"space-y-3 mb-4",children:jv.map(a=>r.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:su[a],onChange:c=>ru({...su,[a]:c.target.checked}),className:"w-5 h-5 accent-gold-500"}),r.jsx("span",{className:"font-bold text-slate-200",children:a})]},a))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>Za(null),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{type:"button",onClick:Uw,className:"btn-premium btn-gold flex-1",children:" "})]})]})}),at&&r.jsx("div",{className:"modal-overlay",onClick:()=>Xe(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Xe(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:at.name,onChange:a=>Xe({...at,name:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:at.contact||"",onChange:a=>Xe({...at,contact:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:at.phone||"",onChange:a=>Xe({...at,phone:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:at.address||"",onChange:a=>Xe({...at,address:a.target.value}),className:"input-premium"}),r.jsxs("select",{value:at.managerId||"",onChange:a=>Xe({...at,managerId:Number(a.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsx("input",{type:"text",placeholder:"",value:at.memo||"",onChange:a=>Xe({...at,memo:a.target.value}),className:"input-premium"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(tt).map(([a,c])=>r.jsx("button",{onClick:()=>Xe({...at,reaction:a}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${at.reaction===a?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:c.bg},children:c.label},a))]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>Xe(null),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{type:"button",onClick:Mw,className:"btn-premium btn-gold flex-1",children:""})]})]})}),Ze&&r.jsx("div",{className:"modal-overlay",onClick:()=>Yt(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Yt(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:Ze.name,onChange:a=>Yt({...Ze,name:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:Ze.phone||"",onChange:a=>Yt({...Ze,phone:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"date",value:Ze.consultDate||"",onChange:a=>Yt({...Ze,consultDate:a.target.value}),className:"input-premium"}),r.jsxs("select",{value:Ze.managerId||"",onChange:a=>Yt({...Ze,managerId:Number(a.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-200 mb-2",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Yt({...Ze,status:"consult"}),className:`px-4 py-2 rounded-full text-sm font-bold ${Ze.status==="consult"||!Ze.status?"bg-primary-500 text-white":"bg-slate-700 text-primary-600"}`,children:""}),r.jsx("button",{onClick:()=>Yt({...Ze,status:"contract"}),className:`px-4 py-2 rounded-full text-sm font-bold ${Ze.status==="contract"?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600"}`,children:""})]})]}),r.jsx("textarea",{placeholder:"",value:Ze.memo||"",onChange:a=>Yt({...Ze,memo:a.target.value}),className:"input-premium h-20"})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>Yt(null),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{type:"button",onClick:Dw,className:"btn-premium btn-navy flex-1",children:""})]})]})}),hi&&r.jsx("div",{className:"modal-overlay",onClick:()=>to(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[hi.status==="planned"?"":"","  "]}),r.jsx("button",{type:"button",onClick:()=>to(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{type:"button",onClick:()=>Qr(hi.pins.map(a=>a.id)),className:"text-sm text-gold-600 font-bold",children:" "}),r.jsx("button",{type:"button",onClick:()=>Qr([]),className:"text-sm text-slate-200 font-bold",children:" "})]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:hi.pins.map(a=>r.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:rr.includes(a.id),onChange:c=>{c.target.checked?Qr([...rr,a.id]):Qr(rr.filter(h=>h!==a.id))},className:"w-5 h-5 accent-gold-500"}),r.jsx("span",{className:"font-bold text-slate-200",children:Sv(a.region)})]},a.id))}),rr.length>0&&r.jsxs("div",{className:"flex gap-2",children:[hi.status==="planned"&&r.jsx("button",{type:"button",onClick:rw,className:"btn-premium btn-gold flex-1",children:" "}),r.jsx("button",{type:"button",onClick:lw,className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),Kd&&r.jsx("div",{className:"modal-overlay",onClick:()=>Gd(null),children:r.jsxs("div",{className:"modal-content max-w-sm p-0 overflow-hidden",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-4 sm:p-6 text-center",children:[r.jsx("div",{className:"w-14 h-14 bg-slate-800/10 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-3 border border-white/20",children:r.jsx("span",{className:"text-2xl text-emerald-400"})}),r.jsx("p",{className:"text-slate-400 text-xs tracking-widest mb-1",children:"REGISTERED"}),r.jsx("h3",{className:"font-bold text-white text-lg",children:Kd.companyName})]}),r.jsxs("div",{className:"p-5 bg-slate-800",children:[r.jsx("div",{className:"bg-slate-900 rounded-lg p-4 mb-4 border-l-4 border-teal-500",children:r.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:Kd.quote})}),r.jsx("button",{type:"button",onClick:()=>Gd(null),className:"w-full py-3 bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 text-white rounded-lg font-medium transition-all border border-slate-500",children:""})]})]})}),Lf&&r.jsx("div",{className:"modal-overlay",onClick:()=>Hd(!1),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),r.jsx("button",{type:"button",onClick:()=>Hd(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"password",placeholder:" ",value:mi,onChange:a=>Kf(a.target.value),className:"input-premium"}),r.jsx("input",{type:"password",placeholder:" ",value:Gf,onChange:a=>qf(a.target.value),className:"input-premium"}),r.jsx("button",{type:"button",onClick:Mx,className:"btn-premium btn-gold w-full",children:""})]})]})}),rj&&r.jsx("div",{className:"modal-overlay",onClick:()=>Df(!1),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Df(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"bg-emerald-900/30 p-4 rounded-xl",children:[r.jsx("p",{className:"text-emerald-700 font-bold mb-2",children:"  "}),r.jsx("p",{className:"text-emerald-600 text-sm",children:"      ."}),r.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"PC, ,    ."})]})]})}),qd&&r.jsx("div",{className:"modal-overlay",onClick:()=>so(null),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>so(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-200 mb-4",children:[qd.managerName," "]}),r.jsx("div",{className:"space-y-3",children:(()=>{const a=fo.filter(c=>c.managerId===qd.managerId);return a.length===0?r.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.map(c=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-slate-100",children:[Number(c.amount).toLocaleString(),""]}),r.jsx("p",{className:"text-xs text-slate-200",children:c.date})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const h=prompt("  :",c.amount);h&&!isNaN(h)&&(dx({...c,amount:Number(h)}),alert(" ."))},className:"px-2 py-1 bg-primary-500 text-white rounded text-xs font-bold",children:""}),r.jsx("button",{onClick:()=>{confirm("  ?")&&(Gj(c.id),alert(" ."))},className:"px-2 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:""})]})]},c.id))})})()}),r.jsx("button",{type:"button",onClick:()=>so(null),className:"btn-premium btn-outline w-full mt-4",children:""})]})}),cj&&r.jsx("div",{className:"modal-overlay",onClick:()=>no(!1),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>no(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:ln.managerId||"",onChange:a=>Eo({...ln,managerId:Number(a.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:"  *"}),Bw().map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsx("input",{type:"number",placeholder:" *",value:ln.amount,onChange:a=>Eo({...ln,amount:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"date",value:ln.date,onChange:a=>Eo({...ln,date:a.target.value}),className:"input-premium"}),r.jsx("button",{type:"button",onClick:Lw,className:"btn-premium btn-gold w-full",children:""})]})]})}),lj&&r.jsx("div",{className:"modal-overlay",onClick:()=>Vd(!1),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Vd(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"password",placeholder:" ",value:bn,onChange:a=>oo(a.target.value),className:"input-premium"}),r.jsx("input",{type:"password",placeholder:" ",value:co,onChange:a=>uo(a.target.value),className:"input-premium"}),r.jsx("button",{type:"button",onClick:Px,className:"btn-premium btn-gold w-full",children:""})]})]})}),ij&&r.jsx("div",{className:"modal-overlay",onClick:()=>Ja(!1),children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Ja(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"text-slate-200 font-bold mb-1",children:" "}),r.jsx("p",{className:"text-slate-200 text-sm",children:"////"})]}),r.jsx("textarea",{value:nu,onChange:a=>zf(a.target.value),placeholder:"////",className:"input-premium h-32 mb-3"}),r.jsxs("select",{value:Bf||"",onChange:a=>Wf(Number(a.target.value)||null),className:"select-premium mb-3",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[r.jsx("span",{className:"text-sm text-slate-200",children:" :"}),Object.entries(tt).map(([a,c])=>r.jsx("button",{onClick:()=>Hf(a),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${Vf===a?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:c.bg},children:c.label},a))]}),r.jsx("button",{type:"button",onClick:Aw,className:"btn-premium btn-navy w-full",children:" "})]})}),dj&&r.jsx("div",{className:"modal-overlay",onClick:()=>io(!1),style:{overflow:"hidden"},children:r.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),r.jsx("button",{type:"button",onClick:()=>io(!1),className:"text-slate-200 text-2xl",children:""})]}),Uf?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-200",children:"  ..."})]}):hj?r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-200 font-bold",children:"   ( )"}),r.jsx("input",{type:"text",placeholder:"",value:ne.name,onChange:a=>qe({...ne,name:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ne.contact,onChange:a=>qe({...ne,contact:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ne.phone,onChange:a=>qe({...ne,phone:a.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ne.address,onChange:a=>qe({...ne,address:a.target.value}),className:"input-premium"}),r.jsxs("select",{value:ne.managerId||"",onChange:a=>qe({...ne,managerId:Number(a.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),me.map(a=>r.jsx("option",{value:a.id,children:a.name},a.id))]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(tt).map(([a,c])=>r.jsx("button",{onClick:()=>qe({...ne,reaction:a}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${ne.reaction===a?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:c.bg},children:c.label},a))]}),r.jsx("input",{type:"text",placeholder:"",value:ne.memo,onChange:a=>qe({...ne,memo:a.target.value}),className:"input-premium"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{var a;Jd(null),qe({name:"",contact:"",phone:"",address:"",managerId:(n==null?void 0:n.managerId)||null,memo:"",reaction:"neutral"}),(a=Xd.current)==null||a.click()},className:"flex-1 py-3 border border-slate-600 rounded-xl font-bold text-slate-200",children:""}),r.jsx("button",{onClick:async()=>{await Ax(),io(!1),Jd(null)},className:"flex-1 btn-premium btn-gold",children:" "})]})]}):null]})}),uj&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content max-w-2xl",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:["   (",Qt.length,")"]}),r.jsx("button",{type:"button",onClick:()=>Qd(!1),className:"text-slate-200 text-2xl",children:""})]}),Uf?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-200",children:"  ..."})]}):r.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[Qt.map((a,c)=>r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 border",children:[r.jsxs("p",{className:"font-bold text-slate-200 text-sm mb-2",children:[" #",c+1]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"text",placeholder:"",value:a.name,onChange:h=>{const p=[...Qt];p[c].name=h.target.value,yn(p)},className:"input-premium text-sm"}),r.jsx("input",{type:"text",placeholder:"",value:a.contact,onChange:h=>{const p=[...Qt];p[c].contact=h.target.value,yn(p)},className:"input-premium text-sm"}),r.jsx("input",{type:"text",placeholder:"",value:a.phone,onChange:h=>{const p=[...Qt];p[c].phone=h.target.value,yn(p)},className:"input-premium text-sm"}),r.jsx("input",{type:"text",placeholder:"",value:a.address,onChange:h=>{const p=[...Qt];p[c].address=h.target.value,yn(p)},className:"input-premium text-sm"})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[r.jsxs("select",{value:a.managerId||"",onChange:h=>{const p=[...Qt];p[c].managerId=Number(h.target.value)||null,yn(p)},className:"select-premium text-sm py-1",children:[r.jsx("option",{value:"",children:""}),me.map(h=>r.jsx("option",{value:h.id,children:h.name},h.id))]}),Object.entries(tt).map(([h,p])=>r.jsx("button",{onClick:()=>{const f=[...Qt];f[c].reaction=h,yn(f)},className:`px-2 py-1 rounded-full text-xs text-white font-bold ${a.reaction===h?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:p.bg},children:p.label},h))]}),r.jsx("input",{type:"text",placeholder:"",value:a.memo,onChange:h=>{const p=[...Qt];p[c].memo=h.target.value,yn(p)},className:"input-premium text-sm mt-2"})]},c)),Qt.length>0&&r.jsxs("button",{onClick:mw,className:"btn-premium btn-gold w-full",children:[Qt.filter(a=>a.name).length,"  "]})]})]})}),fj&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-3xl"})}),r.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),r.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long"})," 4"]})]}),r.jsxs("div",{className:"bg-slate-700 border border-primary-300 rounded-xl p-4 mb-4",children:[r.jsxs("p",{className:"text-blue-800 font-bold text-center text-lg",children:["  ",r.jsx("br",{}),"."]}),r.jsxs("p",{className:"text-primary-600 text-sm text-center mt-2",children:["    ",r.jsx("br",{}),"  ."]})]}),r.jsx("button",{onClick:()=>tu(!1),className:"btn-premium btn-gold w-full",children:""})]})}),bi&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>du(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),r.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[" ",r.jsxs("b",{className:"text-amber-500",children:[bi.unvisitedStops.length,""]}),"   ."]})]}),r.jsx("div",{className:"bg-slate-800 rounded-xl p-3 mb-4 max-h-40 overflow-y-auto",children:bi.unvisitedStops.map((a,c)=>r.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-slate-700 last:border-0",children:[r.jsx("span",{className:"w-6 h-6 bg-rose-500/20 text-rose-400 rounded-full flex items-center justify-center text-xs font-bold",children:c+1}),r.jsx("span",{className:"text-slate-200 text-sm",children:a.name})]},c))}),r.jsxs("p",{className:"text-xs text-slate-300 mb-4 text-center",children:["       ",r.jsx("br",{}),"    ."]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Lu(bi.route,!1),className:"flex-1 px-4 py-2 bg-slate-600 rounded-xl font-bold text-slate-200 text-sm",children:" "}),r.jsx("button",{onClick:()=>Lu(bi.route,!0),className:"flex-1 px-4 py-2 bg-amber-600 rounded-xl font-bold text-white text-sm",children:" "})]})]})}),cu&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>Zr(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-sm",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-14 h-14 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-2xl"})}),r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[r.jsx("b",{className:"text-rose-600",children:cu.name}),"() ?"]}),r.jsx("p",{className:"text-xs text-slate-200 mt-1",children:"    ."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Zr(null),className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl font-bold text-gray-700",children:""}),r.jsx("button",{onClick:()=>{const{type:a,id:c}=cu;a==="route"?hx(c):a==="company"?Hj(c):a==="customer"?Kj(c):a==="calendar"?(Xf(_t.filter(h=>h.id!==c)),localStorage.setItem("bc_calendar_events",JSON.stringify(_t.filter(h=>h.id!==c)))):a==="sale"&&(Yf(fo.filter(h=>h.id!==c)),localStorage.setItem("bc_sales",JSON.stringify(fo.filter(h=>h.id!==c)))),Zr(null),alert(".")},className:"flex-1 px-4 py-2 bg-rose-500 rounded-xl font-bold text-white",children:""})]})]})}),mj&&eu.length>0&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1100] p-4",children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-3xl"})}),r.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),r.jsx("p",{className:"text-slate-200 text-sm mt-1",children:new Date().toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),r.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-4 mb-4 max-h-60 overflow-y-auto",children:[r.jsxs("p",{className:"text-primary-600 font-bold text-sm mb-3",children:[eu.length,"  "]}),r.jsx("div",{className:"space-y-2",children:eu.map((a,c)=>{const h=me.find(p=>p.id===a.managerId);return r.jsx("div",{className:"bg-slate-700 p-3 rounded-lg border border-slate-600",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:a.type==="route"?"":""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:a.title}),h&&r.jsxs("p",{className:"text-xs text-slate-200",children:[": ",h.name]}),a.memo&&r.jsx("p",{className:"text-xs text-slate-200 mt-1 break-words whitespace-pre-wrap",children:a.memo})]})]})},c)})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{Zd(!1),K("calendar")},className:"flex-1 btn-premium btn-gold",children:" "}),r.jsx("button",{onClick:()=>Zd(!1),className:"flex-1 btn-premium btn-outline",children:""})]})]})}),oj&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>eo(!1),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>eo(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsx("p",{className:"text-sm text-slate-200 mb-3",children:"   ."}),r.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[ie.filter(a=>!a.lat||!a.lng).map(a=>{const c=me.find(h=>h.id===a.managerId);return r.jsx("div",{className:"p-3 bg-slate-700 rounded-xl cursor-pointer hover:bg-slate-700 border border-slate-600",onClick:()=>{eo(!1),Xe(a)},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-bold text-slate-100 truncate",children:a.name}),r.jsx("p",{className:"text-xs text-slate-200 truncate",children:a.address||" "})]}),r.jsx("div",{className:"flex-shrink-0 ml-2",children:r.jsx("span",{className:"px-2 py-1 rounded text-xs text-white font-bold",style:{background:(c==null?void 0:c.color)||"#9ca3af"},children:(c==null?void 0:c.name)||""})})]})},a.id)}),ie.filter(a=>!a.lat||!a.lng).length===0&&r.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."})]})]})}),mt&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>yi(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>yi(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[r.jsx("p",{className:"text-purple-800 font-bold text-lg",children:mt.title}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-purple-600",children:[r.jsxs("span",{children:[" ",mt.date]}),mt.time&&r.jsx("span",{children:mt.time})]}),mt.memo&&r.jsxs("div",{className:"mt-3 p-3 bg-slate-700 rounded-lg",children:[r.jsx("p",{className:"text-xs text-slate-200 mb-1",children:""}),r.jsx("p",{className:"text-slate-200 whitespace-pre-wrap",children:mt.memo})]}),mt.company&&r.jsx("div",{className:"mt-2 text-sm text-purple-600",children:r.jsx("span",{children:mt.company})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{ou(mt.date),Un({title:mt.title,time:mt.time||"09:00",memo:mt.memo||""}),el(mt.id),ar(!0),yi(null)},className:"flex-1 py-2 bg-slate-700 text-primary-600 rounded-xl font-bold",children:""}),r.jsx("button",{onClick:()=>{Zr({type:"calendar",id:mt.id,name:mt.title}),yi(null)},className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-xl font-bold",children:""})]})]})]})}),Cj&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ar(!1),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[vi," "]}),r.jsx("button",{type:"button",onClick:()=>ar(!1),className:"text-slate-200 text-2xl",children:""})]}),(()=>{const a=Fe.filter(h=>h.date===vi),c=_t.filter(h=>h.date===vi);return a.length>0||c.length>0?r.jsxs("div",{className:"mb-4 p-3 bg-slate-700 rounded-xl max-h-32 overflow-y-auto",children:[r.jsx("p",{className:"text-xs text-slate-200 mb-2 font-bold",children:"  "}),a.map(h=>{var f;const p=me.find(x=>x.id===h.managerId);return r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:(p==null?void 0:p.color)||"#888"}}),r.jsxs("span",{className:"text-sm text-slate-200",children:[(f=h.time)==null?void 0:f.slice(0,5)," ",h.name]}),r.jsx("span",{className:"text-xs text-slate-200",children:"()"})]},`r-${h.id}`)}),c.map(h=>{var p;return r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),r.jsxs("span",{className:"text-sm text-slate-200",children:[(p=h.time)==null?void 0:p.slice(0,5)," ",h.title]}),r.jsx("button",{onClick:()=>{Un({title:h.title,time:h.time,memo:h.memo||""}),el(h.id)},className:"text-xs text-primary-600 ml-auto",children:""}),r.jsx("button",{onClick:()=>{confirm("?")&&Jj(h.id)},className:"text-xs text-rose-600",children:""})]},`e-${h.id}`)})]}):null})(),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-200 font-bold",children:Ni?" ":"  "}),r.jsx("input",{type:"text",placeholder:" ",value:Nn.title,onChange:a=>Un({...Nn,title:a.target.value}),className:"input-premium"}),r.jsx("div",{className:"relative",onClick:()=>{var a,c;return(c=(a=document.getElementById("calEventTime")).showPicker)==null?void 0:c.call(a)},children:r.jsx("input",{id:"calEventTime",type:"time",value:Nn.time,onChange:a=>Un({...Nn,time:a.target.value}),className:"input-premium cursor-pointer"})}),r.jsx("textarea",{placeholder:" ()",value:Nn.memo,onChange:a=>Un({...Nn,memo:a.target.value}),className:"input-premium resize-none h-20"})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[Ni&&r.jsx("button",{onClick:()=>{Un({title:"",time:"09:00",memo:""}),el(null)},className:"btn-premium btn-outline flex-1",children:" "}),r.jsx("button",{type:"button",onClick:()=>ar(!1),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{onClick:()=>{if(!Nn.title.trim())return alert("  ");const a={id:Ni||Date.now(),date:vi,title:Nn.title.trim(),time:Nn.time,memo:Nn.memo.trim(),createdBy:(n==null?void 0:n.name)||"unknown",createdAt:new Date().toISOString()};Ru(a),tu(!1),Un({title:"",time:"09:00",memo:""}),el(null),alert(Ni?" !":" !")},className:"btn-premium btn-gold flex-1",children:Ni?"":""})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:r.jsx("button",{onClick:()=>{Jr(vi),ar(!1),mr("route")},className:"w-full text-center text-sm text-slate-200 font-bold",children:"  "})})]})}),$t&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Fn(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:$t.name}),r.jsx("p",{className:"text-sm text-slate-200",children:$t.date})]}),r.jsx("button",{type:"button",onClick:()=>Fn(null),className:"text-slate-200 hover:text-slate-200 text-xl",children:""})]}),(()=>{const a=($t.stops||[]).filter(p=>p.visited).length,c=($t.stops||[]).length,h=c>0?Math.round(a/c*100):0;return r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm text-slate-200",children:""}),r.jsxs("span",{className:"text-sm font-bold text-slate-200",children:[a,"/",c," (",h,"%)"]})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 transition-all duration-300",style:{width:`${h}%`}})})]})})(),r.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:($t.stops||[]).map((a,c)=>r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all ${a.visited?"bg-emerald-900/30":"bg-slate-700"}`,children:[r.jsx("button",{onClick:()=>kw($t.id,a.id),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all flex-shrink-0 ${a.visited?"bg-emerald-500 text-white":"bg-slate-600 border-2 border-slate-600 text-slate-200 hover:border-primary-400"}`,children:a.visited?"":c+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`font-bold text-sm break-words leading-snug ${a.visited?"text-emerald-700":"text-slate-100"}`,children:a.name}),a.address&&r.jsx("p",{className:"text-xs text-slate-200 break-words",children:a.address})]}),a.lat&&a.lng&&r.jsx("button",{type:"button",onClick:()=>Iw(a),className:"w-8 h-8 rounded-lg bg-slate-700 hover:bg-slate-600 text-primary-600 flex items-center justify-center text-sm flex-shrink-0"})]},a.id))}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{type:"button",onClick:()=>{Fn(null),Rw($t)},className:"w-full btn-premium btn-outline py-2",children:"   "}),$t.status!=="completed"&&r.jsx("button",{type:"button",onClick:()=>Ew($t.id),className:"w-full btn-premium btn-gold py-3 font-bold",children:"  ( )"})]})]})}),W_&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>{Gr(!1),vn({name:"",content:"",type:"broker",memo:""})},children:r.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-md",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:Et?" ":"  "}),r.jsx("button",{type:"button",onClick:()=>{Gr(!1),vn({name:"",content:"",type:"broker",memo:""})},className:"text-slate-400 text-2xl hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"  (:  )",value:ht.name,onChange:a=>vn({...ht,name:a.target.value}),className:"input-premium"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>vn({...ht,type:"broker"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${ht.type==="broker"?"bg-blue-500/20 text-blue-400 border border-blue-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""}),r.jsx("button",{onClick:()=>vn({...ht,type:"customer"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${ht.type==="customer"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""})]}),r.jsx("textarea",{placeholder:"  ",value:ht.content,onChange:a=>vn({...ht,content:a.target.value}),rows:"4",className:"input-premium resize-none"}),r.jsx("input",{type:"text",placeholder:" ()",value:ht.memo,onChange:a=>vn({...ht,memo:a.target.value}),className:"input-premium"})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>{Gr(!1),vn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-outline",children:""}),r.jsx("button",{onClick:()=>{if(!ht.name.trim()||!ht.content.trim())return alert("   ");const a={id:(Et==null?void 0:Et.id)||Date.now(),name:ht.name.trim(),content:ht.content.trim(),type:ht.type,memo:ht.memo.trim(),useCount:(Et==null?void 0:Et.useCount)||0,successCount:(Et==null?void 0:Et.successCount)||0,createdAt:(Et==null?void 0:Et.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};mx(a),Gr(!1),Md(null),vn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-gold",children:Et?" ":""})]})]})}),V_&&An&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>Wa(!1),children:r.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"AI "}),r.jsx("button",{type:"button",onClick:()=>Wa(!1),className:"text-slate-400 text-2xl hover:text-white",children:""})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-sm text-slate-400 mb-1",children:[" : ",r.jsx("span",{className:"text-brand-purple font-medium",children:An.name})]}),r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:r.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:An.content})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"  :"}),r.jsx("textarea",{value:li,onChange:a=>Ad(a.target.value),placeholder:"  ",rows:"3",className:"input-premium resize-none w-full"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),r.jsx("input",{type:"text",value:_f,onChange:a=>jf(a.target.value),placeholder:"   ?",className:"input-premium w-full"})]}),r.jsx("button",{onClick:()=>{if(!li.trim())return alert("  ");const a={id:Date.now(),mentId:An.id,mentName:An.name,original:An.content,modified:li,question:_f||" ",aiResponse:` !

:
    ${li.length>An.content.length?" ":" "} 
 ${li.includes("?")?"   ":"   "}

 :
    .`,createdAt:new Date().toISOString()};Yj(a),alert(" !  ."),Wa(!1),Ad(""),jf("")},className:"w-full btn-premium btn-gold",children:"AI  "}),Ba.filter(a=>a.mentId===An.id).length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[r.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"    "}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ba.filter(a=>a.mentId===An.id).slice(-3).reverse().map(a=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/30 border border-slate-700/30",children:[r.jsx("p",{className:"text-xs text-slate-500 mb-1",children:new Date(a.createdAt).toLocaleString("ko-KR")}),r.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:a.question})]},a.id))})]})]})}),K_&&r.jsxs("div",{className:"fixed inset-0 z-[9999] bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-500 flex items-center justify-center text-white font-bold text-sm",children:"B"}),r.jsx("span",{className:"font-bold text-gray-900",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>Sf("analysis"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Ha==="analysis"?"bg-amber-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""}),r.jsx("button",{onClick:()=>Sf("homepage"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Ha==="homepage"?"bg-amber-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""}),r.jsx("button",{onClick:()=>wf(!1),className:"ml-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500",children:""})]})]}),Ha==="analysis"&&r.jsx("div",{className:"h-[calc(100vh-60px)] overflow-y-auto",children:r.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-4",children:[r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:ii,onChange:a=>G_(a.target.value),placeholder:"   (:  )",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-amber-500",onKeyPress:a=>a.key==="Enter"&&Dx()}),r.jsx("button",{onClick:()=>Dx(),disabled:Od||!ii.trim(),className:"px-6 py-3 bg-amber-500 text-white rounded-lg font-medium hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:Od?"...":""})]})}),Ut&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:""}),r.jsx("div",{id:"sales-mode-map",className:"w-full h-[300px] rounded-lg bg-gray-100"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" 500m "})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((Yx=Ut.overview)==null?void 0:Yx.population)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:" ()"})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((Qx=Ut.overview)==null?void 0:Qx.households)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:""})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((Jx=Ut.overview)==null?void 0:Jx.stores)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:" "})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((Xx=Ut.overview)==null?void 0:Xx.avgRent)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:" "})]})]}),r.jsx("button",{onClick:()=>{var a;return window.open((a=Ut.overview)==null?void 0:a.source,"_blank")},className:"mt-3 text-sm text-amber-600 hover:underline",children:" "})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:(Zx=Ut.consumers)==null?void 0:Zx.map((a,c)=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-700",children:a.label}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:`${a.percent}%`}})}),r.jsxs("span",{className:"text-sm text-gray-600 w-12 text-right",children:[a.percent,"%"]})]})]},c))}),r.jsx("button",{onClick:()=>{var a,c;return window.open((c=(a=Ut.consumers)==null?void 0:a[0])==null?void 0:c.source,"_blank")},className:"mt-3 text-sm text-amber-600 hover:underline",children:" "})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"  "}),r.jsx("div",{className:"space-y-2",children:(eg=Ut.franchises)==null?void 0:eg.map((a,c)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-700",children:a.name}),r.jsxs("span",{className:"font-medium text-gray-900",children:[a.count,""]})]},c))}),r.jsx("button",{onClick:()=>window.open("https://franchise.ftc.go.kr","_blank"),className:"mt-3 text-sm text-amber-600 hover:underline",children:" "})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("ul",{className:"space-y-2",children:(tg=Ut.development)==null?void 0:tg.map((a,c)=>r.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[r.jsx("span",{className:"text-green-500 mt-1",children:""}),r.jsx("span",{children:a})]},c))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("ul",{className:"space-y-2",children:(ng=Ut.risks)==null?void 0:ng.map((a,c)=>r.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[r.jsx("span",{className:"text-red-500 mt-1",children:""}),r.jsx("span",{children:a})]},c))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"seats",label:" ",unit:"",info:"    "},{key:"price",label:"",unit:"",info:" 1   "},{key:"turnover",label:"",unit:"",info:"    "},{key:"occupancy",label:"",unit:"%",info:"    "},{key:"rent",label:"",unit:"",info:"  ( )"},{key:"labor",label:"",unit:"",info:"  "},{key:"materialRate",label:"",unit:"%",info:"   "},{key:"otherCost",label:"",unit:"",info:",  "}].map(a=>r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-sm text-gray-600",children:a.label}),r.jsx("button",{onClick:()=>q_(Ef===a.key?null:a.key),className:"w-4 h-4 rounded-full bg-gray-200 text-gray-500 text-xs",children:"i"})]}),Ef===a.key&&r.jsx("div",{className:"absolute z-10 left-0 top-8 bg-gray-800 text-white text-xs p-2 rounded-lg shadow-lg max-w-[200px]",children:a.info}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"number",value:It[a.key],onChange:c=>Y_({...It,[a.key]:Number(c.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 text-right"}),r.jsx("span",{className:"text-sm text-gray-500 w-8",children:a.unit})]})]},a.key))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),(()=>{const c=It.seats*It.price*It.turnover*(It.occupancy/100)*30,h=c*(It.materialRate/100),p=It.rent*1e4+It.labor*1e4+h+It.otherCost*1e4,f=c-p;return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between p-3 bg-amber-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-700",children:"  "}),r.jsxs("span",{className:"font-bold text-amber-600",children:[Math.round(c/1e4).toLocaleString(),""]})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-700",children:"  "}),r.jsxs("span",{className:"font-medium text-gray-900",children:[Math.round(p/1e4).toLocaleString(),""]})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("span",{className:"text-gray-700",children:"  "}),r.jsxs("span",{className:`font-bold ${f>=0?"text-green-600":"text-red-600"}`,children:[Math.round(f/1e4).toLocaleString(),""]})]})]})})()]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:""}),(()=>{const a=(It.rent+It.labor+It.otherCost)*1e4,c=1-It.materialRate/100,h=a/c;return r.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Math.round(h/1e4).toLocaleString(),""]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     "})]})})()]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"  "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[r.jsx("p",{className:"font-medium text-amber-800",children:"  "}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"    "})]}),r.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[r.jsx("p",{className:"font-medium text-amber-800",children:" "}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"   "})]}),r.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[r.jsx("p",{className:"font-medium text-amber-800",children:" "}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"    "})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"  "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 text-gray-600",children:""}),r.jsx("th",{className:"text-right py-2 text-gray-600",children:""}),r.jsx("th",{className:"text-right py-2 text-amber-600",children:""})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-2 text-gray-700",children:" "}),r.jsx("td",{className:"text-right text-gray-900",children:"5,000~8,000"}),r.jsx("td",{className:"text-right text-amber-600 font-medium",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-2 text-gray-700",children:" "}),r.jsx("td",{className:"text-right text-gray-900",children:" 3~5%"}),r.jsx("td",{className:"text-right text-amber-600 font-medium",children:"0"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-gray-700",children:" "}),r.jsx("td",{className:"text-right text-gray-900",children:""}),r.jsx("td",{className:"text-right text-amber-600 font-medium",children:" "})]})]})]})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"AI "}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:Ut.insight||"   AI  ."})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsx("a",{href:"https://sg.sbiz.or.kr",target:"_blank",rel:"noopener noreferrer",className:"block text-amber-600 hover:underline",children:" "}),r.jsx("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener noreferrer",className:"block text-amber-600 hover:underline",children:" "}),r.jsx("a",{href:"https://kosis.kr",target:"_blank",rel:"noopener noreferrer",className:"block text-amber-600 hover:underline",children:" KOSIS"}),r.jsx("a",{href:"https://data.seoul.go.kr",target:"_blank",rel:"noopener noreferrer",className:"block text-amber-600 hover:underline",children:" "})]})]})]}),!Ut&&!Od&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"     "})]})]})}),Ha==="homepage"&&r.jsx("div",{className:"h-[calc(100vh-60px)] overflow-hidden",children:r.jsx("iframe",{src:"https://beancraft.co.kr",className:"w-full h-full border-0",title:" "})})]})]})};Sh.createRoot(document.getElementById("root")).render(r.jsx(a1.StrictMode,{children:r.jsx(WT,{})}));
