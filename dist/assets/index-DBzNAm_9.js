(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Kk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q_={exports:{}},eh={},J_={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),qk=Symbol.for("react.portal"),Yk=Symbol.for("react.fragment"),Qk=Symbol.for("react.strict_mode"),Jk=Symbol.for("react.profiler"),Xk=Symbol.for("react.provider"),Zk=Symbol.for("react.context"),eI=Symbol.for("react.forward_ref"),tI=Symbol.for("react.suspense"),nI=Symbol.for("react.memo"),sI=Symbol.for("react.lazy"),yy=Symbol.iterator;function rI(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var X_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,ew={};function nl(t,e,n){this.props=t,this.context=e,this.refs=ew,this.updater=n||X_}nl.prototype.isReactComponent={};nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tw(){}tw.prototype=nl.prototype;function bg(t,e,n){this.props=t,this.context=e,this.refs=ew,this.updater=n||X_}var _g=bg.prototype=new tw;_g.constructor=bg;Z_(_g,nl.prototype);_g.isPureReactComponent=!0;var by=Array.isArray,nw=Object.prototype.hasOwnProperty,wg={current:null},sw={key:!0,ref:!0,__self:!0,__source:!0};function rw(t,e,n){var s,i={},a=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)nw.call(e,s)&&!sw.hasOwnProperty(s)&&(i[s]=e[s]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];i.children=d}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)i[s]===void 0&&(i[s]=c[s]);return{$$typeof:nc,type:t,key:a,ref:l,props:i,_owner:wg.current}}function iI(t,e){return{$$typeof:nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ng(t){return typeof t=="object"&&t!==null&&t.$$typeof===nc}function aI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _y=/\/+/g;function sf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aI(""+t.key):e.toString(36)}function Vd(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case nc:case qk:l=!0}}if(l)return l=t,i=i(l),t=s===""?"."+sf(l,0):s,by(i)?(n="",t!=null&&(n=t.replace(_y,"$&/")+"/"),Vd(i,e,n,"",function(h){return h})):i!=null&&(Ng(i)&&(i=iI(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_y,"$&/")+"/")+t)),e.push(i)),1;if(l=0,s=s===""?".":s+":",by(t))for(var c=0;c<t.length;c++){a=t[c];var d=s+sf(a,c);l+=Vd(a,e,n,d,i)}else if(d=rI(t),typeof d=="function")for(t=d.call(t),c=0;!(a=t.next()).done;)a=a.value,d=s+sf(a,c++),l+=Vd(a,e,n,d,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Nd(t,e,n){if(t==null)return t;var s=[],i=0;return Vd(t,s,"","",function(a){return e.call(n,a,i++)}),s}function lI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Hd={transition:null},oI={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Hd,ReactCurrentOwner:wg};function iw(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Nd,forEach:function(t,e,n){Nd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nd(t,function(){e++}),e},toArray:function(t){return Nd(t,function(e){return e})||[]},only:function(t){if(!Ng(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=nl;be.Fragment=Yk;be.Profiler=Jk;be.PureComponent=bg;be.StrictMode=Qk;be.Suspense=tI;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oI;be.act=iw;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Z_({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=wg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)nw.call(e,d)&&!sw.hasOwnProperty(d)&&(s[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:nc,type:t.type,key:i,ref:a,props:s,_owner:l}};be.createContext=function(t){return t={$$typeof:Zk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xk,_context:t},t.Consumer=t};be.createElement=rw;be.createFactory=function(t){var e=rw.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:eI,render:t}};be.isValidElement=Ng;be.lazy=function(t){return{$$typeof:sI,_payload:{_status:-1,_result:t},_init:lI}};be.memo=function(t,e){return{$$typeof:nI,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Hd.transition;Hd.transition={};try{t()}finally{Hd.transition=e}};be.unstable_act=iw;be.useCallback=function(t,e){return Vt.current.useCallback(t,e)};be.useContext=function(t){return Vt.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};be.useEffect=function(t,e){return Vt.current.useEffect(t,e)};be.useId=function(){return Vt.current.useId()};be.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return Vt.current.useMemo(t,e)};be.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};be.useRef=function(t){return Vt.current.useRef(t)};be.useState=function(t){return Vt.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return Vt.current.useTransition()};be.version="18.3.1";J_.exports=be;var b=J_.exports;const cI=Kk(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI=b,uI=Symbol.for("react.element"),hI=Symbol.for("react.fragment"),mI=Object.prototype.hasOwnProperty,fI=dI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pI={key:!0,ref:!0,__self:!0,__source:!0};function aw(t,e,n){var s,i={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)mI.call(e,s)&&!pI.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:uI,type:t,key:a,ref:l,props:i,_owner:fI.current}}eh.Fragment=hI;eh.jsx=aw;eh.jsxs=aw;Q_.exports=eh;var r=Q_.exports,qf={},lw={exports:{}},yn={},ow={exports:{}},cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,ue){var he=B.length;B.push(ue);e:for(;0<he;){var Oe=he-1>>>1,ze=B[Oe];if(0<i(ze,ue))B[Oe]=ue,B[he]=ze,he=Oe;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ue=B[0],he=B.pop();if(he!==ue){B[0]=he;e:for(var Oe=0,ze=B.length,qr=ze>>>1;Oe<qr;){var ht=2*(Oe+1)-1,tt=B[ht],Ct=ht+1,Yr=B[Ct];if(0>i(tt,he))Ct<ze&&0>i(Yr,tt)?(B[Oe]=Yr,B[Ct]=he,Oe=Ct):(B[Oe]=tt,B[ht]=he,Oe=ht);else if(Ct<ze&&0>i(Yr,he))B[Oe]=Yr,B[Ct]=he,Oe=Ct;else break e}}return ue}function i(B,ue){var he=B.sortIndex-ue.sortIndex;return he!==0?he:B.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,p=null,y=3,k=!1,T=!1,L=!1,oe=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var ue=n(h);ue!==null;){if(ue.callback===null)s(h);else if(ue.startTime<=B)s(h),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(h)}}function D(B){if(L=!1,S(B),!T)if(n(d)!==null)T=!0,ys(K);else{var ue=n(h);ue!==null&&Kr(D,ue.startTime-B)}}function K(B,ue){T=!1,L&&(L=!1,C(Z),Z=-1),k=!0;var he=y;try{for(S(ue),p=n(d);p!==null&&(!(p.expirationTime>ue)||B&&!Ut());){var Oe=p.callback;if(typeof Oe=="function"){p.callback=null,y=p.priorityLevel;var ze=Oe(p.expirationTime<=ue);ue=t.unstable_now(),typeof ze=="function"?p.callback=ze:p===n(d)&&s(d),S(ue)}else s(d);p=n(d)}if(p!==null)var qr=!0;else{var ht=n(h);ht!==null&&Kr(D,ht.startTime-ue),qr=!1}return qr}finally{p=null,y=he,k=!1}}var Y=!1,J=null,Z=-1,Ie=5,pe=-1;function Ut(){return!(t.unstable_now()-pe<Ie)}function vs(){if(J!==null){var B=t.unstable_now();pe=B;var ue=!0;try{ue=J(!0,B)}finally{ue?Jn():(Y=!1,J=null)}}else Y=!1}var Jn;if(typeof w=="function")Jn=function(){w(vs)};else if(typeof MessageChannel<"u"){var Ki=new MessageChannel,Cc=Ki.port2;Ki.port1.onmessage=vs,Jn=function(){Cc.postMessage(null)}}else Jn=function(){oe(vs,0)};function ys(B){J=B,Y||(Y=!0,Jn())}function Kr(B,ue){Z=oe(function(){B(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||k||(T=!0,ys(K))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var he=y;y=ue;try{return B()}finally{y=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,ue){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var he=y;y=B;try{return ue()}finally{y=he}},t.unstable_scheduleCallback=function(B,ue,he){var Oe=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Oe+he:Oe):he=Oe,B){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=he+ze,B={id:g++,callback:ue,priorityLevel:B,startTime:he,expirationTime:ze,sortIndex:-1},he>Oe?(B.sortIndex=he,e(h,B),n(d)===null&&B===n(h)&&(L?(C(Z),Z=-1):L=!0,Kr(D,he-Oe))):(B.sortIndex=ze,e(d,B),T||k||(T=!0,ys(K))),B},t.unstable_shouldYield=Ut,t.unstable_wrapCallback=function(B){var ue=y;return function(){var he=y;y=ue;try{return B.apply(this,arguments)}finally{y=he}}}})(cw);ow.exports=cw;var gI=ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=b,gn=gI;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dw=new Set,_o={};function Ui(t,e){$a(t,e),$a(t+"Capture",e)}function $a(t,e){for(_o[t]=e,t=0;t<e.length;t++)dw.add(e[t])}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yf=Object.prototype.hasOwnProperty,vI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wy={},Ny={};function yI(t){return Yf.call(Ny,t)?!0:Yf.call(wy,t)?!1:vI.test(t)?Ny[t]=!0:(wy[t]=!0,!1)}function bI(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _I(t,e,n,s){if(e===null||typeof e>"u"||bI(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,s,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var jg=/[\-:]([a-z])/g;function Cg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jg,Cg);Tt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jg,Cg);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jg,Cg);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sg(t,e,n,s){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_I(e,n,i,s)&&(n=null),s||i===null?yI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Qs=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jd=Symbol.for("react.element"),pa=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Qf=Symbol.for("react.profiler"),uw=Symbol.for("react.provider"),hw=Symbol.for("react.context"),Ig=Symbol.for("react.forward_ref"),Jf=Symbol.for("react.suspense"),Xf=Symbol.for("react.suspense_list"),Eg=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),mw=Symbol.for("react.offscreen"),jy=Symbol.iterator;function Ll(t){return t===null||typeof t!="object"?null:(t=jy&&t[jy]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,rf;function Xl(t){if(rf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rf=e&&e[1]||""}return`
`+rf+t}var af=!1;function lf(t,e){if(!t||af)return"";af=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var s=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){s=h}t.call(e.prototype)}else{try{throw Error()}catch(h){s=h}t()}}catch(h){if(h&&s&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=s.stack.split(`
`),l=i.length-1,c=a.length-1;1<=l&&0<=c&&i[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==a[c]){var d=`
`+i[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{af=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xl(t):""}function wI(t){switch(t.tag){case 5:return Xl(t.type);case 16:return Xl("Lazy");case 13:return Xl("Suspense");case 19:return Xl("SuspenseList");case 0:case 2:case 15:return t=lf(t.type,!1),t;case 11:return t=lf(t.type.render,!1),t;case 1:return t=lf(t.type,!0),t;default:return""}}function Zf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ga:return"Fragment";case pa:return"Portal";case Qf:return"Profiler";case kg:return"StrictMode";case Jf:return"Suspense";case Xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hw:return(t.displayName||"Context")+".Consumer";case uw:return(t._context.displayName||"Context")+".Provider";case Ig:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Eg:return e=t.displayName||null,e!==null?e:Zf(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return Zf(t(e))}catch{}}return null}function NI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zf(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jI(t){var e=fw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cd(t){t._valueTracker||(t._valueTracker=jI(t))}function pw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=fw(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ep(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cy(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gw(t,e){e=e.checked,e!=null&&Sg(t,"checked",e,!1)}function tp(t,e){gw(t,e);var n=Rr(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?np(t,e.type,n):e.hasOwnProperty("defaultValue")&&np(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function np(t,e,n){(e!=="number"||au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zl=Array.isArray;function Ia(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ky(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Zl(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function xw(t,e){var n=Rr(e.value),s=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Iy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sd,yw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sd=Sd||document.createElement("div"),Sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CI=["Webkit","ms","Moz","O"];Object.keys(ro).forEach(function(t){CI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ro[e]=ro[t]})});function bw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ro.hasOwnProperty(t)&&ro[t]?(""+e).trim():e+"px"}function _w(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=bw(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var SI=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ip(t,e){if(e){if(SI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function ap(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lp=null;function Tg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var op=null,Ea=null,Ta=null;function Ey(t){if(t=ic(t)){if(typeof op!="function")throw Error(F(280));var e=t.stateNode;e&&(e=ih(e),op(t.stateNode,t.type,e))}}function ww(t){Ea?Ta?Ta.push(t):Ta=[t]:Ea=t}function Nw(){if(Ea){var t=Ea,e=Ta;if(Ta=Ea=null,Ey(t),e)for(t=0;t<e.length;t++)Ey(e[t])}}function jw(t,e){return t(e)}function Cw(){}var of=!1;function Sw(t,e,n){if(of)return t(e,n);of=!0;try{return jw(t,e,n)}finally{of=!1,(Ea!==null||Ta!==null)&&(Cw(),Nw())}}function No(t,e){var n=t.stateNode;if(n===null)return null;var s=ih(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var cp=!1;if(Bs)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){cp=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{cp=!1}function kI(t,e,n,s,i,a,l,c,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(g){this.onError(g)}}var io=!1,lu=null,ou=!1,dp=null,II={onError:function(t){io=!0,lu=t}};function EI(t,e,n,s,i,a,l,c,d){io=!1,lu=null,kI.apply(II,arguments)}function TI(t,e,n,s,i,a,l,c,d){if(EI.apply(this,arguments),io){if(io){var h=lu;io=!1,lu=null}else throw Error(F(198));ou||(ou=!0,dp=h)}}function $i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if($i(t)!==t)throw Error(F(188))}function RI(t){var e=t.alternate;if(!e){if(e=$i(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ty(i),t;if(a===s)return Ty(i),e;a=a.sibling}throw Error(F(188))}if(n.return!==s.return)n=i,s=a;else{for(var l=!1,c=i.child;c;){if(c===n){l=!0,n=i,s=a;break}if(c===s){l=!0,s=i,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,s=i;break}if(c===s){l=!0,s=a,n=i;break}c=c.sibling}if(!l)throw Error(F(189))}}if(n.alternate!==s)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Iw(t){return t=RI(t),t!==null?Ew(t):null}function Ew(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ew(t);if(e!==null)return e;t=t.sibling}return null}var Tw=gn.unstable_scheduleCallback,Ry=gn.unstable_cancelCallback,PI=gn.unstable_shouldYield,AI=gn.unstable_requestPaint,et=gn.unstable_now,OI=gn.unstable_getCurrentPriorityLevel,Rg=gn.unstable_ImmediatePriority,Rw=gn.unstable_UserBlockingPriority,cu=gn.unstable_NormalPriority,MI=gn.unstable_LowPriority,Pw=gn.unstable_IdlePriority,th=null,hs=null;function DI(t){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(th,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:UI,LI=Math.log,FI=Math.LN2;function UI(t){return t>>>=0,t===0?32:31-(LI(t)/FI|0)|0}var kd=64,Id=4194304;function eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function du(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~i;c!==0?s=eo(c):(a&=l,a!==0&&(s=eo(a)))}else l=n&~i,l!==0?s=eo(l):a!==0&&(s=eo(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Vn(e),i=1<<n,s|=t[n],e&=~i;return s}function $I(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WI(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Vn(a),c=1<<l,d=i[l];d===-1?(!(c&n)||c&s)&&(i[l]=$I(c,e)):d<=e&&(t.expiredLanes|=c),a&=~c}}function up(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Aw(){var t=kd;return kd<<=1,!(kd&4194240)&&(kd=64),t}function cf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function zI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vn(n),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~a}}function Pg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Vn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var Re=0;function Ow(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mw,Ag,Dw,Lw,Fw,hp=!1,Ed=[],yr=null,br=null,_r=null,jo=new Map,Co=new Map,hr=[],BI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Py(t,e){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function Ul(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=ic(e),e!==null&&Ag(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function VI(t,e,n,s,i){switch(e){case"focusin":return yr=Ul(yr,t,e,n,s,i),!0;case"dragenter":return br=Ul(br,t,e,n,s,i),!0;case"mouseover":return _r=Ul(_r,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return jo.set(a,Ul(jo.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Co.set(a,Ul(Co.get(a)||null,t,e,n,s,i)),!0}return!1}function Uw(t){var e=xi(t.target);if(e!==null){var n=$i(e);if(n!==null){if(e=n.tag,e===13){if(e=kw(n),e!==null){t.blockedOn=e,Fw(t.priority,function(){Dw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);lp=s,n.target.dispatchEvent(s),lp=null}else return e=ic(n),e!==null&&Ag(e),t.blockedOn=n,!1;e.shift()}return!0}function Ay(t,e,n){Gd(t)&&n.delete(e)}function HI(){hp=!1,yr!==null&&Gd(yr)&&(yr=null),br!==null&&Gd(br)&&(br=null),_r!==null&&Gd(_r)&&(_r=null),jo.forEach(Ay),Co.forEach(Ay)}function $l(t,e){t.blockedOn===e&&(t.blockedOn=null,hp||(hp=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,HI)))}function So(t){function e(i){return $l(i,t)}if(0<Ed.length){$l(Ed[0],t);for(var n=1;n<Ed.length;n++){var s=Ed[n];s.blockedOn===t&&(s.blockedOn=null)}}for(yr!==null&&$l(yr,t),br!==null&&$l(br,t),_r!==null&&$l(_r,t),jo.forEach(e),Co.forEach(e),n=0;n<hr.length;n++)s=hr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)Uw(n),n.blockedOn===null&&hr.shift()}var Ra=Qs.ReactCurrentBatchConfig,uu=!0;function GI(t,e,n,s){var i=Re,a=Ra.transition;Ra.transition=null;try{Re=1,Og(t,e,n,s)}finally{Re=i,Ra.transition=a}}function KI(t,e,n,s){var i=Re,a=Ra.transition;Ra.transition=null;try{Re=4,Og(t,e,n,s)}finally{Re=i,Ra.transition=a}}function Og(t,e,n,s){if(uu){var i=mp(t,e,n,s);if(i===null)yf(t,e,s,hu,n),Py(t,s);else if(VI(i,t,e,n,s))s.stopPropagation();else if(Py(t,s),e&4&&-1<BI.indexOf(t)){for(;i!==null;){var a=ic(i);if(a!==null&&Mw(a),a=mp(t,e,n,s),a===null&&yf(t,e,s,hu,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else yf(t,e,s,null,n)}}var hu=null;function mp(t,e,n,s){if(hu=null,t=Tg(s),t=xi(t),t!==null)if(e=$i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hu=t,null}function $w(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OI()){case Rg:return 1;case Rw:return 4;case cu:case MI:return 16;case Pw:return 536870912;default:return 16}default:return 16}}var fr=null,Mg=null,Kd=null;function Ww(){if(Kd)return Kd;var t,e=Mg,n=e.length,s,i="value"in fr?fr.value:fr.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(s=1;s<=l&&e[n-s]===i[a-s];s++);return Kd=i.slice(t,1<s?1-s:void 0)}function qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Td(){return!0}function Oy(){return!1}function bn(t){function e(n,s,i,a,l){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Td:Oy,this.isPropagationStopped=Oy,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),e}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dg=bn(sl),rc=Ke({},sl,{view:0,detail:0}),qI=bn(rc),df,uf,Wl,nh=Ke({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wl&&(Wl&&t.type==="mousemove"?(df=t.screenX-Wl.screenX,uf=t.screenY-Wl.screenY):uf=df=0,Wl=t),df)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),My=bn(nh),YI=Ke({},nh,{dataTransfer:0}),QI=bn(YI),JI=Ke({},rc,{relatedTarget:0}),hf=bn(JI),XI=Ke({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),ZI=bn(XI),eE=Ke({},sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tE=bn(eE),nE=Ke({},sl,{data:0}),Dy=bn(nE),sE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iE[t])?!!e[t]:!1}function Lg(){return aE}var lE=Ke({},rc,{key:function(t){if(t.key){var e=sE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lg,charCode:function(t){return t.type==="keypress"?qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oE=bn(lE),cE=Ke({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=bn(cE),dE=Ke({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lg}),uE=bn(dE),hE=Ke({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mE=bn(hE),fE=Ke({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pE=bn(fE),gE=[9,13,27,32],Fg=Bs&&"CompositionEvent"in window,ao=null;Bs&&"documentMode"in document&&(ao=document.documentMode);var xE=Bs&&"TextEvent"in window&&!ao,zw=Bs&&(!Fg||ao&&8<ao&&11>=ao),Fy=" ",Uy=!1;function Bw(t,e){switch(t){case"keyup":return gE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function vE(t,e){switch(t){case"compositionend":return Vw(e);case"keypress":return e.which!==32?null:(Uy=!0,Fy);case"textInput":return t=e.data,t===Fy&&Uy?null:t;default:return null}}function yE(t,e){if(xa)return t==="compositionend"||!Fg&&Bw(t,e)?(t=Ww(),Kd=Mg=fr=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zw&&e.locale!=="ko"?null:e.data;default:return null}}var bE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bE[t.type]:e==="textarea"}function Hw(t,e,n,s){ww(s),e=mu(e,"onChange"),0<e.length&&(n=new Dg("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var lo=null,ko=null;function _E(t){nN(t,0)}function sh(t){var e=ba(t);if(pw(e))return t}function wE(t,e){if(t==="change")return e}var Gw=!1;if(Bs){var mf;if(Bs){var ff="oninput"in document;if(!ff){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),ff=typeof Wy.oninput=="function"}mf=ff}else mf=!1;Gw=mf&&(!document.documentMode||9<document.documentMode)}function zy(){lo&&(lo.detachEvent("onpropertychange",Kw),ko=lo=null)}function Kw(t){if(t.propertyName==="value"&&sh(ko)){var e=[];Hw(e,ko,t,Tg(t)),Sw(_E,e)}}function NE(t,e,n){t==="focusin"?(zy(),lo=e,ko=n,lo.attachEvent("onpropertychange",Kw)):t==="focusout"&&zy()}function jE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sh(ko)}function CE(t,e){if(t==="click")return sh(e)}function SE(t,e){if(t==="input"||t==="change")return sh(e)}function kE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:kE;function Io(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Yf.call(e,i)||!qn(t[i],e[i]))return!1}return!0}function By(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vy(t,e){var n=By(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=By(n)}}function qw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yw(){for(var t=window,e=au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=au(t.document)}return e}function Ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IE(t){var e=Yw(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qw(n.ownerDocument.documentElement,n)){if(s!==null&&Ug(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=Vy(n,a);var l=Vy(n,s);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EE=Bs&&"documentMode"in document&&11>=document.documentMode,va=null,fp=null,oo=null,pp=!1;function Hy(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pp||va==null||va!==au(s)||(s=va,"selectionStart"in s&&Ug(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),oo&&Io(oo,s)||(oo=s,s=mu(fp,"onSelect"),0<s.length&&(e=new Dg("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=va)))}function Rd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ya={animationend:Rd("Animation","AnimationEnd"),animationiteration:Rd("Animation","AnimationIteration"),animationstart:Rd("Animation","AnimationStart"),transitionend:Rd("Transition","TransitionEnd")},pf={},Qw={};Bs&&(Qw=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function rh(t){if(pf[t])return pf[t];if(!ya[t])return t;var e=ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qw)return pf[t]=e[n];return t}var Jw=rh("animationend"),Xw=rh("animationiteration"),Zw=rh("animationstart"),eN=rh("transitionend"),tN=new Map,Gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,e){tN.set(t,e),Ui(e,[t])}for(var gf=0;gf<Gy.length;gf++){var xf=Gy[gf],TE=xf.toLowerCase(),RE=xf[0].toUpperCase()+xf.slice(1);Wr(TE,"on"+RE)}Wr(Jw,"onAnimationEnd");Wr(Xw,"onAnimationIteration");Wr(Zw,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(eN,"onTransitionEnd");$a("onMouseEnter",["mouseout","mouseover"]);$a("onMouseLeave",["mouseout","mouseover"]);$a("onPointerEnter",["pointerout","pointerover"]);$a("onPointerLeave",["pointerout","pointerover"]);Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PE=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function Ky(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,TI(s,e,void 0,t),t.currentTarget=null}function nN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var l=s.length-1;0<=l;l--){var c=s[l],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;Ky(i,c,h),a=d}else for(l=0;l<s.length;l++){if(c=s[l],d=c.instance,h=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;Ky(i,c,h),a=d}}}if(ou)throw t=dp,ou=!1,dp=null,t}function Fe(t,e){var n=e[bp];n===void 0&&(n=e[bp]=new Set);var s=t+"__bubble";n.has(s)||(sN(e,t,2,!1),n.add(s))}function vf(t,e,n){var s=0;e&&(s|=4),sN(n,t,s,e)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[Pd]){t[Pd]=!0,dw.forEach(function(n){n!=="selectionchange"&&(PE.has(n)||vf(n,!1,t),vf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pd]||(e[Pd]=!0,vf("selectionchange",!1,e))}}function sN(t,e,n,s){switch($w(e)){case 1:var i=GI;break;case 4:i=KI;break;default:i=Og}n=i.bind(null,e,n,t),i=void 0,!cp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yf(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var c=s.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=xi(c),l===null)return;if(d=l.tag,d===5||d===6){s=a=l;continue e}c=c.parentNode}}s=s.return}Sw(function(){var h=a,g=Tg(n),p=[];e:{var y=tN.get(t);if(y!==void 0){var k=Dg,T=t;switch(t){case"keypress":if(qd(n)===0)break e;case"keydown":case"keyup":k=oE;break;case"focusin":T="focus",k=hf;break;case"focusout":T="blur",k=hf;break;case"beforeblur":case"afterblur":k=hf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=My;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=QI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=uE;break;case Jw:case Xw:case Zw:k=ZI;break;case eN:k=mE;break;case"scroll":k=qI;break;case"wheel":k=pE;break;case"copy":case"cut":case"paste":k=tE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Ly}var L=(e&4)!==0,oe=!L&&t==="scroll",C=L?y!==null?y+"Capture":null:y;L=[];for(var w=h,S;w!==null;){S=w;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,C!==null&&(D=No(w,C),D!=null&&L.push(To(w,D,S)))),oe)break;w=w.return}0<L.length&&(y=new k(y,T,null,n,g),p.push({event:y,listeners:L}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",y&&n!==lp&&(T=n.relatedTarget||n.fromElement)&&(xi(T)||T[Vs]))break e;if((k||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,k?(T=n.relatedTarget||n.toElement,k=h,T=T?xi(T):null,T!==null&&(oe=$i(T),T!==oe||T.tag!==5&&T.tag!==6)&&(T=null)):(k=null,T=h),k!==T)){if(L=My,D="onMouseLeave",C="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(L=Ly,D="onPointerLeave",C="onPointerEnter",w="pointer"),oe=k==null?y:ba(k),S=T==null?y:ba(T),y=new L(D,w+"leave",k,n,g),y.target=oe,y.relatedTarget=S,D=null,xi(g)===h&&(L=new L(C,w+"enter",T,n,g),L.target=S,L.relatedTarget=oe,D=L),oe=D,k&&T)t:{for(L=k,C=T,w=0,S=L;S;S=ha(S))w++;for(S=0,D=C;D;D=ha(D))S++;for(;0<w-S;)L=ha(L),w--;for(;0<S-w;)C=ha(C),S--;for(;w--;){if(L===C||C!==null&&L===C.alternate)break t;L=ha(L),C=ha(C)}L=null}else L=null;k!==null&&qy(p,y,k,L,!1),T!==null&&oe!==null&&qy(p,oe,T,L,!0)}}e:{if(y=h?ba(h):window,k=y.nodeName&&y.nodeName.toLowerCase(),k==="select"||k==="input"&&y.type==="file")var K=wE;else if($y(y))if(Gw)K=SE;else{K=jE;var Y=NE}else(k=y.nodeName)&&k.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(K=CE);if(K&&(K=K(t,h))){Hw(p,K,n,g);break e}Y&&Y(t,y,h),t==="focusout"&&(Y=y._wrapperState)&&Y.controlled&&y.type==="number"&&np(y,"number",y.value)}switch(Y=h?ba(h):window,t){case"focusin":($y(Y)||Y.contentEditable==="true")&&(va=Y,fp=h,oo=null);break;case"focusout":oo=fp=va=null;break;case"mousedown":pp=!0;break;case"contextmenu":case"mouseup":case"dragend":pp=!1,Hy(p,n,g);break;case"selectionchange":if(EE)break;case"keydown":case"keyup":Hy(p,n,g)}var J;if(Fg)e:{switch(t){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else xa?Bw(t,n)&&(Z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Z="onCompositionStart");Z&&(zw&&n.locale!=="ko"&&(xa||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&xa&&(J=Ww()):(fr=g,Mg="value"in fr?fr.value:fr.textContent,xa=!0)),Y=mu(h,Z),0<Y.length&&(Z=new Dy(Z,t,null,n,g),p.push({event:Z,listeners:Y}),J?Z.data=J:(J=Vw(n),J!==null&&(Z.data=J)))),(J=xE?vE(t,n):yE(t,n))&&(h=mu(h,"onBeforeInput"),0<h.length&&(g=new Dy("onBeforeInput","beforeinput",null,n,g),p.push({event:g,listeners:h}),g.data=J))}nN(p,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mu(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=No(t,n),a!=null&&s.unshift(To(t,a,i)),a=No(t,e),a!=null&&s.push(To(t,a,i))),t=t.return}return s}function ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qy(t,e,n,s,i){for(var a=e._reactName,l=[];n!==null&&n!==s;){var c=n,d=c.alternate,h=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&h!==null&&(c=h,i?(d=No(n,a),d!=null&&l.unshift(To(n,d,c))):i||(d=No(n,a),d!=null&&l.push(To(n,d,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var AE=/\r\n?/g,OE=/\u0000|\uFFFD/g;function Yy(t){return(typeof t=="string"?t:""+t).replace(AE,`
`).replace(OE,"")}function Ad(t,e,n){if(e=Yy(e),Yy(t)!==e&&n)throw Error(F(425))}function fu(){}var gp=null,xp=null;function vp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,DE=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(LE)}:yp;function LE(t){setTimeout(function(){throw t})}function bf(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),So(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);So(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rl=Math.random().toString(36).slice(2),as="__reactFiber$"+rl,Ro="__reactProps$"+rl,Vs="__reactContainer$"+rl,bp="__reactEvents$"+rl,FE="__reactListeners$"+rl,UE="__reactHandles$"+rl;function xi(t){var e=t[as];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vs]||n[as]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jy(t);t!==null;){if(n=t[as])return n;t=Jy(t)}return e}t=n,n=t.parentNode}return null}function ic(t){return t=t[as]||t[Vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ba(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function ih(t){return t[Ro]||null}var _p=[],_a=-1;function zr(t){return{current:t}}function Ue(t){0>_a||(t.current=_p[_a],_p[_a]=null,_a--)}function De(t,e){_a++,_p[_a]=t.current,t.current=e}var Pr={},Ft=zr(Pr),tn=zr(!1),ki=Pr;function Wa(t,e){var n=t.type.contextTypes;if(!n)return Pr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function pu(){Ue(tn),Ue(Ft)}function Xy(t,e,n){if(Ft.current!==Pr)throw Error(F(168));De(Ft,e),De(tn,n)}function rN(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(F(108,NI(t)||"Unknown",i));return Ke({},n,s)}function gu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,ki=Ft.current,De(Ft,t),De(tn,tn.current),!0}function Zy(t,e,n){var s=t.stateNode;if(!s)throw Error(F(169));n?(t=rN(t,e,ki),s.__reactInternalMemoizedMergedChildContext=t,Ue(tn),Ue(Ft),De(Ft,t)):Ue(tn),De(tn,n)}var As=null,ah=!1,_f=!1;function iN(t){As===null?As=[t]:As.push(t)}function $E(t){ah=!0,iN(t)}function Br(){if(!_f&&As!==null){_f=!0;var t=0,e=Re;try{var n=As;for(Re=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}As=null,ah=!1}catch(i){throw As!==null&&(As=As.slice(t+1)),Tw(Rg,Br),i}finally{Re=e,_f=!1}}return null}var wa=[],Na=0,xu=null,vu=0,Nn=[],jn=0,Ii=null,Os=1,Ms="";function mi(t,e){wa[Na++]=vu,wa[Na++]=xu,xu=t,vu=e}function aN(t,e,n){Nn[jn++]=Os,Nn[jn++]=Ms,Nn[jn++]=Ii,Ii=t;var s=Os;t=Ms;var i=32-Vn(s)-1;s&=~(1<<i),n+=1;var a=32-Vn(e)+i;if(30<a){var l=i-i%5;a=(s&(1<<l)-1).toString(32),s>>=l,i-=l,Os=1<<32-Vn(e)+i|n<<i|s,Ms=a+t}else Os=1<<a|n<<i|s,Ms=t}function $g(t){t.return!==null&&(mi(t,1),aN(t,1,0))}function Wg(t){for(;t===xu;)xu=wa[--Na],wa[Na]=null,vu=wa[--Na],wa[Na]=null;for(;t===Ii;)Ii=Nn[--jn],Nn[jn]=null,Ms=Nn[--jn],Nn[jn]=null,Os=Nn[--jn],Nn[jn]=null}var pn=null,mn=null,$e=!1,zn=null;function lN(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,mn=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:Os,overflow:Ms}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,mn=null,!0):!1;default:return!1}}function wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Np(t){if($e){var e=mn;if(e){var n=e;if(!eb(t,e)){if(wp(t))throw Error(F(418));e=wr(n.nextSibling);var s=pn;e&&eb(t,e)?lN(s,n):(t.flags=t.flags&-4097|2,$e=!1,pn=t)}}else{if(wp(t))throw Error(F(418));t.flags=t.flags&-4097|2,$e=!1,pn=t}}}function tb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function Od(t){if(t!==pn)return!1;if(!$e)return tb(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vp(t.type,t.memoizedProps)),e&&(e=mn)){if(wp(t))throw oN(),Error(F(418));for(;e;)lN(t,e),e=wr(e.nextSibling)}if(tb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=pn?wr(t.stateNode.nextSibling):null;return!0}function oN(){for(var t=mn;t;)t=wr(t.nextSibling)}function za(){mn=pn=null,$e=!1}function zg(t){zn===null?zn=[t]:zn.push(t)}var WE=Qs.ReactCurrentBatchConfig;function zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var s=n.stateNode}if(!s)throw Error(F(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=i.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Md(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nb(t){var e=t._init;return e(t._payload)}function cN(t){function e(C,w){if(t){var S=C.deletions;S===null?(C.deletions=[w],C.flags|=16):S.push(w)}}function n(C,w){if(!t)return null;for(;w!==null;)e(C,w),w=w.sibling;return null}function s(C,w){for(C=new Map;w!==null;)w.key!==null?C.set(w.key,w):C.set(w.index,w),w=w.sibling;return C}function i(C,w){return C=Sr(C,w),C.index=0,C.sibling=null,C}function a(C,w,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<w?(C.flags|=2,w):S):(C.flags|=2,w)):(C.flags|=1048576,w)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,w,S,D){return w===null||w.tag!==6?(w=If(S,C.mode,D),w.return=C,w):(w=i(w,S),w.return=C,w)}function d(C,w,S,D){var K=S.type;return K===ga?g(C,w,S.props.children,D,S.key):w!==null&&(w.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===dr&&nb(K)===w.type)?(D=i(w,S.props),D.ref=zl(C,w,S),D.return=C,D):(D=tu(S.type,S.key,S.props,null,C.mode,D),D.ref=zl(C,w,S),D.return=C,D)}function h(C,w,S,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Ef(S,C.mode,D),w.return=C,w):(w=i(w,S.children||[]),w.return=C,w)}function g(C,w,S,D,K){return w===null||w.tag!==7?(w=Ni(S,C.mode,D,K),w.return=C,w):(w=i(w,S),w.return=C,w)}function p(C,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=If(""+w,C.mode,S),w.return=C,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jd:return S=tu(w.type,w.key,w.props,null,C.mode,S),S.ref=zl(C,null,w),S.return=C,S;case pa:return w=Ef(w,C.mode,S),w.return=C,w;case dr:var D=w._init;return p(C,D(w._payload),S)}if(Zl(w)||Ll(w))return w=Ni(w,C.mode,S,null),w.return=C,w;Md(C,w)}return null}function y(C,w,S,D){var K=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return K!==null?null:c(C,w,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case jd:return S.key===K?d(C,w,S,D):null;case pa:return S.key===K?h(C,w,S,D):null;case dr:return K=S._init,y(C,w,K(S._payload),D)}if(Zl(S)||Ll(S))return K!==null?null:g(C,w,S,D,null);Md(C,S)}return null}function k(C,w,S,D,K){if(typeof D=="string"&&D!==""||typeof D=="number")return C=C.get(S)||null,c(w,C,""+D,K);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case jd:return C=C.get(D.key===null?S:D.key)||null,d(w,C,D,K);case pa:return C=C.get(D.key===null?S:D.key)||null,h(w,C,D,K);case dr:var Y=D._init;return k(C,w,S,Y(D._payload),K)}if(Zl(D)||Ll(D))return C=C.get(S)||null,g(w,C,D,K,null);Md(w,D)}return null}function T(C,w,S,D){for(var K=null,Y=null,J=w,Z=w=0,Ie=null;J!==null&&Z<S.length;Z++){J.index>Z?(Ie=J,J=null):Ie=J.sibling;var pe=y(C,J,S[Z],D);if(pe===null){J===null&&(J=Ie);break}t&&J&&pe.alternate===null&&e(C,J),w=a(pe,w,Z),Y===null?K=pe:Y.sibling=pe,Y=pe,J=Ie}if(Z===S.length)return n(C,J),$e&&mi(C,Z),K;if(J===null){for(;Z<S.length;Z++)J=p(C,S[Z],D),J!==null&&(w=a(J,w,Z),Y===null?K=J:Y.sibling=J,Y=J);return $e&&mi(C,Z),K}for(J=s(C,J);Z<S.length;Z++)Ie=k(J,C,Z,S[Z],D),Ie!==null&&(t&&Ie.alternate!==null&&J.delete(Ie.key===null?Z:Ie.key),w=a(Ie,w,Z),Y===null?K=Ie:Y.sibling=Ie,Y=Ie);return t&&J.forEach(function(Ut){return e(C,Ut)}),$e&&mi(C,Z),K}function L(C,w,S,D){var K=Ll(S);if(typeof K!="function")throw Error(F(150));if(S=K.call(S),S==null)throw Error(F(151));for(var Y=K=null,J=w,Z=w=0,Ie=null,pe=S.next();J!==null&&!pe.done;Z++,pe=S.next()){J.index>Z?(Ie=J,J=null):Ie=J.sibling;var Ut=y(C,J,pe.value,D);if(Ut===null){J===null&&(J=Ie);break}t&&J&&Ut.alternate===null&&e(C,J),w=a(Ut,w,Z),Y===null?K=Ut:Y.sibling=Ut,Y=Ut,J=Ie}if(pe.done)return n(C,J),$e&&mi(C,Z),K;if(J===null){for(;!pe.done;Z++,pe=S.next())pe=p(C,pe.value,D),pe!==null&&(w=a(pe,w,Z),Y===null?K=pe:Y.sibling=pe,Y=pe);return $e&&mi(C,Z),K}for(J=s(C,J);!pe.done;Z++,pe=S.next())pe=k(J,C,Z,pe.value,D),pe!==null&&(t&&pe.alternate!==null&&J.delete(pe.key===null?Z:pe.key),w=a(pe,w,Z),Y===null?K=pe:Y.sibling=pe,Y=pe);return t&&J.forEach(function(vs){return e(C,vs)}),$e&&mi(C,Z),K}function oe(C,w,S,D){if(typeof S=="object"&&S!==null&&S.type===ga&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case jd:e:{for(var K=S.key,Y=w;Y!==null;){if(Y.key===K){if(K=S.type,K===ga){if(Y.tag===7){n(C,Y.sibling),w=i(Y,S.props.children),w.return=C,C=w;break e}}else if(Y.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===dr&&nb(K)===Y.type){n(C,Y.sibling),w=i(Y,S.props),w.ref=zl(C,Y,S),w.return=C,C=w;break e}n(C,Y);break}else e(C,Y);Y=Y.sibling}S.type===ga?(w=Ni(S.props.children,C.mode,D,S.key),w.return=C,C=w):(D=tu(S.type,S.key,S.props,null,C.mode,D),D.ref=zl(C,w,S),D.return=C,C=D)}return l(C);case pa:e:{for(Y=S.key;w!==null;){if(w.key===Y)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(C,w.sibling),w=i(w,S.children||[]),w.return=C,C=w;break e}else{n(C,w);break}else e(C,w);w=w.sibling}w=Ef(S,C.mode,D),w.return=C,C=w}return l(C);case dr:return Y=S._init,oe(C,w,Y(S._payload),D)}if(Zl(S))return T(C,w,S,D);if(Ll(S))return L(C,w,S,D);Md(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(C,w.sibling),w=i(w,S),w.return=C,C=w):(n(C,w),w=If(S,C.mode,D),w.return=C,C=w),l(C)):n(C,w)}return oe}var Ba=cN(!0),dN=cN(!1),yu=zr(null),bu=null,ja=null,Bg=null;function Vg(){Bg=ja=bu=null}function Hg(t){var e=yu.current;Ue(yu),t._currentValue=e}function jp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Pa(t,e){bu=t,Bg=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(Bg!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(bu===null)throw Error(F(308));ja=t,bu.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var vi=null;function Gg(t){vi===null?vi=[t]:vi.push(t)}function uN(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,Gg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Hs(t,s)}function Hs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function Kg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,_e&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Hs(t,n)}return i=s.interleaved,i===null?(e.next=e,Gg(s)):(e.next=i.next,i.next=e),s.interleaved=e,Hs(t,n)}function Yd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Pg(t,n)}}function sb(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _u(t,e,n,s){var i=t.updateQueue;ur=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,h=d.next;d.next=null,l===null?a=h:l.next=h,l=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==l&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(a!==null){var p=i.baseState;l=0,g=h=d=null,c=a;do{var y=c.lane,k=c.eventTime;if((s&y)===y){g!==null&&(g=g.next={eventTime:k,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,L=c;switch(y=e,k=n,L.tag){case 1:if(T=L.payload,typeof T=="function"){p=T.call(k,p,y);break e}p=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=L.payload,y=typeof T=="function"?T.call(k,p,y):T,y==null)break e;p=Ke({},p,y);break e;case 2:ur=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[c]:y.push(c))}else k={eventTime:k,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=k,d=p):g=g.next=k,l|=y;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;y=c,c=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(g===null&&(d=p),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ti|=l,t.lanes=l,t.memoizedState=p}}function rb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(F(191,i));i.call(s)}}}var ac={},ms=zr(ac),Po=zr(ac),Ao=zr(ac);function yi(t){if(t===ac)throw Error(F(174));return t}function qg(t,e){switch(De(Ao,e),De(Po,t),De(ms,ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rp(e,t)}Ue(ms),De(ms,e)}function Va(){Ue(ms),Ue(Po),Ue(Ao)}function mN(t){yi(Ao.current);var e=yi(ms.current),n=rp(e,t.type);e!==n&&(De(Po,t),De(ms,n))}function Yg(t){Po.current===t&&(Ue(ms),Ue(Po))}var Ve=zr(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function Qg(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var Qd=Qs.ReactCurrentDispatcher,Nf=Qs.ReactCurrentBatchConfig,Ei=0,Ge=null,lt=null,vt=null,Nu=!1,co=!1,Oo=0,zE=0;function Ot(){throw Error(F(321))}function Jg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qn(t[n],e[n]))return!1;return!0}function Xg(t,e,n,s,i,a){if(Ei=a,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qd.current=t===null||t.memoizedState===null?GE:KE,t=n(s,i),co){a=0;do{if(co=!1,Oo=0,25<=a)throw Error(F(301));a+=1,vt=lt=null,e.updateQueue=null,Qd.current=qE,t=n(s,i)}while(co)}if(Qd.current=ju,e=lt!==null&&lt.next!==null,Ei=0,vt=lt=Ge=null,Nu=!1,e)throw Error(F(300));return t}function Zg(){var t=Oo!==0;return Oo=0,t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ge.memoizedState=vt=t:vt=vt.next=t,vt}function Pn(){if(lt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=vt===null?Ge.memoizedState:vt.next;if(e!==null)vt=e,lt=t;else{if(t===null)throw Error(F(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},vt===null?Ge.memoizedState=vt=t:vt=vt.next=t}return vt}function Mo(t,e){return typeof e=="function"?e(t):e}function jf(t){var e=Pn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var s=lt,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var c=l=null,d=null,h=a;do{var g=h.lane;if((Ei&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:t(s,h.action);else{var p={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=p,l=s):d=d.next=p,Ge.lanes|=g,Ti|=g}h=h.next}while(h!==null&&h!==a);d===null?l=s:d.next=c,qn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=d,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Ge.lanes|=a,Ti|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cf(t){var e=Pn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);qn(a,e.memoizedState)||(Zt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function fN(){}function pN(t,e){var n=Ge,s=Pn(),i=e(),a=!qn(s.memoizedState,i);if(a&&(s.memoizedState=i,Zt=!0),s=s.queue,ex(vN.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Do(9,xN.bind(null,n,s,i,e),void 0,null),wt===null)throw Error(F(349));Ei&30||gN(n,e,i)}return i}function gN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xN(t,e,n,s){e.value=n,e.getSnapshot=s,yN(e)&&bN(t)}function vN(t,e,n){return n(function(){yN(e)&&bN(t)})}function yN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qn(t,n)}catch{return!0}}function bN(t){var e=Hs(t,1);e!==null&&Hn(e,t,1,-1)}function ib(t){var e=is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},e.queue=t,t=t.dispatch=HE.bind(null,Ge,t),[e.memoizedState,t]}function Do(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function _N(){return Pn().memoizedState}function Jd(t,e,n,s){var i=is();Ge.flags|=t,i.memoizedState=Do(1|e,n,void 0,s===void 0?null:s)}function lh(t,e,n,s){var i=Pn();s=s===void 0?null:s;var a=void 0;if(lt!==null){var l=lt.memoizedState;if(a=l.destroy,s!==null&&Jg(s,l.deps)){i.memoizedState=Do(e,n,a,s);return}}Ge.flags|=t,i.memoizedState=Do(1|e,n,a,s)}function ab(t,e){return Jd(8390656,8,t,e)}function ex(t,e){return lh(2048,8,t,e)}function wN(t,e){return lh(4,2,t,e)}function NN(t,e){return lh(4,4,t,e)}function jN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CN(t,e,n){return n=n!=null?n.concat([t]):null,lh(4,4,jN.bind(null,e,t),n)}function tx(){}function SN(t,e){var n=Pn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Jg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function kN(t,e){var n=Pn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Jg(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function IN(t,e,n){return Ei&21?(qn(n,e)||(n=Aw(),Ge.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function BE(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var s=Nf.transition;Nf.transition={};try{t(!1),e()}finally{Re=n,Nf.transition=s}}function EN(){return Pn().memoizedState}function VE(t,e,n){var s=Cr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},TN(t))RN(e,n);else if(n=uN(t,e,n,s),n!==null){var i=Bt();Hn(n,t,s,i),PN(n,e,s)}}function HE(t,e,n){var s=Cr(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(TN(t))RN(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,n);if(i.hasEagerState=!0,i.eagerState=c,qn(c,l)){var d=e.interleaved;d===null?(i.next=i,Gg(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=uN(t,e,i,s),n!==null&&(i=Bt(),Hn(n,t,s,i),PN(n,e,s))}}function TN(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function RN(t,e){co=Nu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PN(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Pg(t,n)}}var ju={readContext:Rn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},GE={readContext:Rn,useCallback:function(t,e){return is().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:ab,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jd(4194308,4,jN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jd(4,2,t,e)},useMemo:function(t,e){var n=is();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=is();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=VE.bind(null,Ge,t),[s.memoizedState,t]},useRef:function(t){var e=is();return t={current:t},e.memoizedState=t},useState:ib,useDebugValue:tx,useDeferredValue:function(t){return is().memoizedState=t},useTransition:function(){var t=ib(!1),e=t[0];return t=BE.bind(null,t[1]),is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Ge,i=is();if($e){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),wt===null)throw Error(F(349));Ei&30||gN(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,ab(vN.bind(null,s,a,t),[t]),s.flags|=2048,Do(9,xN.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=is(),e=wt.identifierPrefix;if($e){var n=Ms,s=Os;n=(s&~(1<<32-Vn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KE={readContext:Rn,useCallback:SN,useContext:Rn,useEffect:ex,useImperativeHandle:CN,useInsertionEffect:wN,useLayoutEffect:NN,useMemo:kN,useReducer:jf,useRef:_N,useState:function(){return jf(Mo)},useDebugValue:tx,useDeferredValue:function(t){var e=Pn();return IN(e,lt.memoizedState,t)},useTransition:function(){var t=jf(Mo)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:fN,useSyncExternalStore:pN,useId:EN,unstable_isNewReconciler:!1},qE={readContext:Rn,useCallback:SN,useContext:Rn,useEffect:ex,useImperativeHandle:CN,useInsertionEffect:wN,useLayoutEffect:NN,useMemo:kN,useReducer:Cf,useRef:_N,useState:function(){return Cf(Mo)},useDebugValue:tx,useDeferredValue:function(t){var e=Pn();return lt===null?e.memoizedState=t:IN(e,lt.memoizedState,t)},useTransition:function(){var t=Cf(Mo)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:fN,useSyncExternalStore:pN,useId:EN,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cp(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oh={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Bt(),i=Cr(t),a=$s(s,i);a.payload=e,n!=null&&(a.callback=n),e=Nr(t,a,i),e!==null&&(Hn(e,t,i,s),Yd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Bt(),i=Cr(t),a=$s(s,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Nr(t,a,i),e!==null&&(Hn(e,t,i,s),Yd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),s=Cr(t),i=$s(n,s);i.tag=2,e!=null&&(i.callback=e),e=Nr(t,i,s),e!==null&&(Hn(e,t,s,n),Yd(e,t,s))}};function lb(t,e,n,s,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,l):e.prototype&&e.prototype.isPureReactComponent?!Io(n,s)||!Io(i,a):!0}function AN(t,e,n){var s=!1,i=Pr,a=e.contextType;return typeof a=="object"&&a!==null?a=Rn(a):(i=nn(e)?ki:Ft.current,s=e.contextTypes,a=(s=s!=null)?Wa(t,i):Pr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oh,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function ob(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&oh.enqueueReplaceState(e,e.state,null)}function Sp(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Kg(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Rn(a):(a=nn(e)?ki:Ft.current,i.context=Wa(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Cp(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oh.enqueueReplaceState(i,i.state,null),_u(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ha(t,e){try{var n="",s=e;do n+=wI(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YE=typeof WeakMap=="function"?WeakMap:Map;function ON(t,e,n){n=$s(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Su||(Su=!0,Lp=s),kp(t,e)},n}function MN(t,e,n){n=$s(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){kp(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){kp(t,e),typeof s!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function cb(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new YE;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=c2.bind(null,t,e,n),e.then(t,t))}function db(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ub(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$s(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var QE=Qs.ReactCurrentOwner,Zt=!1;function Wt(t,e,n,s){e.child=t===null?dN(e,null,n,s):Ba(e,t.child,n,s)}function hb(t,e,n,s,i){n=n.render;var a=e.ref;return Pa(e,i),s=Xg(t,e,n,s,a,i),n=Zg(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i)):($e&&n&&$g(e),e.flags|=1,Wt(t,e,s,i),e.child)}function mb(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!cx(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,DN(t,e,a,s,i)):(t=tu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(l,s)&&t.ref===e.ref)return Gs(t,e,i)}return e.flags|=1,t=Sr(a,s),t.ref=e.ref,t.return=e,e.child=t}function DN(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Io(a,s)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Gs(t,e,i)}return Ip(t,e,n,s,i)}function LN(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Sa,cn),cn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Sa,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,De(Sa,cn),cn|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,De(Sa,cn),cn|=s;return Wt(t,e,i,n),e.child}function FN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ip(t,e,n,s,i){var a=nn(n)?ki:Ft.current;return a=Wa(e,a),Pa(e,i),n=Xg(t,e,n,s,a,i),s=Zg(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i)):($e&&s&&$g(e),e.flags|=1,Wt(t,e,n,i),e.child)}function fb(t,e,n,s,i){if(nn(n)){var a=!0;gu(e)}else a=!1;if(Pa(e,i),e.stateNode===null)Xd(t,e),AN(e,n,s),Sp(e,n,s,i),s=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var d=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=Rn(h):(h=nn(n)?ki:Ft.current,h=Wa(e,h));var g=n.getDerivedStateFromProps,p=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==s||d!==h)&&ob(e,l,s,h),ur=!1;var y=e.memoizedState;l.state=y,_u(e,s,l,i),d=e.memoizedState,c!==s||y!==d||tn.current||ur?(typeof g=="function"&&(Cp(e,n,g,s),d=e.memoizedState),(c=ur||lb(e,n,c,s,y,d,h))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),l.props=s,l.state=d,l.context=h,s=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,hN(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:$n(e.type,c),l.props=h,p=e.pendingProps,y=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Rn(d):(d=nn(n)?ki:Ft.current,d=Wa(e,d));var k=n.getDerivedStateFromProps;(g=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==p||y!==d)&&ob(e,l,s,d),ur=!1,y=e.memoizedState,l.state=y,_u(e,s,l,i);var T=e.memoizedState;c!==p||y!==T||tn.current||ur?(typeof k=="function"&&(Cp(e,n,k,s),T=e.memoizedState),(h=ur||lb(e,n,h,s,y,T,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,T,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,T,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=T),l.props=s,l.state=T,l.context=d,s=h):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),s=!1)}return Ep(t,e,n,s,a,i)}function Ep(t,e,n,s,i,a){FN(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return i&&Zy(e,n,!1),Gs(t,e,a);s=e.stateNode,QE.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=Ba(e,t.child,null,a),e.child=Ba(e,null,c,a)):Wt(t,e,c,a),e.memoizedState=s.state,i&&Zy(e,n,!0),e.child}function UN(t){var e=t.stateNode;e.pendingContext?Xy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xy(t,e.context,!1),qg(t,e.containerInfo)}function pb(t,e,n,s,i){return za(),zg(i),e.flags|=256,Wt(t,e,n,s),e.child}var Tp={dehydrated:null,treeContext:null,retryLane:0};function Rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function $N(t,e,n){var s=e.pendingProps,i=Ve.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(Ve,i&1),t===null)return Np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=uh(l,s,0,null),t=Ni(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Rp(n),e.memoizedState=Tp,t):nx(e,l));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return JE(t,e,l,s,c,i,n);if(a){a=s.fallback,l=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=d,e.deletions=null):(s=Sr(i,d),s.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Sr(c,a):(a=Ni(a,l,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=t.child.memoizedState,l=l===null?Rp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Tp,s}return a=t.child,t=a.sibling,s=Sr(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function nx(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dd(t,e,n,s){return s!==null&&zg(s),Ba(e,t.child,null,n),t=nx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JE(t,e,n,s,i,a,l){if(n)return e.flags&256?(e.flags&=-257,s=Sf(Error(F(422))),Dd(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=uh({mode:"visible",children:s.children},i,0,null),a=Ni(a,i,l,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Ba(e,t.child,null,l),e.child.memoizedState=Rp(l),e.memoizedState=Tp,a);if(!(e.mode&1))return Dd(t,e,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(F(419)),s=Sf(a,s,void 0),Dd(t,e,l,s)}if(c=(l&t.childLanes)!==0,Zt||c){if(s=wt,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Hs(t,i),Hn(s,t,i,-1))}return ox(),s=Sf(Error(F(421))),Dd(t,e,l,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=d2.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,mn=wr(i.nextSibling),pn=e,$e=!0,zn=null,t!==null&&(Nn[jn++]=Os,Nn[jn++]=Ms,Nn[jn++]=Ii,Os=t.id,Ms=t.overflow,Ii=e),e=nx(e,s.children),e.flags|=4096,e)}function gb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),jp(t.return,e,n)}function kf(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function WN(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(Wt(t,e,s.children,n),s=Ve.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gb(t,n,e);else if(t.tag===19)gb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(De(Ve,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kf(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kf(e,!0,n,null,a);break;case"together":kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XE(t,e,n){switch(e.tag){case 3:UN(e),za();break;case 5:mN(e);break;case 1:nn(e.type)&&gu(e);break;case 4:qg(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;De(yu,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(De(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?$N(t,e,n):(De(Ve,Ve.current&1),t=Gs(t,e,n),t!==null?t.sibling:null);De(Ve,Ve.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return WN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(Ve,Ve.current),s)break;return null;case 22:case 23:return e.lanes=0,LN(t,e,n)}return Gs(t,e,n)}var zN,Pp,BN,VN;zN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pp=function(){};BN=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,yi(ms.current);var a=null;switch(n){case"input":i=ep(t,i),s=ep(t,s),a=[];break;case"select":i=Ke({},i,{value:void 0}),s=Ke({},s,{value:void 0}),a=[];break;case"textarea":i=sp(t,i),s=sp(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=fu)}ip(n,s);var l;n=null;for(h in i)if(!s.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(_o.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var d=s[h];if(c=i!=null?i[h]:void 0,s.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(_o.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Fe("scroll",t),a||c===d||(a=[])):(a=a||[]).push(h,d))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};VN=function(t,e,n,s){n!==s&&(e.flags|=4)};function Bl(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function ZE(t,e,n){var s=e.pendingProps;switch(Wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return nn(e.type)&&pu(),Mt(e),null;case 3:return s=e.stateNode,Va(),Ue(tn),Ue(Ft),Qg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Od(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&($p(zn),zn=null))),Pp(t,e),Mt(e),null;case 5:Yg(e);var i=yi(Ao.current);if(n=e.type,t!==null&&e.stateNode!=null)BN(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(F(166));return Mt(e),null}if(t=yi(ms.current),Od(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[as]=e,s[Ro]=a,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(i=0;i<to.length;i++)Fe(to[i],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Cy(s,a),Fe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Fe("invalid",s);break;case"textarea":ky(s,a),Fe("invalid",s)}ip(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&Ad(s.textContent,c,t),i=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Ad(s.textContent,c,t),i=["children",""+c]):_o.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Fe("scroll",s)}switch(n){case"input":Cd(s),Sy(s,a,!0);break;case"textarea":Cd(s),Iy(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=fu)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(n,{is:s.is}):(t=l.createElement(n),n==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,n),t[as]=e,t[Ro]=s,zN(t,e,!1,!1),e.stateNode=t;e:{switch(l=ap(n,s),n){case"dialog":Fe("cancel",t),Fe("close",t),i=s;break;case"iframe":case"object":case"embed":Fe("load",t),i=s;break;case"video":case"audio":for(i=0;i<to.length;i++)Fe(to[i],t);i=s;break;case"source":Fe("error",t),i=s;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=s;break;case"details":Fe("toggle",t),i=s;break;case"input":Cy(t,s),i=ep(t,s),Fe("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=Ke({},s,{value:void 0}),Fe("invalid",t);break;case"textarea":ky(t,s),i=sp(t,s),Fe("invalid",t);break;default:i=s}ip(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?_w(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&yw(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&wo(t,d):typeof d=="number"&&wo(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(_o.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Fe("scroll",t):d!=null&&Sg(t,a,d,l))}switch(n){case"input":Cd(t),Sy(t,s,!1);break;case"textarea":Cd(t),Iy(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Rr(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Ia(t,!!s.multiple,a,!1):s.defaultValue!=null&&Ia(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)VN(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(F(166));if(n=yi(Ao.current),yi(ms.current),Od(e)){if(s=e.stateNode,n=e.memoizedProps,s[as]=e,(a=s.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:Ad(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ad(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[as]=e,e.stateNode=s}return Mt(e),null;case 13:if(Ue(Ve),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&mn!==null&&e.mode&1&&!(e.flags&128))oN(),za(),e.flags|=98560,a=!1;else if(a=Od(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(F(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(F(317));a[as]=e}else za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),a=!1}else zn!==null&&($p(zn),zn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?ct===0&&(ct=3):ox())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Va(),Pp(t,e),t===null&&Eo(e.stateNode.containerInfo),Mt(e),null;case 10:return Hg(e.type._context),Mt(e),null;case 17:return nn(e.type)&&pu(),Mt(e),null;case 19:if(Ue(Ve),a=e.memoizedState,a===null)return Mt(e),null;if(s=(e.flags&128)!==0,l=a.rendering,l===null)if(s)Bl(a,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=wu(t),l!==null){for(e.flags|=128,Bl(a,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Ve,Ve.current&1|2),e.child}t=t.sibling}a.tail!==null&&et()>Ga&&(e.flags|=128,s=!0,Bl(a,!1),e.lanes=4194304)}else{if(!s)if(t=wu(l),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!$e)return Mt(e),null}else 2*et()-a.renderingStartTime>Ga&&n!==1073741824&&(e.flags|=128,s=!0,Bl(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=et(),e.sibling=null,n=Ve.current,De(Ve,s?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return lx(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?cn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function e2(t,e){switch(Wg(e),e.tag){case 1:return nn(e.type)&&pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),Ue(tn),Ue(Ft),Qg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yg(e),null;case 13:if(Ue(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ve),null;case 4:return Va(),null;case 10:return Hg(e.type._context),null;case 22:case 23:return lx(),null;case 24:return null;default:return null}}var Ld=!1,Dt=!1,t2=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ye(t,e,s)}else n.current=null}function Ap(t,e,n){try{n()}catch(s){Ye(t,e,s)}}var xb=!1;function n2(t,e){if(gp=uu,t=Yw(),Ug(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,h=0,g=0,p=t,y=null;t:for(;;){for(var k;p!==n||i!==0&&p.nodeType!==3||(c=l+i),p!==a||s!==0&&p.nodeType!==3||(d=l+s),p.nodeType===3&&(l+=p.nodeValue.length),(k=p.firstChild)!==null;)y=p,p=k;for(;;){if(p===t)break t;if(y===n&&++h===i&&(c=l),y===a&&++g===s&&(d=l),(k=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=k}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(xp={focusedElem:t,selectionRange:n},uu=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var L=T.memoizedProps,oe=T.memoizedState,C=e.stateNode,w=C.getSnapshotBeforeUpdate(e.elementType===e.type?L:$n(e.type,L),oe);C.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(D){Ye(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return T=xb,xb=!1,T}function uo(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Ap(e,n,a)}i=i.next}while(i!==s)}}function ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Op(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HN(t){var e=t.alternate;e!==null&&(t.alternate=null,HN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[Ro],delete e[bp],delete e[FE],delete e[UE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GN(t){return t.tag===5||t.tag===3||t.tag===4}function vb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mp(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fu));else if(s!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}function Dp(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Dp(t,e,n),t=t.sibling;t!==null;)Dp(t,e,n),t=t.sibling}var It=null,Wn=!1;function lr(t,e,n){for(n=n.child;n!==null;)KN(t,e,n),n=n.sibling}function KN(t,e,n){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(th,n)}catch{}switch(n.tag){case 5:Dt||Ca(n,e);case 6:var s=It,i=Wn;It=null,lr(t,e,n),It=s,Wn=i,It!==null&&(Wn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Wn?(t=It,n=n.stateNode,t.nodeType===8?bf(t.parentNode,n):t.nodeType===1&&bf(t,n),So(t)):bf(It,n.stateNode));break;case 4:s=It,i=Wn,It=n.stateNode.containerInfo,Wn=!0,lr(t,e,n),It=s,Wn=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Ap(n,e,l),i=i.next}while(i!==s)}lr(t,e,n);break;case 1:if(!Dt&&(Ca(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){Ye(n,e,c)}lr(t,e,n);break;case 21:lr(t,e,n);break;case 22:n.mode&1?(Dt=(s=Dt)||n.memoizedState!==null,lr(t,e,n),Dt=s):lr(t,e,n);break;default:lr(t,e,n)}}function yb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t2),e.forEach(function(s){var i=u2.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:It=c.stateNode,Wn=!1;break e;case 3:It=c.stateNode.containerInfo,Wn=!0;break e;case 4:It=c.stateNode.containerInfo,Wn=!0;break e}c=c.return}if(It===null)throw Error(F(160));KN(a,l,i),It=null,Wn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){Ye(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qN(e,t),e=e.sibling}function qN(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),rs(t),s&4){try{uo(3,t,t.return),ch(3,t)}catch(L){Ye(t,t.return,L)}try{uo(5,t,t.return)}catch(L){Ye(t,t.return,L)}}break;case 1:Fn(e,t),rs(t),s&512&&n!==null&&Ca(n,n.return);break;case 5:if(Fn(e,t),rs(t),s&512&&n!==null&&Ca(n,n.return),t.flags&32){var i=t.stateNode;try{wo(i,"")}catch(L){Ye(t,t.return,L)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&gw(i,a),ap(c,l);var h=ap(c,a);for(l=0;l<d.length;l+=2){var g=d[l],p=d[l+1];g==="style"?_w(i,p):g==="dangerouslySetInnerHTML"?yw(i,p):g==="children"?wo(i,p):Sg(i,g,p,h)}switch(c){case"input":tp(i,a);break;case"textarea":xw(i,a);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var k=a.value;k!=null?Ia(i,!!a.multiple,k,!1):y!==!!a.multiple&&(a.defaultValue!=null?Ia(i,!!a.multiple,a.defaultValue,!0):Ia(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ro]=a}catch(L){Ye(t,t.return,L)}}break;case 6:if(Fn(e,t),rs(t),s&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(L){Ye(t,t.return,L)}}break;case 3:if(Fn(e,t),rs(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(L){Ye(t,t.return,L)}break;case 4:Fn(e,t),rs(t);break;case 13:Fn(e,t),rs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ix=et())),s&4&&yb(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(h=Dt)||g,Fn(e,t),Dt=h):Fn(e,t),rs(t),s&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(Q=t,g=t.child;g!==null;){for(p=Q=g;Q!==null;){switch(y=Q,k=y.child,y.tag){case 0:case 11:case 14:case 15:uo(4,y,y.return);break;case 1:Ca(y,y.return);var T=y.stateNode;if(typeof T.componentWillUnmount=="function"){s=y,n=y.return;try{e=s,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(L){Ye(s,n,L)}}break;case 5:Ca(y,y.return);break;case 22:if(y.memoizedState!==null){_b(p);continue}}k!==null?(k.return=y,Q=k):_b(p)}g=g.sibling}e:for(g=null,p=t;;){if(p.tag===5){if(g===null){g=p;try{i=p.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=p.stateNode,d=p.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=bw("display",l))}catch(L){Ye(t,t.return,L)}}}else if(p.tag===6){if(g===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(L){Ye(t,t.return,L)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;g===p&&(g=null),p=p.return}g===p&&(g=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Fn(e,t),rs(t),s&4&&yb(t);break;case 21:break;default:Fn(e,t),rs(t)}}function rs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GN(n)){var s=n;break e}n=n.return}throw Error(F(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(wo(i,""),s.flags&=-33);var a=vb(t);Dp(t,a,i);break;case 3:case 4:var l=s.stateNode.containerInfo,c=vb(t);Mp(t,c,l);break;default:throw Error(F(161))}}catch(d){Ye(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s2(t,e,n){Q=t,YN(t)}function YN(t,e,n){for(var s=(t.mode&1)!==0;Q!==null;){var i=Q,a=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||Ld;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Dt;c=Ld;var h=Dt;if(Ld=l,(Dt=d)&&!h)for(Q=i;Q!==null;)l=Q,d=l.child,l.tag===22&&l.memoizedState!==null?wb(i):d!==null?(d.return=l,Q=d):wb(i);for(;a!==null;)Q=a,YN(a),a=a.sibling;Q=i,Ld=c,Dt=h}bb(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Q=a):bb(t)}}function bb(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||ch(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Dt)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&rb(e,a,s);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rb(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var p=g.dehydrated;p!==null&&So(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Dt||e.flags&512&&Op(e)}catch(y){Ye(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function _b(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function wb(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ch(4,e)}catch(d){Ye(e,n,d)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(d){Ye(e,i,d)}}var a=e.return;try{Op(e)}catch(d){Ye(e,a,d)}break;case 5:var l=e.return;try{Op(e)}catch(d){Ye(e,l,d)}}}catch(d){Ye(e,e.return,d)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var r2=Math.ceil,Cu=Qs.ReactCurrentDispatcher,sx=Qs.ReactCurrentOwner,En=Qs.ReactCurrentBatchConfig,_e=0,wt=null,it=null,Et=0,cn=0,Sa=zr(0),ct=0,Lo=null,Ti=0,dh=0,rx=0,ho=null,Jt=null,ix=0,Ga=1/0,Ps=null,Su=!1,Lp=null,jr=null,Fd=!1,pr=null,ku=0,mo=0,Fp=null,Zd=-1,eu=0;function Bt(){return _e&6?et():Zd!==-1?Zd:Zd=et()}function Cr(t){return t.mode&1?_e&2&&Et!==0?Et&-Et:WE.transition!==null?(eu===0&&(eu=Aw()),eu):(t=Re,t!==0||(t=window.event,t=t===void 0?16:$w(t.type)),t):1}function Hn(t,e,n,s){if(50<mo)throw mo=0,Fp=null,Error(F(185));sc(t,n,s),(!(_e&2)||t!==wt)&&(t===wt&&(!(_e&2)&&(dh|=n),ct===4&&mr(t,Et)),sn(t,s),n===1&&_e===0&&!(e.mode&1)&&(Ga=et()+500,ah&&Br()))}function sn(t,e){var n=t.callbackNode;WI(t,e);var s=du(t,t===wt?Et:0);if(s===0)n!==null&&Ry(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Ry(n),e===1)t.tag===0?$E(Nb.bind(null,t)):iN(Nb.bind(null,t)),DE(function(){!(_e&6)&&Br()}),n=null;else{switch(Ow(s)){case 1:n=Rg;break;case 4:n=Rw;break;case 16:n=cu;break;case 536870912:n=Pw;break;default:n=cu}n=sj(n,QN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QN(t,e){if(Zd=-1,eu=0,_e&6)throw Error(F(327));var n=t.callbackNode;if(Aa()&&t.callbackNode!==n)return null;var s=du(t,t===wt?Et:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Iu(t,s);else{e=s;var i=_e;_e|=2;var a=XN();(wt!==t||Et!==e)&&(Ps=null,Ga=et()+500,wi(t,e));do try{l2();break}catch(c){JN(t,c)}while(!0);Vg(),Cu.current=a,_e=i,it!==null?e=0:(wt=null,Et=0,e=ct)}if(e!==0){if(e===2&&(i=up(t),i!==0&&(s=i,e=Up(t,i))),e===1)throw n=Lo,wi(t,0),mr(t,s),sn(t,et()),n;if(e===6)mr(t,s);else{if(i=t.current.alternate,!(s&30)&&!i2(i)&&(e=Iu(t,s),e===2&&(a=up(t),a!==0&&(s=a,e=Up(t,a))),e===1))throw n=Lo,wi(t,0),mr(t,s),sn(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(F(345));case 2:fi(t,Jt,Ps);break;case 3:if(mr(t,s),(s&130023424)===s&&(e=ix+500-et(),10<e)){if(du(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yp(fi.bind(null,t,Jt,Ps),e);break}fi(t,Jt,Ps);break;case 4:if(mr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var l=31-Vn(s);a=1<<l,l=e[l],l>i&&(i=l),s&=~a}if(s=i,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*r2(s/1960))-s,10<s){t.timeoutHandle=yp(fi.bind(null,t,Jt,Ps),s);break}fi(t,Jt,Ps);break;case 5:fi(t,Jt,Ps);break;default:throw Error(F(329))}}}return sn(t,et()),t.callbackNode===n?QN.bind(null,t):null}function Up(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=Iu(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&$p(e)),t}function $p(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function i2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!qn(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~rx,e&=~dh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),s=1<<n;t[n]=-1,e&=~s}}function Nb(t){if(_e&6)throw Error(F(327));Aa();var e=du(t,0);if(!(e&1))return sn(t,et()),null;var n=Iu(t,e);if(t.tag!==0&&n===2){var s=up(t);s!==0&&(e=s,n=Up(t,s))}if(n===1)throw n=Lo,wi(t,0),mr(t,e),sn(t,et()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fi(t,Jt,Ps),sn(t,et()),null}function ax(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Ga=et()+500,ah&&Br())}}function Ri(t){pr!==null&&pr.tag===0&&!(_e&6)&&Aa();var e=_e;_e|=1;var n=En.transition,s=Re;try{if(En.transition=null,Re=1,t)return t()}finally{Re=s,En.transition=n,_e=e,!(_e&6)&&Br()}}function lx(){cn=Sa.current,Ue(Sa)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ME(n)),it!==null)for(n=it.return;n!==null;){var s=n;switch(Wg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&pu();break;case 3:Va(),Ue(tn),Ue(Ft),Qg();break;case 5:Yg(s);break;case 4:Va();break;case 13:Ue(Ve);break;case 19:Ue(Ve);break;case 10:Hg(s.type._context);break;case 22:case 23:lx()}n=n.return}if(wt=t,it=t=Sr(t.current,null),Et=cn=e,ct=0,Lo=null,rx=dh=Ti=0,Jt=ho=null,vi!==null){for(e=0;e<vi.length;e++)if(n=vi[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,s.next=l}n.pending=s}vi=null}return t}function JN(t,e){do{var n=it;try{if(Vg(),Qd.current=ju,Nu){for(var s=Ge.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Nu=!1}if(Ei=0,vt=lt=Ge=null,co=!1,Oo=0,sx.current=null,n===null||n.return===null){ct=1,Lo=e,it=null;break}e:{var a=t,l=n.return,c=n,d=e;if(e=Et,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,p=g.tag;if(!(g.mode&1)&&(p===0||p===11||p===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var k=db(l);if(k!==null){k.flags&=-257,ub(k,l,c,a,e),k.mode&1&&cb(a,h,e),e=k,d=h;var T=e.updateQueue;if(T===null){var L=new Set;L.add(d),e.updateQueue=L}else T.add(d);break e}else{if(!(e&1)){cb(a,h,e),ox();break e}d=Error(F(426))}}else if($e&&c.mode&1){var oe=db(l);if(oe!==null){!(oe.flags&65536)&&(oe.flags|=256),ub(oe,l,c,a,e),zg(Ha(d,c));break e}}a=d=Ha(d,c),ct!==4&&(ct=2),ho===null?ho=[a]:ho.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var C=ON(a,d,e);sb(a,C);break e;case 1:c=d;var w=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jr===null||!jr.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var D=MN(a,c,e);sb(a,D);break e}}a=a.return}while(a!==null)}ej(n)}catch(K){e=K,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function XN(){var t=Cu.current;return Cu.current=ju,t===null?ju:t}function ox(){(ct===0||ct===3||ct===2)&&(ct=4),wt===null||!(Ti&268435455)&&!(dh&268435455)||mr(wt,Et)}function Iu(t,e){var n=_e;_e|=2;var s=XN();(wt!==t||Et!==e)&&(Ps=null,wi(t,e));do try{a2();break}catch(i){JN(t,i)}while(!0);if(Vg(),_e=n,Cu.current=s,it!==null)throw Error(F(261));return wt=null,Et=0,ct}function a2(){for(;it!==null;)ZN(it)}function l2(){for(;it!==null&&!PI();)ZN(it)}function ZN(t){var e=nj(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?ej(t):it=e,sx.current=null}function ej(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=e2(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(n=ZE(n,e,cn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ct===0&&(ct=5)}function fi(t,e,n){var s=Re,i=En.transition;try{En.transition=null,Re=1,o2(t,e,n,s)}finally{En.transition=i,Re=s}return null}function o2(t,e,n,s){do Aa();while(pr!==null);if(_e&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(zI(t,a),t===wt&&(it=wt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fd||(Fd=!0,sj(cu,function(){return Aa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=En.transition,En.transition=null;var l=Re;Re=1;var c=_e;_e|=4,sx.current=null,n2(t,n),qN(n,t),IE(xp),uu=!!gp,xp=gp=null,t.current=n,s2(n),AI(),_e=c,Re=l,En.transition=a}else t.current=n;if(Fd&&(Fd=!1,pr=t,ku=i),a=t.pendingLanes,a===0&&(jr=null),DI(n.stateNode),sn(t,et()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Su)throw Su=!1,t=Lp,Lp=null,t;return ku&1&&t.tag!==0&&Aa(),a=t.pendingLanes,a&1?t===Fp?mo++:(mo=0,Fp=t):mo=0,Br(),null}function Aa(){if(pr!==null){var t=Ow(ku),e=En.transition,n=Re;try{if(En.transition=null,Re=16>t?16:t,pr===null)var s=!1;else{if(t=pr,pr=null,ku=0,_e&6)throw Error(F(331));var i=_e;for(_e|=4,Q=t.current;Q!==null;){var a=Q,l=a.child;if(Q.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(Q=h;Q!==null;){var g=Q;switch(g.tag){case 0:case 11:case 15:uo(8,g,a)}var p=g.child;if(p!==null)p.return=g,Q=p;else for(;Q!==null;){g=Q;var y=g.sibling,k=g.return;if(HN(g),g===h){Q=null;break}if(y!==null){y.return=k,Q=y;break}Q=k}}}var T=a.alternate;if(T!==null){var L=T.child;if(L!==null){T.child=null;do{var oe=L.sibling;L.sibling=null,L=oe}while(L!==null)}}Q=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Q=l;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:uo(9,a,a.return)}var C=a.sibling;if(C!==null){C.return=a.return,Q=C;break e}Q=a.return}}var w=t.current;for(Q=w;Q!==null;){l=Q;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,Q=S;else e:for(l=w;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ch(9,c)}}catch(K){Ye(c,c.return,K)}if(c===l){Q=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,Q=D;break e}Q=c.return}}if(_e=i,Br(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(th,t)}catch{}s=!0}return s}finally{Re=n,En.transition=e}}return!1}function jb(t,e,n){e=Ha(n,e),e=ON(t,e,1),t=Nr(t,e,1),e=Bt(),t!==null&&(sc(t,1,e),sn(t,e))}function Ye(t,e,n){if(t.tag===3)jb(t,t,n);else for(;e!==null;){if(e.tag===3){jb(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jr===null||!jr.has(s))){t=Ha(n,t),t=MN(e,t,1),e=Nr(e,t,1),t=Bt(),e!==null&&(sc(e,1,t),sn(e,t));break}}e=e.return}}function c2(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Et&n)===n&&(ct===4||ct===3&&(Et&130023424)===Et&&500>et()-ix?wi(t,0):rx|=n),sn(t,e)}function tj(t,e){e===0&&(t.mode&1?(e=Id,Id<<=1,!(Id&130023424)&&(Id=4194304)):e=1);var n=Bt();t=Hs(t,e),t!==null&&(sc(t,e,n),sn(t,n))}function d2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tj(t,n)}function u2(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(e),tj(t,n)}var nj;nj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,XE(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,$e&&e.flags&1048576&&aN(e,vu,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Xd(t,e),t=e.pendingProps;var i=Wa(e,Ft.current);Pa(e,n),i=Xg(null,e,s,t,i,n);var a=Zg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(s)?(a=!0,gu(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kg(e),i.updater=oh,e.stateNode=i,i._reactInternals=e,Sp(e,s,t,n),e=Ep(null,e,s,!0,a,n)):(e.tag=0,$e&&a&&$g(e),Wt(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Xd(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=m2(s),t=$n(s,t),i){case 0:e=Ip(null,e,s,t,n);break e;case 1:e=fb(null,e,s,t,n);break e;case 11:e=hb(null,e,s,t,n);break e;case 14:e=mb(null,e,s,$n(s.type,t),n);break e}throw Error(F(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:$n(s,i),Ip(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:$n(s,i),fb(t,e,s,i,n);case 3:e:{if(UN(e),t===null)throw Error(F(387));s=e.pendingProps,a=e.memoizedState,i=a.element,hN(t,e),_u(e,s,null,n);var l=e.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ha(Error(F(423)),e),e=pb(t,e,s,n,i);break e}else if(s!==i){i=Ha(Error(F(424)),e),e=pb(t,e,s,n,i);break e}else for(mn=wr(e.stateNode.containerInfo.firstChild),pn=e,$e=!0,zn=null,n=dN(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(za(),s===i){e=Gs(t,e,n);break e}Wt(t,e,s,n)}e=e.child}return e;case 5:return mN(e),t===null&&Np(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,vp(s,i)?l=null:a!==null&&vp(s,a)&&(e.flags|=32),FN(t,e),Wt(t,e,l,n),e.child;case 6:return t===null&&Np(e),null;case 13:return $N(t,e,n);case 4:return qg(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ba(e,null,s,n):Wt(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:$n(s,i),hb(t,e,s,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,De(yu,s._currentValue),s._currentValue=l,a!==null)if(qn(a.value,l)){if(a.children===i.children&&!tn.current){e=Gs(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(a.tag===1){d=$s(-1,n&-n),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),jp(a.return,n,e),c.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(F(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),jp(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Pa(e,n),i=Rn(i),s=s(i),e.flags|=1,Wt(t,e,s,n),e.child;case 14:return s=e.type,i=$n(s,e.pendingProps),i=$n(s.type,i),mb(t,e,s,i,n);case 15:return DN(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:$n(s,i),Xd(t,e),e.tag=1,nn(s)?(t=!0,gu(e)):t=!1,Pa(e,n),AN(e,s,i),Sp(e,s,i,n),Ep(null,e,s,!0,t,n);case 19:return WN(t,e,n);case 22:return LN(t,e,n)}throw Error(F(156,e.tag))};function sj(t,e){return Tw(t,e)}function h2(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,s){return new h2(t,e,n,s)}function cx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m2(t){if(typeof t=="function")return cx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ig)return 11;if(t===Eg)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tu(t,e,n,s,i,a){var l=2;if(s=t,typeof t=="function")cx(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ga:return Ni(n.children,i,a,e);case kg:l=8,i|=8;break;case Qf:return t=Sn(12,n,e,i|2),t.elementType=Qf,t.lanes=a,t;case Jf:return t=Sn(13,n,e,i),t.elementType=Jf,t.lanes=a,t;case Xf:return t=Sn(19,n,e,i),t.elementType=Xf,t.lanes=a,t;case mw:return uh(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uw:l=10;break e;case hw:l=9;break e;case Ig:l=11;break e;case Eg:l=14;break e;case dr:l=16,s=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Sn(l,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function Ni(t,e,n,s){return t=Sn(7,t,s,e),t.lanes=n,t}function uh(t,e,n,s){return t=Sn(22,t,s,e),t.elementType=mw,t.lanes=n,t.stateNode={isHidden:!1},t}function If(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function Ef(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function f2(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cf(0),this.expirationTimes=cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cf(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dx(t,e,n,s,i,a,l,c,d){return t=new f2(t,e,n,c,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Sn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kg(a),t}function p2(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pa,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function rj(t){if(!t)return Pr;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(nn(n))return rN(t,n,e)}return e}function ij(t,e,n,s,i,a,l,c,d){return t=dx(n,s,!0,t,i,a,l,c,d),t.context=rj(null),n=t.current,s=Bt(),i=Cr(n),a=$s(s,i),a.callback=e??null,Nr(n,a,i),t.current.lanes=i,sc(t,i,s),sn(t,s),t}function hh(t,e,n,s){var i=e.current,a=Bt(),l=Cr(i);return n=rj(n),e.context===null?e.context=n:e.pendingContext=n,e=$s(a,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Nr(i,e,l),t!==null&&(Hn(t,i,l,a),Yd(t,i,l)),l}function Eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ux(t,e){Cb(t,e),(t=t.alternate)&&Cb(t,e)}function g2(){return null}var aj=typeof reportError=="function"?reportError:function(t){console.error(t)};function hx(t){this._internalRoot=t}mh.prototype.render=hx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));hh(t,e,null,null)};mh.prototype.unmount=hx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ri(function(){hh(null,t,null,null)}),e[Vs]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&Uw(t)}};function mx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sb(){}function x2(t,e,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var h=Eu(l);a.call(h)}}var l=ij(e,s,t,0,null,!1,!1,"",Sb);return t._reactRootContainer=l,t[Vs]=l.current,Eo(t.nodeType===8?t.parentNode:t),Ri(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var c=s;s=function(){var h=Eu(d);c.call(h)}}var d=dx(t,0,!1,null,null,!1,!1,"",Sb);return t._reactRootContainer=d,t[Vs]=d.current,Eo(t.nodeType===8?t.parentNode:t),Ri(function(){hh(e,d,n,s)}),d}function ph(t,e,n,s,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var c=i;i=function(){var d=Eu(l);c.call(d)}}hh(e,l,t,i)}else l=x2(n,e,t,i,s);return Eu(l)}Mw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=eo(e.pendingLanes);n!==0&&(Pg(e,n|1),sn(e,et()),!(_e&6)&&(Ga=et()+500,Br()))}break;case 13:Ri(function(){var s=Hs(t,1);if(s!==null){var i=Bt();Hn(s,t,1,i)}}),ux(t,1)}};Ag=function(t){if(t.tag===13){var e=Hs(t,134217728);if(e!==null){var n=Bt();Hn(e,t,134217728,n)}ux(t,134217728)}};Dw=function(t){if(t.tag===13){var e=Cr(t),n=Hs(t,e);if(n!==null){var s=Bt();Hn(n,t,e,s)}ux(t,e)}};Lw=function(){return Re};Fw=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};op=function(t,e,n){switch(e){case"input":if(tp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=ih(s);if(!i)throw Error(F(90));pw(s),tp(s,i)}}}break;case"textarea":xw(t,n);break;case"select":e=n.value,e!=null&&Ia(t,!!n.multiple,e,!1)}};jw=ax;Cw=Ri;var v2={usingClientEntryPoint:!1,Events:[ic,ba,ih,ww,Nw,ax]},Vl={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y2={bundleType:Vl.bundleType,version:Vl.version,rendererPackageName:Vl.rendererPackageName,rendererConfig:Vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Iw(t),t===null?null:t.stateNode},findFiberByHostInstance:Vl.findFiberByHostInstance||g2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{th=Ud.inject(y2),hs=Ud}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mx(e))throw Error(F(200));return p2(t,e,null,n)};yn.createRoot=function(t,e){if(!mx(t))throw Error(F(299));var n=!1,s="",i=aj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dx(t,1,!1,null,null,n,!1,s,i),t[Vs]=e.current,Eo(t.nodeType===8?t.parentNode:t),new hx(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Iw(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Ri(t)};yn.hydrate=function(t,e,n){if(!fh(e))throw Error(F(200));return ph(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!mx(t))throw Error(F(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",l=aj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=ij(e,null,t,1,n??null,i,!1,a,l),t[Vs]=e.current,Eo(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mh(e)};yn.render=function(t,e,n){if(!fh(e))throw Error(F(200));return ph(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!fh(t))throw Error(F(40));return t._reactRootContainer?(Ri(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[Vs]=null})}),!0):!1};yn.unstable_batchedUpdates=ax;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!fh(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return ph(t,e,n,!1,s)};yn.version="18.3.1-next-f1338f8080-20240426";function lj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lj)}catch(t){console.error(t)}}lj(),lw.exports=yn;var b2=lw.exports,kb=b2;qf.createRoot=kb.createRoot,qf.hydrateRoot=kb.hydrateRoot;var Ib={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(t,e){if(!t)throw il(e)},il=function(t){return new Error("Firebase Database ("+oj.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_2=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],c=t[n++],d=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},fx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,c=l?t[i+1]:0,d=i+2<t.length,h=d?t[i+2]:0,g=a>>2,p=(a&3)<<4|c>>4;let y=(c&15)<<2|h>>6,k=h&63;d||(k=64,l||(y=64)),s.push(n[g],n[p],n[y],n[k])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||p==null)throw new w2;const y=a<<2|c>>4;if(s.push(y),h!==64){const k=c<<4&240|h>>2;if(s.push(k),p!==64){const T=h<<6&192|p;s.push(T)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dj=function(t){const e=cj(t);return fx.encodeByteArray(e,!0)},Tu=function(t){return dj(t).replace(/\./g,"")},Ru=function(t){try{return fx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){return Fo(void 0,t)}function Fo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!j2(n)||(t[n]=Fo(t[n],e[n]));return t}function j2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=()=>uj().__FIREBASE_DEFAULTS__,S2=()=>{if(typeof process>"u"||typeof Ib>"u")return;const t=Ib.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},k2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ru(t[1]);return e&&JSON.parse(e)},px=()=>{try{return C2()||S2()||k2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hj=()=>{var t;return(t=px())===null||t===void 0?void 0:t.config},I2=t=>{var e;return(e=px())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tu(JSON.stringify(n)),Tu(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function mj(){var t;const e=(t=px())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T2(){return typeof window<"u"||fj()}function fj(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function R2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gj(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P2(){return oj.NODE_ADMIN===!0}function Pu(){try{return typeof indexedDB=="object"}catch{return!1}}function A2(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="FirebaseError";class rn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=O2,Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wi.prototype.create)}}class Wi{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?M2(a,s):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new rn(i,c,s)}}function M2(t,e){return t.replace(D2,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const D2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){return JSON.parse(t)}function ot(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=function(t){let e={},n={},s={},i="";try{const a=t.split(".");e=Uo(Ru(a[0])||""),n=Uo(Ru(a[1])||""),i=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:i}},L2=function(t){const e=xj(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},F2=function(t){const e=xj(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Au(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ou(t,e,n){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=e.call(n,t[i],i,t));return s}function Wp(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const a=t[i],l=e[i];if(Eb(a)&&Eb(l)){if(!Wp(a,l))return!1}else if(a!==l)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Eb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function no(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)s[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)s[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const y=s[p-3]^s[p-8]^s[p-14]^s[p-16];s[p]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],a=this.chain_[1],l=this.chain_[2],c=this.chain_[3],d=this.chain_[4],h,g;for(let p=0;p<80;p++){p<40?p<20?(h=c^a&(l^c),g=1518500249):(h=a^l^c,g=1859775393):p<60?(h=a&l|c&(a|l),g=2400959708):(h=a^l^c,g=3395469782);const y=(i<<5|i>>>27)+h+d+g+s[p]&4294967295;d=c,c=l,l=(a<<30|a>>>2)&4294967295,a=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let i=0;const a=this.buf_;let l=this.inbuf_;for(;i<n;){if(l===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(a[l]=e.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(a),l=0;break}}else for(;i<n;)if(a[l]=e[i],++l,++i,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[i]>>a&255,++s;return e}}function vj(t,e){const n=new $2(t,e);return n.subscribe.bind(n)}class $2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");W2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Tf),i.error===void 0&&(i.error=Tf),i.complete===void 0&&(i.complete=Tf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(t,e,n,s){let i;if(s<e?i="at least "+e:s>n&&(i=n===0?"none":"no more than "+n),i){const a=t+" failed: Was called with "+s+(s===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(a)}};function an(t,e){return`${t} failed: ${e} argument `}function yt(t,e,n,s){if(!(s&&!n)&&typeof n!="function")throw new Error(an(t,e)+"must be a valid function.")}function Tb(t,e,n,s){if(n&&(typeof n!="object"||n===null))throw new Error(an(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(i>=55296&&i<=56319){const a=i-55296;s++,W(s<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(s)-56320;i=65536+(a<<10)+l}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xh=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){return t&&t._delegate?t._delegate:t}class An{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Xt;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V2(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);s===c&&l.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:B2(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B2(t){return t===pi?void 0:t}function V2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=[];var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const yj={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},H2=Te.INFO,G2={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},K2=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=G2[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lc{constructor(e){this.name=e,this._logLevel=H2,this._logHandler=K2,this._userLogHandler=null,vx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}function q2(t){vx.forEach(e=>{e.setLogLevel(t)})}function Y2(t,e){for(const n of vx){let s=null;e&&e.level&&(s=yj[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,a,...l)=>{const c=l.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");a>=(s??i.logLevel)&&t({level:Te[a].toLowerCase(),message:c,args:l,type:i.name})}}}const Q2=(t,e)=>e.some(n=>t instanceof n);let Rb,Pb;function J2(){return Rb||(Rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X2(){return Pb||(Pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bj=new WeakMap,Bp=new WeakMap,_j=new WeakMap,Rf=new WeakMap,yx=new WeakMap;function Z2(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(kr(t.result)),i()},l=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&bj.set(n,t)}).catch(()=>{}),yx.set(e,t),e}function e3(t){if(Bp.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Bp.set(t,e)}let Vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_j.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t3(t){Vp=t(Vp)}function n3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Pf(this),e,...n);return _j.set(s,e.sort?e.sort():[e]),kr(s)}:X2().includes(t)?function(...e){return t.apply(Pf(this),e),kr(bj.get(this))}:function(...e){return kr(t.apply(Pf(this),e))}}function s3(t){return typeof t=="function"?n3(t):(t instanceof IDBTransaction&&e3(t),Q2(t,J2())?new Proxy(t,Vp):t)}function kr(t){if(t instanceof IDBRequest)return Z2(t);if(Rf.has(t))return Rf.get(t);const e=s3(t);return e!==t&&(Rf.set(t,e),yx.set(e,t)),e}const Pf=t=>yx.get(t);function r3(t,e,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),c=kr(l);return s&&l.addEventListener("upgradeneeded",d=>{s(kr(l.result),d.oldVersion,d.newVersion,kr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const i3=["get","getKey","getAll","getAllKeys","count"],a3=["put","add","delete","clear"],Af=new Map;function Ab(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=a3.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||i3.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let h=d.store;return s&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&d.done]))[0]};return Af.set(e,a),a}t3(t=>({...t,get:(e,n,s)=>Ab(e,n)||t.get(e,n,s),has:(e,n)=>!!Ab(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o3(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function o3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mu="@firebase/app",Hp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new lc("@firebase/app"),c3="@firebase/app-compat",d3="@firebase/analytics-compat",u3="@firebase/analytics",h3="@firebase/app-check-compat",m3="@firebase/app-check",f3="@firebase/auth",p3="@firebase/auth-compat",g3="@firebase/database",x3="@firebase/data-connect",v3="@firebase/database-compat",y3="@firebase/functions",b3="@firebase/functions-compat",_3="@firebase/installations",w3="@firebase/installations-compat",N3="@firebase/messaging",j3="@firebase/messaging-compat",C3="@firebase/performance",S3="@firebase/performance-compat",k3="@firebase/remote-config",I3="@firebase/remote-config-compat",E3="@firebase/storage",T3="@firebase/storage-compat",R3="@firebase/firestore",P3="@firebase/vertexai-preview",A3="@firebase/firestore-compat",O3="firebase",M3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]",D3={[Mu]:"fire-core",[c3]:"fire-core-compat",[u3]:"fire-analytics",[d3]:"fire-analytics-compat",[m3]:"fire-app-check",[h3]:"fire-app-check-compat",[f3]:"fire-auth",[p3]:"fire-auth-compat",[g3]:"fire-rtdb",[x3]:"fire-data-connect",[v3]:"fire-rtdb-compat",[y3]:"fire-fn",[b3]:"fire-fn-compat",[_3]:"fire-iid",[w3]:"fire-iid-compat",[N3]:"fire-fcm",[j3]:"fire-fcm-compat",[C3]:"fire-perf",[S3]:"fire-perf-compat",[k3]:"fire-rc",[I3]:"fire-rc-compat",[E3]:"fire-gcs",[T3]:"fire-gcs-compat",[R3]:"fire-fst",[A3]:"fire-fst-compat",[P3]:"fire-vertex","fire-js":"fire-js",[O3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Map,Ka=new Map,qa=new Map;function $o(t,e){try{t.container.addComponent(e)}catch(n){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wj(t,e){t.container.addOrOverwriteComponent(e)}function Mr(t){const e=t.name;if(qa.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;qa.set(e,t);for(const n of Or.values())$o(n,t);for(const n of Ka.values())$o(n,t);return!0}function Nj(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function L3(t,e,n=Ar){Nj(t,e).clearInstance(n)}function jj(t){return t.options!==void 0}function Qe(t){return t.settings!==void 0}function F3(){qa.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tn=new Wi("app","Firebase",U3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cj=class{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3 extends Cj{constructor(e,n,s,i){const a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,l={name:s,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,i);else{const c=e;super(c.options,l,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Gn(Mu,Hp,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){_x(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Tn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=M3;function bx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ar,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Tn.create("bad-app-name",{appName:String(i)});if(n||(n=hj()),!n)throw Tn.create("no-options");const a=Or.get(i);if(a){if(Wp(n,a.options)&&Wp(s,a.config))return a;throw Tn.create("duplicate-app",{appName:i})}const l=new xx(i);for(const d of qa.values())l.addComponent(d);const c=new Cj(n,s,l);return Or.set(i,c),c}function W3(t,e){if(T2()&&!fj())throw Tn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;jj(t)?n=t.options:n=t;const s=Object.assign(Object.assign({},e),n);s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=h=>[...h].reduce((g,p)=>Math.imul(31,g)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Tn.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(s)),l=Ka.get(a);if(l)return l.incRefCount(e.releaseOnDeref),l;const c=new xx(a);for(const h of qa.values())c.addComponent(h);const d=new $3(n,e,a,c);return Ka.set(a,d),d}function z3(t=Ar){const e=Or.get(t);if(!e&&t===Ar&&hj())return bx();if(!e)throw Tn.create("no-app",{appName:t});return e}function B3(){return Array.from(Or.values())}async function _x(t){let e=!1;const n=t.name;Or.has(n)?(e=!0,Or.delete(n)):Ka.has(n)&&t.decRefCount()<=0&&(Ka.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(s=>s.delete())),t.isDeleted=!0)}function Gn(t,e,n){var s;let i=(s=D3[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(c.join(" "));return}Mr(new An(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Sj(t,e){if(t!==null&&typeof t!="function")throw Tn.create("invalid-log-argument");Y2(t,e)}function kj(t){q2(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="firebase-heartbeat-database",H3=1,Wo="firebase-heartbeat-store";let Of=null;function Ij(){return Of||(Of=r3(V3,H3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tn.create("idb-open",{originalErrorMessage:t.message})})),Of}async function G3(t){try{const n=(await Ij()).transaction(Wo),s=await n.objectStore(Wo).get(Ej(t));return await n.done,s}catch(e){if(e instanceof rn)Ks.warn(e.message);else{const n=Tn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ks.warn(n.message)}}}async function Ob(t,e){try{const s=(await Ij()).transaction(Wo,"readwrite");await s.objectStore(Wo).put(e,Ej(t)),await s.done}catch(n){if(n instanceof rn)Ks.warn(n.message);else{const s=Tn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ks.warn(s.message)}}}function Ej(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=1024,q3=30*24*60*60*1e3;class Y3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new J3(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Mb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=q3}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Ks.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mb(),{heartbeatsToSend:s,unsentEntries:i}=Q3(this._heartbeatsCache.heartbeats),a=Tu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ks.warn(n),""}}}function Mb(){return new Date().toISOString().substring(0,10)}function Q3(t,e=K3){const n=[];let s=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Db(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Db(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class J3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pu()?A2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await G3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ob(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ob(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Db(t){return Tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){Mr(new An("platform-logger",e=>new l3(e),"PRIVATE")),Mr(new An("heartbeat",e=>new Y3(e),"PRIVATE")),Gn(Mu,Hp,t),Gn(Mu,Hp,"esm2017"),Gn("fire-js","")}X3("");const Z3=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:rn,SDK_VERSION:Vr,_DEFAULT_ENTRY_NAME:Ar,_addComponent:$o,_addOrOverwriteComponent:wj,_apps:Or,_clearComponents:F3,_components:qa,_getProvider:Nj,_isFirebaseApp:jj,_isFirebaseServerApp:Qe,_registerComponent:Mr,_removeServiceInstance:L3,_serverApps:Ka,deleteApp:_x,getApp:z3,getApps:B3,initializeApp:bx,initializeServerApp:W3,onLog:Sj,registerVersion:Gn,setLogLevel:kj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n){this._delegate=e,this.firebase=n,$o(e,new An("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),_x(this._delegate)))}_getService(e,n=Ar){var s;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((s=i.getComponent())===null||s===void 0?void 0:s.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ar){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){$o(this._delegate,e)}_addOrOverwriteComponent(e){wj(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Lb=new Wi("app-compat","Firebase",tT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t){const e={},n={__esModule:!0,initializeApp:a,app:i,registerVersion:Gn,setLogLevel:kj,onLog:Sj,apps:null,SDK_VERSION:Vr,INTERNAL:{registerComponent:c,removeApp:s,useAsService:d,modularAPIs:Z3}};n.default=n,Object.defineProperty(n,"apps",{get:l});function s(h){delete e[h]}function i(h){if(h=h||Ar,!xn(e,h))throw Lb.create("no-app",{appName:h});return e[h]}i.App=t;function a(h,g={}){const p=bx(h,g);if(xn(e,p.name))return e[p.name];const y=new t(p,n);return e[p.name]=y,y}function l(){return Object.keys(e).map(h=>e[h])}function c(h){const g=h.name,p=g.replace("-compat","");if(Mr(h)&&h.type==="PUBLIC"){const y=(k=i())=>{if(typeof k[p]!="function")throw Lb.create("invalid-app-argument",{appName:g});return k[p]()};h.serviceProps!==void 0&&Fo(y,h.serviceProps),n[p]=y,t.prototype[p]=function(...k){return this._getService.bind(this,g).apply(this,h.multipleInstances?k:[])}}return h.type==="PUBLIC"?n[p]:null}function d(h,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(){const t=nT(eT);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Tj,extendNamespace:e,createSubscribe:vj,ErrorFactory:Wi,deepExtend:Fo});function e(n){Fo(t,n)}return t}const sT=Tj();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=new lc("@firebase/app-compat"),rT="@firebase/app-compat",iT="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){Gn(rT,iT,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=uj();if(t.firebase!==void 0){Fb.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Fb.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const dn=sT;aT();var lT="firebase",oT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.registerVersion(lT,oT,"app-compat");function wx(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}const Hl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ma={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Rj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dT=cT,uT=Rj,Pj=new Wi("auth","Firebase",Rj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new lc("@firebase/auth");function hT(t,...e){Du.logLevel<=Te.WARN&&Du.warn(`Auth (${Vr}): ${t}`,...e)}function nu(t,...e){Du.logLevel<=Te.ERROR&&Du.error(`Auth (${Vr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,...e){throw jx(t,...e)}function dt(t,...e){return jx(t,...e)}function Nx(t,e,n){const s=Object.assign(Object.assign({},uT()),{[e]:n});return new Wi("auth","Firebase",s).create(e,{appName:t.name})}function Nt(t){return Nx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function al(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Rt(t,"argument-error"),Nx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Pj.create(t,...e)}function U(t,e,...n){if(!t)throw jx(e,...n)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nu(e),new Error(e)}function Yn(t,e){t||us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Cx(){return Ub()==="http:"||Ub()==="https:"}function Ub(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cx()||pj()||"connection"in navigator)?navigator.onLine:!0}function fT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=gx()||gh()}get(){return mT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new oc(3e4,6e4);function Xe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ze(t,e,n,s,i={}){return Oj(t,i,async()=>{let a={},l={};s&&(e==="GET"?l=s:a={body:JSON.stringify(s)});const c=zi(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return R2()||(h.referrerPolicy="no-referrer"),Aj.fetch()(Mj(t,t.config.apiHost,n,c),h)})}async function Oj(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},pT),e);try{const i=new vT(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw so(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw so(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw so(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw so(t,"user-disabled",l);const g=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Nx(t,g,h);Rt(t,g)}}catch(i){if(i instanceof rn)throw i;Rt(t,"network-request-failed",{message:String(i)})}}async function Js(t,e,n,s,i={}){const a=await Ze(t,e,n,s,i);return"mfaPendingCredential"in a&&Rt(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Mj(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?Sx(t.config,i):`${t.config.apiScheme}://${i}`}function xT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(dt(this.auth,"network-request-failed")),gT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function so(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=dt(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){return t!==void 0&&t.getResponse!==void 0}function Wb(t){return t!==void 0&&t.enterprise!==void 0}class yT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t){return(await Ze(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function _T(t,e){return Ze(t,"GET","/v2/recaptchaConfig",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(t,e){return Ze(t,"POST","/v1/accounts:delete",e)}async function NT(t,e){return Ze(t,"POST","/v1/accounts:update",e)}async function Dj(t,e){return Ze(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jT(t,e=!1){const n=me(t),s=await n.getIdToken(e),i=vh(s);U(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:fo(Mf(i.auth_time)),issuedAtTime:fo(Mf(i.iat)),expirationTime:fo(Mf(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Mf(t){return Number(t)*1e3}function vh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return nu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ru(n);return i?JSON.parse(i):(nu("Failed to decode base64 JWT payload"),null)}catch(i){return nu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zb(t){const e=vh(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof rn&&CT(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function CT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t){var e;const n=t.auth,s=await t.getIdToken(),i=await qs(t,Dj(n,{idToken:s}));U(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Lj(a.providerUserInfo):[],c=IT(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,p)}async function kT(t){const e=me(t);await Bo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IT(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function Lj(t){return t.map(e=>{var{providerId:n}=e,s=wx(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t,e){const n=await Oj(t,{},async()=>{const s=zi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=Mj(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Aj.fetch()(l,{method:"POST",headers:c,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TT(t,e){return Ze(t,"POST","/v2/accounts:revokeToken",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");const n=zb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:a}=await ET(e,n);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:a}=n,l=new Oa;return s&&(U(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),i&&(U(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(U(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ds{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,a=wx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ST(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await qs(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jT(this,e)}reload(){return kT(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Bo(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qe(this.auth.app))return Promise.reject(Nt(this.auth));const e=await this.getIdToken();return await qs(this,wT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,a,l,c,d,h,g;const p=(s=n.displayName)!==null&&s!==void 0?s:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,k=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=n.photoURL)!==null&&l!==void 0?l:void 0,L=(c=n.tenantId)!==null&&c!==void 0?c:void 0,oe=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,C=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:S,emailVerified:D,isAnonymous:K,providerData:Y,stsTokenManager:J}=n;U(S&&J,e,"internal-error");const Z=Oa.fromJSON(this.name,J);U(typeof S=="string",e,"internal-error"),or(p,e.name),or(y,e.name),U(typeof D=="boolean",e,"internal-error"),U(typeof K=="boolean",e,"internal-error"),or(k,e.name),or(T,e.name),or(L,e.name),or(oe,e.name),or(C,e.name),or(w,e.name);const Ie=new Ds({uid:S,auth:e,email:y,emailVerified:D,displayName:p,isAnonymous:K,photoURL:T,phoneNumber:k,tenantId:L,stsTokenManager:Z,createdAt:C,lastLoginAt:w});return Y&&Array.isArray(Y)&&(Ie.providerData=Y.map(pe=>Object.assign({},pe))),oe&&(Ie._redirectEventId=oe),Ie}static async _fromIdTokenResponse(e,n,s=!1){const i=new Oa;i.updateFromServerResponse(n);const a=new Ds({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Bo(a),a}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];U(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Lj(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Oa;c.updateFromIdToken(s);const d=new Ds({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Gp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Map;function fn(t){Yn(t instanceof Function,"Expected a class definition");let e=Bb.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Fj.type="NONE";const Ya=Fj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,e,n){return`firebase:${t}:${e}:${n}`}class Ma{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=ji(this.userKey,i.apiKey,a),this.fullPersistenceKey=ji("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ds._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ma(fn(Ya),e,s);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||fn(Ya);const l=ji(s,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=await h._get(l);if(g){const p=Ds._fromJSON(e,g);h!==a&&(c=p),a=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Ma(a,e,s):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new Ma(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Bj(e))return"Blackberry";if(Vj(e))return"Webos";if($j(e))return"Safari";if((e.includes("chrome/")||Wj(e))&&!e.includes("edge/"))return"Chrome";if(cc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Uj(t=ut()){return/firefox\//i.test(t)}function $j(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wj(t=ut()){return/crios\//i.test(t)}function zj(t=ut()){return/iemobile/i.test(t)}function cc(t=ut()){return/android/i.test(t)}function Bj(t=ut()){return/blackberry/i.test(t)}function Vj(t=ut()){return/webos/i.test(t)}function dc(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RT(t=ut()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function PT(t=ut()){var e;return dc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AT(){return gj()&&document.documentMode===10}function Hj(t=ut()){return dc(t)||cc(t)||Vj(t)||Bj(t)||/windows phone/i.test(t)||zj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t,e=[]){let n;switch(t){case"Browser":n=Vb(ut());break;case"Worker":n=`${Vb(ut())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(t,e={}){return Ze(t,"GET","/v2/passwordPolicy",Xe(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=6;class LT{constructor(e){var n,s,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:DT,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(s=d.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hb(this),this.idTokenSubscription=new Hb(this),this.beforeStateQueue=new OT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fn(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await Ma.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dj(this,{idToken:e}),s=await Ds._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qe(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qe(this.app))return Promise.reject(Nt(this));const n=e?me(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qe(this.app)?Promise.reject(Nt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qe(this.app)?Promise.reject(Nt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MT(this),n=new LT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wi("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await TT(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fn(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=await Ma.create(this,[fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,s,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Je(t){return me(t)}class Hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=vj(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UT(t){uc=t}function kx(t){return uc.loadJS(t)}function $T(){return uc.recaptchaV2Script}function WT(){return uc.recaptchaEnterpriseScript}function zT(){return uc.gapiScript}function Kj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const BT="recaptcha-enterprise",VT="NO_RECAPTCHA";class HT{constructor(e){this.type=BT,this.auth=Je(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{_T(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new yT(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function i(a,l,c){const d=window.grecaptcha;Wb(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(VT)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{s(this.auth).then(c=>{if(!n&&Wb(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=WT();d.length!==0&&(d+=c),kx(d).then(()=>{i(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function Gb(t,e,n,s=!1){const i=new HT(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l=Object.assign({},e);return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Vo(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Gb(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Gb(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(a)})}function GT(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function KT(t,e,n){const s=Je(t);U(s._canInitEmulator,s,"emulator-config-failed"),U(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),a=qj(e),{host:l,port:c}=qT(e),d=c===null?"":`:${c}`;s.config.emulator={url:`${a}//${l}${d}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||YT()}function qj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qT(t){const e=qj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:Kb(s.substr(a.length+1))}}else{const[a,l]=s.split(":");return{host:a,port:Kb(l)}}}function Kb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,n){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e){return Ze(t,"POST","/v1/accounts:resetPassword",Xe(t,e))}async function QT(t,e){return Ze(t,"POST","/v1/accounts:update",e)}async function JT(t,e){return Ze(t,"POST","/v1/accounts:signUp",e)}async function XT(t,e){return Ze(t,"POST","/v1/accounts:update",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e){return Js(t,"POST","/v1/accounts:signInWithPassword",Xe(t,e))}async function yh(t,e){return Ze(t,"POST","/v1/accounts:sendOobCode",Xe(t,e))}async function eR(t,e){return yh(t,e)}async function tR(t,e){return yh(t,e)}async function nR(t,e){return yh(t,e)}async function sR(t,e){return yh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,e){return Js(t,"POST","/v1/accounts:signInWithEmailLink",Xe(t,e))}async function iR(t,e){return Js(t,"POST","/v1/accounts:signInWithEmailLink",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends ll{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ho(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ho(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vo(e,n,"signInWithPassword",ZT);case"emailLink":return rR(e,{email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vo(e,s,"signUpPassword",JT);case"emailLink":return iR(e,{idToken:n,email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e){return Js(t,"POST","/v1/accounts:signInWithIdp",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="http://localhost";class ps extends ll{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,a=wx(n,["providerId","signInMethod"]);if(!s||!i)return null;const l=new ps(s,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ws(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}buildRequest(){const e={requestUri:aR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t,e){return Ze(t,"POST","/v1/accounts:sendVerificationCode",Xe(t,e))}async function oR(t,e){return Js(t,"POST","/v1/accounts:signInWithPhoneNumber",Xe(t,e))}async function cR(t,e){const n=await Js(t,"POST","/v1/accounts:signInWithPhoneNumber",Xe(t,e));if(n.temporaryProof)throw so(t,"account-exists-with-different-credential",n);return n}const dR={USER_NOT_FOUND:"user-not-found"};async function uR(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Js(t,"POST","/v1/accounts:signInWithPhoneNumber",Xe(t,n),dR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends ll{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ci({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ci({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return oR(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return cR(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return uR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a}=e;return!s&&!n&&!i&&!a?null:new Ci({verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mR(t){const e=ka(no(t)).link,n=e?ka(no(e)).deep_link_id:null,s=ka(no(t)).deep_link_id;return(s?ka(no(s)).link:null)||s||n||e||t}class bh{constructor(e){var n,s,i,a,l,c;const d=ka(no(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(s=d.oobCode)!==null&&s!==void 0?s:null,p=hR((i=d.mode)!==null&&i!==void 0?i:null);U(h&&g&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=g,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=mR(e);try{return new bh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.providerId=Hr.PROVIDER_ID}static credential(e,n){return Ho._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=bh.parseLink(n);return U(s,"argument-error"),Ho._fromEmailAndCode(e,s.code,s.tenantId)}}Hr.PROVIDER_ID="password";Hr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Xs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Da extends ol{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return U("providerId"in n&&"signInMethod"in n,"argument-error"),ps._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return U(e.idToken||e.accessToken,"argument-error"),ps._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Da.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Da.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:c}=e;if(!s&&!i&&!n&&!a||!c)return null;try{return new Da(c)._credential({idToken:n,accessToken:s,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends ol{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return os.credential(n,s)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends ol{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="http://localhost";class Qa extends ll{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ws(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,pendingToken:a}=n;return!s||!i||!a||s!==i?null:new Qa(s,a)}static _create(e,n){return new Qa(e,n)}buildRequest(){return{requestUri:fR,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="saml.";class Lu extends Xs{constructor(e){U(e.startsWith(pR),"argument-error"),super(e)}static credentialFromResult(e){return Lu.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Lu.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Qa.fromJSON(e);return U(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:s}=e;if(!n||!s)return null;try{return Qa._create(s,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ol{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ds.credential(n,s)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,e){return Js(t,"POST","/v1/accounts:signUp",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const a=await Ds._fromIdTokenResponse(e,s,i),l=qb(s);return new On({user:a,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=qb(s);return new On({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function qb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t){var e;if(Qe(t.app))return Promise.reject(Nt(t));const n=Je(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new On({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await Qj(n,{returnSecureToken:!0}),i=await On._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends rn{constructor(e,n,s,i){var a;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Fu(e,n,s,i)}}function Jj(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(t,a,e,s):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(t,e){const n=me(t);await _h(!0,n,e);const{providerUserInfo:s}=await NT(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=Xj(s||[]);return n.providerData=n.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ix(t,e,n=!1){const s=await qs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return On._forOperation(t,"link",s)}async function _h(t,e,n){await Bo(e);const s=Xj(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";U(s.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t,e,n=!1){const{auth:s}=t;if(Qe(s.app))return Promise.reject(Nt(s));const i="reauthenticate";try{const a=await qs(t,Jj(s,i,e,t),n);U(a.idToken,s,"internal-error");const l=vh(a.idToken);U(l,s,"internal-error");const{sub:c}=l;return U(t.uid===c,s,"user-mismatch"),On._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Rt(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(t,e,n=!1){if(Qe(t.app))return Promise.reject(Nt(t));const s="signIn",i=await Jj(t,s,e),a=await On._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(a.user),a}async function wh(t,e){return e1(Je(t),e)}async function t1(t,e){const n=me(t);return await _h(!1,n,e.providerId),Ix(n,e)}async function n1(t,e){return Zj(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e){return Js(t,"POST","/v1/accounts:signInWithCustomToken",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e){if(Qe(t.app))return Promise.reject(Nt(t));const n=Je(t),s=await vR(n,{token:e,returnSecureToken:!0}),i=await On._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ex._fromServerResponse(e,n):"totpInfo"in n?Tx._fromServerResponse(e,n):Rt(e,"internal-error")}}class Ex extends hc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ex(n)}}class Tx extends hc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Tx(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e,n){var s;U(((s=n.url)===null||s===void 0?void 0:s.length)>0,t,"invalid-continue-uri"),U(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(U(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(U(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t){const e=Je(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bR(t,e,n){const s=Je(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Nh(s,i,n),await Vo(s,i,"getOobCode",tR)}async function _R(t,e,n){await Yj(me(t),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Rx(t),s})}async function wR(t,e){await XT(me(t),{oobCode:e})}async function s1(t,e){const n=me(t),s=await Yj(n,{oobCode:e}),i=s.requestType;switch(U(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(s.mfaInfo,n,"internal-error");default:U(s.email,n,"internal-error")}let a=null;return s.mfaInfo&&(a=hc._fromServerResponse(Je(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:a},operation:i}}async function NR(t,e){const{data:n}=await s1(me(t),e);return n.email}async function jR(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const s=Je(t),l=await Vo(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qj).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Rx(t),d}),c=await On._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(c.user),c}function CR(t,e,n){return Qe(t.app)?Promise.reject(Nt(t)):wh(me(t),Hr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Rx(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t,e,n){const s=Je(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,c){U(c.handleCodeInApp,s,"argument-error"),c&&Nh(s,l,c)}a(i,n),await Vo(s,i,"getOobCode",nR)}function kR(t,e){const n=bh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function IR(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const s=me(t),i=Hr.credentialWithLink(e,n||zo());return U(i._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),wh(s,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e){return Ze(t,"POST","/v1/accounts:createAuthUri",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e){const n=Cx()?zo():"http://localhost",s={identifier:e,continueUri:n},{signinMethods:i}=await ER(me(t),s);return i||[]}async function RR(t,e){const n=me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Nh(n.auth,i,e);const{email:a}=await eR(n.auth,i);a!==t.email&&await t.reload()}async function PR(t,e,n){const s=me(t),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Nh(s.auth,a,n);const{email:l}=await sR(s.auth,a);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return Ze(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=me(t),a={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await qs(s,AR(s.auth,a));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;const c=s.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),await s._updateTokensIfNecessary(l)}function MR(t,e){const n=me(t);return Qe(n.auth.app)?Promise.reject(Nt(n.auth)):r1(n,e,null)}function DR(t,e){return r1(me(t),null,e)}async function r1(t,e,n){const{auth:s}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const l=await qs(t,QT(s,a));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){var e,n;if(!t)return null;const{providerId:s}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!s&&(t!=null&&t.idToken)){const l=(n=(e=vh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new La(a,c)}}if(!s)return null;switch(s){case"facebook.com":return new FR(a,i);case"github.com":return new UR(a,i);case"google.com":return new $R(a,i);case"twitter.com":return new WR(a,i,t.screenName||null);case"custom":case"anonymous":return new La(a,null);default:return new La(a,s,i)}}class La{constructor(e,n,s={}){this.isNewUser=e,this.providerId=n,this.profile=s}}class i1 extends La{constructor(e,n,s,i){super(e,n,s),this.username=i}}class FR extends La{constructor(e,n){super(e,"facebook.com",n)}}class UR extends i1{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class $R extends La{constructor(e,n){super(e,"google.com",n)}}class WR extends i1{constructor(e,n,s){super(e,"twitter.com",n,s)}}function zR(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:LR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,s){this.type=e,this.credential=n,this.user=s}static _fromIdtoken(e,n){return new bi("enroll",e,n)}static _fromMfaPendingCredential(e){return new bi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,s;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return bi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((s=e.multiFactorSession)===null||s===void 0)&&s.idToken)return bi._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,s){this.session=e,this.hints=n,this.signInResolver=s}static _fromError(e,n){const s=Je(e),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(c=>hc._fromServerResponse(s,c));U(i.mfaPendingCredential,s,"internal-error");const l=bi._fromMfaPendingCredential(i.mfaPendingCredential);return new Px(l,a,async c=>{const d=await c._process(s,l);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:d.idToken,refreshToken:d.refreshToken});switch(n.operationType){case"signIn":const g=await On._fromIdTokenResponse(s,n.operationType,h);return await s._updateCurrentUser(g.user),g;case"reauthenticate":return U(n.user,s,"internal-error"),On._forOperation(n.user,n.operationType,h);default:Rt(s,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function BR(t,e){var n;const s=me(t),i=e;return U(e.customData.operationType,s,"argument-error"),U((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,s,"argument-error"),Px._fromError(s,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:start",Xe(t,e))}function HR(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(t,e))}function GR(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(t,e))}class Ax{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(s=>hc._fromServerResponse(e.auth,s)))})}static _fromUser(e){return new Ax(e)}async getSession(){return bi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const s=e,i=await this.getSession(),a=await qs(this.user,s._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,s=await this.user.getIdToken();try{const i=await qs(this.user,GR(this.user.auth,{idToken:s,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Df=new WeakMap;function KR(t){const e=me(t);return Df.has(e)||Df.set(e,Ax._fromUser(e)),Df.get(e)}const Uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=1e3,YR=10;class l1 extends a1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},a=this.storage.getItem(s);AT()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YR):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}l1.type="LOCAL";const Ox=l1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends a1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o1.type="SESSION";const Ai=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new jh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await QR(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=mc("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},s);l={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return window}function XR(t){rt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){return typeof rt().WorkerGlobalScope<"u"&&typeof rt().importScripts=="function"}async function ZR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tP(){return Mx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firebaseLocalStorageDb",nP=1,$u="firebaseLocalStorage",d1="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(t,e){return t.transaction([$u],e?"readwrite":"readonly").objectStore($u)}function sP(){const t=indexedDB.deleteDatabase(c1);return new fc(t).toPromise()}function Kp(){const t=indexedDB.open(c1,nP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore($u,{keyPath:d1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains($u)?e(s):(s.close(),await sP(),e(await Kp()))})})}async function Yb(t,e,n){const s=Ch(t,!0).put({[d1]:e,value:n});return new fc(s).toPromise()}async function rP(t,e){const n=Ch(t,!1).get(e),s=await new fc(n).toPromise();return s===void 0?null:s.value}function Qb(t,e){const n=Ch(t,!0).delete(e);return new fc(n).toPromise()}const iP=800,aP=3;class u1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>aP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(tP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ZR(),!this.activeServiceWorker)return;this.sender=new JR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await Yb(e,Uu,"1"),await Qb(e,Uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Yb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>rP(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Ch(i,!1).getAll();return new fc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u1.type="LOCAL";const Go=u1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){return Ze(t,"POST","/v2/accounts/mfaSignIn:start",Xe(t,e))}function oP(t,e){return Ze(t,"POST","/v2/accounts/mfaSignIn:finalize",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=500,dP=6e4,$d=1e12;class uP{constructor(e){this.auth=e,this.counter=$d,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new hP(e,this.auth.name,n||{})),this.counter++,s}reset(e){var n;const s=e||$d;(n=this._widgets.get(s))===null||n===void 0||n.delete(),this._widgets.delete(s)}getResponse(e){var n;const s=e||$d;return((n=this._widgets.get(s))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const s=e||$d;return(n=this._widgets.get(s))===null||n===void 0||n.execute(),""}}class hP{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;U(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=mP(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},dP)},cP))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function mP(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=Kj("rcb"),fP=new oc(3e4,6e4);class pP{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return U(gP(n),e,"argument-error"),this.shouldResolveImmediately(n)&&$b(rt().grecaptcha)?Promise.resolve(rt().grecaptcha):new Promise((s,i)=>{const a=rt().setTimeout(()=>{i(dt(e,"network-request-failed"))},fP.get());rt()[Lf]=()=>{rt().clearTimeout(a),delete rt()[Lf];const c=rt().grecaptcha;if(!c||!$b(c)){i(dt(e,"internal-error"));return}const d=c.render;c.render=(h,g)=>{const p=d(h,g);return this.counter++,p},this.hostLanguage=n,s(c)};const l=`${$T()}?${zi({onload:Lf,render:"explicit",hl:n})}`;kx(l).catch(()=>{clearTimeout(a),i(dt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function gP(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class xP{async load(e){return new uP(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="recaptcha",vP={theme:"light",type:"image"};let yP=class{constructor(e,n,s=Object.assign({},vP)){this.parameters=s,this.type=h1,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Je(e),this.isInvisible=this.parameters.size==="invisible",U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;U(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xP:new pP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(i=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),i(l))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=rt()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){U(Cx()&&!Mx(),this.auth,"internal-error"),await bP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await bT(this.auth);U(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function bP(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ci._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function _P(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const s=Je(t),i=await Sh(s,e,me(n));return new Dx(i,a=>wh(s,a))}async function wP(t,e,n){const s=me(t);await _h(!1,s,"phone");const i=await Sh(s.auth,e,me(n));return new Dx(i,a=>t1(s,a))}async function NP(t,e,n){const s=me(t);if(Qe(s.auth.app))return Promise.reject(Nt(s.auth));const i=await Sh(s.auth,e,me(n));return new Dx(i,a=>n1(s,a))}async function Sh(t,e,n){var s;const i=await n.verify();try{U(typeof i=="string",t,"argument-error"),U(n.type===h1,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a)return U(l.type==="enroll",t,"internal-error"),(await VR(t,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{U(l.type==="signin",t,"internal-error");const c=((s=a.multiFactorHint)===null||s===void 0?void 0:s.uid)||a.multiFactorUid;return U(c,t,"missing-multi-factor-info"),(await lP(t,{mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await lR(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return l}}finally{n._reset()}}async function jP(t,e){const n=me(t);if(Qe(n.auth.app))return Promise.reject(Nt(n.auth));await Ix(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi=class su{constructor(e){this.providerId=su.PROVIDER_ID,this.auth=Je(e)}verifyPhoneNumber(e,n){return Sh(this.auth,e,me(n))}static credential(e,n){return Ci._fromVerification(e,n)}static credentialFromResult(e){const n=e;return su.credentialFromTaggedObject(n)}static credentialFromError(e){return su.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:s}=e;return n&&s?Ci._fromTokenResponse(n,s):null}};Oi.PROVIDER_ID="phone";Oi.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){return e?fn(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends ll{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CP(t){return e1(t.auth,new Lx(t),t.bypassAuthState)}function SP(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),Zj(n,new Lx(t),t.bypassAuthState)}async function kP(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),Ix(n,new Lx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CP;case"linkViaPopup":case"linkViaRedirect":return kP;case"reauthViaPopup":case"reauthViaRedirect":return SP;default:Rt(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=new oc(2e3,1e4);async function EP(t,e,n){if(Qe(t.app))return Promise.reject(dt(t,"operation-not-supported-in-this-environment"));const s=Je(t);al(t,e,Xs);const i=Bi(s,n);return new Ls(s,"signInViaPopup",e,i).executeNotNull()}async function TP(t,e,n){const s=me(t);if(Qe(s.auth.app))return Promise.reject(dt(s.auth,"operation-not-supported-in-this-environment"));al(s.auth,e,Xs);const i=Bi(s.auth,n);return new Ls(s.auth,"reauthViaPopup",e,i,s).executeNotNull()}async function RP(t,e,n){const s=me(t);al(s.auth,e,Xs);const i=Bi(s.auth,n);return new Ls(s.auth,"linkViaPopup",e,i,s).executeNotNull()}class Ls extends m1{constructor(e,n,s,i,a){super(e,n,i,a),this.provider=s,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return U(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=mc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IP.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="pendingRedirect",po=new Map;class AP extends m1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=po.get(this.auth._key());if(!e){try{const s=await OP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}po.set(this.auth._key(),e)}return this.bypassAuthState||po.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OP(t,e){const n=p1(e),s=f1(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}async function Fx(t,e){return f1(t)._set(p1(e),"true")}function MP(){po.clear()}function Ux(t,e){po.set(t._key(),e)}function f1(t){return fn(t._redirectPersistence)}function p1(t){return ji(PP,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e,n){return LP(t,e,n)}async function LP(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const s=Je(t);al(t,e,Xs),await s._initializationPromise;const i=Bi(s,n);return await Fx(i,s),i._openRedirect(s,e,"signInViaRedirect")}function FP(t,e,n){return UP(t,e,n)}async function UP(t,e,n){const s=me(t);if(al(s.auth,e,Xs),Qe(s.auth.app))return Promise.reject(Nt(s.auth));await s.auth._initializationPromise;const i=Bi(s.auth,n);await Fx(i,s.auth);const a=await g1(s);return i._openRedirect(s.auth,e,"reauthViaRedirect",a)}function $P(t,e,n){return WP(t,e,n)}async function WP(t,e,n){const s=me(t);al(s.auth,e,Xs),await s.auth._initializationPromise;const i=Bi(s.auth,n);await _h(!1,s,e.providerId),await Fx(i,s.auth);const a=await g1(s);return i._openRedirect(s.auth,e,"linkViaRedirect",a)}async function zP(t,e){return await Je(t)._initializationPromise,kh(t,e,!1)}async function kh(t,e,n=!1){if(Qe(t.app))return Promise.reject(Nt(t));const s=Je(t),i=Bi(s,e),l=await new AP(s,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}async function g1(t){const e=mc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=10*60*1e3;class x1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!v1(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(dt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function v1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(t,e={}){return Ze(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GP=/^https?/;async function KP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await y1(t);for(const n of e)try{if(qP(n))return}catch{}Rt(t,"unauthorized-domain")}function qP(t){const e=zo(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!GP.test(n))return!1;if(HP.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new oc(3e4,6e4);function Xb(){const t=rt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QP(t){return new Promise((e,n)=>{var s,i,a;function l(){Xb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xb(),n(dt(t,"network-request-failed"))},timeout:YP.get()})}if(!((i=(s=rt().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=rt().gapi)===null||a===void 0)&&a.load)l();else{const c=Kj("iframefcb");return rt()[c]=()=>{gapi.load?l():n(dt(t,"network-request-failed"))},kx(`${zT()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw ru=null,e})}let ru=null;function JP(t){return ru=ru||QP(t),ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new oc(5e3,15e3),ZP="__/auth/iframe",e4="emulator/auth/iframe",t4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s4(t){const e=t.config;U(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sx(e,e4):`https://${t.config.authDomain}/${ZP}`,s={apiKey:e.apiKey,appName:t.name,v:Vr},i=n4.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${zi(s).slice(1)}`}async function r4(t){const e=await JP(t),n=rt().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:s4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t4,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const l=dt(t,"network-request-failed"),c=rt().setTimeout(()=>{a(l)},XP.get());function d(){rt().clearTimeout(c),i(s)}s.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a4=500,l4=600,o4="_blank",c4="http://localhost";class Zb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d4(t,e,n,s=a4,i=l4){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const d=Object.assign(Object.assign({},i4),{width:s.toString(),height:i.toString(),top:a,left:l}),h=ut().toLowerCase();n&&(c=Wj(h)?o4:n),Uj(h)&&(e=e||c4,d.scrollbars="yes");const g=Object.entries(d).reduce((y,[k,T])=>`${y}${k}=${T},`,"");if(PT(h)&&c!=="_self")return u4(e||"",c),new Zb(null);const p=window.open(e||"",c,g);U(p,t,"popup-blocked");try{p.focus()}catch{}return new Zb(p)}function u4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="__/auth/handler",m4="emulator/auth/handler",f4=encodeURIComponent("fac");async function qp(t,e,n,s,i,a){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Vr,eventId:i};if(e instanceof Xs){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Au(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,p]of Object.entries(a||{}))l[g]=p}if(e instanceof ol){const g=e.getScopes().filter(p=>p!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),h=d?`#${f4}=${encodeURIComponent(d)}`:"";return`${p4(t)}?${zi(c).slice(1)}${h}`}function p4({config:t}){return t.emulator?Sx(t,m4):`https://${t.authDomain}/${h4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class g4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ai,this._completeRedirectFn=kh,this._overrideRedirectResult=Ux}async _openPopup(e,n,s,i){var a;Yn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await qp(e,n,s,zo(),i);return d4(e,l,mc())}async _openRedirect(e,n,s,i){await this._originValidation(e);const a=await qp(e,n,s,zo(),i);return XR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Yn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await r4(e),s=new x1(e);return n.register("authEvent",i=>(U(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ff,{type:Ff},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ff];l!==void 0&&n(!!l),Rt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Hj()||$j()||dc()}}const x4=g4;class v4{constructor(e){this.factorId=e}_process(e,n,s){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,s);case"signin":return this._finalizeSignIn(e,n.credential);default:return us("unexpected MultiFactorSessionType")}}}class $x extends v4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new $x(e)}_finalizeEnroll(e,n,s){return HR(e,{idToken:n,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return oP(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class b1{constructor(){}static assertion(e){return $x._fromCredential(e)}}b1.FACTOR_ID="phone";var e_="@firebase/auth",t_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _4(t){Mr(new An("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=s.options;U(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gj(t)},h=new FT(s,i,a,d);return GT(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Mr(new An("auth-internal",e=>{const n=Je(e.getProvider("auth").getImmediate());return(s=>new y4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(e_,t_,b4(t)),Gn(e_,t_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=5*60;I2("authIdTokenMaxAge");function N4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UT({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=dt("internal-error");a.customData=i,n(a)},s.type="text/javascript",s.charset="UTF-8",N4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=2e3;async function C4(t,e,n){var s;const{BuildInfo:i}=Mi();Yn(e.sessionId,"AuthEvent did not contain a session ID");const a=await T4(e.sessionId),l={};return dc()?l.ibi=i.packageName:cc()?l.apn=i.packageName:Rt(t,"operation-not-supported-in-this-environment"),i.displayName&&(l.appDisplayName=i.displayName),l.sessionId=a,qp(t,n,e.type,void 0,(s=e.eventId)!==null&&s!==void 0?s:void 0,l)}async function S4(t){const{BuildInfo:e}=Mi(),n={};dc()?n.iosBundleId=e.packageName:cc()?n.androidPackageName=e.packageName:Rt(t,"operation-not-supported-in-this-environment"),await y1(t,n)}function k4(t){const{cordova:e}=Mi();return new Promise(n=>{e.plugins.browsertab.isAvailable(s=>{let i=null;s?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,RT()?"_blank":"_system","location=yes"),n(i)})})}async function I4(t,e,n){const{cordova:s}=Mi();let i=()=>{};try{await new Promise((a,l)=>{let c=null;function d(){var p;a();const y=(p=s.plugins.browsertab)===null||p===void 0?void 0:p.close;typeof y=="function"&&y(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){c||(c=window.setTimeout(()=>{l(dt(t,"redirect-cancelled-by-user"))},j4))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(d),document.addEventListener("resume",h,!1),cc()&&document.addEventListener("visibilitychange",g,!1),i=()=>{e.removePassiveListener(d),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",g,!1),c&&window.clearTimeout(c)}})}finally{i()}}function E4(t){var e,n,s,i,a,l,c,d,h,g;const p=Mi();U(typeof((e=p==null?void 0:p.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof((n=p==null?void 0:p.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U(typeof((a=(i=(s=p==null?void 0:p.cordova)===null||s===void 0?void 0:s.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((d=(c=(l=p==null?void 0:p.cordova)===null||l===void 0?void 0:l.plugins)===null||c===void 0?void 0:c.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((g=(h=p==null?void 0:p.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function T4(t){const e=R4(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function R4(t){if(Yn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=20;class A4 extends x1{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function O4(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:L4(),postBody:null,tenantId:t.tenantId,error:dt(t,"no-auth-event")}}function M4(t,e){return Yp()._set(Qp(t),e)}async function n_(t){const e=await Yp()._get(Qp(t));return e&&await Yp()._remove(Qp(t)),e}function D4(t,e){var n,s;const i=U4(e);if(i.includes("/__/auth/callback")){const a=iu(i),l=a.firebaseError?F4(decodeURIComponent(a.firebaseError)):null,c=(s=(n=l==null?void 0:l.code)===null||n===void 0?void 0:n.split("auth/"))===null||s===void 0?void 0:s[1],d=c?dt(c):null;return d?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function L4(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<P4;n++){const s=Math.floor(Math.random()*e.length);t.push(e.charAt(s))}return t.join("")}function Yp(){return fn(Ox)}function Qp(t){return ji("authEvent",t.config.apiKey,t.name)}function F4(t){try{return JSON.parse(t)}catch{return null}}function U4(t){const e=iu(t),n=e.link?decodeURIComponent(e.link):void 0,s=iu(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return iu(i).link||i||s||n||t}function iu(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ka(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=500;class W4{constructor(){this._redirectPersistence=Ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kh,this._overrideRedirectResult=Ux}async _initialize(e){const n=e._key();let s=this.eventManagers.get(n);return s||(s=new A4(e),this.eventManagers.set(n,s),this.attachCallbackListeners(e,s)),s}_openPopup(e){Rt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,s,i){E4(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),MP(),await this._originValidation(e);const l=O4(e,s,i);await M4(e,l);const c=await C4(e,l,n),d=await k4(c);return I4(e,a,d)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=S4(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:s,handleOpenURL:i,BuildInfo:a}=Mi(),l=setTimeout(async()=>{await n_(e),n.onEvent(s_())},$4),c=async g=>{clearTimeout(l);const p=await n_(e);let y=null;p&&(g!=null&&g.url)&&(y=D4(p,g.url)),n.onEvent(y||s_())};typeof s<"u"&&typeof s.subscribe=="function"&&s.subscribe(null,c);const d=i,h=`${a.packageName.toLowerCase()}://`;Mi().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(h)&&c({url:g}),typeof d=="function")try{d(g)}catch(p){console.error(p)}}}}const z4=W4;function s_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){Je(t)._logFramework(e)}var V4="@firebase/auth-compat",H4="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=1e3;function go(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function K4(){return go()==="http:"||go()==="https:"}function _1(t=ut()){return!!((go()==="file:"||go()==="ionic:"||go()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function q4(){return gh()||mj()}function Y4(){return gj()&&(document==null?void 0:document.documentMode)===11}function Q4(t=ut()){return/Edge\/\d+/.test(t)}function J4(t=ut()){return Y4()||Q4(t)}function w1(){try{const t=self.localStorage,e=mc();if(t)return t.setItem(e,"1"),t.removeItem(e),J4()?Pu():!0}catch{return Wx()&&Pu()}return!1}function Wx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uf(){return(K4()||pj()||_1())&&!q4()&&w1()&&!Wx()}function N1(){return _1()&&typeof document<"u"}async function X4(){return N1()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},G4);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Z4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un={LOCAL:"local",NONE:"none",SESSION:"session"},Gl=U,j1="persistence";function eA(t,e){if(Gl(Object.values(un).includes(e),t,"invalid-persistence-type"),gh()){Gl(e!==un.SESSION,t,"unsupported-persistence-type");return}if(mj()){Gl(e===un.NONE,t,"unsupported-persistence-type");return}if(Wx()){Gl(e===un.NONE||e===un.LOCAL&&Pu(),t,"unsupported-persistence-type");return}Gl(e===un.NONE||w1(),t,"unsupported-persistence-type")}async function Jp(t){await t._initializationPromise;const e=C1(),n=ji(j1,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function tA(t,e){const n=C1();if(!n)return[];const s=ji(j1,t,e);switch(n.getItem(s)){case un.NONE:return[Ya];case un.LOCAL:return[Go,Ai];case un.SESSION:return[Ai];default:return[]}}function C1(){var t;try{return((t=Z4())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=U;class gr{constructor(){this.browserResolver=fn(x4),this.cordovaResolver=fn(z4),this.underlyingResolver=null,this._redirectPersistence=Ai,this._completeRedirectFn=kh,this._overrideRedirectResult=Ux}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,s,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,s,i)}async _openRedirect(e,n,s,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,s,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return N1()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nA(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await X4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){return t.unwrap()}function sA(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){return k1(t)}function iA(t,e){var n;const s=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new aA(t,BR(t,e))}else if(s){const i=k1(e),a=e;i&&(a.credential=i,a.tenantId=s.tenantId||void 0,a.email=s.email||void 0,a.phoneNumber=s.phoneNumber||void 0)}}function k1(t){const{_tokenResponse:e}=t instanceof rn?t.customData:t;if(!e)return null;if(!(t instanceof rn)&&"temporaryProof"in e&&"phoneNumber"in e)return Oi.credentialFromResult(t);const n=e.providerId;if(!n||n===Hl.PASSWORD)return null;let s;switch(n){case Hl.GOOGLE:s=os;break;case Hl.FACEBOOK:s=ls;break;case Hl.GITHUB:s=cs;break;case Hl.TWITTER:s=ds;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:c,nonce:d}=e;return!a&&!l&&!i&&!c?null:c?n.startsWith("saml.")?Qa._create(n,c):ps._fromParams({providerId:n,signInMethod:n,pendingToken:c,idToken:i,accessToken:a}):new Da(n).credential({idToken:i,accessToken:a,rawNonce:d})}return t instanceof rn?s.credentialFromError(t):s.credentialFromResult(t)}function Qt(t,e){return e.catch(n=>{throw n instanceof rn&&iA(t,n),n}).then(n=>{const s=n.operationType,i=n.user;return{operationType:s,credential:rA(n),additionalUserInfo:zR(n),user:Fs.getOrCreate(i)}})}async function Xp(t,e){const n=await e;return{verificationId:n.verificationId,confirm:s=>Qt(t,n.confirm(s))}}class aA{constructor(e,n){this.resolver=n,this.auth=sA(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Qt(S1(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._delegate=e,this.multiFactor=KR(e)}static getOrCreate(e){return Fs.USER_MAP.has(e)||Fs.USER_MAP.set(e,new Fs(e)),Fs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Qt(this.auth,t1(this._delegate,e))}async linkWithPhoneNumber(e,n){return Xp(this.auth,wP(this._delegate,e,n))}async linkWithPopup(e){return Qt(this.auth,RP(this._delegate,e,gr))}async linkWithRedirect(e){return await Jp(Je(this.auth)),$P(this._delegate,e,gr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Qt(this.auth,n1(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Xp(this.auth,NP(this._delegate,e,n))}reauthenticateWithPopup(e){return Qt(this.auth,TP(this._delegate,e,gr))}async reauthenticateWithRedirect(e){return await Jp(Je(this.auth)),FP(this._delegate,e,gr)}sendEmailVerification(e){return RR(this._delegate,e)}async unlink(e){return await xR(this._delegate,e),this}updateEmail(e){return MR(this._delegate,e)}updatePassword(e){return DR(this._delegate,e)}updatePhoneNumber(e){return jP(this._delegate,e)}updateProfile(e){return OR(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return PR(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=U;class Zp{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:s}=e.options;Kl(s,"invalid-api-key",{appName:e.name}),Kl(s,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?gr:void 0;this._delegate=n.initialize({options:{persistence:lA(s,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(dT),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){KT(this._delegate,e,n)}applyActionCode(e){return wR(this._delegate,e)}checkActionCode(e){return s1(this._delegate,e)}confirmPasswordReset(e,n){return _R(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Qt(this._delegate,jR(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return TR(this._delegate,e)}isSignInWithEmailLink(e){return kR(this._delegate,e)}async getRedirectResult(){Kl(Uf(),this._delegate,"operation-not-supported-in-this-environment");const e=await zP(this._delegate,gr);return e?Qt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){B4(this._delegate,e)}onAuthStateChanged(e,n,s){const{next:i,error:a,complete:l}=r_(e,n,s);return this._delegate.onAuthStateChanged(i,a,l)}onIdTokenChanged(e,n,s){const{next:i,error:a,complete:l}=r_(e,n,s);return this._delegate.onIdTokenChanged(i,a,l)}sendSignInLinkToEmail(e,n){return SR(this._delegate,e,n)}sendPasswordResetEmail(e,n){return bR(this._delegate,e,n||void 0)}async setPersistence(e){eA(this._delegate,e);let n;switch(e){case un.SESSION:n=Ai;break;case un.LOCAL:n=await fn(Go)._isAvailable()?Go:Ox;break;case un.NONE:n=Ya;break;default:return Rt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Qt(this._delegate,gR(this._delegate))}signInWithCredential(e){return Qt(this._delegate,wh(this._delegate,e))}signInWithCustomToken(e){return Qt(this._delegate,yR(this._delegate,e))}signInWithEmailAndPassword(e,n){return Qt(this._delegate,CR(this._delegate,e,n))}signInWithEmailLink(e,n){return Qt(this._delegate,IR(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Xp(this._delegate,_P(this._delegate,e,n))}async signInWithPopup(e){return Kl(Uf(),this._delegate,"operation-not-supported-in-this-environment"),Qt(this._delegate,EP(this._delegate,e,gr))}async signInWithRedirect(e){return Kl(Uf(),this._delegate,"operation-not-supported-in-this-environment"),await Jp(this._delegate),DP(this._delegate,e,gr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return NR(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Zp.Persistence=un;function r_(t,e,n){let s=t;typeof t!="function"&&({next:s,error:e,complete:n}=t);const i=s;return{next:l=>i(l&&Fs.getOrCreate(l)),error:e,complete:n}}function lA(t,e){const n=tA(t,e);if(typeof self<"u"&&!n.includes(Go)&&n.push(Go),typeof window<"u")for(const s of[Ox,Ai])n.includes(s)||n.push(s);return n.includes(Ya)||n.push(Ya),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.providerId="phone",this._delegate=new Oi(S1(dn.auth()))}static credential(e,n){return Oi.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}zx.PHONE_SIGN_IN_METHOD=Oi.PHONE_SIGN_IN_METHOD;zx.PROVIDER_ID=Oi.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=U;class cA{constructor(e,n,s=dn.app()){var i;oA((i=s.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:s.name}),this._delegate=new yP(s.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="auth-compat";function uA(t){t.INTERNAL.registerComponent(new An(dA,e=>{const n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("auth");return new Zp(n,s)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ma.EMAIL_SIGNIN,PASSWORD_RESET:ma.PASSWORD_RESET,RECOVER_EMAIL:ma.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ma.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ma.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ma.VERIFY_EMAIL}},EmailAuthProvider:Hr,FacebookAuthProvider:ls,GithubAuthProvider:cs,GoogleAuthProvider:os,OAuthProvider:Da,SAMLAuthProvider:Lu,PhoneAuthProvider:zx,PhoneMultiFactorGenerator:b1,RecaptchaVerifier:cA,TwitterAuthProvider:ds,Auth:Zp,AuthCredential:ll,Error:rn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(V4,H4)}uA(dn);var i_={};const a_="@firebase/database",l_="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I1="";function E1(t){I1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Uo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hA(e)}}catch{}return new mA},_i=T1("localStorage"),eg=T1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new lc("@firebase/database"),R1=function(){let t=1;return function(){return t++}}(),P1=function(t){const e=z2(t),n=new U2;n.update(e);const s=n.digest();return fx.encodeByteArray(s)},pc=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=pc.apply(null,s):typeof s=="object"?e+=ot(s):e+=s,e+=" "}return e};let Si=null,o_=!0;const A1=function(t,e){W(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Fa.logLevel=Te.VERBOSE,Si=Fa.log.bind(Fa),e&&eg.set("logging_enabled",!0)):typeof t=="function"?Si=t:(Si=null,eg.remove("logging_enabled"))},_t=function(...t){if(o_===!0&&(o_=!1,Si===null&&eg.get("logging_enabled")===!0&&A1(!0)),Si){const e=pc.apply(null,t);Si(e)}},gc=function(t){return function(...e){_t(t,...e)}},tg=function(...t){const e="FIREBASE INTERNAL ERROR: "+pc(...t);Fa.error(e)},gs=function(...t){const e=`FIREBASE FATAL ERROR: ${pc(...t)}`;throw Fa.error(e),new Error(e)},Lt=function(...t){const e="FIREBASE WARNING: "+pc(...t);Fa.warn(e)},fA=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ih=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},pA=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Dr="[MIN_NAME]",Ys="[MAX_NAME]",Vi=function(t,e){if(t===e)return 0;if(t===Dr||e===Ys)return-1;if(e===Dr||t===Ys)return 1;{const n=c_(t),s=c_(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},gA=function(t,e){return t===e?0:t<e?-1:1},ql=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ot(e))},Bx=function(t){if(typeof t!="object"||t===null)return ot(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=ot(e[s]),n+=":",n+=Bx(t[e[s]]);return n+="}",n},O1=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let i=0;i<n;i+=e)i+e>n?s.push(t.substring(i,n)):s.push(t.substring(i,i+e));return s};function jt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const M1=function(t){W(!Ih(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let i,a,l,c,d;t===0?(a=0,l=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=c+s,l=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(a=0,l=Math.round(t/Math.pow(2,1-s-n))));const h=[];for(d=n;d;d-=1)h.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)h.push(a%2?1:0),a=Math.floor(a/2);h.push(i?1:0),h.reverse();const g=h.join("");let p="";for(d=0;d<64;d+=8){let y=parseInt(g.substr(d,8),2).toString(16);y.length===1&&(y="0"+y),p=p+y}return p.toLowerCase()},xA=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vA=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function yA(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const bA=new RegExp("^-?(0*)\\d{1,10}$"),_A=-2147483648,wA=2147483647,c_=function(t){if(bA.test(t)){const e=Number(t);if(e>=_A&&e<=wA)return e}return null},cl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Lt("Exception was thrown by user callback.",n),e},Math.floor(0))}},NA=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Lt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lt(e)}}class Ua{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ua.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="5",D1="v",L1="s",F1="r",U1="f",$1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W1="ls",z1="p",ng="ac",B1="websocket",V1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,s,i,a=!1,l="",c=!1,d=!1){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_i.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_i.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function SA(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function G1(t,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let s;if(e===B1)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===V1)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SA(t)&&(n.ns=t.namespace);const i=[];return jt(n,(a,l)=>{i.push(a+"="+l)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.counters_={}}incrementCounter(e,n=1){xn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return N2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f={},Wf={};function Hx(t){const e=t.toString();return $f[e]||($f[e]=new kA),$f[e]}function IA(t,e){const n=t.toString();return Wf[n]||(Wf[n]=e()),Wf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&cl(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="start",TA="close",RA="pLPCommand",PA="pRTLPCB",K1="id",q1="pw",Y1="ser",AA="cb",OA="seg",MA="ts",DA="d",LA="dframe",Q1=1870,J1=30,FA=Q1-J1,UA=25e3,$A=3e4;class xr{constructor(e,n,s,i,a,l,c){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gc(e),this.stats_=Hx(n),this.urlFn=d=>(this.appCheckToken&&(d[ng]=this.appCheckToken),G1(n,V1,d))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new EA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($A)),pA(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gx((...a)=>{const[l,c,d,h,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===d_)this.id=c,this.password=d;else if(l===TA)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,c]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const s={};s[d_]="t",s[Y1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[AA]=this.scriptTagHolder.uniqueCallbackIdentifier),s[D1]=Vx,this.transportSessionId&&(s[L1]=this.transportSessionId),this.lastSessionId&&(s[W1]=this.lastSessionId),this.applicationId&&(s[z1]=this.applicationId),this.appCheckToken&&(s[ng]=this.appCheckToken),typeof location<"u"&&location.hostname&&$1.test(location.hostname)&&(s[F1]=U1);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xr.forceAllow_=!0}static forceDisallow(){xr.forceDisallow_=!0}static isAvailable(){return xr.forceAllow_?!0:!xr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xA()&&!vA()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=dj(n),i=O1(s,FA);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[LA]="t",s[K1]=e,s[q1]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ot(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Gx{constructor(e,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=R1(),window[RA+this.uniqueCallbackIdentifier]=e,window[PA+this.uniqueCallbackIdentifier]=n,this.myIFrame=Gx.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){_t("frame writing exception"),c.stack&&_t(c.stack),_t(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[K1]=this.myID,e[q1]=this.myPW,e[Y1]=this.currentSerial;let n=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+J1+s.length<=Q1;){const l=this.pendingSegs.shift();s=s+"&"+OA+i+"="+l.seg+"&"+MA+i+"="+l.ts+"&"+DA+i+"="+l.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(UA)),a=()=>{clearTimeout(i),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=16384,zA=45e3;let Wu=null;typeof MozWebSocket<"u"?Wu=MozWebSocket:typeof WebSocket<"u"&&(Wu=WebSocket);class Cn{constructor(e,n,s,i,a,l,c){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gc(this.connId),this.stats_=Hx(n),this.connURL=Cn.connectionURL_(n,l,c,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,i,a){const l={};return l[D1]=Vx,typeof location<"u"&&location.hostname&&$1.test(location.hostname)&&(l[F1]=U1),n&&(l[L1]=n),s&&(l[W1]=s),i&&(l[ng]=i),a&&(l[z1]=a),G1(e,B1,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_i.set("previous_websocket_failure",!0);try{let s;P2(),this.mySock=new Wu(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Cn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Wu!==null&&!Cn.forceDisallow_}static previouslyFailed(){return _i.isInMemoryStorage||_i.get("previous_websocket_failure")===!0}markConnectionHealthy(){_i.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Uo(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=O1(n,WA);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(zA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Cn.responsesRequiredToBeHealthy=2;Cn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[xr,Cn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Cn&&Cn.isAvailable();let s=n&&!Cn.previouslyFailed();if(e.webSocketOnly&&(n||Lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Cn];else{const i=this.transports_=[];for(const a of Ja.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a);Ja.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ja.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=6e4,VA=5e3,HA=10*1024,GA=100*1024,zf="t",u_="d",KA="s",h_="r",qA="e",m_="o",f_="a",p_="n",g_="p",YA="h";class QA{constructor(e,n,s,i,a,l,c,d,h,g){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=d,this.onKill_=h,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gc("c:"+this.id+":"),this.transportManager_=new Ja(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>GA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>HA?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zf in e){const n=e[zf];n===f_?this.upgradeIfSecondaryHealthy_():n===h_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===m_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ql("t",e),s=ql("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:g_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:f_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:p_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ql("t",e),s=ql("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ql(zf,e);if(u_ in e){const s=e[u_];if(n===YA){const i=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===p_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===KA?this.onConnectionShutdown_(s):n===h_?this.onReset_(s):n===qA?tg("Server Error: "+s):n===m_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Vx!==s&&Lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),xo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(BA))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(VA))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:g_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_i.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{put(e,n,s,i){}merge(e,n,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const i=this.getInitialEvent(e);i&&n.apply(s,i)}off(e,n,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===n&&(!s||s===i[a].context)){i.splice(a,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Z1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zu}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=32,v_=768;class ke{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ne(){return new ke("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Lr(t){return t.pieces_.length-t.pieceNum_}function Ae(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function Kx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function JA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ko(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function eC(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function We(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof ke)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new ke(n,0)}function xe(t){return t.pieceNum_>=t.pieces_.length}function zt(t,e){const n=ge(t),s=ge(e);if(n===null)return e;if(n===s)return zt(Ae(t),Ae(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function XA(t,e){const n=Ko(t,0),s=Ko(e,0);for(let i=0;i<n.length&&i<s.length;i++){const a=Vi(n[i],s[i]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function qx(t,e){if(Lr(t)!==Lr(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function kn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Lr(t)>Lr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class ZA{constructor(e,n){this.errorPrefix_=n,this.parts_=Ko(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=xh(this.parts_[s]);tC(this)}}function e5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xh(e),tC(t)}function t5(t){const e=t.parts_.pop();t.byteLength_-=xh(e),t.parts_.length>0&&(t.byteLength_-=1)}function tC(t){if(t.byteLength_>v_)throw new Error(t.errorPrefix_+"has a key path longer than "+v_+" bytes ("+t.byteLength_+").");if(t.parts_.length>x_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+x_+") or object contains a cycle "+gi(t))}function gi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends Z1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Yx}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=1e3,n5=60*5*1e3,y_=30*1e3,s5=1.3,r5=3e4,i5="server_kill",b_=3;class zs extends X1{constructor(e,n,s,i,a,l,c,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=zs.nextPersistentConnectionId_++,this.log_=gc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yl,this.maxReconnectDelay_=n5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yx.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&zu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const i=++this.requestNumber_,a={r:i,a:e,b:n};this.log_(ot(a)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const n=new Xt,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,i){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:n,query:e,tag:s};this.listens.get(l).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const a={p:s},l="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,c=>{const d=c.d,h=c.s;zs.warnOnListenWarnings_(d,n),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(h,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xn(e,"w")){const s=Pi(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||F2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=y_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=L2(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const a=i.s,l=i.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,n)}sendUnlisten_(e,n,s,i){this.log_("Unlisten on "+e+" for "+n);const a={p:e},l="n";i&&(a.q=s,a.t=i),this.sendRequest(l,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,i){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{i&&setTimeout(()=>{i(l.s,l.d)},Math.floor(0))})}put(e,n,s,i){this.putInternal("p",e,n,s,i)}merge(e,n,s,i){this.putInternal("m",e,n,s,i)}putInternal(e,n,s,i,a){this.initConnection_();const l={p:n,d:s};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ot(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):tg("Unrecognized action received from server: "+ot(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>r5&&(this.reconnectDelay_=Yl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*s5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+zs.nextConnectionId_++,a=this.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,s())},h=function(p){W(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:d,sendRequest:h};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,y]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=y&&y.token,c=new QA(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,k=>{Lt(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(i5)},a))}catch(p){this.log_("Failed to get token: "+p),l||(this.repoInfo_.nodeAdmin&&Lt(p),d())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Au(this.interruptReasons_)&&(this.reconnectDelay_=Yl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>Bx(a)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const s=new ke(e).toString();let i;if(this.listens.has(s)){const a=this.listens.get(s);i=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=b_&&(this.reconnectDelay_=y_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=b_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+I1.replace(/\./g,"-")]=1,gx()?e["framework.cordova"]=1:gh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zu.getInstance().currentlyOnline();return Au(this.interruptReasons_)&&e}}zs.nextPersistentConnectionId_=0;zs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ve(Dr,e),i=new ve(Dr,n);return this.compare(s,i)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd;class nC extends Eh{static get __EMPTY_NODE(){return Wd}static set __EMPTY_NODE(e){Wd=e}compare(e,n){return Vi(e.name,n.name)}isDefinedOn(e){throw il("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Ys,Wd)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,Wd)}toString(){return".key"}}const fs=new nC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,s,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?s(e.key,n):1,i&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,s,i,a){this.key=e,this.value=n,this.color=s??bt.RED,this.left=i??en.EMPTY_NODE,this.right=a??en.EMPTY_NODE}copy(e,n,s,i,a){return new bt(e??this.key,n??this.value,s??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const a=s(e,i.key);return a<0?i=i.copy(null,null,null,i.left.insert(e,n,s),null):a===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return en.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,i;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return en.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class a5{copy(e,n,s,i,a){return this}insert(e,n,s){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class en{constructor(e,n=en.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new en(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new en(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new zd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new zd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new zd(this.root_,null,this.comparator_,!0,e)}}en.EMPTY_NODE=new a5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t,e){return Vi(t.name,e.name)}function Qx(t,e){return Vi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;function o5(t){sg=t}const sC=function(t){return typeof t=="number"?"number:"+M1(t):"string:"+t},rC=function(t){if(t.isLeafNode()){const e=t.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xn(e,".sv"),"Priority must be a string or number.")}else W(t===sg||t.isEmpty(),"priority of unexpected type.");W(t===sg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __;class xt{constructor(e,n=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),rC(this.priorityNode_)}static set __childrenNodeConstructor(e){__=e}static get __childrenNodeConstructor(){return __}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:ge(e)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ge(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(W(s!==".priority"||Lr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ae(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sC(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=M1(this.value_):e+=this.value_,this.lazyHash_=P1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xt.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,i=xt.VALUE_TYPE_ORDER.indexOf(n),a=xt.VALUE_TYPE_ORDER.indexOf(s);return W(i>=0,"Unknown leaf type: "+n),W(a>=0,"Unknown leaf type: "+s),i===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iC,aC;function c5(t){iC=t}function d5(t){aC=t}class u5 extends Eh{compare(e,n){const s=e.node.getPriority(),i=n.node.getPriority(),a=s.compareTo(i);return a===0?Vi(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Ys,new xt("[PRIORITY-POST]",aC))}makePost(e,n){const s=iC(e);return new ve(n,new xt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Le=new u5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=Math.log(2);class m5{constructor(e){const n=a=>parseInt(Math.log(a)/h5,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bu=function(t,e,n,s){t.sort(e);const i=function(d,h){const g=h-d;let p,y;if(g===0)return null;if(g===1)return p=t[d],y=n?n(p):p,new bt(y,p.node,bt.BLACK,null,null);{const k=parseInt(g/2,10)+d,T=i(d,k),L=i(k+1,h);return p=t[k],y=n?n(p):p,new bt(y,p.node,bt.BLACK,T,L)}},a=function(d){let h=null,g=null,p=t.length;const y=function(T,L){const oe=p-T,C=p;p-=T;const w=i(oe+1,C),S=t[oe],D=n?n(S):S;k(new bt(D,S.node,L,null,w))},k=function(T){h?(h.left=T,h=T):(g=T,h=T)};for(let T=0;T<d.count;++T){const L=d.nextBitIsOne(),oe=Math.pow(2,d.count-(T+1));L?y(oe,bt.BLACK):(y(oe,bt.BLACK),y(oe,bt.RED))}return g},l=new m5(t.length),c=a(l);return new en(s||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf;const fa={};class Us{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return W(fa&&Le,"ChildrenNode.ts has not been loaded"),Bf=Bf||new Us({".priority":fa},{".priority":Le}),Bf}get(e){const n=Pi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof en?n:null}hasIndex(e){return xn(this.indexSet_,e.toString())}addIndex(e,n){W(e!==fs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const a=n.getIterator(ve.Wrap);let l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),s.push(l),l=a.getNext();let c;i?c=Bu(s,e.getCompare()):c=fa;const d=e.toString(),h=Object.assign({},this.indexSet_);h[d]=e;const g=Object.assign({},this.indexes_);return g[d]=c,new Us(g,h)}addToIndexes(e,n){const s=Ou(this.indexes_,(i,a)=>{const l=Pi(this.indexSet_,a);if(W(l,"Missing index implementation for "+a),i===fa)if(l.isDefinedOn(e.node)){const c=[],d=n.getIterator(ve.Wrap);let h=d.getNext();for(;h;)h.name!==e.name&&c.push(h),h=d.getNext();return c.push(e),Bu(c,l.getCompare())}else return fa;else{const c=n.get(e.name);let d=i;return c&&(d=d.remove(new ve(e.name,c))),d.insert(e,e.node)}});return new Us(s,this.indexSet_)}removeFromIndexes(e,n){const s=Ou(this.indexes_,i=>{if(i===fa)return i;{const a=n.get(e.name);return a?i.remove(new ve(e.name,a)):i}});return new Us(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql;class ie{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&rC(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ql||(Ql=new ie(new en(Qx),null,Us.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ql}updatePriority(e){return this.children_.isEmpty()?this:new ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ql:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(Ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ve(e,n);let i,a;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const l=i.isEmpty()?Ql:this.priorityNode_;return new ie(i,l,a)}}updateChild(e,n){const s=ge(e);if(s===null)return n;{W(ge(e)!==".priority"||Lr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(Ae(e),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,i=0,a=!0;if(this.forEachChild(Le,(l,c)=>{n[l]=c.val(e),s++,a&&ie.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):a=!1}),!e&&a&&i<2*s){const l=[];for(const c in n)l[c]=n[c];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sC(this.getPriority().val())+":"),this.forEachChild(Le,(n,s)=>{const i=s.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":P1(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const i=this.resolveIndex_(s);if(i){const a=i.getPredecessorKey(new ve(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ve.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)<0;)i.getNext(),a=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)>0;)i.getNext(),a=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xc?-1:0}withIndex(e){if(e===fs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Le),i=n.getIterator(Le);let a=s.getNext(),l=i.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=s.getNext(),l=i.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===fs?null:this.indexMap_.get(e.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class f5 extends ie{constructor(){super(new en(Qx),ie.EMPTY_NODE,Us.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ie.EMPTY_NODE}isEmpty(){return!1}}const xc=new f5;Object.defineProperties(ve,{MIN:{value:new ve(Dr,ie.EMPTY_NODE)},MAX:{value:new ve(Ys,xc)}});nC.__EMPTY_NODE=ie.EMPTY_NODE;xt.__childrenNodeConstructor=ie;o5(xc);d5(xc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=!0;function He(t,e=null){if(t===null)return ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new xt(n,He(e))}if(!(t instanceof Array)&&p5){const n=[];let s=!1;if(jt(t,(l,c)=>{if(l.substring(0,1)!=="."){const d=He(c);d.isEmpty()||(s=s||!d.getPriority().isEmpty(),n.push(new ve(l,d)))}}),n.length===0)return ie.EMPTY_NODE;const a=Bu(n,l5,l=>l.name,Qx);if(s){const l=Bu(n,Le.getCompare());return new ie(a,He(e),new Us({".priority":l},{".priority":Le}))}else return new ie(a,He(e),Us.Default)}else{let n=ie.EMPTY_NODE;return jt(t,(s,i)=>{if(xn(t,s)&&s.substring(0,1)!=="."){const a=He(i);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(He(e))}}c5(He);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx extends Eh{constructor(e){super(),this.indexPath_=e,W(!xe(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),i=this.extractChild(n.node),a=s.compareTo(i);return a===0?Vi(e.name,n.name):a}makePost(e,n){const s=He(e),i=ie.EMPTY_NODE.updateChild(this.indexPath_,s);return new ve(n,i)}maxPost(){const e=ie.EMPTY_NODE.updateChild(this.indexPath_,xc);return new ve(Ys,e)}toString(){return Ko(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends Eh{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Vi(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const s=He(e);return new ve(n,s)}toString(){return".value"}}const Xx=new g5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return{type:"value",snapshotNode:t}}function Xa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Yo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function x5(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.index_=e}updateChild(e,n,s,i,a,l){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(i).equals(s.getChild(i))&&c.isEmpty()===s.isEmpty()||(l!=null&&(s.isEmpty()?e.hasChild(n)?l.trackChildChange(qo(n,c)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(Xa(n,s)):l.trackChildChange(Yo(n,s,c))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Le,(i,a)=>{n.hasChild(i)||s.trackChildChange(qo(i,a))}),n.isLeafNode()||n.forEachChild(Le,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||s.trackChildChange(Yo(i,a,l))}else s.trackChildChange(Xa(i,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.indexedFilter_=new Zx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Qo.getStartPost_(e),this.endPost_=Qo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,i,a,l){return this.matches(new ve(n,s))||(s=ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,i,a,l)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ie.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ie.EMPTY_NODE);const a=this;return n.forEachChild(Le,(l,c)=>{a.matches(new ve(l,c))||(i=i.updateImmediateChild(l,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Qo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,i,a,l){return this.rangedFilter_.matches(new ve(n,s))||(s=ie.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,i,a,l):this.fullLimitUpdateChild_(e,n,s,a,l)}updateFullNode(e,n,s){let i;if(n.isLeafNode()||n.isEmpty())i=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ie.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const c=a.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))i=i.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ie.EMPTY_NODE);let a;this.reverse_?a=i.getReverseIterator(this.index_):a=i.getIterator(this.index_);let l=0;for(;a.hasNext();){const c=a.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:i=i.updateImmediateChild(c.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,i,a){let l;if(this.reverse_){const p=this.index_.getCompare();l=(y,k)=>p(k,y)}else l=this.index_.getCompare();const c=e;W(c.numChildren()===this.limit_,"");const d=new ve(n,s),h=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(c.hasChild(n)){const p=c.getImmediateChild(n);let y=i.getChildAfterChild(this.index_,h,this.reverse_);for(;y!=null&&(y.name===n||c.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);const k=y==null?1:l(y,d);if(g&&!s.isEmpty()&&k>=0)return a!=null&&a.trackChildChange(Yo(n,s,p)),c.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(qo(n,p));const L=c.updateImmediateChild(n,ie.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(a!=null&&a.trackChildChange(Xa(y.name,y.node)),L.updateImmediateChild(y.name,y.node)):L}}else return s.isEmpty()?e:g&&l(h,d)>=0?(a!=null&&(a.trackChildChange(qo(h.name,h.node)),a.trackChildChange(Xa(n,s))),c.updateImmediateChild(n,s).updateImmediateChild(h.name,ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dr}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ys}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Le}copy(){const e=new Th;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function y5(t){return t.loadsAllData()?new Zx(t.getIndex()):t.hasLimit()?new v5(t):new Qo(t)}function b5(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function _5(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function rg(t,e,n){const s=t.copy();return s.startSet_=!0,e===void 0&&(e=null),s.indexStartValue_=e,n!=null?(s.startNameSet_=!0,s.indexStartName_=n):(s.startNameSet_=!1,s.indexStartName_=""),s}function w5(t,e,n){let s;return t.index_===fs||n?s=rg(t,e,n):s=rg(t,e,Ys),s.startAfterSet_=!0,s}function ig(t,e,n){const s=t.copy();return s.endSet_=!0,e===void 0&&(e=null),s.indexEndValue_=e,n!==void 0?(s.endNameSet_=!0,s.indexEndName_=n):(s.endNameSet_=!1,s.indexEndName_=""),s}function N5(t,e,n){let s;return t.index_===fs||n?s=ig(t,e,n):s=ig(t,e,Dr),s.endBeforeSet_=!0,s}function Rh(t,e){const n=t.copy();return n.index_=e,n}function w_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Le?n="$priority":t.index_===Xx?n="$value":t.index_===fs?n="$key":(W(t.index_ instanceof Jx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ot(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=ot(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+ot(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=ot(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+ot(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function N_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends X1{constructor(e,n,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=gc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Vu.getListenId_(e,s),c={};this.listens_[l]=c;const d=w_(e._queryParams);this.restRequest_(a+".json",d,(h,g)=>{let p=g;if(h===404&&(p=null,h=null),h===null&&this.onDataUpdate_(a,p,!1,s),Pi(this.listens_,l)===c){let y;h?h===401?y="permission_denied":y="rest_error:"+h:y="ok",i(y,null)}})}unlisten(e,n){const s=Vu.getListenId_(e,n);delete this.listens_[s]}get(e){const n=w_(e._queryParams),s=e._path.toString(),i=new Xt;return this.restRequest_(s+".json",n,(a,l)=>{let c=l;a===404&&(c=null,a=null),a===null?(this.onDataUpdate_(s,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(n.auth=i.accessToken),a&&a.token&&(n.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zi(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(s&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=Uo(c.responseText)}catch{Lt("Failed to parse JSON response for "+l+": "+c.responseText)}s(null,d)}else c.status!==401&&c.status!==404&&Lt("Got unsuccessful REST response for "+l+" Status: "+c.status),s(c.status);s=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(){return{value:null,children:new Map}}function dl(t,e,n){if(xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=ge(e);t.children.has(s)||t.children.set(s,Hu());const i=t.children.get(s);e=Ae(e),dl(i,e,n)}}function ag(t,e){if(xe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Le,(s,i)=>{dl(t,new ke(s),i)}),ag(t,e)}}else if(t.children.size>0){const n=ge(e);return e=Ae(e),t.children.has(n)&&ag(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function lg(t,e,n){t.value!==null?n(e,t.value):C5(t,(s,i)=>{const a=new ke(e.toString()+"/"+s);lg(i,a,n)})}function C5(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&jt(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=10*1e3,k5=30*1e3,I5=5*60*1e3;class E5{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new S5(e);const s=j_+(k5-j_)*Math.random();xo(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;jt(e,(i,a)=>{a>0&&xn(this.statsToReport_,i)&&(n[i]=a,s=!0)}),s&&this.server_.reportStats(n),xo(this.reportStats_.bind(this),Math.floor(Math.random()*2*I5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bn||(Bn={}));function e0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function t0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function n0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Bn.ACK_USER_WRITE,this.source=e0()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ke(e));return new Gu(Ne(),n,this.revert)}}else return W(ge(this.path)===e,"operationForChild called for unrelated child."),new Gu(Ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.source=e,this.path=n,this.type=Bn.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new Jo(this.source,Ne()):new Jo(this.source,Ae(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Bn.OVERWRITE}operationForChild(e){return xe(this.path)?new Di(this.source,Ne(),this.snap.getImmediateChild(e)):new Di(this.source,Ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Bn.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new Di(this.source,Ne(),n.value):new Za(this.source,Ne(),n)}else return W(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Za(this.source,Ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function R5(t,e,n,s){const i=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(x5(l.childName,l.snapshotNode))}),Jl(t,i,"child_removed",e,s,n),Jl(t,i,"child_added",e,s,n),Jl(t,i,"child_moved",a,s,n),Jl(t,i,"child_changed",e,s,n),Jl(t,i,"value",e,s,n),i}function Jl(t,e,n,s,i,a){const l=s.filter(c=>c.type===n);l.sort((c,d)=>A5(t,c,d)),l.forEach(c=>{const d=P5(t,c,a);i.forEach(h=>{h.respondsTo(c.type)&&e.push(h.createEvent(d,t.query_))})})}function P5(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function A5(t,e,n){if(e.childName==null||n.childName==null)throw il("Should only compare child_ events.");const s=new ve(e.childName,e.snapshotNode),i=new ve(n.childName,n.snapshotNode);return t.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e){return{eventCache:t,serverCache:e}}function vo(t,e,n,s){return Ph(new Fr(e,n,s),t.serverCache)}function oC(t,e,n,s){return Ph(t.eventCache,new Fr(e,n,s))}function Ku(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Li(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf;const O5=()=>(Vf||(Vf=new en(gA)),Vf);class Me{constructor(e,n=O5()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return jt(e,(s,i)=>{n=n.set(new ke(s),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ne(),value:this.value};if(xe(e))return null;{const s=ge(e),i=this.children.get(s);if(i!==null){const a=i.findRootMostMatchingPathAndValue(Ae(e),n);return a!=null?{path:We(new ke(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=ge(e),s=this.children.get(n);return s!==null?s.subtree(Ae(e)):new Me(null)}}set(e,n){if(xe(e))return new Me(n,this.children);{const s=ge(e),a=(this.children.get(s)||new Me(null)).set(Ae(e),n),l=this.children.insert(s,a);return new Me(this.value,l)}}remove(e){if(xe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=ge(e),s=this.children.get(n);if(s){const i=s.remove(Ae(e));let a;return i.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,i),this.value===null&&a.isEmpty()?new Me(null):new Me(this.value,a)}else return this}}get(e){if(xe(e))return this.value;{const n=ge(e),s=this.children.get(n);return s?s.get(Ae(e)):null}}setTree(e,n){if(xe(e))return n;{const s=ge(e),a=(this.children.get(s)||new Me(null)).setTree(Ae(e),n);let l;return a.isEmpty()?l=this.children.remove(s):l=this.children.insert(s,a),new Me(this.value,l)}}fold(e){return this.fold_(Ne(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((i,a)=>{s[i]=a.fold_(We(e,i),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Ne(),n)}findOnPath_(e,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(xe(e))return null;{const a=ge(e),l=this.children.get(a);return l?l.findOnPath_(Ae(e),We(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ne(),n)}foreachOnPath_(e,n,s){if(xe(e))return this;{this.value&&s(n,this.value);const i=ge(e),a=this.children.get(i);return a?a.foreachOnPath_(Ae(e),We(n,i),s):new Me(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,n){this.children.inorderTraversal((s,i)=>{i.foreach_(We(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.writeTree_=e}static empty(){return new Kn(new Me(null))}}function yo(t,e,n){if(xe(e))return new Kn(new Me(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let a=s.value;const l=zt(i,e);return a=a.updateChild(l,n),new Kn(t.writeTree_.set(i,a))}else{const i=new Me(n),a=t.writeTree_.setTree(e,i);return new Kn(a)}}}function og(t,e,n){let s=t;return jt(n,(i,a)=>{s=yo(s,We(e,i),a)}),s}function C_(t,e){if(xe(e))return Kn.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new Kn(n)}}function cg(t,e){return Hi(t,e)!=null}function Hi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(zt(n.path,e)):null}function S_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Le,(s,i)=>{e.push(new ve(s,i))}):t.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new ve(s,i.value))}),e}function Ir(t,e){if(xe(e))return t;{const n=Hi(t,e);return n!=null?new Kn(new Me(n)):new Kn(t.writeTree_.subtree(e))}}function dg(t){return t.writeTree_.isEmpty()}function el(t,e){return cC(Ne(),t.writeTree_,e)}function cC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((i,a)=>{i===".priority"?(W(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=cC(We(t,i),a,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(We(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e){return mC(e,t)}function M5(t,e,n,s,i){W(s>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:i}),i&&(t.visibleWrites=yo(t.visibleWrites,e,n)),t.lastWriteId=s}function D5(t,e,n,s){W(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=og(t.visibleWrites,e,n),t.lastWriteId=s}function L5(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function F5(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let i=s.visible,a=!1,l=t.allWrites.length-1;for(;i&&l>=0;){const c=t.allWrites[l];c.visible&&(l>=n&&U5(c,s.path)?i=!1:kn(s.path,c.path)&&(a=!0)),l--}if(i){if(a)return $5(t),!0;if(s.snap)t.visibleWrites=C_(t.visibleWrites,s.path);else{const c=s.children;jt(c,d=>{t.visibleWrites=C_(t.visibleWrites,We(s.path,d))})}return!0}else return!1}function U5(t,e){if(t.snap)return kn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&kn(We(t.path,n),e))return!0;return!1}function $5(t){t.visibleWrites=dC(t.allWrites,W5,Ne()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function W5(t){return t.visible}function dC(t,e,n){let s=Kn.empty();for(let i=0;i<t.length;++i){const a=t[i];if(e(a)){const l=a.path;let c;if(a.snap)kn(n,l)?(c=zt(n,l),s=yo(s,c,a.snap)):kn(l,n)&&(c=zt(l,n),s=yo(s,Ne(),a.snap.getChild(c)));else if(a.children){if(kn(n,l))c=zt(n,l),s=og(s,c,a.children);else if(kn(l,n))if(c=zt(l,n),xe(c))s=og(s,Ne(),a.children);else{const d=Pi(a.children,ge(c));if(d){const h=d.getChild(Ae(c));s=yo(s,Ne(),h)}}}else throw il("WriteRecord should have .snap or .children")}}return s}function uC(t,e,n,s,i){if(!s&&!i){const a=Hi(t.visibleWrites,e);if(a!=null)return a;{const l=Ir(t.visibleWrites,e);if(dg(l))return n;if(n==null&&!cg(l,Ne()))return null;{const c=n||ie.EMPTY_NODE;return el(l,c)}}}else{const a=Ir(t.visibleWrites,e);if(!i&&dg(a))return n;if(!i&&n==null&&!cg(a,Ne()))return null;{const l=function(h){return(h.visible||i)&&(!s||!~s.indexOf(h.writeId))&&(kn(h.path,e)||kn(e,h.path))},c=dC(t.allWrites,l,e),d=n||ie.EMPTY_NODE;return el(c,d)}}}function z5(t,e,n){let s=ie.EMPTY_NODE;const i=Hi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Le,(a,l)=>{s=s.updateImmediateChild(a,l)}),s;if(n){const a=Ir(t.visibleWrites,e);return n.forEachChild(Le,(l,c)=>{const d=el(Ir(a,new ke(l)),c);s=s.updateImmediateChild(l,d)}),S_(a).forEach(l=>{s=s.updateImmediateChild(l.name,l.node)}),s}else{const a=Ir(t.visibleWrites,e);return S_(a).forEach(l=>{s=s.updateImmediateChild(l.name,l.node)}),s}}function B5(t,e,n,s,i){W(s||i,"Either existingEventSnap or existingServerSnap must exist");const a=We(e,n);if(cg(t.visibleWrites,a))return null;{const l=Ir(t.visibleWrites,a);return dg(l)?i.getChild(n):el(l,i.getChild(n))}}function V5(t,e,n,s){const i=We(e,n),a=Hi(t.visibleWrites,i);if(a!=null)return a;if(s.isCompleteForChild(n)){const l=Ir(t.visibleWrites,i);return el(l,s.getNode().getImmediateChild(n))}else return null}function H5(t,e){return Hi(t.visibleWrites,e)}function G5(t,e,n,s,i,a,l){let c;const d=Ir(t.visibleWrites,e),h=Hi(d,Ne());if(h!=null)c=h;else if(n!=null)c=el(d,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const g=[],p=l.getCompare(),y=a?c.getReverseIteratorFrom(s,l):c.getIteratorFrom(s,l);let k=y.getNext();for(;k&&g.length<i;)p(k,s)!==0&&g.push(k),k=y.getNext();return g}else return[]}function K5(){return{visibleWrites:Kn.empty(),allWrites:[],lastWriteId:-1}}function qu(t,e,n,s){return uC(t.writeTree,t.treePath,e,n,s)}function s0(t,e){return z5(t.writeTree,t.treePath,e)}function k_(t,e,n,s){return B5(t.writeTree,t.treePath,e,n,s)}function Yu(t,e){return H5(t.writeTree,We(t.treePath,e))}function q5(t,e,n,s,i,a){return G5(t.writeTree,t.treePath,e,n,s,i,a)}function r0(t,e,n){return V5(t.writeTree,t.treePath,e,n)}function hC(t,e){return mC(We(t.treePath,e),t.writeTree)}function mC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const a=i.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,Yo(s,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,qo(s,i.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,Xa(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,Yo(s,e.snapshotNode,i.oldSnap));else throw il("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const fC=new Q5;class i0{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return r0(this.writes_,e,s)}}getChildAfterChild(e,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Li(this.viewCache_),a=q5(this.writes_,i,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t){return{filter:t}}function X5(t,e){W(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Z5(t,e,n,s,i){const a=new Y5;let l,c;if(n.type===Bn.OVERWRITE){const h=n;h.source.fromUser?l=ug(t,e,h.path,h.snap,s,i,a):(W(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered()&&!xe(h.path),l=Qu(t,e,h.path,h.snap,s,i,c,a))}else if(n.type===Bn.MERGE){const h=n;h.source.fromUser?l=tO(t,e,h.path,h.children,s,i,a):(W(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered(),l=hg(t,e,h.path,h.children,s,i,c,a))}else if(n.type===Bn.ACK_USER_WRITE){const h=n;h.revert?l=rO(t,e,h.path,s,i,a):l=nO(t,e,h.path,h.affectedTree,s,i,a)}else if(n.type===Bn.LISTEN_COMPLETE)l=sO(t,e,n.path,s,a);else throw il("Unknown operation type: "+n.type);const d=a.getChanges();return eO(e,l,d),{viewCache:l,changes:d}}function eO(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Ku(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(lC(Ku(e)))}}function pC(t,e,n,s,i,a){const l=e.eventCache;if(Yu(s,n)!=null)return e;{let c,d;if(xe(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Li(e),g=h instanceof ie?h:ie.EMPTY_NODE,p=s0(s,g);c=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const h=qu(s,Li(e));c=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{const h=ge(n);if(h===".priority"){W(Lr(n)===1,"Can't have a priority with additional path components");const g=l.getNode();d=e.serverCache.getNode();const p=k_(s,n,g,d);p!=null?c=t.filter.updatePriority(g,p):c=l.getNode()}else{const g=Ae(n);let p;if(l.isCompleteForChild(h)){d=e.serverCache.getNode();const y=k_(s,n,l.getNode(),d);y!=null?p=l.getNode().getImmediateChild(h).updateChild(g,y):p=l.getNode().getImmediateChild(h)}else p=r0(s,h,e.serverCache);p!=null?c=t.filter.updateChild(l.getNode(),h,p,g,i,a):c=l.getNode()}}return vo(e,c,l.isFullyInitialized()||xe(n),t.filter.filtersNodes())}}function Qu(t,e,n,s,i,a,l,c){const d=e.serverCache;let h;const g=l?t.filter:t.filter.getIndexedFilter();if(xe(n))h=g.updateFullNode(d.getNode(),s,null);else if(g.filtersNodes()&&!d.isFiltered()){const k=d.getNode().updateChild(n,s);h=g.updateFullNode(d.getNode(),k,null)}else{const k=ge(n);if(!d.isCompleteForPath(n)&&Lr(n)>1)return e;const T=Ae(n),oe=d.getNode().getImmediateChild(k).updateChild(T,s);k===".priority"?h=g.updatePriority(d.getNode(),oe):h=g.updateChild(d.getNode(),k,oe,T,fC,null)}const p=oC(e,h,d.isFullyInitialized()||xe(n),g.filtersNodes()),y=new i0(i,p,a);return pC(t,p,n,i,y,c)}function ug(t,e,n,s,i,a,l){const c=e.eventCache;let d,h;const g=new i0(i,e,a);if(xe(n))h=t.filter.updateFullNode(e.eventCache.getNode(),s,l),d=vo(e,h,!0,t.filter.filtersNodes());else{const p=ge(n);if(p===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),s),d=vo(e,h,c.isFullyInitialized(),c.isFiltered());else{const y=Ae(n),k=c.getNode().getImmediateChild(p);let T;if(xe(y))T=s;else{const L=g.getCompleteChild(p);L!=null?Kx(y)===".priority"&&L.getChild(eC(y)).isEmpty()?T=L:T=L.updateChild(y,s):T=ie.EMPTY_NODE}if(k.equals(T))d=e;else{const L=t.filter.updateChild(c.getNode(),p,T,y,g,l);d=vo(e,L,c.isFullyInitialized(),t.filter.filtersNodes())}}}return d}function I_(t,e){return t.eventCache.isCompleteForChild(e)}function tO(t,e,n,s,i,a,l){let c=e;return s.foreach((d,h)=>{const g=We(n,d);I_(e,ge(g))&&(c=ug(t,c,g,h,i,a,l))}),s.foreach((d,h)=>{const g=We(n,d);I_(e,ge(g))||(c=ug(t,c,g,h,i,a,l))}),c}function E_(t,e,n){return n.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function hg(t,e,n,s,i,a,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,h;xe(n)?h=s:h=new Me(null).setTree(n,s);const g=e.serverCache.getNode();return h.children.inorderTraversal((p,y)=>{if(g.hasChild(p)){const k=e.serverCache.getNode().getImmediateChild(p),T=E_(t,k,y);d=Qu(t,d,new ke(p),T,i,a,l,c)}}),h.children.inorderTraversal((p,y)=>{const k=!e.serverCache.isCompleteForChild(p)&&y.value===null;if(!g.hasChild(p)&&!k){const T=e.serverCache.getNode().getImmediateChild(p),L=E_(t,T,y);d=Qu(t,d,new ke(p),L,i,a,l,c)}}),d}function nO(t,e,n,s,i,a,l){if(Yu(i,n)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(s.value!=null){if(xe(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return Qu(t,e,n,d.getNode().getChild(n),i,a,c,l);if(xe(n)){let h=new Me(null);return d.getNode().forEachChild(fs,(g,p)=>{h=h.set(new ke(g),p)}),hg(t,e,n,h,i,a,c,l)}else return e}else{let h=new Me(null);return s.foreach((g,p)=>{const y=We(n,g);d.isCompleteForPath(y)&&(h=h.set(g,d.getNode().getChild(y)))}),hg(t,e,n,h,i,a,c,l)}}function sO(t,e,n,s,i){const a=e.serverCache,l=oC(e,a.getNode(),a.isFullyInitialized()||xe(n),a.isFiltered());return pC(t,l,n,s,fC,i)}function rO(t,e,n,s,i,a){let l;if(Yu(s,n)!=null)return e;{const c=new i0(s,e,i),d=e.eventCache.getNode();let h;if(xe(n)||ge(n)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=qu(s,Li(e));else{const p=e.serverCache.getNode();W(p instanceof ie,"serverChildren would be complete if leaf node"),g=s0(s,p)}g=g,h=t.filter.updateFullNode(d,g,a)}else{const g=ge(n);let p=r0(s,g,e.serverCache);p==null&&e.serverCache.isCompleteForChild(g)&&(p=d.getImmediateChild(g)),p!=null?h=t.filter.updateChild(d,g,p,Ae(n),c,a):e.eventCache.getNode().hasChild(g)?h=t.filter.updateChild(d,g,ie.EMPTY_NODE,Ae(n),c,a):h=d,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=qu(s,Li(e)),l.isLeafNode()&&(h=t.filter.updateFullNode(h,l,a)))}return l=e.serverCache.isFullyInitialized()||Yu(s,Ne())!=null,vo(e,h,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new Zx(s.getIndex()),a=y5(s);this.processor_=J5(a);const l=n.serverCache,c=n.eventCache,d=i.updateFullNode(ie.EMPTY_NODE,l.getNode(),null),h=a.updateFullNode(ie.EMPTY_NODE,c.getNode(),null),g=new Fr(d,l.isFullyInitialized(),i.filtersNodes()),p=new Fr(h,c.isFullyInitialized(),a.filtersNodes());this.viewCache_=Ph(p,g),this.eventGenerator_=new T5(this.query_)}get query(){return this.query_}}function aO(t){return t.viewCache_.serverCache.getNode()}function lO(t){return Ku(t.viewCache_)}function oO(t,e){const n=Li(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function T_(t){return t.eventRegistrations_.length===0}function cO(t,e){t.eventRegistrations_.push(e)}function R_(t,e,n){const s=[];if(n){W(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(n,i);l&&s.push(l)})}if(e){let i=[];for(let a=0;a<t.eventRegistrations_.length;++a){const l=t.eventRegistrations_[a];if(!l.matches(e))i.push(l);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return s}function P_(t,e,n,s){e.type===Bn.MERGE&&e.source.queryId!==null&&(W(Li(t.viewCache_),"We should always have a full cache before handling merges"),W(Ku(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,a=Z5(t.processor_,i,e,n,s);return X5(t.processor_,a.viewCache),W(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,gC(t,a.changes,a.viewCache.eventCache.getNode(),null)}function dO(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Le,(a,l)=>{s.push(Xa(a,l))}),n.isFullyInitialized()&&s.push(lC(n.getNode())),gC(t,s,n.getNode(),e)}function gC(t,e,n,s){const i=s?[s]:t.eventRegistrations_;return R5(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju;class xC{constructor(){this.views=new Map}}function uO(t){W(!Ju,"__referenceConstructor has already been defined"),Ju=t}function hO(){return W(Ju,"Reference.ts has not been loaded"),Ju}function mO(t){return t.views.size===0}function a0(t,e,n,s){const i=e.source.queryId;if(i!==null){const a=t.views.get(i);return W(a!=null,"SyncTree gave us an op for an invalid query."),P_(a,e,n,s)}else{let a=[];for(const l of t.views.values())a=a.concat(P_(l,e,n,s));return a}}function vC(t,e,n,s,i){const a=e._queryIdentifier,l=t.views.get(a);if(!l){let c=qu(n,i?s:null),d=!1;c?d=!0:s instanceof ie?(c=s0(n,s),d=!1):(c=ie.EMPTY_NODE,d=!1);const h=Ph(new Fr(c,d,!1),new Fr(s,i,!1));return new iO(e,h)}return l}function fO(t,e,n,s,i,a){const l=vC(t,e,s,i,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),cO(l,n),dO(l,n)}function pO(t,e,n,s){const i=e._queryIdentifier,a=[];let l=[];const c=Ur(t);if(i==="default")for(const[d,h]of t.views.entries())l=l.concat(R_(h,n,s)),T_(h)&&(t.views.delete(d),h.query._queryParams.loadsAllData()||a.push(h.query));else{const d=t.views.get(i);d&&(l=l.concat(R_(d,n,s)),T_(d)&&(t.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return c&&!Ur(t)&&a.push(new(hO())(e._repo,e._path)),{removed:a,events:l}}function yC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Er(t,e){let n=null;for(const s of t.views.values())n=n||oO(s,e);return n}function bC(t,e){if(e._queryParams.loadsAllData())return Oh(t);{const s=e._queryIdentifier;return t.views.get(s)}}function _C(t,e){return bC(t,e)!=null}function Ur(t){return Oh(t)!=null}function Oh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu;function gO(t){W(!Xu,"__referenceConstructor has already been defined"),Xu=t}function xO(){return W(Xu,"Reference.ts has not been loaded"),Xu}let vO=1;class A_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=K5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function l0(t,e,n,s,i){return M5(t.pendingWriteTree_,e,n,s,i),i?ul(t,new Di(e0(),e,n)):[]}function yO(t,e,n,s){D5(t.pendingWriteTree_,e,n,s);const i=Me.fromObject(n);return ul(t,new Za(e0(),e,i))}function vr(t,e,n=!1){const s=L5(t.pendingWriteTree_,e);if(F5(t.pendingWriteTree_,e)){let a=new Me(null);return s.snap!=null?a=a.set(Ne(),!0):jt(s.children,l=>{a=a.set(new ke(l),!0)}),ul(t,new Gu(s.path,a,n))}else return[]}function vc(t,e,n){return ul(t,new Di(t0(),e,n))}function bO(t,e,n){const s=Me.fromObject(n);return ul(t,new Za(t0(),e,s))}function _O(t,e){return ul(t,new Jo(t0(),e))}function wO(t,e,n){const s=o0(t,n);if(s){const i=c0(s),a=i.path,l=i.queryId,c=zt(a,e),d=new Jo(n0(l),c);return d0(t,a,d)}else return[]}function Zu(t,e,n,s,i=!1){const a=e._path,l=t.syncPointTree_.get(a);let c=[];if(l&&(e._queryIdentifier==="default"||_C(l,e))){const d=pO(l,e,n,s);mO(l)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const h=d.removed;if(c=d.events,!i){const g=h.findIndex(y=>y._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(a,(y,k)=>Ur(k));if(g&&!p){const y=t.syncPointTree_.subtree(a);if(!y.isEmpty()){const k=CO(y);for(let T=0;T<k.length;++T){const L=k[T],oe=L.query,C=CC(t,L);t.listenProvider_.startListening(bo(oe),Xo(t,oe),C.hashFn,C.onComplete)}}}!p&&h.length>0&&!s&&(g?t.listenProvider_.stopListening(bo(e),null):h.forEach(y=>{const k=t.queryToTagMap.get(Dh(y));t.listenProvider_.stopListening(bo(y),k)}))}SO(t,h)}return c}function wC(t,e,n,s){const i=o0(t,s);if(i!=null){const a=c0(i),l=a.path,c=a.queryId,d=zt(l,e),h=new Di(n0(c),d,n);return d0(t,l,h)}else return[]}function NO(t,e,n,s){const i=o0(t,s);if(i){const a=c0(i),l=a.path,c=a.queryId,d=zt(l,e),h=Me.fromObject(n),g=new Za(n0(c),d,h);return d0(t,l,g)}else return[]}function mg(t,e,n,s=!1){const i=e._path;let a=null,l=!1;t.syncPointTree_.foreachOnPath(i,(y,k)=>{const T=zt(y,i);a=a||Er(k,T),l=l||Ur(k)});let c=t.syncPointTree_.get(i);c?(l=l||Ur(c),a=a||Er(c,Ne())):(c=new xC,t.syncPointTree_=t.syncPointTree_.set(i,c));let d;a!=null?d=!0:(d=!1,a=ie.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((k,T)=>{const L=Er(T,Ne());L&&(a=a.updateImmediateChild(k,L))}));const h=_C(c,e);if(!h&&!e._queryParams.loadsAllData()){const y=Dh(e);W(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const k=kO();t.queryToTagMap.set(y,k),t.tagToQueryMap.set(k,y)}const g=Ah(t.pendingWriteTree_,i);let p=fO(c,e,n,g,a,d);if(!h&&!l&&!s){const y=bC(c,e);p=p.concat(IO(t,e,y))}return p}function Mh(t,e,n){const i=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,c)=>{const d=zt(l,e),h=Er(c,d);if(h)return h});return uC(i,e,a,n,!0)}function jO(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(h,g)=>{const p=zt(h,n);s=s||Er(g,p)});let i=t.syncPointTree_.get(n);i?s=s||Er(i,Ne()):(i=new xC,t.syncPointTree_=t.syncPointTree_.set(n,i));const a=s!=null,l=a?new Fr(s,!0,!1):null,c=Ah(t.pendingWriteTree_,e._path),d=vC(i,e,c,a?l.getNode():ie.EMPTY_NODE,a);return lO(d)}function ul(t,e){return NC(e,t.syncPointTree_,null,Ah(t.pendingWriteTree_,Ne()))}function NC(t,e,n,s){if(xe(t.path))return jC(t,e,n,s);{const i=e.get(Ne());n==null&&i!=null&&(n=Er(i,Ne()));let a=[];const l=ge(t.path),c=t.operationForChild(l),d=e.children.get(l);if(d&&c){const h=n?n.getImmediateChild(l):null,g=hC(s,l);a=a.concat(NC(c,d,h,g))}return i&&(a=a.concat(a0(i,t,s,n))),a}}function jC(t,e,n,s){const i=e.get(Ne());n==null&&i!=null&&(n=Er(i,Ne()));let a=[];return e.children.inorderTraversal((l,c)=>{const d=n?n.getImmediateChild(l):null,h=hC(s,l),g=t.operationForChild(l);g&&(a=a.concat(jC(g,c,d,h)))}),i&&(a=a.concat(a0(i,t,s,n))),a}function CC(t,e){const n=e.query,s=Xo(t,n);return{hashFn:()=>(aO(e)||ie.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?wO(t,n._path,s):_O(t,n._path);{const a=yA(i,n);return Zu(t,n,null,a)}}}}function Xo(t,e){const n=Dh(e);return t.queryToTagMap.get(n)}function Dh(t){return t._path.toString()+"$"+t._queryIdentifier}function o0(t,e){return t.tagToQueryMap.get(e)}function c0(t){const e=t.indexOf("$");return W(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function d0(t,e,n){const s=t.syncPointTree_.get(e);W(s,"Missing sync point for query tag that we're tracking");const i=Ah(t.pendingWriteTree_,e);return a0(s,n,i,null)}function CO(t){return t.fold((e,n,s)=>{if(n&&Ur(n))return[Oh(n)];{let i=[];return n&&(i=yC(n)),jt(s,(a,l)=>{i=i.concat(l)}),i}})}function bo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(xO())(t._repo,t._path):t}function SO(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const i=Dh(s),a=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(a)}}}function kO(){return vO++}function IO(t,e,n){const s=e._path,i=Xo(t,e),a=CC(t,n),l=t.listenProvider_.startListening(bo(e),i,a.hashFn,a.onComplete),c=t.syncPointTree_.subtree(s);if(i)W(!Ur(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((h,g,p)=>{if(!xe(h)&&g&&Ur(g))return[Oh(g).query];{let y=[];return g&&(y=y.concat(yC(g).map(k=>k.query))),jt(p,(k,T)=>{y=y.concat(T)}),y}});for(let h=0;h<d.length;++h){const g=d[h];t.listenProvider_.stopListening(bo(g),Xo(t,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new u0(n)}node(){return this.node_}}class h0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=We(this.path_,e);return new h0(this.syncTree_,n)}node(){return Mh(this.syncTree_,this.path_)}}const EO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},O_=function(t,e,n){if(!t||typeof t!="object")return t;if(W(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return TO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return RO(t[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},TO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+t)}},RO=function(t,e,n){t.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&W(!1,"Unexpected increment value: "+s);const i=e.node();if(W(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const l=i.getValue();return typeof l!="number"?s:l+s},SC=function(t,e,n,s){return f0(e,new h0(n,t),s)},m0=function(t,e,n){return f0(t,new u0(e),n)};function f0(t,e,n){const s=t.getPriority().val(),i=O_(s,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const l=t,c=O_(l.getValue(),e,n);return c!==l.getValue()||i!==l.getPriority().val()?new xt(c,He(i)):t}else{const l=t;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new xt(i))),l.forEachChild(Le,(c,d)=>{const h=f0(d,e.getImmediateChild(c),n);h!==d&&(a=a.updateImmediateChild(c,h))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Lh(t,e){let n=e instanceof ke?e:new ke(e),s=t,i=ge(n);for(;i!==null;){const a=Pi(s.node.children,i)||{children:{},childCount:0};s=new p0(i,s,a),n=Ae(n),i=ge(n)}return s}function Gi(t){return t.node.value}function g0(t,e){t.node.value=e,fg(t)}function kC(t){return t.node.childCount>0}function PO(t){return Gi(t)===void 0&&!kC(t)}function Fh(t,e){jt(t.node.children,(n,s)=>{e(new p0(n,t,s))})}function IC(t,e,n,s){n&&e(t),Fh(t,i=>{IC(i,e,!0)})}function AO(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function yc(t){return new ke(t.parent===null?t.name:yc(t.parent)+"/"+t.name)}function fg(t){t.parent!==null&&OO(t.parent,t.name,t)}function OO(t,e,n){const s=PO(n),i=xn(t.node.children,e);s&&i?(delete t.node.children[e],t.node.childCount--,fg(t)):!s&&!i&&(t.node.children[e]=n.node,t.node.childCount++,fg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=/[\[\].#$\/\u0000-\u001F\u007F]/,DO=/[\[\].#$\u0000-\u001F\u007F]/,Hf=10*1024*1024,Uh=function(t){return typeof t=="string"&&t.length!==0&&!MO.test(t)},EC=function(t){return typeof t=="string"&&t.length!==0&&!DO.test(t)},LO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EC(t)},Zo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ih(t)||t&&typeof t=="object"&&xn(t,".sv")},xs=function(t,e,n,s){s&&e===void 0||bc(an(t,"value"),e,n)},bc=function(t,e,n){const s=n instanceof ke?new ZA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+gi(s));if(typeof e=="function")throw new Error(t+"contains a function "+gi(s)+" with contents = "+e.toString());if(Ih(e))throw new Error(t+"contains "+e.toString()+" "+gi(s));if(typeof e=="string"&&e.length>Hf/3&&xh(e)>Hf)throw new Error(t+"contains a string greater than "+Hf+" utf8 bytes "+gi(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,a=!1;if(jt(e,(l,c)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!Uh(l)))throw new Error(t+" contains an invalid key ("+l+") "+gi(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);e5(s,l),bc(t,c,s),t5(s)}),i&&a)throw new Error(t+' contains ".value" child '+gi(s)+" in addition to actual children.")}},FO=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=Ko(s);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!Uh(a[l]))throw new Error(t+"contains an invalid key ("+a[l]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(XA);let i=null;for(n=0;n<e.length;n++){if(s=e[n],i!==null&&kn(i,s))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+s.toString());i=s}},TC=function(t,e,n,s){const i=an(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];jt(e,(l,c)=>{const d=new ke(l);if(bc(i,c,We(n,d)),Kx(d)===".priority"&&!Zo(c))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(d)}),FO(i,a)},x0=function(t,e,n){if(Ih(e))throw new Error(an(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zo(e))throw new Error(an(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},_c=function(t,e,n,s){if(n!==void 0&&!Uh(n))throw new Error(an(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ec=function(t,e,n,s){if(!EC(n))throw new Error(an(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},UO=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ec(t,e,n)},In=function(t,e){if(ge(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},RC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Uh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!LO(n))throw new Error(an(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $h(t,e){let n=null;for(let s=0;s<e.length;s++){const i=e[s],a=i.getPath();n!==null&&!qx(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&t.eventLists_.push(n)}function PC(t,e,n){$h(t,n),AC(t,s=>qx(s,e))}function vn(t,e,n){$h(t,n),AC(t,s=>kn(s,e)||kn(e,s))}function AC(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const i=t.eventLists_[s];if(i){const a=i.path;e(a)?(WO(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function WO(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Si&&_t("event: "+n.toString()),cl(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="repo_interrupt",zO=25;class BO{constructor(e,n,s,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $O,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hu(),this.transactionQueueTree_=new p0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VO(t,e,n){if(t.stats_=Hx(t.repoInfo_),t.forceRestClient_||NA())t.server_=new Vu(t.repoInfo_,(s,i,a,l)=>{M_(t,s,i,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>D_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new zs(t.repoInfo_,e,(s,i,a,l)=>{M_(t,s,i,a,l)},s=>{D_(t,s)},s=>{HO(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=IA(t.repoInfo_,()=>new E5(t.stats_,t.server_)),t.infoData_=new j5,t.infoSyncTree_=new A_({startListening:(s,i,a,l)=>{let c=[];const d=t.infoData_.getNode(s._path);return d.isEmpty()||(c=vc(t.infoSyncTree_,s._path,d),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),v0(t,"connected",!1),t.serverSyncTree_=new A_({startListening:(s,i,a,l)=>(t.server_.listen(s,a,i,(c,d)=>{const h=l(c,d);vn(t.eventQueue_,s._path,h)}),[]),stopListening:(s,i)=>{t.server_.unlisten(s,i)}})}function MC(t){const n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wc(t){return EO({timestamp:MC(t)})}function M_(t,e,n,s,i){t.dataUpdateCount++;const a=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(i)if(s){const d=Ou(n,h=>He(h));l=NO(t.serverSyncTree_,a,d,i)}else{const d=He(n);l=wC(t.serverSyncTree_,a,d,i)}else if(s){const d=Ou(n,h=>He(h));l=bO(t.serverSyncTree_,a,d)}else{const d=He(n);l=vc(t.serverSyncTree_,a,d)}let c=a;l.length>0&&(c=tl(t,a)),vn(t.eventQueue_,c,l)}function D_(t,e){v0(t,"connected",e),e===!1&&qO(t)}function HO(t,e){jt(e,(n,s)=>{v0(t,n,s)})}function v0(t,e,n){const s=new ke("/.info/"+e),i=He(n);t.infoData_.updateSnapshot(s,i);const a=vc(t.infoSyncTree_,s,i);vn(t.eventQueue_,s,a)}function Wh(t){return t.nextWriteId_++}function GO(t,e,n){const s=jO(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(i=>{const a=He(i).withIndex(e._queryParams.getIndex());mg(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=vc(t.serverSyncTree_,e._path,a);else{const c=Xo(t.serverSyncTree_,e);l=wC(t.serverSyncTree_,e._path,a,c)}return vn(t.eventQueue_,e._path,l),Zu(t.serverSyncTree_,e,n,null,!0),a},i=>(hl(t,"get for query "+ot(e)+" failed: "+i),Promise.reject(new Error(i))))}function y0(t,e,n,s,i){hl(t,"set",{path:e.toString(),value:n,priority:s});const a=wc(t),l=He(n,s),c=Mh(t.serverSyncTree_,e),d=m0(l,c,a),h=Wh(t),g=l0(t.serverSyncTree_,e,d,h,!0);$h(t.eventQueue_,g),t.server_.put(e.toString(),l.val(!0),(y,k)=>{const T=y==="ok";T||Lt("set at "+e+" failed: "+y);const L=vr(t.serverSyncTree_,h,!T);vn(t.eventQueue_,e,L),$r(t,i,y,k)});const p=_0(t,e);tl(t,p),vn(t.eventQueue_,p,[])}function KO(t,e,n,s){hl(t,"update",{path:e.toString(),value:n});let i=!0;const a=wc(t),l={};if(jt(n,(c,d)=>{i=!1,l[c]=SC(We(e,c),He(d),t.serverSyncTree_,a)}),i)_t("update() called with empty data.  Don't do anything."),$r(t,s,"ok",void 0);else{const c=Wh(t),d=yO(t.serverSyncTree_,e,l,c);$h(t.eventQueue_,d),t.server_.merge(e.toString(),n,(h,g)=>{const p=h==="ok";p||Lt("update at "+e+" failed: "+h);const y=vr(t.serverSyncTree_,c,!p),k=y.length>0?tl(t,e):e;vn(t.eventQueue_,k,y),$r(t,s,h,g)}),jt(n,h=>{const g=_0(t,We(e,h));tl(t,g)}),vn(t.eventQueue_,e,[])}}function qO(t){hl(t,"onDisconnectEvents");const e=wc(t),n=Hu();lg(t.onDisconnect_,Ne(),(i,a)=>{const l=SC(i,a,t.serverSyncTree_,e);dl(n,i,l)});let s=[];lg(n,Ne(),(i,a)=>{s=s.concat(vc(t.serverSyncTree_,i,a));const l=_0(t,i);tl(t,l)}),t.onDisconnect_=Hu(),vn(t.eventQueue_,Ne(),s)}function YO(t,e,n){t.server_.onDisconnectCancel(e.toString(),(s,i)=>{s==="ok"&&ag(t.onDisconnect_,e),$r(t,n,s,i)})}function L_(t,e,n,s){const i=He(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{a==="ok"&&dl(t.onDisconnect_,e,i),$r(t,s,a,l)})}function QO(t,e,n,s,i){const a=He(n,s);t.server_.onDisconnectPut(e.toString(),a.val(!0),(l,c)=>{l==="ok"&&dl(t.onDisconnect_,e,a),$r(t,i,l,c)})}function JO(t,e,n,s){if(Au(n)){_t("onDisconnect().update() called with empty data.  Don't do anything."),$r(t,s,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,a)=>{i==="ok"&&jt(n,(l,c)=>{const d=He(c);dl(t.onDisconnect_,We(e,l),d)}),$r(t,s,i,a)})}function XO(t,e,n){let s;ge(e._path)===".info"?s=mg(t.infoSyncTree_,e,n):s=mg(t.serverSyncTree_,e,n),PC(t.eventQueue_,e._path,s)}function pg(t,e,n){let s;ge(e._path)===".info"?s=Zu(t.infoSyncTree_,e,n):s=Zu(t.serverSyncTree_,e,n),PC(t.eventQueue_,e._path,s)}function DC(t){t.persistentConnection_&&t.persistentConnection_.interrupt(OC)}function ZO(t){t.persistentConnection_&&t.persistentConnection_.resume(OC)}function hl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_t(n,...e)}function $r(t,e,n,s){e&&cl(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let a=i;s&&(a+=": "+s);const l=new Error(a);l.code=i,e(l)}})}function eM(t,e,n,s,i,a){hl(t,"transaction on "+e);const l={path:e,update:n,onComplete:s,status:null,order:R1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=b0(t,e,void 0);l.currentInputSnapshot=c;const d=l.update(c.val());if(d===void 0)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{bc("transaction failed: Data returned ",d,l.path),l.status=0;const h=Lh(t.transactionQueueTree_,e),g=Gi(h)||[];g.push(l),g0(h,g);let p;typeof d=="object"&&d!==null&&xn(d,".priority")?(p=Pi(d,".priority"),W(Zo(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(Mh(t.serverSyncTree_,e)||ie.EMPTY_NODE).getPriority().val();const y=wc(t),k=He(d,p),T=m0(k,c,y);l.currentOutputSnapshotRaw=k,l.currentOutputSnapshotResolved=T,l.currentWriteId=Wh(t);const L=l0(t.serverSyncTree_,e,T,l.currentWriteId,l.applyLocally);vn(t.eventQueue_,e,L),zh(t,t.transactionQueueTree_)}}function b0(t,e,n){return Mh(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function zh(t,e=t.transactionQueueTree_){if(e||Bh(t,e),Gi(e)){const n=FC(t,e);W(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&tM(t,yc(e),n)}else kC(e)&&Fh(e,n=>{zh(t,n)})}function tM(t,e,n){const s=n.map(h=>h.currentWriteId),i=b0(t,e,s);let a=i;const l=i.hash();for(let h=0;h<n.length;h++){const g=n[h];W(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const p=zt(e,g.path);a=a.updateChild(p,g.currentOutputSnapshotRaw)}const c=a.val(!0),d=e;t.server_.put(d.toString(),c,h=>{hl(t,"transaction put response",{path:d.toString(),status:h});let g=[];if(h==="ok"){const p=[];for(let y=0;y<n.length;y++)n[y].status=2,g=g.concat(vr(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&p.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Bh(t,Lh(t.transactionQueueTree_,e)),zh(t,t.transactionQueueTree_),vn(t.eventQueue_,e,g);for(let y=0;y<p.length;y++)cl(p[y])}else{if(h==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Lt("transaction at "+d.toString()+" failed: "+h);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=h}tl(t,e)}},l)}function tl(t,e){const n=LC(t,e),s=yc(n),i=FC(t,n);return nM(t,i,s),s}function nM(t,e,n){if(e.length===0)return;const s=[];let i=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],h=zt(n,d.path);let g=!1,p;if(W(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)g=!0,p=d.abortReason,i=i.concat(vr(t.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=zO)g=!0,p="maxretry",i=i.concat(vr(t.serverSyncTree_,d.currentWriteId,!0));else{const y=b0(t,d.path,l);d.currentInputSnapshot=y;const k=e[c].update(y.val());if(k!==void 0){bc("transaction failed: Data returned ",k,d.path);let T=He(k);typeof k=="object"&&k!=null&&xn(k,".priority")||(T=T.updatePriority(y.getPriority()));const oe=d.currentWriteId,C=wc(t),w=m0(T,y,C);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=w,d.currentWriteId=Wh(t),l.splice(l.indexOf(oe),1),i=i.concat(l0(t.serverSyncTree_,d.path,w,d.currentWriteId,d.applyLocally)),i=i.concat(vr(t.serverSyncTree_,oe,!0))}else g=!0,p="nodata",i=i.concat(vr(t.serverSyncTree_,d.currentWriteId,!0))}vn(t.eventQueue_,n,i),i=[],g&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?s.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):s.push(()=>e[c].onComplete(new Error(p),!1,null))))}Bh(t,t.transactionQueueTree_);for(let c=0;c<s.length;c++)cl(s[c]);zh(t,t.transactionQueueTree_)}function LC(t,e){let n,s=t.transactionQueueTree_;for(n=ge(e);n!==null&&Gi(s)===void 0;)s=Lh(s,n),e=Ae(e),n=ge(e);return s}function FC(t,e){const n=[];return UC(t,e,n),n.sort((s,i)=>s.order-i.order),n}function UC(t,e,n){const s=Gi(e);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);Fh(e,i=>{UC(t,i,n)})}function Bh(t,e){const n=Gi(e);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,g0(e,n.length>0?n:void 0)}Fh(e,s=>{Bh(t,s)})}function _0(t,e){const n=yc(LC(t,e)),s=Lh(t.transactionQueueTree_,e);return AO(s,i=>{Gf(t,i)}),Gf(t,s),IC(s,i=>{Gf(t,i)}),n}function Gf(t,e){const n=Gi(e);if(n){const s=[];let i=[],a=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(W(a===l-1,"All SENT items should be at beginning of queue."),a=l,n[l].status=3,n[l].abortReason="set"):(W(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),i=i.concat(vr(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&s.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?g0(e,void 0):n.length=a+1,vn(t.eventQueue_,yc(e),i);for(let l=0;l<s.length;l++)cl(s[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function rM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Lt(`Invalid query segment '${n}' in query '${t}'`)}return e}const gg=function(t,e){const n=iM(t),s=n.namespace;n.domain==="firebase.com"&&gs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&gs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||fA();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new H1(n.host,n.secure,s,i,e,"",s!==n.subdomain),path:new ke(n.pathString)}},iM=function(t){let e="",n="",s="",i="",a="",l=!0,c="https",d=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(c=t.substring(0,h-1),t=t.substring(h+2));let g=t.indexOf("/");g===-1&&(g=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(g,p)),g<p&&(i=sM(t.substring(g,p)));const y=rM(t.substring(Math.min(t.length,p)));h=e.indexOf(":"),h>=0?(l=c==="https"||c==="wss",d=parseInt(e.substring(h+1),10)):h=e.length;const k=e.slice(0,h);if(k.toLowerCase()==="localhost")n="localhost";else if(k.split(".").length<=2)n=k;else{const T=e.indexOf(".");s=e.substring(0,T).toLowerCase(),n=e.substring(T+1),a=s}"ns"in y&&(a=y.ns)}return{host:e,port:d,domain:n,subdomain:s,secure:l,scheme:c,pathString:i,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aM=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let i;const a=new Array(8);for(i=7;i>=0;i--)a[i]=F_.charAt(n%64),n=Math.floor(n/64);W(n===0,"Cannot push at time == 0");let l=a.join("");if(s){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)l+=F_.charAt(e[i]);return W(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,s,i){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class WC{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lM=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Xt;return YO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){In("OnDisconnect.remove",this._path);const e=new Xt;return L_(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){In("OnDisconnect.set",this._path),xs("OnDisconnect.set",e,this._path,!1);const n=new Xt;return L_(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){In("OnDisconnect.setWithPriority",this._path),xs("OnDisconnect.setWithPriority",e,this._path,!1),x0("OnDisconnect.setWithPriority",n);const s=new Xt;return QO(this._repo,this._path,e,n,s.wrapCallback(()=>{})),s.promise}update(e){In("OnDisconnect.update",this._path),TC("OnDisconnect.update",e,this._path);const n=new Xt;return JO(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,s,i){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return xe(this._path)?null:Kx(this._path)}get ref(){return new Mn(this._repo,this._path)}get _queryIdentifier(){const e=N_(this._queryParams),n=Bx(e);return n==="{}"?"default":n}get _queryObject(){return N_(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof ln))return!1;const n=this._repo===e._repo,s=qx(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+JA(this._path)}}function Vh(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Gr(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===fs){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Dr)throw new Error(s);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ys)throw new Error(s);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Le){if(e!=null&&!Zo(e)||n!=null&&!Zo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(W(t.getIndex()instanceof Jx||t.getIndex()===Xx,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Hh(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Mn extends ln{constructor(e,n){super(e,n,new Th,!1)}get parent(){const e=eC(this._path);return e===null?null:new Mn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let Gh=class xg{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ke(e),s=Fi(this.ref,e);return new xg(this._node.getChild(n),s,Le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>e(new xg(i,Fi(this.ref,s),Le)))}hasChild(e){const n=new ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function zC(t,e){return t=me(t),t._checkNotDeleted("ref"),e!==void 0?Fi(t._root,e):t._root}function U_(t,e){t=me(t),t._checkNotDeleted("refFromURL");const n=gg(e,t._repo.repoInfo_.nodeAdmin);RC("refFromURL",n);const s=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&s.host!==t._repo.repoInfo_.host&&gs("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+t._repo.repoInfo_.host+")"),zC(t,n.path.toString())}function Fi(t,e){return t=me(t),ge(t._path)===null?UO("child","path",e):ec("child","path",e),new Mn(t._repo,We(t._path,e))}function oM(t,e){t=me(t),In("push",t._path),xs("push",e,t._path,!0);const n=MC(t._repo),s=aM(n),i=Fi(t,s),a=Fi(t,s);let l;return e!=null?l=N0(a,e).then(()=>a):l=Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}function cM(t){return In("remove",t._path),N0(t,null)}function N0(t,e){t=me(t),In("set",t._path),xs("set",e,t._path,!1);const n=new Xt;return y0(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function dM(t,e){t=me(t),In("setPriority",t._path),x0("setPriority",e);const n=new Xt;return y0(t._repo,We(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function uM(t,e,n){if(In("setWithPriority",t._path),xs("setWithPriority",e,t._path,!1),x0("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const s=new Xt;return y0(t._repo,t._path,e,n,s.wrapCallback(()=>{})),s.promise}function hM(t,e){TC("update",e,t._path);const n=new Xt;return KO(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function mM(t){t=me(t);const e=new w0(()=>{}),n=new Nc(e);return GO(t._repo,t,n).then(s=>new Gh(s,new Mn(t._repo,t._path),t._queryParams.getIndex()))}class Nc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new $C("value",this,new Gh(e.snapshotNode,new Mn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new WC(this,e,n):null}matches(e){return e instanceof Nc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Kh{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new WC(this,e,n):null}createEvent(e,n){W(e.childName!=null,"Child events should have a childName.");const s=Fi(new Mn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new $C(e.type,this,new Gh(e.snapshotNode,s,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Kh?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function jc(t,e,n,s,i){let a;if(typeof s=="object"&&(a=void 0,i=s),typeof s=="function"&&(a=s),i&&i.onlyOnce){const d=n,h=(g,p)=>{pg(t._repo,t,c),d(g,p)};h.userCallback=n.userCallback,h.context=n.context,n=h}const l=new w0(n,a||void 0),c=e==="value"?new Nc(l):new Kh(e,l);return XO(t._repo,t,c),()=>pg(t._repo,t,c)}function vg(t,e,n,s){return jc(t,"value",e,n,s)}function $_(t,e,n,s){return jc(t,"child_added",e,n,s)}function W_(t,e,n,s){return jc(t,"child_changed",e,n,s)}function z_(t,e,n,s){return jc(t,"child_moved",e,n,s)}function B_(t,e,n,s){return jc(t,"child_removed",e,n,s)}function V_(t,e,n){let s=null;const i=n?new w0(n):null;e==="value"?s=new Nc(i):e&&(s=new Kh(e,i)),pg(t._repo,t,s)}class Qn{}class BC extends Qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){xs("endAt",this._value,e._path,!0);const n=ig(e._queryParams,this._value,this._key);if(Hh(n),Gr(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function fM(t,e){return _c("endAt","key",e),new BC(t,e)}class pM extends Qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){xs("endBefore",this._value,e._path,!1);const n=N5(e._queryParams,this._value,this._key);if(Hh(n),Gr(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function gM(t,e){return _c("endBefore","key",e),new pM(t,e)}class VC extends Qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){xs("startAt",this._value,e._path,!0);const n=rg(e._queryParams,this._value,this._key);if(Hh(n),Gr(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function xM(t=null,e){return _c("startAt","key",e),new VC(t,e)}class vM extends Qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){xs("startAfter",this._value,e._path,!1);const n=w5(e._queryParams,this._value,this._key);if(Hh(n),Gr(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function yM(t,e){return _c("startAfter","key",e),new vM(t,e)}class bM extends Qn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ln(e._repo,e._path,b5(e._queryParams,this._limit),e._orderByCalled)}}function _M(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bM(t)}class wM extends Qn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ln(e._repo,e._path,_5(e._queryParams,this._limit),e._orderByCalled)}}function NM(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wM(t)}class jM extends Qn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Vh(e,"orderByChild");const n=new ke(this._path);if(xe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new Jx(n),i=Rh(e._queryParams,s);return Gr(i),new ln(e._repo,e._path,i,!0)}}function CM(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ec("orderByChild","path",t),new jM(t)}class SM extends Qn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Vh(e,"orderByKey");const n=Rh(e._queryParams,fs);return Gr(n),new ln(e._repo,e._path,n,!0)}}function kM(){return new SM}class IM extends Qn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Vh(e,"orderByPriority");const n=Rh(e._queryParams,Le);return Gr(n),new ln(e._repo,e._path,n,!0)}}function EM(){return new IM}class TM extends Qn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Vh(e,"orderByValue");const n=Rh(e._queryParams,Xx);return Gr(n),new ln(e._repo,e._path,n,!0)}}function RM(){return new TM}class PM extends Qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(xs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new BC(this._value,this._key)._apply(new VC(this._value,this._key)._apply(e))}}function AM(t,e){return _c("equalTo","key",e),new PM(t,e)}function Un(t,...e){let n=me(t);for(const s of e)n=s._apply(n);return n}uO(Mn);gO(Mn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="FIREBASE_DATABASE_EMULATOR_HOST",yg={};let MM=!1;function DM(t,e,n,s){t.repoInfo_=new H1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function HC(t,e,n,s,i){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||gs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=gg(a,i),c=l.repoInfo,d,h;typeof process<"u"&&i_&&(h=i_[OM]),h?(d=!0,a=`http://${h}?ns=${c.namespace}`,l=gg(a,i),c=l.repoInfo):d=!l.repoInfo.secure;const g=i&&d?new Ua(Ua.OWNER):new CA(t.name,t.options,e);RC("Invalid Firebase Database URL",l),xe(l.path)||gs("Database URL must point to the root of a Firebase Database (not including a child path).");const p=FM(c,t,g,new jA(t.name,n));return new UM(p,t)}function LM(t,e){const n=yg[e];(!n||n[t.key]!==t)&&gs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DC(t),delete n[t.key]}function FM(t,e,n,s){let i=yg[e.name];i||(i={},yg[e.name]=i);let a=i[t.toURLString()];return a&&gs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new BO(t,MM,n,s),i[t.toURLString()]=a,a}let UM=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mn(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(LM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&gs("Cannot call "+e+" on a deleted database.")}};function GC(){Ja.IS_TRANSPORT_INITIALIZED&&Lt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function $M(){GC(),xr.forceDisallow()}function WM(){GC(),Cn.forceDisallow(),xr.forceAllow()}function zM(t,e,n,s={}){t=me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&gs("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let a;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&gs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ua(Ua.OWNER);else if(s.mockUserToken){const l=typeof s.mockUserToken=="string"?s.mockUserToken:E2(s.mockUserToken,t.app.options.projectId);a=new Ua(l)}DM(i,e,n,a)}function BM(t){t=me(t),t._checkNotDeleted("goOffline"),DC(t._repo)}function VM(t){t=me(t),t._checkNotDeleted("goOnline"),ZO(t._repo)}function HM(t,e){A1(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t){E1(Vr),Mr(new An("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return HC(s,i,a,n)},"PUBLIC").setMultipleInstances(!0)),Gn(a_,l_,t),Gn(a_,l_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM={".sv":"timestamp"};function qM(){return KM}function YM(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QM=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function JM(t,e,n){var s;if(t=me(t),In("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(s=n==null?void 0:n.applyLocally)!==null&&s!==void 0?s:!0,a=new Xt,l=(d,h,g)=>{let p=null;d?a.reject(d):(p=new Gh(g,new Mn(t._repo,t._path),Le),a.resolve(new QM(h,p)))},c=vg(t,()=>{});return eM(t._repo,t._path,e,l,c,i),a.promise}zs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};zs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};GM();const XM="@firebase/database-compat",ZM="1.0.8";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new lc("@firebase/database-compat"),KC=function(t){const e="FIREBASE WARNING: "+t;eD.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=function(t,e,n,s){if(n!==void 0&&typeof n!="boolean")throw new Error(an(t,e)+"must be a boolean.")},nD=function(t,e,n){if(e!==void 0)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(an(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this._delegate=e}cancel(e){le("OnDisconnect.cancel",0,1,arguments.length),yt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),s=>e(s)),n}remove(e){le("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),s=>e(s)),n}set(e,n){le("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set","onComplete",n,!0);const s=this._delegate.set(e);return n&&s.then(()=>n(null),i=>n(i)),s}setWithPriority(e,n,s){le("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority","onComplete",s,!0);const i=this._delegate.setWithPriority(e,n);return s&&i.then(()=>s(null),a=>s(a)),i}update(e,n){if(le("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,KC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yt("OnDisconnect.update","onComplete",n,!0);const s=this._delegate.update(e);return n&&s.then(()=>n(null),i=>n(i)),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return le("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this._database=e,this._delegate=n}val(){return le("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return le("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return le("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return le("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return le("DataSnapshot.child",0,1,arguments.length),e=String(e),ec("DataSnapshot.child","path",e),new Tr(this._database,this._delegate.child(e))}hasChild(e){return le("DataSnapshot.hasChild",1,1,arguments.length),ec("DataSnapshot.hasChild","path",e),this._delegate.hasChild(e)}getPriority(){return le("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return le("DataSnapshot.forEach",1,1,arguments.length),yt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Tr(this._database,n)))}hasChildren(){return le("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return le("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return le("DataSnapshot.ref",0,0,arguments.length),new hn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class kt{constructor(e,n){this.database=e,this._delegate=n}on(e,n,s,i){var a;le("Query.on",2,4,arguments.length),yt("Query.on","callback",n,!1);const l=kt.getCancelAndContextArgs_("Query.on",s,i),c=(h,g)=>{n.call(l.context,new Tr(this.database,h),g)};c.userCallback=n,c.context=l.context;const d=(a=l.cancel)===null||a===void 0?void 0:a.bind(l.context);switch(e){case"value":return vg(this._delegate,c,d),n;case"child_added":return $_(this._delegate,c,d),n;case"child_removed":return B_(this._delegate,c,d),n;case"child_changed":return W_(this._delegate,c,d),n;case"child_moved":return z_(this._delegate,c,d),n;default:throw new Error(an("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,s){if(le("Query.off",0,3,arguments.length),nD("Query.off",e),yt("Query.off","callback",n,!0),Tb("Query.off","context",s),n){const i=()=>{};i.userCallback=n,i.context=s,V_(this._delegate,e,i)}else V_(this._delegate,e)}get(){return mM(this._delegate).then(e=>new Tr(this.database,e))}once(e,n,s,i){le("Query.once",1,4,arguments.length),yt("Query.once","callback",n,!0);const a=kt.getCancelAndContextArgs_("Query.once",s,i),l=new Xt,c=(h,g)=>{const p=new Tr(this.database,h);n&&n.call(a.context,p,g),l.resolve(p)};c.userCallback=n,c.context=a.context;const d=h=>{a.cancel&&a.cancel.call(a.context,h),l.reject(h)};switch(e){case"value":vg(this._delegate,c,d,{onlyOnce:!0});break;case"child_added":$_(this._delegate,c,d,{onlyOnce:!0});break;case"child_removed":B_(this._delegate,c,d,{onlyOnce:!0});break;case"child_changed":W_(this._delegate,c,d,{onlyOnce:!0});break;case"child_moved":z_(this._delegate,c,d,{onlyOnce:!0});break;default:throw new Error(an("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return le("Query.limitToFirst",1,1,arguments.length),new kt(this.database,Un(this._delegate,_M(e)))}limitToLast(e){return le("Query.limitToLast",1,1,arguments.length),new kt(this.database,Un(this._delegate,NM(e)))}orderByChild(e){return le("Query.orderByChild",1,1,arguments.length),new kt(this.database,Un(this._delegate,CM(e)))}orderByKey(){return le("Query.orderByKey",0,0,arguments.length),new kt(this.database,Un(this._delegate,kM()))}orderByPriority(){return le("Query.orderByPriority",0,0,arguments.length),new kt(this.database,Un(this._delegate,EM()))}orderByValue(){return le("Query.orderByValue",0,0,arguments.length),new kt(this.database,Un(this._delegate,RM()))}startAt(e=null,n){return le("Query.startAt",0,2,arguments.length),new kt(this.database,Un(this._delegate,xM(e,n)))}startAfter(e=null,n){return le("Query.startAfter",0,2,arguments.length),new kt(this.database,Un(this._delegate,yM(e,n)))}endAt(e=null,n){return le("Query.endAt",0,2,arguments.length),new kt(this.database,Un(this._delegate,fM(e,n)))}endBefore(e=null,n){return le("Query.endBefore",0,2,arguments.length),new kt(this.database,Un(this._delegate,gM(e,n)))}equalTo(e,n){return le("Query.equalTo",1,2,arguments.length),new kt(this.database,Un(this._delegate,AM(e,n)))}toString(){return le("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return le("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(le("Query.isEqual",1,1,arguments.length),!(e instanceof kt)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,s){const i={cancel:void 0,context:void 0};if(n&&s)i.cancel=n,yt(e,"cancel",i.cancel,!0),i.context=s,Tb(e,"context",i.context);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(an(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new hn(this.database,new Mn(this._delegate._repo,this._delegate._path))}}class hn extends kt{constructor(e,n){super(e,new ln(n._repo,n._path,new Th,!1)),this.database=e,this._delegate=n}getKey(){return le("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return le("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new hn(this.database,Fi(this._delegate,e))}getParent(){le("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new hn(this.database,e):null}getRoot(){return le("Reference.root",0,0,arguments.length),new hn(this.database,this._delegate.root)}set(e,n){le("Reference.set",1,2,arguments.length),yt("Reference.set","onComplete",n,!0);const s=N0(this._delegate,e);return n&&s.then(()=>n(null),i=>n(i)),s}update(e,n){if(le("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,KC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}In("Reference.update",this._delegate._path),yt("Reference.update","onComplete",n,!0);const s=hM(this._delegate,e);return n&&s.then(()=>n(null),i=>n(i)),s}setWithPriority(e,n,s){le("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority","onComplete",s,!0);const i=uM(this._delegate,e,n);return s&&i.then(()=>s(null),a=>s(a)),i}remove(e){le("Reference.remove",0,1,arguments.length),yt("Reference.remove","onComplete",e,!0);const n=cM(this._delegate);return e&&n.then(()=>e(null),s=>e(s)),n}transaction(e,n,s){le("Reference.transaction",1,3,arguments.length),yt("Reference.transaction","transactionUpdate",e,!1),yt("Reference.transaction","onComplete",n,!0),tD("Reference.transaction","applyLocally",s);const i=JM(this._delegate,e,{applyLocally:s}).then(a=>new rD(a.committed,new Tr(this.database,a.snapshot)));return n&&i.then(a=>n(null,a.committed,a.snapshot),a=>n(a,!1,null)),i}setPriority(e,n){le("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority","onComplete",n,!0);const s=dM(this._delegate,e);return n&&s.then(()=>n(null),i=>n(i)),s}push(e,n){le("Reference.push",0,2,arguments.length),yt("Reference.push","onComplete",n,!0);const s=oM(this._delegate,e),i=s.then(l=>new hn(this.database,l));n&&i.then(()=>n(null),l=>n(l));const a=new hn(this.database,s);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return In("Reference.onDisconnect",this._delegate._path),new sD(new lM(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:$M,forceLongPolling:WM}}useEmulator(e,n,s={}){zM(this._delegate,e,n,s)}ref(e){if(le("database.ref",0,1,arguments.length),e instanceof hn){const n=U_(this._delegate,e.toString());return new hn(this,n)}else{const n=zC(this._delegate,e);return new hn(this,n)}}refFromURL(e){le("database.refFromURL",1,1,arguments.length);const s=U_(this._delegate,e);return new hn(this,s)}goOffline(){return le("database.goOffline",0,0,arguments.length),BM(this._delegate)}goOnline(){return le("database.goOnline",0,0,arguments.length),VM(this._delegate)}}tc.ServerValue={TIMESTAMP:qM(),increment:t=>YM(t)};function iD({app:t,url:e,version:n,customAuthImpl:s,customAppCheckImpl:i,namespace:a,nodeAdmin:l=!1}){E1(n);const c=new xx("database-standalone"),d=new zp("auth-internal",c);d.setComponent(new An("auth-internal",()=>s,"PRIVATE"));let h;return i&&(h=new zp("app-check-internal",c),h.setComponent(new An("app-check-internal",()=>i,"PRIVATE"))),{instance:new tc(HC(t,d,h,e,l),t),namespace:a}}var aD=Object.freeze({__proto__:null,initStandalone:iD});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=tc.ServerValue;function oD(t){t.INTERNAL.registerComponent(new An("database-compat",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new tc(i,s)},"PUBLIC").setServiceProps({Reference:hn,Query:kt,Database:tc,DataSnapshot:Tr,enableLogging:HM,INTERNAL:aD,ServerValue:lD}).setMultipleInstances(!0)),t.registerVersion(XM,ZM)}oD(dn);const cD={apiKey:"AIzaSyBRrxkXnyGd3HKXFKEUB2o15sY8U2N2Mic",authDomain:"beancraft-sales-team.firebaseapp.com",databaseURL:"https://beancraft-sales-team-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"beancraft-sales-team",storageBucket:"beancraft-sales-team.firebasestorage.app",messagingSenderId:"803745881200",appId:"1:803745881200:web:fb430162f761e3ecdba8b5"};dn.initializeApp(cD);const re=dn.database(),H_=["  ,     .","       .","        ."," .    .","       .","  ,      .","     .  .","  .  ,     .","    .","      .","   .     .","   .    .","1%  ,   .","          .","   .    .","   ,  .","      .","      .","  ,   .","   ,   .",' "NO" " "  ,   .',"       .","     ,   .","    .","  ,    .","        .","   .","      .","      .","     .","   .   .","      .","      .   .","  .    .","       .","      .","     .","     .","     ,    .","       .","      .","  .     .","       .","  .   .","  .    .","        .","  ,     .","    .  .","     .","   .    .","     .","       .","     .  .","     ?","  .    .","  .    .","       .","      .","     .  .","     ."," 3  .    .","     .","   .  .","      .","      .","       .","      .","     .","    .","    ,    .","  .   .","    .   .","      .","      .","   ,     .","  ,   .","      ."," .     .","    .   .","   ,     .","      .  .","   ."," .    .","    .   .","  ,    .","  .   .","      .","     ."," .     .","      .","     .","     .","    .   .","  .   .","      .","     .  .","     .","      .","      .","    .   .","      .","    ,    .","      .","        .","          .","        .","   .  .","   .    .","        .","      .",'" "      .',"    .","    .","      .","       .","      .","  ,      .","       .","   .   .","      .","      .","   .    .","     .","   ,     .","           .","    .","   ,     .","      .","  10     .","   ,    .","        .","    .","     .  ."," .    .","         .","  .  .","    ,     .","    .","      .","    .","  ,    .","      .","       .","  .    .","     .","  .     .","       .","    .","     .","        ,   .","  .     .","   .","   ,   .","     .","       .","     .","     .","       .",'  "   "   .',"     .","     .","       ."," . ()   .","  .    ."," ,    .","       .","     .","      .","      .","''     ''   .","     .","       .","     .","     .","  .    .","       .","    ."," .     .","     .","     .","    .","     ,    .","  ,    .","  .    .","       .","   .","    .","     .","     .","       .","   ,   .","      .","      .","     .","    .","       .","       .","    .","   .      ."],G_=[".     .","''   ,      .","   .  .","     ,   .","   .     ."," .       .","        .","   ,    .","   .     .","      ."," ,    ''  .","   ,     .","   ,    .","         .","       .",".       .","  .    .","  ,    .","   VIP      .","         .","   .  .","  DB     .","      .","        .","  ,   .","    .   .","       ."," ,    .","       ."," .    .","    .      .","      .","   ,    .","     ."," ,   .","    .","   ,    .","       .","          .","     .","  .    .","  ,   .","       ."," .     .","   ,  ?",'"."     .',"     .","    .  .",".      .","  .   .","    .  ."," ,  .  .","     .","    ,    .","      .","     .","       .","   1    .","    ,  ."," .    .","  .  .","     .","    ,    .","     .","  . ."," ?    .","   .","     .","      .","     .","  .    .","    .    .","     .","   .   .","       .","      .","    ,   .","       .","  .   .","      .","       .","     .","   ,     .",".    .","     .","  .    ."," ''  ''   .","  .  ,  .","  ,   .","  . ."," , ,   .","       .","     .","   ,    .","      .","   ,    .","      ."," .     ."," .   .",".    .","       .","   ,   .","       .","        .","      .","    .","    .","      .","       .","        ."," .    .","  .  .","        .","    .","    .","        .","      .","  .   ?","   ."," ,     .","     .","      .","         .","     .","    .  .","        .","      .","    .","    .","      .","    .","        .","   .   .","    .","  ,   .","     ."," ,    .","    .","   ,     ."," ,  . .","      .","      .","      .","  .   .","  ,   .","     .","      .","     'YES'.","     .","    .","     .","      .","    .","       .","   .   .","     .","   ,   .","         .","    .","  ,   .","  .    .","     .","      .","    ,   .","    .","   .","        .","     ."," .     .","    .","      .","     .","       .","  ,   .","      .","       .","    ."," ,   .","        .","      .","     .","    ,     .","    .","   ,    .","     .","  .  .","   ,   .","    .","    .","  ,   .","     .","      .","    .","     .","      .","     .","    .","   .  .",".    .","  .  .",".        ."],gt={negative:{bg:"#9ca3af",label:""},neutral:{bg:"#f97316",label:""},positive:{bg:"#22c55e",label:""},special:{bg:"#ef4444",label:"",blink:!0},missed:{bg:"#eab308",label:""}},cr=()=>new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),Kf=()=>{const t=new Date,n=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),s=i=>{var a;return((a=n.find(l=>l.type===i))==null?void 0:a.value)||"0"};return{year:parseInt(s("year")),month:parseInt(s("month"))-1,day:parseInt(s("day")),hour:parseInt(s("hour")),minute:parseInt(s("minute")),dayOfWeek:new Date(parseInt(s("year")),parseInt(s("month"))-1,parseInt(s("day"))).getDay()}},K_=["","","",""],dD="AIzaSyDcz5e1qre9QMbrKmUSjT9nEsajSnhIhAI",uD=["","","","","","","","","","","","","","","","","","",""],q_=t=>t.split("").map(e=>{const n=e.charCodeAt(0)-44032;return n>=0&&n<=11171?uD[Math.floor(n/588)]:e}).join(""),hD=(t,e)=>{if(!e)return!0;const n=t.toLowerCase(),s=e.toLowerCase();return n.includes(s)?!0:q_(t).includes(q_(e))},Y_=t=>{if(!t)return"";const e=t.split(" ");return e.length>=2?e.slice(-2).join(" "):t},Bd=[{id:1,name:"",color:"#3b82f6",username:"sm001",password:"1234",promo:{:0,:0,:0,:0}},{id:2,name:"",color:"#10b981",username:"sm002",password:"1234",promo:{:0,:0,:0,:0}}],mD=()=>{var Vv,Hv,Gv,Kv,qv,Yv,Qv,Jv,Xv,Zv,ey,ty,ny,sy,ry,iy,ay,ly,oy,cy,dy,uy,hy,my,fy,py,gy,xy;const[t,e]=b.useState(!1),[n,s]=b.useState(null),[i,a]=b.useState(""),[l,c]=b.useState(""),[d,h]=b.useState(!1),[g,p]=b.useState("admin"),[y]=b.useState(()=>H_[Math.floor(Math.random()*H_.length)]),[k,T]=b.useState("quote"),[L,oe]=b.useState(!1),C=localStorage.getItem("bc_current_tab")||"map",[w,S]=b.useState(C),[D,K]=b.useState(null),[Y,J]=b.useState("basic"),[Z,Ie]=b.useState([]),[pe,Ut]=b.useState(0),[vs,Jn]=b.useState("single"),[Ki,Cc]=b.useState(""),[ys,Kr]=b.useState(""),[B,ue]=b.useState(null),[he,Oe]=b.useState(!1),[ze,qr]=b.useState(null),[ht,tt]=b.useState(null),[Ct,Yr]=b.useState(null),[j0,qh]=b.useState(null),[Sc,Yh]=b.useState(""),[Qh,C0]=b.useState([]),[qC,qi]=b.useState(!1),[Gt,Jh]=b.useState(null),[Pt,Xn]=b.useState({name:"",content:"",type:"broker",memo:""}),[kc,S0]=b.useState([]),[YC,Ic]=b.useState(!1),[bs,QC]=b.useState(null),[ml,Xh]=b.useState(""),[k0,I0]=b.useState(""),[Zs,Ec]=b.useState("theme"),[Zh,E0]=b.useState(!1),[Tc,T0]=b.useState("analysis"),[Qr,R0]=b.useState(""),[qe,P0]=b.useState(null),[Jr,A0]=b.useState(!1),[Rc,Yi]=b.useState(!1),[Qi,Zn]=b.useState(""),[O0,fl]=b.useState(60),[M0,Pc]=b.useState(Date.now()),[Ac,D0]=b.useState(null),[JC,Oc]=b.useState(!1),[we,L0]=b.useState({seats:20,price:5e3,turnover:3,occupancy:40,rent:300,labor:250,materialRate:32,otherCost:100}),[F0,XC]=b.useState([]),[ZC,eS]=b.useState(""),[em,Mc]=b.useState(null),[U0,Ji]=b.useState(null),[_s,tm]=b.useState(null),[pD,tS]=b.useState(()=>{const o=localStorage.getItem("bc_team_feedback");return o?JSON.parse(o):[]}),[nm,$0]=b.useState(""),[sm,W0]=b.useState(""),[Dc,rm]=b.useState(null),[pl,z0]=b.useState([]),[gD,xD]=b.useState("");b.useEffect(()=>(re.ref("teamFeedback").orderByChild("timestamp").limitToLast(100).on("value",o=>{const u=o.val();if(u){const m=Object.values(u).sort((f,x)=>new Date(x.timestamp)-new Date(f.timestamp));tS(m)}}),()=>re.ref("teamFeedback").off()),[]),b.useEffect(()=>{if(!Zh||Rc)return;const o=()=>{Pc(Date.now()),fl(60)};window.addEventListener("touchstart",o),window.addEventListener("click",o),window.addEventListener("keydown",o),window.addEventListener("scroll",o);const u=setInterval(()=>{const m=Math.floor((Date.now()-M0)/1e3),f=Math.max(0,60-m);fl(f),f===0&&(Yi(!0),Zn(""))},1e3);return()=>{window.removeEventListener("touchstart",o),window.removeEventListener("click",o),window.removeEventListener("keydown",o),window.removeEventListener("scroll",o),clearInterval(u)}},[Zh,Rc,M0]);const im="AIzaSyAl0PfvfKlD-nZxtAJOC6qhME-A-V_u2L8",B0=`    /.

[]
-        
-         
-  :    

[ ]
- :   ( )
- :  (  ,      )
- :  ( 6,900~1.3,   )
-  : / ,   , / 

[]
- /    
-     
-    
-       

[ ]
-         
-   /   
-    
-     
-  `,[Kt,gl]=b.useState(null),[Lc,er]=b.useState(!1),[Xi,vD]=b.useState(null),[yD,bD]=b.useState(!1),am=async(o,u=0)=>{var v,_,N,j,A;er(!0),tt(null);const m=new Date().toLocaleString("ko-KR"),f=Math.floor(Math.random()*1e3),x=B0+`


    ( : `+m+", ID: "+f+`)


 
- : `+o.managerName+`
-   : `+o.thisVisits+" (  "+(o.visitChange>=0?"+":"")+o.visitChange+`%)
-  : `+o.newCompanies+`
-  : `+o.consults+`
-  : `+o.positiveRate+`%

  
- : `+o.positive+" | : "+o.special+`
- : `+o.neutral+" | : "+o.missed+`

  -   
1. comment:     (2,   )
2. analysis:    (/,  )
3. suggestion:     (   )
4. encouragement:    (  )
5. focus:    

  (JSON):
{"comment": "...", "analysis": "...", "suggestion": "...", "encouragement": "...", "focus": "..."}

JSON .     .`;try{const R=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${im}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:x}]}],generationConfig:{temperature:.9,maxOutputTokens:1024}})});if(!R.ok)if(R.status===429){if(u<3)return console.log(`429  - ${u+1}  ... (5 )`),tt(`API   - ${u+1}  ...`),await new Promise(te=>setTimeout(te,5e3)),am(o,u+1);tt("API   .    ."),er(!1);return}else if(R.status===400){tt("API      ."),er(!1);return}else if(R.status===403){tt("API   .  ."),er(!1);return}else{tt(`  . (: ${R.status})`),er(!1);return}const P=await R.json();if(P.error){console.error("Gemini API Error:",P.error),tt(`API : ${P.error.message||"   "}`),er(!1);return}const O=((A=(j=(N=(_=(v=P.candidates)==null?void 0:v[0])==null?void 0:_.content)==null?void 0:N.parts)==null?void 0:j[0])==null?void 0:A.text)||"";if(!O){tt("AI  .  ."),er(!1);return}const V=O.match(/\{[\s\S]*\}/);if(V){const te=JSON.parse(V[0]);gl(te),qr(new Date)}else gl({comment:O,analysis:"",suggestion:"",encouragement:""}),qr(new Date)}catch(R){console.error("AI Report Error:",R),tt(` : ${R.message||" ."}`),gl(null)}er(!1)},Fc=async o=>{var _,N,j,A,R;if(!o.trim())return;Oe(!0),tt(null),ue(null);const u=new Date().toLocaleString("ko-KR"),m=ce.filter(P=>{var O,V,te,I;return((O=P.name)==null?void 0:O.includes(o))||((V=P.address)==null?void 0:V.includes(o))||((te=P.memo)==null?void 0:te.includes(o))||((I=P.region)==null?void 0:I.includes(o))}),f=si.filter(P=>{var O,V,te;return((O=P.name)==null?void 0:O.includes(o))||((V=P.address)==null?void 0:V.includes(o))||((te=P.region)==null?void 0:te.includes(o))}),x=Z.filter(P=>{var O,V,te;return((O=P.title)==null?void 0:O.includes(o))||((V=P.content)==null?void 0:V.includes(o))||((te=P.region)==null?void 0:te.includes(o))}),v=B0+`


   : "${o}" ( : ${u})


  
-  : ${m.length}
${m.slice(0,5).map(P=>`   ${P.name} (${P.address||""}) - : ${P.reaction||""}`).join(`
`)}
-  : ${f.length}
${f.slice(0,5).map(P=>`   ${P.name} (${P.address||""})`).join(`
`)}
-   : ${x.length}
${x.slice(0,3).map(P=>{var O;return`   ${P.title}: ${(O=P.content)==null?void 0:O.slice(0,50)}...`}).join(`
`)}

 
"${o}"       .

1. summary:     (2-3)
2. insights:    (3 , )
3. salesTips:      (2)
4. relatedTopics:     (3, )
5. actionItems:       (2)

  (JSON):
{
  "summary": " ",
  "insights": ["1", "2", "3"],
  "salesTips": ["1", "2"],
  "relatedTopics": ["1", "2", "3"],
  "actionItems": ["1", "2"]
}

JSON .      /    .`;try{const P=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${im}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:v}]}],generationConfig:{temperature:.8,maxOutputTokens:1500}})});if(!P.ok){P.status===429?tt("API   .    ."):tt(`  . (: ${P.status})`),Oe(!1);return}const O=await P.json();if(O.error){tt(`API : ${O.error.message||"   "}`),Oe(!1);return}const V=((R=(A=(j=(N=(_=O.candidates)==null?void 0:_[0])==null?void 0:N.content)==null?void 0:j.parts)==null?void 0:A[0])==null?void 0:R.text)||"",te=V.match(/\{[\s\S]*\}/);if(te){const I=JSON.parse(te[0]);ue({...I,keyword:o,searchedAt:new Date,relatedCompaniesCount:m.length,relatedRealtorsCount:f.length,relatedIssuesCount:x.length})}else ue({summary:V,insights:[],salesTips:[],relatedTopics:[],actionItems:[],keyword:o,searchedAt:new Date})}catch(P){console.error("AI Keyword Search Error:",P),tt(` : ${P.message||" ."}`)}Oe(!1)},[_D,wD]=b.useState(!1),[ND,jD]=b.useState([]),[CD,SD]=b.useState(!1),nS=()=>localStorage.getItem("bc_theme_mode")||"dark",sS=()=>{const o=localStorage.getItem("bc_theme_mode")||"dark";return o==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o},[ws,lm]=b.useState(nS),[rS,iS]=b.useState(sS),[Uc,om]=b.useState([]),[aS,V0]=b.useState(!1),[lS,cm]=b.useState(!1),[H0,dm]=b.useState(!1),[oS,$c]=b.useState(!1),[G0,Wc]=b.useState(!1),[Ns,xl]=b.useState(null),[nt,vl]=b.useState(null),[X,yl]=b.useState(null),[cS,zc]=b.useState(null),[St,mt]=b.useState(null),[um,hm]=b.useState(null),[dS,Bc]=b.useState(!1),[ft,_n]=b.useState(null),[bl,Vc]=b.useState(null),[uS,Hc]=b.useState(!1),[mm,Gc]=b.useState(null),[Kc,fm]=b.useState(!1),[Xr,qc]=b.useState([]),[hS,Yc]=b.useState(!1),[mS,pm]=b.useState(!1),[fS,gm]=b.useState(null),[K0,Qc]=b.useState(!1),[wn,es]=b.useState([]),xm=b.useRef(null),q0=b.useRef(null),[pS,vm]=b.useState(!1),[ym,gS]=b.useState([]),[xS,bm]=b.useState(!1),[_m,Y0]=b.useState(""),[Q0,J0]=b.useState(null),[vS,yS]=b.useState(""),[kD,bS]=b.useState(""),[X0,Z0]=b.useState("neutral"),[ts,Jc]=b.useState(""),[Xc,Zc]=b.useState(""),[_l,ev]=b.useState(""),[tv,nv]=b.useState(""),[wm,Nm]=b.useState({:!1,:!1,:!1,:!1}),[ed,jm]=b.useState([]),[Zr,Zi]=b.useState([]),td=b.useRef(null),Pe=b.useRef(null),Cm=b.useRef([]),ei=b.useRef([]),[ye,_S]=b.useState(Bd),[wl,wS]=b.useState([]),[ce,NS]=b.useState([]),[nd,jS]=b.useState([]),[sd,sv]=b.useState([]),[rv,CS]=b.useState([]),[SS,kS]=b.useState({}),[Be,iv]=b.useState([]),[$t,av]=b.useState([]),[Ce,qt]=b.useState([]),[rd,ea]=b.useState(cr()),[id,Nl]=b.useState("09:00"),[ID,ED]=b.useState(""),[TD,RD]=b.useState(""),[jl,Cl]=b.useState(""),[Sm,tr]=b.useState(null),[ti,ad]=b.useState(null),[PD,AD]=b.useState(null),[on,js]=b.useState(null),[OD,MD]=b.useState(""),[ta,ld]=b.useState(0),[nr,lv]=b.useState(new Date),[Sl,km]=b.useState(null),[At,kl]=b.useState(null),[IS,ni]=b.useState(!1),[Im,na]=b.useState(null),[Il,Em]=b.useState(null),[od,Tm]=b.useState(null),[ns,Cs]=b.useState({title:"",time:"09:00",memo:""}),[El,sa]=b.useState(null),[ra,Rm]=b.useState(""),[Pm,Am]=b.useState(""),[Ss,Tl]=b.useState([]),[DD,LD]=b.useState([]),[ov,Om]=b.useState(!1),[FD,UD]=b.useState(""),[$D,WD]=b.useState(""),[zD,cd]=b.useState([]),[Mm,ES]=b.useState(""),[Dm,TS]=b.useState(""),[dd,RS]=b.useState("listings"),[Lm,cv]=b.useState(""),[Rl,PS]=b.useState(""),[Pl,dv]=b.useState(""),[BD,VD]=b.useState("all"),[HD,GD]=b.useState(1),[KD,qD]=b.useState(null),[si,ud]=b.useState(()=>{try{const o=localStorage.getItem("bc_collected_realtors");return o?JSON.parse(o):[]}catch{return[]}}),[AS,Fm]=b.useState(()=>!localStorage.getItem("bc_collected_realtors")),[YD,QD]=b.useState(""),[JD,XD]=b.useState([]),[ZD,eL]=b.useState(!1),[OS,MS]=b.useState(!1),[tL,nL]=b.useState(!1),[sL,rL]=b.useState(""),[iL,aL]=b.useState([]),[lL,oL]=b.useState(null),[cL,DS]=b.useState([]),[dL,LS]=b.useState([]),[uL,hL]=b.useState(""),[mL,fL]=b.useState(""),[pL,gL]=b.useState(!1),[xL,vL]=b.useState(200),[yL,FS]=b.useState({phase:"",current:0,total:0,found:0,message:""}),[bL,_L]=b.useState(!1),[wL,NL]=b.useState(""),[jL,CL]=b.useState(""),[SL,kL]=b.useState("");b.useRef([]);const uv=b.useRef([]),Um=b.useRef([]),$m=b.useRef(null),ee=b.useRef(null),ks=b.useRef([]),Is=b.useRef([]),hv=b.useRef([]),[hd,Wm]=b.useState(!1),[md,mv]=b.useState(null),ia=b.useRef(null),Es=b.useRef(null),Ts=b.useRef(null),aa=b.useRef(null),fd=b.useRef(0),sr=b.useRef(null),[zm,pd]=b.useState(null),[ri,fv]=b.useState("all"),[ii,pv]=b.useState("all"),[Bm,US]=b.useState(""),[Vm,IL]=b.useState(null),[Hm,EL]=b.useState(""),[TL,RL]=b.useState(""),[ne,at]=b.useState({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),[Gm,$S]=b.useState(""),[Al,WS]=b.useState("all"),[Km,zS]=b.useState("all"),[PL,AL]=b.useState({}),[OL,BS]=b.useState(""),[Yt,ai]=b.useState({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""}),[Dn,gd]=b.useState({managerId:null,companyId:null,amount:"",date:"",note:""}),la=o=>{try{const u=localStorage.getItem("bc_"+o);return u?JSON.parse(u):null}catch{return null}},VS=async()=>{if(localStorage.getItem("bc_migration_done"))return;console.log(" ...");const u=la("managers"),m=la("pins"),f=la("companies"),x=la("customers"),v=la("sales"),_=la("requests");if(u&&u.length>0){console.log(" managers :",u.length);for(const N of u)await re.ref("managers/"+N.id).set(N)}if(m&&m.length>0){console.log(" pins :",m.length);for(const N of m)await re.ref("pins/"+N.id).set(N)}if(f&&f.length>0){console.log(" companies :",f.length);for(const N of f)await re.ref("companies/"+N.id).set(N)}if(x&&x.length>0){console.log(" customers :",x.length);for(const N of x)await re.ref("customers/"+N.id).set(N)}if(v&&v.length>0){console.log(" sales :",v.length);for(const N of v)await re.ref("sales/"+N.id).set(N)}if(_&&_.length>0){console.log(" requests :",_.length);for(const N of _)await re.ref("requests/"+N.id).set(N)}localStorage.setItem("bc_migration_done","true"),console.log(" !")},li=b.useRef({});b.useEffect(()=>{const o=u=>{let m=u;u==="auto"&&(m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),iS(m),m==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.body.style.removeProperty("background"),document.body.style.removeProperty("color")};if(o(ws),localStorage.setItem("bc_theme_mode",ws),ws==="auto"){const u=window.matchMedia("(prefers-color-scheme: dark)"),m=f=>o("auto");return u.addEventListener("change",m),()=>u.removeEventListener("change",m)}},[ws]),b.useEffect(()=>{const o=u=>{if(u.source===window){if(u.data.type==="BEANCRAFT_EXTENSION_READY"&&(console.log("  v"+u.data.version),MS(!0),GS("0000000000")),u.data.type==="BEANCRAFT_RESPONSE"){const{requestId:m,response:f}=u.data;li.current[m]&&(li.current[m](f),delete li.current[m])}u.data.type==="BEANCRAFT_SCRAPE_PROGRESS"&&FS({phase:u.data.phase||"",current:u.data.current||0,total:u.data.total||0,found:u.data.found||0,message:u.data.message||""})}};return window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}},[]);const HS=(o,u={})=>new Promise(m=>{const f=Date.now()+Math.random();li.current[f]=m,window.postMessage({type:"BEANCRAFT_REQUEST",action:o,requestId:f,...u},"*"),setTimeout(()=>{li.current[f]&&(li.current[f]({success:!1,error:""}),delete li.current[f])},1e4)}),GS=async(o,u="sido")=>{if(!OS)return;const m=await HS("GET_REGIONS",{cortarNo:o});m&&m.success&&m.regions?(console.log("[] "+u+" :",m.regions.length+""),u==="sido"?DS(m.regions):u==="gugun"&&LS(m.regions)):console.error("   :",m==null?void 0:m.error)};b.useEffect(()=>{if(!n){setSyncStatus("disconnected");return}setSyncStatus("connecting"),VS();const o={managers:re.ref("managers"),pins:re.ref("pins"),companies:re.ref("companies"),customers:re.ref("customers"),sales:re.ref("sales"),requests:re.ref("requests"),adminPassword:re.ref("adminPassword"),userStatus:re.ref("userStatus"),routes:re.ref("routes"),realtorCollections:re.ref("realtorCollections"),realtors:re.ref("realtors"),marketIssues:re.ref("marketIssues").limitToLast(20)};return o.managers.on("value",u=>{const m=u.val();m&&_S(Object.values(m)),setSyncStatus("connected")}),o.pins.on("value",u=>{const m=u.val();wS(m?Object.values(m):[])}),o.companies.on("value",u=>{const m=u.val();NS(m?Object.values(m):[])}),o.customers.on("value",u=>{const m=u.val();jS(m?Object.values(m):[])}),o.sales.on("value",u=>{const m=u.val();sv(m?Object.values(m):[])}),o.requests.on("value",u=>{const m=u.val();CS(m?Object.values(m):[])}),o.adminPassword.on("value",u=>{const m=u.val();m&&p(m)}),o.userStatus.on("value",u=>{const m=u.val();kS(m||{})}),o.routes.on("value",u=>{const m=u.val();iv(m?Object.values(m):[])}),o.realtorCollections.on("value",u=>{try{const m=u.val();if(m){const f=Object.entries(m).map(([x,v])=>({id:x,...v}));f.sort((x,v)=>v.exportedAt-x.exportedAt),cd(f)}else cd([])}catch(m){console.error("RealtorCollections  :",m),cd([])}},u=>{console.error("Firebase realtorCollections  :",u),cd([])}),o.calendarEvents=re.ref("calendarEvents"),o.calendarEvents.on("value",u=>{const m=u.val();av(m?Object.values(m):[])}),o.realtors.on("value",u=>{try{const m=u.val();if(m){const f=Object.entries(m).map(([x,v])=>({id:x,...v}));f.sort((x,v)=>(v.listings||0)-(x.listings||0)),ud(f);try{localStorage.setItem("bc_collected_realtors",JSON.stringify(f))}catch{}}else ud([]);Fm(!1)}catch(m){console.error("Realtors   :",m),ud([]),Fm(!1)}},u=>{console.error("Firebase realtors  :",u),ud([]),Fm(!1)}),o.marketIssues.on("value",u=>{try{const m=u.val();if(m){const f=Object.entries(m).map(([_,N])=>({id:_,...N})),x=Date.now()-365*24*60*60*1e3,v=f.filter(_=>new Date(_.||_.createdAt).getTime()<x?(re.ref("marketIssues/"+_.id).remove(),!1):!0);v.sort((_,N)=>new Date(N.||N.createdAt)-new Date(_.||_.createdAt)),Ie(v)}else Ie([])}catch(m){console.error("MarketIssues   :",m),Ie([])}}),oe(!0),setSyncStatus("connected"),()=>{Object.values(o).forEach(u=>u.off())}},[n]),b.useEffect(()=>{if(!(n!=null&&n.managerId))return;const o=n.managerId,u=re.ref(`userMents/${o}`),m=re.ref(`mentFeedbacks/${o}`);return u.on("value",f=>{const x=f.val();if(x){const v=Object.keys(x).map(_=>({id:_,...x[_]}));C0(v)}else C0([])}),m.on("value",f=>{const x=f.val();if(x){const v=Object.keys(x).map(_=>({id:_,...x[_]}));S0(v)}else S0([])}),()=>{u.off(),m.off()}},[n==null?void 0:n.managerId]),b.useEffect(()=>{const o=re.ref("teamFeedbacks");return o.orderByChild("timestamp").limitToLast(50).on("value",u=>{const m=u.val();if(m){const f=Object.keys(m).map(x=>({id:x,...m[x]})).sort((x,v)=>new Date(v.timestamp)-new Date(x.timestamp));z0(f)}else z0([])}),()=>o.off()},[]),b.useEffect(()=>{if(!t)return;const o=new Date().toISOString().split("T")[0];if($t.length>0){const u=$t.filter(m=>m.date===o&&m.type==="followup");u.length>0&&Mc(m=>{if(m)return m;const f=u.slice(0,3).map(v=>v.title).join(", "),x=u.length>3?`  ${u.length-3}`:"";return{count:u.length,preview:f+x,events:u}})}if(Be.length>0){const u=new Date;u.setDate(u.getDate()-1);const m=u.toISOString().split("T")[0],f=Be.filter(x=>{var _;return!x.date||x.date>m||x.status==="completed"?!1:(_=x.stops)==null?void 0:_.some(N=>!N.visited)});f.length>0?Ji({count:f.length,routes:f}):Ji(null)}else Ji(null)},[t,$t,Be]),b.useEffect(()=>{if(!t||!n||ce.length===0)return;const o=x=>{if(!x)return{hasIssue:!0,issue:" "};const v=[{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "}];for(const{pattern:O,issue:V}of v)if(O.test(x))return{hasIssue:!0,issue:V};const _=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=["","","","","","","","","","","","","","","","","","","","","","","","",""],j=/|||||||||||||||||||/.test(x),A=_.some(O=>x.includes(O+"")||x.includes(O+" ")),R=N.some(O=>x.includes(O+"")||x.includes(O+" ")||x.includes(O+""));return!j&&!A&&!R&&x.length>5?{hasIssue:!0,issue:"/  "}:!/[-]+(|||||||||)\s*\d*/.test(x)&&x.length>3?{hasIssue:!0,issue:"   "}:{hasIssue:!1}},u=n.managerId||n.id,m=ce.filter(x=>x.managerId===u),f=[];m.forEach(x=>{const{hasIssue:v,issue:_}=o(x.address),N=!x.lat||!x.lng;(v||N)&&f.push({id:x.id,name:x.name,address:x.address,issue:v?_:"   (  )"})}),f.length>0?Tm({count:f.length,companies:f}):Tm(null)},[t,n,ce]);const qm=o=>re.ref("managers/"+o.id).set(o),Ym=o=>re.ref("pins/"+o.id).set(o),gv=o=>re.ref("pins/"+o).remove(),Rs=o=>re.ref("companies/"+o.id).set(o),KS=o=>re.ref("companies/"+o).remove(),xv=o=>re.ref("customers/"+o.id).set(o),qS=o=>re.ref("customers/"+o).remove(),vv=o=>re.ref("sales/"+o.id).set(o),YS=o=>re.ref("sales/"+o).remove(),yv=o=>re.ref("requests/"+o.id).set(o),xd=o=>re.ref("routes/"+o.id).set(o),bv=o=>re.ref("routes/"+o).remove(),_v=o=>{const u=(n==null?void 0:n.managerId)||"admin";re.ref(`userMents/${u}/${o.id}`).set(o)},QS=o=>{const u=(n==null?void 0:n.managerId)||"admin";re.ref(`userMents/${u}/${o}`).remove()},JS=o=>{const u=(n==null?void 0:n.managerId)||"admin";re.ref(`mentFeedbacks/${u}/${o.id}`).set(o)},XS=(o,u=!1)=>{const m=Qh.find(f=>f.id===o);if(m){const f={...m,useCount:(m.useCount||0)+1,successCount:u?(m.successCount||0)+1:m.successCount||0};_v(f)}},Qm=o=>re.ref("calendarEvents/"+o.id).set(o),ZS=o=>re.ref("calendarEvents/"+o).remove();b.useEffect(()=>{var u;const o=localStorage.getItem("bc_remember_login");if(o)try{const m=JSON.parse(o);m.expiry>Date.now()?(a(m.id||""),c(m.pw||""),h(!0)):localStorage.removeItem("bc_remember_login")}catch{localStorage.removeItem("bc_remember_login")}try{const m=localStorage.getItem("bc_temp_route");if(m){const f=JSON.parse(m);((u=f.stops)==null?void 0:u.length)>0&&(qt(f.stops),f.name&&Cl(f.name),f.date&&ea(f.date),f.time&&Nl(f.time),f.managerId&&tr(f.managerId),f.editingId&&ad(f.editingId))}}catch{}},[]),b.useEffect(()=>{const o=dn.auth().onAuthStateChanged(async u=>{if(u&&!t){const m=localStorage.getItem("bc_session");if(m)try{const _=JSON.parse(m);if(_.expiry>Date.now()&&_.user){let N=_.user;if(N.username){const j=Bd.find(A=>A.username===N.username);j&&(!N.name||N.name.length<2||N.name.includes(""))&&(console.log(`[]   : ${N.name} -> ${j.name}`),N={...N,name:j.name},localStorage.setItem("bc_session",JSON.stringify({user:N,expiry:_.expiry})))}if(N){s(N),e(!0),N.managerId&&(tr(N.managerId),Ol(N.managerId,!0)),console.log("  :",N.name);return}}}catch{}const f=u.email,x=f.split("@")[0];let v=null;if(x==="admin")v={name:"admin",role:"super",email:f};else try{const N=(await re.ref("managers").once("value")).val(),A=(N?Object.values(N):[]).find(R=>R.username===x||R.email===f);if(A){let R=A.name;const P=Bd.find(O=>O.username===x||O.id===A.id);P&&(!A.name||A.name.length<2||A.name.includes(""))&&(R=P.name,console.log(`[]   : ${A.name} -> ${R}`),re.ref("managers/"+A.id).update({name:R})),v={name:R,role:"manager",managerId:A.id,username:A.username,email:f}}else v={name:x,role:"manager",email:f}}catch(_){console.error("managers  :",_),v={name:x,role:"manager",email:f}}s(v),e(!0),v.managerId&&(tr(v.managerId),Ol(v.managerId,!0)),localStorage.setItem("bc_session",JSON.stringify({user:v,expiry:Date.now()+216e5})),console.log("Firebase  :",v.name)}else!u&&t&&(e(!1),s(null),localStorage.removeItem("bc_session"))});return()=>o()},[t]),b.useEffect(()=>{const o=()=>{if(Uc.length>0){const u=[...Uc],m=u.pop();om(u),S(m)}};return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[Uc]);const oi=o=>{o!==w&&(window.history.pushState({tab:o},""),om([...Uc,w]),S(o),localStorage.setItem("bc_current_tab",o))};b.useEffect(()=>{localStorage.setItem("bc_current_tab",w)},[w]);const wv=b.useRef(Vm),Nv=b.useRef(Hm),Jm=b.useRef(wl),jv=b.useRef(ce),Cv=b.useRef(ye),Sv=b.useRef(ed);b.useEffect(()=>{wv.current=Vm},[Vm]),b.useEffect(()=>{Nv.current=Hm},[Hm]),b.useEffect(()=>{Jm.current=wl},[wl]),b.useEffect(()=>{jv.current=ce},[ce]),b.useEffect(()=>{Cv.current=ye},[ye]),b.useEffect(()=>{Sv.current=ed},[ed]),b.useEffect(()=>{if(Ce.length>0){const o={stops:Ce,name:jl,date:rd,time:id,managerId:Sm,editingId:ti,savedAt:new Date().toISOString()};localStorage.setItem("bc_temp_route",JSON.stringify(o))}else localStorage.removeItem("bc_temp_route")},[Ce]);const ek=(o,u)=>u?Math.max(28,o*2.5):o<=8?14:o<=10?18:o<=12?22:o<=14?26:30;b.useEffect(()=>{if(t&&w==="map"&&td.current){Pe.current=null;const o=()=>{var u;if(!((u=window.naver)!=null&&u.maps)){setTimeout(o,100);return}if(!td.current){setTimeout(o,100);return}Pe.current=new window.naver.maps.Map(td.current,{center:new window.naver.maps.LatLng(37.5665,126.978),zoom:11}),window.naver.maps.Event.addListener(Pe.current,"zoom_changed",()=>{oa()}),window.naver.maps.Event.addListener(Pe.current,"click",m=>{const f=wv.current,x=Nv.current;if(!f)return;const v=m.coord.lat(),_=m.coord.lng();window.naver.maps.Service.reverseGeocode({coords:new window.naver.maps.LatLng(v,_)},(N,j)=>{var O,V,te;let A=v.toFixed(4)+", "+_.toFixed(4);if(N===window.naver.maps.Service.Status.OK&&j.v2.results[0]){const I=j.v2.results[0].region;I&&(A=[(O=I.area1)==null?void 0:O.name,(V=I.area2)==null?void 0:V.name,(te=I.area3)==null?void 0:te.name].filter(Boolean).join(" "))}const R=x?"planned":"confirmed",P={id:Date.now(),managerId:f,status:R,region:A,lat:v,lng:_,date:x||"",createdAt:new Date().toISOString()};Ym(P)})}),setTimeout(()=>oa(),500)};setTimeout(o,300)}},[t,w]),b.useEffect(()=>{t&&w==="map"&&Pe.current&&setTimeout(()=>{window.naver.maps.Event.trigger(Pe.current,"resize"),oa()},100)},[t,w]),b.useEffect(()=>{t&&w==="route"&&ee.current&&setTimeout(()=>{window.naver.maps.Event.trigger(ee.current,"resize")},100)},[t,w]);const tk=()=>{let o=Jm.current;ri!=="all"&&(o=o.filter(u=>u.managerId===Number(ri))),ii!=="all"&&(o=o.filter(u=>u.status===ii)),jm(o.map(u=>u.id)),setTimeout(()=>oa(),100)},oa=b.useCallback(()=>{var v;if(!Pe.current||!((v=window.naver)!=null&&v.maps))return;Cm.current.forEach(_=>_.setMap(null)),Cm.current=[];const o=jv.current,u=Cv.current,m=Sv.current,f=Pe.current.getZoom();let x=o.filter(_=>_.lat&&_.lng);ri!=="all"&&(x=x.filter(_=>_.managerId===Number(ri))),ii!=="all"&&(x=x.filter(_=>_.reaction===ii)),x.forEach(_=>{const N=u.find(V=>V.id===_.managerId);gt[_.reaction]||gt.neutral;const j=m.includes(_.id)||_.reaction==="special",A=ek(f,j),R=Math.max(2,Math.floor(A/5));let P="#9ca3af";_.reaction==="special"?P="#ef4444":_.reaction==="positive"?P="#22c55e":_.reaction==="neutral"?P="#f97316":_.reaction==="missed"&&(P="#eab308");const O=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(_.lat,_.lng),map:Pe.current,icon:{content:`<div class="${j?_.reaction==="special"?"special-blink":"marker-pulse":""}" style="width:${A}px;height:${A}px;background:${P};border-radius:50%;border:${R}px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.4);cursor:pointer;display:flex;align-items:center;justify-content:center;">
 <span style="font-size:${Math.max(8,A/2.5)}px;color:white;font-weight:bold;">${_.name.charAt(0)}</span>
 </div>`,anchor:new window.naver.maps.Point(A/2,A/2)}});window.naver.maps.Event.addListener(O,"click",()=>{vl({..._,manager:N})}),Cm.current.push(O)}),m.length>0&&setTimeout(()=>jm([]),5e3)},[ri,ii]);b.useEffect(()=>{Pe.current&&oa()},[ce,ye,ri,ii,ed,oa]),b.useEffect(()=>{if(t)return;const o=setTimeout(()=>T("logo"),4e3),u=setTimeout(()=>T("form"),6e3);return()=>{clearTimeout(o),clearTimeout(u)}},[t]),b.useEffect(()=>{var f,x;if(!t||ce.length===0||!((x=(f=window.naver)==null?void 0:f.maps)!=null&&x.Service))return;const o=ce.filter(v=>(!v.lat||!v.lng)&&(v.address||v.name));if(o.length===0)return;const m=setTimeout(async()=>{let v=0;for(const _ of o){const N=await ef(_.address,_.name);if(N){const j={..._,lat:N.lat,lng:N.lng};Rs(j),v++}await new Promise(j=>setTimeout(j,300))}v>0&&console.log(`  ${v}    `)},2e3);return()=>clearTimeout(m)},[t,ce.length]),b.useEffect(()=>{if(t&&w==="route"){ee.current&&(ee.current=null);const o=()=>{var u;if(!$m.current){console.log("[] routeMapRef ..."),setTimeout(o,100);return}if(!((u=window.naver)!=null&&u.maps)){console.log("[] window.naver.maps ..."),setTimeout(o,100);return}ee.current||(console.log("[]  "),ee.current=new window.naver.maps.Map($m.current,{center:new window.naver.maps.LatLng(37.5665,126.978),zoom:11}),window.naver.maps.Event.addListener(ee.current,"click",m=>{const f=m.coord.lat(),x=m.coord.lng();window.naver.maps.Service.reverseGeocode({coords:new window.naver.maps.LatLng(f,x),orders:"roadaddr,addr"},(v,_)=>{var R,P;let N=" ",j="";if(v===window.naver.maps.Service.Status.OK&&((R=_.v2.results)==null?void 0:R.length)>0){const O=_.v2.results[0];if(O.land){const V=O.land;j=`${O.region.area1.name} ${O.region.area2.name} ${O.region.area3.name} ${V.name||""} ${V.number1||""}`.trim(),(P=V.addition0)!=null&&P.value?N=V.addition0.value:N=`${O.region.area3.name} ${V.number1||""}`.trim()}}const A={id:Date.now(),name:N,address:j,lat:f,lng:x,type:"click"};qt(O=>[...O,A])})}),console.log("[]  !"),setTimeout(()=>yd(),500))};setTimeout(o,300)}},[t,w]),b.useEffect(()=>{if(!ee.current){w==="route"&&Ce.length>0&&setTimeout(()=>{ee.current&&yd()},500);return}yd()},[Ce,w]);const vd=()=>{ks.current.forEach(o=>o.setMap(null)),ks.current=[],Is.current.forEach(o=>o.setMap(null)),Is.current=[],hv.current.forEach(o=>o.setMap(null)),hv.current=[],sr.current&&(sr.current.setMap(null),sr.current=null),pd(null)},yd=()=>{if(!ee.current)return;vd();const o=Ce.filter(u=>u.lat&&u.lng);o.length!==0&&setTimeout(()=>{if(!ee.current)return;const u={};if(o.forEach((m,f)=>{const x=`${m.lat.toFixed(5)}_${m.lng.toFixed(5)}`;u[x]||(u[x]=[]),u[x].push({...m,originalIdx:f})}),Object.values(u).forEach(m=>{const f=m.length;m.forEach((x,v)=>{let _=0,N=0;if(f>1){const R=2*Math.PI/f*v,P=15e-5;_=Math.cos(R)*P,N=Math.sin(R)*P}const j=f>1,A=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(x.lat+_,x.lng+N),map:ee.current,icon:{content:`<div style="background:linear-gradient(135deg,${j?"#f59e0b":"#14b8a6"},${j?"#d97706":"#0d9488"});color:white;width:${j?"32px":"28px"};height:${j?"32px":"28px"};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:${j?"11px":"12px"};box-shadow:0 3px 8px rgba(0,0,0,0.4);border:2px solid ${j?"#fbbf24":"white"}">${x.originalIdx+1}</div>`,anchor:new window.naver.maps.Point(j?16:14,j?16:14)},zIndex:100+x.originalIdx});window.naver.maps.Event.addListener(A,"click",()=>{ld(x.originalIdx)}),ks.current.push(A)})}),o.length>=2){const m=o.map(x=>new window.naver.maps.LatLng(x.lat,x.lng)),f=new window.naver.maps.Polyline({map:ee.current,path:m,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.9});Is.current.push(f)}if(o.length===1)ee.current.setCenter(new window.naver.maps.LatLng(o[0].lat,o[0].lng)),ee.current.setZoom(15);else if(o.length>=2){const m=new window.naver.maps.LatLngBounds;o.forEach(f=>m.extend(new window.naver.maps.LatLng(f.lat,f.lng))),ee.current.fitBounds(m,{padding:50})}},100)},nk=o=>{o.length!==0&&(fv("all"),pv("all"),jm(o.map(u=>u.id)),oi("map"),setTimeout(()=>{if(Pe.current&&o.length>0)if(o.length===1)Pe.current.setCenter(new window.naver.maps.LatLng(o[0].lat,o[0].lng)),Pe.current.setZoom(14);else{const u=new window.naver.maps.LatLngBounds;o.forEach(m=>u.extend(new window.naver.maps.LatLng(m.lat,m.lng))),Pe.current.fitBounds(u,{padding:50})}},300))},sk=o=>(n==null?void 0:n.role)==="super"||o.managerId===(n==null?void 0:n.managerId),rk=o=>{gv(o),xl(null)},ik=(o,u)=>{const m=wl.find(f=>f.id===o);m&&Ym({...m,date:u,status:u?"planned":"confirmed"})},ak=()=>{Zr.forEach(o=>{const u=wl.find(m=>m.id===o);u&&Ym({...u,status:"confirmed",expiredChecked:!0})}),Zi([]),Vc(null)},lk=()=>{confirm(`${Zr.length}  ?`)&&(Zr.forEach(o=>gv(o)),Zi([]),Vc(null))},rr={:{lat:37.5547,lng:126.9707},:{lat:37.5659,lng:126.9773},:{lat:37.5701,lng:126.9822},3:{lat:37.5714,lng:126.9916},5:{lat:37.5707,lng:126.9992},:{lat:37.5711,lng:127.0095},:{lat:37.5762,lng:127.0251},:{lat:37.4979,lng:127.0276},:{lat:37.5007,lng:127.0365},:{lat:37.5045,lng:127.049},:{lat:37.5089,lng:127.0637},:{lat:37.5108,lng:127.0736},:{lat:37.5133,lng:127.1001},:{lat:37.5571,lng:126.9244},:{lat:37.5495,lng:126.9138},:{lat:37.5552,lng:126.9366},:{lat:37.5569,lng:126.9463},:{lat:37.5575,lng:126.9559},:{lat:37.5601,lng:126.9635},:{lat:37.566,lng:126.9823},3:{lat:37.5665,lng:126.9918},4:{lat:37.5669,lng:126.9983},:{lat:37.5653,lng:127.0076},:{lat:37.5659,lng:127.0176},:{lat:37.565,lng:127.0296},:{lat:37.5614,lng:127.0378},:{lat:37.5568,lng:127.0441},:{lat:37.5474,lng:127.0473},:{lat:37.5446,lng:127.0558},:{lat:37.5404,lng:127.07},:{lat:37.5358,lng:127.0863},:{lat:37.5352,lng:127.0948},:{lat:37.521,lng:127.1028},:{lat:37.5114,lng:127.0833},:{lat:37.4934,lng:127.0148},:{lat:37.492,lng:127.0077},:{lat:37.4815,lng:126.9976},:{lat:37.4766,lng:126.9816},:{lat:37.4769,lng:126.9637},:{lat:37.4812,lng:126.9527},:{lat:37.4824,lng:126.9418},:{lat:37.4842,lng:126.9296},:{lat:37.4876,lng:126.9131},:{lat:37.4854,lng:126.9015},:{lat:37.4929,lng:126.8966},:{lat:37.5088,lng:126.8913},:{lat:37.5178,lng:126.8956},:{lat:37.5247,lng:126.8964},:{lat:37.5349,lng:126.9024},:{lat:37.4856,lng:127.0165},:{lat:37.4844,lng:127.0343},:{lat:37.4871,lng:127.0467},:{lat:37.4908,lng:127.0555},:{lat:37.4946,lng:127.0634},:{lat:37.4968,lng:127.0716},:{lat:37.4987,lng:127.0792},:{lat:37.4838,lng:127.0858},:{lat:37.4874,lng:127.1017},:{lat:37.5271,lng:127.0284},:{lat:37.5168,lng:127.0203},:{lat:37.5112,lng:127.0132},:{lat:37.5048,lng:127.0049},:{lat:37.5405,lng:127.0172},:{lat:37.5476,lng:127.0131},:{lat:37.5541,lng:127.0103},:{lat:37.5588,lng:127.0096},:{lat:37.5614,lng:126.9943},:{lat:37.5759,lng:126.9735},:{lat:37.5766,lng:126.9855},:{lat:37.5608,lng:126.986},:{lat:37.5587,lng:126.9785},:{lat:37.5447,lng:126.972},:{lat:37.5349,lng:126.9732},:{lat:37.5295,lng:126.9686},:{lat:37.5214,lng:126.971},:{lat:37.5082,lng:126.979},:{lat:37.4868,lng:126.9816},:{lat:37.4698,lng:126.9853},:{lat:37.5822,lng:127.0019},:{lat:37.5884,lng:127.0064},:{lat:37.5929,lng:127.0166},:{lat:37.6035,lng:127.0251},:{lat:37.6131,lng:127.03},:{lat:37.6215,lng:127.0298},:{lat:37.6381,lng:127.0257},:{lat:37.6483,lng:127.0345},:{lat:37.6531,lng:127.0476},:{lat:37.6559,lng:127.0619},:{lat:37.6612,lng:127.073},:{lat:37.6702,lng:127.0799},:{lat:37.5708,lng:126.9768},:{lat:37.5653,lng:126.9666},:{lat:37.5476,lng:126.9312},:{lat:37.5247,lng:126.856},:{lat:37.5263,lng:126.875},:{lat:37.5242,lng:126.887},:{lat:37.5256,lng:126.8845},:{lat:37.5225,lng:126.9057},:{lat:37.5216,lng:126.9242},:{lat:37.5271,lng:126.9328},:{lat:37.5392,lng:126.946},:{lat:37.544,lng:126.9517},:{lat:37.5532,lng:126.9568},:{lat:37.5571,lng:127.0296},:{lat:37.5669,lng:127.052},:{lat:37.5613,lng:127.0641},:{lat:37.557,lng:127.0793},:{lat:37.5513,lng:127.0882},:{lat:37.5452,lng:127.1031},:{lat:37.5389,lng:127.1236},:{lat:37.5352,lng:127.1323},:{lat:37.5343,lng:127.1427},:{lat:37.5352,lng:127.152},:{lat:37.5424,lng:127.1441},:{lat:37.555,lng:127.1541},:{lat:37.5571,lng:127.167},:{lat:37.5344,lng:126.9945},:{lat:37.5342,lng:126.9874},:{lat:37.539,lng:126.9617},:{lat:37.5474,lng:126.9434},:{lat:37.5477,lng:126.9225},:{lat:37.5555,lng:126.9105},:{lat:37.5635,lng:126.904},:{lat:37.5681,lng:126.8972},:{lat:37.5769,lng:126.8997},:{lat:37.583,lng:126.9096},:{lat:37.5851,lng:126.918},:{lat:37.5933,lng:126.9179},:{lat:37.6017,lng:126.9214},:{lat:37.6107,lng:126.9301},:{lat:37.6149,lng:126.9391},:{lat:37.6189,lng:126.9209},:{lat:37.6159,lng:126.9114},:{lat:37.5397,lng:127.0019},:{lat:37.5474,lng:127.0071},:{lat:37.5602,lng:127.0149},:{lat:37.5718,lng:127.0166},:{lat:37.5798,lng:127.0147},:{lat:37.5868,lng:127.0195},:{lat:37.5863,lng:127.029},:{lat:37.5895,lng:127.034},:{lat:37.6017,lng:127.038},:{lat:37.6062,lng:127.0442},:{lat:37.6105,lng:127.0512},:{lat:37.6153,lng:127.0661},:{lat:37.6177,lng:127.0754},:{lat:37.6199,lng:127.0842},:{lat:37.6188,lng:127.0914},:{lat:37.5109,lng:127.0218},:{lat:37.5145,lng:127.0316},:{lat:37.5172,lng:127.0412},:{lat:37.5198,lng:127.0535},:{lat:37.5316,lng:127.0667},:{lat:37.5475,lng:127.0743},:{lat:37.5656,lng:127.084},:{lat:37.5735,lng:127.0869},:{lat:37.5802,lng:127.089},:{lat:37.5887,lng:127.087},:{lat:37.5966,lng:127.0851},:{lat:37.6026,lng:127.079},:{lat:37.6107,lng:127.0768},:{lat:37.6253,lng:127.0729},:{lat:37.6371,lng:127.0669},:{lat:37.6442,lng:127.064},:{lat:37.665,lng:127.0581},:{lat:37.6748,lng:127.0565},:{lat:37.6896,lng:127.0449},:{lat:37.6986,lng:127.0531},:{lat:37.5021,lng:126.9958},:{lat:37.4874,lng:126.9877},:{lat:37.4852,lng:126.9817},:{lat:37.4838,lng:126.9726},:{lat:37.4965,lng:126.9535},:{lat:37.5027,lng:126.9504},:{lat:37.5082,lng:126.9396},:{lat:37.4994,lng:126.9269},:{lat:37.4997,lng:126.9184},:{lat:37.503,lng:126.9086},:{lat:37.4865,lng:126.8873},:{lat:37.4813,lng:126.8828},:{lat:37.4762,lng:126.8687},:{lat:37.4762,lng:126.8563},:{lat:37.4792,lng:126.8421},:{lat:37.4927,lng:126.8234},:{lat:37.517,lng:127.1117},:{lat:37.5303,lng:127.1238},:{lat:37.5502,lng:127.1279},:{lat:37.5059,lng:127.1016},:{lat:37.5007,lng:127.1062},:{lat:37.4929,lng:127.1182},:{lat:37.4858,lng:127.1224},:{lat:37.4781,lng:127.1264},:{lat:37.4703,lng:127.1267},:{lat:37.4584,lng:127.15},:{lat:37.4507,lng:127.1573},:{lat:37.4455,lng:127.1574},:{lat:37.4389,lng:127.1538},:{lat:37.4345,lng:127.1508},:{lat:37.4322,lng:127.1291},:{lat:37.5794,lng:126.7975},:{lat:37.5622,lng:126.8011},:{lat:37.5596,lng:126.81},:{lat:37.5619,lng:126.8167},:{lat:37.5671,lng:126.8277},:{lat:37.5607,lng:126.8438},:{lat:37.5614,lng:126.854},:{lat:37.5587,lng:126.8622},:{lat:37.5516,lng:126.8718},:{lat:37.5471,lng:126.8773},:{lat:37.5392,lng:126.8785},:{lat:37.5331,lng:126.8936},:{lat:37.5284,lng:126.9182},:{lat:37.5176,lng:126.9324},:{lat:37.5131,lng:126.9426},:{lat:37.5122,lng:126.9527},:{lat:37.5083,lng:126.9633},:{lat:37.5079,lng:126.9882},:{lat:37.5082,lng:126.9961},:{lat:37.5027,lng:127.0147},:{lat:37.5048,lng:127.0249},:{lat:37.5075,lng:127.0345},:{lat:37.5104,lng:127.0433},:{lat:37.5114,lng:127.052},:{lat:37.5145,lng:127.0593},:{lat:37.5046,lng:127.0862},:{lat:37.5018,lng:127.0935},:{lat:37.5098,lng:127.1089},:{lat:37.5173,lng:127.1117},:{lat:37.5213,lng:127.1249},:{lat:37.5239,lng:127.1354},:{lat:37.5284,lng:127.148},:{lat:37.5416,lng:126.9714},:{lat:37.5299,lng:126.9647},:{lat:37.4984,lng:126.9265},:{lat:37.5174,lng:126.9141},:{lat:37.5159,lng:126.9073},:{lat:37.5032,lng:126.8822},:{lat:37.4569,lng:126.8957},:{lat:37.4679,lng:126.8958},:{lat:37.4796,lng:126.888},:{lat:37.5434,lng:127.0446},:{lat:37.5273,lng:127.0393},:{lat:37.4996,lng:127.0556},:{lat:37.4858,lng:127.0534},:{lat:37.48,lng:127.0509},:{lat:37.4747,lng:127.064},:{lat:37.45,lng:127.127},:{lat:37.44,lng:127.127},:{lat:37.4116,lng:127.1278},:{lat:37.3953,lng:127.1268},:{lat:37.385,lng:127.1234},:{lat:37.378,lng:127.1167},:{lat:37.3665,lng:127.1085},:{lat:37.3607,lng:127.1089},:{lat:37.3397,lng:127.1088},:{lat:37.3253,lng:127.1073},:{lat:37.3127,lng:127.1116},:{lat:37.2997,lng:127.1078},:{lat:37.2853,lng:127.1092},:{lat:37.275,lng:127.116},:{lat:37.265,lng:127.1182},:{lat:37.252,lng:127.0773},:{lat:37.2519,lng:127.0549},:{lat:37.244,lng:127.0471},:{lat:37.2399,lng:127.036},:{lat:37.2634,lng:127.0323},:{lat:37.267,lng:127.0119},:{lat:37.266,lng:126.9996},:{lat:37.47,lng:127.0391},:{lat:37.4509,lng:127.0538},:{lat:37.3947,lng:127.1115},:{lat:37.5313,lng:127.0369},:{lat:37.5805,lng:127.047},:{lat:37.5895,lng:127.0575},:{lat:37.5971,lng:127.0665},:{lat:37.5992,lng:127.0919},:{lat:37.6079,lng:127.1071},:{lat:37.5988,lng:127.1394},:{lat:37.6084,lng:127.1475},:{lat:37.6102,lng:127.162},:{lat:37.5879,lng:127.1901},:{lat:37.58,lng:127.2083},:{lat:37.5231,lng:127.2798},:{lat:37.5411,lng:127.312},:{lat:37.5456,lng:127.3204},:{lat:37.5508,lng:127.3459},:{lat:37.5633,lng:127.3704},:{lat:37.5664,lng:127.3964},:{lat:37.563,lng:127.4163},:{lat:37.4858,lng:127.4623},:{lat:37.4319,lng:127.5053},:{lat:37.6635,lng:127.0115},:{lat:37.6575,lng:127.0123},"4.19":{lat:37.6517,lng:127.0134},:{lat:37.6459,lng:127.0147},:{lat:37.6398,lng:127.0161},:{lat:37.6316,lng:127.0183},:{lat:37.6263,lng:127.0197},:{lat:37.6188,lng:127.0215},:{lat:37.6135,lng:127.0224},:{lat:37.6073,lng:127.0243},:{lat:37.5359,lng:126.7385},:{lat:37.559,lng:126.6882},:{lat:37.5323,lng:126.6416},:{lat:37.4929,lng:126.4939},:{lat:37.4974,lng:126.4692},:{lat:37.4465,lng:126.4519},1:{lat:37.4493,lng:126.4514},2:{lat:37.4604,lng:126.4419},:{lat:37.512,lng:127.059},:{lat:37.5111,lng:127.098},:{lat:37.5512,lng:126.9882},:{lat:37.5796,lng:126.977},:{lat:37.5794,lng:126.991},:{lat:37.5658,lng:126.9749},:{lat:37.5673,lng:127.0095},DDP:{lat:37.5673,lng:127.0095},:{lat:37.5344,lng:126.9945},:{lat:37.5608,lng:126.986},:{lat:37.574,lng:126.985},:{lat:37.5825,lng:126.985},:{lat:37.5716,lng:126.9769},:{lat:37.5695,lng:126.978},:{lat:37.5256,lng:126.9227},:{lat:37.5284,lng:126.934},:{lat:37.5213,lng:127.1249},:{lat:37.5434,lng:127.0446},:{lat:37.6207,lng:127.0404},:{lat:37.5681,lng:126.8972},:{lat:37.5151,lng:127.073},:{lat:37.4982,lng:126.8671},:{lat:37.5203,lng:127.023},:{lat:37.5198,lng:127.0535},:{lat:37.5273,lng:127.0393},:{lat:37.5446,lng:127.0558},:{lat:37.5665,lng:126.9918},:{lat:37.574,lng:126.989},:{lat:37.56,lng:126.922},:{lat:37.55,lng:126.91},:{lat:37.542,lng:126.985},:{lat:37.537,lng:126.992}},kv=o=>{const u=o.trim();if(rr[u])return rr[u];if(rr[u+""])return rr[u+""];if(u.endsWith("")&&rr[u.slice(0,-1)])return rr[u.slice(0,-1)];const f=Object.keys(rr).find(x=>x.includes(u)||u.includes(x));return f?rr[f]:null},Iv=()=>{if(Bm.trim()&&Pe.current){const o=Bm.trim(),u=kv(o);if(u){Pe.current.setCenter(new window.naver.maps.LatLng(u.lat,u.lng)),Pe.current.setZoom(16),ei.current.forEach(x=>x.setMap(null)),ei.current=[];const f=new window.naver.maps.Circle({map:Pe.current,center:new window.naver.maps.LatLng(u.lat,u.lng),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});ei.current.push(f),setTimeout(()=>f.setMap(null),5e3);return}const m=Jm.current.filter(f=>f.region&&f.region.toLowerCase().includes(o.toLowerCase()));if(m.length>0){nk(m);return}window.naver.maps.Service.geocode({query:o},(f,x)=>{if(f===window.naver.maps.Service.Status.OK&&x.v2.addresses&&x.v2.addresses.length>0){const v=x.v2.addresses[0],_=parseFloat(v.y),N=parseFloat(v.x);Pe.current.setCenter(new window.naver.maps.LatLng(_,N)),Pe.current.setZoom(16),ei.current.forEach(A=>A.setMap(null)),ei.current=[];const j=new window.naver.maps.Circle({map:Pe.current,center:new window.naver.maps.LatLng(_,N),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});ei.current.push(j),setTimeout(()=>j.setMap(null),5e3)}else alert("  .")})}else tk()},ci=o=>o?o.replace(/[^0-9]/g,""):"",ok=(o,u,m,f)=>{if(!o||!u||!m||!f)return 1/0;const x=6371e3,v=(m-o)*Math.PI/180,_=(f-u)*Math.PI/180,N=Math.sin(v/2)*Math.sin(v/2)+Math.cos(o*Math.PI/180)*Math.cos(m*Math.PI/180)*Math.sin(_/2)*Math.sin(_/2),j=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N));return x*j},Xm=(o,u)=>{if(!o||!u||u.length===0)return{isDuplicate:!1,matchedCompany:null};const m=o.name||o.officeName||o.realtorName||"",f=o.address||"",x=o.regNo||"",v=o.lat,_=o.lng,N=[ci(o.phone||""),ci(o.cellPhone||""),ci(o.officePhone||""),ci(o.mobile||"")].filter(O=>O&&O.length>=4),j=O=>(O||"").replace(/||||||/g,"").replace(/\s+/g,"").trim(),A=O=>{if(!O)return"";const te=O.replace(/|||||/g,"").replace(/\([^)]*\)/g,"").trim().match(/(\S+)\s*(\S+(?:||))\s*(\d+(?:-\d+)?)/);return te?`${te[1]}_${te[2]}_${te[3]}`:""},R=j(m),P=A(f);for(const O of u){const V=O.name||"",te=O.address||"",I=O.regNo||"",se=O.lat,$=O.lng,H=[ci(O.phone||""),ci(O.contact||""),ci(O.mobile||"")].filter(de=>de&&de.length>=4),q=j(V),z=A(te);if(x&&I&&x===I)return{isDuplicate:!0,matchedCompany:O,reason:"regNo"};if(ok(v,_,se,$)<=30&&R&&q&&R===q)return{isDuplicate:!0,matchedCompany:O,reason:"location+name"};if(N.some(de=>H.some(fe=>de===fe)))return{isDuplicate:!0,matchedCompany:O,reason:"phone"};if(P&&z&&P===z&&R&&q&&R===q)return{isDuplicate:!0,matchedCompany:O,reason:"address+name"};if(R&&q&&R===q){const de=f.match(/(\S+)/),fe=te.match(/(\S+)/);if(de&&fe&&de[1]===fe[1])return{isDuplicate:!0,matchedCompany:O,reason:"name_in_gu"}}}return{isDuplicate:!1,matchedCompany:null}},Zm=(o,u)=>Xm(o,u).isDuplicate,ef=(o,u=null)=>new Promise(m=>{var v,_;if(!((_=(v=window.naver)==null?void 0:v.maps)!=null&&_.Service)){m(null);return}const f=N=>new Promise(j=>{if(!N){j(null);return}window.naver.maps.Service.geocode({query:N},(A,R)=>{var P;if(A===window.naver.maps.Service.Status.OK&&((P=R.v2.addresses)==null?void 0:P.length)>0){const O=R.v2.addresses[0];j({lat:parseFloat(O.y),lng:parseFloat(O.x)})}else j(null)})});(async()=>{if(o){const N=await f(o);if(N)return m(N)}if(u){const N=await f(u);if(N)return m(N)}if(o){const N=o.replace(/\s*\d+.*$/,"").replace(/\s*\d+.*$/,"").replace(/\s*,.*$/,"").trim();if(N!==o){const j=await f(N);if(j)return m(j)}}if(o){const N=o.match(/(||||||||||||||||)[^\s]*\s+[^\s]+/);if(N){const j=await f(N[0]);if(j)return m(j)}}m(null)})()}),ck=o=>{const u=cr(),m=$t.filter(v=>v.date!==u?!1:o.role==="super"?!0:v.managerId===o.managerId),f=Be.filter(v=>v.date!==u?!1:o.role==="super"?!0:v.managerId===o.managerId),x=[...m.map(v=>({type:"calendar",...v})),...f.map(v=>{var _;return{type:"route",title:`: ${((_=v.stops)==null?void 0:_.length)||0} `,...v}})];x.length>0&&(gS(x),vm(!0))},dk=()=>{const o=Kf();return o.dayOfWeek!==1?!1:o.day>=22&&o.day<=28},uk=o=>{if(o.role==="super"||!dk())return;const u=Kf(),m=u.month+1>11?0:u.month+1,x=`${u.month+1>11?u.year+1:u.year}-${String(m+1).padStart(2,"0")}`;$t.some(_=>{var N;return _.managerId===o.managerId&&((N=_.date)==null?void 0:N.startsWith(x))})||bm(!0)},Ev=async o=>new Promise((u,m)=>{const f=new FileReader;f.onload=async()=>{var x,v,_,N;try{const j=f.result.split(",")[1],R=await(await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${dD}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:j},features:[{type:"TEXT_DETECTION"}]}]})})).json();if((N=(_=(v=(x=R.responses)==null?void 0:x[0])==null?void 0:v.textAnnotations)==null?void 0:_[0])!=null&&N.description){const P=R.responses[0].textAnnotations[0].description,O=hk(P);u(O)}else u({raw:"",name:"",contact:"",phone:"",address:""})}catch(j){m(j)}},f.onerror=m,f.readAsDataURL(o)}),hk=o=>{const u=o.split(`
`).map(R=>R.trim()).filter(R=>R);let m="",f="",x="",v="";const _=[/010[-\s]?\d{4}[-\s]?\d{4}/,/02[-\s]?\d{3,4}[-\s]?\d{4}/,/0\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/];for(const R of u){for(const P of _){const O=R.match(P);if(O){x=O[0].replace(/[-\s]/g,"");break}}if(x)break}const N=/(||||||||||||||||)[^\n]+?(|||||)[^\n]*\d*/;for(const R of u){const P=R.match(N);if(P){v=P[0];break}}const j=[/\s*[:\s]*([-]{2,4})/,/([-]{2,4})\s*(|||||||)/,/^([-]{2,4})$/];for(const R of u){for(const P of j){const O=R.match(P);if(O){f=O[1]||O[0];break}}if(f)break}const A=[/([-]+)/,/([-]+)/,/([-]+)/];for(const R of u){for(const P of A){const O=R.match(P);if(O){m=O[1];break}}if(m)break}return{raw:o,name:m,contact:f,phone:x,address:v}},mk=async o=>{var m;const u=(m=o.target.files)==null?void 0:m[0];if(u){Qc(!0),Yc(!0);try{const f=await Ev(u);gm(f),at({...ne,name:f.name||"",contact:f.contact||"",phone:f.phone||"",address:f.address||""})}catch(f){console.error("OCR :",f),alert("  .")}finally{Qc(!1),o.target.value=""}}},fk=async o=>{const u=Array.from(o.target.files||[]).slice(0,10);if(u.length!==0){Qc(!0),pm(!0),es([]);try{const m=[];for(let f=0;f<u.length;f++){const x=await Ev(u[f]);m.push({...x,managerId:(n==null?void 0:n.managerId)||null,reaction:"neutral",memo:""})}es(m)}catch(m){console.error("OCR :",m),alert("    .")}finally{Qc(!1),o.target.value=""}}},pk=()=>{const o=wn.filter(u=>u.name);if(o.length===0)return alert("  .");o.forEach((u,m)=>{const f={id:Date.now()+m,name:u.name,contact:u.contact,phone:u.phone,address:u.address,region:u.address,managerId:u.managerId,reaction:u.reaction,memo:u.memo,createdAt:new Date().toLocaleString("ko-KR")};Rs(f)}),alert(`${o.length}  .`),es([]),pm(!1)},gk=(o,u,m,f)=>{const x=R=>R*Math.PI/180,v=R=>R*180/Math.PI,_=x(f-u),N=Math.sin(_)*Math.cos(x(m)),j=Math.cos(x(o))*Math.sin(x(m))-Math.sin(x(o))*Math.cos(x(m))*Math.cos(_);return(v(Math.atan2(N,j))+360)%360},xk=(o,u,m,f)=>{if(!ee.current)return;const x=new window.naver.maps.LatLng(o,u);Es.current||(Es.current=new window.naver.maps.Marker({position:x,map:ee.current,icon:{content:"",anchor:new window.naver.maps.Point(20,20)},zIndex:1e3})),Es.current.setPosition(x);const v=m||0;Es.current.setIcon({content:`<div style="position: relative; width: 40px; height: 40px;">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(${v}deg);">
 <div style="width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 20px solid #4285f4; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));"></div>
 </div>
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #4285f4; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6px; height: 6px; background: white; border-radius: 50%;"></div>
 </div>
 </div>`,anchor:new window.naver.maps.Point(20,20)}),f&&f<500&&(Ts.current?(Ts.current.setCenter(x),Ts.current.setRadius(f)):Ts.current=new window.naver.maps.Circle({map:ee.current,center:x,radius:f,fillColor:"#4285f4",fillOpacity:.1,strokeColor:"#4285f4",strokeOpacity:.3,strokeWeight:1}))},vk=()=>{if(hd)ia.current&&(navigator.geolocation.clearWatch(ia.current),ia.current=null),Es.current&&(Es.current.setMap(null),Es.current=null),Ts.current&&(Ts.current.setMap(null),Ts.current=null),aa.current=null,fd.current=0,Wm(!1),mv(null);else{if(!navigator.geolocation)return alert("GPS   .");Wm(!0),ia.current=navigator.geolocation.watchPosition(o=>{const{latitude:u,longitude:m,accuracy:f,heading:x,speed:v}=o.coords,_={lat:u,lng:m};mv(_);let N=fd.current;if(aa.current){const j=aa.current.lat,A=aa.current.lng;Math.sqrt(Math.pow(u-j,2)+Math.pow(m-A,2))*111e3>2&&(N=gk(j,A,u,m),fd.current=N,aa.current=_)}else aa.current=_;x&&!isNaN(x)&&v>.3&&(N=x,fd.current=x),xk(u,m,N,f)},o=>{console.error("GPS :",o);let u="GPS  .";o.code===1?u="GPS  .    .":o.code===2?u="GPS    .":o.code===3&&(u="GPS   ."),alert(u),Wm(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},yk=()=>{md&&ee.current?(ee.current.setCenter(new window.naver.maps.LatLng(md.lat,md.lng)),ee.current.setZoom(16)):alert("    . GPS .")};b.useEffect(()=>()=>{ia.current&&navigator.geolocation.clearWatch(ia.current),Es.current&&Es.current.setMap(null),Ts.current&&Ts.current.setMap(null),sr.current&&sr.current.setMap(null)},[]),b.useEffect(()=>{if(t&&L&&n&&($t.length>0||Be.length>0)){const o=`bc_alert_shown_${cr()}_${n.managerId||"admin"}`;sessionStorage.getItem(o)||setTimeout(()=>{ck(n),sessionStorage.setItem(o,"true")},1e3)}},[t,L,$t,Be,n]),b.useEffect(()=>{t&&w==="calendar"&&n&&n.role!=="super"&&uk(n)},[w,t,n,$t]);const bd=b.useRef([]),Tv=()=>{bd.current.forEach(o=>o.setMap(null)),bd.current=[]},tf=async()=>{if(!ra.trim())return alert(" ");if(Ss.length>=10)return alert(` 10   .
    .`);Om(!0);const o=kv(ra);if(o&&ee.current){Om(!1),ee.current.setCenter(new window.naver.maps.LatLng(o.lat,o.lng)),ee.current.setZoom(16),Ss.some(m=>m.lat===o.lat&&m.lng===o.lng)||Tl(m=>[...m,{id:Date.now(),name:Pm.trim()||ra,address:"",lat:o.lat,lng:o.lng}]),Rm(""),Am(""),setTimeout(()=>{const m=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(o.lat,o.lng),map:ee.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new window.naver.maps.Point(14,14)}});bd.current.push(m)},200);return}window.naver.maps.Service.geocode({query:ra},async(u,m)=>{var N;if(Om(!1),u!==window.naver.maps.Service.Status.OK||!((N=m.v2.addresses)!=null&&N.length))return alert("    ");const f=m.v2.addresses[0],x=parseFloat(f.y),v=parseFloat(f.x);Ss.some(j=>j.lat===x&&j.lng===v)||Tl(j=>[...j,{id:Date.now(),name:Pm.trim()||ra,address:f.roadAddress||f.jibunAddress||"",lat:x,lng:v}]),Rm(""),Am(""),ee.current&&(ee.current.setCenter(new window.naver.maps.LatLng(x,v)),ee.current.setZoom(16),setTimeout(()=>{const j=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(x,v),map:ee.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new window.naver.maps.Point(14,14)}});bd.current.push(j)},200))})},bk=o=>{Tl(u=>u.filter(m=>m.id!==o))},_k=()=>{if(Ss.length===0)return alert("  ");let o=0;const u=[];Ss.forEach(m=>{Ce.some(x=>x.lat===m.lat&&x.lng===m.lng)||(u.push({id:Date.now()+Math.random(),name:m.name,address:m.address,lat:m.lat,lng:m.lng,type:"search"}),o++)}),u.length>0&&qt(m=>[...m,...u]),Tl([]),Tv(),alert(`${o}   !`)},[ML,DL]=b.useState(!1);b.useRef(null);const wk=o=>{qt(u=>u.filter(m=>m.id!==o))},Rv=(o,u)=>{const m=[...Ce],f=o+u;f<0||f>=m.length||([m[o],m[f]]=[m[f],m[o]],qt(m))},_d=(o,u,m,f)=>{const v=(m-o)*Math.PI/180,_=(f-u)*Math.PI/180,N=Math.sin(v/2)*Math.sin(v/2)+Math.cos(o*Math.PI/180)*Math.cos(m*Math.PI/180)*Math.sin(_/2)*Math.sin(_/2);return 6371*(2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N)))},Pv=(o,u,m)=>{const f=[...o],x=[];let v=u,_=m;for(;f.length>0;){let N=0,j=1/0;for(let R=0;R<f.length;R++){const P=_d(v,_,f[R].lat,f[R].lng);P<j&&(j=P,N=R)}const A=f.splice(N,1)[0];x.push(A),v=A.lat,_=A.lng}return x},Av=async(o,u,m)=>{var v,_;if(m.length<1)return null;const f="dx2ymyk2b1",x=localStorage.getItem("ncp_client_secret")||"";if(!x)return console.log("Directions API   -   "),null;try{const N=`${u},${o}`,j=`${m[m.length-1].lng},${m[m.length-1].lat}`;let A="";m.length>1&&(A=m.slice(0,-1).map(te=>`${te.lng},${te.lat}`).join("|"));let R=`https://naveropenapi.apigw.ntruss.com/map-direction-15/v1/driving?start=${N}&goal=${j}&option=trafast`;A&&(R+=`&waypoints=${A}`);const P=await fetch(R,{headers:{"X-NCP-APIGW-API-KEY-ID":f,"X-NCP-APIGW-API-KEY":x}});if(!P.ok)return null;const O=await P.json();if(O.code!==0||!((_=(v=O.route)==null?void 0:v.trafast)!=null&&_[0]))return null;const V=O.route.trafast[0];return{path:V.path,distance:V.summary.distance,duration:V.summary.duration}}catch(N){return console.error("Directions API  :",N),null}},Ov=o=>{if(!ee.current||!(o!=null&&o.path))return;sr.current&&sr.current.setMap(null);const u=o.path.map(([x,v])=>new window.naver.maps.LatLng(v,x));sr.current=new window.naver.maps.Polyline({map:ee.current,path:u,strokeColor:"#4285f4",strokeWeight:5,strokeOpacity:.8,strokeLineCap:"round",strokeLineJoin:"round"});const m=(o.distance/1e3).toFixed(1),f=Math.round(o.duration/6e4);pd({distance:m,duration:f})},Nk=async()=>{const o=Ce.filter(m=>m.lat&&m.lng),u=Ce.filter(m=>!m.lat||!m.lng);if(o.length<2){alert(`   2  .
  .`);return}navigator.geolocation?navigator.geolocation.getCurrentPosition(async m=>{const f=m.coords.latitude,x=m.coords.longitude,v=Pv(o,f,x),_=[...v,...u];qt(_);const N=await Av(f,x,v);if(N){Ov(N);const j=(N.distance/1e3).toFixed(1),A=Math.round(N.duration/6e4);alert(`  !

 ${v.length} 
  : ${j}km
  : ${A}

   !`)}else{let j=_d(f,x,v[0].lat,v[0].lng);for(let A=0;A<v.length-1;A++)j+=_d(v[A].lat,v[A].lng,v[A+1].lat,v[A+1].lng);pd(null),alert(`  !

 ${v.length} 
 : ${j.toFixed(1)}km

     API  .`)}},m=>{Mv(o,u)},{enableHighAccuracy:!0,timeout:5e3}):Mv(o,u)},jk=()=>{if(Ce.length<2){alert(" 2  .");return}qt([...Ce].reverse()),alert("   !")},Mv=async(o,u)=>{const m=o[0],f=Pv(o,m.lat,m.lng),x=[...f,...u];qt(x);const v=await Av(m.lat,m.lng,f.slice(1));if(v){Ov(v);const _=(v.distance/1e3).toFixed(1),N=Math.round(v.duration/6e4);alert(`  !

 ${f.length} 
  : ${_}km
  : ${N}

(GPS   -   )`)}else{let _=0;for(let N=0;N<f.length-1;N++)_+=_d(f[N].lat,f[N].lng,f[N+1].lat,f[N+1].lng);pd(null),alert(`  !

 ${f.length} 
 : ${_.toFixed(1)}km

(GPS   -   )`)}},Ck=o=>{const u=(o.stops||[]).filter(m=>m.lat&&m.lng);if(u.length===0)return alert("   .");Dv(o),setTimeout(()=>{if(ee.current)if(ks.current.forEach(m=>m.setMap(null)),ks.current=[],Is.current.forEach(m=>m.setMap(null)),Is.current=[],u.forEach((m,f)=>{const x=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(m.lat,m.lng),map:ee.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 3px 8px rgba(0,0,0,0.4); border: 3px solid white;">${f+1}</div>`,anchor:new window.naver.maps.Point(16,16)}});ks.current.push(x)}),u.length>=2){const m=u.map(v=>new window.naver.maps.LatLng(v.lat,v.lng)),f=new window.naver.maps.Polyline({map:ee.current,path:m,strokeColor:"#14b8a6",strokeWeight:5,strokeOpacity:.9,strokeStyle:"solid"});Is.current.push(f);const x=new window.naver.maps.LatLngBounds;u.forEach(v=>x.extend(new window.naver.maps.LatLng(v.lat,v.lng))),ee.current.fitBounds(x,{padding:50})}else ee.current.setCenter(new window.naver.maps.LatLng(u[0].lat,u[0].lng)),ee.current.setZoom(15)},400)},Dv=o=>{ad(o.id),Cl(o.name||""),ea(o.date||new Date().toISOString().split("T")[0]),Nl(o.time||"09:00"),tr(o.managerId||null),qt(o.stops||[]),ld(0),setTimeout(()=>{ee.current&&yd()},100),window.scrollTo({top:0,behavior:"smooth"})},Sk=o=>{var m;const u=((m=o.stops)==null?void 0:m.filter(f=>!f.visited))||[];u.length>0?Em({route:o,unvisitedStops:u}):nf(o,!1)},nf=(o,u=!1)=>{var x;const m={...o,status:"completed",completedAt:new Date().toISOString()},f=Be.map(v=>v.id===o.id?m:v);if(iv(f),localStorage.setItem("bc_routes",JSON.stringify(f)),u){const v=((x=o.stops)==null?void 0:x.filter(N=>!N.visited))||[];let _=0;v.forEach(N=>{const j=ce.find(A=>{var R,P;return A.name===N.name||((R=A.name)==null?void 0:R.includes(N.name))||((P=N.name)==null?void 0:P.includes(A.name))});if(j&&j.managerId){const A={...j,managerId:null};Rs(A),_++}}),_>0?alert(`  .
  ${_}   .`):alert("  .")}else alert("  .");Em(null)},kk=()=>{ad(null),Cl(""),qt([]),ea(cr()),Nl("09:00"),tr((n==null?void 0:n.managerId)||null),vd(),localStorage.removeItem("bc_temp_route")},Lv=()=>{if(Ce.length===0)return alert(" /  ");if(!jl.trim())return alert("  (:  )");const o=Sm||(n==null?void 0:n.managerId)||0;if(!o&&(n==null?void 0:n.role)!=="super")return alert(" ");if(ti){const m={...Be.find(f=>f.id===ti),name:jl.trim(),date:rd,time:id,managerId:o,stops:Ce.map(f=>({...f,visited:f.visited||!1}))};xd(m),ad(null),alert(" !")}else{const u={id:Date.now(),name:jl.trim(),date:rd,time:id,managerId:o,stops:Ce.map(m=>({...m,visited:!1})),status:"planned",createdAt:new Date().toISOString()};xd(u),alert(" !")}Cl(""),qt([]),ea(cr()),Nl("09:00"),tr((n==null?void 0:n.managerId)||null),vd(),localStorage.removeItem("bc_temp_route")},Fv=o=>{if(o<0||o>=Ce.length)return;ld(o);const u=Ce[o];u.lat&&u.lng&&ee.current&&(ee.current.setCenter(new window.naver.maps.LatLng(u.lat,u.lng)),ee.current.setZoom(16))},Ik=(o,u)=>{ld(u),o.lat&&o.lng&&ee.current&&(ee.current.setCenter(new window.naver.maps.LatLng(o.lat,o.lng)),ee.current.setZoom(16))},Ek=(o,u)=>{const m=Be.find(N=>N.id===o);if(!m)return;const f=m.stops.find(N=>N.id===u),x=!(f!=null&&f.visited),v=m.stops.map(N=>N.id===u?{...N,visited:!N.visited}:N),_=v.every(N=>N.visited);if(xd({...m,stops:v,status:_?"completed":"planned"}),x&&(f!=null&&f.name)){const N=ce.find(j=>j.name===f.name);N&&Rs({...N,lastVisitDate:new Date().toISOString()})}(on==null?void 0:on.id)===o&&js({...m,stops:v,status:_?"completed":"planned"})},Tk=o=>{const u=Be.find(x=>x.id===o);if(!u)return;const m=u.stops.map(x=>({...x,visited:!0}));xd({...u,stops:m,status:"completed"});const f=(u.stops||[]).filter(x=>x.name&&!ce.find(v=>v.name===x.name));f.forEach(x=>{const v={id:Date.now()+Math.random(),name:x.name,address:x.address||"",managerId:u.managerId,reaction:"positive",fromRoute:u.name,createdAt:new Date().toISOString()};Rs(v)}),js(null),f.length>0?alert(`  !
${f.length}   .`):alert("  !")},Rk=o=>{if(!o.lat||!o.lng)return alert("    ");js(null),oi("map"),setTimeout(()=>{if(!Pe.current)return;Pk(),Pe.current.setCenter(new window.naver.maps.LatLng(o.lat,o.lng)),Pe.current.setZoom(17);const u=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(o.lat,o.lng),map:Pe.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; padding: 8px 12px; border-radius: 20px; font-weight: bold; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white; white-space: nowrap;">${o.name}</div>`,anchor:new window.naver.maps.Point(50,20)}});Um.current.push(u);const m=new window.naver.maps.Circle({map:Pe.current,center:new window.naver.maps.LatLng(o.lat,o.lng),radius:100,fillColor:"#14b8a6",fillOpacity:.2,strokeColor:"#d97706",strokeWeight:2});ei.current.push(m)},300)},Pk=()=>{uv.current.forEach(o=>o.setMap(null)),uv.current=[],Um.current.forEach(o=>o.setMap(null)),Um.current=[]},Ak=o=>{const u=(o.stops||[]).filter(m=>m.lat&&m.lng);if(u.length===0)return alert("   ");oi("route"),setTimeout(()=>{if(ee.current)if(ks.current.forEach(m=>m.setMap(null)),ks.current=[],Is.current.forEach(m=>m.setMap(null)),Is.current=[],u.forEach((m,f)=>{const x=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(m.lat,m.lng),map:ee.current,icon:{content:`<div style="background: linear-gradient(135deg, #00C73C, #00a832); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 13px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">${f+1}</div>`,anchor:new window.naver.maps.Point(14,14)}});ks.current.push(x)}),u.length>=2){const m=u.map(v=>new window.naver.maps.LatLng(v.lat,v.lng)),f=new window.naver.maps.Polyline({map:ee.current,path:m,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.8,strokeStyle:"solid"});Is.current.push(f);const x=new window.naver.maps.LatLngBounds;u.forEach(v=>x.extend(new window.naver.maps.LatLng(v.lat,v.lng))),ee.current.fitBounds(x,{padding:50})}else ee.current.setCenter(new window.naver.maps.LatLng(u[0].lat,u[0].lng)),ee.current.setZoom(15)},300)},Ol=(o,u)=>{if(!o)return;const m={isOnline:u,lastSeen:new Date().toISOString()};re.ref("userStatus/"+o).set(m)},Uv=async()=>{try{const o=i.includes("@")?i:`${i}@beancraft.com`,m=(await dn.auth().signInWithEmailAndPassword(o,l)).user;let f=null;const x=o.split("@")[0];if(x==="admin")f={name:"admin",role:"super",email:m.email};else{const _=(await re.ref("managers").once("value")).val(),j=(_?Object.values(_):[]).find(A=>A.username===x||A.email===o);if(j){let A=j.name;const R=Bd.find(P=>P.username===x||P.id===j.id);R&&(!j.name||j.name.length<2||j.name.includes(""))&&(A=R.name,console.log(`[]   : ${j.name} -> ${A}`),re.ref("managers/"+j.id).update({name:A})),f={name:A,role:"manager",managerId:j.id,username:j.username,email:m.email}}else f={name:x,role:"manager",email:m.email}}s(f),e(!0),setTimeout(()=>{s(v=>v&&{...v})},150),f.managerId&&tr(f.managerId),localStorage.setItem("bc_session",JSON.stringify({user:f,expiry:Date.now()+6*60*60*1e3})),d?localStorage.setItem("bc_remember_login",JSON.stringify({id:i,pw:l,expiry:Date.now()+30*24*60*60*1e3})):localStorage.removeItem("bc_remember_login"),f.managerId&&Ol(f.managerId,!0)}catch(o){console.error(" :",o),o.code==="auth/user-not-found"?alert("  "):o.code==="auth/wrong-password"?alert("  "):o.code==="auth/invalid-email"?alert("   "):alert(" : "+o.message)}},Ok=async()=>{n!=null&&n.managerId&&Ol(n.managerId,!1);try{await dn.auth().signOut()}catch{}e(!1),s(null),localStorage.removeItem("bc_session"),Pe.current=null,ee.current=null,om([]),Mc(null),Ji(null)};b.useEffect(()=>{const o=()=>{n!=null&&n.managerId&&re.ref("userStatus/"+n.managerId).set({isOnline:!1,lastSeen:new Date().toISOString()})};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[n]),b.useEffect(()=>{if(!(n!=null&&n.managerId))return;const o=setInterval(()=>{Ol(n.managerId,!0)},6e4);return()=>clearInterval(o)},[n]);const $v=async()=>{if(!ts.trim())return alert("  ");if(ts!==Xc)return alert("  ");if(ts.length<6)return alert(" 6  ");try{const o=dn.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(ts),cm(!1),Jc(""),Zc(""),alert(" ")}catch(o){console.error("  :",o),o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}},Wv=async()=>{if(H0){if(!_l.trim())return alert("  ");if(_l!==tv)return alert("  ");if(_l.length<6)return alert(" 6  ");try{const o=dn.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(_l),dm(!1),ev(""),nv(""),alert("  ")}catch(o){o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}}else{if(!ts.trim())return alert("  ");if(ts!==Xc)return alert("  ");if(ts.length<6)return alert(" 6  ");try{const o=dn.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(ts),Jc(""),Zc(""),alert("  ")}catch(o){o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}}},zv=async()=>{if(!ne.name.trim())return alert(" ");let o=null,u=null;if(ne.address){const _=await ef(ne.address,ne.name);_&&(o=_.lat,u=_.lng)}const m=Ln?ne.managerId:n==null?void 0:n.managerId,f={id:Date.now(),...ne,managerId:m,lat:o,lng:u,isReregistered:ne.isReregistered||!1,usedMents:F0,mentMemo:ZC,createdAt:new Date().toLocaleString("ko-KR")};Rs(f);const x=ne.reaction==="positive"||ne.reaction==="special";F0.forEach(_=>XS(_,x));const v=G_[Math.floor(Math.random()*G_.length)];if(hm({companyName:ne.name,quote:v}),ne.reaction==="positive"||ne.reaction==="special"){const _=new Date;_.setDate(_.getDate()+1);const N=_.toISOString().split("T")[0],j={id:Date.now()+1,date:N,title:`${ne.name}`,managerId:m,memo:`, .    .    ?

: ${ne.contact||"-"}
: ${ne.phone||"-"}
: ${ne.address||"-"}`,type:"followup",companyId:f.id};Qm(j);const A=new Date;A.setMonth(A.getMonth()+1);const R=A.toISOString().split("T")[0],P={id:Date.now()+2,date:R,title:`${ne.name}`,managerId:m,memo:`, . .      ?

: ${ne.contact||"-"}
: ${ne.phone||"-"}
: ${ne.address||"-"}`,type:"followup",companyId:f.id};Qm(P)}at({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),BS(""),XC([]),eS("")},Mk=async()=>{if(!St)return;let o={...St};if(o.address&&(!o.lat||!o.lng)){const u=await ef(o.address,o.name);u&&(o.lat=u.lat,o.lng=u.lng)}Rs(o),mt(null)},Bv=o=>{na({type:"company",id:o.id,name:o.name})},Dk=()=>{if(!_m.trim())return alert(" ");const o=_m.split(`
`).map(m=>m.trim()).filter(m=>m),u=[];o.forEach(m=>{const f=m.split("/").map(P=>P.trim());if(f.length<1||!f[0])return;const[x,v,_,N,j]=f;let A=X0;j&&(j===""?A="negative":j===""?A="neutral":j===""?A="positive":j===""&&(A="special"));const R=N||vS||"";u.push({name:x,contact:v||"",phone:_||"",managerId:Q0,region:R,address:R,reaction:A})}),u.forEach((m,f)=>{const x={id:Date.now()+f,...m,createdAt:new Date().toLocaleString("ko-KR")};Rs(x)}),Y0(""),J0(null),yS(""),bS(""),Z0("neutral"),$c(!1),alert(`${u.length}  .`)},Lk=()=>{if(!Yt.name.trim())return alert(" ");const o={id:Date.now(),...Yt,createdAt:new Date().toLocaleString("ko-KR")};xv(o),ai({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""})},Fk=()=>{ft&&(xv(ft),_n(null))},Uk=()=>{if(!Dn.managerId||!Dn.amount)return alert("  ");const o={id:Date.now(),...Dn,amount:Number(Dn.amount),date:Dn.date||cr()};vv(o),gd({managerId:null,companyId:null,amount:"",date:"",note:""}),Hc(!1)},wd=async()=>{var o,u,m,f,x;if(Qr.trim()){A0(!0),P0(null);try{const v=`    .      .

: ${Qr}

 JSON   (  JSON):
{
  "overview": {
    "population": " 2.5",
    "households": " 1.2 ",
    "stores": "127",
    "avgRent": " 300",
    "source": "https://sg.sbiz.or.kr"
  },
  "consumers": [
    {"label": "20", "percent": 35, "source": "https://kosis.kr"},
    {"label": "30", "percent": 28, "source": "https://kosis.kr"},
    {"label": "40", "percent": 22, "source": "https://kosis.kr"},
    {"label": "50 ", "percent": 15, "source": "https://kosis.kr"}
  ],
  "franchises": [
    {"name": "", "count": 12},
    {"name": "", "count": 8},
    {"name": "", "count": 6},
    {"name": "", "count": 5},
    {"name": "", "count": 3}
  ],
  "development": [
    "2025 GTX-A   ",
    "    ",
    "  "
  ],
  "risks": [
    "   ",
    "  ",
    "  "
  ],
  "insight": "      20-30  .   ,        .            ."
}`,A=(((x=(f=(m=(u=(o=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${im}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:v}]}],generationConfig:{temperature:.7}})})).json()).candidates)==null?void 0:o[0])==null?void 0:u.content)==null?void 0:m.parts)==null?void 0:f[0])==null?void 0:x.text)||"").match(/\{[\s\S]*\}/);if(A){const R=JSON.parse(A[0]);P0(R),setTimeout(()=>{if(window.naver&&window.naver.maps){const P=document.getElementById("sales-mode-map")||document.getElementById("report-region-map");P&&window.naver.maps.Service.geocode({query:Qr},(O,V)=>{let te=new window.naver.maps.LatLng(37.5665,126.978);if(O===window.naver.maps.Service.Status.OK&&V.v2.addresses.length>0){const se=V.v2.addresses[0];te=new window.naver.maps.LatLng(parseFloat(se.y),parseFloat(se.x))}const I=new window.naver.maps.Map(P,{center:te,zoom:16});new window.naver.maps.Marker({position:te,map:I}),new window.naver.maps.Circle({map:I,center:te,radius:500,fillColor:"#FFA500",fillOpacity:.15,strokeColor:"#FFA500",strokeWeight:2})})}},100)}}catch(v){console.error("Sales mode search error:",v),alert("   .  .")}finally{A0(!1)}}},$k=o=>sd.filter(u=>u.managerId===o).reduce((u,m)=>u+m.amount,0),Wk=()=>{const o=Object.entries(wm).filter(([m,f])=>f).map(([m])=>m);if(o.length===0)return alert("  ");const u={id:Date.now(),managerId:n.managerId,managerName:n.name,items:o,timestamp:new Date().toLocaleString("ko-KR"),status:"pending"};yv(u),Nm({:!1,:!1,:!1,:!1}),zc(null),alert(" .")},zk=o=>{const u=rv.find(m=>m.id===o);u&&yv({...u,status:"confirmed"})},Bk=(o,u,m)=>{const f=String(m).replace(/^0+/,"")||"0",x=ye.find(v=>v.id===o);x&&qm({...x,promo:{...x.promo,[u]:Number(f)||0}})},ir=Gm.trim()?ce.filter(o=>hD(o.name,Gm)):ce,Ln=(n==null?void 0:n.role)==="super",Ml=rv.filter(o=>o.status==="pending"),Vk=()=>ye,Hk=o=>{if(!o)return"";const u=new Date(o),f=new Date-u,x=Math.floor(f/6e4),v=Math.floor(f/36e5),_=Math.floor(f/864e5);return x<1?" ":x<60?`${x} `:v<24?`${v} `:_<7?`${_} `:u.toLocaleDateString("ko-KR")};if(!t){const o={transition:"opacity 1.5s ease-in-out, transform 1.5s ease-in-out",willChange:"opacity, transform"};return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 login-gradient-bg overflow-hidden",children:r.jsxs("div",{className:"w-full max-w-md relative",style:{minHeight:"500px"},children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...o,opacity:k==="quote"?1:0,transform:k==="quote"?"translateY(0)":"translateY(-30px)",pointerEvents:k==="quote"?"auto":"none"},children:r.jsxs("p",{className:"text-slate-300 text-sm sm:text-base font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto text-center",style:{wordBreak:"keep-all"},children:['"',y,'"']})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...o,opacity:k==="logo"?1:0,transform:k==="logo"?"scale(1)":k==="quote"?"scale(0.9)":"scale(1.05)",pointerEvents:k==="logo"?"auto":"none"},children:r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-40 h-40 sm:w-56 sm:h-56 mx-auto mb-4 object-contain"}),r.jsx("p",{className:"text-slate-200 text-base sm:text-lg tracking-widest font-semibold",children:" "})]})}),r.jsxs("div",{className:"absolute inset-0",style:{...o,opacity:k==="form"?1:0,transform:k==="form"?"translateY(0)":"translateY(50px)",pointerEvents:k==="form"?"auto":"none"},children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-28 h-28 sm:w-40 sm:h-40 mx-auto mb-3 object-contain"}),r.jsx("p",{className:"text-slate-200 text-sm sm:text-base tracking-widest font-semibold",children:" "})]}),r.jsx("div",{className:"text-center mb-5 px-4",children:r.jsxs("p",{className:"text-slate-300 text-xs sm:text-sm font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto",style:{wordBreak:"keep-all"},children:['"',y,'"']})}),r.jsxs("div",{className:"bg-slate-900/80 rounded-xl p-4 sm:p-6 shadow-xl border border-slate-700",children:[r.jsx("input",{type:"text",placeholder:"",value:i,onChange:u=>a(u.target.value),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),r.jsx("input",{type:"password",placeholder:"",value:l,onChange:u=>c(u.target.value),onKeyPress:u=>u.key==="Enter"&&Uv(),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),r.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm mb-4 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:u=>h(u.target.checked),className:"w-4 h-4 rounded accent-primary-500"}),"  "]}),r.jsx("button",{type:"button",onClick:Uv,className:"w-full p-3 bg-[#1e3a5f] hover:bg-[#264a73] text-white rounded-lg font-semibold transition-all text-sm",children:""})]})]})]})})}const Gk=[{key:"sales",icon:"",label:""},{key:"report",icon:"",label:""},{key:"calendar",icon:"",label:""},{key:"route",icon:"",label:""},{key:"map",icon:"",label:""},{key:"managers",icon:"",label:""},{key:"companies",icon:"",label:""},{key:"realtors",icon:"",label:""},{key:"customers",icon:"",label:""},...Ln?[]:[{key:"requests",icon:"",label:""}],{key:"settings",icon:"",label:""}];return r.jsxs("div",{className:`min-h-screen pb-6 ${rS==="dark"?"bg-black":"bg-slate-50"}`,children:[r.jsxs("div",{className:"bg-slate-800 border-b border-slate-600 px-4 py-3 flex justify-between items-center sticky top-0 z-50 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-8 h-8 object-contain"}),r.jsx("span",{className:"font-semibold text-slate-200 text-sm tracking-wide",children:"BEANCRAFT"})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ln&&Ml.length>0&&r.jsx("span",{className:"bg-rose-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:Ml.length}),r.jsx("span",{className:"text-sm text-slate-200 bg-slate-700 px-2 py-1 rounded-lg font-medium",children:((Vv=ye.find(o=>o.id===(n==null?void 0:n.managerId)))==null?void 0:Vv.name)||(n==null?void 0:n.name)}),r.jsx("button",{type:"button",onClick:Ok,className:"text-slate-200 hover:text-rose-500 text-sm font-medium transition-colors",children:""})]})]}),r.jsx("div",{className:"bg-slate-800 border-b border-slate-600 tabs-container scrollbar-hide",children:r.jsx("div",{className:"flex justify-start sm:justify-center min-w-max px-2",children:Gk.map(o=>r.jsx("button",{onClick:()=>oi(o.key),className:`tab-btn ${w===o.key?"active":""}`,children:o.label},o.key))})}),em&&r.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-lg",children:""})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",em.count,""]}),r.jsx("p",{className:"text-white/80 text-xs",children:em.preview})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{oi("calendar"),Mc(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:" "}),r.jsx("button",{onClick:()=>Mc(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),U0&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-lg",children:""})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-bold text-sm",children:["  ",U0.count,""]}),r.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{oi("calendar"),Ji(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),r.jsx("button",{onClick:()=>Ji(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),od&&r.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-pink-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-lg",children:""})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",od.count,""]}),r.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{od.companies[0],alert(`[  ]

${od.companies.map((o,u)=>`${u+1}. ${o.name}
   : ${o.address||""}
   : ${o.issue}`).join(`

`)}

     .`)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),r.jsx("button",{onClick:()=>Tm(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),r.jsxs("div",{className:"p-3 sm:p-4 max-w-6xl mx-auto",children:[w==="report"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsx("div",{className:"flex gap-2",children:Ln?r.jsxs("select",{className:"select-premium text-sm py-2",value:D||"all",onChange:o=>K(o.target.value==="all"?null:o.target.value),children:[r.jsx("option",{value:"all",children:" "}),ye.filter(o=>o.role!=="super").map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>K(n==null?void 0:n.id),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${!D||D===(n==null?void 0:n.id)?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),r.jsx("button",{onClick:()=>K("all"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${D==="all"?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "})]})})]}),r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800 rounded-xl w-fit",children:[r.jsx("button",{onClick:()=>J("basic"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${Y==="basic"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:" "}),r.jsx("button",{onClick:()=>{var o;if(J("ai"),!Lc){gl(null);const u=new Date,m=u.getMonth(),f=u.getFullYear(),x=D==="all"||!D?null:Number(D),v=x?ce.filter(j=>j.managerId===x):ce,N=Be.filter(j=>{const A=new Date(j.date);return A.getMonth()===m&&A.getFullYear()===f&&(!x||j.managerId===x)}).reduce((j,A)=>{var R;return j+(((R=A.stops)==null?void 0:R.length)||0)},0);am({managerName:x?((o=ye.find(j=>j.id===x))==null?void 0:o.name)||"":" ",thisVisits:N,visitChange:0,newCompanies:ce.filter(j=>j.createdAt&&new Date(j.createdAt).getMonth()===m&&(!x||j.managerId===x)).length,consults:nd.filter(j=>j.status==="completed"&&j.createdAt&&new Date(j.createdAt).getMonth()===m).length,positiveRate:Math.round(v.filter(j=>j.reaction==="positive").length/Math.max(v.length,1)*100),positive:v.filter(j=>j.reaction==="positive").length,special:v.filter(j=>j.reaction==="special").length,neutral:v.filter(j=>j.reaction==="neutral").length,missed:v.filter(j=>j.reaction==="missed").length})}},className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${Y==="ai"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:"AI "}),r.jsx("button",{onClick:()=>J("region"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${Y==="region"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:" "})]})]}),Y==="basic"&&(()=>{const o=new Date,u=o.getMonth(),m=o.getFullYear(),f=u===0?11:u-1,x=u===0?m-1:m,v=D==="all"||!D?null:Number(D),_=Be.filter(G=>{const ae=new Date(G.date),Ee=ae.getMonth()===u&&ae.getFullYear()===m,je=!v||G.managerId===v;return Ee&&je}),N=ce.filter(G=>{if(!G.createdAt||G.isReregistered)return!1;const ae=new Date(G.createdAt),Ee=ae.getMonth()===u&&ae.getFullYear()===m,je=!v||G.managerId===v;return Ee&&je}),j=Be.filter(G=>{const ae=new Date(G.date),Ee=ae.getMonth()===f&&ae.getFullYear()===x,je=!v||G.managerId===v;return Ee&&je}),A=ce.filter(G=>{if(!G.createdAt||G.isReregistered)return!1;const ae=new Date(G.createdAt),Ee=ae.getMonth()===f&&ae.getFullYear()===x,je=!v||G.managerId===v;return Ee&&je}),R=_.reduce((G,ae)=>{var Ee;return G+(((Ee=ae.stops)==null?void 0:Ee.length)||0)},0),P=j.reduce((G,ae)=>{var Ee;return G+(((Ee=ae.stops)==null?void 0:Ee.length)||0)},0),O=N.length,V=A.length,te=v?ce.filter(G=>G.managerId===v):ce,I=te.filter(G=>G.reaction==="positive"||G.reaction==="special").length,se=te.length>0?Math.round(I/te.length*100):0,$=Math.max(0,se-Math.floor(Math.random()*10)+5),H=_.reduce((G,ae)=>{var Ee,je;return G+(((je=(Ee=ae.stops)==null?void 0:Ee.filter(st=>st.visited))==null?void 0:je.length)||0)},0),q=j.reduce((G,ae)=>{var Ee,je;return G+(((je=(Ee=ae.stops)==null?void 0:Ee.filter(st=>st.visited))==null?void 0:je.length)||0)},0),z=(G,ae)=>ae===0?G>0?100:0:Math.round((G-ae)/ae*100),E=z(R,P),M=z(O,V),de=z(H,q),fe=se-$,ar=(()=>{var st;const G=v?((st=ye.find(ss=>ss.id===v))==null?void 0:st.name)||"":" ";let ae="",Ee="",je="";return ae=`${G} :    ${R},   ${E>=0?"+":""}${E}%`,je=`  ${O} |   ${H} |   ${se}%`,E>=0?Ee="     .":Ee="   .",{comment:ae,suggestion:Ee,analysis:je}})(),da=G=>{const ae=new Date(m,u-G,1),Ee=ae.getMonth(),je=ae.getFullYear();return Be.filter(st=>{const ss=new Date(st.date),pt=ss.getMonth()===Ee&&ss.getFullYear()===je,Se=!v||st.managerId===v;return pt&&Se}).reduce((st,ss)=>{var pt;return st+(((pt=ss.stops)==null?void 0:pt.length)||0)},0)},ua=["1","2","3","4","5","6","7","8","9","10","11","12"],di=[{month:ua[(u-2+12)%12],visits:da(2)},{month:ua[(u-1+12)%12],visits:da(1)},{month:ua[u],visits:da(0)}],Dl=Math.max(...di.map(G=>G.visits),1),ui=ye.filter(G=>G.role!=="super").map(G=>{const Ee=_.filter(pt=>pt.managerId===G.id).reduce((pt,Se)=>{var hi;return pt+(((hi=Se.stops)==null?void 0:hi.length)||0)},0),je=ce.filter(pt=>pt.managerId===G.id),st=je.filter(pt=>pt.reaction==="positive"||pt.reaction==="special").length,ss=je.length>0?Math.round(st/je.length*100):0;return{...G,visits:Ee,positiveRate:ss,newCompanies:N.filter(pt=>pt.managerId===G.id).length}}).sort((G,ae)=>ae.visits-G.visits);return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:""}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[R,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),r.jsxs("div",{className:`text-xs mt-1 ${E>=0?"text-emerald-400":"text-rose-400"}`,children:[E>=0?"":""," ",Math.abs(E),"%"]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[O,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),r.jsxs("div",{className:`text-xs mt-1 ${M>=0?"text-emerald-400":"text-rose-400"}`,children:[M>=0?"":""," ",Math.abs(M),"%"]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[H,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),r.jsxs("div",{className:`text-xs mt-1 ${de>=0?"text-emerald-400":"text-rose-400"}`,children:[de>=0?"":""," ",Math.abs(de),"%"]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[se,r.jsx("span",{className:"text-sm text-slate-500 ml-1",children:"%"})]}),r.jsxs("div",{className:`text-xs mt-1 ${fe>=0?"text-emerald-400":"text-rose-400"}`,children:[fe>=0?"":""," ",Math.abs(fe),"%p"]})]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),r.jsx("div",{className:"flex items-end gap-4 h-32",children:di.map((G,ae)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[G.visits,""]}),r.jsx("div",{className:"w-full rounded-t transition-all duration-500 bg-slate-600",style:{height:`${Math.max(G.visits/Dl*100,8)}%`,background:ae===di.length-1?"#475569":"#334155"}}),r.jsx("div",{className:"text-xs text-slate-400 mt-2",children:G.month})]},ae))})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),r.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"positive",label:"",count:te.filter(G=>G.reaction==="positive").length},{key:"special",label:"",count:te.filter(G=>G.reaction==="special").length},{key:"neutral",label:"",count:te.filter(G=>G.reaction==="neutral").length},{key:"missed",label:"",count:te.filter(G=>G.reaction==="missed").length}].map(G=>r.jsxs("div",{className:"text-center p-3 rounded-xl border border-slate-600",children:[r.jsx("div",{className:"text-xl font-bold text-slate-100",children:G.count}),r.jsx("div",{className:"text-xs text-slate-500",children:G.label})]},G.key))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-bold text-slate-100",children:"AI "}),r.jsx("button",{onClick:()=>{var pt;gl(null);const G=new Date,ae=G.getMonth(),Ee=G.getFullYear(),je=D==="all"||!D?null:Number(D),st=je?ce.filter(Se=>Se.managerId===je):ce,ss=Be.filter(Se=>{const hi=new Date(Se.date);return hi.getMonth()===ae&&hi.getFullYear()===Ee&&(!je||Se.managerId===je)});am({managerName:je?((pt=ye.find(Se=>Se.id===je))==null?void 0:pt.name)||"":" ",thisVisits:ss.reduce((Se,hi)=>{var vy;return Se+(((vy=hi.stops)==null?void 0:vy.length)||0)},0),visitChange:0,newCompanies:ce.filter(Se=>Se.createdAt&&new Date(Se.createdAt).getMonth()===ae&&(!je||Se.managerId===je)).length,consults:nd.filter(Se=>Se.status==="completed"&&Se.createdAt&&new Date(Se.createdAt).getMonth()===ae).length,positiveRate:Math.round(st.filter(Se=>Se.reaction==="positive").length/Math.max(st.length,1)*100),positive:st.filter(Se=>Se.reaction==="positive").length,special:st.filter(Se=>Se.reaction==="special").length,neutral:st.filter(Se=>Se.reaction==="neutral").length,missed:st.filter(Se=>Se.reaction==="missed").length})},disabled:Lc,className:"text-xs px-2 py-1 rounded-full border border-slate-600 text-slate-400 hover:border-slate-500 disabled:opacity-50",children:" "})]}),Lc?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-2",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),r.jsx("span",{className:"text-slate-400 text-sm",children:"AI  ..."}),ht&&r.jsx("span",{className:"text-yellow-400 text-xs",children:ht})]}):ht&&!Kt?r.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[r.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"  "}),r.jsx("p",{className:"text-slate-300 text-sm",children:ht}),r.jsx("button",{onClick:()=>tt(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:""})]}):Kt?r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("p",{className:"text-slate-300",children:Kt.comment}),Kt.analysis&&r.jsx("p",{className:"text-slate-400 text-xs",children:Kt.analysis}),r.jsx("div",{className:"pt-2 border-t border-slate-700",children:r.jsx("p",{className:"text-slate-400 text-xs",children:Kt.suggestion})}),ze&&r.jsxs("p",{className:"text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[" : ",ze.toLocaleString("ko-KR")]})]}):r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("p",{className:"text-slate-300",children:ar.comment}),ar.analysis&&r.jsx("p",{className:"text-slate-400 text-xs",children:ar.analysis}),r.jsx("div",{className:"pt-2 border-t border-slate-700",children:r.jsx("p",{className:"text-slate-400 text-xs",children:ar.suggestion})})]})]}),Ln&&(!D||D==="all")&&ui.length>0&&r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-200 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:ui.slice(0,5).map((G,ae)=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:ae<3?["","",""][ae]:`${ae+1}`}),r.jsx("span",{className:"text-slate-200 text-sm",children:G.name})]}),r.jsxs("span",{className:"text-slate-400 text-sm",children:[G.visits,""]})]},G.id))})]})]})]})})(),Y==="ai"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-4 border border-brand-purple/30 bg-brand-purple/5",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-lg",children:""})," AI  ",r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:"NEW"})]}),r.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"   AI   ."}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{type:"text",value:ys,onChange:o=>Kr(o.target.value),onKeyPress:o=>o.key==="Enter"&&Fc(ys),placeholder:":  , , , ...",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-brand-purple"}),r.jsx("button",{onClick:()=>Fc(ys),disabled:he||!ys.trim(),className:"px-5 py-3 bg-brand-purple text-white rounded-lg font-bold hover:bg-brand-purple/80 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:he?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"})," "]}):""})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:["","",""," "," ",""].map(o=>r.jsx("button",{onClick:()=>{Kr(o),Fc(o)},disabled:he,className:"px-3 py-1.5 rounded-full bg-slate-700 text-slate-300 text-xs hover:bg-slate-600 transition-all disabled:opacity-50",children:o},o))}),he&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),r.jsxs("span",{className:"text-slate-400 text-sm",children:['"',ys,'"  ...']})]}),ht&&!he&&r.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 mb-3",children:r.jsx("p",{className:"text-red-400 text-sm",children:ht})}),B&&!he&&r.jsxs("div",{className:"space-y-3 mt-4 pt-4 border-t border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-bold text-slate-100 flex items-center gap-2",children:[r.jsxs("span",{className:"text-brand-purple",children:['"',B.keyword,'"']}),"  "]}),r.jsx("span",{className:"text-xs text-slate-500",children:(Hv=B.searchedAt)==null?void 0:Hv.toLocaleString("ko-KR")})]}),(B.relatedCompaniesCount>0||B.relatedRealtorsCount>0)&&r.jsxs("div",{className:"flex gap-3 text-xs",children:[B.relatedCompaniesCount>0&&r.jsxs("span",{className:"px-2 py-1 rounded bg-emerald-500/20 text-emerald-400",children:["  ",B.relatedCompaniesCount,""]}),B.relatedRealtorsCount>0&&r.jsxs("span",{className:"px-2 py-1 rounded bg-blue-500/20 text-blue-400",children:["  ",B.relatedRealtorsCount,""]}),B.relatedIssuesCount>0&&r.jsxs("span",{className:"px-2 py-1 rounded bg-yellow-500/20 text-yellow-400",children:["  ",B.relatedIssuesCount,""]})]}),r.jsx("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:B.summary})}),((Gv=B.insights)==null?void 0:Gv.length)>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("ul",{className:"space-y-1",children:B.insights.map((o,u)=>r.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400",children:""}),o]},u))})]}),((Kv=B.salesTips)==null?void 0:Kv.length)>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"   "}),r.jsx("ul",{className:"space-y-1",children:B.salesTips.map((o,u)=>r.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[r.jsxs("span",{className:"text-emerald-400",children:[u+1,"."]}),o]},u))})]}),((qv=B.actionItems)==null?void 0:qv.length)>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-brand-purple/30",children:[r.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"   "}),r.jsx("ul",{className:"space-y-1",children:B.actionItems.map((o,u)=>r.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[r.jsx("span",{className:"text-brand-purple",children:""}),o]},u))})]}),((Yv=B.relatedTopics)==null?void 0:Yv.length)>0&&r.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:B.relatedTopics.map((o,u)=>r.jsx("button",{onClick:()=>{Kr(o),Fc(o)},className:"px-3 py-1.5 rounded-full bg-slate-700 text-slate-300 text-xs hover:bg-slate-600 transition-all",children:o},u))})]})]})]}),(()=>{var se;const o=D==="all"||!D?null:Number(D),u=o?ce.filter($=>$.managerId===o):ce,m=o?((se=ye.find($=>$.id===o))==null?void 0:se.name)||"":" ",f=u.filter($=>$.reaction==="positive"),x=u.filter($=>$.reaction==="special"),v=u.filter($=>$.reaction==="neutral"),_=u.filter($=>$.reaction==="missed"),N=u.map($=>$.memo||"").filter($=>$.length>0),j=["","","","","","","",""],A=["","","","","","",""];let R=0,P=0;N.forEach($=>{j.some(H=>$.includes(H))&&R++,A.some(H=>$.includes(H))&&P++});const V=(()=>{const $=u.length;if($===0)return{main:"   .   .",suggestion:"    .",analysis:"",encouragement:""};const H=Math.round((f.length+x.length)/$*100),q=Math.round(v.length/$*100),z=Math.round(_.length/$*100);let E="",M="",de="",fe="";return E=`${m} :  ${$}    ${f.length}(${H}%),  ${x.length},  ${v.length}(${q}%),  ${_.length}(${z}%)`,de=`+: ${f.length+x.length} | : ${v.length} | : ${_.length}`,H>=50?(M="     .",fe="   ."):H>=30?(M="     .",fe=" ."):H>=10?(M="    .",fe=" ."):(M="   .",fe="  ."),z>30&&(M+=`  ${z}%    .`),x.length>0&&(M+=`  ${x.length}   .`),{main:E,suggestion:M,analysis:de,encouragement:fe}})(),I=(()=>{const $={:{cafeCount:2596,startupTrend:"+12%",avgRent:" 10~15",competition:" ( 15+)",targetCustomer:"30~40   ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" 2,596  .   14.1%( 10.0% ).    ",smalltalkTip:"  2,596  .  14.1%  ,   52.6% 3  .     .",brokerMent:",   2,596  .  14%           .",customerMent:",   2,596,  14.1%  .        .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:2135,startupTrend:"+18%",avgRent:" 8~12",competition:"",targetCustomer:"20~30 MZ  ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" 2,135  2.   18% .      2~3",smalltalkTip:"  2,135  2.   18%       2~3.    .",brokerMent:",               .     .",customerMent:",       2~3.          .",sourceUrl:"https://eventmoa.kr/2024%EB%85%84-%EC%84%9C%EC%9A%B8-%EC%B9%B4%ED%8E%98-%EC%8B%9C%EC%9E%A5-%ED%98%84%ED%99%A9/",sourceName:"2024     ( 2,135)"},:{cafeCount:1850,startupTrend:"+8%",avgRent:" 12~18",competition:"",targetCustomer:"30~50   ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"   12~18   . /      ",smalltalkTip:"   12~18   . /     1.5  .",brokerMent:",    1.5  .              .",customerMent:",    1.5  .     ,  ,  .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:1720,startupTrend:"+15%",avgRent:" 8~12",competition:"",targetCustomer:"30~40  ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"  .    40% . /   ",smalltalkTip:"       40% .     2        .",brokerMent:",        .             .",customerMent:",        40% . /       .",sourceUrl:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",sourceName:"IN:     "},:{cafeCount:1450,startupTrend:"+22%",avgRent:" 6~10",competition:"",targetCustomer:"20~40 ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"  22%  .   .   1~2  ",smalltalkTip:"   22%  .      1~2 .  6     .",brokerMent:",      1~2 .              .",customerMent:",   .    ,   ,   .     .",sourceUrl:"https://www.kgnews.co.kr/news/article.html?no=822924",sourceName:":    "}," ":{cafeCount:1200,startupTrend:"+10%",avgRent:" 6~9",competition:"",targetCustomer:"30~50 ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"IT .      .  2~5 ",smalltalkTip:" IT   .      ,  2~5 . / .",brokerMent:",  IT    .              .",customerMent:",  IT  .        .",sourceUrl:"https://blog.opensurvey.co.kr/trendreport/cafe-2024/",sourceName:":    2024"}," ":{cafeCount:850,startupTrend:"+25%",avgRent:" 4~7",competition:"",targetCustomer:"20~30  ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" 12 , 2025     ",smalltalkTip:"  12  .     50% ( 4~7)   .        .",brokerMent:",   12     .             .",customerMent:",   12      .   ,   ,   .    .",sourceUrl:"https://www.bizhankook.com/bk/article/29822",sourceName:":    "}," ":{cafeCount:980,startupTrend:"+20%",avgRent:" 5~8",competition:"",targetCustomer:" + ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" (7~8)    3.     2~3 ",smalltalkTip:"  (7~8)   3.    2~3  .  6    .",brokerMent:",   /   3.              .",customerMent:",   (7~8)   3.  6    .",sourceUrl:"https://gyver.co.kr/cafe-startup-market-analysis/",sourceName:" : 2025   "}," ":{cafeCount:620,startupTrend:"+15%",avgRent:" 3~5",competition:"",targetCustomer:" + ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"  3~5   70% .   (12~2, 6~8)  50% ",smalltalkTip:"   3~5   70% .    (12~2, 6~8)  50% .",brokerMent:",      50% .              .",customerMent:",    (12~2, 6~8)  50% .      .",sourceUrl:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",sourceName:"KB:   "}},H=Object.keys($).map(M=>{const de=$[M],fe=de.teamPositive*10+de.teamTotal*2,ca=parseInt(de.startupTrend)||0;return{region:M,...de,score:fe+ca,category:M.includes("")&&!M.includes("")?"":M.includes("")?"":""}}).sort((M,de)=>de.score-M.score),q=pe%H.length,z=H[q],E=[];return z.teamPositive>0&&E.push(`   ${z.teamPositive}`),parseInt(z.startupTrend)>=15&&E.push(`   ${z.startupTrend} `),z.competition===""&&E.push("  "),{...z,aiReason:E.length>0?E:["   "],totalCount:H.length,currentIndex:q+1}})();return r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-4 border border-slate-700/30",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-xl"}),"     "]}),r.jsx("div",{className:"bg-transparent rounded-xl p-4 mb-4 border border-slate-700/50",children:r.jsxs("div",{className:"flex items-center justify-center gap-8",children:[r.jsxs("div",{className:"relative w-32 h-32",children:[r.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:(()=>{const $=Math.max(u.length,1),H=[{value:f.length,color:"#10b981"},{value:x.length,color:"#f43f5e"},{value:v.length,color:"#f97316"},{value:_.length,color:"#eab308"}];let q=0;return H.map((z,E)=>{const M=z.value/$*100,de=`${M} ${100-M}`,fe=-q;return q+=M,r.jsx("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",strokeWidth:"3.5",stroke:z.color,strokeDasharray:de,strokeDashoffset:fe},E)})})()}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:u.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",f.length," (",Math.round(f.length/Math.max(u.length,1)*100),"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",x.length," (",Math.round(x.length/Math.max(u.length,1)*100),"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",v.length," (",Math.round(v.length/Math.max(u.length,1)*100),"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),r.jsxs("span",{className:"text-xs text-slate-300",children:[" ",_.length," (",Math.round(_.length/Math.max(u.length,1)*100),"%)"]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:f.length}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg border border-rose-500/30 bg-rose-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-rose-400",children:x.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg border border-orange-500/30 bg-orange-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-400",children:v.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400",children:_.length}),r.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),r.jsx("div",{className:"space-y-3",children:Lc?r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[r.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),r.jsx("span",{className:"text-slate-400 text-sm",children:"AI  ..."}),ht&&r.jsx("span",{className:"text-yellow-400 text-xs",children:ht})]}):ht&&!Kt?r.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[r.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"  "}),r.jsx("p",{className:"text-slate-300 text-sm",children:ht}),r.jsx("button",{onClick:()=>tt(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:""})]}):Kt?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:Kt.comment})}),Kt.analysis&&r.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[r.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"AI "}),r.jsx("p",{className:"text-sm text-slate-300",children:Kt.analysis})]}),r.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[r.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:"AI  "}),r.jsx("p",{className:"text-sm text-slate-300",children:Kt.suggestion})]}),Kt.encouragement&&r.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:Kt.encouragement})}),ze&&r.jsxs("p",{className:"text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[" : ",ze.toLocaleString("ko-KR")]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:V.main})}),V.analysis&&r.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[r.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:V.analysis})]}),r.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[r.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:""}),r.jsx("p",{className:"text-sm text-slate-300",children:V.suggestion})]}),r.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:V.encouragement})})]})})]}),N.length>0&&r.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl"}),"   (",N.length,")"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-500/10",children:[r.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-400",children:R}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-slate-700/50",children:[r.jsx("div",{className:"text-lg sm:text-xl font-bold text-slate-400",children:P}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("div",{className:"space-y-2",children:(()=>{const $=u.filter(z=>z.reaction==="positive"),H=u.filter(z=>z.reaction==="negative"),q=u.filter(z=>!z.reaction||z.reaction==="neutral");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-emerald-400",children:" "}),r.jsxs("span",{className:"text-slate-300",children:[$.length," "]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-rose-400",children:" "}),r.jsxs("span",{className:"text-slate-300",children:[H.length," "]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-slate-400",children:""}),r.jsxs("span",{className:"text-slate-300",children:[q.length," "]})]})]})})()})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"  "}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold min-w-[60px]",children:""}),r.jsx("span",{className:"text-slate-300",children:'    ("  .  OOO.")'})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 font-bold min-w-[60px]",children:"1"}),r.jsx("span",{className:"text-slate-300",children:"    (   ,   )"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-yellow-400 font-bold min-w-[60px]",children:"1"}),r.jsx("span",{className:"text-slate-300",children:'     ("      ?")'})]})]})]}),R>0&&r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"    "}),r.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"     .   :"}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:" 1        "}),r.jsx("li",{children:" 2    "}),r.jsx("li",{children:"     "})]})]}),I&&r.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"    "}),r.jsx("p",{className:"text-sm text-slate-300",children:I.issue||"   ."}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"   1    ."})]})]})]}),r.jsxs("div",{className:"card p-4 border border-slate-700 bg-transparent",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-xl"})," AI  ",r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-medium ml-2",children:" "}),r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-700 text-slate-400 text-xs font-normal ml-1",children:"2024 "})]}),r.jsxs("div",{className:"flex gap-1 p-1 bg-slate-800 rounded-lg",children:[r.jsx("button",{onClick:()=>Jn("single"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${vs==="single"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""}),r.jsx("button",{onClick:()=>Jn("list"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${vs==="list"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"  (: , , )",value:Ki,onChange:$=>Cc($.target.value),className:"input-premium flex-1 text-sm"}),r.jsx("button",{onClick:()=>{if(!Ki.trim())return;const H=["","","","",""," "," "," "," "].findIndex(q=>q.includes(Ki.trim()));H>=0?(Ut(H),Jn("single"),Cc("")):alert("   .")},className:"btn-premium bg-brand-purple text-white px-4",children:""})]})}),vs==="single"?r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"border border-slate-700/30 rounded-xl p-4 bg-transparent",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-brand-purple/20 text-brand-purple",children:I.category}),r.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:I.region})]}),r.jsxs("span",{className:"text-xs text-slate-500",children:[I.currentIndex,"/",I.totalCount]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-slate-700/30 mb-3",children:[r.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"AI    "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:I.aiReason&&I.aiReason.map(($,H)=>r.jsx("span",{className:"px-2 py-1 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:$},H))})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[I.cafeCount||"-",""]}),r.jsx("div",{className:"text-xs text-slate-400",children:"  "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsx("div",{className:"text-lg font-bold text-emerald-400",children:I.startupTrend||"-"}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsx("div",{className:"text-lg font-bold text-yellow-400",children:I.avgRent||"-"}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[r.jsx("div",{className:"text-lg font-bold text-orange-400",children:I.competition||"-"}),r.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),(I.teamTotal>0||I.teamPositive>0)&&r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 mb-3 cursor-pointer hover:bg-emerald-500/20 transition-all",onClick:()=>qh(I.region),children:[r.jsxs("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:["   ",r.jsx("span",{className:"text-slate-500",children:"(  )"})]}),r.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:I.teamTotal||0}),r.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-400",children:I.teamPositive||0}),r.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),I.teamTotal>0&&r.jsxs("div",{className:"text-center",children:[r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-brand-purple",children:[Math.round(I.teamPositive/I.teamTotal*100)||0,"%"]}),r.jsx("span",{className:"text-xs text-slate-400 block",children:""})]})]})]})]}),I.issue&&r.jsxs("div",{className:"p-4 rounded-xl border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),r.jsx("p",{className:"text-sm text-slate-200",children:I.issue})]}),I.targetCustomer&&r.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/30 bg-blue-500/5",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-200",children:I.targetCustomer})]}),I.brokerMent&&r.jsxs("div",{className:"p-4 rounded-xl border border-emerald-500/30 bg-emerald-500/5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{onClick:$=>{const H=$.currentTarget;navigator.clipboard.writeText((Xi==null?void 0:Xi.brokerMent)||I.brokerMent),H.innerText="",H.classList.add("text-emerald-400"),setTimeout(()=>{H.innerText="",H.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-200 leading-relaxed",children:['"',(Xi==null?void 0:Xi.brokerMent)||I.brokerMent,'"']}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"    .   ."})]}),I.sourceUrl&&r.jsxs("a",{href:I.sourceUrl,target:"_blank",rel:"noopener",className:"flex items-center justify-between p-3 rounded-xl border border-slate-700/30 hover:bg-brand-purple/10 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-brand-purple"}),r.jsxs("span",{className:"text-sm text-brand-purple font-medium",children:[": ",I.sourceName||""]})]}),r.jsx("span",{className:"text-slate-500",children:""})]}),r.jsx("button",{onClick:()=>Ut($=>$+1),className:"w-full py-3 rounded-xl bg-brand-purple/20 hover:bg-brand-purple/30 border border-slate-600 text-brand-purple font-medium transition-all",children:"    "})]}):r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:["","","","",""," "," "," "," "].map(($,H)=>{const q=$.includes("")&&!$.includes(""),z=$.includes(""),E=q?"":z?"":"";return r.jsx("div",{onClick:()=>{Ut(H),Jn("single")},className:"p-3 rounded-lg border border-slate-700/30 hover:border-slate-600 bg-transparent cursor-pointer transition-all",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-brand-purple/20 text-brand-purple",children:E}),r.jsx("span",{className:"text-sm font-medium text-slate-200",children:$})]}),r.jsx("span",{className:"text-slate-500",children:""})]})},H)})})]}),r.jsxs("div",{className:"card p-4 border-l-4 border-yellow-500",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl"}),"   (",Z.length,")"]}),Z.length===0?r.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-500",children:[r.jsx("p",{className:"mb-2",children:"   ."}),r.jsx("p",{className:"text-xs",children:"      ."})]}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Z.slice(0,10).map(($,H)=>r.jsxs("div",{className:"p-3 rounded-lg bg-transparent hover:bg-slate-700/50 transition-all",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-400",children:$.||$.region||""}),r.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-600 text-slate-300",children:$.||$.type||""})]}),r.jsx("p",{className:"text-sm text-slate-200 font-medium",children:$.||$.title}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[$.||$.source,"  ",$.||$.date]})]},$.id||H))})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-4 text-lg",children:[" ",r.jsx("span",{className:"text-xs text-slate-500 ml-2 font-normal",children:"   "})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-rose-400",children:"  14.1% ( )"}),r.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"  52.6% 3  "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'" "   . "       " .'})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-orange-400",children:"   2 "}),r.jsx("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:" 3,200+,  2,500+   "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'"   ,   15~50 5  900.   0."'})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-blue-400",children:"   "}),r.jsx("a",{href:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"KB:   +    "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'"   ,  ,   .       ."'})]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-400",children:"    1 "}),r.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),r.jsx("p",{className:"text-xs text-slate-500",children:", ,      "}),r.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'"   ,            ."'})]})]})]}),r.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),r.jsx("p",{className:"text-sm text-slate-300",children:'  " "   .  "  " .      .'})]})]}),j0&&(()=>{const $=j0,H=ce.filter(z=>(z.address||"").includes($)),q=Sc?H.filter(z=>(z.name||"").toLowerCase().includes(Sc.toLowerCase())||(z.address||"").toLowerCase().includes(Sc.toLowerCase())):H;return r.jsx("div",{className:"modal-overlay",onClick:()=>{qh(null),Yh("")},children:r.jsxs("div",{className:"modal-content max-w-lg",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-100",children:[$,"   (",H.length,")"]}),r.jsx("button",{type:"button",onClick:()=>{qh(null),Yh("")},className:"text-slate-400 hover:text-white text-xl",children:""})]}),r.jsx("input",{type:"text",placeholder:"/ ",value:Sc,onChange:z=>Yh(z.target.value),className:"input-premium w-full mb-4"}),r.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:q.length===0?r.jsx("p",{className:"text-center text-slate-500 py-4",children:"   ."}):q.map(z=>{const E=gt[z.reaction]||gt.neutral;return r.jsxs("div",{className:"p-3 rounded-lg border border-slate-700 bg-slate-800/50",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:z.name}),r.jsx("p",{className:"text-xs text-slate-400",children:z.address})]}),r.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:E.bg+"30",color:E.bg},children:E.label})]}),z.memo&&r.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[": ",z.memo]})]},z.id)})})]})})})(),Ct&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>Yr(null),children:r.jsxs("div",{className:"bg-slate-800 rounded-2xl max-w-[95vw] sm:max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-slate-600",onClick:$=>$.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-slate-800 p-4 border-b border-slate-600 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-bold text-lg text-white",children:[Ct==="specialty"&&"   ",Ct==="lowcost"&&"   ",Ct==="differentiation"&&"  ",Ct==="delivery"&&"/  "]}),r.jsx("button",{type:"button",onClick:()=>Yr(null),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),r.jsxs("div",{className:"p-4 space-y-3 sm:space-y-4",children:[Ct==="specialty"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:" ?"}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:" SCA()  80    "}),r.jsx("li",{children:" , ,    "}),r.jsx("li",{children:"      (  5,000~8,000)"})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:""}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"       "}),r.jsx("li",{children:"  ,     "}),r.jsx("li",{children:"  ,      "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),r.jsx("p",{className:"text-xs text-slate-400",children:"  ,     :"}),r.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[r.jsx("li",{children:" (aT)   "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"    "})]})]})]}),Ct==="lowcost"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"  1,500~2,000  "}),r.jsx("li",{children:"     "}),r.jsx("li",{children:"  : , ,  "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-rose-400 font-semibold mb-2",children:""}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"       "}),r.jsx("li",{children:" ,    "}),r.jsx("li",{children:"    "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[r.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),r.jsx("p",{className:"text-xs text-slate-400",children:" ,     :"}),r.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[r.jsx("li",{children:"   (franchise.ftc.go.kr)"}),r.jsx("li",{children:"    "})]})]})]}),Ct==="differentiation"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-emerald-400 font-semibold mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"    (, )"}),r.jsx("li",{children:"   (, )"}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:" "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:" SNS  (,  )"}),r.jsx("li",{children:"   (, )"}),r.jsx("li",{children:"  "})]})]})]}),Ct==="delivery"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"/"}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:" : , ,  "}),r.jsx("li",{children:"      "}),r.jsx("li",{children:"     "})]})]}),r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[r.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:"  "}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[r.jsx("li",{children:"     (   )"}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   vs   "})]})]})]})]})]})})]})})(),r.jsxs("div",{className:"card p-4 border-2 border-rose-500/30",children:[r.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[r.jsx("span",{className:"text-xl"}),"    (  )"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{onClick:()=>tm(_s==="closure"?null:"closure"),className:"p-4 rounded-xl border border-rose-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-rose-400 font-bold",children:"  "}),r.jsx("span",{className:"text-2xl font-black text-rose-400 ml-3",children:"14.1%"})]}),r.jsx("span",{className:"text-slate-500 text-lg",children:_s==="closure"?"":""})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (2018 ,  10.0% )"}),r.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"   3     "'})]}),_s==="closure"&&r.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     ?      .       .      ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",     ?  ',r.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),"    .       . ",r.jsx("span",{className:"text-emerald-400 font-semibold",children:"   "}),'  ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:" "}),r.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText("  5    (/ ), /   ,      "),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:["  ",r.jsx("span",{className:"text-blue-400 font-semibold",children:"5   "})," (/ ), /   ,      "]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/30",children:[r.jsx("p",{className:"text-xs text-purple-400 font-semibold mb-2",children:"  TOP 3 ( )"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"1:  "}),r.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"2:   "}),r.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"3:  "})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"  :   +  "})]}),r.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:":   14%,   "})]}),r.jsxs("div",{onClick:()=>tm(_s==="survival"?null:"survival"),className:"p-4 rounded-xl border border-blue-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-blue-400 font-bold",children:"  "}),r.jsx("span",{className:"text-lg font-bold text-blue-400 ml-2",children:" 1,050"}),r.jsx("span",{className:"text-slate-500 mx-2",children:"(10  1 )"})]}),r.jsx("span",{className:"text-slate-500 text-lg",children:_s==="survival"?"":""})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (   3,475 1/3)"}),r.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"     "'})]}),_s==="survival"&&r.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     1,050.  87.  .     ,       ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',r.jsx("span",{className:"text-emerald-400 font-semibold",children:" 1,050"}),".  87.  .   ",r.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),'  ,       ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     1,050.   3,475 1/3.     .     ,  ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',r.jsx("span",{className:"text-blue-400 font-semibold",children:" 1,050"}),".   3,475 1/3.     .    ",r.jsx("span",{className:"text-blue-400 font-semibold",children:" , "}),' ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:[r.jsx("p",{className:"text-xs text-cyan-400 font-semibold mb-2",children:"   "}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[r.jsx("span",{children:"  500m   "}),r.jsx("span",{children:"  "}),r.jsx("span",{children:"   "}),r.jsx("span",{children:"   "})]})]}),r.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:"IN:      "})]}),r.jsxs("div",{onClick:()=>tm(_s==="royalty"?null:"royalty"),className:"p-4 rounded-xl border border-yellow-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-yellow-400 font-bold",children:"  "}),r.jsx("span",{className:"text-2xl font-black text-yellow-400 ml-3",children:"6,900~1.3"})]}),r.jsx("span",{className:"text-slate-500 text-lg",children:_s==="royalty"?"":""})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    (/ )"}),r.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"    "'})]}),_s==="royalty"&&r.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",    . 1 15 ,   .      .         ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",    . ',r.jsx("span",{className:"text-emerald-400 font-semibold",children:"1 15 ,  "}),' .      .         ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),r.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",   6,900~1.3.    .        ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),r.jsxs("p",{className:"text-sm text-slate-200",children:['",   ',r.jsx("span",{className:"text-blue-400 font-semibold",children:"6,900~1.3"}),'.    .        ."']})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[r.jsx("span",{children:"  : 6,900"}),r.jsx("span",{children:"  :  15"}),r.jsx("span",{children:"  : 1.3"}),r.jsx("span",{children:"  :  25"})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" , ,   / :   "})]})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:" vs   "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-600",children:[r.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),r.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),r.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),r.jsxs("tbody",{className:"text-slate-300",children:[r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400 (15)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"2~5 ( )"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:""})]})]})]})}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"~   "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  150 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"6,900~1"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 300 +  150 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"5,500~8,000"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  200 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"6,000~9,000"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-orange-400 font-medium",children:""}),r.jsx("span",{className:"text-xs text-slate-500",children:" 1,000 +  300 + /"})]}),r.jsx("span",{className:"text-slate-300 font-bold",children:"8,000~1.3"})]})]}),r.jsx("a",{href:"https://franchise.ftc.go.kr/mnu/00013/program/userRqst/list.do",target:"_blank",rel:"noopener",className:"flex items-center justify-center gap-2 mt-3 p-3 rounded-lg border border-brand-purple/50 bg-brand-purple/10 hover:bg-brand-purple/20 transition-all",children:r.jsx("span",{className:"text-sm text-brand-purple font-medium",children:"     "})}),r.jsx("p",{className:"text-xs text-slate-500 mt-3 text-center",children:"*    , ,    ."})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl"}),"    ",r.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full",children:""})]})}),r.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"     AI      ."}),r.jsxs("div",{className:"p-4 rounded-xl bg-transparent border border-slate-700 mb-4",children:[r.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"    "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:nm,onChange:o=>$0(o.target.value),className:"w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm",children:[r.jsx("option",{value:"",children:" ?"}),r.jsx("option",{value:"broker",children:"  "}),r.jsx("option",{value:"broker-followup",children:" "}),r.jsx("option",{value:"franchise",children:"   "})]}),r.jsx("textarea",{value:sm,onChange:o=>W0(o.target.value),placeholder:`    .

:     .   .`,className:"w-full px-3 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm resize-none h-24"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>rm("success"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Dc==="success"?"bg-emerald-500 text-white":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30"}`,children:"  "}),r.jsx("button",{onClick:()=>rm("fail"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Dc==="fail"?"bg-rose-500 text-white":"bg-rose-500/20 text-rose-400 border border-rose-500/30 hover:bg-rose-500/30"}`,children:" "})]}),r.jsx("button",{type:"button",onClick:()=>{if(!nm||!sm||!Dc){alert(", ,   .");return}const o={id:Date.now(),situation:nm,memo:sm,result:Dc,timestamp:new Date().toISOString(),managerId:n==null?void 0:n.managerId,managerName:(n==null?void 0:n.name)||""};re.ref(`teamFeedbacks/${o.id}`).set(o),$0(""),W0(""),rm(null),alert(" !")},className:"w-full px-4 py-3 rounded-lg bg-brand-purple text-white font-semibold hover:bg-brand-purple/80 transition-all",children:" "})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-300 font-semibold",children:"   ( 7)"}),pl&&pl.length>0?pl.slice(0,5).map((o,u)=>r.jsx("div",{className:`p-3 rounded-lg ${o.result==="success"?"bg-emerald-500/10 border border-emerald-500/30":"bg-rose-500/10 border border-rose-500/30"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs font-semibold ${o.result==="success"?"text-emerald-400":"text-rose-400"}`,children:o.result==="success"?"  ":"  "}),r.jsx("p",{className:"text-sm text-slate-200 mt-1",children:o.situation||" "}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:o.memo||" "})]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${o.result==="success"?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:o.result==="success"?"":""})]})},u)):r.jsxs("div",{className:"p-4 rounded-lg border border-slate-700 bg-slate-800/30 text-center",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:"   ."}),r.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"   ."})]}),pl&&pl.length>=3&&r.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),r.jsx("p",{className:"text-sm text-slate-300",children:"    ..."}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" 5   AI  ."})]})]})]})]})]}),Y==="region"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:Qr,onChange:o=>R0(o.target.value),placeholder:"   (:  )",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-brand-purple",onKeyPress:o=>o.key==="Enter"&&wd()}),r.jsx("button",{onClick:()=>wd(),disabled:Jr||!Qr.trim(),className:"px-6 py-3 bg-brand-purple text-white rounded-lg font-medium hover:bg-brand-purple/80 disabled:opacity-50 disabled:cursor-not-allowed",children:Jr?"...":""})]})}),qe&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:""}),r.jsx("div",{id:"report-region-map",className:"w-full h-[300px] rounded-lg bg-slate-700"}),r.jsx("p",{className:"text-sm text-slate-400 mt-2",children:" 500m "})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-100",children:((Qv=qe.overview)==null?void 0:Qv.population)||"-"}),r.jsx("p",{className:"text-sm text-slate-400",children:" ()"})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-100",children:((Jv=qe.overview)==null?void 0:Jv.households)||"-"}),r.jsx("p",{className:"text-sm text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-100",children:((Xv=qe.overview)==null?void 0:Xv.stores)||"-"}),r.jsx("p",{className:"text-sm text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-100",children:((Zv=qe.overview)==null?void 0:Zv.avgRent)||"-"}),r.jsx("p",{className:"text-sm text-slate-400",children:" "})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:((ey=qe.consumers)==null?void 0:ey.map((o,u)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-200",children:o.label}),r.jsxs("span",{className:"text-brand-purple font-bold",children:[o.percent,"%"]})]},u)))||r.jsx("p",{className:"text-slate-400",children:" "})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:((ty=qe.franchises)==null?void 0:ty.map((o,u)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-200",children:o.name}),r.jsxs("span",{className:"text-slate-300",children:[o.count,""]})]},u)))||r.jsx("p",{className:"text-slate-400",children:" "})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:((ny=qe.development)==null?void 0:ny.map((o,u)=>r.jsx("div",{className:"p-2 bg-slate-700/50 rounded-lg",children:r.jsx("p",{className:"text-slate-200",children:o})},u)))||r.jsx("p",{className:"text-slate-400",children:" "})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:((sy=qe.risks)==null?void 0:sy.map((o,u)=>r.jsx("div",{className:"p-2 bg-red-500/10 border border-red-500/30 rounded-lg",children:r.jsx("p",{className:"text-red-400",children:o})},u)))||r.jsx("p",{className:"text-slate-400",children:" "})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:""}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"seats",label:" ",unit:"",info:"   "},{key:"price",label:"",unit:"",info:"1   "},{key:"turnover",label:"",unit:"",info:"    ",step:.1},{key:"occupancy",label:"",unit:"%",info:"    "},{key:"rent",label:"",unit:"",info:"  ( )"},{key:"labor",label:"",unit:"",info:"  "},{key:"materialRate",label:"",unit:"%",info:"   "},{key:"otherCost",label:"",unit:"",info:",  "}].map(o=>r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-xs text-slate-400",children:o.label}),r.jsx("button",{onClick:()=>D0(Ac===o.key?null:o.key),className:"w-4 h-4 rounded-full bg-slate-600 text-slate-400 text-xs",children:"i"})]}),Ac===o.key&&r.jsx("div",{className:"absolute z-10 left-0 top-8 bg-slate-900 text-slate-200 text-xs p-2 rounded-lg shadow-lg max-w-[200px] border border-slate-600",children:o.info}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"number",step:o.step||1,value:we[o.key],onChange:u=>L0({...we,[o.key]:Number(u.target.value)}),className:"w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 text-right"}),r.jsx("span",{className:"text-xs text-slate-500 w-8",children:o.unit})]})]},o.key))})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:"  "}),(()=>{const u=we.seats*we.price*we.turnover*(we.occupancy/100)*30,m=(we.rent+we.labor+we.otherCost)*1e4+u*(we.materialRate/100),f=u-m;return r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsxs("p",{className:"text-lg font-bold text-slate-100",children:[Math.round(u/1e4).toLocaleString(),""]}),r.jsx("p",{className:"text-sm text-slate-400",children:"  "})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsxs("p",{className:`text-lg font-bold ${f>=0?"text-emerald-400":"text-red-400"}`,children:[Math.round(f/1e4).toLocaleString(),""]}),r.jsx("p",{className:"text-sm text-slate-400",children:"  "})]})]})})()]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:""}),(()=>{const o=(we.rent+we.labor+we.otherCost)*1e4,u=we.price,m=we.materialRate/100,f=Math.ceil(o/(u*(1-m))),x=Math.ceil(f/(we.seats*we.turnover*(we.occupancy/100)));return r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsxs("p",{className:"text-lg font-bold text-amber-400",children:[f.toLocaleString(),""]}),r.jsx("p",{className:"text-sm text-slate-400",children:"  "})]}),r.jsxs("div",{className:"text-center p-3 bg-slate-700/50 rounded-lg",children:[r.jsxs("p",{className:"text-lg font-bold text-amber-400",children:[x,""]}),r.jsx("p",{className:"text-sm text-slate-400",children:" "})]})]})})()]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:"  "}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-600",children:[r.jsx("th",{className:"py-2 text-left text-slate-400",children:""}),r.jsx("th",{className:"text-right text-slate-400",children:""}),r.jsx("th",{className:"text-right text-brand-purple",children:""})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b border-slate-700",children:[r.jsx("td",{className:"py-2 text-slate-300",children:" "}),r.jsx("td",{className:"text-right text-slate-200",children:"5,000~8,000"}),r.jsx("td",{className:"text-right text-brand-purple font-medium",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-slate-700",children:[r.jsx("td",{className:"py-2 text-slate-300",children:" "}),r.jsx("td",{className:"text-right text-slate-200",children:" 3~5%"}),r.jsx("td",{className:"text-right text-brand-purple font-medium",children:"0"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-slate-300",children:" "}),r.jsx("td",{className:"text-right text-slate-200",children:""}),r.jsx("td",{className:"text-right text-brand-purple font-medium",children:" "})]})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:"  "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between p-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-300",children:""}),r.jsx("span",{className:"text-slate-100",children:"3,000~5,000"})]}),r.jsxs("div",{className:"flex justify-between p-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-300",children:"/"}),r.jsx("span",{className:"text-slate-100",children:"1,500~2,500"})]}),r.jsxs("div",{className:"flex justify-between p-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-300",children:""}),r.jsx("span",{className:"text-slate-100",children:"3,000~5,000"})]}),r.jsxs("div",{className:"flex justify-between p-2 bg-brand-purple/20 rounded-lg border border-brand-purple/30",children:[r.jsx("span",{className:"text-brand-purple font-medium",children:" "}),r.jsx("span",{className:"text-brand-purple font-bold",children:"1,000"})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3",children:"AI "}),r.jsx("p",{className:"text-slate-300 leading-relaxed",children:qe.insight||"   AI  ."})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{onClick:()=>Oc(!0),className:"px-6 py-3 bg-slate-700 text-slate-300 rounded-lg font-medium hover:bg-slate-600 transition-all",children:" "})})]}),!qe&&!Jr&&r.jsx("div",{className:"text-center py-20",children:r.jsx("p",{className:"text-slate-400",children:"     "})}),Jr&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-brand-purple border-t-transparent rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-slate-400",children:"  ..."})]})]})]}),w==="calendar"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>lv(new Date(nr.getFullYear(),nr.getMonth()-1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""}),r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[nr.getFullYear()," ",nr.getMonth()+1,""]}),r.jsx("button",{onClick:()=>lv(new Date(nr.getFullYear(),nr.getMonth()+1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""})]}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 mb-2",children:["","","","","","",""].map((o,u)=>r.jsx("div",{className:`text-center text-sm font-bold py-2 ${u===0?"text-rose-600":u===6?"text-primary-600":"text-slate-200"}`,children:o},o))}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1",children:(()=>{const o=nr.getFullYear(),u=nr.getMonth(),m=new Date(o,u,1).getDay(),f=new Date(o,u+1,0).getDate(),x=cr(),v=[];for(let _=0;_<m;_++)v.push(r.jsx("div",{className:"h-24 sm:h-28"},`empty-${_}`));for(let _=1;_<=f;_++){const N=`${o}-${String(u+1).padStart(2,"0")}-${String(_).padStart(2,"0")}`,j=Be.filter(V=>V.date===N),A=$t.filter(V=>V.date===N),R=[...j.map(V=>({...V,itemType:"route"})),...A.map(V=>({...V,itemType:"event"}))];R.sort((V,te)=>(V.time||"00:00").localeCompare(te.time||"00:00"));const P=N===x,O=new Date(o,u,_).getDay();v.push(r.jsxs("div",{className:`h-24 sm:h-28 p-1 border rounded-lg overflow-hidden cursor-pointer transition-all hover:shadow-md ${P?"bg-slate-700 border-primary-300":"border-slate-600 hover:border-primary-300"}`,onClick:()=>{km(N),Cs({title:"",time:"09:00",memo:""}),sa(null),ni(!0)},children:[r.jsx("div",{className:`text-sm font-bold mb-1 ${O===0?"text-rose-600":O===6?"text-primary-600":"text-slate-200"}`,children:_}),r.jsxs("div",{className:"space-y-0.5 overflow-y-auto max-h-14",children:[R.slice(0,3).map((V,te)=>{var I,se,$,H;if(V.itemType==="route"){const q=ye.find(z=>z.id===V.managerId);return r.jsxs("div",{onClick:z=>{z.stopPropagation(),js(V)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight",style:{background:(q==null?void 0:q.color)||"#888"},title:`${(I=V.time)==null?void 0:I.slice(0,5)} ${V.name}`,children:[(se=V.time)==null?void 0:se.slice(0,5)," ",V.name]},`r-${V.id}`)}else{const q=ye.find(E=>E.id===V.managerId),z=V.managerId&&q?q.color:"#6b7280";return r.jsxs("div",{onClick:E=>{E.stopPropagation(),kl(V)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight cursor-pointer hover:opacity-80",style:{background:z},title:`${($=V.time)==null?void 0:$.slice(0,5)} ${V.title}`,children:[(H=V.time)==null?void 0:H.slice(0,5)," ",V.title]},`e-${V.id}`)}}),R.length>3&&r.jsxs("div",{className:"text-xs text-slate-200",children:["+",R.length-3,""]})]})]},_))}return v})()})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("p",{className:"font-bold text-slate-200 mb-3",children:"  "}),(()=>{const o=new Date,u=new Date(o);u.setDate(o.getDate()-o.getDay());const m=new Date(u);m.setDate(u.getDate()+6);const f=Be.filter(_=>{const N=new Date(_.date);return N>=u&&N<=m}).map(_=>({..._,itemType:"route"})),x=$t.filter(_=>{const N=new Date(_.date);return N>=u&&N<=m}).map(_=>({..._,itemType:"event"})),v=[...f,...x].sort((_,N)=>{const j=new Date(_.date+" "+(_.time||"00:00")),A=new Date(N.date+" "+(N.time||"00:00"));return j-A});return v.length===0?r.jsx("p",{className:"text-center text-slate-200 py-4",children:"   "}):r.jsx("div",{className:"space-y-2",children:v.map(_=>{var N;if(_.itemType==="route"){const j=ye.find(R=>R.id===_.managerId),A=_.status==="completed";return r.jsxs("div",{onClick:()=>js(_),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md ${A?"bg-emerald-900/30":"bg-slate-700"}`,children:[r.jsxs("div",{className:"text-center min-w-[40px]",children:[r.jsx("p",{className:"text-xs text-slate-200",children:new Date(_.date).toLocaleDateString("ko-KR",{weekday:"short"})}),r.jsx("p",{className:"font-bold text-slate-100",children:_.date.slice(8)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:_.name}),r.jsxs("p",{className:"text-xs text-slate-200",children:[_.time||"","  ",((N=_.stops)==null?void 0:N.length)||0,""]})]}),j&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white",style:{background:j.color},children:j.name})]},`r-${_.id}`)}else return r.jsxs("div",{onClick:()=>{km(_.date),Cs({title:_.title,time:_.time,memo:_.memo||""}),sa(_.id),ni(!0)},className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md bg-purple-50",children:[r.jsxs("div",{className:"text-center min-w-[40px]",children:[r.jsx("p",{className:"text-xs text-slate-200",children:new Date(_.date).toLocaleDateString("ko-KR",{weekday:"short"})}),r.jsx("p",{className:"font-bold text-slate-100",children:_.date.slice(8)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:_.title}),r.jsxs("p",{className:"text-xs text-slate-200 break-words",children:[_.time||""," ",_.memo?` ${_.memo}`:""]})]}),r.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white bg-purple-500",children:""})]},`e-${_.id}`)})})})()]})]}),w==="route"&&r.jsx("div",{children:r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("p",{className:"text-sm text-slate-200 font-bold",children:ti?"  ":" "}),ti&&r.jsx("span",{className:"text-xs text-primary-600 bg-slate-700 px-2 py-1 rounded",children:" "})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3",children:[r.jsx("input",{type:"text",placeholder:" (:  )",value:jl,onChange:o=>Cl(o.target.value),className:"input-premium text-sm col-span-2"}),r.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("routeDateInput")).showPicker)==null?void 0:u.call(o)},children:r.jsx("input",{id:"routeDateInput",type:"date",value:rd,onChange:o=>ea(o.target.value),className:"input-premium text-sm w-full cursor-pointer"})}),r.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("routeTimeInput")).showPicker)==null?void 0:u.call(o)},children:r.jsx("input",{id:"routeTimeInput",type:"time",value:id,onChange:o=>Nl(o.target.value),className:"input-premium text-sm w-full cursor-pointer"})})]}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:r.jsxs("select",{value:Sm||"",onChange:o=>tr(Number(o.target.value)||null),className:"select-premium text-sm",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]})})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("div",{className:"flex justify-between items-center mb-3",children:r.jsx("p",{className:"font-bold text-slate-200",children:" "})}),r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex gap-2 flex-1",children:[r.jsx("input",{type:"text",placeholder:", ,  ",value:ra,onChange:o=>Rm(o.target.value),onKeyPress:o=>o.key==="Enter"&&tf(),className:"input-premium text-sm",style:{flex:6}}),r.jsx("input",{type:"text",placeholder:" ()",value:Pm,onChange:o=>Am(o.target.value),onKeyPress:o=>o.key==="Enter"&&tf(),className:"input-premium text-sm",style:{flex:4}})]}),r.jsx("button",{onClick:tf,disabled:ov,className:"btn-premium bg-slate-600 text-white text-sm px-4",children:ov?"...":""})]}),Ss.length>0&&r.jsxs("div",{className:"mt-2 p-2 bg-slate-700 rounded-lg border border-primary-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-xs text-primary-600 font-bold",children:["  (",Ss.length,"/10)"]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>{Tl([]),Tv()},className:"text-xs text-rose-600",children:" "})})]}),r.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Ss.map((o,u)=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-700 rounded px-2 py-1",children:[r.jsxs("span",{className:"text-xs text-slate-200 truncate flex-1",children:[u+1,". ",o.name]}),r.jsx("button",{onClick:()=>bk(o.id),className:"ml-2 text-rose-600 hover:text-rose-600 text-xs",children:""})]},o.id))}),r.jsxs("button",{onClick:_k,className:"w-full mt-2 py-2 bg-primary-500 text-white rounded-lg text-sm font-bold",children:[Ss.length,"   "]})]}),r.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"       "})]})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("p",{className:"font-bold text-slate-200 mb-3",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("select",{value:Lm,onChange:o=>cv(o.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"",children:" "}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsx("optgroup",{label:"",children:r.jsx("option",{value:"",children:""})}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]}),r.jsxs("optgroup",{label:"",children:[r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsx("input",{type:"number",placeholder:" (: 10)",value:Rl,onChange:o=>PS(o.target.value),className:"input-premium text-sm",min:"1",max:"50"})]}),r.jsx("input",{type:"text",placeholder:" /   (: , , OO)",value:Pl,onChange:o=>{dv(o.target.value),o.target.value&&cv("")},className:"input-premium text-sm"}),r.jsx("button",{onClick:()=>{const o=Pl||Lm;if(!o)return alert("   ");if(!Rl||Rl<1)return alert("   (1~50)");const u=v=>{if(!v)return null;const _=v.split(/\s+/);for(const N of _)if((N.endsWith("")||N.endsWith("")||N.endsWith(""))&&N.length>=2&&N.length<=10)return N;return null},m=o.replace(/\(.*\)/,""),f=si.filter(v=>{if(v.regions&&v.regions[m]||u(v.address)===m)return!0;if(Pl){const N=Pl.toLowerCase(),j=(v.name||v.officeName||v.realtorName||"").toLowerCase(),A=(v.address||"").toLowerCase();if(j.includes(N)||A.includes(N))return!0}return!1}).filter(v=>!Zm(v,ce)).filter(v=>!Ce.some(_=>_.name===(v.realtorName||v.officeName||v.name))).sort((v,_)=>(_.listings||_.listingCount||1)-(v.listings||v.listingCount||1)).slice(0,Math.min(Number(Rl),200));if(f.length===0)return alert(" /    .");const x=f.map(v=>({id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:v.realtorName||v.officeName||v.name,address:v.address||"",phone:v.cellPhone||v.phone||"",lat:null,lng:null,visited:!1,listings:v.listings||v.listingCount||1}));qt(v=>[...v,...x]),dv(""),alert(""+x.length+"   !")},disabled:!Lm&&!Pl||!Rl,className:"w-full btn-premium bg-teal-900/300 text-white py-3 font-bold disabled:opacity-50",children:"  "}),r.jsx("p",{className:"text-xs text-slate-400",children:"*  ,    "})]})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-slate-200",children:["  (",Ce.length,")"]}),zm&&r.jsxs("p",{className:"text-xs text-primary-400 mt-1",children:[" ",zm.distance,"km   ",zm.duration,""]})]}),r.jsxs("div",{className:"flex gap-2",children:[Ce.length>=2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:Nk,className:"text-xs text-primary-600 font-bold",children:""}),r.jsx("button",{type:"button",onClick:jk,className:"text-xs text-primary-600 font-bold",children:" "})]}),Ce.length>0&&r.jsx("button",{type:"button",onClick:()=>{qt([]),vd()},className:"text-xs text-rose-600",children:" "})]})]}),Ce.length===0?r.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:[r.jsx("p",{className:"text-2xl mb-2"}),r.jsx("p",{className:"text-sm",children:"/ "})]}):r.jsx("div",{className:"space-y-0 max-h-48 overflow-y-auto",children:Ce.map((o,u)=>{var x;const m=ce.find(v=>{var _;return v.name===o.name||v.address&&o.address&&v.address.includes((_=o.address)==null?void 0:_.split(" ").slice(0,3).join(" "))}),f=m?ye.find(v=>v.id===m.managerId):null;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-900 rounded-lg",children:[r.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-teal-500 to-teal-600 text-white flex items-center justify-center font-bold text-xs shadow flex-shrink-0",children:u+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:o.name}),f&&r.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:f.color},children:(x=f.name)==null?void 0:x.slice(0,1)})]}),o.address&&r.jsx("p",{className:"text-xs text-slate-200 break-words",children:o.address}),o.phone&&r.jsx("p",{className:"text-xs text-navy-300",children:o.phone})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[u>0&&r.jsx("button",{type:"button",onClick:()=>Rv(u,-1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),u<Ce.length-1&&r.jsx("button",{type:"button",onClick:()=>Rv(u,1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),r.jsx("button",{type:"button",onClick:()=>wk(o.id),className:"w-6 h-6 rounded bg-rose-100 text-rose-600 text-xs",children:""})]})]}),u<Ce.length-1&&r.jsx("div",{className:"flex items-center pl-3 py-0.5",children:r.jsx("span",{className:"text-primary-600 text-sm",children:""})})]},o.id)})}),(Ce.length>0||ti)&&r.jsx("div",{className:"mt-3 pt-3 border-t border-slate-600",children:ti?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:kk,className:"flex-1 btn-premium btn-outline py-3 font-bold",children:""}),r.jsx("button",{type:"button",onClick:Lv,className:"flex-1 btn-premium btn-gold py-3 font-bold",children:" "})]}):r.jsx("button",{type:"button",onClick:Lv,className:"w-full btn-premium btn-gold py-3 font-bold",children:" "})})]}),r.jsxs("div",{className:"card overflow-hidden",children:[r.jsx("div",{className:"p-3 border-b border-slate-600",children:Ce.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>Fv(ta-1),disabled:ta<=0,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"flex gap-2 transition-transform",style:{transform:`translateX(-${ta*100}%)`},children:Ce.map((o,u)=>r.jsxs("button",{onClick:()=>Ik(o,u),className:`flex-shrink-0 w-full px-3 py-2 rounded-lg text-sm font-bold transition-all ${ta===u?"bg-slate-700 text-white":"bg-gray-100 text-slate-200"}`,children:[u+1,". ",o.name]},o.id))})}),r.jsx("button",{type:"button",onClick:()=>Fv(ta+1),disabled:ta>=Ce.length-1,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{ref:$m,className:"route-map-container"}),r.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2 z-10",children:[r.jsx("button",{onClick:vk,className:`w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all ${hd?"bg-primary-500 text-white":"bg-slate-600 text-slate-200"}`,title:hd?"GPS ":"GPS "}),hd&&md&&r.jsx("button",{onClick:yk,className:"w-10 h-10 rounded-full bg-slate-600 shadow-lg flex items-center justify-center text-primary-600",title:"  "})]})]})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("p",{className:"font-bold text-slate-200",children:" "}),Be.length>0&&r.jsx("div",{className:"flex gap-2",children:Kc?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{if(Xr.length===0)return alert("  .");confirm(`${Xr.length}  ?`)&&(Xr.forEach(o=>bv(o)),qc([]),fm(!1),alert("  ."))},className:"px-3 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:[Xr.length," "]}),r.jsx("button",{onClick:()=>{fm(!1),qc([])},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-xs font-bold",children:""})]}):r.jsx("button",{onClick:()=>fm(!0),className:"px-3 py-1 bg-rose-100 text-rose-600 rounded text-xs font-bold",children:" "})})]}),Be.length===0?r.jsx("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:r.jsx("p",{className:"text-sm",children:"  "})}):r.jsx("div",{className:"space-y-2",children:Be.sort((o,u)=>new Date(u.date)-new Date(o.date)).slice(0,50).map(o=>{const u=ye.find(_=>_.id===o.managerId),m=(o.stops||[]).filter(_=>_.visited).length,f=(o.stops||[]).length,x=o.status==="completed",v=Xr.includes(o.id);return r.jsxs("div",{className:`p-3 rounded-lg ${x?"bg-emerald-900/30":"bg-slate-700"} ${Kc&&v?"ring-2 ring-rose-400":""}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[Kc&&r.jsx("input",{type:"checkbox",checked:v,onChange:_=>{_.target.checked?qc([...Xr,o.id]):qc(Xr.filter(N=>N!==o.id))},className:"w-5 h-5 mt-1 accent-rose-500"}),r.jsx("div",{className:`w-9 h-9 rounded-lg text-white flex items-center justify-center font-bold text-sm flex-shrink-0 ${x?"bg-emerald-500":"bg-slate-700"}`,children:""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:o.name||o.date}),r.jsxs("p",{className:"text-xs text-slate-200",children:[o.date," ",o.time||"","  ",m,"/",f,""]}),u&&r.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-bold text-white",style:{background:u.color},children:u.name})]})]}),!Kc&&r.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-slate-700/30",children:[r.jsx("button",{type:"button",onClick:()=>Dv(o),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),r.jsx("button",{type:"button",onClick:()=>js(o),className:"px-3 py-1 bg-slate-700 rounded text-xs text-slate-200 border font-medium",children:""}),r.jsx("button",{onClick:()=>Ck(o),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),!x&&r.jsx("button",{onClick:()=>Sk(o),className:"px-3 py-1 bg-emerald-100 rounded text-xs text-emerald-700 font-medium",children:""}),r.jsx("button",{onClick:()=>na({type:"route",id:o.id,name:o.name||o.date}),className:"px-3 py-1 bg-rose-100 rounded text-xs text-rose-600 font-medium",children:""})]})]},o.id)})})]})]})}),w==="map"&&r.jsx("div",{children:r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsxs("div",{className:"bg-slate-900 rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"text-amber-800 font-bold text-sm mb-2",children:"  "}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[r.jsxs("span",{className:"text-slate-200",children:[" : ",r.jsx("b",{children:ce.length})]}),r.jsxs("span",{className:"text-emerald-600",children:[" : ",r.jsx("b",{children:ce.filter(o=>o.lat&&o.lng).length})]}),r.jsxs("span",{className:"text-slate-200 cursor-pointer hover:text-primary-600",onClick:()=>ce.filter(o=>!o.lat||!o.lng).length>0&&Bc(!0),children:[": ",r.jsx("b",{className:"underline",children:ce.filter(o=>!o.lat||!o.lng).length})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsxs("select",{value:ri,onChange:o=>fv(o.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsxs("select",{value:ii,onChange:o=>pv(o.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"special",children:""}),r.jsx("option",{value:"positive",children:""}),r.jsx("option",{value:"neutral",children:""}),r.jsx("option",{value:"negative",children:" "}),r.jsx("option",{value:"missed",children:""})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"/  (: , )",value:Bm,onChange:o=>US(o.target.value),onKeyPress:o=>o.key==="Enter"&&Iv(),className:"input-premium flex-1 text-sm"}),r.jsx("button",{type:"button",onClick:Iv,className:"btn-premium btn-gold text-sm"})]}),r.jsxs("div",{className:"border-t border-slate-600 mt-4 pt-4",children:[r.jsx("p",{className:"text-sm text-slate-200 mb-2 font-bold",children:"   "}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-600 special-blink"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-400"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"})," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"})," "]})]}),r.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"      "})]})]}),r.jsx("div",{className:"card overflow-hidden",children:r.jsx("div",{ref:td,className:"map-container"})})]})}),w==="managers"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),r.jsx("button",{type:"button",onClick:()=>Hc(!0),className:"btn-premium btn-navy text-sm",children:" "})]}),ye.map(o=>{const u=ce.filter(E=>E.managerId===o.id),m=$k(o.id),f=Ln||(n==null?void 0:n.managerId)===o.id,x=u.filter(E=>E.reaction==="special"),v=u.filter(E=>E.reaction==="positive"),_=u.filter(E=>E.reaction==="neutral"),N=u.filter(E=>E.reaction==="negative"),j=new Date,R=u.filter(E=>E.reaction==="positive"||E.reaction==="special").map(E=>{const M=E.lastVisitDate?new Date(E.lastVisitDate):E.createdAt?new Date(E.createdAt):null,de=M?Math.floor((j-M)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(de)?0:de,dateType:E.lastVisitDate?"":""}}).filter(E=>E.daysPassed>=7).sort((E,M)=>M.daysPassed-E.daysPassed),P=u.filter(E=>E.reaction==="missed").map(E=>{const M=E.createdAt?new Date(E.createdAt):null,de=M?Math.floor((j-M)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(de)?0:de}}).sort((E,M)=>M.daysPassed-E.daysPassed),O=cr(),V=$t.filter(E=>E.date===O&&E.managerId===o.id),te=Be.filter(E=>E.date===O&&E.managerId===o.id),I=Kf(),se=new Date(I.year,I.month,I.day-I.dayOfWeek),$=new Date(I.year,I.month,I.day+(6-I.dayOfWeek)),H=E=>{const M=E.getFullYear(),de=String(E.getMonth()+1).padStart(2,"0"),fe=String(E.getDate()).padStart(2,"0");return`${M}-${de}-${fe}`},q=$t.filter(E=>E.managerId===o.id&&E.date>=H(se)&&E.date<=H($)&&E.date!==O),z=Be.filter(E=>E.managerId===o.id&&E.date>=H(se)&&E.date<=H($)&&E.date!==O);return r.jsxs("div",{className:"card p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl text-white flex items-center justify-center font-bold text-xl shadow-lg",style:{background:`linear-gradient(135deg, ${o.color}, ${o.color}dd)`},children:o.name[0]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:o.name}),r.jsxs("p",{className:"text-sm text-slate-200",children:[" ",u.length,""]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:[m.toLocaleString(),r.jsx("span",{className:"text-sm font-normal",children:""})]}),f&&r.jsx("button",{onClick:()=>Gc({managerId:o.id,managerName:o.name,currentSales:m}),className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs font-bold hover:bg-emerald-200",children:""})]})})]}),r.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-xl p-4 mb-4",children:[r.jsx("p",{className:"font-bold text-slate-200 text-sm mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-red-200",children:[r.jsx("p",{className:"text-lg font-bold text-rose-600",children:x.length}),r.jsx("p",{className:"text-xs text-red-400",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-green-200",children:[r.jsx("p",{className:"text-lg font-bold text-emerald-600",children:v.length}),r.jsx("p",{className:"text-xs text-green-400",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-orange-500",children:_.length}),r.jsx("p",{className:"text-xs text-orange-400",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-slate-200",children:N.length}),r.jsx("p",{className:"text-xs text-slate-200",children:""})]})]})]}),(V.length>0||te.length>0)&&r.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"font-bold text-primary-600 text-sm mb-2",children:" "}),r.jsxs("div",{className:"space-y-1",children:[te.map(E=>{var M;return r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-primary-600",children:""}),r.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.name," (",((M=E.stops)==null?void 0:M.length)||0,")"]})]},E.id)}),V.map(E=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-primary-600"}),r.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.title]})]},E.id))]})]}),R.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-rose-900/30 border border-rose-200 rounded-xl p-3 mb-2",children:[r.jsxs("span",{className:"font-bold text-rose-700 text-sm",children:["  (",R.length,")"]}),r.jsx("span",{className:"text-xs text-rose-600 ml-2",children:"   7 "})]}),r.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[R.slice(0,10).map(E=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-rose-200 cursor-pointer hover:bg-rose-900/30",onClick:()=>{mt(E)},children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${E.reaction==="special"?"bg-rose-600":"bg-emerald-500"}`}),r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),r.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[r.jsxs("span",{className:"text-xs text-rose-600 font-bold",children:[E.daysPassed,""]}),r.jsxs("span",{className:"text-xs text-rose-600 ml-1",children:["(",E.dateType,")"]})]})]},E.id)),R.length>10&&r.jsxs("p",{className:"text-xs text-rose-600 text-center",children:["+",R.length-10,""]})]})]}),P.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 mb-2",children:[r.jsxs("span",{className:"font-bold text-amber-600 text-sm",children:["  (",P.length,")"]}),r.jsx("span",{className:"text-xs text-yellow-500 ml-2",children:"  "})]}),r.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[P.slice(0,10).map(E=>r.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-amber-200 cursor-pointer hover:bg-amber-900/30",onClick:()=>{mt(E)},children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 bg-yellow-500"}),r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),r.jsxs("span",{className:"text-xs text-amber-600 flex-shrink-0 ml-2",children:[E.daysPassed,""]})]},E.id)),P.length>10&&r.jsxs("p",{className:"text-xs text-yellow-400 text-center",children:["+",P.length-10,""]})]})]}),(q.length>0||z.length>0)&&r.jsxs("details",{className:"mb-4",children:[r.jsxs("summary",{className:"bg-slate-700 border border-primary-300 rounded-xl p-3 cursor-pointer",children:[r.jsxs("span",{className:"font-bold text-primary-600 text-sm",children:["    (",q.length+z.length,")"]}),r.jsx("span",{className:"text-xs text-primary-600 ml-2",children:" "})]}),r.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:[...z.map(E=>({...E,type:"route"})),...q.map(E=>({...E,type:"event"}))].sort((E,M)=>E.date.localeCompare(M.date)||(E.time||"").localeCompare(M.time||"")).map((E,M)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm bg-slate-700 p-2 rounded-lg border border-primary-200",children:[r.jsx("span",{className:"text-primary-600",children:E.type==="route"?"":""}),r.jsx("span",{className:"text-xs text-blue-400 font-bold",children:E.date.slice(5)}),r.jsxs("span",{className:"text-blue-800 truncate",children:[E.time||""," ",E.type==="route"?E.name:E.title]})]},M))})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-2",children:[r.jsx("span",{className:"font-bold text-slate-200 text-sm",children:"  "}),f&&r.jsx("button",{type:"button",onClick:()=>{zc(o),Nm({:!1,:!1,:!1,:!1})},className:"ml-3 px-3 py-1 bg-rose-500 rounded-lg font-bold text-xs text-white",children:r.jsx("span",{className:"blink-text",children:" "})})]}),r.jsx("div",{className:"bg-slate-700 rounded-xl p-4",children:r.jsx("div",{className:"grid grid-cols-4 gap-2",children:K_.map(E=>{var M,de;return r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs text-slate-200 mb-1",children:E}),f?r.jsx("input",{type:"number",value:((M=o.promo)==null?void 0:M[E])||0,onChange:fe=>Bk(o.id,E,fe.target.value),className:"w-full text-center p-2 border rounded-lg text-sm font-bold bg-white text-slate-900"}):r.jsx("p",{className:"font-bold text-slate-100",children:((de=o.promo)==null?void 0:de[E])||0})]},E)})})})]})]},o.id)})]}),w==="sales"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4 shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-10 h-10 object-contain"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-white font-bold text-lg",children:"BEANCRAFT"}),r.jsx("p",{className:"text-blue-200 text-xs",children:"   "})]})]}),r.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white text-blue-600 rounded-lg font-bold text-sm hover:bg-blue-50 transition-all flex items-center gap-2",children:"  "})]})}),(()=>{const[o,u]=b.useState(""),[m,f]=b.useState(null),[x,v]=b.useState(!1),_=j=>j?Z.find(R=>{var P,O,V;return((P=R.region)==null?void 0:P.includes(j))||((O=R.title)==null?void 0:O.includes(j))||((V=R.content)==null?void 0:V.includes(j))}):null,N=j=>{const A=si.filter(P=>{var O;return(O=P.address)==null?void 0:O.includes(j)}),R=ce.filter(P=>{var O;return(O=P.address)==null?void 0:O.includes(j)});return{realtorCount:A.length,companyCount:R.length,totalListings:A.reduce((P,O)=>P+(O.listings||0),0)}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:"  "}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:o,onChange:j=>u(j.target.value),placeholder:"  (: , , )",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500"}),r.jsx("button",{onClick:()=>{o.trim()&&(f(o.trim()),v(!0))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:""})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["","","","","","","",""].map(j=>r.jsx("button",{onClick:()=>{u(j),f(j),v(!0)},className:"px-3 py-1.5 bg-slate-700 text-slate-300 rounded-full text-sm hover:bg-slate-600 transition-all",children:j},j))})]}),x&&m&&r.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg flex items-center gap-2",children:[" ",m,"  "]}),r.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-slate-200",children:""})]}),(()=>{const j=N(m);return r.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[r.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:j.realtorCount}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:j.companyCount}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:j.totalListings.toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})})(),(()=>{const j=_(m);if(j)return r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  "}),r.jsx("p",{className:"text-slate-200 font-medium mb-1",children:j.title}),r.jsx("p",{className:"text-sm text-slate-300",children:j.content}),j.source&&r.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[": ",j.source]})]});{const R={:" 2,596  .   14.1%.   .",:",   .   .",:"//  .    .",:"IT  .    .   .",:"    .    .",:" .    .    .",:" .   . /   .",:"   2.    ."}[m]||"      .      .";return r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),r.jsx("p",{className:"text-sm text-slate-300",children:R})]})}})()]})]})})(),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"  vs   "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-600",children:[r.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),r.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),r.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),r.jsxs("tbody",{className:"text-slate-300",children:[r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:""}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"border-b border-slate-700/50",children:[r.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"1/15 "}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),r.jsxs("tr",{className:"bg-slate-700/30",children:[r.jsx("td",{className:"py-3 px-2 font-bold text-white",children:"  (5)"}),r.jsx("td",{className:"py-3 px-2 text-center text-orange-400 font-bold",children:"1,500~4,500+"}),r.jsx("td",{className:"py-3 px-2 text-center text-emerald-400 font-bold",children:"1,800+"})]})]})]})}),r.jsxs("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[r.jsx("p",{className:"text-sm text-emerald-400 font-semibold mb-1",children:"   "}),r.jsxs("p",{className:"text-sm text-slate-300",children:["/ 0 5 ",r.jsx("span",{className:"text-emerald-400 font-bold",children:" 900~3,000"})," . //   ."]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"   "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-blue-400",children:" "}),r.jsx("p",{className:"text-xs text-slate-400",children:"   "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:" /  "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-emerald-400",children:""}),r.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:"    "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 border border-yellow-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-yellow-400",children:"/"}),r.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:"   ~"}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-purple-400",children:"/"}),r.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),r.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:" //  "}),r.jsx("li",{children:"   "})]})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2 text-lg",children:"   "}),(()=>{const o={};si.forEach(m=>{const f=m.address||"";let x="";f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")?x="":f.includes("")||f.includes("")?x="":f.includes("")||f.includes("")?x="":f.includes("")||f.includes("")?x="":f.includes("")||f.includes("")?x="":f.includes("")||f.includes("")?x="":f.includes("")||f.includes("")?x="":f.includes("")&&(x=""),o[x]||(o[x]={count:0,listings:0}),o[x].count++,o[x].listings+=m.listings||0});const u=Object.entries(o).filter(([m])=>m!=="").sort((m,f)=>f[1].count-m[1].count);return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:si.length.toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-emerald-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:ce.length}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u.length}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),r.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-400",children:si.reduce((m,f)=>m+(f.listings||0),0).toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.slice(0,10).map(([m,f])=>r.jsxs("div",{className:"px-3 py-2 bg-slate-700/50 rounded-lg",children:[r.jsx("span",{className:"text-slate-200 font-medium",children:m}),r.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:[f.count,""]})]},m))})]})]})})()]}),r.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl p-6 text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" ,  "}),r.jsx("p",{className:"text-slate-300 mb-4",children:"  "}),r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:" "}),r.jsx("a",{href:"tel:1533-4875",className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-all",children:" 1533-4875"})]})]})]}),w==="realtors"&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),(()=>{const o=I=>I.listingCount?I.listingCount:I.listings?I.listings:I.articleCounts&&I.articleCounts.total?I.articleCounts.total:0,u=I=>I.name&&(I.name.includes("")||I.name.includes("")||I.name.includes(""))?I.name:I.officeName?I.officeName:I.realtorName?I.realtorName:I.name||"( )",m=I=>I.agentName||I.agent||"",f=I=>I.agentPosition||"",x=I=>{if(!I)return"";if(I.includes("T")){const $=new Date(I);if(!isNaN($.getTime()))return $.toLocaleDateString("ko-KR")}const se=I.match(/(\d{4})\.\s*(\d{1,2})\.\s*(\d{1,2})/);if(se){const[,$,H,q]=se;return`${$}. ${H}. ${q}.`}return I},v=["","","","","","","","","","","","","","","","",""],_={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},N=I=>{if(!I)return{city:"",district:""};const se=["","","","","","","","","","","","","","","","","","","","","","","","",""],$={:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","",""],:["","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["",""]},H=[{pattern:/(|)?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/(|)?/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?(|)?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/(|)?/,city:""}];let q="";for(const{pattern:M,city:de}of H)if(M.test(I)){q=de;break}let z="";const E=I.match(/([-]{1,4})(|)/);if(E){const M=E[1]+E[2];!M.includes("")&&!M.includes("")&&M.length<=5&&(z=M)}if(z===""&&q===""){for(const M of se)if(new RegExp(`${M}(?!\\S*)\\s|${M}(?!\\S*)$|\\s${M}\\s`).test(I)||I.includes(M+" ")||I.includes(M+"")){z=M+"";break}}if(q===""){const M=I.match(/([-]{2,4})(?![])/);if(M){const de=M[1];for(const[fe,ca]of Object.entries($))if(ca.includes(de)){q=fe,z===""&&(z=de+"");break}}}if(z===""){const M=I.match(/([-]{2,4})(?![])/);M&&(z=M[1]+"")}if(q===""&&z!==""&&z.endsWith("")){const M=z.replace("","");se.includes(M)&&(q="")}return{city:q,district:z}},j=si.filter(I=>{const se=u(I),$=se.includes("")||se.includes("")||se.includes(""),H=I.address&&I.address.length>5;return $||H}),A=I=>I.replace(/\s+/g,"").replace(/[^\w-]/g,"").toLowerCase(),R=new Map,P=j.filter(I=>{const se=u(I).trim(),$=A(se),{city:H,district:q}=N(I.address),z=`${$}-${H}-${q}`;if(R.has(z)){const E=R.get(z);return o(I)>o(E.data)?(j[E.index]=null,R.set(z,{data:I,index:j.indexOf(I)}),!0):!1}return R.set(z,{data:I,index:j.indexOf(I)}),!0}).filter(I=>I!==null);ce.forEach(I=>{Xm(I,P).isDuplicate||P.push({id:`company-${I.id}`,name:I.name,address:I.address,phone:I.phone,cellPhone:I.phone,listings:0,isFromCompany:!0,managerId:I.managerId,collected_at:I.createdAt,agentName:I.contact||"",memo:I.memo||"",reaction:I.reaction||"",lat:I.lat,lng:I.lng,companyId:I.id})});const O={};P.forEach(I=>{const{city:se,district:$}=N(I.address);se!==""&&(O[se]||(O[se]=new Set),$!==""&&O[se].add($))});const V=v.filter(I=>O[I]);P.reduce((I,se)=>I+o(se),0);const te=P.length>0&&P.some(I=>I.collected_at)?new Date(Math.max(...P.filter(I=>I.collected_at).map(I=>new Date(I.collected_at).getTime()))):null;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card p-3 sm:p-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-teal-600",children:AS?" ...":P.length}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),te&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-bold text-slate-300",children:te.toLocaleDateString("ko-KR")}),r.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})}),r.jsx("div",{className:"card p-3 sm:p-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[r.jsx("input",{type:"text",placeholder:"()   ...",value:Mm,onChange:I=>ES(I.target.value),className:"input-premium flex-1 min-w-[150px]"}),r.jsxs("select",{value:Dm,onChange:I=>TS(I.target.value),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),V.map(I=>r.jsx("optgroup",{label:`${_[I]||I}`,children:[...O[I]].sort().map(se=>r.jsx("option",{value:`${I}|${se}`,children:se},`${I}-${se}`))},I))]}),r.jsxs("select",{value:dd,onChange:I=>RS(I.target.value),className:"select-premium",children:[r.jsx("option",{value:"listings",children:"  "}),r.jsx("option",{value:"recent",children:"  "}),r.jsx("option",{value:"name",children:" "}),r.jsx("option",{value:"unvisited",children:" "})]})]})}),P.length===0?r.jsxs("div",{className:"card p-8 text-center text-slate-400",children:[r.jsx("p",{className:"text-4xl mb-2",children:""}),r.jsx("p",{children:"  "}),r.jsx("p",{className:"text-xs mt-2",children:"Chrome   "})]}):r.jsx("div",{className:"space-y-3",children:(()=>{let I=[...P];if(Mm){const z=Mm.trim().replace(/$/,"").toLowerCase();I=I.filter(E=>{const M=(E.address||"").toLowerCase(),de=u(E).toLowerCase(),fe=m(E).toLowerCase();return M.includes(z)||de.includes(z)||fe.includes(z)})}if(Dm){const[H,q]=Dm.split("|");I=I.filter(z=>{const{city:E,district:M}=N(z.address);return H&&q?E===H&&M===q:!1})}dd==="recent"?I.sort((H,q)=>new Date(q.collected_at||0)-new Date(H.collected_at||0)):dd==="name"?I.sort((H,q)=>u(H).localeCompare(u(q))):dd==="unvisited"?I.sort((H,q)=>{const z=Zm(H,ce)?1:0,E=Zm(q,ce)?1:0;return z-E}):I.sort((H,q)=>o(q)-o(H));const se={};I.forEach(H=>{const{city:q,district:z}=N(H.address);q!==""&&(se[q]||(se[q]={}),se[q][z]||(se[q][z]=[]),se[q][z].push(H))});const $=v.filter(H=>se[H]);return $.length===0?r.jsx("div",{className:"card p-4 text-center text-slate-400",children:"  "}):$.map(H=>{const q=se[H],z=Object.values(q).flat().length,E=Object.keys(q).sort();return r.jsxs("details",{className:"card overflow-hidden",open:$.length===1,children:[r.jsxs("summary",{className:"p-4 cursor-pointer hover:bg-slate-700 flex justify-between items-center font-bold text-slate-200 bg-slate-800",children:[r.jsxs("span",{children:[" ",_[H]||H," (",z,")"]}),r.jsxs("span",{className:"text-xs text-slate-400",children:[E.length," /"]})]}),r.jsx("div",{className:"border-t border-slate-600",children:E.map(M=>{const de=q[M];return r.jsxs("details",{className:"border-b border-slate-700",children:[r.jsx("summary",{className:"p-3 pl-6 cursor-pointer hover:bg-slate-700 flex justify-between items-center text-slate-300",children:r.jsxs("span",{className:"font-bold",children:[M," (",de.length,")"]})}),r.jsxs("div",{className:"max-h-80 overflow-y-auto bg-slate-900",children:[de.map((fe,ca)=>{const ar=u(fe),da=o(fe),ua=Xm(fe,ce),di=ua.isDuplicate||fe.isFromCompany,Dl=ua.matchedCompany,ui=fe.isFromCompany?ye.find(ae=>ae.id===fe.managerId):Dl?ye.find(ae=>ae.id===Dl.managerId):null,G=Ce.some(ae=>ae.name===ar);return r.jsxs("div",{className:`p-3 pl-8 border-b border-slate-800 cursor-pointer hover:bg-slate-800 ${G?"bg-teal-900/20":di?"bg-green-900/20":""}`,onClick:()=>yl({...fe,officeName:ar,listingCount:da,agentName:fe.isFromCompany?fe.agentName:m(fe),agentPosition:f(fe),isRegistered:di,isInRoute:G,assignedManager:ui,matchedCompany:Dl,collectedDate:fe.collected_at?x(fe.collected_at):""}),children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-bold text-slate-100 text-sm",children:ar}),r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900 text-teal-300 font-bold",children:[da,""]}),G&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-900 text-purple-300",children:""}),di&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900 text-green-300",children:""}),ui?r.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:ui.color},children:ui.name}):r.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-slate-600 text-slate-300 font-bold",children:""})]}),r.jsx("span",{className:"text-slate-500 text-sm",children:""})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:fe.address||" "})]},fe.id||ca)}),de.length>50&&r.jsxs("p",{className:"text-center text-xs text-slate-500 py-2",children:["... ",de.length-50,""]})]})]},M)})})]},H)})})()})]})})()]}),w==="companies"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-1 lg:order-2",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h3",{className:"font-bold text-slate-100",children:" "}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:xm,onChange:mk,className:"hidden"}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:q0,onChange:fk,className:"hidden"}),r.jsx("button",{onClick:()=>Wc(!G0),className:"px-3 py-1 rounded-full border border-slate-600 text-xs text-slate-300 hover:border-slate-500",children:"+  "}),G0&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50 min-w-[120px]",children:[r.jsx("button",{onClick:()=>{Wc(!1),setTimeout(()=>{var o;return(o=xm.current)==null?void 0:o.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),r.jsx("button",{onClick:()=>{Wc(!1),setTimeout(()=>{var o;return(o=q0.current)==null?void 0:o.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),r.jsx("button",{onClick:()=>{$c(!0),Wc(!1)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700",children:" "})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",placeholder:"",value:ne.name,onChange:o=>at({...ne,name:o.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:ne.contact,onChange:o=>at({...ne,contact:o.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:ne.phone,onChange:o=>at({...ne,phone:o.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:ne.address,onChange:o=>at({...ne,address:o.target.value}),className:"input-premium text-sm w-full"}),Ln?r.jsxs("select",{value:ne.managerId||"",onChange:o=>at({...ne,managerId:Number(o.target.value)||null}),className:"select-premium text-sm w-full",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}):r.jsxs("div",{className:"input-premium text-sm flex items-center text-slate-400",children:[(n==null?void 0:n.name)||""," ()"]}),r.jsx("input",{type:"text",placeholder:"",value:ne.memo,onChange:o=>at({...ne,memo:o.target.value}),className:"input-premium text-sm w-full"})]}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:Object.entries(gt).map(([o,u])=>r.jsx("button",{onClick:()=>at({...ne,reaction:o}),className:`px-2 py-1 rounded-full text-xs text-white transition-all ${ne.reaction===o?"ring-1 ring-offset-1 ring-white":"opacity-50"}`,style:{background:u.bg},children:u.label},o))}),r.jsxs("label",{className:"flex items-center gap-2 mt-3 text-xs text-slate-400 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:ne.isReregistered||!1,onChange:o=>at({...ne,isReregistered:o.target.checked}),className:"w-3 h-3 rounded"})," (  )"]}),r.jsx("button",{type:"button",onClick:zv,className:"w-full mt-3 py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})}),r.jsx("div",{className:"lg:col-span-2 lg:order-1",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("div",{className:"flex justify-between items-center mb-3",children:r.jsxs("h3",{className:"font-bold text-slate-100",children:["  (",ir.length,")"]})}),(()=>{const o={special:ir.filter(u=>u.reaction==="special").length,positive:ir.filter(u=>u.reaction==="positive").length,neutral:ir.filter(u=>u.reaction==="neutral").length,negative:ir.filter(u=>u.reaction==="negative").length};return r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-rose-400",children:o.special}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]}),r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-emerald-400",children:o.positive}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]}),r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-orange-400",children:o.neutral}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]}),r.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[r.jsx("p",{className:"text-lg font-bold text-slate-400",children:o.negative}),r.jsx("p",{className:"text-xs text-slate-500",children:""})]})]})})(),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[r.jsx("input",{type:"text",placeholder:" ",value:Gm,onChange:o=>$S(o.target.value),className:"input-premium text-sm"}),r.jsxs("select",{value:Km,onChange:o=>zS(o.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsxs("select",{value:Al,onChange:o=>WS(o.target.value),className:"select-premium text-sm",children:[r.jsx("option",{value:"all",children:" "}),Object.entries(gt).map(([o,u])=>r.jsx("option",{value:o,children:u.label},o))]})]}),ye.filter(o=>Km==="all"||o.id===Number(Km)).map(o=>{let u=ir.filter(v=>v.managerId===o.id);if(Al!=="all"&&(u=u.filter(v=>v.reaction===Al)),u.length===0)return null;const m=["special","positive","neutral","negative","missed"],f={};m.forEach(v=>{const _=u.filter(N=>N.reaction===v);_.length>0&&(f[v]=_)});const x=v=>{if(!v)return" ";const _=v.match(/(||||||||||||||||)[^\s]*\s*([^\s]+[])/);if(_)return _[2];const N=v.match(/([^\s]+[])/);return N?N[1]:""};return r.jsxs("details",{className:"mb-4",children:[r.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl cursor-pointer",style:{background:`${o.color}15`},children:[r.jsx("div",{className:"w-5 h-5 rounded-full",style:{background:o.color}}),r.jsx("span",{className:"font-bold text-slate-200 text-lg",children:o.name}),r.jsxs("span",{className:"text-sm text-slate-200",children:["(",u.length,")"]})]}),r.jsx("div",{className:"mt-2 ml-2",children:m.map(v=>{const _=f[v];if(!_)return null;const N=gt[v],j={};return _.forEach(A=>{const R=x(A.address);j[R]||(j[R]=[]),j[R].push(A)}),r.jsxs("details",{className:"mb-3",children:[r.jsxs("summary",{className:"flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer",style:{background:`${N.bg}20`},children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:N.bg}}),r.jsx("span",{className:"font-bold text-sm",style:{color:N.bg},children:N.label}),r.jsxs("span",{className:"text-xs text-slate-200",children:["(",_.length,")"]})]}),r.jsx("div",{className:"mt-2 ml-3",children:Object.entries(j).map(([A,R])=>r.jsxs("details",{className:"mb-2",children:[r.jsxs("summary",{className:"text-xs text-slate-200 font-bold px-2 py-1 cursor-pointer hover:bg-slate-700 rounded",children:[A," (",R.length,")"]}),r.jsx("div",{className:"space-y-1 mt-1 ml-2",children:R.map(P=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>mt({...P}),children:[r.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:P.name})}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),mt({...P})},className:"text-slate-200 font-bold text-xs",children:""}),r.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),Bv(P)},className:"text-rose-600 font-bold text-xs",children:""})]})]},P.id))})]},A))})]},v)})})]},o.id)}),(()=>{let o=ir.filter(u=>!u.managerId);return Al!=="all"&&(o=o.filter(u=>u.reaction===Al)),o.length===0?null:r.jsxs("details",{className:"mb-4",children:[r.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl bg-gray-100 cursor-pointer",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400"}),r.jsx("span",{className:"font-bold text-slate-200",children:""}),r.jsxs("span",{className:"text-sm text-slate-200",children:["(",o.length,")"]})]}),r.jsx("div",{className:"space-y-2 mt-2 ml-2",children:o.map(u=>{const m=gt[u.reaction]||gt.neutral;return r.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>mt({...u}),children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{background:m.bg}}),r.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:u.name})]}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs text-white font-bold",style:{background:m.bg},children:m.label}),r.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),Bv(u)},className:"text-rose-600 font-bold text-xs",children:""})]})]},u.id)})})]})})(),ir.length===0&&r.jsx("p",{className:"text-navy-300 text-center py-10",children:"  "})]})})]}),w==="customers"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2 space-y-4",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),nd.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"  "}):r.jsx("div",{className:"space-y-2",children:nd.map(o=>{var m;const u=ye.find(f=>f.id===o.managerId);return r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-600 hover:border-slate-500 cursor-pointer",onClick:()=>_n(o),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs",style:{background:(u==null?void 0:u.color)||"#666"},children:((m=u==null?void 0:u.name)==null?void 0:m[0])||"?"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-200 text-sm",children:o.name}),r.jsxs("p",{className:"text-xs text-slate-500",children:[o.phone,"  ",o.consultDate]})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.status==="completed"?"text-emerald-400":o.status==="contract"?"text-blue-400":"text-slate-400"}`,children:o.status==="completed"?"":o.status==="contract"?"":""})]},o.id)})})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:Yt.managerId||"",onChange:o=>ai({...Yt,managerId:Number(o.target.value)||null}),className:"select-premium text-sm w-full",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsx("input",{type:"text",placeholder:" *",value:Yt.name,onChange:o=>ai({...Yt,name:o.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"text",placeholder:"",value:Yt.phone,onChange:o=>ai({...Yt,phone:o.target.value}),className:"input-premium text-sm w-full"}),r.jsx("input",{type:"date",value:Yt.consultDate,onChange:o=>ai({...Yt,consultDate:o.target.value}),className:"input-premium text-sm w-full"}),r.jsx("div",{className:"flex gap-2",children:["consult","contract","completed"].map(o=>r.jsx("button",{onClick:()=>ai({...Yt,status:o}),className:`flex-1 px-2 py-2 rounded-full text-xs ${Yt.status===o?"bg-slate-600 text-white":"border border-slate-600 text-slate-400"}`,children:o==="consult"?"":o==="contract"?"":""},o))}),r.jsx("textarea",{placeholder:"",value:Yt.memo,onChange:o=>ai({...Yt,memo:o.target.value}),className:"input-premium text-sm w-full h-20 resize-none"}),r.jsx("button",{type:"button",onClick:Lk,className:"w-full py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})]})})]}),w==="settings"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:""}),r.jsxs("div",{className:"flex gap-2 p-1 rounded-full border border-slate-600 w-fit flex-wrap",children:[r.jsx("button",{type:"button",onClick:()=>Ec("theme"),className:`px-4 py-2 rounded-full text-sm transition-all ${Zs==="theme"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),r.jsx("button",{type:"button",onClick:()=>Ec("ments"),className:`px-4 py-2 rounded-full text-sm transition-all ${Zs==="ments"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),r.jsx("button",{type:"button",onClick:()=>Ec("account"),className:`px-4 py-2 rounded-full text-sm transition-all ${Zs==="account"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),Ln&&r.jsx("button",{type:"button",onClick:()=>Ec("admin"),className:`px-4 py-2 rounded-full text-sm transition-all ${Zs==="admin"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""})]}),Zs==="ments"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100",children:"  "}),r.jsx("button",{type:"button",onClick:()=>{Jh(null),qi(!0)},className:"px-3 py-1 rounded-full border border-slate-600 text-sm text-slate-300 hover:border-slate-500",children:"+  "})]}),Qh.length===0?r.jsx("p",{className:"text-center py-8 text-slate-500",children:"  "}):r.jsx("div",{className:"space-y-3",children:Qh.map(o=>r.jsxs("div",{className:"p-4 rounded-xl border border-slate-600 hover:border-slate-500",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o.type==="broker"?"text-blue-400":"text-emerald-400"}`,children:o.type==="broker"?"":""}),r.jsx("span",{className:"font-bold text-slate-100",children:o.name})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{type:"button",onClick:()=>{QC(o),Xh(o.content),Ic(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:"AI"}),r.jsx("button",{type:"button",onClick:()=>{Jh(o),Xn({name:o.name,content:o.content,type:o.type||"broker",memo:o.memo||""}),qi(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:""}),r.jsx("button",{type:"button",onClick:()=>{confirm("?")&&QS(o.id)},className:"px-2 py-1 rounded-full text-xs border border-rose-600/50 text-rose-400 hover:border-rose-500",children:""})]})]}),r.jsx("p",{className:"text-sm text-slate-300 mb-2 whitespace-pre-wrap",children:o.content}),r.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[r.jsxs("span",{children:[" ",o.useCount||0,""]}),r.jsxs("span",{children:[" ",o.useCount>0?Math.round((o.successCount||0)/o.useCount*100):0,"%"]})]})]},o.id))})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:"AI  "}),kc.length===0?r.jsx("p",{className:"text-center py-4 text-slate-500 text-sm",children:" "}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:kc.slice().reverse().slice(0,10).map(o=>r.jsxs("div",{className:"p-3 rounded-xl border border-slate-700",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"font-medium text-slate-200 text-sm",children:o.mentName}),r.jsx("span",{className:"text-xs text-slate-500",children:new Date(o.createdAt).toLocaleDateString()})]}),r.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:o.question})]},o.id))})]})})]}),Zs==="theme"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"card p-4 rounded-2xl border border-amber-500/50 bg-gradient-to-r from-amber-500/10 to-transparent",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-amber-400 text-lg",children:""}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"   "})]}),r.jsx("button",{onClick:()=>{Pc(Date.now()),fl(60),Yi(!1),E0(!0)},className:"px-6 py-3 rounded-xl bg-gradient-to-r from-amber-500 to-yellow-500 text-white font-bold hover:from-amber-600 hover:to-yellow-600 transition-all shadow-lg shadow-amber-500/25",children:""})]})}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[r.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>lm("light"),className:`p-4 rounded-xl border transition-all ${ws==="light"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[r.jsx("div",{className:"text-xl mb-1",children:""}),r.jsx("div",{className:"text-xs text-slate-300",children:""})]}),r.jsxs("button",{onClick:()=>lm("dark"),className:`p-4 rounded-xl border transition-all ${ws==="dark"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[r.jsx("div",{className:"text-xl mb-1",children:""}),r.jsx("div",{className:"text-xs text-slate-300",children:""})]}),r.jsxs("button",{onClick:()=>lm("auto"),className:`p-4 rounded-xl border transition-all ${ws==="auto"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[r.jsx("div",{className:"text-xl mb-1"}),r.jsx("div",{className:"text-xs text-slate-300",children:""})]})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-3",children:ws==="auto"?"    .":ws==="light"?"  .":"  ."})]})]}),Zs==="account"&&r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"   "}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"password",placeholder:" ",value:ts,onChange:o=>Jc(o.target.value),className:"input-premium"}),r.jsx("input",{type:"password",placeholder:" ",value:Xc,onChange:o=>Zc(o.target.value),className:"input-premium"}),r.jsx("button",{type:"button",onClick:Ln?Wv:$v,className:"btn-premium btn-gold w-full",children:" "})]}),r.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:["  4  . ",Ln?"( )":""]})]}),Zs==="admin"&&Ln&&r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-3",children:"  "}),r.jsxs("p",{className:"text-sm text-slate-400 mb-3",children:["  : ",ce.filter(o=>o.isReregistered).length,""]}),r.jsx("button",{onClick:()=>{const o=ce.filter(u=>u.isReregistered);if(o.length===0){alert("   .");return}confirm(`  ${o.length}    ?
(  ,    )`)&&(o.forEach(u=>{Rs({...u,isReregistered:!1})}),alert("   ."))},className:"btn-premium bg-rose-600 hover:bg-rose-700 text-white w-full",children:"   "}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"        ."})]}),Ml.length>0&&r.jsxs("div",{className:"card p-4 border-2 border-rose-200",children:[r.jsxs("h3",{className:"font-bold text-rose-600 text-lg mb-4",children:["  (",Ml.length,")"]}),r.jsx("div",{className:"space-y-3",children:Ml.map(o=>{var u;return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-rose-900/30 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-200",children:o.managerName}),r.jsx("p",{className:"text-sm text-slate-200",children:(u=o.items)==null?void 0:u.join(", ")})]}),r.jsx("button",{type:"button",onClick:()=>zk(o.id),className:"btn-premium btn-gold text-sm",children:""})]},o.id)})})]}),r.jsxs("div",{className:"card p-3 sm:p-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:" "}),ye.map(o=>{const u=SS[o.id],m=(u==null?void 0:u.isOnline)&&Date.now()-new Date(u.lastSeen).getTime()<12e4;return r.jsxs("div",{className:"flex items-center gap-3 mb-3 p-3 bg-slate-700 rounded-xl",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg flex-shrink-0",style:{background:o.color}}),r.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${m?"bg-emerald-500":"bg-gray-400"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("input",{type:"text",value:o.name,onChange:f=>qm({...o,name:f.target.value}),className:"input-premium w-full mb-1"}),r.jsxs("p",{className:"text-xs text-slate-200",children:[m?"":`${Hk(u==null?void 0:u.lastSeen)}`,"  ",o.username]})]}),r.jsx("input",{type:"color",value:o.color,onChange:f=>qm({...o,color:f.target.value}),className:"w-10 h-10 rounded cursor-pointer flex-shrink-0"}),r.jsx("button",{type:"button",onClick:()=>{confirm("?")&&re.ref("managers/"+o.id).remove()},className:"text-rose-600 font-bold text-sm flex-shrink-0",children:""})]},o.id)})]})]})]})]}),Ns&&r.jsx("div",{className:"modal-overlay",onClick:()=>xl(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:Y_(Ns.region)}),r.jsx("button",{type:"button",onClick:()=>xl(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("p",{className:"text-slate-200 mb-4",children:[Ns.status==="confirmed"?"":"",": ",(ry=Ns.manager)==null?void 0:ry.name]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm text-slate-200 mb-2 block",children:""}),r.jsx("input",{type:"date",value:Ns.date||"",onChange:o=>{ik(Ns.id,o.target.value),xl({...Ns,date:o.target.value})},className:"input-premium"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>xl(null),className:"btn-premium btn-outline flex-1",children:""}),sk(Ns)&&r.jsx("button",{type:"button",onClick:()=>rk(Ns.id),className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),X&&r.jsx("div",{className:"modal-overlay",onClick:()=>yl(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>yl(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[r.jsx("p",{className:"font-bold text-slate-100 text-lg mb-1",children:X.officeName}),r.jsx("p",{className:"text-sm text-slate-400",children:X.address||" "}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-100 text-teal-700 font-bold",children:[X.listingCount,""]}),X.isInRoute&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900/300 text-white",children:""}),X.isRegistered&&r.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500 text-white",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsx("p",{className:"font-bold text-slate-200",children:X.phone||"-"})]}),r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsx("p",{className:"font-bold text-slate-200",children:X.cellPhone||"-"})]}),r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:X.isFromCompany?" ":""}),r.jsx("p",{className:"font-bold text-slate-200",children:X.assignedManager?r.jsx("span",{className:"px-2 py-0.5 rounded-full text-white text-xs",style:{backgroundColor:X.assignedManager.color},children:X.assignedManager.name}):X.agentPosition||X.agentName?`${X.agentPosition} ${X.agentName}`.trim():""})]}),r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:X.isFromCompany?"":""}),r.jsx("p",{className:"font-bold text-slate-200",children:X.collectedDate||"-"})]}),X.isFromCompany&&X.agentName&&r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:" "}),r.jsx("p",{className:"font-bold text-slate-200",children:X.agentName})]}),X.isFromCompany&&X.reaction&&r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsxs("p",{className:"font-bold text-slate-200",children:[X.reaction==="negative"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-slate-600 text-slate-300",children:""}),X.reaction==="positive"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-amber-600 text-white",children:""}),X.reaction==="good"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-green-600 text-white",children:""}),X.reaction==="special"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-red-600 text-white",children:""}),X.reaction==="skip"&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-600 text-white",children:""})]})]}),X.isFromCompany&&X.memo&&r.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),r.jsx("p",{className:"text-slate-200 text-sm",children:X.memo})]})]}),X.articleCounts&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[X.articleCounts.sale>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700",children:[" ",X.articleCounts.sale]}),X.articleCounts.jeonse>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 text-green-700",children:[" ",X.articleCounts.jeonse]}),X.articleCounts.monthly>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700",children:[" ",X.articleCounts.monthly]}),X.articleCounts.short>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-100 text-purple-700",children:[" ",X.articleCounts.short]})]}),X.regions&&Object.keys(X.regions).length>0&&r.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(X.regions).sort((o,u)=>u[1]-o[1]).map(([o,u])=>r.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-slate-600 text-slate-300",children:[o,": ",u,""]},o))}),r.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-600",children:[!X.isInRoute&&r.jsx("button",{type:"button",onClick:()=>{var m,f;const o=X.address,u=(x,v)=>{qt(_=>[..._,{id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:X.officeName,address:o||"",phone:X.cellPhone||X.phone||"",lat:x,lng:v,visited:!1,listings:X.listingCount,companyId:X.companyId||null}]),yl(null),alert(" !")};X.lat&&X.lng?u(X.lat,X.lng):o&&((f=(m=window.naver)==null?void 0:m.maps)!=null&&f.Service)?window.naver.maps.Service.geocode({query:o},(x,v)=>{if(x===window.naver.maps.Service.Status.OK&&v.v2.addresses.length>0){const _=v.v2.addresses[0];u(parseFloat(_.y),parseFloat(_.x))}else u(null,null)}):u(null,null)},className:"btn-premium btn-gold text-sm flex-1",children:"+  "}),!X.isRegistered&&r.jsx("button",{type:"button",onClick:()=>{at({name:X.officeName,contact:X.agentName!==""?X.agentName:"",phone:X.cellPhone||X.phone||"",address:X.address||"",managerId:null,memo:` ${X.listingCount} | : ${X.collectedDate}`,reaction:"none"}),yl(null),S("companies")},className:"btn-premium btn-navy text-sm flex-1",children:" "})]})]})]})}),nt&&r.jsx("div",{className:"modal-overlay",onClick:()=>vl(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${(iy=gt[nt.reaction])!=null&&iy.blink?"special-blink":""}`,style:{background:((ay=gt[nt.reaction])==null?void 0:ay.bg)||"#f97316"}}),r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:nt.name})]}),r.jsx("button",{type:"button",onClick:()=>vl(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[nt.contact&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("span",{className:"font-bold text-slate-200",children:nt.contact})]}),nt.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("a",{href:`tel:${nt.phone}`,className:"font-bold text-primary-600 md:pointer-events-none md:text-slate-200",children:nt.phone})]}),nt.address&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("span",{className:"text-slate-200 text-sm",children:nt.address})]}),nt.manager&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),r.jsx("span",{className:"font-bold",style:{color:nt.manager.color},children:nt.manager.name})]}),nt.memo&&r.jsxs("div",{className:"bg-slate-700 p-3 rounded-lg",children:[r.jsx("p",{className:"text-xs text-primary-600 font-bold mb-1",children:""}),r.jsx("p",{className:"text-sm text-amber-800",children:nt.memo})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("span",{className:"text-sm text-slate-200",children:":"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs text-white font-bold ${(ly=gt[nt.reaction])!=null&&ly.blink?"special-blink":""}`,style:{background:((oy=gt[nt.reaction])==null?void 0:oy.bg)||"#f97316"},children:((cy=gt[nt.reaction])==null?void 0:cy.label)||""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{mt({...nt}),vl(null)},className:"btn-premium btn-gold flex-1",children:""}),r.jsx("button",{type:"button",onClick:()=>vl(null),className:"btn-premium btn-outline flex-1",children:""})]})]})}),cS&&r.jsx("div",{className:"modal-overlay",onClick:()=>zc(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"  "}),r.jsx("div",{className:"space-y-3 mb-4",children:K_.map(o=>r.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:wm[o],onChange:u=>Nm({...wm,[o]:u.target.checked}),className:"w-5 h-5 accent-gold-500"}),r.jsx("span",{className:"font-bold text-slate-200",children:o})]},o))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>zc(null),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{type:"button",onClick:Wk,className:"btn-premium btn-gold flex-1",children:" "})]})]})}),St&&r.jsx("div",{className:"modal-overlay",onClick:()=>mt(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>mt(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:St.name,onChange:o=>mt({...St,name:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:St.contact||"",onChange:o=>mt({...St,contact:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:St.phone||"",onChange:o=>mt({...St,phone:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:St.address||"",onChange:o=>mt({...St,address:o.target.value}),className:"input-premium"}),r.jsxs("select",{value:St.managerId||"",onChange:o=>mt({...St,managerId:Number(o.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsx("input",{type:"text",placeholder:"",value:St.memo||"",onChange:o=>mt({...St,memo:o.target.value}),className:"input-premium"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(gt).map(([o,u])=>r.jsx("button",{onClick:()=>mt({...St,reaction:o}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${St.reaction===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>mt(null),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{type:"button",onClick:Mk,className:"btn-premium btn-gold flex-1",children:""})]})]})}),ft&&r.jsx("div",{className:"modal-overlay",onClick:()=>_n(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>_n(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:ft.name,onChange:o=>_n({...ft,name:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ft.phone||"",onChange:o=>_n({...ft,phone:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"date",value:ft.consultDate||"",onChange:o=>_n({...ft,consultDate:o.target.value}),className:"input-premium"}),r.jsxs("select",{value:ft.managerId||"",onChange:o=>_n({...ft,managerId:Number(o.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-200 mb-2",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>_n({...ft,status:"consult"}),className:`px-4 py-2 rounded-full text-sm font-bold ${ft.status==="consult"||!ft.status?"bg-primary-500 text-white":"bg-slate-700 text-primary-600"}`,children:""}),r.jsx("button",{onClick:()=>_n({...ft,status:"contract"}),className:`px-4 py-2 rounded-full text-sm font-bold ${ft.status==="contract"?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600"}`,children:""})]})]}),r.jsx("textarea",{placeholder:"",value:ft.memo||"",onChange:o=>_n({...ft,memo:o.target.value}),className:"input-premium h-20"})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>_n(null),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{type:"button",onClick:Fk,className:"btn-premium btn-navy flex-1",children:""})]})]})}),bl&&r.jsx("div",{className:"modal-overlay",onClick:()=>Vc(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[bl.status==="planned"?"":"","  "]}),r.jsx("button",{type:"button",onClick:()=>Vc(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{type:"button",onClick:()=>Zi(bl.pins.map(o=>o.id)),className:"text-sm text-gold-600 font-bold",children:" "}),r.jsx("button",{type:"button",onClick:()=>Zi([]),className:"text-sm text-slate-200 font-bold",children:" "})]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:bl.pins.map(o=>r.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:Zr.includes(o.id),onChange:u=>{u.target.checked?Zi([...Zr,o.id]):Zi(Zr.filter(m=>m!==o.id))},className:"w-5 h-5 accent-gold-500"}),r.jsx("span",{className:"font-bold text-slate-200",children:Y_(o.region)})]},o.id))}),Zr.length>0&&r.jsxs("div",{className:"flex gap-2",children:[bl.status==="planned"&&r.jsx("button",{type:"button",onClick:ak,className:"btn-premium btn-gold flex-1",children:" "}),r.jsx("button",{type:"button",onClick:lk,className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),um&&r.jsx("div",{className:"modal-overlay",onClick:()=>hm(null),children:r.jsxs("div",{className:"modal-content max-w-sm p-0 overflow-hidden",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-4 sm:p-6 text-center",children:[r.jsx("div",{className:"w-14 h-14 bg-slate-800/10 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-3 border border-white/20",children:r.jsx("span",{className:"text-2xl text-emerald-400"})}),r.jsx("p",{className:"text-slate-400 text-xs tracking-widest mb-1",children:"REGISTERED"}),r.jsx("h3",{className:"font-bold text-white text-lg",children:um.companyName})]}),r.jsxs("div",{className:"p-5 bg-slate-800",children:[r.jsx("div",{className:"bg-slate-900 rounded-lg p-4 mb-4 border-l-4 border-teal-500",children:r.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:um.quote})}),r.jsx("button",{type:"button",onClick:()=>hm(null),className:"w-full py-3 bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 text-white rounded-lg font-medium transition-all border border-slate-500",children:""})]})]})}),H0&&r.jsx("div",{className:"modal-overlay",onClick:()=>dm(!1),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),r.jsx("button",{type:"button",onClick:()=>dm(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"password",placeholder:" ",value:_l,onChange:o=>ev(o.target.value),className:"input-premium"}),r.jsx("input",{type:"password",placeholder:" ",value:tv,onChange:o=>nv(o.target.value),className:"input-premium"}),r.jsx("button",{type:"button",onClick:Wv,className:"btn-premium btn-gold w-full",children:""})]})]})}),aS&&r.jsx("div",{className:"modal-overlay",onClick:()=>V0(!1),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>V0(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"bg-emerald-900/30 p-4 rounded-xl",children:[r.jsx("p",{className:"text-emerald-700 font-bold mb-2",children:"  "}),r.jsx("p",{className:"text-emerald-600 text-sm",children:"      ."}),r.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"PC, ,    ."})]})]})}),mm&&r.jsx("div",{className:"modal-overlay",onClick:()=>Gc(null),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Gc(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("p",{className:"text-sm text-slate-200 mb-4",children:[mm.managerName," "]}),r.jsx("div",{className:"space-y-3",children:(()=>{const o=sd.filter(u=>u.managerId===mm.managerId);return o.length===0?r.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."}):r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:o.map(u=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-slate-100",children:[Number(u.amount).toLocaleString(),""]}),r.jsx("p",{className:"text-xs text-slate-200",children:u.date})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{const m=prompt("  :",u.amount);m&&!isNaN(m)&&(vv({...u,amount:Number(m)}),alert(" ."))},className:"px-2 py-1 bg-primary-500 text-white rounded text-xs font-bold",children:""}),r.jsx("button",{onClick:()=>{confirm("  ?")&&(YS(u.id),alert(" ."))},className:"px-2 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:""})]})]},u.id))})})()}),r.jsx("button",{type:"button",onClick:()=>Gc(null),className:"btn-premium btn-outline w-full mt-4",children:""})]})}),uS&&r.jsx("div",{className:"modal-overlay",onClick:()=>Hc(!1),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Hc(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:Dn.managerId||"",onChange:o=>gd({...Dn,managerId:Number(o.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:"  *"}),Vk().map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsx("input",{type:"number",placeholder:" *",value:Dn.amount,onChange:o=>gd({...Dn,amount:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"date",value:Dn.date,onChange:o=>gd({...Dn,date:o.target.value}),className:"input-premium"}),r.jsx("button",{type:"button",onClick:Uk,className:"btn-premium btn-gold w-full",children:""})]})]})}),lS&&r.jsx("div",{className:"modal-overlay",onClick:()=>cm(!1),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>cm(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"password",placeholder:" ",value:ts,onChange:o=>Jc(o.target.value),className:"input-premium"}),r.jsx("input",{type:"password",placeholder:" ",value:Xc,onChange:o=>Zc(o.target.value),className:"input-premium"}),r.jsx("button",{type:"button",onClick:$v,className:"btn-premium btn-gold w-full",children:""})]})]})}),oS&&r.jsx("div",{className:"modal-overlay",onClick:()=>$c(!1),children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>$c(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"text-slate-200 font-bold mb-1",children:" "}),r.jsx("p",{className:"text-slate-200 text-sm",children:"////"})]}),r.jsx("textarea",{value:_m,onChange:o=>Y0(o.target.value),placeholder:"////",className:"input-premium h-32 mb-3"}),r.jsxs("select",{value:Q0||"",onChange:o=>J0(Number(o.target.value)||null),className:"select-premium mb-3",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[r.jsx("span",{className:"text-sm text-slate-200",children:" :"}),Object.entries(gt).map(([o,u])=>r.jsx("button",{onClick:()=>Z0(o),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${X0===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]}),r.jsx("button",{type:"button",onClick:Dk,className:"btn-premium btn-navy w-full",children:" "})]})}),hS&&r.jsx("div",{className:"modal-overlay",onClick:()=>Yc(!1),style:{overflow:"hidden"},children:r.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),r.jsx("button",{type:"button",onClick:()=>Yc(!1),className:"text-slate-200 text-2xl",children:""})]}),K0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-200",children:"  ..."})]}):fS?r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-200 font-bold",children:"   ( )"}),r.jsx("input",{type:"text",placeholder:"",value:ne.name,onChange:o=>at({...ne,name:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ne.contact,onChange:o=>at({...ne,contact:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ne.phone,onChange:o=>at({...ne,phone:o.target.value}),className:"input-premium"}),r.jsx("input",{type:"text",placeholder:"",value:ne.address,onChange:o=>at({...ne,address:o.target.value}),className:"input-premium"}),r.jsxs("select",{value:ne.managerId||"",onChange:o=>at({...ne,managerId:Number(o.target.value)||null}),className:"select-premium",children:[r.jsx("option",{value:"",children:" "}),ye.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(gt).map(([o,u])=>r.jsx("button",{onClick:()=>at({...ne,reaction:o}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${ne.reaction===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]}),r.jsx("input",{type:"text",placeholder:"",value:ne.memo,onChange:o=>at({...ne,memo:o.target.value}),className:"input-premium"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{var o;gm(null),at({name:"",contact:"",phone:"",address:"",managerId:(n==null?void 0:n.managerId)||null,memo:"",reaction:"neutral"}),(o=xm.current)==null||o.click()},className:"flex-1 py-3 border border-slate-600 rounded-xl font-bold text-slate-200",children:""}),r.jsx("button",{onClick:async()=>{await zv(),Yc(!1),gm(null)},className:"flex-1 btn-premium btn-gold",children:" "})]})]}):null]})}),mS&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content max-w-2xl",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:["   (",wn.length,")"]}),r.jsx("button",{type:"button",onClick:()=>pm(!1),className:"text-slate-200 text-2xl",children:""})]}),K0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-200",children:"  ..."})]}):r.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[wn.map((o,u)=>r.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 border",children:[r.jsxs("p",{className:"font-bold text-slate-200 text-sm mb-2",children:[" #",u+1]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:m=>{const f=[...wn];f[u].name=m.target.value,es(f)},className:"input-premium text-sm"}),r.jsx("input",{type:"text",placeholder:"",value:o.contact,onChange:m=>{const f=[...wn];f[u].contact=m.target.value,es(f)},className:"input-premium text-sm"}),r.jsx("input",{type:"text",placeholder:"",value:o.phone,onChange:m=>{const f=[...wn];f[u].phone=m.target.value,es(f)},className:"input-premium text-sm"}),r.jsx("input",{type:"text",placeholder:"",value:o.address,onChange:m=>{const f=[...wn];f[u].address=m.target.value,es(f)},className:"input-premium text-sm"})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[r.jsxs("select",{value:o.managerId||"",onChange:m=>{const f=[...wn];f[u].managerId=Number(m.target.value)||null,es(f)},className:"select-premium text-sm py-1",children:[r.jsx("option",{value:"",children:""}),ye.map(m=>r.jsx("option",{value:m.id,children:m.name},m.id))]}),Object.entries(gt).map(([m,f])=>r.jsx("button",{onClick:()=>{const x=[...wn];x[u].reaction=m,es(x)},className:`px-2 py-1 rounded-full text-xs text-white font-bold ${o.reaction===m?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:f.bg},children:f.label},m))]}),r.jsx("input",{type:"text",placeholder:"",value:o.memo,onChange:m=>{const f=[...wn];f[u].memo=m.target.value,es(f)},className:"input-premium text-sm mt-2"})]},u)),wn.length>0&&r.jsxs("button",{onClick:pk,className:"btn-premium btn-gold w-full",children:[wn.filter(o=>o.name).length,"  "]})]})]})}),xS&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-3xl"})}),r.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),r.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long"})," 4"]})]}),r.jsxs("div",{className:"bg-slate-700 border border-primary-300 rounded-xl p-4 mb-4",children:[r.jsxs("p",{className:"text-blue-800 font-bold text-center text-lg",children:["  ",r.jsx("br",{}),"."]}),r.jsxs("p",{className:"text-primary-600 text-sm text-center mt-2",children:["    ",r.jsx("br",{}),"  ."]})]}),r.jsx("button",{onClick:()=>bm(!1),className:"btn-premium btn-gold w-full",children:""})]})}),Il&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>Em(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),r.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[" ",r.jsxs("b",{className:"text-amber-500",children:[Il.unvisitedStops.length,""]}),"   ."]})]}),r.jsx("div",{className:"bg-slate-800 rounded-xl p-3 mb-4 max-h-40 overflow-y-auto",children:Il.unvisitedStops.map((o,u)=>r.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-slate-700 last:border-0",children:[r.jsx("span",{className:"w-6 h-6 bg-rose-500/20 text-rose-400 rounded-full flex items-center justify-center text-xs font-bold",children:u+1}),r.jsx("span",{className:"text-slate-200 text-sm",children:o.name})]},u))}),r.jsxs("p",{className:"text-xs text-slate-300 mb-4 text-center",children:["       ",r.jsx("br",{}),"    ."]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>nf(Il.route,!1),className:"flex-1 px-4 py-2 bg-slate-600 rounded-xl font-bold text-slate-200 text-sm",children:" "}),r.jsx("button",{onClick:()=>nf(Il.route,!0),className:"flex-1 px-4 py-2 bg-amber-600 rounded-xl font-bold text-white text-sm",children:" "})]})]})}),Im&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>na(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-sm",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-14 h-14 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-2xl"})}),r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[r.jsx("b",{className:"text-rose-600",children:Im.name}),"() ?"]}),r.jsx("p",{className:"text-xs text-slate-200 mt-1",children:"    ."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>na(null),className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl font-bold text-gray-700",children:""}),r.jsx("button",{onClick:()=>{const{type:o,id:u}=Im;o==="route"?bv(u):o==="company"?KS(u):o==="customer"?qS(u):o==="calendar"?(av($t.filter(m=>m.id!==u)),localStorage.setItem("bc_calendar_events",JSON.stringify($t.filter(m=>m.id!==u)))):o==="sale"&&(sv(sd.filter(m=>m.id!==u)),localStorage.setItem("bc_sales",JSON.stringify(sd.filter(m=>m.id!==u)))),na(null),alert(".")},className:"flex-1 px-4 py-2 bg-rose-500 rounded-xl font-bold text-white",children:""})]})]})}),pS&&ym.length>0&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1100] p-4",children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-3xl"})}),r.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),r.jsx("p",{className:"text-slate-200 text-sm mt-1",children:new Date().toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),r.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-4 mb-4 max-h-60 overflow-y-auto",children:[r.jsxs("p",{className:"text-primary-600 font-bold text-sm mb-3",children:[ym.length,"  "]}),r.jsx("div",{className:"space-y-2",children:ym.map((o,u)=>{const m=ye.find(f=>f.id===o.managerId);return r.jsx("div",{className:"bg-slate-700 p-3 rounded-lg border border-slate-600",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-lg",children:o.type==="route"?"":""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:o.title}),m&&r.jsxs("p",{className:"text-xs text-slate-200",children:[": ",m.name]}),o.memo&&r.jsx("p",{className:"text-xs text-slate-200 mt-1 break-words whitespace-pre-wrap",children:o.memo})]})]})},u)})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{vm(!1),S("calendar")},className:"flex-1 btn-premium btn-gold",children:" "}),r.jsx("button",{onClick:()=>vm(!1),className:"flex-1 btn-premium btn-outline",children:""})]})]})}),dS&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Bc(!1),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-hidden",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>Bc(!1),className:"text-slate-200 text-2xl",children:""})]}),r.jsx("p",{className:"text-sm text-slate-200 mb-3",children:"   ."}),r.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[ce.filter(o=>!o.lat||!o.lng).map(o=>{const u=ye.find(m=>m.id===o.managerId);return r.jsx("div",{className:"p-3 bg-slate-700 rounded-xl cursor-pointer hover:bg-slate-700 border border-slate-600",onClick:()=>{Bc(!1),mt(o)},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-bold text-slate-100 truncate",children:o.name}),r.jsx("p",{className:"text-xs text-slate-200 truncate",children:o.address||" "})]}),r.jsx("div",{className:"flex-shrink-0 ml-2",children:r.jsx("span",{className:"px-2 py-1 rounded text-xs text-white font-bold",style:{background:(u==null?void 0:u.color)||"#9ca3af"},children:(u==null?void 0:u.name)||""})})]})},o.id)}),ce.filter(o=>!o.lat||!o.lng).length===0&&r.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."})]})]})}),At&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>kl(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),r.jsx("button",{type:"button",onClick:()=>kl(null),className:"text-slate-200 text-2xl",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[r.jsx("p",{className:"text-purple-800 font-bold text-lg",children:At.title}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-purple-600",children:[r.jsxs("span",{children:[" ",At.date]}),At.time&&r.jsx("span",{children:At.time})]}),At.memo&&r.jsxs("div",{className:"mt-3 p-3 bg-slate-700 rounded-lg",children:[r.jsx("p",{className:"text-xs text-slate-200 mb-1",children:""}),r.jsx("p",{className:"text-slate-200 whitespace-pre-wrap",children:At.memo})]}),At.company&&r.jsx("div",{className:"mt-2 text-sm text-purple-600",children:r.jsx("span",{children:At.company})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{km(At.date),Cs({title:At.title,time:At.time||"09:00",memo:At.memo||""}),sa(At.id),ni(!0),kl(null)},className:"flex-1 py-2 bg-slate-700 text-primary-600 rounded-xl font-bold",children:""}),r.jsx("button",{onClick:()=>{na({type:"calendar",id:At.id,name:At.title}),kl(null)},className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-xl font-bold",children:""})]})]})]})}),IS&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ni(!1),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[Sl," "]}),r.jsx("button",{type:"button",onClick:()=>ni(!1),className:"text-slate-200 text-2xl",children:""})]}),(()=>{const o=Be.filter(m=>m.date===Sl),u=$t.filter(m=>m.date===Sl);return o.length>0||u.length>0?r.jsxs("div",{className:"mb-4 p-3 bg-slate-700 rounded-xl max-h-32 overflow-y-auto",children:[r.jsx("p",{className:"text-xs text-slate-200 mb-2 font-bold",children:"  "}),o.map(m=>{var x;const f=ye.find(v=>v.id===m.managerId);return r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:(f==null?void 0:f.color)||"#888"}}),r.jsxs("span",{className:"text-sm text-slate-200",children:[(x=m.time)==null?void 0:x.slice(0,5)," ",m.name]}),r.jsx("span",{className:"text-xs text-slate-200",children:"()"})]},`r-${m.id}`)}),u.map(m=>{var f;return r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),r.jsxs("span",{className:"text-sm text-slate-200",children:[(f=m.time)==null?void 0:f.slice(0,5)," ",m.title]}),r.jsx("button",{onClick:()=>{Cs({title:m.title,time:m.time,memo:m.memo||""}),sa(m.id)},className:"text-xs text-primary-600 ml-auto",children:""}),r.jsx("button",{onClick:()=>{confirm("?")&&ZS(m.id)},className:"text-xs text-rose-600",children:""})]},`e-${m.id}`)})]}):null})(),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-slate-200 font-bold",children:El?" ":"  "}),r.jsx("input",{type:"text",placeholder:" ",value:ns.title,onChange:o=>Cs({...ns,title:o.target.value}),className:"input-premium"}),r.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("calEventTime")).showPicker)==null?void 0:u.call(o)},children:r.jsx("input",{id:"calEventTime",type:"time",value:ns.time,onChange:o=>Cs({...ns,time:o.target.value}),className:"input-premium cursor-pointer"})}),r.jsx("textarea",{placeholder:" ()",value:ns.memo,onChange:o=>Cs({...ns,memo:o.target.value}),className:"input-premium resize-none h-20"})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[El&&r.jsx("button",{onClick:()=>{Cs({title:"",time:"09:00",memo:""}),sa(null)},className:"btn-premium btn-outline flex-1",children:" "}),r.jsx("button",{type:"button",onClick:()=>ni(!1),className:"btn-premium btn-outline flex-1",children:""}),r.jsx("button",{onClick:()=>{if(!ns.title.trim())return alert("  ");const o={id:El||Date.now(),date:Sl,title:ns.title.trim(),time:ns.time,memo:ns.memo.trim(),createdBy:(n==null?void 0:n.name)||"unknown",createdAt:new Date().toISOString()};Qm(o),bm(!1),Cs({title:"",time:"09:00",memo:""}),sa(null),alert(El?" !":" !")},className:"btn-premium btn-gold flex-1",children:El?"":""})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:r.jsx("button",{onClick:()=>{ea(Sl),ni(!1),oi("route")},className:"w-full text-center text-sm text-slate-200 font-bold",children:"  "})})]})}),on&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>js(null),children:r.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:on.name}),r.jsx("p",{className:"text-sm text-slate-200",children:on.date})]}),r.jsx("button",{type:"button",onClick:()=>js(null),className:"text-slate-200 hover:text-slate-200 text-xl",children:""})]}),(()=>{const o=(on.stops||[]).filter(f=>f.visited).length,u=(on.stops||[]).length,m=u>0?Math.round(o/u*100):0;return r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm text-slate-200",children:""}),r.jsxs("span",{className:"text-sm font-bold text-slate-200",children:[o,"/",u," (",m,"%)"]})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 transition-all duration-300",style:{width:`${m}%`}})})]})})(),r.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:(on.stops||[]).map((o,u)=>r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all ${o.visited?"bg-emerald-900/30":"bg-slate-700"}`,children:[r.jsx("button",{onClick:()=>Ek(on.id,o.id),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all flex-shrink-0 ${o.visited?"bg-emerald-500 text-white":"bg-slate-600 border-2 border-slate-600 text-slate-200 hover:border-primary-400"}`,children:o.visited?"":u+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`font-bold text-sm break-words leading-snug ${o.visited?"text-emerald-700":"text-slate-100"}`,children:o.name}),o.address&&r.jsx("p",{className:"text-xs text-slate-200 break-words",children:o.address})]}),o.lat&&o.lng&&r.jsx("button",{type:"button",onClick:()=>Rk(o),className:"w-8 h-8 rounded-lg bg-slate-700 hover:bg-slate-600 text-primary-600 flex items-center justify-center text-sm flex-shrink-0"})]},o.id))}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{type:"button",onClick:()=>{js(null),Ak(on)},className:"w-full btn-premium btn-outline py-2",children:"   "}),on.status!=="completed"&&r.jsx("button",{type:"button",onClick:()=>Tk(on.id),className:"w-full btn-premium btn-gold py-3 font-bold",children:"  ( )"})]})]})}),qC&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>{qi(!1),Xn({name:"",content:"",type:"broker",memo:""})},children:r.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:Gt?" ":"  "}),r.jsx("button",{type:"button",onClick:()=>{qi(!1),Xn({name:"",content:"",type:"broker",memo:""})},className:"text-slate-400 text-2xl hover:text-white",children:""})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"  (:  )",value:Pt.name,onChange:o=>Xn({...Pt,name:o.target.value}),className:"input-premium"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Xn({...Pt,type:"broker"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Pt.type==="broker"?"bg-blue-500/20 text-blue-400 border border-blue-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""}),r.jsx("button",{onClick:()=>Xn({...Pt,type:"customer"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Pt.type==="customer"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""})]}),r.jsx("textarea",{placeholder:"  ",value:Pt.content,onChange:o=>Xn({...Pt,content:o.target.value}),rows:"4",className:"input-premium resize-none"}),r.jsx("input",{type:"text",placeholder:" ()",value:Pt.memo,onChange:o=>Xn({...Pt,memo:o.target.value}),className:"input-premium"})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{type:"button",onClick:()=>{qi(!1),Xn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-outline",children:""}),r.jsx("button",{onClick:()=>{if(!Pt.name.trim()||!Pt.content.trim())return alert("   ");const o={id:(Gt==null?void 0:Gt.id)||Date.now(),name:Pt.name.trim(),content:Pt.content.trim(),type:Pt.type,memo:Pt.memo.trim(),useCount:(Gt==null?void 0:Gt.useCount)||0,successCount:(Gt==null?void 0:Gt.successCount)||0,createdAt:(Gt==null?void 0:Gt.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};_v(o),qi(!1),Jh(null),Xn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-gold",children:Gt?" ":""})]})]})}),YC&&bs&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>Ic(!1),children:r.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"AI "}),r.jsx("button",{type:"button",onClick:()=>Ic(!1),className:"text-slate-400 text-2xl hover:text-white",children:""})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-sm text-slate-400 mb-1",children:[" : ",r.jsx("span",{className:"text-brand-purple font-medium",children:bs.name})]}),r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:r.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:bs.content})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"  :"}),r.jsx("textarea",{value:ml,onChange:o=>Xh(o.target.value),placeholder:"  ",rows:"3",className:"input-premium resize-none w-full"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),r.jsx("input",{type:"text",value:k0,onChange:o=>I0(o.target.value),placeholder:"   ?",className:"input-premium w-full"})]}),r.jsx("button",{onClick:()=>{if(!ml.trim())return alert("  ");const o={id:Date.now(),mentId:bs.id,mentName:bs.name,original:bs.content,modified:ml,question:k0||" ",aiResponse:` !

:
    ${ml.length>bs.content.length?" ":" "} 
 ${ml.includes("?")?"   ":"   "}

 :
    .`,createdAt:new Date().toISOString()};JS(o),alert(" !  ."),Ic(!1),Xh(""),I0("")},className:"w-full btn-premium btn-gold",children:"AI  "}),kc.filter(o=>o.mentId===bs.id).length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[r.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"    "}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:kc.filter(o=>o.mentId===bs.id).slice(-3).reverse().map(o=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/30 border border-slate-700/30",children:[r.jsx("p",{className:"text-xs text-slate-500 mb-1",children:new Date(o.createdAt).toLocaleString("ko-KR")}),r.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:o.question})]},o.id))})]})]})}),Zh&&r.jsxs("div",{className:"fixed inset-0 z-[9999] bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"/logo.png",alt:"",className:"w-8 h-8 object-contain"}),r.jsx("span",{className:"font-bold text-gray-900",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>T0("analysis"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Tc==="analysis"?"bg-amber-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""}),r.jsx("button",{onClick:()=>T0("homepage"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Tc==="homepage"?"bg-amber-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:""}),r.jsx("button",{onClick:()=>{Yi(!0),Zn("")},className:"ml-4 p-2 rounded-lg hover:bg-gray-100 text-gray-500",children:""})]}),O0<=15&&!Rc&&r.jsxs("span",{className:"text-xs text-orange-500 ml-2",children:[O0,""]})]}),Rc&&r.jsxs("div",{className:"fixed inset-0 z-[10000] bg-white flex flex-col items-center justify-center",children:[r.jsx("img",{src:"/logo.png",alt:"",className:"w-20 h-20 object-contain mb-6"}),r.jsx("p",{className:"text-gray-600 mb-8",children:" "}),r.jsx("div",{className:"flex gap-3 mb-8",children:[0,1,2,3].map(o=>r.jsx("div",{className:`w-4 h-4 rounded-full ${Qi.length>o?"bg-amber-500":"bg-gray-300"}`},o))}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[[1,2,3,4,5,6,7,8,9].map(o=>r.jsx("button",{onClick:()=>{if(Qi.length<4){const u=Qi+o;if(Zn(u),u.length===4){const m=localStorage.getItem("bc_sales_pin")||"0000";u===m?(Yi(!1),Zn(""),Pc(Date.now()),fl(60)):(Zn(""),navigator.vibrate&&navigator.vibrate(200))}}},className:"w-16 h-16 rounded-full bg-gray-100 text-gray-900 text-2xl font-medium hover:bg-gray-200 active:bg-gray-300 transition-all",children:o},o)),r.jsx("button",{onClick:()=>{window.confirm(" ?")&&(E0(!1),Yi(!1),Zn(""),e(!1),s(null),localStorage.removeItem("bc_session"))},className:"w-16 h-16 rounded-full bg-red-100 text-red-600 text-xs font-medium hover:bg-red-200 transition-all",children:""}),r.jsx("button",{onClick:()=>{if(Qi.length<4){const o=Qi+"0";if(Zn(o),o.length===4){const u=localStorage.getItem("bc_sales_pin")||"0000";o===u?(Yi(!1),Zn(""),Pc(Date.now()),fl(60)):(Zn(""),navigator.vibrate&&navigator.vibrate(200))}}},className:"w-16 h-16 rounded-full bg-gray-100 text-gray-900 text-2xl font-medium hover:bg-gray-200 active:bg-gray-300 transition-all",children:"0"}),r.jsx("button",{onClick:()=>Zn(Qi.slice(0,-1)),className:"w-16 h-16 rounded-full bg-gray-100 text-gray-500 text-sm font-medium hover:bg-gray-200 transition-all",children:""})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-8",children:" PIN: 0000"})]}),Tc==="analysis"&&r.jsx("div",{className:"h-[calc(100vh-60px)] overflow-y-auto",children:r.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-4",children:[r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:Qr,onChange:o=>R0(o.target.value),placeholder:"   (:  )",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:border-amber-500",onKeyPress:o=>o.key==="Enter"&&wd()}),r.jsx("button",{onClick:()=>wd(),disabled:Jr||!Qr.trim(),className:"px-6 py-3 bg-amber-500 text-white rounded-lg font-medium hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:Jr?"...":""})]})}),qe&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:""}),r.jsx("div",{id:"sales-mode-map",className:"w-full h-[300px] rounded-lg bg-gray-100"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:" 500m "})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((dy=qe.overview)==null?void 0:dy.population)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:" ()"})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((uy=qe.overview)==null?void 0:uy.households)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:""})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((hy=qe.overview)==null?void 0:hy.stores)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:" "})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((my=qe.overview)==null?void 0:my.avgRent)||"-"}),r.jsx("p",{className:"text-sm text-gray-500",children:" "})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("div",{className:"space-y-2",children:(fy=qe.consumers)==null?void 0:fy.map((o,u)=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-700",children:o.label}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:`${o.percent}%`}})}),r.jsxs("span",{className:"text-sm text-gray-600 w-12 text-right",children:[o.percent,"%"]})]})]},u))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"  "}),r.jsx("div",{className:"space-y-2",children:(py=qe.franchises)==null?void 0:py.map((o,u)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-700",children:o.name}),r.jsxs("span",{className:"font-medium text-gray-900",children:[o.count,""]})]},u))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("ul",{className:"space-y-2",children:(gy=qe.development)==null?void 0:gy.map((o,u)=>r.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[r.jsx("span",{className:"text-green-500 mt-1",children:""}),r.jsx("span",{children:o})]},u))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("ul",{className:"space-y-2",children:(xy=qe.risks)==null?void 0:xy.map((o,u)=>r.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[r.jsx("span",{className:"text-red-500 mt-1",children:""}),r.jsx("span",{children:o})]},u))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"seats",label:" ",unit:"",info:"    "},{key:"price",label:"",unit:"",info:" 1   "},{key:"turnover",label:"",unit:"",info:"    "},{key:"occupancy",label:"",unit:"%",info:"    "},{key:"rent",label:"",unit:"",info:"  ( )"},{key:"labor",label:"",unit:"",info:"  "},{key:"materialRate",label:"",unit:"%",info:"   "},{key:"otherCost",label:"",unit:"",info:",  "}].map(o=>r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx("span",{className:"text-sm text-gray-600",children:o.label}),r.jsx("button",{onClick:()=>D0(Ac===o.key?null:o.key),className:"w-4 h-4 rounded-full bg-gray-200 text-gray-500 text-xs",children:"i"})]}),Ac===o.key&&r.jsx("div",{className:"absolute z-10 left-0 top-8 bg-gray-800 text-white text-xs p-2 rounded-lg shadow-lg max-w-[200px]",children:o.info}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"number",value:we[o.key],onChange:u=>L0({...we,[o.key]:Number(u.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 text-right"}),r.jsx("span",{className:"text-sm text-gray-500 w-8",children:o.unit})]})]},o.key))})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" "}),(()=>{const u=we.seats*we.price*we.turnover*(we.occupancy/100)*30,m=u*(we.materialRate/100),f=we.rent*1e4+we.labor*1e4+m+we.otherCost*1e4,x=u-f;return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between p-3 bg-amber-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-700",children:"  "}),r.jsxs("span",{className:"font-bold text-amber-600",children:[Math.round(u/1e4).toLocaleString(),""]})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-700",children:"  "}),r.jsxs("span",{className:"font-medium text-gray-900",children:[Math.round(f/1e4).toLocaleString(),""]})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("span",{className:"text-gray-700",children:"  "}),r.jsxs("span",{className:`font-bold ${x>=0?"text-green-600":"text-red-600"}`,children:[Math.round(x/1e4).toLocaleString(),""]})]})]})})()]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:""}),(()=>{const o=(we.rent+we.labor+we.otherCost)*1e4,u=1-we.materialRate/100,m=o/u;return r.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Math.round(m/1e4).toLocaleString(),""]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     "})]})})()]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"  "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[r.jsx("p",{className:"font-medium text-amber-800",children:"  "}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"    "})]}),r.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[r.jsx("p",{className:"font-medium text-amber-800",children:" "}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"   "})]}),r.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[r.jsx("p",{className:"font-medium text-amber-800",children:" "}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"    "})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"  "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 text-gray-600",children:""}),r.jsx("th",{className:"text-right py-2 text-gray-600",children:""}),r.jsx("th",{className:"text-right py-2 text-amber-600",children:""})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-2 text-gray-700",children:" "}),r.jsx("td",{className:"text-right text-gray-900",children:"5,000~8,000"}),r.jsx("td",{className:"text-right text-amber-600 font-medium",children:"1,000"})]}),r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-2 text-gray-700",children:" "}),r.jsx("td",{className:"text-right text-gray-900",children:" 3~5%"}),r.jsx("td",{className:"text-right text-amber-600 font-medium",children:"0"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-gray-700",children:" "}),r.jsx("td",{className:"text-right text-gray-900",children:""}),r.jsx("td",{className:"text-right text-amber-600 font-medium",children:" "})]})]})]})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"AI "}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:qe.insight||"   AI  ."})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{onClick:()=>Oc(!0),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all",children:" "})})]}),!qe&&!Jr&&r.jsx("div",{className:"text-center py-20",children:r.jsx("p",{className:"text-gray-500",children:"     "})})]})}),Tc==="homepage"&&r.jsx("div",{className:"h-[calc(100vh-60px)] overflow-hidden",children:r.jsx("iframe",{src:"https://www.beancraft.co.kr",className:"w-full h-full border-0",title:" "})})]}),JC&&r.jsx("div",{className:"fixed inset-0 z-[10001] flex items-center justify-center bg-black/50",onClick:()=>Oc(!1),children:r.jsxs("div",{className:"bg-white rounded-2xl p-6 m-4 max-w-sm w-full",onClick:o=>o.stopPropagation(),children:[r.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-4",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("a",{href:"https://sg.sbiz.or.kr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all",children:[r.jsx("span",{className:"text-amber-500",children:""}),r.jsx("span",{className:"text-gray-700",children:" "})]}),r.jsxs("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all",children:[r.jsx("span",{className:"text-amber-500",children:""}),r.jsx("span",{className:"text-gray-700",children:" "})]}),r.jsxs("a",{href:"https://kosis.kr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all",children:[r.jsx("span",{className:"text-amber-500",children:""}),r.jsx("span",{className:"text-gray-700",children:" KOSIS"})]}),r.jsxs("a",{href:"https://data.seoul.go.kr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all",children:[r.jsx("span",{className:"text-amber-500",children:""}),r.jsx("span",{className:"text-gray-700",children:" "})]})]}),r.jsx("button",{onClick:()=>Oc(!1),className:"w-full mt-4 py-3 bg-amber-500 text-white rounded-lg font-medium hover:bg-amber-600 transition-all",children:""})]})})]})},fD=()=>{const t=document.getElementById("initial-loading");t&&(t.classList.add("hidden"),setTimeout(()=>t.remove(),300))};qf.createRoot(document.getElementById("root")).render(r.jsx(cI.StrictMode,{children:r.jsx(mD,{})}));fD();
