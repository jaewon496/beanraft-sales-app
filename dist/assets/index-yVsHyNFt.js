(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function tI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eN={exports:{}},nh={},tN={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),nI=Symbol.for("react.portal"),rI=Symbol.for("react.fragment"),sI=Symbol.for("react.strict_mode"),iI=Symbol.for("react.profiler"),aI=Symbol.for("react.provider"),lI=Symbol.for("react.context"),oI=Symbol.for("react.forward_ref"),cI=Symbol.for("react.suspense"),dI=Symbol.for("react.memo"),uI=Symbol.for("react.lazy"),wb=Symbol.iterator;function hI(t){return t===null||typeof t!="object"?null:(t=wb&&t[wb]||t["@@iterator"],typeof t=="function"?t:null)}var nN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rN=Object.assign,sN={};function sl(t,e,n){this.props=t,this.context=e,this.refs=sN,this.updater=n||nN}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iN(){}iN.prototype=sl.prototype;function Ig(t,e,n){this.props=t,this.context=e,this.refs=sN,this.updater=n||nN}var Eg=Ig.prototype=new iN;Eg.constructor=Ig;rN(Eg,sl.prototype);Eg.isPureReactComponent=!0;var Nb=Array.isArray,aN=Object.prototype.hasOwnProperty,Tg={current:null},lN={key:!0,ref:!0,__self:!0,__source:!0};function oN(t,e,n){var r,i={},a=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)aN.call(e,r)&&!lN.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];i.children=d}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:sc,type:t,key:a,ref:l,props:i,_owner:Tg.current}}function fI(t,e){return{$$typeof:sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rg(t){return typeof t=="object"&&t!==null&&t.$$typeof===sc}function pI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jb=/\/+/g;function hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pI(""+t.key):e.toString(36)}function Gd(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case sc:case nI:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+hp(l,0):r,Nb(i)?(n="",t!=null&&(n=t.replace(jb,"$&/")+"/"),Gd(i,e,n,"",function(h){return h})):i!=null&&(Rg(i)&&(i=fI(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(jb,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Nb(t))for(var c=0;c<t.length;c++){a=t[c];var d=r+hp(a,c);l+=Gd(a,e,n,d,i)}else if(d=hI(t),typeof d=="function")for(t=d.call(t),c=0;!(a=t.next()).done;)a=a.value,d=r+hp(a,c++),l+=Gd(a,e,n,d,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function jd(t,e,n){if(t==null)return t;var r=[],i=0;return Gd(t,r,"","",function(a){return e.call(n,a,i++)}),r}function mI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Kd={transition:null},gI={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Kd,ReactCurrentOwner:Tg};function cN(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:jd,forEach:function(t,e,n){jd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jd(t,function(){e++}),e},toArray:function(t){return jd(t,function(e){return e})||[]},only:function(t){if(!Rg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=sl;_e.Fragment=rI;_e.Profiler=iI;_e.PureComponent=Ig;_e.StrictMode=sI;_e.Suspense=cI;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gI;_e.act=cN;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rN({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Tg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)aN.call(e,d)&&!lN.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:sc,type:t.type,key:i,ref:a,props:r,_owner:l}};_e.createContext=function(t){return t={$$typeof:lI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aI,_context:t},t.Consumer=t};_e.createElement=oN;_e.createFactory=function(t){var e=oN.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:oI,render:t}};_e.isValidElement=Rg;_e.lazy=function(t){return{$$typeof:uI,_payload:{_status:-1,_result:t},_init:mI}};_e.memo=function(t,e){return{$$typeof:dI,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Kd.transition;Kd.transition={};try{t()}finally{Kd.transition=e}};_e.unstable_act=cN;_e.useCallback=function(t,e){return Vt.current.useCallback(t,e)};_e.useContext=function(t){return Vt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Vt.current.useEffect(t,e)};_e.useId=function(){return Vt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Vt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};_e.useRef=function(t){return Vt.current.useRef(t)};_e.useState=function(t){return Vt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Vt.current.useTransition()};_e.version="18.3.1";tN.exports=_e;var _=tN.exports;const xI=tI(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI=_,yI=Symbol.for("react.element"),bI=Symbol.for("react.fragment"),_I=Object.prototype.hasOwnProperty,wI=vI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NI={key:!0,ref:!0,__self:!0,__source:!0};function dN(t,e,n){var r,i={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)_I.call(e,r)&&!NI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yI,type:t,key:a,ref:l,props:i,_owner:wI.current}}nh.Fragment=bI;nh.jsx=dN;nh.jsxs=dN;eN.exports=nh;var s=eN.exports,nm={},uN={exports:{}},_n={},hN={exports:{}},fN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,pe){var ne=Y.length;Y.push(pe);e:for(;0<ne;){var Fe=ne-1>>>1,Ue=Y[Fe];if(0<i(Ue,pe))Y[Fe]=pe,Y[ne]=Ue,ne=Fe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var pe=Y[0],ne=Y.pop();if(ne!==pe){Y[0]=ne;e:for(var Fe=0,Ue=Y.length,br=Ue>>>1;Fe<br;){var Nn=2*(Fe+1)-1,Zi=Y[Nn],ht=Nn+1,et=Y[ht];if(0>i(Zi,ne))ht<Ue&&0>i(et,Zi)?(Y[Fe]=et,Y[ht]=ne,Fe=ht):(Y[Fe]=Zi,Y[Nn]=ne,Fe=Nn);else if(ht<Ue&&0>i(et,ne))Y[Fe]=et,Y[ht]=ne,Fe=ht;else break e}}return pe}function i(Y,pe){var ne=Y.sortIndex-pe.sortIndex;return ne!==0?ne:Y.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,m=null,b=3,I=!1,T=!1,L=!1,ie=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Y){for(var pe=n(h);pe!==null;){if(pe.callback===null)r(h);else if(pe.startTime<=Y)r(h),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=n(h)}}function A(Y){if(L=!1,C(Y),!T)if(n(d)!==null)T=!0,ei(q);else{var pe=n(h);pe!==null&&Xi(A,pe.startTime-Y)}}function q(Y,pe){T=!1,L&&(L=!1,j(te),te=-1),I=!0;var ne=b;try{for(C(pe),m=n(d);m!==null&&(!(m.expirationTime>pe)||Y&&!Ft());){var Fe=m.callback;if(typeof Fe=="function"){m.callback=null,b=m.priorityLevel;var Ue=Fe(m.expirationTime<=pe);pe=t.unstable_now(),typeof Ue=="function"?m.callback=Ue:m===n(d)&&r(d),C(pe)}else r(d);m=n(d)}if(m!==null)var br=!0;else{var Nn=n(h);Nn!==null&&Xi(A,Nn.startTime-pe),br=!1}return br}finally{m=null,b=ne,I=!1}}var V=!1,X=null,te=-1,Re=5,ge=-1;function Ft(){return!(t.unstable_now()-ge<Re)}function Zs(){if(X!==null){var Y=t.unstable_now();ge=Y;var pe=!0;try{pe=X(!0,Y)}finally{pe?yr():(V=!1,X=null)}}else V=!1}var yr;if(typeof N=="function")yr=function(){N(Zs)};else if(typeof MessageChannel<"u"){var Qi=new MessageChannel,Ji=Qi.port2;Qi.port1.onmessage=Zs,yr=function(){Ji.postMessage(null)}}else yr=function(){ie(Zs,0)};function ei(Y){X=Y,V||(V=!0,yr())}function Xi(Y,pe){te=ie(function(){Y(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){T||I||(T=!0,ei(q))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var pe=3;break;default:pe=b}var ne=b;b=pe;try{return Y()}finally{b=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,pe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ne=b;b=Y;try{return pe()}finally{b=ne}},t.unstable_scheduleCallback=function(Y,pe,ne){var Fe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Fe+ne:Fe):ne=Fe,Y){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ne+Ue,Y={id:g++,callback:pe,priorityLevel:Y,startTime:ne,expirationTime:Ue,sortIndex:-1},ne>Fe?(Y.sortIndex=ne,e(h,Y),n(d)===null&&Y===n(h)&&(L?(j(te),te=-1):L=!0,Xi(A,ne-Fe))):(Y.sortIndex=Ue,e(d,Y),T||I||(T=!0,ei(q))),Y},t.unstable_shouldYield=Ft,t.unstable_wrapCallback=function(Y){var pe=b;return function(){var ne=b;b=pe;try{return Y.apply(this,arguments)}finally{b=ne}}}})(fN);hN.exports=fN;var jI=hN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=_,vn=jI;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pN=new Set,No={};function zi(t,e){za(t,e),za(t+"Capture",e)}function za(t,e){for(No[t]=e,t=0;t<e.length;t++)pN.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,SI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cb={},Sb={};function kI(t){return rm.call(Sb,t)?!0:rm.call(Cb,t)?!1:SI.test(t)?Sb[t]=!0:(Cb[t]=!0,!1)}function II(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EI(t,e,n,r){if(e===null||typeof e>"u"||II(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pg=/[\-:]([a-z])/g;function Ag(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pg,Ag);Et[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pg,Ag);Et[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pg,Ag);Et[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Og(t,e,n,r){var i=Et.hasOwnProperty(e)?Et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EI(e,n,i,r)&&(n=null),r||i===null?kI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var es=CI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),xa=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),mN=Symbol.for("react.provider"),gN=Symbol.for("react.context"),Dg=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),Lg=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),xN=Symbol.for("react.offscreen"),kb=Symbol.iterator;function Ul(t){return t===null||typeof t!="object"?null:(t=kb&&t[kb]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,fp;function eo(t){if(fp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fp=e&&e[1]||""}return`
`+fp+t}var pp=!1;function mp(t,e){if(!t||pp)return"";pp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,c=a.length-1;1<=l&&0<=c&&i[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==a[c]){var d=`
`+i[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{pp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eo(t):""}function TI(t){switch(t.tag){case 5:return eo(t.type);case 16:return eo("Lazy");case 13:return eo("Suspense");case 19:return eo("SuspenseList");case 0:case 2:case 15:return t=mp(t.type,!1),t;case 11:return t=mp(t.type.render,!1),t;case 1:return t=mp(t.type,!0),t;default:return""}}function lm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case va:return"Fragment";case xa:return"Portal";case sm:return"Profiler";case Mg:return"StrictMode";case im:return"Suspense";case am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gN:return(t.displayName||"Context")+".Consumer";case mN:return(t._context.displayName||"Context")+".Provider";case Dg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lg:return e=t.displayName||null,e!==null?e:lm(t.type)||"Memo";case gs:e=t._payload,t=t._init;try{return lm(t(e))}catch{}}return null}function RI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lm(e);case 8:return e===Mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PI(t){var e=vN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sd(t){t._valueTracker||(t._valueTracker=PI(t))}function yN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ou(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function om(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ib(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bN(t,e){e=e.checked,e!=null&&Og(t,"checked",e,!1)}function cm(t,e){bN(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&dm(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dm(t,e,n){(e!=="number"||ou(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var to=Array.isArray;function Ta(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function um(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(to(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function _N(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kd,NN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kd=kd||document.createElement("div"),kd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AI=["Webkit","ms","Moz","O"];Object.keys(ao).forEach(function(t){AI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ao[e]=ao[t]})});function jN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ao.hasOwnProperty(t)&&ao[t]?(""+e).trim():e+"px"}function CN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OI=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(t,e){if(e){if(OI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function Fg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,Ra=null,Pa=null;function Pb(t){if(t=lc(t)){if(typeof gm!="function")throw Error(U(280));var e=t.stateNode;e&&(e=lh(e),gm(t.stateNode,t.type,e))}}function SN(t){Ra?Pa?Pa.push(t):Pa=[t]:Ra=t}function kN(){if(Ra){var t=Ra,e=Pa;if(Pa=Ra=null,Pb(t),e)for(t=0;t<e.length;t++)Pb(e[t])}}function IN(t,e){return t(e)}function EN(){}var gp=!1;function TN(t,e,n){if(gp)return t(e,n);gp=!0;try{return IN(t,e,n)}finally{gp=!1,(Ra!==null||Pa!==null)&&(EN(),kN())}}function Co(t,e){var n=t.stateNode;if(n===null)return null;var r=lh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var xm=!1;if(Kr)try{var $l={};Object.defineProperty($l,"passive",{get:function(){xm=!0}}),window.addEventListener("test",$l,$l),window.removeEventListener("test",$l,$l)}catch{xm=!1}function MI(t,e,n,r,i,a,l,c,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(g){this.onError(g)}}var lo=!1,cu=null,du=!1,vm=null,DI={onError:function(t){lo=!0,cu=t}};function LI(t,e,n,r,i,a,l,c,d){lo=!1,cu=null,MI.apply(DI,arguments)}function FI(t,e,n,r,i,a,l,c,d){if(LI.apply(this,arguments),lo){if(lo){var h=cu;lo=!1,cu=null}else throw Error(U(198));du||(du=!0,vm=h)}}function Bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ab(t){if(Bi(t)!==t)throw Error(U(188))}function UI(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ab(i),t;if(a===r)return Ab(i),e;a=a.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=a;else{for(var l=!1,c=i.child;c;){if(c===n){l=!0,n=i,r=a;break}if(c===r){l=!0,r=i,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,r=i;break}if(c===r){l=!0,r=a,n=i;break}c=c.sibling}if(!l)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function PN(t){return t=UI(t),t!==null?AN(t):null}function AN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=AN(t);if(e!==null)return e;t=t.sibling}return null}var ON=vn.unstable_scheduleCallback,Ob=vn.unstable_cancelCallback,$I=vn.unstable_shouldYield,WI=vn.unstable_requestPaint,tt=vn.unstable_now,zI=vn.unstable_getCurrentPriorityLevel,Ug=vn.unstable_ImmediatePriority,MN=vn.unstable_UserBlockingPriority,uu=vn.unstable_NormalPriority,BI=vn.unstable_LowPriority,DN=vn.unstable_IdlePriority,rh=null,fr=null;function VI(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(rh,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:KI,HI=Math.log,GI=Math.LN2;function KI(t){return t>>>=0,t===0?32:31-(HI(t)/GI|0)|0}var Id=64,Ed=4194304;function no(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~i;c!==0?r=no(c):(a&=l,a!==0&&(r=no(a)))}else l=n&~i,l!==0?r=no(l):a!==0&&(r=no(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function qI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Kn(a),c=1<<l,d=i[l];d===-1?(!(c&n)||c&r)&&(i[l]=qI(c,e)):d<=e&&(t.expiredLanes|=c),a&=~c}}function ym(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LN(){var t=Id;return Id<<=1,!(Id&4194240)&&(Id=64),t}function xp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function QI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function $g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function FN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UN,Wg,$N,WN,zN,bm=!1,Td=[],Cs=null,Ss=null,ks=null,So=new Map,ko=new Map,vs=[],JI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mb(t,e){switch(t){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":So.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function Wl(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=lc(e),e!==null&&Wg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function XI(t,e,n,r,i){switch(e){case"focusin":return Cs=Wl(Cs,t,e,n,r,i),!0;case"dragenter":return Ss=Wl(Ss,t,e,n,r,i),!0;case"mouseover":return ks=Wl(ks,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return So.set(a,Wl(So.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ko.set(a,Wl(ko.get(a)||null,t,e,n,r,i)),!0}return!1}function BN(t){var e=bi(t.target);if(e!==null){var n=Bi(e);if(n!==null){if(e=n.tag,e===13){if(e=RN(n),e!==null){t.blockedOn=e,zN(t.priority,function(){$N(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=lc(n),e!==null&&Wg(e),t.blockedOn=n,!1;e.shift()}return!0}function Db(t,e,n){qd(t)&&n.delete(e)}function ZI(){bm=!1,Cs!==null&&qd(Cs)&&(Cs=null),Ss!==null&&qd(Ss)&&(Ss=null),ks!==null&&qd(ks)&&(ks=null),So.forEach(Db),ko.forEach(Db)}function zl(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,ZI)))}function Io(t){function e(i){return zl(i,t)}if(0<Td.length){zl(Td[0],t);for(var n=1;n<Td.length;n++){var r=Td[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cs!==null&&zl(Cs,t),Ss!==null&&zl(Ss,t),ks!==null&&zl(ks,t),So.forEach(e),ko.forEach(e),n=0;n<vs.length;n++)r=vs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vs.length&&(n=vs[0],n.blockedOn===null);)BN(n),n.blockedOn===null&&vs.shift()}var Aa=es.ReactCurrentBatchConfig,fu=!0;function eE(t,e,n,r){var i=Te,a=Aa.transition;Aa.transition=null;try{Te=1,zg(t,e,n,r)}finally{Te=i,Aa.transition=a}}function tE(t,e,n,r){var i=Te,a=Aa.transition;Aa.transition=null;try{Te=4,zg(t,e,n,r)}finally{Te=i,Aa.transition=a}}function zg(t,e,n,r){if(fu){var i=_m(t,e,n,r);if(i===null)kp(t,e,r,pu,n),Mb(t,r);else if(XI(i,t,e,n,r))r.stopPropagation();else if(Mb(t,r),e&4&&-1<JI.indexOf(t)){for(;i!==null;){var a=lc(i);if(a!==null&&UN(a),a=_m(t,e,n,r),a===null&&kp(t,e,r,pu,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else kp(t,e,r,null,n)}}var pu=null;function _m(t,e,n,r){if(pu=null,t=Fg(r),t=bi(t),t!==null)if(e=Bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pu=t,null}function VN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zI()){case Ug:return 1;case MN:return 4;case uu:case BI:return 16;case DN:return 536870912;default:return 16}default:return 16}}var bs=null,Bg=null,Yd=null;function HN(){if(Yd)return Yd;var t,e=Bg,n=e.length,r,i="value"in bs?bs.value:bs.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[a-r];r++);return Yd=i.slice(t,1<r?1-r:void 0)}function Qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rd(){return!0}function Lb(){return!1}function wn(t){function e(n,r,i,a,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Rd:Lb,this.isPropagationStopped=Lb,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),e}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=wn(il),ac=qe({},il,{view:0,detail:0}),nE=wn(ac),vp,yp,Bl,sh=qe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bl&&(Bl&&t.type==="mousemove"?(vp=t.screenX-Bl.screenX,yp=t.screenY-Bl.screenY):yp=vp=0,Bl=t),vp)},movementY:function(t){return"movementY"in t?t.movementY:yp}}),Fb=wn(sh),rE=qe({},sh,{dataTransfer:0}),sE=wn(rE),iE=qe({},ac,{relatedTarget:0}),bp=wn(iE),aE=qe({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),lE=wn(aE),oE=qe({},il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cE=wn(oE),dE=qe({},il,{data:0}),Ub=wn(dE),uE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fE[t])?!!e[t]:!1}function Hg(){return pE}var mE=qe({},ac,{key:function(t){if(t.key){var e=uE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(t){return t.type==="keypress"?Qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gE=wn(mE),xE=qe({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$b=wn(xE),vE=qe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),yE=wn(vE),bE=qe({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),_E=wn(bE),wE=qe({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NE=wn(wE),jE=[9,13,27,32],Gg=Kr&&"CompositionEvent"in window,oo=null;Kr&&"documentMode"in document&&(oo=document.documentMode);var CE=Kr&&"TextEvent"in window&&!oo,GN=Kr&&(!Gg||oo&&8<oo&&11>=oo),Wb=" ",zb=!1;function KN(t,e){switch(t){case"keyup":return jE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ya=!1;function SE(t,e){switch(t){case"compositionend":return qN(e);case"keypress":return e.which!==32?null:(zb=!0,Wb);case"textInput":return t=e.data,t===Wb&&zb?null:t;default:return null}}function kE(t,e){if(ya)return t==="compositionend"||!Gg&&KN(t,e)?(t=HN(),Yd=Bg=bs=null,ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GN&&e.locale!=="ko"?null:e.data;default:return null}}var IE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IE[t.type]:e==="textarea"}function YN(t,e,n,r){SN(r),e=mu(e,"onChange"),0<e.length&&(n=new Vg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var co=null,Eo=null;function EE(t){a1(t,0)}function ih(t){var e=wa(t);if(yN(e))return t}function TE(t,e){if(t==="change")return e}var QN=!1;if(Kr){var _p;if(Kr){var wp="oninput"in document;if(!wp){var Vb=document.createElement("div");Vb.setAttribute("oninput","return;"),wp=typeof Vb.oninput=="function"}_p=wp}else _p=!1;QN=_p&&(!document.documentMode||9<document.documentMode)}function Hb(){co&&(co.detachEvent("onpropertychange",JN),Eo=co=null)}function JN(t){if(t.propertyName==="value"&&ih(Eo)){var e=[];YN(e,Eo,t,Fg(t)),TN(EE,e)}}function RE(t,e,n){t==="focusin"?(Hb(),co=e,Eo=n,co.attachEvent("onpropertychange",JN)):t==="focusout"&&Hb()}function PE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ih(Eo)}function AE(t,e){if(t==="click")return ih(e)}function OE(t,e){if(t==="input"||t==="change")return ih(e)}function ME(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jn=typeof Object.is=="function"?Object.is:ME;function To(t,e){if(Jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rm.call(e,i)||!Jn(t[i],e[i]))return!1}return!0}function Gb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kb(t,e){var n=Gb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gb(n)}}function XN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZN(){for(var t=window,e=ou();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ou(t.document)}return e}function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DE(t){var e=ZN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XN(n.ownerDocument.documentElement,n)){if(r!==null&&Kg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=Kb(n,a);var l=Kb(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LE=Kr&&"documentMode"in document&&11>=document.documentMode,ba=null,wm=null,uo=null,Nm=!1;function qb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nm||ba==null||ba!==ou(r)||(r=ba,"selectionStart"in r&&Kg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uo&&To(uo,r)||(uo=r,r=mu(wm,"onSelect"),0<r.length&&(e=new Vg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ba)))}function Pd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _a={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},Np={},e1={};Kr&&(e1=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function ah(t){if(Np[t])return Np[t];if(!_a[t])return t;var e=_a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e1)return Np[t]=e[n];return t}var t1=ah("animationend"),n1=ah("animationiteration"),r1=ah("animationstart"),s1=ah("transitionend"),i1=new Map,Yb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ks(t,e){i1.set(t,e),zi(e,[t])}for(var jp=0;jp<Yb.length;jp++){var Cp=Yb[jp],FE=Cp.toLowerCase(),UE=Cp[0].toUpperCase()+Cp.slice(1);Ks(FE,"on"+UE)}Ks(t1,"onAnimationEnd");Ks(n1,"onAnimationIteration");Ks(r1,"onAnimationStart");Ks("dblclick","onDoubleClick");Ks("focusin","onFocus");Ks("focusout","onBlur");Ks(s1,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$E=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function Qb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FI(r,e,void 0,t),t.currentTarget=null}function a1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;Qb(i,c,h),a=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,h=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;Qb(i,c,h),a=d}}}if(du)throw t=vm,du=!1,vm=null,t}function $e(t,e){var n=e[Im];n===void 0&&(n=e[Im]=new Set);var r=t+"__bubble";n.has(r)||(l1(e,t,2,!1),n.add(r))}function Sp(t,e,n){var r=0;e&&(r|=4),l1(n,t,r,e)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function Ro(t){if(!t[Ad]){t[Ad]=!0,pN.forEach(function(n){n!=="selectionchange"&&($E.has(n)||Sp(n,!1,t),Sp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ad]||(e[Ad]=!0,Sp("selectionchange",!1,e))}}function l1(t,e,n,r){switch(VN(e)){case 1:var i=eE;break;case 4:i=tE;break;default:i=zg}n=i.bind(null,e,n,t),i=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kp(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=bi(c),l===null)return;if(d=l.tag,d===5||d===6){r=a=l;continue e}c=c.parentNode}}r=r.return}TN(function(){var h=a,g=Fg(n),m=[];e:{var b=i1.get(t);if(b!==void 0){var I=Vg,T=t;switch(t){case"keypress":if(Qd(n)===0)break e;case"keydown":case"keyup":I=gE;break;case"focusin":T="focus",I=bp;break;case"focusout":T="blur",I=bp;break;case"beforeblur":case"afterblur":I=bp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Fb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=sE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=yE;break;case t1:case n1:case r1:I=lE;break;case s1:I=_E;break;case"scroll":I=nE;break;case"wheel":I=NE;break;case"copy":case"cut":case"paste":I=cE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=$b}var L=(e&4)!==0,ie=!L&&t==="scroll",j=L?b!==null?b+"Capture":null:b;L=[];for(var N=h,C;N!==null;){C=N;var A=C.stateNode;if(C.tag===5&&A!==null&&(C=A,j!==null&&(A=Co(N,j),A!=null&&L.push(Po(N,A,C)))),ie)break;N=N.return}0<L.length&&(b=new I(b,T,null,n,g),m.push({event:b,listeners:L}))}}if(!(e&7)){e:{if(b=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",b&&n!==mm&&(T=n.relatedTarget||n.fromElement)&&(bi(T)||T[qr]))break e;if((I||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,I?(T=n.relatedTarget||n.toElement,I=h,T=T?bi(T):null,T!==null&&(ie=Bi(T),T!==ie||T.tag!==5&&T.tag!==6)&&(T=null)):(I=null,T=h),I!==T)){if(L=Fb,A="onMouseLeave",j="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(L=$b,A="onPointerLeave",j="onPointerEnter",N="pointer"),ie=I==null?b:wa(I),C=T==null?b:wa(T),b=new L(A,N+"leave",I,n,g),b.target=ie,b.relatedTarget=C,A=null,bi(g)===h&&(L=new L(j,N+"enter",T,n,g),L.target=C,L.relatedTarget=ie,A=L),ie=A,I&&T)t:{for(L=I,j=T,N=0,C=L;C;C=pa(C))N++;for(C=0,A=j;A;A=pa(A))C++;for(;0<N-C;)L=pa(L),N--;for(;0<C-N;)j=pa(j),C--;for(;N--;){if(L===j||j!==null&&L===j.alternate)break t;L=pa(L),j=pa(j)}L=null}else L=null;I!==null&&Jb(m,b,I,L,!1),T!==null&&ie!==null&&Jb(m,ie,T,L,!0)}}e:{if(b=h?wa(h):window,I=b.nodeName&&b.nodeName.toLowerCase(),I==="select"||I==="input"&&b.type==="file")var q=TE;else if(Bb(b))if(QN)q=OE;else{q=PE;var V=RE}else(I=b.nodeName)&&I.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(q=AE);if(q&&(q=q(t,h))){YN(m,q,n,g);break e}V&&V(t,b,h),t==="focusout"&&(V=b._wrapperState)&&V.controlled&&b.type==="number"&&dm(b,"number",b.value)}switch(V=h?wa(h):window,t){case"focusin":(Bb(V)||V.contentEditable==="true")&&(ba=V,wm=h,uo=null);break;case"focusout":uo=wm=ba=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,qb(m,n,g);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":qb(m,n,g)}var X;if(Gg)e:{switch(t){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else ya?KN(t,n)&&(te="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(te="onCompositionStart");te&&(GN&&n.locale!=="ko"&&(ya||te!=="onCompositionStart"?te==="onCompositionEnd"&&ya&&(X=HN()):(bs=g,Bg="value"in bs?bs.value:bs.textContent,ya=!0)),V=mu(h,te),0<V.length&&(te=new Ub(te,t,null,n,g),m.push({event:te,listeners:V}),X?te.data=X:(X=qN(n),X!==null&&(te.data=X)))),(X=CE?SE(t,n):kE(t,n))&&(h=mu(h,"onBeforeInput"),0<h.length&&(g=new Ub("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:h}),g.data=X))}a1(m,e)})}function Po(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Co(t,n),a!=null&&r.unshift(Po(t,a,i)),a=Co(t,e),a!=null&&r.push(Po(t,a,i))),t=t.return}return r}function pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jb(t,e,n,r,i){for(var a=e._reactName,l=[];n!==null&&n!==r;){var c=n,d=c.alternate,h=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&h!==null&&(c=h,i?(d=Co(n,a),d!=null&&l.unshift(Po(n,d,c))):i||(d=Co(n,a),d!=null&&l.push(Po(n,d,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var WE=/\r\n?/g,zE=/\u0000|\uFFFD/g;function Xb(t){return(typeof t=="string"?t:""+t).replace(WE,`
`).replace(zE,"")}function Od(t,e,n){if(e=Xb(e),Xb(t)!==e&&n)throw Error(U(425))}function gu(){}var jm=null,Cm=null;function Sm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var km=typeof setTimeout=="function"?setTimeout:void 0,BE=typeof clearTimeout=="function"?clearTimeout:void 0,Zb=typeof Promise=="function"?Promise:void 0,VE=typeof queueMicrotask=="function"?queueMicrotask:typeof Zb<"u"?function(t){return Zb.resolve(null).then(t).catch(HE)}:km;function HE(t){setTimeout(function(){throw t})}function Ip(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Io(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Io(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function e_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var al=Math.random().toString(36).slice(2),lr="__reactFiber$"+al,Ao="__reactProps$"+al,qr="__reactContainer$"+al,Im="__reactEvents$"+al,GE="__reactListeners$"+al,KE="__reactHandles$"+al;function bi(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=e_(t);t!==null;){if(n=t[lr])return n;t=e_(t)}return e}t=n,n=t.parentNode}return null}function lc(t){return t=t[lr]||t[qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function lh(t){return t[Ao]||null}var Em=[],Na=-1;function qs(t){return{current:t}}function We(t){0>Na||(t.current=Em[Na],Em[Na]=null,Na--)}function De(t,e){Na++,Em[Na]=t.current,t.current=e}var Fs={},Lt=qs(Fs),tn=qs(!1),Ti=Fs;function Ba(t,e){var n=t.type.contextTypes;if(!n)return Fs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function xu(){We(tn),We(Lt)}function t_(t,e,n){if(Lt.current!==Fs)throw Error(U(168));De(Lt,e),De(tn,n)}function o1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,RI(t)||"Unknown",i));return qe({},n,r)}function vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fs,Ti=Lt.current,De(Lt,t),De(tn,tn.current),!0}function n_(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=o1(t,e,Ti),r.__reactInternalMemoizedMergedChildContext=t,We(tn),We(Lt),De(Lt,t)):We(tn),De(tn,n)}var Lr=null,oh=!1,Ep=!1;function c1(t){Lr===null?Lr=[t]:Lr.push(t)}function qE(t){oh=!0,c1(t)}function Ys(){if(!Ep&&Lr!==null){Ep=!0;var t=0,e=Te;try{var n=Lr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,oh=!1}catch(i){throw Lr!==null&&(Lr=Lr.slice(t+1)),ON(Ug,Ys),i}finally{Te=e,Ep=!1}}return null}var ja=[],Ca=0,yu=null,bu=0,Sn=[],kn=0,Ri=null,Fr=1,Ur="";function gi(t,e){ja[Ca++]=bu,ja[Ca++]=yu,yu=t,bu=e}function d1(t,e,n){Sn[kn++]=Fr,Sn[kn++]=Ur,Sn[kn++]=Ri,Ri=t;var r=Fr;t=Ur;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var a=32-Kn(e)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Fr=1<<32-Kn(e)+i|n<<i|r,Ur=a+t}else Fr=1<<a|n<<i|r,Ur=t}function qg(t){t.return!==null&&(gi(t,1),d1(t,1,0))}function Yg(t){for(;t===yu;)yu=ja[--Ca],ja[Ca]=null,bu=ja[--Ca],ja[Ca]=null;for(;t===Ri;)Ri=Sn[--kn],Sn[kn]=null,Ur=Sn[--kn],Sn[kn]=null,Fr=Sn[--kn],Sn[kn]=null}var xn=null,mn=null,ze=!1,Hn=null;function u1(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function r_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,mn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ri!==null?{id:Fr,overflow:Ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,mn=null,!0):!1;default:return!1}}function Tm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rm(t){if(ze){var e=mn;if(e){var n=e;if(!r_(t,e)){if(Tm(t))throw Error(U(418));e=Is(n.nextSibling);var r=xn;e&&r_(t,e)?u1(r,n):(t.flags=t.flags&-4097|2,ze=!1,xn=t)}}else{if(Tm(t))throw Error(U(418));t.flags=t.flags&-4097|2,ze=!1,xn=t}}}function s_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Md(t){if(t!==xn)return!1;if(!ze)return s_(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sm(t.type,t.memoizedProps)),e&&(e=mn)){if(Tm(t))throw h1(),Error(U(418));for(;e;)u1(t,e),e=Is(e.nextSibling)}if(s_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=xn?Is(t.stateNode.nextSibling):null;return!0}function h1(){for(var t=mn;t;)t=Is(t.nextSibling)}function Va(){mn=xn=null,ze=!1}function Qg(t){Hn===null?Hn=[t]:Hn.push(t)}var YE=es.ReactCurrentBatchConfig;function Vl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=i.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Dd(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i_(t){var e=t._init;return e(t._payload)}function f1(t){function e(j,N){if(t){var C=j.deletions;C===null?(j.deletions=[N],j.flags|=16):C.push(N)}}function n(j,N){if(!t)return null;for(;N!==null;)e(j,N),N=N.sibling;return null}function r(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function i(j,N){return j=Ps(j,N),j.index=0,j.sibling=null,j}function a(j,N,C){return j.index=C,t?(C=j.alternate,C!==null?(C=C.index,C<N?(j.flags|=2,N):C):(j.flags|=2,N)):(j.flags|=1048576,N)}function l(j){return t&&j.alternate===null&&(j.flags|=2),j}function c(j,N,C,A){return N===null||N.tag!==6?(N=Dp(C,j.mode,A),N.return=j,N):(N=i(N,C),N.return=j,N)}function d(j,N,C,A){var q=C.type;return q===va?g(j,N,C.props.children,A,C.key):N!==null&&(N.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===gs&&i_(q)===N.type)?(A=i(N,C.props),A.ref=Vl(j,N,C),A.return=j,A):(A=ru(C.type,C.key,C.props,null,j.mode,A),A.ref=Vl(j,N,C),A.return=j,A)}function h(j,N,C,A){return N===null||N.tag!==4||N.stateNode.containerInfo!==C.containerInfo||N.stateNode.implementation!==C.implementation?(N=Lp(C,j.mode,A),N.return=j,N):(N=i(N,C.children||[]),N.return=j,N)}function g(j,N,C,A,q){return N===null||N.tag!==7?(N=Si(C,j.mode,A,q),N.return=j,N):(N=i(N,C),N.return=j,N)}function m(j,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Dp(""+N,j.mode,C),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Cd:return C=ru(N.type,N.key,N.props,null,j.mode,C),C.ref=Vl(j,null,N),C.return=j,C;case xa:return N=Lp(N,j.mode,C),N.return=j,N;case gs:var A=N._init;return m(j,A(N._payload),C)}if(to(N)||Ul(N))return N=Si(N,j.mode,C,null),N.return=j,N;Dd(j,N)}return null}function b(j,N,C,A){var q=N!==null?N.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:c(j,N,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Cd:return C.key===q?d(j,N,C,A):null;case xa:return C.key===q?h(j,N,C,A):null;case gs:return q=C._init,b(j,N,q(C._payload),A)}if(to(C)||Ul(C))return q!==null?null:g(j,N,C,A,null);Dd(j,C)}return null}function I(j,N,C,A,q){if(typeof A=="string"&&A!==""||typeof A=="number")return j=j.get(C)||null,c(N,j,""+A,q);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Cd:return j=j.get(A.key===null?C:A.key)||null,d(N,j,A,q);case xa:return j=j.get(A.key===null?C:A.key)||null,h(N,j,A,q);case gs:var V=A._init;return I(j,N,C,V(A._payload),q)}if(to(A)||Ul(A))return j=j.get(C)||null,g(N,j,A,q,null);Dd(N,A)}return null}function T(j,N,C,A){for(var q=null,V=null,X=N,te=N=0,Re=null;X!==null&&te<C.length;te++){X.index>te?(Re=X,X=null):Re=X.sibling;var ge=b(j,X,C[te],A);if(ge===null){X===null&&(X=Re);break}t&&X&&ge.alternate===null&&e(j,X),N=a(ge,N,te),V===null?q=ge:V.sibling=ge,V=ge,X=Re}if(te===C.length)return n(j,X),ze&&gi(j,te),q;if(X===null){for(;te<C.length;te++)X=m(j,C[te],A),X!==null&&(N=a(X,N,te),V===null?q=X:V.sibling=X,V=X);return ze&&gi(j,te),q}for(X=r(j,X);te<C.length;te++)Re=I(X,j,te,C[te],A),Re!==null&&(t&&Re.alternate!==null&&X.delete(Re.key===null?te:Re.key),N=a(Re,N,te),V===null?q=Re:V.sibling=Re,V=Re);return t&&X.forEach(function(Ft){return e(j,Ft)}),ze&&gi(j,te),q}function L(j,N,C,A){var q=Ul(C);if(typeof q!="function")throw Error(U(150));if(C=q.call(C),C==null)throw Error(U(151));for(var V=q=null,X=N,te=N=0,Re=null,ge=C.next();X!==null&&!ge.done;te++,ge=C.next()){X.index>te?(Re=X,X=null):Re=X.sibling;var Ft=b(j,X,ge.value,A);if(Ft===null){X===null&&(X=Re);break}t&&X&&Ft.alternate===null&&e(j,X),N=a(Ft,N,te),V===null?q=Ft:V.sibling=Ft,V=Ft,X=Re}if(ge.done)return n(j,X),ze&&gi(j,te),q;if(X===null){for(;!ge.done;te++,ge=C.next())ge=m(j,ge.value,A),ge!==null&&(N=a(ge,N,te),V===null?q=ge:V.sibling=ge,V=ge);return ze&&gi(j,te),q}for(X=r(j,X);!ge.done;te++,ge=C.next())ge=I(X,j,te,ge.value,A),ge!==null&&(t&&ge.alternate!==null&&X.delete(ge.key===null?te:ge.key),N=a(ge,N,te),V===null?q=ge:V.sibling=ge,V=ge);return t&&X.forEach(function(Zs){return e(j,Zs)}),ze&&gi(j,te),q}function ie(j,N,C,A){if(typeof C=="object"&&C!==null&&C.type===va&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Cd:e:{for(var q=C.key,V=N;V!==null;){if(V.key===q){if(q=C.type,q===va){if(V.tag===7){n(j,V.sibling),N=i(V,C.props.children),N.return=j,j=N;break e}}else if(V.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===gs&&i_(q)===V.type){n(j,V.sibling),N=i(V,C.props),N.ref=Vl(j,V,C),N.return=j,j=N;break e}n(j,V);break}else e(j,V);V=V.sibling}C.type===va?(N=Si(C.props.children,j.mode,A,C.key),N.return=j,j=N):(A=ru(C.type,C.key,C.props,null,j.mode,A),A.ref=Vl(j,N,C),A.return=j,j=A)}return l(j);case xa:e:{for(V=C.key;N!==null;){if(N.key===V)if(N.tag===4&&N.stateNode.containerInfo===C.containerInfo&&N.stateNode.implementation===C.implementation){n(j,N.sibling),N=i(N,C.children||[]),N.return=j,j=N;break e}else{n(j,N);break}else e(j,N);N=N.sibling}N=Lp(C,j.mode,A),N.return=j,j=N}return l(j);case gs:return V=C._init,ie(j,N,V(C._payload),A)}if(to(C))return T(j,N,C,A);if(Ul(C))return L(j,N,C,A);Dd(j,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,N!==null&&N.tag===6?(n(j,N.sibling),N=i(N,C),N.return=j,j=N):(n(j,N),N=Dp(C,j.mode,A),N.return=j,j=N),l(j)):n(j,N)}return ie}var Ha=f1(!0),p1=f1(!1),_u=qs(null),wu=null,Sa=null,Jg=null;function Xg(){Jg=Sa=wu=null}function Zg(t){var e=_u.current;We(_u),t._currentValue=e}function Pm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oa(t,e){wu=t,Jg=Sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function On(t){var e=t._currentValue;if(Jg!==t)if(t={context:t,memoizedValue:e,next:null},Sa===null){if(wu===null)throw Error(U(308));Sa=t,wu.dependencies={lanes:0,firstContext:t}}else Sa=Sa.next=t;return e}var _i=null;function ex(t){_i===null?_i=[t]:_i.push(t)}function m1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ex(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yr(t,r)}function Yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function tx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yr(t,n)}return i=r.interleaved,i===null?(e.next=e,ex(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yr(t,n)}function Jd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$g(t,n)}}function a_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nu(t,e,n,r){var i=t.updateQueue;xs=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,h=d.next;d.next=null,l===null?a=h:l.next=h,l=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==l&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(a!==null){var m=i.baseState;l=0,g=h=d=null,c=a;do{var b=c.lane,I=c.eventTime;if((r&b)===b){g!==null&&(g=g.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,L=c;switch(b=e,I=n,L.tag){case 1:if(T=L.payload,typeof T=="function"){m=T.call(I,m,b);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=L.payload,b=typeof T=="function"?T.call(I,m,b):T,b==null)break e;m=qe({},m,b);break e;case 2:xs=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,b=i.effects,b===null?i.effects=[c]:b.push(c))}else I={eventTime:I,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=I,d=m):g=g.next=I,l|=b;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;b=c,c=b.next,b.next=null,i.lastBaseUpdate=b,i.shared.pending=null}}while(!0);if(g===null&&(d=m),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ai|=l,t.lanes=l,t.memoizedState=m}}function l_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var oc={},pr=qs(oc),Oo=qs(oc),Mo=qs(oc);function wi(t){if(t===oc)throw Error(U(174));return t}function nx(t,e){switch(De(Mo,e),De(Oo,t),De(pr,oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hm(e,t)}We(pr),De(pr,e)}function Ga(){We(pr),We(Oo),We(Mo)}function x1(t){wi(Mo.current);var e=wi(pr.current),n=hm(e,t.type);e!==n&&(De(Oo,t),De(pr,n))}function rx(t){Oo.current===t&&(We(pr),We(Oo))}var He=qs(0);function ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tp=[];function sx(){for(var t=0;t<Tp.length;t++)Tp[t]._workInProgressVersionPrimary=null;Tp.length=0}var Xd=es.ReactCurrentDispatcher,Rp=es.ReactCurrentBatchConfig,Pi=0,Ke=null,lt=null,vt=null,Cu=!1,ho=!1,Do=0,QE=0;function At(){throw Error(U(321))}function ix(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jn(t[n],e[n]))return!1;return!0}function ax(t,e,n,r,i,a){if(Pi=a,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xd.current=t===null||t.memoizedState===null?e3:t3,t=n(r,i),ho){a=0;do{if(ho=!1,Do=0,25<=a)throw Error(U(301));a+=1,vt=lt=null,e.updateQueue=null,Xd.current=n3,t=n(r,i)}while(ho)}if(Xd.current=Su,e=lt!==null&&lt.next!==null,Pi=0,vt=lt=Ke=null,Cu=!1,e)throw Error(U(300));return t}function lx(){var t=Do!==0;return Do=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ke.memoizedState=vt=t:vt=vt.next=t,vt}function Mn(){if(lt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=vt===null?Ke.memoizedState:vt.next;if(e!==null)vt=e,lt=t;else{if(t===null)throw Error(U(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},vt===null?Ke.memoizedState=vt=t:vt=vt.next=t}return vt}function Lo(t,e){return typeof e=="function"?e(t):e}function Pp(t){var e=Mn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=l=null,d=null,h=a;do{var g=h.lane;if((Pi&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=m,l=r):d=d.next=m,Ke.lanes|=g,Ai|=g}h=h.next}while(h!==null&&h!==a);d===null?l=r:d.next=c,Jn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Ke.lanes|=a,Ai|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ap(t){var e=Mn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);Jn(a,e.memoizedState)||(Zt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function v1(){}function y1(t,e){var n=Ke,r=Mn(),i=e(),a=!Jn(r.memoizedState,i);if(a&&(r.memoizedState=i,Zt=!0),r=r.queue,ox(w1.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Fo(9,_1.bind(null,n,r,i,e),void 0,null),wt===null)throw Error(U(349));Pi&30||b1(n,e,i)}return i}function b1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _1(t,e,n,r){e.value=n,e.getSnapshot=r,N1(e)&&j1(t)}function w1(t,e,n){return n(function(){N1(e)&&j1(t)})}function N1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jn(t,n)}catch{return!0}}function j1(t){var e=Yr(t,1);e!==null&&qn(e,t,1,-1)}function o_(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},e.queue=t,t=t.dispatch=ZE.bind(null,Ke,t),[e.memoizedState,t]}function Fo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function C1(){return Mn().memoizedState}function Zd(t,e,n,r){var i=ar();Ke.flags|=t,i.memoizedState=Fo(1|e,n,void 0,r===void 0?null:r)}function ch(t,e,n,r){var i=Mn();r=r===void 0?null:r;var a=void 0;if(lt!==null){var l=lt.memoizedState;if(a=l.destroy,r!==null&&ix(r,l.deps)){i.memoizedState=Fo(e,n,a,r);return}}Ke.flags|=t,i.memoizedState=Fo(1|e,n,a,r)}function c_(t,e){return Zd(8390656,8,t,e)}function ox(t,e){return ch(2048,8,t,e)}function S1(t,e){return ch(4,2,t,e)}function k1(t,e){return ch(4,4,t,e)}function I1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E1(t,e,n){return n=n!=null?n.concat([t]):null,ch(4,4,I1.bind(null,e,t),n)}function cx(){}function T1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ix(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function R1(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ix(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function P1(t,e,n){return Pi&21?(Jn(n,e)||(n=LN(),Ke.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function JE(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Rp.transition;Rp.transition={};try{t(!1),e()}finally{Te=n,Rp.transition=r}}function A1(){return Mn().memoizedState}function XE(t,e,n){var r=Rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},O1(t))M1(e,n);else if(n=m1(t,e,n,r),n!==null){var i=Bt();qn(n,t,r,i),D1(n,e,r)}}function ZE(t,e,n){var r=Rs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(O1(t))M1(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,n);if(i.hasEagerState=!0,i.eagerState=c,Jn(c,l)){var d=e.interleaved;d===null?(i.next=i,ex(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=m1(t,e,i,r),n!==null&&(i=Bt(),qn(n,t,r,i),D1(n,e,r))}}function O1(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function M1(t,e){ho=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$g(t,n)}}var Su={readContext:On,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},e3={readContext:On,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:On,useEffect:c_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4194308,4,I1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zd(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XE.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:o_,useDebugValue:cx,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=o_(!1),e=t[0];return t=JE.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=ar();if(ze){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),wt===null)throw Error(U(349));Pi&30||b1(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,c_(w1.bind(null,r,a,t),[t]),r.flags|=2048,Fo(9,_1.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ar(),e=wt.identifierPrefix;if(ze){var n=Ur,r=Fr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Do++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t3={readContext:On,useCallback:T1,useContext:On,useEffect:ox,useImperativeHandle:E1,useInsertionEffect:S1,useLayoutEffect:k1,useMemo:R1,useReducer:Pp,useRef:C1,useState:function(){return Pp(Lo)},useDebugValue:cx,useDeferredValue:function(t){var e=Mn();return P1(e,lt.memoizedState,t)},useTransition:function(){var t=Pp(Lo)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:v1,useSyncExternalStore:y1,useId:A1,unstable_isNewReconciler:!1},n3={readContext:On,useCallback:T1,useContext:On,useEffect:ox,useImperativeHandle:E1,useInsertionEffect:S1,useLayoutEffect:k1,useMemo:R1,useReducer:Ap,useRef:C1,useState:function(){return Ap(Lo)},useDebugValue:cx,useDeferredValue:function(t){var e=Mn();return lt===null?e.memoizedState=t:P1(e,lt.memoizedState,t)},useTransition:function(){var t=Ap(Lo)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:v1,useSyncExternalStore:y1,useId:A1,unstable_isNewReconciler:!1};function Bn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Am(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dh={isMounted:function(t){return(t=t._reactInternals)?Bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=Rs(t),a=Vr(r,i);a.payload=e,n!=null&&(a.callback=n),e=Es(t,a,i),e!==null&&(qn(e,t,i,r),Jd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=Rs(t),a=Vr(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Es(t,a,i),e!==null&&(qn(e,t,i,r),Jd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Rs(t),i=Vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Es(t,i,r),e!==null&&(qn(e,t,r,n),Jd(e,t,r))}};function d_(t,e,n,r,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,l):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(i,a):!0}function L1(t,e,n){var r=!1,i=Fs,a=e.contextType;return typeof a=="object"&&a!==null?a=On(a):(i=nn(e)?Ti:Lt.current,r=e.contextTypes,a=(r=r!=null)?Ba(t,i):Fs),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function u_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dh.enqueueReplaceState(e,e.state,null)}function Om(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tx(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=On(a):(a=nn(e)?Ti:Lt.current,i.context=Ba(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Am(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dh.enqueueReplaceState(i,i.state,null),Nu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ka(t,e){try{var n="",r=e;do n+=TI(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r3=typeof WeakMap=="function"?WeakMap:Map;function F1(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Iu||(Iu=!0,Hm=r),Mm(t,e)},n}function U1(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Mm(t,e),typeof r!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function h_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=x3.bind(null,t,e,n),e.then(t,t))}function f_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function p_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t)}var s3=es.ReactCurrentOwner,Zt=!1;function Wt(t,e,n,r){e.child=t===null?p1(e,null,n,r):Ha(e,t.child,n,r)}function m_(t,e,n,r,i){n=n.render;var a=e.ref;return Oa(e,i),r=ax(t,e,n,r,a,i),n=lx(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(ze&&n&&qg(e),e.flags|=1,Wt(t,e,r,i),e.child)}function g_(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!xx(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,$1(t,e,a,r,i)):(t=ru(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(l,r)&&t.ref===e.ref)return Qr(t,e,i)}return e.flags|=1,t=Ps(a,r),t.ref=e.ref,t.return=e,e.child=t}function $1(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(To(a,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Qr(t,e,i)}return Dm(t,e,n,r,i)}function W1(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ia,un),un|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ia,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,De(Ia,un),un|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,De(Ia,un),un|=r;return Wt(t,e,i,n),e.child}function z1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dm(t,e,n,r,i){var a=nn(n)?Ti:Lt.current;return a=Ba(e,a),Oa(e,i),n=ax(t,e,n,r,a,i),r=lx(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(ze&&r&&qg(e),e.flags|=1,Wt(t,e,n,i),e.child)}function x_(t,e,n,r,i){if(nn(n)){var a=!0;vu(e)}else a=!1;if(Oa(e,i),e.stateNode===null)eu(t,e),L1(e,n,r),Om(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var d=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=On(h):(h=nn(n)?Ti:Lt.current,h=Ba(e,h));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==h)&&u_(e,l,r,h),xs=!1;var b=e.memoizedState;l.state=b,Nu(e,r,l,i),d=e.memoizedState,c!==r||b!==d||tn.current||xs?(typeof g=="function"&&(Am(e,n,g,r),d=e.memoizedState),(c=xs||d_(e,n,c,r,b,d,h))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),l.props=r,l.state=d,l.context=h,r=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,g1(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:Bn(e.type,c),l.props=h,m=e.pendingProps,b=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=On(d):(d=nn(n)?Ti:Lt.current,d=Ba(e,d));var I=n.getDerivedStateFromProps;(g=typeof I=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==m||b!==d)&&u_(e,l,r,d),xs=!1,b=e.memoizedState,l.state=b,Nu(e,r,l,i);var T=e.memoizedState;c!==m||b!==T||tn.current||xs?(typeof I=="function"&&(Am(e,n,I,r),T=e.memoizedState),(h=xs||d_(e,n,h,r,b,T,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,T,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,T,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),l.props=r,l.state=T,l.context=d,r=h):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),r=!1)}return Lm(t,e,n,r,a,i)}function Lm(t,e,n,r,i,a){z1(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&n_(e,n,!1),Qr(t,e,a);r=e.stateNode,s3.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Ha(e,t.child,null,a),e.child=Ha(e,null,c,a)):Wt(t,e,c,a),e.memoizedState=r.state,i&&n_(e,n,!0),e.child}function B1(t){var e=t.stateNode;e.pendingContext?t_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t_(t,e.context,!1),nx(t,e.containerInfo)}function v_(t,e,n,r,i){return Va(),Qg(i),e.flags|=256,Wt(t,e,n,r),e.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function Um(t){return{baseLanes:t,cachePool:null,transitions:null}}function V1(t,e,n){var r=e.pendingProps,i=He.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(He,i&1),t===null)return Rm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=fh(l,r,0,null),t=Si(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Um(n),e.memoizedState=Fm,t):dx(e,l));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return i3(t,e,l,r,c,i,n);if(a){a=r.fallback,l=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ps(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Ps(c,a):(a=Si(a,l,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=t.child.memoizedState,l=l===null?Um(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Fm,r}return a=t.child,t=a.sibling,r=Ps(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dx(t,e){return e=fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ld(t,e,n,r){return r!==null&&Qg(r),Ha(e,t.child,null,n),t=dx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i3(t,e,n,r,i,a,l){if(n)return e.flags&256?(e.flags&=-257,r=Op(Error(U(422))),Ld(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=fh({mode:"visible",children:r.children},i,0,null),a=Si(a,i,l,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Ha(e,t.child,null,l),e.child.memoizedState=Um(l),e.memoizedState=Fm,a);if(!(e.mode&1))return Ld(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(U(419)),r=Op(a,r,void 0),Ld(t,e,l,r)}if(c=(l&t.childLanes)!==0,Zt||c){if(r=wt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Yr(t,i),qn(r,t,i,-1))}return gx(),r=Op(Error(U(421))),Ld(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=v3.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,mn=Is(i.nextSibling),xn=e,ze=!0,Hn=null,t!==null&&(Sn[kn++]=Fr,Sn[kn++]=Ur,Sn[kn++]=Ri,Fr=t.id,Ur=t.overflow,Ri=e),e=dx(e,r.children),e.flags|=4096,e)}function y_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pm(t.return,e,n)}function Mp(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function H1(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Wt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y_(t,n,e);else if(t.tag===19)y_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ju(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mp(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ju(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mp(e,!0,n,null,a);break;case"together":Mp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function a3(t,e,n){switch(e.tag){case 3:B1(e),Va();break;case 5:x1(e);break;case 1:nn(e.type)&&vu(e);break;case 4:nx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(_u,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?V1(t,e,n):(De(He,He.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);De(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return H1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,W1(t,e,n)}return Qr(t,e,n)}var G1,$m,K1,q1;G1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};K1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wi(pr.current);var a=null;switch(n){case"input":i=om(t,i),r=om(t,r),a=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),a=[];break;case"textarea":i=um(t,i),r=um(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gu)}fm(n,r);var l;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(No.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var d=r[h];if(c=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(No.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&$e("scroll",t),a||c===d||(a=[])):(a=a||[]).push(h,d))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};q1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hl(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function l3(t,e,n){var r=e.pendingProps;switch(Yg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return nn(e.type)&&xu(),Ot(e),null;case 3:return r=e.stateNode,Ga(),We(tn),We(Lt),sx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Md(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(qm(Hn),Hn=null))),$m(t,e),Ot(e),null;case 5:rx(e);var i=wi(Mo.current);if(n=e.type,t!==null&&e.stateNode!=null)K1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ot(e),null}if(t=wi(pr.current),Md(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[lr]=e,r[Ao]=a,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<ro.length;i++)$e(ro[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Ib(r,a),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},$e("invalid",r);break;case"textarea":Tb(r,a),$e("invalid",r)}fm(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Od(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Od(r.textContent,c,t),i=["children",""+c]):No.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&$e("scroll",r)}switch(n){case"input":Sd(r),Eb(r,a,!0);break;case"textarea":Sd(r),Rb(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[lr]=e,t[Ao]=r,G1(t,e,!1,!1),e.stateNode=t;e:{switch(l=pm(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<ro.length;i++)$e(ro[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Ib(t,r),i=om(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Tb(t,r),i=um(t,r),$e("invalid",t);break;default:i=r}fm(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?CN(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&NN(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&jo(t,d):typeof d=="number"&&jo(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(No.hasOwnProperty(a)?d!=null&&a==="onScroll"&&$e("scroll",t):d!=null&&Og(t,a,d,l))}switch(n){case"input":Sd(t),Eb(t,r,!1);break;case"textarea":Sd(t),Rb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ta(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)q1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=wi(Mo.current),wi(pr.current),Md(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(a=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Od(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Od(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Ot(e),null;case 13:if(We(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&mn!==null&&e.mode&1&&!(e.flags&128))h1(),Va(),e.flags|=98560,a=!1;else if(a=Md(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(U(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(U(317));a[lr]=e}else Va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),a=!1}else Hn!==null&&(qm(Hn),Hn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ct===0&&(ct=3):gx())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Ga(),$m(t,e),t===null&&Ro(e.stateNode.containerInfo),Ot(e),null;case 10:return Zg(e.type._context),Ot(e),null;case 17:return nn(e.type)&&xu(),Ot(e),null;case 19:if(We(He),a=e.memoizedState,a===null)return Ot(e),null;if(r=(e.flags&128)!==0,l=a.rendering,l===null)if(r)Hl(a,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ju(t),l!==null){for(e.flags|=128,Hl(a,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(He,He.current&1|2),e.child}t=t.sibling}a.tail!==null&&tt()>qa&&(e.flags|=128,r=!0,Hl(a,!1),e.lanes=4194304)}else{if(!r)if(t=ju(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ze)return Ot(e),null}else 2*tt()-a.renderingStartTime>qa&&n!==1073741824&&(e.flags|=128,r=!0,Hl(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=tt(),e.sibling=null,n=He.current,De(He,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return mx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function o3(t,e){switch(Yg(e),e.tag){case 1:return nn(e.type)&&xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ga(),We(tn),We(Lt),sx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rx(e),null;case 13:if(We(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(He),null;case 4:return Ga(),null;case 10:return Zg(e.type._context),null;case 22:case 23:return mx(),null;case 24:return null;default:return null}}var Fd=!1,Mt=!1,c3=typeof WeakSet=="function"?WeakSet:Set,J=null;function ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function Wm(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var b_=!1;function d3(t,e){if(jm=fu,t=ZN(),Kg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,h=0,g=0,m=t,b=null;t:for(;;){for(var I;m!==n||i!==0&&m.nodeType!==3||(c=l+i),m!==a||r!==0&&m.nodeType!==3||(d=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(I=m.firstChild)!==null;)b=m,m=I;for(;;){if(m===t)break t;if(b===n&&++h===i&&(c=l),b===a&&++g===r&&(d=l),(I=m.nextSibling)!==null)break;m=b,b=m.parentNode}m=I}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cm={focusedElem:t,selectionRange:n},fu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var L=T.memoizedProps,ie=T.memoizedState,j=e.stateNode,N=j.getSnapshotBeforeUpdate(e.elementType===e.type?L:Bn(e.type,L),ie);j.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){Ye(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return T=b_,b_=!1,T}function fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Wm(e,n,a)}i=i.next}while(i!==r)}}function uh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Y1(t){var e=t.alternate;e!==null&&(t.alternate=null,Y1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Ao],delete e[Im],delete e[GE],delete e[KE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Q1(t){return t.tag===5||t.tag===3||t.tag===4}function __(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Q1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gu));else if(r!==4&&(t=t.child,t!==null))for(Bm(t,e,n),t=t.sibling;t!==null;)Bm(t,e,n),t=t.sibling}function Vm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vm(t,e,n),t=t.sibling;t!==null;)Vm(t,e,n),t=t.sibling}var kt=null,Vn=!1;function fs(t,e,n){for(n=n.child;n!==null;)J1(t,e,n),n=n.sibling}function J1(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(rh,n)}catch{}switch(n.tag){case 5:Mt||ka(n,e);case 6:var r=kt,i=Vn;kt=null,fs(t,e,n),kt=r,Vn=i,kt!==null&&(Vn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Vn?(t=kt,n=n.stateNode,t.nodeType===8?Ip(t.parentNode,n):t.nodeType===1&&Ip(t,n),Io(t)):Ip(kt,n.stateNode));break;case 4:r=kt,i=Vn,kt=n.stateNode.containerInfo,Vn=!0,fs(t,e,n),kt=r,Vn=i;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Wm(n,e,l),i=i.next}while(i!==r)}fs(t,e,n);break;case 1:if(!Mt&&(ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ye(n,e,c)}fs(t,e,n);break;case 21:fs(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,fs(t,e,n),Mt=r):fs(t,e,n);break;default:fs(t,e,n)}}function w_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c3),e.forEach(function(r){var i=y3.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:kt=c.stateNode,Vn=!1;break e;case 3:kt=c.stateNode.containerInfo,Vn=!0;break e;case 4:kt=c.stateNode.containerInfo,Vn=!0;break e}c=c.return}if(kt===null)throw Error(U(160));J1(a,l,i),kt=null,Vn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){Ye(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)X1(e,t),e=e.sibling}function X1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),ir(t),r&4){try{fo(3,t,t.return),uh(3,t)}catch(L){Ye(t,t.return,L)}try{fo(5,t,t.return)}catch(L){Ye(t,t.return,L)}}break;case 1:Wn(e,t),ir(t),r&512&&n!==null&&ka(n,n.return);break;case 5:if(Wn(e,t),ir(t),r&512&&n!==null&&ka(n,n.return),t.flags&32){var i=t.stateNode;try{jo(i,"")}catch(L){Ye(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&bN(i,a),pm(c,l);var h=pm(c,a);for(l=0;l<d.length;l+=2){var g=d[l],m=d[l+1];g==="style"?CN(i,m):g==="dangerouslySetInnerHTML"?NN(i,m):g==="children"?jo(i,m):Og(i,g,m,h)}switch(c){case"input":cm(i,a);break;case"textarea":_N(i,a);break;case"select":var b=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var I=a.value;I!=null?Ta(i,!!a.multiple,I,!1):b!==!!a.multiple&&(a.defaultValue!=null?Ta(i,!!a.multiple,a.defaultValue,!0):Ta(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ao]=a}catch(L){Ye(t,t.return,L)}}break;case 6:if(Wn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(L){Ye(t,t.return,L)}}break;case 3:if(Wn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Io(e.containerInfo)}catch(L){Ye(t,t.return,L)}break;case 4:Wn(e,t),ir(t);break;case 13:Wn(e,t),ir(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(fx=tt())),r&4&&w_(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(h=Mt)||g,Wn(e,t),Mt=h):Wn(e,t),ir(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(J=t,g=t.child;g!==null;){for(m=J=g;J!==null;){switch(b=J,I=b.child,b.tag){case 0:case 11:case 14:case 15:fo(4,b,b.return);break;case 1:ka(b,b.return);var T=b.stateNode;if(typeof T.componentWillUnmount=="function"){r=b,n=b.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(L){Ye(r,n,L)}}break;case 5:ka(b,b.return);break;case 22:if(b.memoizedState!==null){j_(m);continue}}I!==null?(I.return=b,J=I):j_(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{i=m.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,d=m.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=jN("display",l))}catch(L){Ye(t,t.return,L)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(L){Ye(t,t.return,L)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wn(e,t),ir(t),r&4&&w_(t);break;case 21:break;default:Wn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Q1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jo(i,""),r.flags&=-33);var a=__(t);Vm(t,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=__(t);Bm(t,c,l);break;default:throw Error(U(161))}}catch(d){Ye(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u3(t,e,n){J=t,Z1(t)}function Z1(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Fd;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Mt;c=Fd;var h=Mt;if(Fd=l,(Mt=d)&&!h)for(J=i;J!==null;)l=J,d=l.child,l.tag===22&&l.memoizedState!==null?C_(i):d!==null?(d.return=l,J=d):C_(i);for(;a!==null;)J=a,Z1(a),a=a.sibling;J=i,Fd=c,Mt=h}N_(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,J=a):N_(t)}}function N_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||uh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&l_(e,a,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l_(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Io(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Mt||e.flags&512&&zm(e)}catch(b){Ye(e,e.return,b)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function j_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function C_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uh(4,e)}catch(d){Ye(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){Ye(e,i,d)}}var a=e.return;try{zm(e)}catch(d){Ye(e,a,d)}break;case 5:var l=e.return;try{zm(e)}catch(d){Ye(e,l,d)}}}catch(d){Ye(e,e.return,d)}if(e===t){J=null;break}var c=e.sibling;if(c!==null){c.return=e.return,J=c;break}J=e.return}}var h3=Math.ceil,ku=es.ReactCurrentDispatcher,ux=es.ReactCurrentOwner,Pn=es.ReactCurrentBatchConfig,we=0,wt=null,it=null,It=0,un=0,Ia=qs(0),ct=0,Uo=null,Ai=0,hh=0,hx=0,po=null,Jt=null,fx=0,qa=1/0,Dr=null,Iu=!1,Hm=null,Ts=null,Ud=!1,_s=null,Eu=0,mo=0,Gm=null,tu=-1,nu=0;function Bt(){return we&6?tt():tu!==-1?tu:tu=tt()}function Rs(t){return t.mode&1?we&2&&It!==0?It&-It:YE.transition!==null?(nu===0&&(nu=LN()),nu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:VN(t.type)),t):1}function qn(t,e,n,r){if(50<mo)throw mo=0,Gm=null,Error(U(185));ic(t,n,r),(!(we&2)||t!==wt)&&(t===wt&&(!(we&2)&&(hh|=n),ct===4&&ys(t,It)),rn(t,r),n===1&&we===0&&!(e.mode&1)&&(qa=tt()+500,oh&&Ys()))}function rn(t,e){var n=t.callbackNode;YI(t,e);var r=hu(t,t===wt?It:0);if(r===0)n!==null&&Ob(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ob(n),e===1)t.tag===0?qE(S_.bind(null,t)):c1(S_.bind(null,t)),VE(function(){!(we&6)&&Ys()}),n=null;else{switch(FN(r)){case 1:n=Ug;break;case 4:n=MN;break;case 16:n=uu;break;case 536870912:n=DN;break;default:n=uu}n=lj(n,ej.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ej(t,e){if(tu=-1,nu=0,we&6)throw Error(U(327));var n=t.callbackNode;if(Ma()&&t.callbackNode!==n)return null;var r=hu(t,t===wt?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tu(t,r);else{e=r;var i=we;we|=2;var a=nj();(wt!==t||It!==e)&&(Dr=null,qa=tt()+500,Ci(t,e));do try{m3();break}catch(c){tj(t,c)}while(!0);Xg(),ku.current=a,we=i,it!==null?e=0:(wt=null,It=0,e=ct)}if(e!==0){if(e===2&&(i=ym(t),i!==0&&(r=i,e=Km(t,i))),e===1)throw n=Uo,Ci(t,0),ys(t,r),rn(t,tt()),n;if(e===6)ys(t,r);else{if(i=t.current.alternate,!(r&30)&&!f3(i)&&(e=Tu(t,r),e===2&&(a=ym(t),a!==0&&(r=a,e=Km(t,a))),e===1))throw n=Uo,Ci(t,0),ys(t,r),rn(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:xi(t,Jt,Dr);break;case 3:if(ys(t,r),(r&130023424)===r&&(e=fx+500-tt(),10<e)){if(hu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=km(xi.bind(null,t,Jt,Dr),e);break}xi(t,Jt,Dr);break;case 4:if(ys(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Kn(r);a=1<<l,l=e[l],l>i&&(i=l),r&=~a}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*h3(r/1960))-r,10<r){t.timeoutHandle=km(xi.bind(null,t,Jt,Dr),r);break}xi(t,Jt,Dr);break;case 5:xi(t,Jt,Dr);break;default:throw Error(U(329))}}}return rn(t,tt()),t.callbackNode===n?ej.bind(null,t):null}function Km(t,e){var n=po;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=Tu(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&qm(e)),t}function qm(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function f3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Jn(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ys(t,e){for(e&=~hx,e&=~hh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function S_(t){if(we&6)throw Error(U(327));Ma();var e=hu(t,0);if(!(e&1))return rn(t,tt()),null;var n=Tu(t,e);if(t.tag!==0&&n===2){var r=ym(t);r!==0&&(e=r,n=Km(t,r))}if(n===1)throw n=Uo,Ci(t,0),ys(t,e),rn(t,tt()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xi(t,Jt,Dr),rn(t,tt()),null}function px(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(qa=tt()+500,oh&&Ys())}}function Oi(t){_s!==null&&_s.tag===0&&!(we&6)&&Ma();var e=we;we|=1;var n=Pn.transition,r=Te;try{if(Pn.transition=null,Te=1,t)return t()}finally{Te=r,Pn.transition=n,we=e,!(we&6)&&Ys()}}function mx(){un=Ia.current,We(Ia)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BE(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Yg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xu();break;case 3:Ga(),We(tn),We(Lt),sx();break;case 5:rx(r);break;case 4:Ga();break;case 13:We(He);break;case 19:We(He);break;case 10:Zg(r.type._context);break;case 22:case 23:mx()}n=n.return}if(wt=t,it=t=Ps(t.current,null),It=un=e,ct=0,Uo=null,hx=hh=Ai=0,Jt=po=null,_i!==null){for(e=0;e<_i.length;e++)if(n=_i[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}n.pending=r}_i=null}return t}function tj(t,e){do{var n=it;try{if(Xg(),Xd.current=Su,Cu){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cu=!1}if(Pi=0,vt=lt=Ke=null,ho=!1,Do=0,ux.current=null,n===null||n.return===null){ct=1,Uo=e,it=null;break}e:{var a=t,l=n.return,c=n,d=e;if(e=It,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var b=g.alternate;b?(g.updateQueue=b.updateQueue,g.memoizedState=b.memoizedState,g.lanes=b.lanes):(g.updateQueue=null,g.memoizedState=null)}var I=f_(l);if(I!==null){I.flags&=-257,p_(I,l,c,a,e),I.mode&1&&h_(a,h,e),e=I,d=h;var T=e.updateQueue;if(T===null){var L=new Set;L.add(d),e.updateQueue=L}else T.add(d);break e}else{if(!(e&1)){h_(a,h,e),gx();break e}d=Error(U(426))}}else if(ze&&c.mode&1){var ie=f_(l);if(ie!==null){!(ie.flags&65536)&&(ie.flags|=256),p_(ie,l,c,a,e),Qg(Ka(d,c));break e}}a=d=Ka(d,c),ct!==4&&(ct=2),po===null?po=[a]:po.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var j=F1(a,d,e);a_(a,j);break e;case 1:c=d;var N=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ts===null||!Ts.has(C)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=U1(a,c,e);a_(a,A);break e}}a=a.return}while(a!==null)}sj(n)}catch(q){e=q,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function nj(){var t=ku.current;return ku.current=Su,t===null?Su:t}function gx(){(ct===0||ct===3||ct===2)&&(ct=4),wt===null||!(Ai&268435455)&&!(hh&268435455)||ys(wt,It)}function Tu(t,e){var n=we;we|=2;var r=nj();(wt!==t||It!==e)&&(Dr=null,Ci(t,e));do try{p3();break}catch(i){tj(t,i)}while(!0);if(Xg(),we=n,ku.current=r,it!==null)throw Error(U(261));return wt=null,It=0,ct}function p3(){for(;it!==null;)rj(it)}function m3(){for(;it!==null&&!$I();)rj(it)}function rj(t){var e=aj(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?sj(t):it=e,ux.current=null}function sj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o3(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(n=l3(n,e,un),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ct===0&&(ct=5)}function xi(t,e,n){var r=Te,i=Pn.transition;try{Pn.transition=null,Te=1,g3(t,e,n,r)}finally{Pn.transition=i,Te=r}return null}function g3(t,e,n,r){do Ma();while(_s!==null);if(we&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(QI(t,a),t===wt&&(it=wt=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ud||(Ud=!0,lj(uu,function(){return Ma(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var l=Te;Te=1;var c=we;we|=4,ux.current=null,d3(t,n),X1(n,t),DE(Cm),fu=!!jm,Cm=jm=null,t.current=n,u3(n),WI(),we=c,Te=l,Pn.transition=a}else t.current=n;if(Ud&&(Ud=!1,_s=t,Eu=i),a=t.pendingLanes,a===0&&(Ts=null),VI(n.stateNode),rn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Iu)throw Iu=!1,t=Hm,Hm=null,t;return Eu&1&&t.tag!==0&&Ma(),a=t.pendingLanes,a&1?t===Gm?mo++:(mo=0,Gm=t):mo=0,Ys(),null}function Ma(){if(_s!==null){var t=FN(Eu),e=Pn.transition,n=Te;try{if(Pn.transition=null,Te=16>t?16:t,_s===null)var r=!1;else{if(t=_s,_s=null,Eu=0,we&6)throw Error(U(331));var i=we;for(we|=4,J=t.current;J!==null;){var a=J,l=a.child;if(J.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(J=h;J!==null;){var g=J;switch(g.tag){case 0:case 11:case 15:fo(8,g,a)}var m=g.child;if(m!==null)m.return=g,J=m;else for(;J!==null;){g=J;var b=g.sibling,I=g.return;if(Y1(g),g===h){J=null;break}if(b!==null){b.return=I,J=b;break}J=I}}}var T=a.alternate;if(T!==null){var L=T.child;if(L!==null){T.child=null;do{var ie=L.sibling;L.sibling=null,L=ie}while(L!==null)}}J=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,J=l;else e:for(;J!==null;){if(a=J,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fo(9,a,a.return)}var j=a.sibling;if(j!==null){j.return=a.return,J=j;break e}J=a.return}}var N=t.current;for(J=N;J!==null;){l=J;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,J=C;else e:for(l=N;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:uh(9,c)}}catch(q){Ye(c,c.return,q)}if(c===l){J=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,J=A;break e}J=c.return}}if(we=i,Ys(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(rh,t)}catch{}r=!0}return r}finally{Te=n,Pn.transition=e}}return!1}function k_(t,e,n){e=Ka(n,e),e=F1(t,e,1),t=Es(t,e,1),e=Bt(),t!==null&&(ic(t,1,e),rn(t,e))}function Ye(t,e,n){if(t.tag===3)k_(t,t,n);else for(;e!==null;){if(e.tag===3){k_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ts===null||!Ts.has(r))){t=Ka(n,t),t=U1(e,t,1),e=Es(e,t,1),t=Bt(),e!==null&&(ic(e,1,t),rn(e,t));break}}e=e.return}}function x3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(It&n)===n&&(ct===4||ct===3&&(It&130023424)===It&&500>tt()-fx?Ci(t,0):hx|=n),rn(t,e)}function ij(t,e){e===0&&(t.mode&1?(e=Ed,Ed<<=1,!(Ed&130023424)&&(Ed=4194304)):e=1);var n=Bt();t=Yr(t,e),t!==null&&(ic(t,e,n),rn(t,n))}function v3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ij(t,n)}function y3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),ij(t,n)}var aj;aj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,a3(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,ze&&e.flags&1048576&&d1(e,bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;eu(t,e),t=e.pendingProps;var i=Ba(e,Lt.current);Oa(e,n),i=ax(null,e,r,t,i,n);var a=lx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(a=!0,vu(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tx(e),i.updater=dh,e.stateNode=i,i._reactInternals=e,Om(e,r,t,n),e=Lm(null,e,r,!0,a,n)):(e.tag=0,ze&&a&&qg(e),Wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(eu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_3(r),t=Bn(r,t),i){case 0:e=Dm(null,e,r,t,n);break e;case 1:e=x_(null,e,r,t,n);break e;case 11:e=m_(null,e,r,t,n);break e;case 14:e=g_(null,e,r,Bn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),Dm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),x_(t,e,r,i,n);case 3:e:{if(B1(e),t===null)throw Error(U(387));r=e.pendingProps,a=e.memoizedState,i=a.element,g1(t,e),Nu(e,r,null,n);var l=e.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ka(Error(U(423)),e),e=v_(t,e,r,n,i);break e}else if(r!==i){i=Ka(Error(U(424)),e),e=v_(t,e,r,n,i);break e}else for(mn=Is(e.stateNode.containerInfo.firstChild),xn=e,ze=!0,Hn=null,n=p1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Va(),r===i){e=Qr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return x1(e),t===null&&Rm(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,Sm(r,i)?l=null:a!==null&&Sm(r,a)&&(e.flags|=32),z1(t,e),Wt(t,e,l,n),e.child;case 6:return t===null&&Rm(e),null;case 13:return V1(t,e,n);case 4:return nx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ha(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),m_(t,e,r,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,De(_u,r._currentValue),r._currentValue=l,a!==null)if(Jn(a.value,l)){if(a.children===i.children&&!tn.current){e=Qr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Vr(-1,n&-n),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Pm(a.return,n,e),c.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(U(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Pm(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oa(e,n),i=On(i),r=r(i),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,i=Bn(r,e.pendingProps),i=Bn(r.type,i),g_(t,e,r,i,n);case 15:return $1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),eu(t,e),e.tag=1,nn(r)?(t=!0,vu(e)):t=!1,Oa(e,n),L1(e,r,i),Om(e,r,i,n),Lm(null,e,r,!0,t,n);case 19:return H1(t,e,n);case 22:return W1(t,e,n)}throw Error(U(156,e.tag))};function lj(t,e){return ON(t,e)}function b3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new b3(t,e,n,r)}function xx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _3(t){if(typeof t=="function")return xx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dg)return 11;if(t===Lg)return 14}return 2}function Ps(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ru(t,e,n,r,i,a){var l=2;if(r=t,typeof t=="function")xx(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case va:return Si(n.children,i,a,e);case Mg:l=8,i|=8;break;case sm:return t=En(12,n,e,i|2),t.elementType=sm,t.lanes=a,t;case im:return t=En(13,n,e,i),t.elementType=im,t.lanes=a,t;case am:return t=En(19,n,e,i),t.elementType=am,t.lanes=a,t;case xN:return fh(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mN:l=10;break e;case gN:l=9;break e;case Dg:l=11;break e;case Lg:l=14;break e;case gs:l=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=En(l,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Si(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function fh(t,e,n,r){return t=En(22,t,r,e),t.elementType=xN,t.lanes=n,t.stateNode={isHidden:!1},t}function Dp(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Lp(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xp(0),this.expirationTimes=xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vx(t,e,n,r,i,a,l,c,d){return t=new w3(t,e,n,c,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=En(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tx(a),t}function N3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oj(t){if(!t)return Fs;t=t._reactInternals;e:{if(Bi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(nn(n))return o1(t,n,e)}return e}function cj(t,e,n,r,i,a,l,c,d){return t=vx(n,r,!0,t,i,a,l,c,d),t.context=oj(null),n=t.current,r=Bt(),i=Rs(n),a=Vr(r,i),a.callback=e??null,Es(n,a,i),t.current.lanes=i,ic(t,i,r),rn(t,r),t}function ph(t,e,n,r){var i=e.current,a=Bt(),l=Rs(i);return n=oj(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(a,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Es(i,e,l),t!==null&&(qn(t,i,l,a),Jd(t,i,l)),l}function Ru(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function I_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yx(t,e){I_(t,e),(t=t.alternate)&&I_(t,e)}function j3(){return null}var dj=typeof reportError=="function"?reportError:function(t){console.error(t)};function bx(t){this._internalRoot=t}mh.prototype.render=bx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));ph(t,e,null,null)};mh.prototype.unmount=bx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oi(function(){ph(null,t,null,null)}),e[qr]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=WN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vs.length&&e!==0&&e<vs[n].priority;n++);vs.splice(n,0,t),n===0&&BN(t)}};function _x(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E_(){}function C3(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var h=Ru(l);a.call(h)}}var l=cj(e,r,t,0,null,!1,!1,"",E_);return t._reactRootContainer=l,t[qr]=l.current,Ro(t.nodeType===8?t.parentNode:t),Oi(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var h=Ru(d);c.call(h)}}var d=vx(t,0,!1,null,null,!1,!1,"",E_);return t._reactRootContainer=d,t[qr]=d.current,Ro(t.nodeType===8?t.parentNode:t),Oi(function(){ph(e,d,n,r)}),d}function xh(t,e,n,r,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var c=i;i=function(){var d=Ru(l);c.call(d)}}ph(e,l,t,i)}else l=C3(n,e,t,i,r);return Ru(l)}UN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=no(e.pendingLanes);n!==0&&($g(e,n|1),rn(e,tt()),!(we&6)&&(qa=tt()+500,Ys()))}break;case 13:Oi(function(){var r=Yr(t,1);if(r!==null){var i=Bt();qn(r,t,1,i)}}),yx(t,1)}};Wg=function(t){if(t.tag===13){var e=Yr(t,134217728);if(e!==null){var n=Bt();qn(e,t,134217728,n)}yx(t,134217728)}};$N=function(t){if(t.tag===13){var e=Rs(t),n=Yr(t,e);if(n!==null){var r=Bt();qn(n,t,e,r)}yx(t,e)}};WN=function(){return Te};zN=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};gm=function(t,e,n){switch(e){case"input":if(cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lh(r);if(!i)throw Error(U(90));yN(r),cm(r,i)}}}break;case"textarea":_N(t,n);break;case"select":e=n.value,e!=null&&Ta(t,!!n.multiple,e,!1)}};IN=px;EN=Oi;var S3={usingClientEntryPoint:!1,Events:[lc,wa,lh,SN,kN,px]},Gl={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k3={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PN(t),t===null?null:t.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||j3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{rh=$d.inject(k3),fr=$d}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S3;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_x(e))throw Error(U(200));return N3(t,e,null,n)};_n.createRoot=function(t,e){if(!_x(t))throw Error(U(299));var n=!1,r="",i=dj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vx(t,1,!1,null,null,n,!1,r,i),t[qr]=e.current,Ro(t.nodeType===8?t.parentNode:t),new bx(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=PN(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return Oi(t)};_n.hydrate=function(t,e,n){if(!gh(e))throw Error(U(200));return xh(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!_x(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",l=dj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=cj(e,null,t,1,n??null,i,!1,a,l),t[qr]=e.current,Ro(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mh(e)};_n.render=function(t,e,n){if(!gh(e))throw Error(U(200));return xh(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!gh(t))throw Error(U(40));return t._reactRootContainer?(Oi(function(){xh(null,null,t,!1,function(){t._reactRootContainer=null,t[qr]=null})}),!0):!1};_n.unstable_batchedUpdates=px;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return xh(t,e,n,!1,r)};_n.version="18.3.1-next-f1338f8080-20240426";function uj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uj)}catch(t){console.error(t)}}uj(),uN.exports=_n;var I3=uN.exports,T_=I3;nm.createRoot=T_.createRoot,nm.hydrateRoot=T_.hydrateRoot;var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(t,e){if(!t)throw ll(e)},ll=function(t){return new Error("Firebase Database ("+hj.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},E3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],c=t[n++],d=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},wx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,c=l?t[i+1]:0,d=i+2<t.length,h=d?t[i+2]:0,g=a>>2,m=(a&3)<<4|c>>4;let b=(c&15)<<2|h>>6,I=h&63;d||(I=64,l||(b=64)),r.push(n[g],n[m],n[b],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||m==null)throw new T3;const b=a<<2|c>>4;if(r.push(b),h!==64){const I=c<<4&240|h>>2;if(r.push(I),m!==64){const T=h<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class T3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pj=function(t){const e=fj(t);return wx.encodeByteArray(e,!0)},Pu=function(t){return pj(t).replace(/\./g,"")},Au=function(t){try{return wx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t){return $o(void 0,t)}function $o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!P3(n)||(t[n]=$o(t[n],e[n]));return t}function P3(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=()=>mj().__FIREBASE_DEFAULTS__,O3=()=>{if(typeof process>"u"||typeof R_>"u")return;const t=R_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},M3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Au(t[1]);return e&&JSON.parse(e)},Nx=()=>{try{return A3()||O3()||M3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gj=()=>{var t;return(t=Nx())===null||t===void 0?void 0:t.config},D3=t=>{var e;return(e=Nx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pu(JSON.stringify(n)),Pu(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function xj(){var t;const e=(t=Nx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F3(){return typeof window<"u"||vj()}function vj(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function U3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bj(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $3(){return hj.NODE_ADMIN===!0}function Ou(){try{return typeof indexedDB=="object"}catch{return!1}}function W3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="FirebaseError";class sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z3,Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?B3(a,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new sn(i,c,r)}}function B3(t,e){return t.replace(V3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const V3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){return JSON.parse(t)}function ot(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=function(t){let e={},n={},r={},i="";try{const a=t.split(".");e=Wo(Au(a[0])||""),n=Wo(Au(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},H3=function(t){const e=_j(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},G3=function(t){const e=_j(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Mu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Du(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ym(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(P_(a)&&P_(l)){if(!Ym(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function P_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function so(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)r[m]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)r[m]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let m=16;m<80;m++){const b=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=(b<<1|b>>>31)&4294967295}let i=this.chain_[0],a=this.chain_[1],l=this.chain_[2],c=this.chain_[3],d=this.chain_[4],h,g;for(let m=0;m<80;m++){m<40?m<20?(h=c^a&(l^c),g=1518500249):(h=a^l^c,g=1859775393):m<60?(h=a&l|c&(a|l),g=2400959708):(h=a^l^c,g=3395469782);const b=(i<<5|i>>>27)+h+d+g+r[m]&4294967295;d=c,c=l,l=(a<<30|a>>>2)&4294967295,a=i,i=b}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const a=this.buf_;let l=this.inbuf_;for(;i<n;){if(l===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(a[l]=e.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(a),l=0;break}}else for(;i<n;)if(a[l]=e[i],++l,++i,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}function wj(t,e){const n=new q3(t,e);return n.subscribe.bind(n)}class q3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Y3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fp),i.error===void 0&&(i.error=Fp),i.complete===void 0&&(i.complete=Fp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fp(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const a=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(a)}};function an(t,e){return`${t} failed: ${e} argument `}function yt(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(an(t,e)+"must be a valid function.")}function A_(t,e,n,r){if(n&&(typeof n!="object"||n===null))throw new Error(an(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const a=i-55296;r++,W(r<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(r)-56320;i=65536+(a<<10)+l}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yh=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){return t&&t._delegate?t._delegate:t}class Dn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Xt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X3(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J3(t){return t===vi?void 0:t}function X3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=[];var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const Nj={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Z3=Ee.INFO,eT={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},tT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cc{constructor(e){this.name=e,this._logLevel=Z3,this._logHandler=tT,this._userLogHandler=null,Sx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}function nT(t){Sx.forEach(e=>{e.setLogLevel(t)})}function rT(t,e){for(const n of Sx){let r=null;e&&e.level&&(r=Nj[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,a,...l)=>{const c=l.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");a>=(r??i.logLevel)&&t({level:Ee[a].toLowerCase(),message:c,args:l,type:i.name})}}}const sT=(t,e)=>e.some(n=>t instanceof n);let O_,M_;function iT(){return O_||(O_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aT(){return M_||(M_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jj=new WeakMap,Jm=new WeakMap,Cj=new WeakMap,Up=new WeakMap,kx=new WeakMap;function lT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(As(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&jj.set(n,t)}).catch(()=>{}),kx.set(e,t),e}function oT(t){if(Jm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Jm.set(t,e)}let Xm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cT(t){Xm=t(Xm)}function dT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($p(this),e,...n);return Cj.set(r,e.sort?e.sort():[e]),As(r)}:aT().includes(t)?function(...e){return t.apply($p(this),e),As(jj.get(this))}:function(...e){return As(t.apply($p(this),e))}}function uT(t){return typeof t=="function"?dT(t):(t instanceof IDBTransaction&&oT(t),sT(t,iT())?new Proxy(t,Xm):t)}function As(t){if(t instanceof IDBRequest)return lT(t);if(Up.has(t))return Up.get(t);const e=uT(t);return e!==t&&(Up.set(t,e),kx.set(e,t)),e}const $p=t=>kx.get(t);function hT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),c=As(l);return r&&l.addEventListener("upgradeneeded",d=>{r(As(l.result),d.oldVersion,d.newVersion,As(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const fT=["get","getKey","getAll","getAllKeys","count"],pT=["put","add","delete","clear"],Wp=new Map;function D_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fT.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&d.done]))[0]};return Wp.set(e,a),a}cT(t=>({...t,get:(e,n,r)=>D_(e,n)||t.get(e,n,r),has:(e,n)=>!!D_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lu="@firebase/app",Zm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new cc("@firebase/app"),xT="@firebase/app-compat",vT="@firebase/analytics-compat",yT="@firebase/analytics",bT="@firebase/app-check-compat",_T="@firebase/app-check",wT="@firebase/auth",NT="@firebase/auth-compat",jT="@firebase/database",CT="@firebase/data-connect",ST="@firebase/database-compat",kT="@firebase/functions",IT="@firebase/functions-compat",ET="@firebase/installations",TT="@firebase/installations-compat",RT="@firebase/messaging",PT="@firebase/messaging-compat",AT="@firebase/performance",OT="@firebase/performance-compat",MT="@firebase/remote-config",DT="@firebase/remote-config-compat",LT="@firebase/storage",FT="@firebase/storage-compat",UT="@firebase/firestore",$T="@firebase/vertexai-preview",WT="@firebase/firestore-compat",zT="firebase",BT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]",VT={[Lu]:"fire-core",[xT]:"fire-core-compat",[yT]:"fire-analytics",[vT]:"fire-analytics-compat",[_T]:"fire-app-check",[bT]:"fire-app-check-compat",[wT]:"fire-auth",[NT]:"fire-auth-compat",[jT]:"fire-rtdb",[CT]:"fire-data-connect",[ST]:"fire-rtdb-compat",[kT]:"fire-fn",[IT]:"fire-fn-compat",[ET]:"fire-iid",[TT]:"fire-iid-compat",[RT]:"fire-fcm",[PT]:"fire-fcm-compat",[AT]:"fire-perf",[OT]:"fire-perf-compat",[MT]:"fire-rc",[DT]:"fire-rc-compat",[LT]:"fire-gcs",[FT]:"fire-gcs-compat",[UT]:"fire-fst",[WT]:"fire-fst-compat",[$T]:"fire-vertex","fire-js":"fire-js",[zT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Map,Ya=new Map,Qa=new Map;function zo(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sj(t,e){t.container.addOrOverwriteComponent(e)}function Ws(t){const e=t.name;if(Qa.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;Qa.set(e,t);for(const n of $s.values())zo(n,t);for(const n of Ya.values())zo(n,t);return!0}function kj(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function HT(t,e,n=Us){kj(t,e).clearInstance(n)}function Ij(t){return t.options!==void 0}function Qe(t){return t.settings!==void 0}function GT(){Qa.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},An=new Vi("app","Firebase",KT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ej=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends Ej{constructor(e,n,r,i){const a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,l={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,i);else{const c=e;super(c.options,l,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Yn(Lu,Zm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ex(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw An.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=BT;function Ix(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Us,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw An.create("bad-app-name",{appName:String(i)});if(n||(n=gj()),!n)throw An.create("no-options");const a=$s.get(i);if(a){if(Ym(n,a.options)&&Ym(r,a.config))return a;throw An.create("duplicate-app",{appName:i})}const l=new Cx(i);for(const d of Qa.values())l.addComponent(d);const c=new Ej(n,r,l);return $s.set(i,c),c}function YT(t,e){if(F3()&&!vj())throw An.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Ij(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((g,m)=>Math.imul(31,g)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw An.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(r)),l=Ya.get(a);if(l)return l.incRefCount(e.releaseOnDeref),l;const c=new Cx(a);for(const h of Qa.values())c.addComponent(h);const d=new qT(n,e,a,c);return Ya.set(a,d),d}function QT(t=Us){const e=$s.get(t);if(!e&&t===Us&&gj())return Ix();if(!e)throw An.create("no-app",{appName:t});return e}function JT(){return Array.from($s.values())}async function Ex(t){let e=!1;const n=t.name;$s.has(n)?(e=!0,$s.delete(n)):Ya.has(n)&&t.decRefCount()<=0&&(Ya.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Yn(t,e,n){var r;let i=(r=VT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(c.join(" "));return}Ws(new Dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Tj(t,e){if(t!==null&&typeof t!="function")throw An.create("invalid-log-argument");rT(t,e)}function Rj(t){nT(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebase-heartbeat-database",ZT=1,Bo="firebase-heartbeat-store";let zp=null;function Pj(){return zp||(zp=hT(XT,ZT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw An.create("idb-open",{originalErrorMessage:t.message})})),zp}async function eR(t){try{const n=(await Pj()).transaction(Bo),r=await n.objectStore(Bo).get(Aj(t));return await n.done,r}catch(e){if(e instanceof sn)Jr.warn(e.message);else{const n=An.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jr.warn(n.message)}}}async function L_(t,e){try{const r=(await Pj()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,Aj(t)),await r.done}catch(n){if(n instanceof sn)Jr.warn(n.message);else{const r=An.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jr.warn(r.message)}}}function Aj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=1024,nR=30*24*60*60*1e3;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=nR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F_(),{heartbeatsToSend:r,unsentEntries:i}=sR(this._heartbeatsCache.heartbeats),a=Pu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Jr.warn(n),""}}}function F_(){return new Date().toISOString().substring(0,10)}function sR(t,e=tR){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),U_(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),U_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ou()?W3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return L_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return L_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function U_(t){return Pu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){Ws(new Dn("platform-logger",e=>new mT(e),"PRIVATE")),Ws(new Dn("heartbeat",e=>new rR(e),"PRIVATE")),Yn(Lu,Zm,t),Yn(Lu,Zm,"esm2017"),Yn("fire-js","")}aR("");const lR=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:sn,SDK_VERSION:Qs,_DEFAULT_ENTRY_NAME:Us,_addComponent:zo,_addOrOverwriteComponent:Sj,_apps:$s,_clearComponents:GT,_components:Qa,_getProvider:kj,_isFirebaseApp:Ij,_isFirebaseServerApp:Qe,_registerComponent:Ws,_removeServiceInstance:HT,_serverApps:Ya,deleteApp:Ex,getApp:QT,getApps:JT,initializeApp:Ix,initializeServerApp:YT,onLog:Tj,registerVersion:Yn,setLogLevel:Rj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this._delegate=e,this.firebase=n,zo(e,new Dn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ex(this._delegate)))}_getService(e,n=Us){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Us){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){zo(this._delegate,e)}_addOrOverwriteComponent(e){Sj(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},$_=new Vi("app-compat","Firebase",cR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){const e={},n={__esModule:!0,initializeApp:a,app:i,registerVersion:Yn,setLogLevel:Rj,onLog:Tj,apps:null,SDK_VERSION:Qs,INTERNAL:{registerComponent:c,removeApp:r,useAsService:d,modularAPIs:lR}};n.default=n,Object.defineProperty(n,"apps",{get:l});function r(h){delete e[h]}function i(h){if(h=h||Us,!yn(e,h))throw $_.create("no-app",{appName:h});return e[h]}i.App=t;function a(h,g={}){const m=Ix(h,g);if(yn(e,m.name))return e[m.name];const b=new t(m,n);return e[m.name]=b,b}function l(){return Object.keys(e).map(h=>e[h])}function c(h){const g=h.name,m=g.replace("-compat","");if(Ws(h)&&h.type==="PUBLIC"){const b=(I=i())=>{if(typeof I[m]!="function")throw $_.create("invalid-app-argument",{appName:g});return I[m]()};h.serviceProps!==void 0&&$o(b,h.serviceProps),n[m]=b,t.prototype[m]=function(...I){return this._getService.bind(this,g).apply(this,h.multipleInstances?I:[])}}return h.type==="PUBLIC"?n[m]:null}function d(h,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(){const t=dR(oR);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Oj,extendNamespace:e,createSubscribe:wj,ErrorFactory:Vi,deepExtend:$o});function e(n){$o(t,n)}return t}const uR=Oj();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new cc("@firebase/app-compat"),hR="@firebase/app-compat",fR="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){Yn(hR,fR,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=mj();if(t.firebase!==void 0){W_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&W_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const hn=uR;pR();var mR="firebase",gR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.registerVersion(mR,gR,"app-compat");function Tx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Kl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ma={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Mj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=xR,yR=Mj,Dj=new Vi("auth","Firebase",Mj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new cc("@firebase/auth");function bR(t,...e){Fu.logLevel<=Ee.WARN&&Fu.warn(`Auth (${Qs}): ${t}`,...e)}function su(t,...e){Fu.logLevel<=Ee.ERROR&&Fu.error(`Auth (${Qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,...e){throw Px(t,...e)}function dt(t,...e){return Px(t,...e)}function Rx(t,e,n){const r=Object.assign(Object.assign({},yR()),{[e]:n});return new Vi("auth","Firebase",r).create(e,{appName:t.name})}function Nt(t){return Rx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ol(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tt(t,"argument-error"),Rx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Px(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Dj.create(t,...e)}function $(t,e,...n){if(!t)throw Px(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw su(e),new Error(e)}function Xn(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ax(){return z_()==="http:"||z_()==="https:"}function z_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ax()||yj()||"connection"in navigator)?navigator.onLine:!0}function wR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=jx()||vh()}get(){return _R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new dc(3e4,6e4);function Xe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ze(t,e,n,r,i={}){return Fj(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const c=Hi(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return U3()||(h.referrerPolicy="no-referrer"),Lj.fetch()(Uj(t,t.config.apiHost,n,c),h)})}async function Fj(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},NR),e);try{const i=new SR(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw io(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw io(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw io(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw io(t,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Rx(t,g,h);Tt(t,g)}}catch(i){if(i instanceof sn)throw i;Tt(t,"network-request-failed",{message:String(i)})}}async function ts(t,e,n,r,i={}){const a=await Ze(t,e,n,r,i);return"mfaPendingCredential"in a&&Tt(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Uj(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ox(t.config,i):`${t.config.apiScheme}://${i}`}function CR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dt(this.auth,"network-request-failed")),jR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function io(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){return t!==void 0&&t.getResponse!==void 0}function V_(t){return t!==void 0&&t.enterprise!==void 0}class kR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t){return(await Ze(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ER(t,e){return Ze(t,"GET","/v2/recaptchaConfig",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e){return Ze(t,"POST","/v1/accounts:delete",e)}async function RR(t,e){return Ze(t,"POST","/v1/accounts:update",e)}async function $j(t,e){return Ze(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PR(t,e=!1){const n=me(t),r=await n.getIdToken(e),i=bh(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:go(Bp(i.auth_time)),issuedAtTime:go(Bp(i.iat)),expirationTime:go(Bp(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bp(t){return Number(t)*1e3}function bh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const i=Au(n);return i?JSON.parse(i):(su("Failed to decode base64 JWT payload"),null)}catch(i){return su("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function H_(t){const e=bh(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sn&&AR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xr(t,$j(n,{idToken:r}));$(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Wj(a.providerUserInfo):[],c=DR(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new eg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,m)}async function MR(t){const e=me(t);await Ho(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Wj(t){return t.map(e=>{var{providerId:n}=e,r=Tx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e){const n=await Fj(t,{},async()=>{const r=Hi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=Uj(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Lj.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FR(t,e){return Ze(t,"POST","/v2/accounts:revokeToken",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$(e.length!==0,"internal-error");const n=H_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await LR(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Da;return r&&($(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&($(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){$(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $r{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Tx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new eg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Xr(this,this.stsTokenManager.getToken(this.auth,e));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PR(this,e)}reload(){return MR(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ho(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qe(this.auth.app))return Promise.reject(Nt(this.auth));const e=await this.getIdToken();return await Xr(this,TR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,c,d,h,g;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(i=n.email)!==null&&i!==void 0?i:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=n.photoURL)!==null&&l!==void 0?l:void 0,L=(c=n.tenantId)!==null&&c!==void 0?c:void 0,ie=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=n.createdAt)!==null&&h!==void 0?h:void 0,N=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:A,isAnonymous:q,providerData:V,stsTokenManager:X}=n;$(C&&X,e,"internal-error");const te=Da.fromJSON(this.name,X);$(typeof C=="string",e,"internal-error"),ps(m,e.name),ps(b,e.name),$(typeof A=="boolean",e,"internal-error"),$(typeof q=="boolean",e,"internal-error"),ps(I,e.name),ps(T,e.name),ps(L,e.name),ps(ie,e.name),ps(j,e.name),ps(N,e.name);const Re=new $r({uid:C,auth:e,email:b,emailVerified:A,displayName:m,isAnonymous:q,photoURL:T,phoneNumber:I,tenantId:L,stsTokenManager:te,createdAt:j,lastLoginAt:N});return V&&Array.isArray(V)&&(Re.providerData=V.map(ge=>Object.assign({},ge))),ie&&(Re._redirectEventId=ie),Re}static async _fromIdTokenResponse(e,n,r=!1){const i=new Da;i.updateFromServerResponse(n);const a=new $r({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ho(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];$(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Wj(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Da;c.updateFromIdToken(r);const d=new $r({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new eg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new Map;function gn(t){Xn(t instanceof Function,"Expected a class definition");let e=G_.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,G_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zj.type="NONE";const Ja=zj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=ki(this.userKey,i.apiKey,a),this.fullPersistenceKey=ki("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new La(gn(Ja),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||gn(Ja);const l=ki(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=await h._get(l);if(g){const m=$r._fromJSON(e,g);h!==a&&(c=m),a=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new La(a,e,r):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new La(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kj(e))return"Blackberry";if(qj(e))return"Webos";if(Vj(e))return"Safari";if((e.includes("chrome/")||Hj(e))&&!e.includes("edge/"))return"Chrome";if(uc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Bj(t=ut()){return/firefox\//i.test(t)}function Vj(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hj(t=ut()){return/crios\//i.test(t)}function Gj(t=ut()){return/iemobile/i.test(t)}function uc(t=ut()){return/android/i.test(t)}function Kj(t=ut()){return/blackberry/i.test(t)}function qj(t=ut()){return/webos/i.test(t)}function hc(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UR(t=ut()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function $R(t=ut()){var e;return hc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WR(){return bj()&&document.documentMode===10}function Yj(t=ut()){return hc(t)||uc(t)||qj(t)||Kj(t)||/windows phone/i.test(t)||Gj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t,e=[]){let n;switch(t){case"Browser":n=K_(ut());break;case"Worker":n=`${K_(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e={}){return Ze(t,"GET","/v2/passwordPolicy",Xe(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=6;class HR{constructor(e){var n,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:VR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new zR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $j(this,{idToken:e}),r=await $r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qe(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ho(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qe(this.app))return Promise.reject(Nt(this));const n=e?me(e):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qe(this.app)?Promise.reject(Nt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qe(this.app)?Promise.reject(Nt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BR(this),n=new HR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await FR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gn(e)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if($(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Je(t){return me(t)}class q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=wj(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KR(t){fc=t}function Mx(t){return fc.loadJS(t)}function qR(){return fc.recaptchaV2Script}function YR(){return fc.recaptchaEnterpriseScript}function QR(){return fc.gapiScript}function Jj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const JR="recaptcha-enterprise",XR="NO_RECAPTCHA";class ZR{constructor(e){this.type=JR,this.auth=Je(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{ER(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new kR(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function i(a,l,c){const d=window.grecaptcha;V_(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(XR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{r(this.auth).then(c=>{if(!n&&V_(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=YR();d.length!==0&&(d+=c),Mx(d).then(()=>{i(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function Y_(t,e,n,r=!1){const i=new ZR(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Go(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Y_(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Y_(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}function eP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tP(t,e,n){const r=Je(t);$(r._canInitEmulator,r,"emulator-config-failed"),$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),a=Xj(e),{host:l,port:c}=nP(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||rP()}function Xj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nP(t){const e=Xj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Q_(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Q_(l)}}}function Q_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t,e){return Ze(t,"POST","/v1/accounts:resetPassword",Xe(t,e))}async function sP(t,e){return Ze(t,"POST","/v1/accounts:update",e)}async function iP(t,e){return Ze(t,"POST","/v1/accounts:signUp",e)}async function aP(t,e){return Ze(t,"POST","/v1/accounts:update",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e){return ts(t,"POST","/v1/accounts:signInWithPassword",Xe(t,e))}async function _h(t,e){return Ze(t,"POST","/v1/accounts:sendOobCode",Xe(t,e))}async function oP(t,e){return _h(t,e)}async function cP(t,e){return _h(t,e)}async function dP(t,e){return _h(t,e)}async function uP(t,e){return _h(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(t,e){return ts(t,"POST","/v1/accounts:signInWithEmailLink",Xe(t,e))}async function fP(t,e){return ts(t,"POST","/v1/accounts:signInWithEmailLink",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends cl{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ko(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ko(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Go(e,n,"signInWithPassword",lP);case"emailLink":return hP(e,{email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Go(e,r,"signUpPassword",iP);case"emailLink":return fP(e,{idToken:n,email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hr(t,e){return ts(t,"POST","/v1/accounts:signInWithIdp",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="http://localhost";class gr extends cl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Tx(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new gr(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Hr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hr(e,n)}buildRequest(){const e={requestUri:pP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e){return Ze(t,"POST","/v1/accounts:sendVerificationCode",Xe(t,e))}async function gP(t,e){return ts(t,"POST","/v1/accounts:signInWithPhoneNumber",Xe(t,e))}async function xP(t,e){const n=await ts(t,"POST","/v1/accounts:signInWithPhoneNumber",Xe(t,e));if(n.temporaryProof)throw io(t,"account-exists-with-different-credential",n);return n}const vP={USER_NOT_FOUND:"user-not-found"};async function yP(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ts(t,"POST","/v1/accounts:signInWithPhoneNumber",Xe(t,n),vP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends cl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ii({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ii({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return gP(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return xP(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return yP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!n&&!i&&!a?null:new Ii({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _P(t){const e=Ea(so(t)).link,n=e?Ea(so(e)).deep_link_id:null,r=Ea(so(t)).deep_link_id;return(r?Ea(so(r)).link:null)||r||n||e||t}class wh{constructor(e){var n,r,i,a,l,c;const d=Ea(so(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,m=bP((i=d.mode)!==null&&i!==void 0?i:null);$(h&&g&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=g,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=_P(e);try{return new wh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.providerId=Js.PROVIDER_ID}static credential(e,n){return Ko._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wh.parseLink(n);return $(r,"argument-error"),Ko._fromEmailAndCode(e,r.code,r.tenantId)}}Js.PROVIDER_ID="password";Js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fa extends dl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return $("providerId"in n&&"signInMethod"in n,"argument-error"),gr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return $(e.idToken||e.accessToken,"argument-error"),gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:c}=e;if(!r&&!i&&!n&&!a||!c)return null;try{return new Fa(c)._credential({idToken:n,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends dl{constructor(){super("facebook.com")}static credential(e){return gr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gr._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cr.credential(n,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends dl{constructor(){super("github.com")}static credential(e){return gr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="http://localhost";class Xa extends cl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Hr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=n;return!r||!i||!a||r!==i?null:new Xa(r,a)}static _create(e,n){return new Xa(e,n)}buildRequest(){return{requestUri:wP,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="saml.";class Uu extends ns{constructor(e){$(e.startsWith(NP),"argument-error"),super(e)}static credentialFromResult(e){return Uu.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Uu.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Xa.fromJSON(e);return $(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Xa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends dl{constructor(){super("twitter.com")}static credential(e,n){return gr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e){return ts(t,"POST","/v1/accounts:signUp",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await $r._fromIdTokenResponse(e,r,i),l=J_(r);return new Ln({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=J_(r);return new Ln({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function J_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t){var e;if(Qe(t.app))return Promise.reject(Nt(t));const n=Je(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ln({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await e2(n,{returnSecureToken:!0}),i=await Ln._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends sn{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$u.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $u(e,n,r,i)}}function t2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$u._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,e){const n=me(t);await Nh(!0,n,e);const{providerUserInfo:r}=await RR(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=n2(r||[]);return n.providerData=n.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Dx(t,e,n=!1){const r=await Xr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ln._forOperation(t,"link",r)}async function Nh(t,e,n){await Ho(e);const r=n2(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";$(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e,n=!1){const{auth:r}=t;if(Qe(r.app))return Promise.reject(Nt(r));const i="reauthenticate";try{const a=await Xr(t,t2(r,i,e,t),n);$(a.idToken,r,"internal-error");const l=bh(a.idToken);$(l,r,"internal-error");const{sub:c}=l;return $(t.uid===c,r,"user-mismatch"),Ln._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Tt(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t,e,n=!1){if(Qe(t.app))return Promise.reject(Nt(t));const r="signIn",i=await t2(t,r,e),a=await Ln._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function jh(t,e){return s2(Je(t),e)}async function i2(t,e){const n=me(t);return await Nh(!1,n,e.providerId),Dx(n,e)}async function a2(t,e){return r2(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e){return ts(t,"POST","/v1/accounts:signInWithCustomToken",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(t,e){if(Qe(t.app))return Promise.reject(Nt(t));const n=Je(t),r=await SP(n,{token:e,returnSecureToken:!0}),i=await Ln._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Lx._fromServerResponse(e,n):"totpInfo"in n?Fx._fromServerResponse(e,n):Tt(e,"internal-error")}}class Lx extends pc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Lx(n)}}class Fx extends pc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Fx(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t,e,n){var r;$(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),$(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&($(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(t){const e=Je(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IP(t,e,n){const r=Je(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Ch(r,i,n),await Go(r,i,"getOobCode",cP)}async function EP(t,e,n){await Zj(me(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ux(t),r})}async function TP(t,e){await aP(me(t),{oobCode:e})}async function l2(t,e){const n=me(t),r=await Zj(n,{oobCode:e}),i=r.requestType;switch($(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(r.mfaInfo,n,"internal-error");default:$(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=pc._fromServerResponse(Je(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function RP(t,e){const{data:n}=await l2(me(t),e);return n.email}async function PP(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const r=Je(t),l=await Go(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e2).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Ux(t),d}),c=await Ln._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function AP(t,e,n){return Qe(t.app)?Promise.reject(Nt(t)):jh(me(t),Js.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ux(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(t,e,n){const r=Je(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,c){$(c.handleCodeInApp,r,"argument-error"),c&&Ch(r,l,c)}a(i,n),await Go(r,i,"getOobCode",dP)}function MP(t,e){const n=wh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function DP(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const r=me(t),i=Js.credentialWithLink(e,n||Vo());return $(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),jh(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(t,e){return Ze(t,"POST","/v1/accounts:createAuthUri",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(t,e){const n=Ax()?Vo():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await LP(me(t),r);return i||[]}async function UP(t,e){const n=me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Ch(n.auth,i,e);const{email:a}=await oP(n.auth,i);a!==t.email&&await t.reload()}async function $P(t,e,n){const r=me(t),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Ch(r.auth,a,n);const{email:l}=await uP(r.auth,a);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e){return Ze(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=me(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Xr(r,WP(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function BP(t,e){const n=me(t);return Qe(n.auth.app)?Promise.reject(Nt(n.auth)):o2(n,e,null)}function VP(t,e){return o2(me(t),null,e)}async function o2(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const l=await Xr(t,sP(r,a));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const l=(n=(e=bh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new Ua(a,c)}}if(!r)return null;switch(r){case"facebook.com":return new GP(a,i);case"github.com":return new KP(a,i);case"google.com":return new qP(a,i);case"twitter.com":return new YP(a,i,t.screenName||null);case"custom":case"anonymous":return new Ua(a,null);default:return new Ua(a,r,i)}}class Ua{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class c2 extends Ua{constructor(e,n,r,i){super(e,n,r),this.username=i}}class GP extends Ua{constructor(e,n){super(e,"facebook.com",n)}}class KP extends c2{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class qP extends Ua{constructor(e,n){super(e,"google.com",n)}}class YP extends c2{constructor(e,n,r){super(e,"twitter.com",n,r)}}function QP(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:HP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ni("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ni("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ni._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ni._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Je(e),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(c=>pc._fromServerResponse(r,c));$(i.mfaPendingCredential,r,"internal-error");const l=Ni._fromMfaPendingCredential(i.mfaPendingCredential);return new $x(l,a,async c=>{const d=await c._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:d.idToken,refreshToken:d.refreshToken});switch(n.operationType){case"signIn":const g=await Ln._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(g.user),g;case"reauthenticate":return $(n.user,r,"internal-error"),Ln._forOperation(n.user,n.operationType,h);default:Tt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function JP(t,e){var n;const r=me(t),i=e;return $(e.customData.operationType,r,"argument-error"),$((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),$x._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:start",Xe(t,e))}function ZP(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(t,e))}function e4(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(t,e))}class Wx{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>pc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Wx(e)}async getSession(){return Ni._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),a=await Xr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Xr(this.user,e4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Vp=new WeakMap;function t4(t){const e=me(t);return Vp.has(e)||Vp.set(e,Wx._fromUser(e)),Vp.get(e)}const Wu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wu,"1"),this.storage.removeItem(Wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e3,r4=10;class u2 extends d2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);WR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,r4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},n4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}u2.type="LOCAL";const zx=u2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2 extends d2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}h2.type="SESSION";const Di=h2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await s4(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=mc("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(m){const b=m;if(b.data.eventId===h)switch(b.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(b.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(){return window}function a4(t){st().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return typeof st().WorkerGlobalScope<"u"&&typeof st().importScripts=="function"}async function l4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c4(){return Bx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firebaseLocalStorageDb",d4=1,zu="firebaseLocalStorage",p2="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(t,e){return t.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function u4(){const t=indexedDB.deleteDatabase(f2);return new gc(t).toPromise()}function tg(){const t=indexedDB.open(f2,d4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zu,{keyPath:p2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zu)?e(r):(r.close(),await u4(),e(await tg()))})})}async function X_(t,e,n){const r=kh(t,!0).put({[p2]:e,value:n});return new gc(r).toPromise()}async function h4(t,e){const n=kh(t,!1).get(e),r=await new gc(n).toPromise();return r===void 0?null:r.value}function Z_(t,e){const n=kh(t,!0).delete(e);return new gc(n).toPromise()}const f4=800,p4=3;class m2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>p4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(c4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await l4(),!this.activeServiceWorker)return;this.sender=new i4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tg();return await X_(e,Wu,"1"),await Z_(e,Wu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=kh(i,!1).getAll();return new gc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m2.type="LOCAL";const qo=m2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t,e){return Ze(t,"POST","/v2/accounts/mfaSignIn:start",Xe(t,e))}function g4(t,e){return Ze(t,"POST","/v2/accounts/mfaSignIn:finalize",Xe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=500,v4=6e4,Wd=1e12;class y4{constructor(e){this.auth=e,this.counter=Wd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new b4(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Wd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Wd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Wd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class b4{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;$(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=_4(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},v4)},x4))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function _4(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=Jj("rcb"),w4=new dc(3e4,6e4);class N4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=st().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return $(j4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&B_(st().grecaptcha)?Promise.resolve(st().grecaptcha):new Promise((r,i)=>{const a=st().setTimeout(()=>{i(dt(e,"network-request-failed"))},w4.get());st()[Hp]=()=>{st().clearTimeout(a),delete st()[Hp];const c=st().grecaptcha;if(!c||!B_(c)){i(dt(e,"internal-error"));return}const d=c.render;c.render=(h,g)=>{const m=d(h,g);return this.counter++,m},this.hostLanguage=n,r(c)};const l=`${qR()}?${Hi({onload:Hp,render:"explicit",hl:n})}`;Mx(l).catch(()=>{clearTimeout(a),i(dt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=st().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function j4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class C4{async load(e){return new y4(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="recaptcha",S4={theme:"light",type:"image"};let k4=class{constructor(e,n,r=Object.assign({},S4)){this.parameters=r,this.type=g2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Je(e),this.isInvisible=this.parameters.size==="invisible",$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;$(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new C4:new N4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),i(l))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=st()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){$(Ax()&&!Bx(),this.auth,"internal-error"),await I4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await IR(this.auth);$(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function I4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ii._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function E4(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const r=Je(t),i=await Ih(r,e,me(n));return new Vx(i,a=>jh(r,a))}async function T4(t,e,n){const r=me(t);await Nh(!1,r,"phone");const i=await Ih(r.auth,e,me(n));return new Vx(i,a=>i2(r,a))}async function R4(t,e,n){const r=me(t);if(Qe(r.auth.app))return Promise.reject(Nt(r.auth));const i=await Ih(r.auth,e,me(n));return new Vx(i,a=>a2(r,a))}async function Ih(t,e,n){var r;const i=await n.verify();try{$(typeof i=="string",t,"argument-error"),$(n.type===g2,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a)return $(l.type==="enroll",t,"internal-error"),(await XP(t,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{$(l.type==="signin",t,"internal-error");const c=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return $(c,t,"missing-multi-factor-info"),(await m4(t,{mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await mP(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return l}}finally{n._reset()}}async function P4(t,e){const n=me(t);if(Qe(n.auth.app))return Promise.reject(Nt(n.auth));await Dx(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li=class iu{constructor(e){this.providerId=iu.PROVIDER_ID,this.auth=Je(e)}verifyPhoneNumber(e,n){return Ih(this.auth,e,me(n))}static credential(e,n){return Ii._fromVerification(e,n)}static credentialFromResult(e){const n=e;return iu.credentialFromTaggedObject(n)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ii._fromTokenResponse(n,r):null}};Li.PROVIDER_ID="phone";Li.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t,e){return e?gn(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends cl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function A4(t){return s2(t.auth,new Hx(t),t.bypassAuthState)}function O4(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),r2(n,new Hx(t),t.bypassAuthState)}async function M4(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),Dx(n,new Hx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A4;case"linkViaPopup":case"linkViaRedirect":return M4;case"reauthViaPopup":case"reauthViaRedirect":return O4;default:Tt(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new dc(2e3,1e4);async function L4(t,e,n){if(Qe(t.app))return Promise.reject(dt(t,"operation-not-supported-in-this-environment"));const r=Je(t);ol(t,e,ns);const i=Gi(r,n);return new Wr(r,"signInViaPopup",e,i).executeNotNull()}async function F4(t,e,n){const r=me(t);if(Qe(r.auth.app))return Promise.reject(dt(r.auth,"operation-not-supported-in-this-environment"));ol(r.auth,e,ns);const i=Gi(r.auth,n);return new Wr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function U4(t,e,n){const r=me(t);ol(r.auth,e,ns);const i=Gi(r.auth,n);return new Wr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Wr extends x2{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=mc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D4.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="pendingRedirect",xo=new Map;class W4 extends x2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xo.get(this.auth._key());if(!e){try{const r=await z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xo.set(this.auth._key(),e)}return this.bypassAuthState||xo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z4(t,e){const n=y2(e),r=v2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Gx(t,e){return v2(t)._set(y2(e),"true")}function B4(){xo.clear()}function Kx(t,e){xo.set(t._key(),e)}function v2(t){return gn(t._redirectPersistence)}function y2(t){return ki($4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t,e,n){return H4(t,e,n)}async function H4(t,e,n){if(Qe(t.app))return Promise.reject(Nt(t));const r=Je(t);ol(t,e,ns),await r._initializationPromise;const i=Gi(r,n);return await Gx(i,r),i._openRedirect(r,e,"signInViaRedirect")}function G4(t,e,n){return K4(t,e,n)}async function K4(t,e,n){const r=me(t);if(ol(r.auth,e,ns),Qe(r.auth.app))return Promise.reject(Nt(r.auth));await r.auth._initializationPromise;const i=Gi(r.auth,n);await Gx(i,r.auth);const a=await b2(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function q4(t,e,n){return Y4(t,e,n)}async function Y4(t,e,n){const r=me(t);ol(r.auth,e,ns),await r.auth._initializationPromise;const i=Gi(r.auth,n);await Nh(!1,r,e.providerId),await Gx(i,r.auth);const a=await b2(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function Q4(t,e){return await Je(t)._initializationPromise,Eh(t,e,!1)}async function Eh(t,e,n=!1){if(Qe(t.app))return Promise.reject(Nt(t));const r=Je(t),i=Gi(r,e),l=await new W4(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function b2(t){const e=mc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=10*60*1e3;class _2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!w2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J4&&this.cachedEventUids.clear(),this.cachedEventUids.has(ew(e))}saveEventToCache(e){this.cachedEventUids.add(ew(e)),this.lastProcessedEventTime=Date.now()}}function ew(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e={}){return Ze(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e7=/^https?/;async function t7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await N2(t);for(const n of e)try{if(n7(n))return}catch{}Tt(t,"unauthorized-domain")}function n7(t){const e=Vo(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!e7.test(n))return!1;if(Z4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=new dc(3e4,6e4);function tw(){const t=st().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s7(t){return new Promise((e,n)=>{var r,i,a;function l(){tw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tw(),n(dt(t,"network-request-failed"))},timeout:r7.get()})}if(!((i=(r=st().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=st().gapi)===null||a===void 0)&&a.load)l();else{const c=Jj("iframefcb");return st()[c]=()=>{gapi.load?l():n(dt(t,"network-request-failed"))},Mx(`${QR()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw au=null,e})}let au=null;function i7(t){return au=au||s7(t),au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=new dc(5e3,15e3),l7="__/auth/iframe",o7="emulator/auth/iframe",c7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u7(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ox(e,o7):`https://${t.config.authDomain}/${l7}`,r={apiKey:e.apiKey,appName:t.name,v:Qs},i=d7.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Hi(r).slice(1)}`}async function h7(t){const e=await i7(t),n=st().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:u7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c7,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=dt(t,"network-request-failed"),c=st().setTimeout(()=>{a(l)},a7.get());function d(){st().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p7=500,m7=600,g7="_blank",x7="http://localhost";class nw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v7(t,e,n,r=p7,i=m7){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},f7),{width:r.toString(),height:i.toString(),top:a,left:l}),h=ut().toLowerCase();n&&(c=Hj(h)?g7:n),Bj(h)&&(e=e||x7,d.scrollbars="yes");const g=Object.entries(d).reduce((b,[I,T])=>`${b}${I}=${T},`,"");if($R(h)&&c!=="_self")return y7(e||"",c),new nw(null);const m=window.open(e||"",c,g);$(m,t,"popup-blocked");try{m.focus()}catch{}return new nw(m)}function y7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7="__/auth/handler",_7="emulator/auth/handler",w7=encodeURIComponent("fac");async function ng(t,e,n,r,i,a){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qs,eventId:i};if(e instanceof ns){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",Mu(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries(a||{}))l[g]=m}if(e instanceof dl){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),h=d?`#${w7}=${encodeURIComponent(d)}`:"";return`${N7(t)}?${Hi(c).slice(1)}${h}`}function N7({config:t}){return t.emulator?Ox(t,_7):`https://${t.authDomain}/${b7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class j7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Di,this._completeRedirectFn=Eh,this._overrideRedirectResult=Kx}async _openPopup(e,n,r,i){var a;Xn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await ng(e,n,r,Vo(),i);return v7(e,l,mc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await ng(e,n,r,Vo(),i);return a4(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Xn(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h7(e),r=new _2(e);return n.register("authEvent",i=>($(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gp,{type:Gp},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Gp];l!==void 0&&n(!!l),Tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Yj()||Vj()||hc()}}const C7=j7;class S7{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return hr("unexpected MultiFactorSessionType")}}}class qx extends S7{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new qx(e)}_finalizeEnroll(e,n,r){return ZP(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return g4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class j2{constructor(){}static assertion(e){return qx._fromCredential(e)}}j2.FACTOR_ID="phone";var rw="@firebase/auth",sw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E7(t){Ws(new Dn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;$(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qj(t)},h=new GR(r,i,a,d);return eP(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ws(new Dn("auth-internal",e=>{const n=Je(e.getProvider("auth").getImmediate());return(r=>new k7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(rw,sw,I7(t)),Yn(rw,sw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=5*60;D3("authIdTokenMaxAge");function R7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=dt("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",R7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E7("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=2e3;async function A7(t,e,n){var r;const{BuildInfo:i}=Fi();Xn(e.sessionId,"AuthEvent did not contain a session ID");const a=await F7(e.sessionId),l={};return hc()?l.ibi=i.packageName:uc()?l.apn=i.packageName:Tt(t,"operation-not-supported-in-this-environment"),i.displayName&&(l.appDisplayName=i.displayName),l.sessionId=a,ng(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,l)}async function O7(t){const{BuildInfo:e}=Fi(),n={};hc()?n.iosBundleId=e.packageName:uc()?n.androidPackageName=e.packageName:Tt(t,"operation-not-supported-in-this-environment"),await N2(t,n)}function M7(t){const{cordova:e}=Fi();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,UR()?"_blank":"_system","location=yes"),n(i)})})}async function D7(t,e,n){const{cordova:r}=Fi();let i=()=>{};try{await new Promise((a,l)=>{let c=null;function d(){var m;a();const b=(m=r.plugins.browsertab)===null||m===void 0?void 0:m.close;typeof b=="function"&&b(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){c||(c=window.setTimeout(()=>{l(dt(t,"redirect-cancelled-by-user"))},P7))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(d),document.addEventListener("resume",h,!1),uc()&&document.addEventListener("visibilitychange",g,!1),i=()=>{e.removePassiveListener(d),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",g,!1),c&&window.clearTimeout(c)}})}finally{i()}}function L7(t){var e,n,r,i,a,l,c,d,h,g;const m=Fi();$(typeof((e=m==null?void 0:m.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof((n=m==null?void 0:m.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$(typeof((a=(i=(r=m==null?void 0:m.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((d=(c=(l=m==null?void 0:m.cordova)===null||l===void 0?void 0:l.plugins)===null||c===void 0?void 0:c.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((g=(h=m==null?void 0:m.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function F7(t){const e=U7(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function U7(t){if(Xn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=20;class W7 extends _2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function z7(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:H7(),postBody:null,tenantId:t.tenantId,error:dt(t,"no-auth-event")}}function B7(t,e){return rg()._set(sg(t),e)}async function iw(t){const e=await rg()._get(sg(t));return e&&await rg()._remove(sg(t)),e}function V7(t,e){var n,r;const i=K7(e);if(i.includes("/__/auth/callback")){const a=lu(i),l=a.firebaseError?G7(decodeURIComponent(a.firebaseError)):null,c=(r=(n=l==null?void 0:l.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],d=c?dt(c):null;return d?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function H7(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<$7;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function rg(){return gn(zx)}function sg(t){return ki("authEvent",t.config.apiKey,t.name)}function G7(t){try{return JSON.parse(t)}catch{return null}}function K7(t){const e=lu(t),n=e.link?decodeURIComponent(e.link):void 0,r=lu(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return lu(i).link||i||r||n||t}function lu(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ea(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7=500;class Y7{constructor(){this._redirectPersistence=Di,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Eh,this._overrideRedirectResult=Kx}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new W7(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Tt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){L7(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),B4(),await this._originValidation(e);const l=z7(e,r,i);await B7(e,l);const c=await A7(e,l,n),d=await M7(c);return D7(e,a,d)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O7(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=Fi(),l=setTimeout(async()=>{await iw(e),n.onEvent(aw())},q7),c=async g=>{clearTimeout(l);const m=await iw(e);let b=null;m&&(g!=null&&g.url)&&(b=V7(m,g.url)),n.onEvent(b||aw())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,c);const d=i,h=`${a.packageName.toLowerCase()}://`;Fi().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(h)&&c({url:g}),typeof d=="function")try{d(g)}catch(m){console.error(m)}}}}const Q7=Y7;function aw(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(t,e){Je(t)._logFramework(e)}var X7="@firebase/auth-compat",Z7="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=1e3;function vo(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function t5(){return vo()==="http:"||vo()==="https:"}function C2(t=ut()){return!!((vo()==="file:"||vo()==="ionic:"||vo()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function n5(){return vh()||xj()}function r5(){return bj()&&(document==null?void 0:document.documentMode)===11}function s5(t=ut()){return/Edge\/\d+/.test(t)}function i5(t=ut()){return r5()||s5(t)}function S2(){try{const t=self.localStorage,e=mc();if(t)return t.setItem(e,"1"),t.removeItem(e),i5()?Ou():!0}catch{return Yx()&&Ou()}return!1}function Yx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kp(){return(t5()||yj()||C2())&&!n5()&&S2()&&!Yx()}function k2(){return C2()&&typeof document<"u"}async function a5(){return k2()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},e5);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function l5(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn={LOCAL:"local",NONE:"none",SESSION:"session"},ql=$,I2="persistence";function o5(t,e){if(ql(Object.values(fn).includes(e),t,"invalid-persistence-type"),vh()){ql(e!==fn.SESSION,t,"unsupported-persistence-type");return}if(xj()){ql(e===fn.NONE,t,"unsupported-persistence-type");return}if(Yx()){ql(e===fn.NONE||e===fn.LOCAL&&Ou(),t,"unsupported-persistence-type");return}ql(e===fn.NONE||S2(),t,"unsupported-persistence-type")}async function ig(t){await t._initializationPromise;const e=E2(),n=ki(I2,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function c5(t,e){const n=E2();if(!n)return[];const r=ki(I2,t,e);switch(n.getItem(r)){case fn.NONE:return[Ja];case fn.LOCAL:return[qo,Di];case fn.SESSION:return[Di];default:return[]}}function E2(){var t;try{return((t=l5())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=$;class ws{constructor(){this.browserResolver=gn(C7),this.cordovaResolver=gn(Q7),this.underlyingResolver=null,this._redirectPersistence=Di,this._completeRedirectFn=Eh,this._overrideRedirectResult=Kx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return k2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return d5(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await a5();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){return t.unwrap()}function u5(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t){return R2(t)}function f5(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new p5(t,JP(t,e))}else if(r){const i=R2(e),a=e;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function R2(t){const{_tokenResponse:e}=t instanceof sn?t.customData:t;if(!e)return null;if(!(t instanceof sn)&&"temporaryProof"in e&&"phoneNumber"in e)return Li.credentialFromResult(t);const n=e.providerId;if(!n||n===Kl.PASSWORD)return null;let r;switch(n){case Kl.GOOGLE:r=cr;break;case Kl.FACEBOOK:r=or;break;case Kl.GITHUB:r=dr;break;case Kl.TWITTER:r=ur;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:c,nonce:d}=e;return!a&&!l&&!i&&!c?null:c?n.startsWith("saml.")?Xa._create(n,c):gr._fromParams({providerId:n,signInMethod:n,pendingToken:c,idToken:i,accessToken:a}):new Fa(n).credential({idToken:i,accessToken:a,rawNonce:d})}return t instanceof sn?r.credentialFromError(t):r.credentialFromResult(t)}function Qt(t,e){return e.catch(n=>{throw n instanceof sn&&f5(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:h5(n),additionalUserInfo:QP(n),user:zr.getOrCreate(i)}})}async function ag(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Qt(t,n.confirm(r))}}class p5{constructor(e,n){this.resolver=n,this.auth=u5(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Qt(T2(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._delegate=e,this.multiFactor=t4(e)}static getOrCreate(e){return zr.USER_MAP.has(e)||zr.USER_MAP.set(e,new zr(e)),zr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Qt(this.auth,i2(this._delegate,e))}async linkWithPhoneNumber(e,n){return ag(this.auth,T4(this._delegate,e,n))}async linkWithPopup(e){return Qt(this.auth,U4(this._delegate,e,ws))}async linkWithRedirect(e){return await ig(Je(this.auth)),q4(this._delegate,e,ws)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Qt(this.auth,a2(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return ag(this.auth,R4(this._delegate,e,n))}reauthenticateWithPopup(e){return Qt(this.auth,F4(this._delegate,e,ws))}async reauthenticateWithRedirect(e){return await ig(Je(this.auth)),G4(this._delegate,e,ws)}sendEmailVerification(e){return UP(this._delegate,e)}async unlink(e){return await CP(this._delegate,e),this}updateEmail(e){return BP(this._delegate,e)}updatePassword(e){return VP(this._delegate,e)}updatePhoneNumber(e){return P4(this._delegate,e)}updateProfile(e){return zP(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return $P(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=$;class lg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Yl(r,"invalid-api-key",{appName:e.name}),Yl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ws:void 0;this._delegate=n.initialize({options:{persistence:m5(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(vR),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){tP(this._delegate,e,n)}applyActionCode(e){return TP(this._delegate,e)}checkActionCode(e){return l2(this._delegate,e)}confirmPasswordReset(e,n){return EP(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Qt(this._delegate,PP(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return FP(this._delegate,e)}isSignInWithEmailLink(e){return MP(this._delegate,e)}async getRedirectResult(){Yl(Kp(),this._delegate,"operation-not-supported-in-this-environment");const e=await Q4(this._delegate,ws);return e?Qt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){J7(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:a,complete:l}=lw(e,n,r);return this._delegate.onAuthStateChanged(i,a,l)}onIdTokenChanged(e,n,r){const{next:i,error:a,complete:l}=lw(e,n,r);return this._delegate.onIdTokenChanged(i,a,l)}sendSignInLinkToEmail(e,n){return OP(this._delegate,e,n)}sendPasswordResetEmail(e,n){return IP(this._delegate,e,n||void 0)}async setPersistence(e){o5(this._delegate,e);let n;switch(e){case fn.SESSION:n=Di;break;case fn.LOCAL:n=await gn(qo)._isAvailable()?qo:zx;break;case fn.NONE:n=Ja;break;default:return Tt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Qt(this._delegate,jP(this._delegate))}signInWithCredential(e){return Qt(this._delegate,jh(this._delegate,e))}signInWithCustomToken(e){return Qt(this._delegate,kP(this._delegate,e))}signInWithEmailAndPassword(e,n){return Qt(this._delegate,AP(this._delegate,e,n))}signInWithEmailLink(e,n){return Qt(this._delegate,DP(this._delegate,e,n))}signInWithPhoneNumber(e,n){return ag(this._delegate,E4(this._delegate,e,n))}async signInWithPopup(e){return Yl(Kp(),this._delegate,"operation-not-supported-in-this-environment"),Qt(this._delegate,L4(this._delegate,e,ws))}async signInWithRedirect(e){return Yl(Kp(),this._delegate,"operation-not-supported-in-this-environment"),await ig(this._delegate),V4(this._delegate,e,ws)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return RP(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}lg.Persistence=fn;function lw(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:l=>i(l&&zr.getOrCreate(l)),error:e,complete:n}}function m5(t,e){const n=c5(t,e);if(typeof self<"u"&&!n.includes(qo)&&n.push(qo),typeof window<"u")for(const r of[zx,Di])n.includes(r)||n.push(r);return n.includes(Ja)||n.push(Ja),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.providerId="phone",this._delegate=new Li(T2(hn.auth()))}static credential(e,n){return Li.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Qx.PHONE_SIGN_IN_METHOD=Li.PHONE_SIGN_IN_METHOD;Qx.PROVIDER_ID=Li.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=$;class x5{constructor(e,n,r=hn.app()){var i;g5((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new k4(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="auth-compat";function y5(t){t.INTERNAL.registerComponent(new Dn(v5,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new lg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ma.EMAIL_SIGNIN,PASSWORD_RESET:ma.PASSWORD_RESET,RECOVER_EMAIL:ma.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ma.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ma.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ma.VERIFY_EMAIL}},EmailAuthProvider:Js,FacebookAuthProvider:or,GithubAuthProvider:dr,GoogleAuthProvider:cr,OAuthProvider:Fa,SAMLAuthProvider:Uu,PhoneAuthProvider:Qx,PhoneMultiFactorGenerator:j2,RecaptchaVerifier:x5,TwitterAuthProvider:ur,Auth:lg,AuthCredential:cl,Error:sn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(X7,Z7)}y5(hn);var ow={};const cw="@firebase/database",dw="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P2="";function A2(t){P2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return yn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new b5(e)}}catch{}return new _5},ji=O2("localStorage"),og=O2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new cc("@firebase/database"),M2=function(){let t=1;return function(){return t++}}(),D2=function(t){const e=Q3(t),n=new K3;n.update(e);const r=n.digest();return wx.encodeByteArray(r)},xc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=xc.apply(null,r):typeof r=="object"?e+=ot(r):e+=r,e+=" "}return e};let Ei=null,uw=!0;const L2=function(t,e){W(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?($a.logLevel=Ee.VERBOSE,Ei=$a.log.bind($a),e&&og.set("logging_enabled",!0)):typeof t=="function"?Ei=t:(Ei=null,og.remove("logging_enabled"))},_t=function(...t){if(uw===!0&&(uw=!1,Ei===null&&og.get("logging_enabled")===!0&&L2(!0)),Ei){const e=xc.apply(null,t);Ei(e)}},vc=function(t){return function(...e){_t(t,...e)}},cg=function(...t){const e="FIREBASE INTERNAL ERROR: "+xc(...t);$a.error(e)},xr=function(...t){const e=`FIREBASE FATAL ERROR: ${xc(...t)}`;throw $a.error(e),new Error(e)},Dt=function(...t){const e="FIREBASE WARNING: "+xc(...t);$a.warn(e)},w5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Dt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Th=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},N5=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},zs="[MIN_NAME]",Zr="[MAX_NAME]",Ki=function(t,e){if(t===e)return 0;if(t===zs||e===Zr)return-1;if(e===zs||t===Zr)return 1;{const n=hw(t),r=hw(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},j5=function(t,e){return t===e?0:t<e?-1:1},Ql=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ot(e))},Jx=function(t){if(typeof t!="object"||t===null)return ot(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ot(e[r]),n+=":",n+=Jx(t[e[r]]);return n+="}",n},F2=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function jt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const U2=function(t){W(!Th(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,a,l,c,d;t===0?(a=0,l=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=c+r,l=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(a=0,l=Math.round(t/Math.pow(2,1-r-n))));const h=[];for(d=n;d;d-=1)h.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)h.push(a%2?1:0),a=Math.floor(a/2);h.push(i?1:0),h.reverse();const g=h.join("");let m="";for(d=0;d<64;d+=8){let b=parseInt(g.substr(d,8),2).toString(16);b.length===1&&(b="0"+b),m=m+b}return m.toLowerCase()},C5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},S5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function k5(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const I5=new RegExp("^-?(0*)\\d{1,10}$"),E5=-2147483648,T5=2147483647,hw=function(t){if(I5.test(t)){const e=Number(t);if(e>=E5&&e<=T5)return e}return null},ul=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Dt("Exception was thrown by user callback.",n),e},Math.floor(0))}},R5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Dt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dt(e)}}class Wa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Wa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="5",$2="v",W2="s",z2="r",B2="f",V2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H2="ls",G2="p",dg="ac",K2="websocket",q2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,i,a=!1,l="",c=!1,d=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ji.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ji.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function O5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Q2(t,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let r;if(e===K2)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===q2)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);O5(t)&&(n.ns=t.namespace);const i=[];return jt(n,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.counters_={}}incrementCounter(e,n=1){yn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return R3(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp={},Yp={};function Zx(t){const e=t.toString();return qp[e]||(qp[e]=new M5),qp[e]}function D5(t,e){const n=t.toString();return Yp[n]||(Yp[n]=e()),Yp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ul(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="start",F5="close",U5="pLPCommand",$5="pRTLPCB",J2="id",X2="pw",Z2="ser",W5="cb",z5="seg",B5="ts",V5="d",H5="dframe",eC=1870,tC=30,G5=eC-tC,K5=25e3,q5=3e4;class Ns{constructor(e,n,r,i,a,l,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vc(e),this.stats_=Zx(n),this.urlFn=d=>(this.appCheckToken&&(d[dg]=this.appCheckToken),Q2(n,q2,d))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new L5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(q5)),N5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new e0((...a)=>{const[l,c,d,h,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===fw)this.id=c,this.password=d;else if(l===F5)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,c]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[fw]="t",r[Z2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[W5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[$2]=Xx,this.transportSessionId&&(r[W2]=this.transportSessionId),this.lastSessionId&&(r[H2]=this.lastSessionId),this.applicationId&&(r[G2]=this.applicationId),this.appCheckToken&&(r[dg]=this.appCheckToken),typeof location<"u"&&location.hostname&&V2.test(location.hostname)&&(r[z2]=B2);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ns.forceAllow_=!0}static forceDisallow(){Ns.forceDisallow_=!0}static isAvailable(){return Ns.forceAllow_?!0:!Ns.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!C5()&&!S5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=pj(n),i=F2(r,G5);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[H5]="t",r[J2]=e,r[X2]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ot(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class e0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=M2(),window[U5+this.uniqueCallbackIdentifier]=e,window[$5+this.uniqueCallbackIdentifier]=n,this.myIFrame=e0.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){_t("frame writing exception"),c.stack&&_t(c.stack),_t(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_t("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[J2]=this.myID,e[X2]=this.myPW,e[Z2]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tC+r.length<=eC;){const l=this.pendingSegs.shift();r=r+"&"+z5+i+"="+l.seg+"&"+B5+i+"="+l.ts+"&"+V5+i+"="+l.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(K5)),a=()=>{clearTimeout(i),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{_t("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=16384,Q5=45e3;let Bu=null;typeof MozWebSocket<"u"?Bu=MozWebSocket:typeof WebSocket<"u"&&(Bu=WebSocket);class In{constructor(e,n,r,i,a,l,c){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vc(this.connId),this.stats_=Zx(n),this.connURL=In.connectionURL_(n,l,c,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,a){const l={};return l[$2]=Xx,typeof location<"u"&&location.hostname&&V2.test(location.hostname)&&(l[z2]=B2),n&&(l[W2]=n),r&&(l[H2]=r),i&&(l[dg]=i),a&&(l[G2]=a),Q2(e,K2,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ji.set("previous_websocket_failure",!0);try{let r;$3(),this.mySock=new Bu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){In.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Bu!==null&&!In.forceDisallow_}static previouslyFailed(){return ji.isInMemoryStorage||ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){ji.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Wo(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F2(n,Y5);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Q5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}In.responsesRequiredToBeHealthy=2;In.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ns,In]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=In&&In.isAvailable();let r=n&&!In.previouslyFailed();if(e.webSocketOnly&&(n||Dt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[In];else{const i=this.transports_=[];for(const a of Za.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a);Za.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Za.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=6e4,X5=5e3,Z5=10*1024,eA=100*1024,Qp="t",pw="d",tA="s",mw="r",nA="e",gw="o",xw="a",vw="n",yw="p",rA="h";class sA{constructor(e,n,r,i,a,l,c,d,h,g){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=d,this.onKill_=h,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vc("c:"+this.id+":"),this.transportManager_=new Za(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>eA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Z5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qp in e){const n=e[Qp];n===xw?this.upgradeIfSecondaryHealthy_():n===mw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===gw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ql("t",e),r=Ql("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ql("t",e),r=Ql("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ql(Qp,e);if(pw in e){const r=e[pw];if(n===rA){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===vw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===tA?this.onConnectionShutdown_(r):n===mw?this.onReset_(r):n===nA?cg("Server Error: "+r):n===gw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xx!==r&&Dt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(J5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(X5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===n&&(!r||r===i[a].context)){i.splice(a,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends rC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vu}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=32,_w=768;class ke{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ne(){return new ke("")}function xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Bs(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function t0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function iA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Yo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function sC(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function Be(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ke(n,0)}function ve(t){return t.pieceNum_>=t.pieces_.length}function zt(t,e){const n=xe(t),r=xe(e);if(n===null)return e;if(n===r)return zt(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function aA(t,e){const n=Yo(t,0),r=Yo(e,0);for(let i=0;i<n.length&&i<r.length;i++){const a=Ki(n[i],r[i]);if(a!==0)return a}return n.length===r.length?0:n.length<r.length?-1:1}function n0(t,e){if(Bs(t)!==Bs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Bs(t)>Bs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class lA{constructor(e,n){this.errorPrefix_=n,this.parts_=Yo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=yh(this.parts_[r]);iC(this)}}function oA(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=yh(e),iC(t)}function cA(t){const e=t.parts_.pop();t.byteLength_-=yh(e),t.parts_.length>0&&(t.byteLength_-=1)}function iC(t){if(t.byteLength_>_w)throw new Error(t.errorPrefix_+"has a key path longer than "+_w+" bytes ("+t.byteLength_+").");if(t.parts_.length>bw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bw+") or object contains a cycle "+yi(t))}function yi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends rC{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new r0}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=1e3,dA=60*5*1e3,ww=30*1e3,uA=1.3,hA=3e4,fA="server_kill",Nw=3;class Gr extends nC{constructor(e,n,r,i,a,l,c,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=Gr.nextPersistentConnectionId_++,this.log_=vc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jl,this.maxReconnectDelay_=dA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");r0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,a={r:i,a:e,b:n};this.log_(ot(a)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Xt,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,i){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(l).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const a={p:r},l="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,c=>{const d=c.d,h=c.s;Gr.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(h,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&yn(e,"w")){const r=Mi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Dt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||G3(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ww)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=H3(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const a=i.s,l=i.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const a={p:e},l="n";i&&(a.q=r,a.t=i),this.sendRequest(l,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{i&&setTimeout(()=>{i(l.s,l.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,a){this.initConnection_();const l={p:n,d:r};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ot(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):cg("Unrecognized action received from server: "+ot(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hA&&(this.reconnectDelay_=Jl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*uA)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Gr.nextConnectionId_++,a=this.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,r())},h=function(m){W(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:d,sendRequest:h};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,b]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=b&&b.token,c=new sA(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,I=>{Dt(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(fA)},a))}catch(m){this.log_("Failed to get token: "+m),l||(this.repoInfo_.nodeAdmin&&Dt(m),d())}}}interrupt(e){_t("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_t("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Mu(this.interruptReasons_)&&(this.reconnectDelay_=Jl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>Jx(a)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ke(e).toString();let i;if(this.listens.has(r)){const a=this.listens.get(r);i=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){_t("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Nw&&(this.reconnectDelay_=ww,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_t("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Nw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+P2.replace(/\./g,"-")]=1,jx()?e["framework.cordova"]=1:vh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vu.getInstance().currentlyOnline();return Mu(this.interruptReasons_)&&e}}Gr.nextPersistentConnectionId_=0;Gr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new be(zs,e),i=new be(zs,n);return this.compare(r,i)!==0}minPost(){return be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd;class aC extends Rh{static get __EMPTY_NODE(){return zd}static set __EMPTY_NODE(e){zd=e}compare(e,n){return Ki(e.name,n.name)}isDefinedOn(e){throw ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(Zr,zd)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,zd)}toString(){return".key"}}const mr=new aC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?r(e.key,n):1,i&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??bt.RED,this.left=i??en.EMPTY_NODE,this.right=a??en.EMPTY_NODE}copy(e,n,r,i,a){return new bt(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return a<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return en.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return en.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class pA{copy(e,n,r,i,a){return this}insert(e,n,r){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class en{constructor(e,n=en.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new en(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new en(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Bd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Bd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Bd(this.root_,null,this.comparator_,!0,e)}}en.EMPTY_NODE=new pA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e){return Ki(t.name,e.name)}function s0(t,e){return Ki(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug;function gA(t){ug=t}const lC=function(t){return typeof t=="number"?"number:"+U2(t):"string:"+t},oC=function(t){if(t.isLeafNode()){const e=t.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yn(e,".sv"),"Priority must be a string or number.")}else W(t===ug||t.isEmpty(),"priority of unexpected type.");W(t===ug||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jw;class xt{constructor(e,n=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oC(this.priorityNode_)}static set __childrenNodeConstructor(e){jw=e}static get __childrenNodeConstructor(){return jw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ve(e)?this:xe(e)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=xe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(W(r!==".priority"||Bs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lC(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=U2(this.value_):e+=this.value_,this.lazyHash_=D2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xt.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=xt.VALUE_TYPE_ORDER.indexOf(n),a=xt.VALUE_TYPE_ORDER.indexOf(r);return W(i>=0,"Unknown leaf type: "+n),W(a>=0,"Unknown leaf type: "+r),i===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cC,dC;function xA(t){cC=t}function vA(t){dC=t}class yA extends Rh{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),a=r.compareTo(i);return a===0?Ki(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(Zr,new xt("[PRIORITY-POST]",dC))}makePost(e,n){const r=cC(e);return new be(n,new xt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Le=new yA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=Math.log(2);class _A{constructor(e){const n=a=>parseInt(Math.log(a)/bA,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hu=function(t,e,n,r){t.sort(e);const i=function(d,h){const g=h-d;let m,b;if(g===0)return null;if(g===1)return m=t[d],b=n?n(m):m,new bt(b,m.node,bt.BLACK,null,null);{const I=parseInt(g/2,10)+d,T=i(d,I),L=i(I+1,h);return m=t[I],b=n?n(m):m,new bt(b,m.node,bt.BLACK,T,L)}},a=function(d){let h=null,g=null,m=t.length;const b=function(T,L){const ie=m-T,j=m;m-=T;const N=i(ie+1,j),C=t[ie],A=n?n(C):C;I(new bt(A,C.node,L,null,N))},I=function(T){h?(h.left=T,h=T):(g=T,h=T)};for(let T=0;T<d.count;++T){const L=d.nextBitIsOne(),ie=Math.pow(2,d.count-(T+1));L?b(ie,bt.BLACK):(b(ie,bt.BLACK),b(ie,bt.RED))}return g},l=new _A(t.length),c=a(l);return new en(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp;const ga={};class Br{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return W(ga&&Le,"ChildrenNode.ts has not been loaded"),Jp=Jp||new Br({".priority":ga},{".priority":Le}),Jp}get(e){const n=Mi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof en?n:null}hasIndex(e){return yn(this.indexSet_,e.toString())}addIndex(e,n){W(e!==mr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=n.getIterator(be.Wrap);let l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();let c;i?c=Hu(r,e.getCompare()):c=ga;const d=e.toString(),h=Object.assign({},this.indexSet_);h[d]=e;const g=Object.assign({},this.indexes_);return g[d]=c,new Br(g,h)}addToIndexes(e,n){const r=Du(this.indexes_,(i,a)=>{const l=Mi(this.indexSet_,a);if(W(l,"Missing index implementation for "+a),i===ga)if(l.isDefinedOn(e.node)){const c=[],d=n.getIterator(be.Wrap);let h=d.getNext();for(;h;)h.name!==e.name&&c.push(h),h=d.getNext();return c.push(e),Hu(c,l.getCompare())}else return ga;else{const c=n.get(e.name);let d=i;return c&&(d=d.remove(new be(e.name,c))),d.insert(e,e.node)}});return new Br(r,this.indexSet_)}removeFromIndexes(e,n){const r=Du(this.indexes_,i=>{if(i===ga)return i;{const a=n.get(e.name);return a?i.remove(new be(e.name,a)):i}});return new Br(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl;class ce{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&oC(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xl||(Xl=new ce(new en(s0),null,Br.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xl}updatePriority(e){return this.children_.isEmpty()?this:new ce(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xl:n}}getChild(e){const n=xe(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new be(e,n);let i,a;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const l=i.isEmpty()?Xl:this.priorityNode_;return new ce(i,l,a)}}updateChild(e,n){const r=xe(e);if(r===null)return n;{W(xe(e)!==".priority"||Bs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Oe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,a=!0;if(this.forEachChild(Le,(l,c)=>{n[l]=c.val(e),r++,a&&ce.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):a=!1}),!e&&a&&i<2*r){const l=[];for(const c in n)l[c]=n[c];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+lC(this.getPriority().val())+":"),this.forEachChild(Le,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":D2(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const a=i.getPredecessorKey(new be(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,be.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)<0;)i.getNext(),a=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,be.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)>0;)i.getNext(),a=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yc?-1:0}withIndex(e){if(e===mr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ce(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===mr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Le),i=n.getIterator(Le);let a=r.getNext(),l=i.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=r.getNext(),l=i.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===mr?null:this.indexMap_.get(e.toString())}}ce.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class wA extends ce{constructor(){super(new en(s0),ce.EMPTY_NODE,Br.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ce.EMPTY_NODE}isEmpty(){return!1}}const yc=new wA;Object.defineProperties(be,{MIN:{value:new be(zs,ce.EMPTY_NODE)},MAX:{value:new be(Zr,yc)}});aC.__EMPTY_NODE=ce.EMPTY_NODE;xt.__childrenNodeConstructor=ce;gA(yc);vA(yc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=!0;function Ge(t,e=null){if(t===null)return ce.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new xt(n,Ge(e))}if(!(t instanceof Array)&&NA){const n=[];let r=!1;if(jt(t,(l,c)=>{if(l.substring(0,1)!=="."){const d=Ge(c);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),n.push(new be(l,d)))}}),n.length===0)return ce.EMPTY_NODE;const a=Hu(n,mA,l=>l.name,s0);if(r){const l=Hu(n,Le.getCompare());return new ce(a,Ge(e),new Br({".priority":l},{".priority":Le}))}else return new ce(a,Ge(e),Br.Default)}else{let n=ce.EMPTY_NODE;return jt(t,(r,i)=>{if(yn(t,r)&&r.substring(0,1)!=="."){const a=Ge(i);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(Ge(e))}}xA(Ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends Rh{constructor(e){super(),this.indexPath_=e,W(!ve(e)&&xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),a=r.compareTo(i);return a===0?Ki(e.name,n.name):a}makePost(e,n){const r=Ge(e),i=ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(n,i)}maxPost(){const e=ce.EMPTY_NODE.updateChild(this.indexPath_,yc);return new be(Zr,e)}toString(){return Yo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends Rh{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ki(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){const r=Ge(e);return new be(n,r)}toString(){return".value"}}const a0=new jA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){return{type:"value",snapshotNode:t}}function el(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Qo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Jo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function CA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.index_=e}updateChild(e,n,r,i,a,l){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?e.hasChild(n)?l.trackChildChange(Qo(n,c)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(el(n,r)):l.trackChildChange(Jo(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Le,(i,a)=>{n.hasChild(i)||r.trackChildChange(Qo(i,a))}),n.isLeafNode()||n.forEachChild(Le,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Jo(i,a,l))}else r.trackChildChange(el(i,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ce.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.indexedFilter_=new l0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xo.getStartPost_(e),this.endPost_=Xo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,a,l){return this.matches(new be(n,r))||(r=ce.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,a,l)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ce.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ce.EMPTY_NODE);const a=this;return n.forEachChild(Le,(l,c)=>{a.matches(new be(l,c))||(i=i.updateImmediateChild(l,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Xo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,a,l){return this.rangedFilter_.matches(new be(n,r))||(r=ce.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,a,l):this.fullLimitUpdateChild_(e,n,r,a,l)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ce.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ce.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const c=a.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))i=i.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ce.EMPTY_NODE);let a;this.reverse_?a=i.getReverseIterator(this.index_):a=i.getIterator(this.index_);let l=0;for(;a.hasNext();){const c=a.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:i=i.updateImmediateChild(c.name,ce.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,a){let l;if(this.reverse_){const m=this.index_.getCompare();l=(b,I)=>m(I,b)}else l=this.index_.getCompare();const c=e;W(c.numChildren()===this.limit_,"");const d=new be(n,r),h=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(c.hasChild(n)){const m=c.getImmediateChild(n);let b=i.getChildAfterChild(this.index_,h,this.reverse_);for(;b!=null&&(b.name===n||c.hasChild(b.name));)b=i.getChildAfterChild(this.index_,b,this.reverse_);const I=b==null?1:l(b,d);if(g&&!r.isEmpty()&&I>=0)return a!=null&&a.trackChildChange(Jo(n,r,m)),c.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(Qo(n,m));const L=c.updateImmediateChild(n,ce.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(a!=null&&a.trackChildChange(el(b.name,b.node)),L.updateImmediateChild(b.name,b.node)):L}}else return r.isEmpty()?e:g&&l(h,d)>=0?(a!=null&&(a.trackChildChange(Qo(h.name,h.node)),a.trackChildChange(el(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(h.name,ce.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zs}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Le}copy(){const e=new Ph;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kA(t){return t.loadsAllData()?new l0(t.getIndex()):t.hasLimit()?new SA(t):new Xo(t)}function IA(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function EA(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function hg(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function TA(t,e,n){let r;return t.index_===mr||n?r=hg(t,e,n):r=hg(t,e,Zr),r.startAfterSet_=!0,r}function fg(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function RA(t,e,n){let r;return t.index_===mr||n?r=fg(t,e,n):r=fg(t,e,zs),r.endBeforeSet_=!0,r}function Ah(t,e){const n=t.copy();return n.index_=e,n}function Cw(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Le?n="$priority":t.index_===a0?n="$value":t.index_===mr?n="$key":(W(t.index_ instanceof i0,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ot(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ot(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ot(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ot(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ot(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Sw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends nC{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=vc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Gu.getListenId_(e,r),c={};this.listens_[l]=c;const d=Cw(e._queryParams);this.restRequest_(a+".json",d,(h,g)=>{let m=g;if(h===404&&(m=null,h=null),h===null&&this.onDataUpdate_(a,m,!1,r),Mi(this.listens_,l)===c){let b;h?h===401?b="permission_denied":b="rest_error:"+h:b="ok",i(b,null)}})}unlisten(e,n){const r=Gu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Cw(e._queryParams),r=e._path.toString(),i=new Xt;return this.restRequest_(r+".json",n,(a,l)=>{let c=l;a===404&&(c=null,a=null),a===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(n.auth=i.accessToken),a&&a.token&&(n.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Hi(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=Wo(c.responseText)}catch{Dt("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,d)}else c.status!==401&&c.status!==404&&Dt("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(){return{value:null,children:new Map}}function hl(t,e,n){if(ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=xe(e);t.children.has(r)||t.children.set(r,Ku());const i=t.children.get(r);e=Oe(e),hl(i,e,n)}}function pg(t,e){if(ve(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Le,(r,i)=>{hl(t,new ke(r),i)}),pg(t,e)}}else if(t.children.size>0){const n=xe(e);return e=Oe(e),t.children.has(n)&&pg(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function mg(t,e,n){t.value!==null?n(e,t.value):AA(t,(r,i)=>{const a=new ke(e.toString()+"/"+r);mg(i,a,n)})}function AA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&jt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=10*1e3,MA=30*1e3,DA=5*60*1e3;class LA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new OA(e);const r=kw+(MA-kw)*Math.random();yo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;jt(e,(i,a)=>{a>0&&yn(this.statsToReport_,i)&&(n[i]=a,r=!0)}),r&&this.server_.reportStats(n),yo(this.reportStats_.bind(this),Math.floor(Math.random()*2*DA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Gn||(Gn={}));function o0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function c0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function d0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Gn.ACK_USER_WRITE,this.source=o0()}operationForChild(e){if(ve(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ke(e));return new qu(Ne(),n,this.revert)}}else return W(xe(this.path)===e,"operationForChild called for unrelated child."),new qu(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.source=e,this.path=n,this.type=Gn.LISTEN_COMPLETE}operationForChild(e){return ve(this.path)?new Zo(this.source,Ne()):new Zo(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Gn.OVERWRITE}operationForChild(e){return ve(this.path)?new Ui(this.source,Ne(),this.snap.getImmediateChild(e)):new Ui(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Gn.MERGE}operationForChild(e){if(ve(this.path)){const n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new Ui(this.source,Ne(),n.value):new tl(this.source,Ne(),n)}else return W(xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new tl(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UA(t,e,n,r){const i=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(CA(l.childName,l.snapshotNode))}),Zl(t,i,"child_removed",e,r,n),Zl(t,i,"child_added",e,r,n),Zl(t,i,"child_moved",a,r,n),Zl(t,i,"child_changed",e,r,n),Zl(t,i,"value",e,r,n),i}function Zl(t,e,n,r,i,a){const l=r.filter(c=>c.type===n);l.sort((c,d)=>WA(t,c,d)),l.forEach(c=>{const d=$A(t,c,a);i.forEach(h=>{h.respondsTo(c.type)&&e.push(h.createEvent(d,t.query_))})})}function $A(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function WA(t,e,n){if(e.childName==null||n.childName==null)throw ll("Should only compare child_ events.");const r=new be(e.childName,e.snapshotNode),i=new be(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e){return{eventCache:t,serverCache:e}}function bo(t,e,n,r){return Oh(new Vs(e,n,r),t.serverCache)}function hC(t,e,n,r){return Oh(t.eventCache,new Vs(e,n,r))}function Yu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $i(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xp;const zA=()=>(Xp||(Xp=new en(j5)),Xp);class Me{constructor(e,n=zA()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return jt(e,(r,i)=>{n=n.set(new ke(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ne(),value:this.value};if(ve(e))return null;{const r=xe(e),i=this.children.get(r);if(i!==null){const a=i.findRootMostMatchingPathAndValue(Oe(e),n);return a!=null?{path:Be(new ke(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ve(e))return this;{const n=xe(e),r=this.children.get(n);return r!==null?r.subtree(Oe(e)):new Me(null)}}set(e,n){if(ve(e))return new Me(n,this.children);{const r=xe(e),a=(this.children.get(r)||new Me(null)).set(Oe(e),n),l=this.children.insert(r,a);return new Me(this.value,l)}}remove(e){if(ve(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=xe(e),r=this.children.get(n);if(r){const i=r.remove(Oe(e));let a;return i.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,i),this.value===null&&a.isEmpty()?new Me(null):new Me(this.value,a)}else return this}}get(e){if(ve(e))return this.value;{const n=xe(e),r=this.children.get(n);return r?r.get(Oe(e)):null}}setTree(e,n){if(ve(e))return n;{const r=xe(e),a=(this.children.get(r)||new Me(null)).setTree(Oe(e),n);let l;return a.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,a),new Me(this.value,l)}}fold(e){return this.fold_(Ne(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Be(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ne(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ve(e))return null;{const a=xe(e),l=this.children.get(a);return l?l.findOnPath_(Oe(e),Be(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ne(),n)}foreachOnPath_(e,n,r){if(ve(e))return this;{this.value&&r(n,this.value);const i=xe(e),a=this.children.get(i);return a?a.foreachOnPath_(Oe(e),Be(n,i),r):new Me(null)}}foreach(e){this.foreach_(Ne(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Be(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.writeTree_=e}static empty(){return new Qn(new Me(null))}}function _o(t,e,n){if(ve(e))return new Qn(new Me(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let a=r.value;const l=zt(i,e);return a=a.updateChild(l,n),new Qn(t.writeTree_.set(i,a))}else{const i=new Me(n),a=t.writeTree_.setTree(e,i);return new Qn(a)}}}function gg(t,e,n){let r=t;return jt(n,(i,a)=>{r=_o(r,Be(e,i),a)}),r}function Iw(t,e){if(ve(e))return Qn.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new Qn(n)}}function xg(t,e){return qi(t,e)!=null}function qi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(zt(n.path,e)):null}function Ew(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Le,(r,i)=>{e.push(new be(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new be(r,i.value))}),e}function Os(t,e){if(ve(e))return t;{const n=qi(t,e);return n!=null?new Qn(new Me(n)):new Qn(t.writeTree_.subtree(e))}}function vg(t){return t.writeTree_.isEmpty()}function nl(t,e){return fC(Ne(),t.writeTree_,e)}function fC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{i===".priority"?(W(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=fC(Be(t,i),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Be(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t,e){return xC(e,t)}function BA(t,e,n,r,i){W(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=_o(t.visibleWrites,e,n)),t.lastWriteId=r}function VA(t,e,n,r){W(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=gg(t.visibleWrites,e,n),t.lastWriteId=r}function HA(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function GA(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,a=!1,l=t.allWrites.length-1;for(;i&&l>=0;){const c=t.allWrites[l];c.visible&&(l>=n&&KA(c,r.path)?i=!1:Tn(r.path,c.path)&&(a=!0)),l--}if(i){if(a)return qA(t),!0;if(r.snap)t.visibleWrites=Iw(t.visibleWrites,r.path);else{const c=r.children;jt(c,d=>{t.visibleWrites=Iw(t.visibleWrites,Be(r.path,d))})}return!0}else return!1}function KA(t,e){if(t.snap)return Tn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Tn(Be(t.path,n),e))return!0;return!1}function qA(t){t.visibleWrites=pC(t.allWrites,YA,Ne()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function YA(t){return t.visible}function pC(t,e,n){let r=Qn.empty();for(let i=0;i<t.length;++i){const a=t[i];if(e(a)){const l=a.path;let c;if(a.snap)Tn(n,l)?(c=zt(n,l),r=_o(r,c,a.snap)):Tn(l,n)&&(c=zt(l,n),r=_o(r,Ne(),a.snap.getChild(c)));else if(a.children){if(Tn(n,l))c=zt(n,l),r=gg(r,c,a.children);else if(Tn(l,n))if(c=zt(l,n),ve(c))r=gg(r,Ne(),a.children);else{const d=Mi(a.children,xe(c));if(d){const h=d.getChild(Oe(c));r=_o(r,Ne(),h)}}}else throw ll("WriteRecord should have .snap or .children")}}return r}function mC(t,e,n,r,i){if(!r&&!i){const a=qi(t.visibleWrites,e);if(a!=null)return a;{const l=Os(t.visibleWrites,e);if(vg(l))return n;if(n==null&&!xg(l,Ne()))return null;{const c=n||ce.EMPTY_NODE;return nl(l,c)}}}else{const a=Os(t.visibleWrites,e);if(!i&&vg(a))return n;if(!i&&n==null&&!xg(a,Ne()))return null;{const l=function(h){return(h.visible||i)&&(!r||!~r.indexOf(h.writeId))&&(Tn(h.path,e)||Tn(e,h.path))},c=pC(t.allWrites,l,e),d=n||ce.EMPTY_NODE;return nl(c,d)}}}function QA(t,e,n){let r=ce.EMPTY_NODE;const i=qi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Le,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(n){const a=Os(t.visibleWrites,e);return n.forEachChild(Le,(l,c)=>{const d=nl(Os(a,new ke(l)),c);r=r.updateImmediateChild(l,d)}),Ew(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const a=Os(t.visibleWrites,e);return Ew(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function JA(t,e,n,r,i){W(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Be(e,n);if(xg(t.visibleWrites,a))return null;{const l=Os(t.visibleWrites,a);return vg(l)?i.getChild(n):nl(l,i.getChild(n))}}function XA(t,e,n,r){const i=Be(e,n),a=qi(t.visibleWrites,i);if(a!=null)return a;if(r.isCompleteForChild(n)){const l=Os(t.visibleWrites,i);return nl(l,r.getNode().getImmediateChild(n))}else return null}function ZA(t,e){return qi(t.visibleWrites,e)}function eO(t,e,n,r,i,a,l){let c;const d=Os(t.visibleWrites,e),h=qi(d,Ne());if(h!=null)c=h;else if(n!=null)c=nl(d,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const g=[],m=l.getCompare(),b=a?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let I=b.getNext();for(;I&&g.length<i;)m(I,r)!==0&&g.push(I),I=b.getNext();return g}else return[]}function tO(){return{visibleWrites:Qn.empty(),allWrites:[],lastWriteId:-1}}function Qu(t,e,n,r){return mC(t.writeTree,t.treePath,e,n,r)}function u0(t,e){return QA(t.writeTree,t.treePath,e)}function Tw(t,e,n,r){return JA(t.writeTree,t.treePath,e,n,r)}function Ju(t,e){return ZA(t.writeTree,Be(t.treePath,e))}function nO(t,e,n,r,i,a){return eO(t.writeTree,t.treePath,e,n,r,i,a)}function h0(t,e,n){return XA(t.writeTree,t.treePath,e,n)}function gC(t,e){return xC(Be(t.treePath,e),t.writeTree)}function xC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,Jo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,Qo(r,i.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,el(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,Jo(r,e.snapshotNode,i.oldSnap));else throw ll("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const vC=new sO;class f0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Vs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return h0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$i(this.viewCache_),a=nO(this.writes_,i,n,1,r,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){return{filter:t}}function aO(t,e){W(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function lO(t,e,n,r,i){const a=new rO;let l,c;if(n.type===Gn.OVERWRITE){const h=n;h.source.fromUser?l=yg(t,e,h.path,h.snap,r,i,a):(W(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered()&&!ve(h.path),l=Xu(t,e,h.path,h.snap,r,i,c,a))}else if(n.type===Gn.MERGE){const h=n;h.source.fromUser?l=cO(t,e,h.path,h.children,r,i,a):(W(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered(),l=bg(t,e,h.path,h.children,r,i,c,a))}else if(n.type===Gn.ACK_USER_WRITE){const h=n;h.revert?l=hO(t,e,h.path,r,i,a):l=dO(t,e,h.path,h.affectedTree,r,i,a)}else if(n.type===Gn.LISTEN_COMPLETE)l=uO(t,e,n.path,r,a);else throw ll("Unknown operation type: "+n.type);const d=a.getChanges();return oO(e,l,d),{viewCache:l,changes:d}}function oO(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Yu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(uC(Yu(e)))}}function yC(t,e,n,r,i,a){const l=e.eventCache;if(Ju(r,n)!=null)return e;{let c,d;if(ve(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=$i(e),g=h instanceof ce?h:ce.EMPTY_NODE,m=u0(r,g);c=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const h=Qu(r,$i(e));c=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{const h=xe(n);if(h===".priority"){W(Bs(n)===1,"Can't have a priority with additional path components");const g=l.getNode();d=e.serverCache.getNode();const m=Tw(r,n,g,d);m!=null?c=t.filter.updatePriority(g,m):c=l.getNode()}else{const g=Oe(n);let m;if(l.isCompleteForChild(h)){d=e.serverCache.getNode();const b=Tw(r,n,l.getNode(),d);b!=null?m=l.getNode().getImmediateChild(h).updateChild(g,b):m=l.getNode().getImmediateChild(h)}else m=h0(r,h,e.serverCache);m!=null?c=t.filter.updateChild(l.getNode(),h,m,g,i,a):c=l.getNode()}}return bo(e,c,l.isFullyInitialized()||ve(n),t.filter.filtersNodes())}}function Xu(t,e,n,r,i,a,l,c){const d=e.serverCache;let h;const g=l?t.filter:t.filter.getIndexedFilter();if(ve(n))h=g.updateFullNode(d.getNode(),r,null);else if(g.filtersNodes()&&!d.isFiltered()){const I=d.getNode().updateChild(n,r);h=g.updateFullNode(d.getNode(),I,null)}else{const I=xe(n);if(!d.isCompleteForPath(n)&&Bs(n)>1)return e;const T=Oe(n),ie=d.getNode().getImmediateChild(I).updateChild(T,r);I===".priority"?h=g.updatePriority(d.getNode(),ie):h=g.updateChild(d.getNode(),I,ie,T,vC,null)}const m=hC(e,h,d.isFullyInitialized()||ve(n),g.filtersNodes()),b=new f0(i,m,a);return yC(t,m,n,i,b,c)}function yg(t,e,n,r,i,a,l){const c=e.eventCache;let d,h;const g=new f0(i,e,a);if(ve(n))h=t.filter.updateFullNode(e.eventCache.getNode(),r,l),d=bo(e,h,!0,t.filter.filtersNodes());else{const m=xe(n);if(m===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),r),d=bo(e,h,c.isFullyInitialized(),c.isFiltered());else{const b=Oe(n),I=c.getNode().getImmediateChild(m);let T;if(ve(b))T=r;else{const L=g.getCompleteChild(m);L!=null?t0(b)===".priority"&&L.getChild(sC(b)).isEmpty()?T=L:T=L.updateChild(b,r):T=ce.EMPTY_NODE}if(I.equals(T))d=e;else{const L=t.filter.updateChild(c.getNode(),m,T,b,g,l);d=bo(e,L,c.isFullyInitialized(),t.filter.filtersNodes())}}}return d}function Rw(t,e){return t.eventCache.isCompleteForChild(e)}function cO(t,e,n,r,i,a,l){let c=e;return r.foreach((d,h)=>{const g=Be(n,d);Rw(e,xe(g))&&(c=yg(t,c,g,h,i,a,l))}),r.foreach((d,h)=>{const g=Be(n,d);Rw(e,xe(g))||(c=yg(t,c,g,h,i,a,l))}),c}function Pw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function bg(t,e,n,r,i,a,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,h;ve(n)?h=r:h=new Me(null).setTree(n,r);const g=e.serverCache.getNode();return h.children.inorderTraversal((m,b)=>{if(g.hasChild(m)){const I=e.serverCache.getNode().getImmediateChild(m),T=Pw(t,I,b);d=Xu(t,d,new ke(m),T,i,a,l,c)}}),h.children.inorderTraversal((m,b)=>{const I=!e.serverCache.isCompleteForChild(m)&&b.value===null;if(!g.hasChild(m)&&!I){const T=e.serverCache.getNode().getImmediateChild(m),L=Pw(t,T,b);d=Xu(t,d,new ke(m),L,i,a,l,c)}}),d}function dO(t,e,n,r,i,a,l){if(Ju(i,n)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(ve(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return Xu(t,e,n,d.getNode().getChild(n),i,a,c,l);if(ve(n)){let h=new Me(null);return d.getNode().forEachChild(mr,(g,m)=>{h=h.set(new ke(g),m)}),bg(t,e,n,h,i,a,c,l)}else return e}else{let h=new Me(null);return r.foreach((g,m)=>{const b=Be(n,g);d.isCompleteForPath(b)&&(h=h.set(g,d.getNode().getChild(b)))}),bg(t,e,n,h,i,a,c,l)}}function uO(t,e,n,r,i){const a=e.serverCache,l=hC(e,a.getNode(),a.isFullyInitialized()||ve(n),a.isFiltered());return yC(t,l,n,r,vC,i)}function hO(t,e,n,r,i,a){let l;if(Ju(r,n)!=null)return e;{const c=new f0(r,e,i),d=e.eventCache.getNode();let h;if(ve(n)||xe(n)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Qu(r,$i(e));else{const m=e.serverCache.getNode();W(m instanceof ce,"serverChildren would be complete if leaf node"),g=u0(r,m)}g=g,h=t.filter.updateFullNode(d,g,a)}else{const g=xe(n);let m=h0(r,g,e.serverCache);m==null&&e.serverCache.isCompleteForChild(g)&&(m=d.getImmediateChild(g)),m!=null?h=t.filter.updateChild(d,g,m,Oe(n),c,a):e.eventCache.getNode().hasChild(g)?h=t.filter.updateChild(d,g,ce.EMPTY_NODE,Oe(n),c,a):h=d,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Qu(r,$i(e)),l.isLeafNode()&&(h=t.filter.updateFullNode(h,l,a)))}return l=e.serverCache.isFullyInitialized()||Ju(r,Ne())!=null,bo(e,h,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new l0(r.getIndex()),a=kA(r);this.processor_=iO(a);const l=n.serverCache,c=n.eventCache,d=i.updateFullNode(ce.EMPTY_NODE,l.getNode(),null),h=a.updateFullNode(ce.EMPTY_NODE,c.getNode(),null),g=new Vs(d,l.isFullyInitialized(),i.filtersNodes()),m=new Vs(h,c.isFullyInitialized(),a.filtersNodes());this.viewCache_=Oh(m,g),this.eventGenerator_=new FA(this.query_)}get query(){return this.query_}}function pO(t){return t.viewCache_.serverCache.getNode()}function mO(t){return Yu(t.viewCache_)}function gO(t,e){const n=$i(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ve(e)&&!n.getImmediateChild(xe(e)).isEmpty())?n.getChild(e):null}function Aw(t){return t.eventRegistrations_.length===0}function xO(t,e){t.eventRegistrations_.push(e)}function Ow(t,e,n){const r=[];if(n){W(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(n,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<t.eventRegistrations_.length;++a){const l=t.eventRegistrations_[a];if(!l.matches(e))i.push(l);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Mw(t,e,n,r){e.type===Gn.MERGE&&e.source.queryId!==null&&(W($i(t.viewCache_),"We should always have a full cache before handling merges"),W(Yu(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,a=lO(t.processor_,i,e,n,r);return aO(t.processor_,a.viewCache),W(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,bC(t,a.changes,a.viewCache.eventCache.getNode(),null)}function vO(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Le,(a,l)=>{r.push(el(a,l))}),n.isFullyInitialized()&&r.push(uC(n.getNode())),bC(t,r,n.getNode(),e)}function bC(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return UA(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu;class _C{constructor(){this.views=new Map}}function yO(t){W(!Zu,"__referenceConstructor has already been defined"),Zu=t}function bO(){return W(Zu,"Reference.ts has not been loaded"),Zu}function _O(t){return t.views.size===0}function p0(t,e,n,r){const i=e.source.queryId;if(i!==null){const a=t.views.get(i);return W(a!=null,"SyncTree gave us an op for an invalid query."),Mw(a,e,n,r)}else{let a=[];for(const l of t.views.values())a=a.concat(Mw(l,e,n,r));return a}}function wC(t,e,n,r,i){const a=e._queryIdentifier,l=t.views.get(a);if(!l){let c=Qu(n,i?r:null),d=!1;c?d=!0:r instanceof ce?(c=u0(n,r),d=!1):(c=ce.EMPTY_NODE,d=!1);const h=Oh(new Vs(c,d,!1),new Vs(r,i,!1));return new fO(e,h)}return l}function wO(t,e,n,r,i,a){const l=wC(t,e,r,i,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),xO(l,n),vO(l,n)}function NO(t,e,n,r){const i=e._queryIdentifier,a=[];let l=[];const c=Hs(t);if(i==="default")for(const[d,h]of t.views.entries())l=l.concat(Ow(h,n,r)),Aw(h)&&(t.views.delete(d),h.query._queryParams.loadsAllData()||a.push(h.query));else{const d=t.views.get(i);d&&(l=l.concat(Ow(d,n,r)),Aw(d)&&(t.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return c&&!Hs(t)&&a.push(new(bO())(e._repo,e._path)),{removed:a,events:l}}function NC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ms(t,e){let n=null;for(const r of t.views.values())n=n||gO(r,e);return n}function jC(t,e){if(e._queryParams.loadsAllData())return Dh(t);{const r=e._queryIdentifier;return t.views.get(r)}}function CC(t,e){return jC(t,e)!=null}function Hs(t){return Dh(t)!=null}function Dh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh;function jO(t){W(!eh,"__referenceConstructor has already been defined"),eh=t}function CO(){return W(eh,"Reference.ts has not been loaded"),eh}let SO=1;class Dw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=tO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function m0(t,e,n,r,i){return BA(t.pendingWriteTree_,e,n,r,i),i?fl(t,new Ui(o0(),e,n)):[]}function kO(t,e,n,r){VA(t.pendingWriteTree_,e,n,r);const i=Me.fromObject(n);return fl(t,new tl(o0(),e,i))}function js(t,e,n=!1){const r=HA(t.pendingWriteTree_,e);if(GA(t.pendingWriteTree_,e)){let a=new Me(null);return r.snap!=null?a=a.set(Ne(),!0):jt(r.children,l=>{a=a.set(new ke(l),!0)}),fl(t,new qu(r.path,a,n))}else return[]}function bc(t,e,n){return fl(t,new Ui(c0(),e,n))}function IO(t,e,n){const r=Me.fromObject(n);return fl(t,new tl(c0(),e,r))}function EO(t,e){return fl(t,new Zo(c0(),e))}function TO(t,e,n){const r=g0(t,n);if(r){const i=x0(r),a=i.path,l=i.queryId,c=zt(a,e),d=new Zo(d0(l),c);return v0(t,a,d)}else return[]}function th(t,e,n,r,i=!1){const a=e._path,l=t.syncPointTree_.get(a);let c=[];if(l&&(e._queryIdentifier==="default"||CC(l,e))){const d=NO(l,e,n,r);_O(l)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const h=d.removed;if(c=d.events,!i){const g=h.findIndex(b=>b._queryParams.loadsAllData())!==-1,m=t.syncPointTree_.findOnPath(a,(b,I)=>Hs(I));if(g&&!m){const b=t.syncPointTree_.subtree(a);if(!b.isEmpty()){const I=AO(b);for(let T=0;T<I.length;++T){const L=I[T],ie=L.query,j=EC(t,L);t.listenProvider_.startListening(wo(ie),ec(t,ie),j.hashFn,j.onComplete)}}}!m&&h.length>0&&!r&&(g?t.listenProvider_.stopListening(wo(e),null):h.forEach(b=>{const I=t.queryToTagMap.get(Fh(b));t.listenProvider_.stopListening(wo(b),I)}))}OO(t,h)}return c}function SC(t,e,n,r){const i=g0(t,r);if(i!=null){const a=x0(i),l=a.path,c=a.queryId,d=zt(l,e),h=new Ui(d0(c),d,n);return v0(t,l,h)}else return[]}function RO(t,e,n,r){const i=g0(t,r);if(i){const a=x0(i),l=a.path,c=a.queryId,d=zt(l,e),h=Me.fromObject(n),g=new tl(d0(c),d,h);return v0(t,l,g)}else return[]}function _g(t,e,n,r=!1){const i=e._path;let a=null,l=!1;t.syncPointTree_.foreachOnPath(i,(b,I)=>{const T=zt(b,i);a=a||Ms(I,T),l=l||Hs(I)});let c=t.syncPointTree_.get(i);c?(l=l||Hs(c),a=a||Ms(c,Ne())):(c=new _C,t.syncPointTree_=t.syncPointTree_.set(i,c));let d;a!=null?d=!0:(d=!1,a=ce.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((I,T)=>{const L=Ms(T,Ne());L&&(a=a.updateImmediateChild(I,L))}));const h=CC(c,e);if(!h&&!e._queryParams.loadsAllData()){const b=Fh(e);W(!t.queryToTagMap.has(b),"View does not exist, but we have a tag");const I=MO();t.queryToTagMap.set(b,I),t.tagToQueryMap.set(I,b)}const g=Mh(t.pendingWriteTree_,i);let m=wO(c,e,n,g,a,d);if(!h&&!l&&!r){const b=jC(c,e);m=m.concat(DO(t,e,b))}return m}function Lh(t,e,n){const i=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,c)=>{const d=zt(l,e),h=Ms(c,d);if(h)return h});return mC(i,e,a,n,!0)}function PO(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(h,g)=>{const m=zt(h,n);r=r||Ms(g,m)});let i=t.syncPointTree_.get(n);i?r=r||Ms(i,Ne()):(i=new _C,t.syncPointTree_=t.syncPointTree_.set(n,i));const a=r!=null,l=a?new Vs(r,!0,!1):null,c=Mh(t.pendingWriteTree_,e._path),d=wC(i,e,c,a?l.getNode():ce.EMPTY_NODE,a);return mO(d)}function fl(t,e){return kC(e,t.syncPointTree_,null,Mh(t.pendingWriteTree_,Ne()))}function kC(t,e,n,r){if(ve(t.path))return IC(t,e,n,r);{const i=e.get(Ne());n==null&&i!=null&&(n=Ms(i,Ne()));let a=[];const l=xe(t.path),c=t.operationForChild(l),d=e.children.get(l);if(d&&c){const h=n?n.getImmediateChild(l):null,g=gC(r,l);a=a.concat(kC(c,d,h,g))}return i&&(a=a.concat(p0(i,t,r,n))),a}}function IC(t,e,n,r){const i=e.get(Ne());n==null&&i!=null&&(n=Ms(i,Ne()));let a=[];return e.children.inorderTraversal((l,c)=>{const d=n?n.getImmediateChild(l):null,h=gC(r,l),g=t.operationForChild(l);g&&(a=a.concat(IC(g,c,d,h)))}),i&&(a=a.concat(p0(i,t,r,n))),a}function EC(t,e){const n=e.query,r=ec(t,n);return{hashFn:()=>(pO(e)||ce.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?TO(t,n._path,r):EO(t,n._path);{const a=k5(i,n);return th(t,n,null,a)}}}}function ec(t,e){const n=Fh(e);return t.queryToTagMap.get(n)}function Fh(t){return t._path.toString()+"$"+t._queryIdentifier}function g0(t,e){return t.tagToQueryMap.get(e)}function x0(t){const e=t.indexOf("$");return W(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function v0(t,e,n){const r=t.syncPointTree_.get(e);W(r,"Missing sync point for query tag that we're tracking");const i=Mh(t.pendingWriteTree_,e);return p0(r,n,i,null)}function AO(t){return t.fold((e,n,r)=>{if(n&&Hs(n))return[Dh(n)];{let i=[];return n&&(i=NC(n)),jt(r,(a,l)=>{i=i.concat(l)}),i}})}function wo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(CO())(t._repo,t._path):t}function OO(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Fh(r),a=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(a)}}}function MO(){return SO++}function DO(t,e,n){const r=e._path,i=ec(t,e),a=EC(t,n),l=t.listenProvider_.startListening(wo(e),i,a.hashFn,a.onComplete),c=t.syncPointTree_.subtree(r);if(i)W(!Hs(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((h,g,m)=>{if(!ve(h)&&g&&Hs(g))return[Dh(g).query];{let b=[];return g&&(b=b.concat(NC(g).map(I=>I.query))),jt(m,(I,T)=>{b=b.concat(T)}),b}});for(let h=0;h<d.length;++h){const g=d[h];t.listenProvider_.stopListening(wo(g),ec(t,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new y0(n)}node(){return this.node_}}class b0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Be(this.path_,e);return new b0(this.syncTree_,n)}node(){return Lh(this.syncTree_,this.path_)}}const LO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Lw=function(t,e,n){if(!t||typeof t!="object")return t;if(W(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return FO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return UO(t[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},FO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+t)}},UO=function(t,e,n){t.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&W(!1,"Unexpected increment value: "+r);const i=e.node();if(W(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return typeof l!="number"?r:l+r},TC=function(t,e,n,r){return w0(e,new b0(n,t),r)},_0=function(t,e,n){return w0(t,new y0(e),n)};function w0(t,e,n){const r=t.getPriority().val(),i=Lw(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const l=t,c=Lw(l.getValue(),e,n);return c!==l.getValue()||i!==l.getPriority().val()?new xt(c,Ge(i)):t}else{const l=t;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new xt(i))),l.forEachChild(Le,(c,d)=>{const h=w0(d,e.getImmediateChild(c),n);h!==d&&(a=a.updateImmediateChild(c,h))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Uh(t,e){let n=e instanceof ke?e:new ke(e),r=t,i=xe(n);for(;i!==null;){const a=Mi(r.node.children,i)||{children:{},childCount:0};r=new N0(i,r,a),n=Oe(n),i=xe(n)}return r}function Yi(t){return t.node.value}function j0(t,e){t.node.value=e,wg(t)}function RC(t){return t.node.childCount>0}function $O(t){return Yi(t)===void 0&&!RC(t)}function $h(t,e){jt(t.node.children,(n,r)=>{e(new N0(n,t,r))})}function PC(t,e,n,r){n&&e(t),$h(t,i=>{PC(i,e,!0)})}function WO(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _c(t){return new ke(t.parent===null?t.name:_c(t.parent)+"/"+t.name)}function wg(t){t.parent!==null&&zO(t.parent,t.name,t)}function zO(t,e,n){const r=$O(n),i=yn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,wg(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,wg(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=/[\[\].#$\/\u0000-\u001F\u007F]/,VO=/[\[\].#$\u0000-\u001F\u007F]/,Zp=10*1024*1024,Wh=function(t){return typeof t=="string"&&t.length!==0&&!BO.test(t)},AC=function(t){return typeof t=="string"&&t.length!==0&&!VO.test(t)},HO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),AC(t)},tc=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Th(t)||t&&typeof t=="object"&&yn(t,".sv")},vr=function(t,e,n,r){r&&e===void 0||wc(an(t,"value"),e,n)},wc=function(t,e,n){const r=n instanceof ke?new lA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+yi(r));if(typeof e=="function")throw new Error(t+"contains a function "+yi(r)+" with contents = "+e.toString());if(Th(e))throw new Error(t+"contains "+e.toString()+" "+yi(r));if(typeof e=="string"&&e.length>Zp/3&&yh(e)>Zp)throw new Error(t+"contains a string greater than "+Zp+" utf8 bytes "+yi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,a=!1;if(jt(e,(l,c)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!Wh(l)))throw new Error(t+" contains an invalid key ("+l+") "+yi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oA(r,l),wc(t,c,r),cA(r)}),i&&a)throw new Error(t+' contains ".value" child '+yi(r)+" in addition to actual children.")}},GO=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const a=Yo(r);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!Wh(a[l]))throw new Error(t+"contains an invalid key ("+a[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(aA);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Tn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},OC=function(t,e,n,r){const i=an(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];jt(e,(l,c)=>{const d=new ke(l);if(wc(i,c,Be(n,d)),t0(d)===".priority"&&!tc(c))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(d)}),GO(i,a)},C0=function(t,e,n){if(Th(e))throw new Error(an(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tc(e))throw new Error(an(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Nc=function(t,e,n,r){if(n!==void 0&&!Wh(n))throw new Error(an(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},nc=function(t,e,n,r){if(!AC(n))throw new Error(an(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},KO=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nc(t,e,n)},Rn=function(t,e){if(xe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},MC=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Wh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HO(n))throw new Error(an(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zh(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();n!==null&&!n0(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&t.eventLists_.push(n)}function DC(t,e,n){zh(t,n),LC(t,r=>n0(r,e))}function bn(t,e,n){zh(t,n),LC(t,r=>Tn(r,e)||Tn(e,r))}function LC(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const a=i.path;e(a)?(YO(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function YO(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ei&&_t("event: "+n.toString()),ul(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="repo_interrupt",QO=25;class JO{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ku(),this.transactionQueueTree_=new N0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XO(t,e,n){if(t.stats_=Zx(t.repoInfo_),t.forceRestClient_||R5())t.server_=new Gu(t.repoInfo_,(r,i,a,l)=>{Fw(t,r,i,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Uw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Gr(t.repoInfo_,e,(r,i,a,l)=>{Fw(t,r,i,a,l)},r=>{Uw(t,r)},r=>{ZO(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=D5(t.repoInfo_,()=>new LA(t.stats_,t.server_)),t.infoData_=new PA,t.infoSyncTree_=new Dw({startListening:(r,i,a,l)=>{let c=[];const d=t.infoData_.getNode(r._path);return d.isEmpty()||(c=bc(t.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),S0(t,"connected",!1),t.serverSyncTree_=new Dw({startListening:(r,i,a,l)=>(t.server_.listen(r,a,i,(c,d)=>{const h=l(c,d);bn(t.eventQueue_,r._path,h)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function UC(t){const n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jc(t){return LO({timestamp:UC(t)})}function Fw(t,e,n,r,i){t.dataUpdateCount++;const a=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(i)if(r){const d=Du(n,h=>Ge(h));l=RO(t.serverSyncTree_,a,d,i)}else{const d=Ge(n);l=SC(t.serverSyncTree_,a,d,i)}else if(r){const d=Du(n,h=>Ge(h));l=IO(t.serverSyncTree_,a,d)}else{const d=Ge(n);l=bc(t.serverSyncTree_,a,d)}let c=a;l.length>0&&(c=rl(t,a)),bn(t.eventQueue_,c,l)}function Uw(t,e){S0(t,"connected",e),e===!1&&nM(t)}function ZO(t,e){jt(e,(n,r)=>{S0(t,n,r)})}function S0(t,e,n){const r=new ke("/.info/"+e),i=Ge(n);t.infoData_.updateSnapshot(r,i);const a=bc(t.infoSyncTree_,r,i);bn(t.eventQueue_,r,a)}function Bh(t){return t.nextWriteId_++}function eM(t,e,n){const r=PO(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const a=Ge(i).withIndex(e._queryParams.getIndex());_g(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=bc(t.serverSyncTree_,e._path,a);else{const c=ec(t.serverSyncTree_,e);l=SC(t.serverSyncTree_,e._path,a,c)}return bn(t.eventQueue_,e._path,l),th(t.serverSyncTree_,e,n,null,!0),a},i=>(pl(t,"get for query "+ot(e)+" failed: "+i),Promise.reject(new Error(i))))}function k0(t,e,n,r,i){pl(t,"set",{path:e.toString(),value:n,priority:r});const a=jc(t),l=Ge(n,r),c=Lh(t.serverSyncTree_,e),d=_0(l,c,a),h=Bh(t),g=m0(t.serverSyncTree_,e,d,h,!0);zh(t.eventQueue_,g),t.server_.put(e.toString(),l.val(!0),(b,I)=>{const T=b==="ok";T||Dt("set at "+e+" failed: "+b);const L=js(t.serverSyncTree_,h,!T);bn(t.eventQueue_,e,L),Gs(t,i,b,I)});const m=E0(t,e);rl(t,m),bn(t.eventQueue_,m,[])}function tM(t,e,n,r){pl(t,"update",{path:e.toString(),value:n});let i=!0;const a=jc(t),l={};if(jt(n,(c,d)=>{i=!1,l[c]=TC(Be(e,c),Ge(d),t.serverSyncTree_,a)}),i)_t("update() called with empty data.  Don't do anything."),Gs(t,r,"ok",void 0);else{const c=Bh(t),d=kO(t.serverSyncTree_,e,l,c);zh(t.eventQueue_,d),t.server_.merge(e.toString(),n,(h,g)=>{const m=h==="ok";m||Dt("update at "+e+" failed: "+h);const b=js(t.serverSyncTree_,c,!m),I=b.length>0?rl(t,e):e;bn(t.eventQueue_,I,b),Gs(t,r,h,g)}),jt(n,h=>{const g=E0(t,Be(e,h));rl(t,g)}),bn(t.eventQueue_,e,[])}}function nM(t){pl(t,"onDisconnectEvents");const e=jc(t),n=Ku();mg(t.onDisconnect_,Ne(),(i,a)=>{const l=TC(i,a,t.serverSyncTree_,e);hl(n,i,l)});let r=[];mg(n,Ne(),(i,a)=>{r=r.concat(bc(t.serverSyncTree_,i,a));const l=E0(t,i);rl(t,l)}),t.onDisconnect_=Ku(),bn(t.eventQueue_,Ne(),r)}function rM(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&pg(t.onDisconnect_,e),Gs(t,n,r,i)})}function $w(t,e,n,r){const i=Ge(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{a==="ok"&&hl(t.onDisconnect_,e,i),Gs(t,r,a,l)})}function sM(t,e,n,r,i){const a=Ge(n,r);t.server_.onDisconnectPut(e.toString(),a.val(!0),(l,c)=>{l==="ok"&&hl(t.onDisconnect_,e,a),Gs(t,i,l,c)})}function iM(t,e,n,r){if(Mu(n)){_t("onDisconnect().update() called with empty data.  Don't do anything."),Gs(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,a)=>{i==="ok"&&jt(n,(l,c)=>{const d=Ge(c);hl(t.onDisconnect_,Be(e,l),d)}),Gs(t,r,i,a)})}function aM(t,e,n){let r;xe(e._path)===".info"?r=_g(t.infoSyncTree_,e,n):r=_g(t.serverSyncTree_,e,n),DC(t.eventQueue_,e._path,r)}function Ng(t,e,n){let r;xe(e._path)===".info"?r=th(t.infoSyncTree_,e,n):r=th(t.serverSyncTree_,e,n),DC(t.eventQueue_,e._path,r)}function $C(t){t.persistentConnection_&&t.persistentConnection_.interrupt(FC)}function lM(t){t.persistentConnection_&&t.persistentConnection_.resume(FC)}function pl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_t(n,...e)}function Gs(t,e,n,r){e&&ul(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function oM(t,e,n,r,i,a){pl(t,"transaction on "+e);const l={path:e,update:n,onComplete:r,status:null,order:M2(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=I0(t,e,void 0);l.currentInputSnapshot=c;const d=l.update(c.val());if(d===void 0)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{wc("transaction failed: Data returned ",d,l.path),l.status=0;const h=Uh(t.transactionQueueTree_,e),g=Yi(h)||[];g.push(l),j0(h,g);let m;typeof d=="object"&&d!==null&&yn(d,".priority")?(m=Mi(d,".priority"),W(tc(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(Lh(t.serverSyncTree_,e)||ce.EMPTY_NODE).getPriority().val();const b=jc(t),I=Ge(d,m),T=_0(I,c,b);l.currentOutputSnapshotRaw=I,l.currentOutputSnapshotResolved=T,l.currentWriteId=Bh(t);const L=m0(t.serverSyncTree_,e,T,l.currentWriteId,l.applyLocally);bn(t.eventQueue_,e,L),Vh(t,t.transactionQueueTree_)}}function I0(t,e,n){return Lh(t.serverSyncTree_,e,n)||ce.EMPTY_NODE}function Vh(t,e=t.transactionQueueTree_){if(e||Hh(t,e),Yi(e)){const n=zC(t,e);W(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&cM(t,_c(e),n)}else RC(e)&&$h(e,n=>{Vh(t,n)})}function cM(t,e,n){const r=n.map(h=>h.currentWriteId),i=I0(t,e,r);let a=i;const l=i.hash();for(let h=0;h<n.length;h++){const g=n[h];W(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=zt(e,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const c=a.val(!0),d=e;t.server_.put(d.toString(),c,h=>{pl(t,"transaction put response",{path:d.toString(),status:h});let g=[];if(h==="ok"){const m=[];for(let b=0;b<n.length;b++)n[b].status=2,g=g.concat(js(t.serverSyncTree_,n[b].currentWriteId)),n[b].onComplete&&m.push(()=>n[b].onComplete(null,!0,n[b].currentOutputSnapshotResolved)),n[b].unwatcher();Hh(t,Uh(t.transactionQueueTree_,e)),Vh(t,t.transactionQueueTree_),bn(t.eventQueue_,e,g);for(let b=0;b<m.length;b++)ul(m[b])}else{if(h==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{Dt("transaction at "+d.toString()+" failed: "+h);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=h}rl(t,e)}},l)}function rl(t,e){const n=WC(t,e),r=_c(n),i=zC(t,n);return dM(t,i,r),r}function dM(t,e,n){if(e.length===0)return;const r=[];let i=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],h=zt(n,d.path);let g=!1,m;if(W(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)g=!0,m=d.abortReason,i=i.concat(js(t.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=QO)g=!0,m="maxretry",i=i.concat(js(t.serverSyncTree_,d.currentWriteId,!0));else{const b=I0(t,d.path,l);d.currentInputSnapshot=b;const I=e[c].update(b.val());if(I!==void 0){wc("transaction failed: Data returned ",I,d.path);let T=Ge(I);typeof I=="object"&&I!=null&&yn(I,".priority")||(T=T.updatePriority(b.getPriority()));const ie=d.currentWriteId,j=jc(t),N=_0(T,b,j);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=N,d.currentWriteId=Bh(t),l.splice(l.indexOf(ie),1),i=i.concat(m0(t.serverSyncTree_,d.path,N,d.currentWriteId,d.applyLocally)),i=i.concat(js(t.serverSyncTree_,ie,!0))}else g=!0,m="nodata",i=i.concat(js(t.serverSyncTree_,d.currentWriteId,!0))}bn(t.eventQueue_,n,i),i=[],g&&(e[c].status=2,function(b){setTimeout(b,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(m==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(m),!1,null))))}Hh(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)ul(r[c]);Vh(t,t.transactionQueueTree_)}function WC(t,e){let n,r=t.transactionQueueTree_;for(n=xe(e);n!==null&&Yi(r)===void 0;)r=Uh(r,n),e=Oe(e),n=xe(e);return r}function zC(t,e){const n=[];return BC(t,e,n),n.sort((r,i)=>r.order-i.order),n}function BC(t,e,n){const r=Yi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);$h(e,i=>{BC(t,i,n)})}function Hh(t,e){const n=Yi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,j0(e,n.length>0?n:void 0)}$h(e,r=>{Hh(t,r)})}function E0(t,e){const n=_c(WC(t,e)),r=Uh(t.transactionQueueTree_,e);return WO(r,i=>{em(t,i)}),em(t,r),PC(r,i=>{em(t,i)}),n}function em(t,e){const n=Yi(e);if(n){const r=[];let i=[],a=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(W(a===l-1,"All SENT items should be at beginning of queue."),a=l,n[l].status=3,n[l].abortReason="set"):(W(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),i=i.concat(js(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&r.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?j0(e,void 0):n.length=a+1,bn(t.eventQueue_,_c(e),i);for(let l=0;l<r.length;l++)ul(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function hM(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Dt(`Invalid query segment '${n}' in query '${t}'`)}return e}const jg=function(t,e){const n=fM(t),r=n.namespace;n.domain==="firebase.com"&&xr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&xr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||w5();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Y2(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ke(n.pathString)}},fM=function(t){let e="",n="",r="",i="",a="",l=!0,c="https",d=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(c=t.substring(0,h-1),t=t.substring(h+2));let g=t.indexOf("/");g===-1&&(g=t.length);let m=t.indexOf("?");m===-1&&(m=t.length),e=t.substring(0,Math.min(g,m)),g<m&&(i=uM(t.substring(g,m)));const b=hM(t.substring(Math.min(t.length,m)));h=e.indexOf(":"),h>=0?(l=c==="https"||c==="wss",d=parseInt(e.substring(h+1),10)):h=e.length;const I=e.slice(0,h);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),n=e.substring(T+1),a=r}"ns"in b&&(a=b.ns)}return{host:e,port:d,domain:n,subdomain:r,secure:l,scheme:c,pathString:i,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pM=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Ww.charAt(n%64),n=Math.floor(n/64);W(n===0,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)l+=Ww.charAt(e[i]);return W(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class HC{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mM=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Xt;return rM(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Rn("OnDisconnect.remove",this._path);const e=new Xt;return $w(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Rn("OnDisconnect.set",this._path),vr("OnDisconnect.set",e,this._path,!1);const n=new Xt;return $w(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Rn("OnDisconnect.setWithPriority",this._path),vr("OnDisconnect.setWithPriority",e,this._path,!1),C0("OnDisconnect.setWithPriority",n);const r=new Xt;return sM(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Rn("OnDisconnect.update",this._path),OC("OnDisconnect.update",e,this._path);const n=new Xt;return iM(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ve(this._path)?null:t0(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){const e=Sw(this._queryParams),n=Jx(e);return n==="{}"?"default":n}get _queryObject(){return Sw(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof ln))return!1;const n=this._repo===e._repo,r=n0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+iA(this._path)}}function Gh(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Xs(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===mr){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==zs)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Zr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Le){if(e!=null&&!tc(e)||n!=null&&!tc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(W(t.getIndex()instanceof i0||t.getIndex()===a0,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Kh(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fn extends ln{constructor(e,n){super(e,n,new Ph,!1)}get parent(){const e=sC(this._path);return e===null?null:new Fn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let qh=class Cg{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ke(e),r=Wi(this.ref,e);return new Cg(this._node.getChild(n),r,Le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Cg(i,Wi(this.ref,r),Le)))}hasChild(e){const n=new ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function GC(t,e){return t=me(t),t._checkNotDeleted("ref"),e!==void 0?Wi(t._root,e):t._root}function zw(t,e){t=me(t),t._checkNotDeleted("refFromURL");const n=jg(e,t._repo.repoInfo_.nodeAdmin);MC("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&xr("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),GC(t,n.path.toString())}function Wi(t,e){return t=me(t),xe(t._path)===null?KO("child","path",e):nc("child","path",e),new Fn(t._repo,Be(t._path,e))}function gM(t,e){t=me(t),Rn("push",t._path),vr("push",e,t._path,!0);const n=UC(t._repo),r=pM(n),i=Wi(t,r),a=Wi(t,r);let l;return e!=null?l=R0(a,e).then(()=>a):l=Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}function xM(t){return Rn("remove",t._path),R0(t,null)}function R0(t,e){t=me(t),Rn("set",t._path),vr("set",e,t._path,!1);const n=new Xt;return k0(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function vM(t,e){t=me(t),Rn("setPriority",t._path),C0("setPriority",e);const n=new Xt;return k0(t._repo,Be(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function yM(t,e,n){if(Rn("setWithPriority",t._path),vr("setWithPriority",e,t._path,!1),C0("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Xt;return k0(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function bM(t,e){OC("update",e,t._path);const n=new Xt;return tM(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function _M(t){t=me(t);const e=new T0(()=>{}),n=new Cc(e);return eM(t._repo,t,n).then(r=>new qh(r,new Fn(t._repo,t._path),t._queryParams.getIndex()))}class Cc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new VC("value",this,new qh(e.snapshotNode,new Fn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HC(this,e,n):null}matches(e){return e instanceof Cc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Yh{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HC(this,e,n):null}createEvent(e,n){W(e.childName!=null,"Child events should have a childName.");const r=Wi(new Fn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new VC(e.type,this,new qh(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Yh?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Sc(t,e,n,r,i){let a;if(typeof r=="object"&&(a=void 0,i=r),typeof r=="function"&&(a=r),i&&i.onlyOnce){const d=n,h=(g,m)=>{Ng(t._repo,t,c),d(g,m)};h.userCallback=n.userCallback,h.context=n.context,n=h}const l=new T0(n,a||void 0),c=e==="value"?new Cc(l):new Yh(e,l);return aM(t._repo,t,c),()=>Ng(t._repo,t,c)}function Sg(t,e,n,r){return Sc(t,"value",e,n,r)}function Bw(t,e,n,r){return Sc(t,"child_added",e,n,r)}function Vw(t,e,n,r){return Sc(t,"child_changed",e,n,r)}function Hw(t,e,n,r){return Sc(t,"child_moved",e,n,r)}function Gw(t,e,n,r){return Sc(t,"child_removed",e,n,r)}function Kw(t,e,n){let r=null;const i=n?new T0(n):null;e==="value"?r=new Cc(i):e&&(r=new Yh(e,i)),Ng(t._repo,t,r)}class Zn{}class KC extends Zn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){vr("endAt",this._value,e._path,!0);const n=fg(e._queryParams,this._value,this._key);if(Kh(n),Xs(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function wM(t,e){return Nc("endAt","key",e),new KC(t,e)}class NM extends Zn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){vr("endBefore",this._value,e._path,!1);const n=RA(e._queryParams,this._value,this._key);if(Kh(n),Xs(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function jM(t,e){return Nc("endBefore","key",e),new NM(t,e)}class qC extends Zn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){vr("startAt",this._value,e._path,!0);const n=hg(e._queryParams,this._value,this._key);if(Kh(n),Xs(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function CM(t=null,e){return Nc("startAt","key",e),new qC(t,e)}class SM extends Zn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){vr("startAfter",this._value,e._path,!1);const n=TA(e._queryParams,this._value,this._key);if(Kh(n),Xs(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ln(e._repo,e._path,n,e._orderByCalled)}}function kM(t,e){return Nc("startAfter","key",e),new SM(t,e)}class IM extends Zn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ln(e._repo,e._path,IA(e._queryParams,this._limit),e._orderByCalled)}}function EM(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IM(t)}class TM extends Zn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ln(e._repo,e._path,EA(e._queryParams,this._limit),e._orderByCalled)}}function RM(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new TM(t)}class PM extends Zn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Gh(e,"orderByChild");const n=new ke(this._path);if(ve(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new i0(n),i=Ah(e._queryParams,r);return Xs(i),new ln(e._repo,e._path,i,!0)}}function AM(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nc("orderByChild","path",t),new PM(t)}class OM extends Zn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Gh(e,"orderByKey");const n=Ah(e._queryParams,mr);return Xs(n),new ln(e._repo,e._path,n,!0)}}function MM(){return new OM}class DM extends Zn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Gh(e,"orderByPriority");const n=Ah(e._queryParams,Le);return Xs(n),new ln(e._repo,e._path,n,!0)}}function LM(){return new DM}class FM extends Zn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Gh(e,"orderByValue");const n=Ah(e._queryParams,a0);return Xs(n),new ln(e._repo,e._path,n,!0)}}function UM(){return new FM}class $M extends Zn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(vr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new KC(this._value,this._key)._apply(new qC(this._value,this._key)._apply(e))}}function WM(t,e){return Nc("equalTo","key",e),new $M(t,e)}function zn(t,...e){let n=me(t);for(const r of e)n=r._apply(n);return n}yO(Fn);jO(Fn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="FIREBASE_DATABASE_EMULATOR_HOST",kg={};let BM=!1;function VM(t,e,n,r){t.repoInfo_=new Y2(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function YC(t,e,n,r,i){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||xr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=jg(a,i),c=l.repoInfo,d,h;typeof process<"u"&&ow&&(h=ow[zM]),h?(d=!0,a=`http://${h}?ns=${c.namespace}`,l=jg(a,i),c=l.repoInfo):d=!l.repoInfo.secure;const g=i&&d?new Wa(Wa.OWNER):new A5(t.name,t.options,e);MC("Invalid Firebase Database URL",l),ve(l.path)||xr("Database URL must point to the root of a Firebase Database (not including a child path).");const m=GM(c,t,g,new P5(t.name,n));return new KM(m,t)}function HM(t,e){const n=kg[e];(!n||n[t.key]!==t)&&xr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$C(t),delete n[t.key]}function GM(t,e,n,r){let i=kg[e.name];i||(i={},kg[e.name]=i);let a=i[t.toURLString()];return a&&xr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new JO(t,BM,n,r),i[t.toURLString()]=a,a}let KM=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(XO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(HM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&xr("Cannot call "+e+" on a deleted database.")}};function QC(){Za.IS_TRANSPORT_INITIALIZED&&Dt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qM(){QC(),Ns.forceDisallow()}function YM(){QC(),In.forceDisallow(),Ns.forceAllow()}function QM(t,e,n,r={}){t=me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&xr("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Wa(Wa.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:L3(r.mockUserToken,t.app.options.projectId);a=new Wa(l)}VM(i,e,n,a)}function JM(t){t=me(t),t._checkNotDeleted("goOffline"),$C(t._repo)}function XM(t){t=me(t),t._checkNotDeleted("goOnline"),lM(t._repo)}function ZM(t,e){L2(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){A2(Qs),Ws(new Dn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return YC(r,i,a,n)},"PUBLIC").setMultipleInstances(!0)),Yn(cw,dw,t),Yn(cw,dw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={".sv":"timestamp"};function nD(){return tD}function rD(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sD=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function iD(t,e,n){var r;if(t=me(t),Rn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,a=new Xt,l=(d,h,g)=>{let m=null;d?a.reject(d):(m=new qh(g,new Fn(t._repo,t._path),Le),a.resolve(new sD(h,m)))},c=Sg(t,()=>{});return oM(t._repo,t._path,e,l,c,i),a.promise}Gr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eD();const aD="@firebase/database-compat",lD="1.0.8";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=new cc("@firebase/database-compat"),JC=function(t){const e="FIREBASE WARNING: "+t;oD.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=function(t,e,n,r){if(n!==void 0&&typeof n!="boolean")throw new Error(an(t,e)+"must be a boolean.")},dD=function(t,e,n){if(e!==void 0)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(an(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this._delegate=e}cancel(e){he("OnDisconnect.cancel",0,1,arguments.length),yt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){he("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){he("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){he("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,n){if(he("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,JC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yt("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return he("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this._database=e,this._delegate=n}val(){return he("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return he("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return he("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return he("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return he("DataSnapshot.child",0,1,arguments.length),e=String(e),nc("DataSnapshot.child","path",e),new Ds(this._database,this._delegate.child(e))}hasChild(e){return he("DataSnapshot.hasChild",1,1,arguments.length),nc("DataSnapshot.hasChild","path",e),this._delegate.hasChild(e)}getPriority(){return he("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return he("DataSnapshot.forEach",1,1,arguments.length),yt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Ds(this._database,n)))}hasChildren(){return he("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return he("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return he("DataSnapshot.ref",0,0,arguments.length),new pn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class St{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var a;he("Query.on",2,4,arguments.length),yt("Query.on","callback",n,!1);const l=St.getCancelAndContextArgs_("Query.on",r,i),c=(h,g)=>{n.call(l.context,new Ds(this.database,h),g)};c.userCallback=n,c.context=l.context;const d=(a=l.cancel)===null||a===void 0?void 0:a.bind(l.context);switch(e){case"value":return Sg(this._delegate,c,d),n;case"child_added":return Bw(this._delegate,c,d),n;case"child_removed":return Gw(this._delegate,c,d),n;case"child_changed":return Vw(this._delegate,c,d),n;case"child_moved":return Hw(this._delegate,c,d),n;default:throw new Error(an("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(he("Query.off",0,3,arguments.length),dD("Query.off",e),yt("Query.off","callback",n,!0),A_("Query.off","context",r),n){const i=()=>{};i.userCallback=n,i.context=r,Kw(this._delegate,e,i)}else Kw(this._delegate,e)}get(){return _M(this._delegate).then(e=>new Ds(this.database,e))}once(e,n,r,i){he("Query.once",1,4,arguments.length),yt("Query.once","callback",n,!0);const a=St.getCancelAndContextArgs_("Query.once",r,i),l=new Xt,c=(h,g)=>{const m=new Ds(this.database,h);n&&n.call(a.context,m,g),l.resolve(m)};c.userCallback=n,c.context=a.context;const d=h=>{a.cancel&&a.cancel.call(a.context,h),l.reject(h)};switch(e){case"value":Sg(this._delegate,c,d,{onlyOnce:!0});break;case"child_added":Bw(this._delegate,c,d,{onlyOnce:!0});break;case"child_removed":Gw(this._delegate,c,d,{onlyOnce:!0});break;case"child_changed":Vw(this._delegate,c,d,{onlyOnce:!0});break;case"child_moved":Hw(this._delegate,c,d,{onlyOnce:!0});break;default:throw new Error(an("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return he("Query.limitToFirst",1,1,arguments.length),new St(this.database,zn(this._delegate,EM(e)))}limitToLast(e){return he("Query.limitToLast",1,1,arguments.length),new St(this.database,zn(this._delegate,RM(e)))}orderByChild(e){return he("Query.orderByChild",1,1,arguments.length),new St(this.database,zn(this._delegate,AM(e)))}orderByKey(){return he("Query.orderByKey",0,0,arguments.length),new St(this.database,zn(this._delegate,MM()))}orderByPriority(){return he("Query.orderByPriority",0,0,arguments.length),new St(this.database,zn(this._delegate,LM()))}orderByValue(){return he("Query.orderByValue",0,0,arguments.length),new St(this.database,zn(this._delegate,UM()))}startAt(e=null,n){return he("Query.startAt",0,2,arguments.length),new St(this.database,zn(this._delegate,CM(e,n)))}startAfter(e=null,n){return he("Query.startAfter",0,2,arguments.length),new St(this.database,zn(this._delegate,kM(e,n)))}endAt(e=null,n){return he("Query.endAt",0,2,arguments.length),new St(this.database,zn(this._delegate,wM(e,n)))}endBefore(e=null,n){return he("Query.endBefore",0,2,arguments.length),new St(this.database,zn(this._delegate,jM(e,n)))}equalTo(e,n){return he("Query.equalTo",1,2,arguments.length),new St(this.database,zn(this._delegate,WM(e,n)))}toString(){return he("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return he("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(he("Query.isEqual",1,1,arguments.length),!(e instanceof St)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,yt(e,"cancel",i.cancel,!0),i.context=r,A_(e,"context",i.context);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(an(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new pn(this.database,new Fn(this._delegate._repo,this._delegate._path))}}class pn extends St{constructor(e,n){super(e,new ln(n._repo,n._path,new Ph,!1)),this.database=e,this._delegate=n}getKey(){return he("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return he("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new pn(this.database,Wi(this._delegate,e))}getParent(){he("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new pn(this.database,e):null}getRoot(){return he("Reference.root",0,0,arguments.length),new pn(this.database,this._delegate.root)}set(e,n){he("Reference.set",1,2,arguments.length),yt("Reference.set","onComplete",n,!0);const r=R0(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(he("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,JC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rn("Reference.update",this._delegate._path),yt("Reference.update","onComplete",n,!0);const r=bM(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){he("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority","onComplete",r,!0);const i=yM(this._delegate,e,n);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){he("Reference.remove",0,1,arguments.length),yt("Reference.remove","onComplete",e,!0);const n=xM(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){he("Reference.transaction",1,3,arguments.length),yt("Reference.transaction","transactionUpdate",e,!1),yt("Reference.transaction","onComplete",n,!0),cD("Reference.transaction","applyLocally",r);const i=iD(this._delegate,e,{applyLocally:r}).then(a=>new hD(a.committed,new Ds(this.database,a.snapshot)));return n&&i.then(a=>n(null,a.committed,a.snapshot),a=>n(a,!1,null)),i}setPriority(e,n){he("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority","onComplete",n,!0);const r=vM(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){he("Reference.push",0,2,arguments.length),yt("Reference.push","onComplete",n,!0);const r=gM(this._delegate,e),i=r.then(l=>new pn(this.database,l));n&&i.then(()=>n(null),l=>n(l));const a=new pn(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Rn("Reference.onDisconnect",this._delegate._path),new uD(new mM(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qM,forceLongPolling:YM}}useEmulator(e,n,r={}){QM(this._delegate,e,n,r)}ref(e){if(he("database.ref",0,1,arguments.length),e instanceof pn){const n=zw(this._delegate,e.toString());return new pn(this,n)}else{const n=GC(this._delegate,e);return new pn(this,n)}}refFromURL(e){he("database.refFromURL",1,1,arguments.length);const r=zw(this._delegate,e);return new pn(this,r)}goOffline(){return he("database.goOffline",0,0,arguments.length),JM(this._delegate)}goOnline(){return he("database.goOnline",0,0,arguments.length),XM(this._delegate)}}rc.ServerValue={TIMESTAMP:nD(),increment:t=>rD(t)};function fD({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:a,nodeAdmin:l=!1}){A2(n);const c=new Cx("database-standalone"),d=new Qm("auth-internal",c);d.setComponent(new Dn("auth-internal",()=>r,"PRIVATE"));let h;return i&&(h=new Qm("app-check-internal",c),h.setComponent(new Dn("app-check-internal",()=>i,"PRIVATE"))),{instance:new rc(YC(t,d,h,e,l),t),namespace:a}}var pD=Object.freeze({__proto__:null,initStandalone:fD});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=rc.ServerValue;function gD(t){t.INTERNAL.registerComponent(new Dn("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new rc(i,r)},"PUBLIC").setServiceProps({Reference:pn,Query:St,Database:rc,DataSnapshot:Ds,enableLogging:ZM,INTERNAL:pD,ServerValue:mD}).setMultipleInstances(!0)),t.registerVersion(aD,lD)}gD(hn);const xD={apiKey:"AIzaSyBRrxkXnyGd3HKXFKEUB2o15sY8U2N2Mic",authDomain:"beancraft-sales-team.firebaseapp.com",databaseURL:"https://beancraft-sales-team-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"beancraft-sales-team",storageBucket:"beancraft-sales-team.firebasestorage.app",messagingSenderId:"803745881200",appId:"1:803745881200:web:fb430162f761e3ecdba8b5"};hn.initializeApp(xD);const oe=hn.database(),qw=["  ,     .","       .","        ."," .    .","       .","  ,      .","     .  .","  .  ,     .","    .","      .","   .     .","   .    .","1%  ,   .","          .","   .    .","   ,  .","      .","      .","  ,   .","   ,   .",' "NO" " "  ,   .',"       .","     ,   .","    .","  ,    .","        .","   .","      .","      .","     .","   .   .","      .","      .   .","  .    .","       .","      .","     .","     .","     ,    .","       .","      .","  .     .","       .","  .   .","  .    .","        .","  ,     .","    .  .","     .","   .    .","     .","       .","     .  .","     ?","  .    .","  .    .","       .","      .","     .  .","     ."," 3  .    .","     .","   .  .","      .","      .","       .","      .","     .","    .","    ,    .","  .   .","    .   .","      .","      .","   ,     .","  ,   .","      ."," .     .","    .   .","   ,     .","      .  .","   ."," .    .","    .   .","  ,    .","  .   .","      .","     ."," .     .","      .","     .","     .","    .   .","  .   .","      .","     .  .","     .","      .","      .","    .   .","      .","    ,    .","      .","        .","          .","        .","   .  .","   .    .","        .","      .",'" "      .',"    .","    .","      .","       .","      .","  ,      .","       .","   .   .","      .","      .","   .    .","     .","   ,     .","           .","    .","   ,     .","      .","  10     .","   ,    .","        .","    .","     .  ."," .    .","         .","  .  .","    ,     .","    .","      .","    .","  ,    .","      .","       .","  .    .","     .","  .     .","       .","    .","     .","        ,   .","  .     .","   .","   ,   .","     .","       .","     .","     .","       .",'  "   "   .',"     .","     .","       ."," . ()   .","  .    ."," ,    .","       .","     .","      .","      .","''     ''   .","     .","       .","     .","     .","  .    .","       .","    ."," .     .","     .","     .","    .","     ,    .","  ,    .","  .    .","       .","   .","    .","     .","     .","       .","   ,   .","      .","      .","     .","    .","       .","       .","    .","   .      ."],Yw=[".     .","''   ,      .","   .  .","     ,   .","   .     ."," .       .","        .","   ,    .","   .     .","      ."," ,    ''  .","   ,     .","   ,    .","         .","       .",".       .","  .    .","  ,    .","   VIP      .","         .","   .  .","  DB     .","      .","        .","  ,   .","    .   .","       ."," ,    .","       ."," .    .","    .      .","      .","   ,    .","     ."," ,   .","    .","   ,    .","       .","          .","     .","  .    .","  ,   .","       ."," .     .","   ,  ?",'"."     .',"     .","    .  .",".      .","  .   .","    .  ."," ,  .  .","     .","    ,    .","      .","     .","       .","   1    .","    ,  ."," .    .","  .  .","     .","    ,    .","     .","  . ."," ?    .","   .","     .","      .","     .","  .    .","    .    .","     .","   .   .","       .","      .","    ,   .","       .","  .   .","      .","       .","     .","   ,     .",".    .","     .","  .    ."," ''  ''   .","  .  ,  .","  ,   .","  . ."," , ,   .","       .","     .","   ,    .","      .","   ,    .","      ."," .     ."," .   .",".    .","       .","   ,   .","       .","        .","      .","    .","    .","      .","       .","        ."," .    .","  .  .","        .","    .","    .","        .","      .","  .   ?","   ."," ,     .","     .","      .","         .","     .","    .  .","        .","      .","    .","    .","      .","    .","        .","   .   .","    .","  ,   .","     ."," ,    .","    .","   ,     ."," ,  . .","      .","      .","      .","  .   .","  ,   .","     .","      .","     'YES'.","     .","    .","     .","      .","    .","       .","   .   .","     .","   ,   .","         .","    .","  ,   .","  .    .","     .","      .","    ,   .","    .","   .","        .","     ."," .     .","    .","      .","     .","       .","  ,   .","      .","       .","    ."," ,   .","        .","      .","     .","    ,     .","    .","   ,    .","     .","  .  .","   ,   .","    .","    .","  ,   .","     .","      .","    .","     .","      .","     .","    .","   .  .",".    .","  .  .",".        ."],gt={negative:{bg:"#9ca3af",label:""},neutral:{bg:"#f97316",label:""},positive:{bg:"#22c55e",label:""},special:{bg:"#ef4444",label:"",blink:!0},missed:{bg:"#eab308",label:""}},ms=()=>new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),tm=()=>{const t=new Date,n=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),r=i=>{var a;return((a=n.find(l=>l.type===i))==null?void 0:a.value)||"0"};return{year:parseInt(r("year")),month:parseInt(r("month"))-1,day:parseInt(r("day")),hour:parseInt(r("hour")),minute:parseInt(r("minute")),dayOfWeek:new Date(parseInt(r("year")),parseInt(r("month"))-1,parseInt(r("day"))).getDay()}},Qw=["","","",""],vD="AIzaSyDcz5e1qre9QMbrKmUSjT9nEsajSnhIhAI",mi={BASE_URL:"https://bigdata.sbiz.or.kr",snsAnaly:{key:"d46f5d518688912176484b6f894664c5d0b252967d92f4bafc690904381d7ff5",path:"/openApi/snsAnaly",name:"SNS "},simple:{key:"bb51c6d3d3f93e8172c7888e73eb19afb9120c9f61676c658648ee2853f88e85",path:"/openApi/simple",name:""},tour:{key:"fc2070ca36e0ec845ecfd8c949860cfe4552e56903afcb9bcea07a509f820bcd",path:"/openApi/tour",name:"  "},slsIndex:{key:"abddbf5dc29670b9209d75e4910c7fd932a8a1a43dcce9d18661585e4040f2fb",path:"/openApi/slsIndex",name:""},delivery:{key:"3ba2863eaf4e3b30b3c0237ab9da80ed11f4a7579d4f212d5c318b8e41a3a304",path:"/openApi/delivery",name:""},startupPublic:{key:"167264f6eef5710d8d79e96b1316e8c2cb85a197d32446d3849008d0376cf098",path:"/openApi/startupPublic",name:""},detail:{key:"b2d9a1ae52aace697124a56c7c2bbed2eeb94fd4996fb5935cb9a25cc4c3c869",path:"/openApi/detail",name:""},stcarSttus:{key:"79a86fd460fe7478f52788c4a68a0e6f3406a23ff123c050a21a160a59946fd3",path:"/openApi/stcarSttus",name:""},storSttus:{key:"b36c5637768f458919f5179641dac0cd742791750dc016a8591c4e7a6ab649c1",path:"/openApi/storSttus",name:""},weather:{key:"843e44cd955ebc42a684c9c892ada0b122713650e0e85c1f3ebe09c9aeff6319",path:"/openApi/weather",name:""},hpReport:{key:"d269ecf98403fa878587eb925ded6ecf9e02f297da19f5d8ffec5cac7309647a",path:"/openApi/hpReport",name:""}},yD="1004",Jw={:{:500,:200,:500,:4e3,:6900,:2e3,:25},:{:300,:100,:300,:3500,:5500,:1500,:20},:{:1e3,:300,:500,:5e3,:8e3,:3300,:0},:{:500,:200,:500,:3500,:6e3,:2e3,:20},:{:0,:0,:0,:0,:0,:4500,:0,:!0},:{:2e3,:500,:1e3,:8e3,:13e3,:4500,:3}},Vd="AIzaSyAl0PfvfKID-nZxtAJOC6qhME-A-V_u2L8",bD=["","","","","","","","","","","","","","","","","","",""],Xw=t=>t.split("").map(e=>{const n=e.charCodeAt(0)-44032;return n>=0&&n<=11171?bD[Math.floor(n/588)]:e}).join(""),_D=(t,e)=>{if(!e)return!0;const n=t.toLowerCase(),r=e.toLowerCase();return n.includes(r)?!0:Xw(t).includes(Xw(e))},Zw=t=>{if(!t)return"";const e=t.split(" ");return e.length>=2?e.slice(-2).join(" "):t},Hd=[{id:1,name:"",color:"#3b82f6",username:"sm001",password:"1234",promo:{:0,:0,:0,:0}},{id:2,name:"",color:"#10b981",username:"sm002",password:"1234",promo:{:0,:0,:0,:0}}],wD=()=>{var sy,iy,ay,ly,oy,cy,dy,uy,hy,fy,py,my,gy,xy,vy,yy,by,_y,wy,Ny,jy,Cy,Sy,ky,Iy,Ey,Ty,Ry,Py,Ay,Oy,My,Dy,Ly,Fy,Uy,$y,Wy,zy,By,Vy,Hy,Gy,Ky,qy,Yy,Qy,Jy,Xy,Zy,eb,tb,nb,rb,sb,ib,ab,lb,ob,cb,db,ub,hb,fb,pb,mb,gb,xb,vb,yb,bb;const[t,e]=_.useState(!1),[n,r]=_.useState(null),[i,a]=_.useState(""),[l,c]=_.useState(""),[d,h]=_.useState(!1),[g,m]=_.useState("admin"),[b]=_.useState(()=>qw[Math.floor(Math.random()*qw.length)]),[I,T]=_.useState("quote"),[L,ie]=_.useState("connecting"),[j,N]=_.useState(!1),C=localStorage.getItem("bc_current_tab")||"map",[A,q]=_.useState(C),[V,X]=_.useState(null),[te,Re]=_.useState("basic"),[ge,Ft]=_.useState([]),[Zs,yr]=_.useState(0),[Qi,Ji]=_.useState("single"),[ei,Xi]=_.useState(""),[Y,pe]=_.useState(""),[ne,Fe]=_.useState(null),[Ue,br]=_.useState(!1),[Nn,Zi]=_.useState(null),[ht,et]=_.useState(null),[_r,P0]=_.useState(null),[A0,Qh]=_.useState(null),[kc,Jh]=_.useState(""),[Xh,O0]=_.useState([]),[XC,ea]=_.useState(!1),[Gt,Zh]=_.useState(null),[Rt,er]=_.useState({name:"",content:"",type:"broker",memo:""}),[Ic,M0]=_.useState([]),[ZC,Ec]=_.useState(!1),[wr,eS]=_.useState(null),[Tc,ef]=_.useState(""),[tf,D0]=_.useState(""),[rs,Rc]=_.useState("theme"),[L0,tS]=_.useState([]),[nS,rS]=_.useState(""),[nf,Pc]=_.useState(null),[F0,ta]=_.useState(null),[Nr,rf]=_.useState(null),[jD,sS]=_.useState(()=>{const o=localStorage.getItem("bc_team_feedback");return o?JSON.parse(o):[]}),[sf,U0]=_.useState(""),[af,$0]=_.useState(""),[Ac,lf]=_.useState(null),[ml,W0]=_.useState([]),[CD,SD]=_.useState(""),[of,z0]=_.useState(""),[gl,B0]=_.useState(null),[iS,cf]=_.useState(!1),[xl,V0]=_.useState(!1),[ss,jr]=_.useState("select"),[H0,Oc]=_.useState(null),[Mc,df]=_.useState("analysis"),[G0,na]=_.useState(""),[K0,q0]=_.useState(Date.now()),[uf,Y0]=_.useState(""),[re,Dc]=_.useState(null),[hf,Q0]=_.useState(!1),[ff,J0]=_.useState(!1),[aS,Lc]=_.useState(!1),[ti,X0]=_.useState(null),Z0=_.useRef(null),Fc=_.useRef(null);_.useRef(null),_.useEffect(()=>{if(xl&&ss==="main"){const o=()=>{Date.now()-K0>6e4&&jr("locked")};return Fc.current=setInterval(o,5e3),()=>clearInterval(Fc.current)}},[xl,ss,K0]),_.useEffect(()=>{if(xl&&ss==="locked"){const o=setTimeout(()=>{pf()},3e5);return()=>clearTimeout(o)}},[xl,ss]);const on=_.useCallback(()=>{q0(Date.now())},[]),lS=()=>{V0(!0),jr("select"),Oc(null),na(""),q0(Date.now())},pf=()=>{V0(!1),jr("select"),Oc(null),df("analysis"),na(""),Y0(""),Dc(null),Lc(!1),X0(null),J0(!1),Z0.current&&clearTimeout(Z0.current),Fc.current&&clearInterval(Fc.current)},oS=o=>{on();const u=G0+o;na(u),u.length===4&&(u===yD&&jr("main"),na(""))},cS=()=>{on(),na(o=>o.slice(0,-1))},ev=async o=>{var u,f,p,x,v,y,w,S,P,R,O,D;if(o.trim()){Q0(!0),on();try{let B=null,Q=null;try{const dn=await(await fetch(`https://naveropenapi.apigw.ntruss.com/map-geocode/v2/geocode?query=${encodeURIComponent(o)}`,{headers:{"X-NCP-APIGW-API-KEY-ID":"dx2ymyk2b1","X-NCP-APIGW-API-KEY":"18184ztuYuPVkqzPumsSqRNVsMHCiBFMWhWdRJAJ"}})).json();if((u=dn.addresses)!=null&&u[0]){const Pe=dn.addresses[0];B={lat:parseFloat(Pe.y),lng:parseFloat(Pe.x),roadAddress:Pe.roadAddress,jibunAddress:Pe.jibunAddress},Q={sido:((p=(f=Pe.addressElements)==null?void 0:f.find($t=>$t.types.includes("SIDO")))==null?void 0:p.longName)||"",sigungu:((v=(x=Pe.addressElements)==null?void 0:x.find($t=>$t.types.includes("SIGUGUN")))==null?void 0:v.longName)||"",dong:((w=(y=Pe.addressElements)==null?void 0:y.find($t=>$t.types.includes("DONGMYUN")))==null?void 0:w.longName)||""},X0(B)}}catch(ee){console.log("Geocoding :",ee)}const k={source:"365 ",timestamp:new Date().toISOString(),region:o,apis:{}},de=async(ee,dn={})=>{try{const Pe=new URL(ee.path,mi.BASE_URL);Pe.searchParams.append("serviceKey",ee.key),Pe.searchParams.append("numOfRows","100"),Pe.searchParams.append("pageNo","1"),Pe.searchParams.append("type","json"),Q!=null&&Q.sido&&Pe.searchParams.append("ctprvnNm",Q.sido),Q!=null&&Q.sigungu&&Pe.searchParams.append("signguNm",Q.sigungu),o&&Pe.searchParams.append("adongNm",o),Object.entries(dn).forEach(([hs,Mr])=>Pe.searchParams.append(hs,Mr));const $t=await fetch(Pe.toString());return $t.ok?await $t.json():null}catch(Pe){return console.log(`${ee.name} API  :`,Pe.message),null}},F=[{name:"simple",config:mi.simple,params:{indsLclsCd:"Q"}},{name:"detail",config:mi.detail,params:{indsLclsCd:"Q"}},{name:"storSttus",config:mi.storSttus,params:{}},{name:"slsIndex",config:mi.slsIndex,params:{}},{name:"weather",config:mi.weather,params:{}},{name:"stcarSttus",config:mi.stcarSttus,params:{}}];(await Promise.allSettled(F.map(ee=>de(ee.config,ee.params)))).forEach((ee,dn)=>{ee.status==="fulfilled"&&ee.value&&(k.apis[F[dn].name]=ee.value)}),k.franchiseData=Jw;const G=Object.keys(k.apis).length>0,z=`      AI .

[ ]
- : 
- :        
- :   ,     
- :     

[  ]
${o} (${(Q==null?void 0:Q.sido)||""} ${(Q==null?void 0:Q.sigungu)||""} ${(Q==null?void 0:Q.dong)||""})
: ${B?`${B.lat}, ${B.lng}`:""}

[  ]
${G?`
365 API :
${JSON.stringify(k.apis,null,2)}
`:"365 API    -    ."}

   (  , : ):
${JSON.stringify(Jw,null,2)}

[ ]
    "${o}"      .
${G?" API     .":"      ."}

[  ]
1.  :  , / , , 
2.  : , ,  ,  
3.  : ///   (  )
4. /:  , , ,   
5.  : , ,     
6.  : ,     
7.   : +++ 
8.  :   O vs X / 
9. AI :    

[  -  ]
-  0,  0
-   (  )
-   (  )
-    78% (  42%)

JSON  :
{
  "region": "${o}",
  "overview": { "cafeCount": "", "newOpen": "+()", "closed": "-()", "floatingPop": "/", "residentPop": "", "source": "" },
  "consumers": { "mainTarget": "", "mainRatio": "%", "secondTarget": "2", "secondRatio": "%", "peakTime": "", "takeoutRatio": "%", "avgStay": "", "source": "" },
  "franchise": [
    { "name": "", "count": , "price": , "monthly": "" }
  ],
  "rent": { "monthly": "", "deposit": "", "premium": "", "yoyChange": "+/-%", "source": "" },
  "opportunities": [
    { "title": "", "detail": "", "impact": "//" }
  ],
  "risks": [
    { "title": "", "detail": "", "level": "//" }
  ],
  "startupCost": { "deposit": "", "premium": "", "interior": "", "equipment": "", "total": "" },
  "consultingEffect": {
    "withConsulting": { "survivalRate": "%", "avgMonthlyRevenue": "", "breakEvenMonths": "" },
    "withoutConsulting": { "survivalRate": "%", "avgMonthlyRevenue": "", "breakEvenMonths": "" },
    "source": ""
  },
  "insight": "       ",
  "reliability": "//",
  "dataDate": ""
}`;let le=((D=(O=(R=(P=(S=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Vd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:z}]}],generationConfig:{temperature:.7,maxOutputTokens:4e3}})})).json()).candidates)==null?void 0:S[0])==null?void 0:P.content)==null?void 0:R.parts)==null?void 0:O[0])==null?void 0:D.text)||"";le=le.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();try{const ee=JSON.parse(le);B&&(ee.coordinates=B),ee.rawApiData=G?k.apis:null,Dc({success:!0,data:ee,query:o,hasApiData:G})}catch{Dc({success:!1,error:"AI   ",query:o})}}catch(B){console.error("  :",B),Dc({success:!1,error:B.message,query:o})}finally{Q0(!1)}}};_.useEffect(()=>(oe.ref("teamFeedback").orderByChild("timestamp").limitToLast(100).on("value",o=>{const u=o.val();if(u){const f=Object.values(u).sort((p,x)=>new Date(x.timestamp)-new Date(p.timestamp));sS(f)}}),()=>oe.ref("teamFeedback").off()),[]);const tv=`    /.

[]
-        
-         
-  :    

[ ]
- :   ( )
- :  (  ,      )
- :  ( 6,900~1.3,   )
-  : / ,   , / 

[]
- /    
-     
-    
-       

[ ]
-         
-   /   
-    
-     
-  `,[Kt,vl]=_.useState(null),[Uc,is]=_.useState(!1),[ra,kD]=_.useState(null),[ID,ED]=_.useState(!1),mf=async(o,u=0)=>{var v,y,w,S,P;is(!0),et(null);const f=new Date().toLocaleString("ko-KR"),p=Math.floor(Math.random()*1e3),x=tv+`


    ( : `+f+", ID: "+p+`)


 
- : `+o.managerName+`
-   : `+o.thisVisits+" (  "+(o.visitChange>=0?"+":"")+o.visitChange+`%)
-  : `+o.newCompanies+`
-  : `+o.consults+`
-  : `+o.positiveRate+`%

  
- : `+o.positive+" | : "+o.special+`
- : `+o.neutral+" | : "+o.missed+`

  -   
1. comment:     (2,   )
2. analysis:    (/,  )
3. suggestion:     (   )
4. encouragement:    (  )
5. focus:    

  (JSON):
{"comment": "...", "analysis": "...", "suggestion": "...", "encouragement": "...", "focus": "..."}

JSON .     .`;try{const R=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Vd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:x}]}],generationConfig:{temperature:.9,maxOutputTokens:1024}})});if(!R.ok)if(R.status===429){if(u<3)return console.log(`429  - ${u+1}  ... (5 )`),et(`API   - ${u+1}  ...`),await new Promise(Q=>setTimeout(Q,5e3)),mf(o,u+1);et("API   .    ."),is(!1);return}else if(R.status===400){et("API      ."),is(!1);return}else if(R.status===403){et("API   .  ."),is(!1);return}else{et(`  . (: ${R.status})`),is(!1);return}const O=await R.json();if(O.error){console.error("Gemini API Error:",O.error),et(`API : ${O.error.message||"   "}`),is(!1);return}const D=((P=(S=(w=(y=(v=O.candidates)==null?void 0:v[0])==null?void 0:y.content)==null?void 0:w.parts)==null?void 0:S[0])==null?void 0:P.text)||"";if(!D){et("AI  .  ."),is(!1);return}const B=D.match(/\{[\s\S]*\}/);if(B){const Q=JSON.parse(B[0]);vl(Q),Zi(new Date)}else vl({comment:D,analysis:"",suggestion:"",encouragement:""}),Zi(new Date)}catch(R){console.error("AI Report Error:",R),et(` : ${R.message||" ."}`),vl(null)}is(!1)},$c=async o=>{var y,w,S,P,R;if(!o.trim())return;br(!0),et(null),Fe(null);const u=new Date().toLocaleString("ko-KR"),f=fe.filter(O=>{var D,B,Q,k;return((D=O.name)==null?void 0:D.includes(o))||((B=O.address)==null?void 0:B.includes(o))||((Q=O.memo)==null?void 0:Q.includes(o))||((k=O.region)==null?void 0:k.includes(o))}),p=li.filter(O=>{var D,B,Q;return((D=O.name)==null?void 0:D.includes(o))||((B=O.address)==null?void 0:B.includes(o))||((Q=O.region)==null?void 0:Q.includes(o))}),x=ge.filter(O=>{var D,B,Q;return((D=O.title)==null?void 0:D.includes(o))||((B=O.content)==null?void 0:B.includes(o))||((Q=O.region)==null?void 0:Q.includes(o))}),v=tv+`


   : "${o}" ( : ${u})


  
-  : ${f.length}
${f.slice(0,5).map(O=>`   ${O.name} (${O.address||""}) - : ${O.reaction||""}`).join(`
`)}
-  : ${p.length}
${p.slice(0,5).map(O=>`   ${O.name} (${O.address||""})`).join(`
`)}
-   : ${x.length}
${x.slice(0,3).map(O=>{var D;return`   ${O.title}: ${(D=O.content)==null?void 0:D.slice(0,50)}...`}).join(`
`)}

 
"${o}"       .

1. summary:     (2-3)
2. insights:    (3 , )
3. salesTips:      (2)
4. relatedTopics:     (3, )
5. actionItems:       (2)

  (JSON):
{
  "summary": " ",
  "insights": ["1", "2", "3"],
  "salesTips": ["1", "2"],
  "relatedTopics": ["1", "2", "3"],
  "actionItems": ["1", "2"]
}

JSON .      /    .`;try{const O=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Vd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:v}]}],generationConfig:{temperature:.8,maxOutputTokens:1500}})});if(!O.ok){O.status===429?et("API   .    ."):et(`  . (: ${O.status})`),br(!1);return}const D=await O.json();if(D.error){et(`API : ${D.error.message||"   "}`),br(!1);return}const B=((R=(P=(S=(w=(y=D.candidates)==null?void 0:y[0])==null?void 0:w.content)==null?void 0:S.parts)==null?void 0:P[0])==null?void 0:R.text)||"",Q=B.match(/\{[\s\S]*\}/);if(Q){const k=JSON.parse(Q[0]);Fe({...k,keyword:o,searchedAt:new Date,relatedCompaniesCount:f.length,relatedRealtorsCount:p.length,relatedIssuesCount:x.length})}else Fe({summary:B,insights:[],salesTips:[],relatedTopics:[],actionItems:[],keyword:o,searchedAt:new Date})}catch(O){console.error("AI Keyword Search Error:",O),et(` : ${O.message||" ."}`)}br(!1)},dS=async(o,u,f)=>{var p,x,v,y,w;try{const S=`   .       .

[ ]
${o}

[ ]
${u}

[]
${f}

   :
1.   (1-2)
2.  (bullet 2)
3.  (bullet 1-2)
4.   (1)`,P=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Vd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:S}]}],generationConfig:{temperature:.7,maxOutputTokens:500}})});if(!P.ok)return{success:!1,error:P.status===429?"API   .":P.status===400?"API   .":P.status===403?"API   .":`  (: ${P.status})`};const R=await P.json();if(R.error)return{success:!1,error:R.error.message};const O=(w=(y=(v=(x=(p=R.candidates)==null?void 0:p[0])==null?void 0:x.content)==null?void 0:v.parts)==null?void 0:y[0])==null?void 0:w.text;return O?{success:!0,response:O}:{success:!1,error:"AI  ."}}catch(S){return{success:!1,error:S.message||" "}}},[TD,RD]=_.useState(!1),[PD,AD]=_.useState([]),[OD,MD]=_.useState(!1),uS=()=>localStorage.getItem("bc_theme_mode")||"dark",hS=()=>{const o=localStorage.getItem("bc_theme_mode")||"dark";return o==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o},[Cr,gf]=_.useState(uS),[DD,fS]=_.useState(hS),[Wc,xf]=_.useState([]),[pS,nv]=_.useState(!1),[mS,vf]=_.useState(!1),[rv,yf]=_.useState(!1),[gS,zc]=_.useState(!1),[sv,Bc]=_.useState(!1),[Sr,yl]=_.useState(null),[nt,bl]=_.useState(null),[Z,_l]=_.useState(null),[xS,Vc]=_.useState(null),[Ct,ft]=_.useState(null),[bf,_f]=_.useState(null),[vS,Hc]=_.useState(!1),[pt,jn]=_.useState(null),[wl,Gc]=_.useState(null),[yS,Kc]=_.useState(!1),[wf,qc]=_.useState(null),[Yc,Nf]=_.useState(!1),[bS,_S]=_.useState({}),[ni,Qc]=_.useState([]),[wS,Jc]=_.useState(!1),[NS,jf]=_.useState(!1),[jS,Cf]=_.useState(null),[iv,Xc]=_.useState(!1),[Cn,tr]=_.useState([]),Sf=_.useRef(null),av=_.useRef(null),[CS,kf]=_.useState(!1),[If,SS]=_.useState([]),[kS,Ef]=_.useState(!1),[Tf,lv]=_.useState(""),[ov,cv]=_.useState(null),[IS,ES]=_.useState(""),[LD,TS]=_.useState(""),[dv,uv]=_.useState("neutral"),[nr,Zc]=_.useState(""),[ed,td]=_.useState(""),[Nl,hv]=_.useState(""),[fv,pv]=_.useState(""),[Rf,Pf]=_.useState({:!1,:!1,:!1,:!1}),[nd,Af]=_.useState([]),[ri,sa]=_.useState([]),rd=_.useRef(null),Ae=_.useRef(null),Of=_.useRef([]),si=_.useRef([]),[ye,RS]=_.useState(Hd),[jl,PS]=_.useState([]),[fe,AS]=_.useState([]),[sd,OS]=_.useState([]),[id,mv]=_.useState([]),[gv,MS]=_.useState([]),[DS,LS]=_.useState({}),[Ve,xv]=_.useState([]),[Ut,vv]=_.useState([]),[Ce,qt]=_.useState([]),[ad,ia]=_.useState(ms()),[ld,Cl]=_.useState("09:00"),[FD,UD]=_.useState(""),[$D,WD]=_.useState(""),[Sl,kl]=_.useState(""),[Mf,as]=_.useState(null),[ii,od]=_.useState(null),[zD,BD]=_.useState(null),[cn,kr]=_.useState(null),[VD,HD]=_.useState(""),[aa,cd]=_.useState(0),[ls,yv]=_.useState(new Date),[Il,Df]=_.useState(null),[Pt,El]=_.useState(null),[FS,ai]=_.useState(!1),[Lf,la]=_.useState(null),[Tl,Ff]=_.useState(null),[dd,Uf]=_.useState(null),[rr,Ir]=_.useState({title:"",time:"09:00",memo:""}),[Rl,oa]=_.useState(null),[ca,$f]=_.useState(""),[Wf,zf]=_.useState(""),[Er,Pl]=_.useState([]),[GD,KD]=_.useState([]),[bv,Bf]=_.useState(!1),[qD,YD]=_.useState(""),[QD,JD]=_.useState(""),[XD,ud]=_.useState([]),[Vf,US]=_.useState(""),[Hf,$S]=_.useState(""),[hd,WS]=_.useState("listings"),[Gf,_v]=_.useState(""),[Al,zS]=_.useState(""),[Ol,wv]=_.useState(""),[ZD,eL]=_.useState("all"),[tL,nL]=_.useState(1),[rL,sL]=_.useState(null),[li,fd]=_.useState(()=>{try{const o=localStorage.getItem("bc_collected_realtors");return o?JSON.parse(o):[]}catch{return[]}}),[BS,Kf]=_.useState(()=>!localStorage.getItem("bc_collected_realtors")),[iL,aL]=_.useState(""),[lL,oL]=_.useState([]),[cL,dL]=_.useState(!1),[VS,HS]=_.useState(!1),[uL,hL]=_.useState(!1),[fL,pL]=_.useState(""),[mL,gL]=_.useState([]),[xL,vL]=_.useState(null),[yL,GS]=_.useState([]),[bL,KS]=_.useState([]),[_L,wL]=_.useState(""),[NL,jL]=_.useState(""),[CL,SL]=_.useState(!1),[kL,IL]=_.useState(200),[EL,qS]=_.useState({phase:"",current:0,total:0,found:0,message:""}),[TL,RL]=_.useState(!1),[PL,AL]=_.useState(""),[OL,ML]=_.useState(""),[DL,LL]=_.useState("");_.useRef([]);const Nv=_.useRef([]),qf=_.useRef([]),Yf=_.useRef(null),se=_.useRef(null),Tr=_.useRef([]),Rr=_.useRef([]),jv=_.useRef([]),[pd,Qf]=_.useState(!1),[md,Cv]=_.useState(null),da=_.useRef(null),Pr=_.useRef(null),Ar=_.useRef(null),ua=_.useRef(null),gd=_.useRef(0),os=_.useRef(null),[Jf,xd]=_.useState(null),[oi,Sv]=_.useState("all"),[ci,kv]=_.useState("all"),[Xf,YS]=_.useState(""),[Zf,FL]=_.useState(null),[ep,UL]=_.useState(""),[$L,WL]=_.useState(""),[ae,at]=_.useState({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),[tp,QS]=_.useState(""),[Ml,JS]=_.useState("all"),[np,XS]=_.useState("all"),[zL,BL]=_.useState({}),[VL,ZS]=_.useState(""),[Yt,di]=_.useState({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""}),[Un,vd]=_.useState({managerId:null,companyId:null,amount:"",date:"",note:""}),ha=o=>{try{const u=localStorage.getItem("bc_"+o);return u?JSON.parse(u):null}catch{return null}},ek=async()=>{if(localStorage.getItem("bc_migration_done"))return;console.log(" ...");const u=ha("managers"),f=ha("pins"),p=ha("companies"),x=ha("customers"),v=ha("sales"),y=ha("requests");if(u&&u.length>0){console.log("managers :",u.length);for(const w of u)await oe.ref("managers/"+w.id).set(w)}if(f&&f.length>0){console.log("pins :",f.length);for(const w of f)await oe.ref("pins/"+w.id).set(w)}if(p&&p.length>0){console.log("companies :",p.length);for(const w of p)await oe.ref("companies/"+w.id).set(w)}if(x&&x.length>0){console.log("customers :",x.length);for(const w of x)await oe.ref("customers/"+w.id).set(w)}if(v&&v.length>0){console.log("sales :",v.length);for(const w of v)await oe.ref("sales/"+w.id).set(w)}if(y&&y.length>0){console.log("requests :",y.length);for(const w of y)await oe.ref("requests/"+w.id).set(w)}localStorage.setItem("bc_migration_done","true"),console.log(" !")},ui=_.useRef({});_.useEffect(()=>{const o=u=>{let f=u;u==="auto"&&(f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fS(f),f==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.body.style.removeProperty("background"),document.body.style.removeProperty("color")};if(o(Cr),localStorage.setItem("bc_theme_mode",Cr),Cr==="auto"){const u=window.matchMedia("(prefers-color-scheme: dark)"),f=p=>o("auto");return u.addEventListener("change",f),()=>u.removeEventListener("change",f)}},[Cr]),_.useEffect(()=>{const o=u=>{if(u.source===window){if(u.data.type==="BEANCRAFT_EXTENSION_READY"&&(console.log("  v"+u.data.version),HS(!0),nk("0000000000")),u.data.type==="BEANCRAFT_RESPONSE"){const{requestId:f,response:p}=u.data;ui.current[f]&&(ui.current[f](p),delete ui.current[f])}u.data.type==="BEANCRAFT_SCRAPE_PROGRESS"&&qS({phase:u.data.phase||"",current:u.data.current||0,total:u.data.total||0,found:u.data.found||0,message:u.data.message||""})}};return window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}},[]);const tk=(o,u={})=>new Promise(f=>{const p=Date.now()+Math.random();ui.current[p]=f,window.postMessage({type:"BEANCRAFT_REQUEST",action:o,requestId:p,...u},"*"),setTimeout(()=>{ui.current[p]&&(ui.current[p]({success:!1,error:""}),delete ui.current[p])},1e4)}),nk=async(o,u="sido")=>{if(!VS)return;const f=await tk("GET_REGIONS",{cortarNo:o});f&&f.success&&f.regions?(console.log("[] "+u+" :",f.regions.length+""),u==="sido"?GS(f.regions):u==="gugun"&&KS(f.regions)):console.error("   :",f==null?void 0:f.error)};_.useEffect(()=>{if(!n){ie("disconnected");return}ie("connecting"),ek();const o={managers:oe.ref("managers"),pins:oe.ref("pins"),companies:oe.ref("companies"),customers:oe.ref("customers"),sales:oe.ref("sales"),requests:oe.ref("requests"),adminPassword:oe.ref("adminPassword"),userStatus:oe.ref("userStatus"),routes:oe.ref("routes"),realtorCollections:oe.ref("realtorCollections"),realtors:oe.ref("realtors"),marketIssues:oe.ref("marketIssues").limitToLast(20)};return o.managers.on("value",u=>{const f=u.val();f&&RS(Object.values(f)),ie("connected")}),o.pins.on("value",u=>{const f=u.val();PS(f?Object.values(f):[])}),o.companies.on("value",u=>{const f=u.val();AS(f?Object.values(f):[])}),o.customers.on("value",u=>{const f=u.val();OS(f?Object.values(f):[])}),o.sales.on("value",u=>{const f=u.val();mv(f?Object.values(f):[])}),o.requests.on("value",u=>{const f=u.val();MS(f?Object.values(f):[])}),o.adminPassword.on("value",u=>{const f=u.val();f&&m(f)}),o.userStatus.on("value",u=>{const f=u.val();LS(f||{})}),o.routes.on("value",u=>{const f=u.val();xv(f?Object.values(f):[])}),o.realtorCollections.on("value",u=>{try{const f=u.val();if(f){const p=Object.entries(f).map(([x,v])=>({id:x,...v}));p.sort((x,v)=>v.exportedAt-x.exportedAt),ud(p)}else ud([])}catch(f){console.error("RealtorCollections  :",f),ud([])}},u=>{console.error("Firebase realtorCollections  :",u),ud([])}),o.calendarEvents=oe.ref("calendarEvents"),o.calendarEvents.on("value",u=>{const f=u.val();vv(f?Object.values(f):[])}),o.realtors.on("value",u=>{try{const f=u.val();if(f){const p=Object.entries(f).map(([x,v])=>({id:x,...v}));p.sort((x,v)=>(v.listings||0)-(x.listings||0)),fd(p);try{localStorage.setItem("bc_collected_realtors",JSON.stringify(p))}catch{}}else fd([]);Kf(!1)}catch(f){console.error("Realtors   :",f),fd([]),Kf(!1)}},u=>{console.error("Firebase realtors  :",u),fd([]),Kf(!1)}),o.marketIssues.on("value",u=>{try{const f=u.val();if(f){const p=Object.entries(f).map(([y,w])=>({id:y,...w})),x=Date.now()-365*24*60*60*1e3,v=p.filter(y=>new Date(y.||y.createdAt).getTime()<x?(oe.ref("marketIssues/"+y.id).remove(),!1):!0);v.sort((y,w)=>new Date(w.||w.createdAt)-new Date(y.||y.createdAt)),Ft(v)}else Ft([])}catch(f){console.error("MarketIssues   :",f),Ft([])}}),N(!0),ie("connected"),()=>{Object.values(o).forEach(u=>u.off())}},[n]),_.useEffect(()=>{if(!(n!=null&&n.managerId))return;const o=n.managerId,u=oe.ref(`userMents/${o}`),f=oe.ref(`mentFeedbacks/${o}`);return u.on("value",p=>{const x=p.val();if(x){const v=Object.keys(x).map(y=>({id:y,...x[y]}));O0(v)}else O0([])}),f.on("value",p=>{const x=p.val();if(x){const v=Object.keys(x).map(y=>({id:y,...x[y]}));M0(v)}else M0([])}),()=>{u.off(),f.off()}},[n==null?void 0:n.managerId]),_.useEffect(()=>{const o=oe.ref("teamFeedbacks");return o.orderByChild("timestamp").limitToLast(50).on("value",u=>{const f=u.val();if(f){const p=Object.keys(f).map(x=>({id:x,...f[x]})).sort((x,v)=>new Date(v.timestamp)-new Date(x.timestamp));W0(p)}else W0([])}),()=>o.off()},[]),_.useEffect(()=>{if(!t)return;const o=new Date().toISOString().split("T")[0];if(Ut.length>0){const u=Ut.filter(f=>f.date===o&&f.type==="followup");u.length>0&&Pc(f=>{if(f)return f;const p=u.slice(0,3).map(v=>v.title).join(", "),x=u.length>3?`  ${u.length-3}`:"";return{count:u.length,preview:p+x,events:u}})}if(Ve.length>0){const u=new Date;u.setDate(u.getDate()-1);const f=u.toISOString().split("T")[0],p=Ve.filter(x=>{var y;return!x.date||x.date>f||x.status==="completed"?!1:(y=x.stops)==null?void 0:y.some(w=>!w.visited)});p.length>0?ta({count:p.length,routes:p}):ta(null)}else ta(null)},[t,Ut,Ve]),_.useEffect(()=>{if(!t||!n||fe.length===0)return;const o=x=>{if(!x)return{hasIssue:!0,issue:" "};const v=[{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "}];for(const{pattern:D,issue:B}of v)if(D.test(x))return{hasIssue:!0,issue:B};const y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=["","","","","","","","","","","","","","","","","","","","","","","","",""],S=/|||||||||||||||||||/.test(x),P=y.some(D=>x.includes(D+"")||x.includes(D+" ")),R=w.some(D=>x.includes(D+"")||x.includes(D+" ")||x.includes(D+""));return!S&&!P&&!R&&x.length>5?{hasIssue:!0,issue:"/  "}:!/[-]+(|||||||||)\s*\d*/.test(x)&&x.length>3?{hasIssue:!0,issue:"   "}:{hasIssue:!1}},u=n.managerId||n.id,f=fe.filter(x=>x.managerId===u),p=[];f.forEach(x=>{const{hasIssue:v,issue:y}=o(x.address),w=!x.lat||!x.lng;(v||w)&&p.push({id:x.id,name:x.name,address:x.address,issue:v?y:"   (  )"})}),p.length>0?Uf({count:p.length,companies:p}):Uf(null)},[t,n,fe]);const rp=o=>oe.ref("managers/"+o.id).set(o),sp=o=>oe.ref("pins/"+o.id).set(o),Iv=o=>oe.ref("pins/"+o).remove(),Or=o=>oe.ref("companies/"+o.id).set(o),rk=o=>oe.ref("companies/"+o).remove(),Ev=o=>oe.ref("customers/"+o.id).set(o),sk=o=>oe.ref("customers/"+o).remove(),Tv=o=>oe.ref("sales/"+o.id).set(o),ik=o=>oe.ref("sales/"+o).remove(),Rv=o=>oe.ref("requests/"+o.id).set(o),yd=o=>oe.ref("routes/"+o.id).set(o),Pv=o=>oe.ref("routes/"+o).remove(),Av=o=>{const u=(n==null?void 0:n.managerId)||"admin";oe.ref(`userMents/${u}/${o.id}`).set(o)},ak=o=>{const u=(n==null?void 0:n.managerId)||"admin";oe.ref(`userMents/${u}/${o}`).remove()},lk=o=>{const u=(n==null?void 0:n.managerId)||"admin";oe.ref(`mentFeedbacks/${u}/${o.id}`).set(o)},ok=(o,u=!1)=>{const f=Xh.find(p=>p.id===o);if(f){const p={...f,useCount:(f.useCount||0)+1,successCount:u?(f.successCount||0)+1:f.successCount||0};Av(p)}},ip=o=>oe.ref("calendarEvents/"+o.id).set(o),ck=o=>oe.ref("calendarEvents/"+o).remove();_.useEffect(()=>{var u;const o=localStorage.getItem("bc_remember_login");if(o)try{const f=JSON.parse(o);f.expiry>Date.now()?(a(f.id||""),c(f.pw||""),h(!0)):localStorage.removeItem("bc_remember_login")}catch{localStorage.removeItem("bc_remember_login")}try{const f=localStorage.getItem("bc_temp_route");if(f){const p=JSON.parse(f);((u=p.stops)==null?void 0:u.length)>0&&(qt(p.stops),p.name&&kl(p.name),p.date&&ia(p.date),p.time&&Cl(p.time),p.managerId&&as(p.managerId),p.editingId&&od(p.editingId))}}catch{}},[]),_.useEffect(()=>{const o=hn.auth().onAuthStateChanged(async u=>{if(u&&!t){const f=localStorage.getItem("bc_session");if(f)try{const y=JSON.parse(f);if(y.expiry>Date.now()&&y.user){let w=y.user;if(w.username){const S=Hd.find(P=>P.username===w.username);S&&(!w.name||w.name.length<2||w.name.includes(""))&&(console.log(`[]   : ${w.name} -> ${S.name}`),w={...w,name:S.name},localStorage.setItem("bc_session",JSON.stringify({user:w,expiry:y.expiry})))}if(w){r(w),e(!0),w.managerId&&(as(w.managerId),Dl(w.managerId,!0)),console.log("  :",w.name);return}}}catch{}const p=u.email,x=p.split("@")[0];let v=null;if(x==="admin")v={name:"admin",role:"super",email:p};else try{const w=(await oe.ref("managers").once("value")).val(),P=(w?Object.values(w):[]).find(R=>R.username===x||R.email===p);if(P){let R=P.name;const O=Hd.find(D=>D.username===x||D.id===P.id);O&&(!P.name||P.name.length<2||P.name.includes(""))&&(R=O.name,console.log(`[]   : ${P.name} -> ${R}`),oe.ref("managers/"+P.id).update({name:R})),v={name:R,role:"manager",managerId:P.id,username:P.username,email:p}}else v={name:x,role:"manager",email:p}}catch(y){console.error("managers  :",y),v={name:x,role:"manager",email:p}}r(v),e(!0),v.managerId&&(as(v.managerId),Dl(v.managerId,!0)),localStorage.setItem("bc_session",JSON.stringify({user:v,expiry:Date.now()+216e5})),console.log("Firebase  :",v.name)}else!u&&t&&(e(!1),r(null),localStorage.removeItem("bc_session"))});return()=>o()},[t]),_.useEffect(()=>{const o=()=>{if(Wc.length>0){const u=[...Wc],f=u.pop();xf(u),q(f)}};return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[Wc]);const cs=o=>{o!==A&&(window.history.pushState({tab:o},""),xf([...Wc,A]),q(o),localStorage.setItem("bc_current_tab",o))};_.useEffect(()=>{localStorage.setItem("bc_current_tab",A)},[A]);const Ov=_.useRef(Zf),Mv=_.useRef(ep),ap=_.useRef(jl),Dv=_.useRef(fe),Lv=_.useRef(ye),Fv=_.useRef(nd);_.useEffect(()=>{Ov.current=Zf},[Zf]),_.useEffect(()=>{Mv.current=ep},[ep]),_.useEffect(()=>{ap.current=jl},[jl]),_.useEffect(()=>{Dv.current=fe},[fe]),_.useEffect(()=>{Lv.current=ye},[ye]),_.useEffect(()=>{Fv.current=nd},[nd]),_.useEffect(()=>{if(Ce.length>0){const o={stops:Ce,name:Sl,date:ad,time:ld,managerId:Mf,editingId:ii,savedAt:new Date().toISOString()};localStorage.setItem("bc_temp_route",JSON.stringify(o))}else localStorage.removeItem("bc_temp_route")},[Ce]);const dk=(o,u)=>u?Math.max(28,o*2.5):o<=8?14:o<=10?18:o<=12?22:o<=14?26:30;_.useEffect(()=>{if(t&&A==="map"&&rd.current){Ae.current=null;const o=()=>{var u;if(!((u=window.naver)!=null&&u.maps)){setTimeout(o,100);return}if(!rd.current){setTimeout(o,100);return}Ae.current=new naver.maps.Map(rd.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(Ae.current,"zoom_changed",()=>{fa()}),naver.maps.Event.addListener(Ae.current,"click",f=>{const p=Ov.current,x=Mv.current;if(!p)return;const v=f.coord.lat(),y=f.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(v,y)},(w,S)=>{var D,B,Q;let P=v.toFixed(4)+", "+y.toFixed(4);if(w===naver.maps.Service.Status.OK&&S.v2.results[0]){const k=S.v2.results[0].region;k&&(P=[(D=k.area1)==null?void 0:D.name,(B=k.area2)==null?void 0:B.name,(Q=k.area3)==null?void 0:Q.name].filter(Boolean).join(" "))}const R=x?"planned":"confirmed",O={id:Date.now(),managerId:p,status:R,region:P,lat:v,lng:y,date:x||"",createdAt:new Date().toISOString()};sp(O)})}),setTimeout(()=>fa(),500)};setTimeout(o,300)}},[t,A]),_.useEffect(()=>{t&&A==="map"&&Ae.current&&setTimeout(()=>{naver.maps.Event.trigger(Ae.current,"resize"),fa()},100)},[t,A]),_.useEffect(()=>{t&&A==="route"&&se.current&&setTimeout(()=>{naver.maps.Event.trigger(se.current,"resize")},100)},[t,A]);const uk=()=>{let o=ap.current;oi!=="all"&&(o=o.filter(u=>u.managerId===Number(oi))),ci!=="all"&&(o=o.filter(u=>u.status===ci)),Af(o.map(u=>u.id)),setTimeout(()=>fa(),100)},fa=_.useCallback(()=>{var v;if(!Ae.current||!((v=window.naver)!=null&&v.maps))return;Of.current.forEach(y=>y.setMap(null)),Of.current=[];const o=Dv.current,u=Lv.current,f=Fv.current,p=Ae.current.getZoom();let x=o.filter(y=>y.lat&&y.lng);oi!=="all"&&(x=x.filter(y=>y.managerId===Number(oi))),ci!=="all"&&(x=x.filter(y=>y.reaction===ci)),x.forEach(y=>{const w=u.find(B=>B.id===y.managerId);gt[y.reaction]||gt.neutral;const S=f.includes(y.id)||y.reaction==="special",P=dk(p,S),R=Math.max(2,Math.floor(P/5));let O="#9ca3af";y.reaction==="special"?O="#ef4444":y.reaction==="positive"?O="#22c55e":y.reaction==="neutral"?O="#f97316":y.reaction==="missed"&&(O="#eab308");const D=new naver.maps.Marker({position:new naver.maps.LatLng(y.lat,y.lng),map:Ae.current,icon:{content:`<div class="${S?y.reaction==="special"?"special-blink":"marker-pulse":""}" style="width:${P}px;height:${P}px;background:${O};border-radius:50%;border:${R}px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.4);cursor:pointer;display:flex;align-items:center;justify-content:center;">
 <span style="font-size:${Math.max(8,P/2.5)}px;color:white;font-weight:bold;">${y.name.charAt(0)}</span>
 </div>`,anchor:new naver.maps.Point(P/2,P/2)}});naver.maps.Event.addListener(D,"click",()=>{bl({...y,manager:w})}),Of.current.push(D)}),f.length>0&&setTimeout(()=>Af([]),5e3)},[oi,ci]);_.useEffect(()=>{Ae.current&&fa()},[fe,ye,oi,ci,nd,fa]),_.useEffect(()=>{if(t)return;const o=setTimeout(()=>T("logo"),4e3),u=setTimeout(()=>T("form"),6e3);return()=>{clearTimeout(o),clearTimeout(u)}},[t]),_.useEffect(()=>{var p,x;if(!t||fe.length===0||!((x=(p=window.naver)==null?void 0:p.maps)!=null&&x.Service))return;const o=fe.filter(v=>(!v.lat||!v.lng)&&(v.address||v.name));if(o.length===0)return;const f=setTimeout(async()=>{let v=0;for(const y of o){const w=await cp(y.address,y.name);if(w){const S={...y,lat:w.lat,lng:w.lng};Or(S),v++}await new Promise(S=>setTimeout(S,300))}v>0&&console.log(`  ${v}    `)},2e3);return()=>clearTimeout(f)},[t,fe.length]),_.useEffect(()=>{if(t&&A==="route"){se.current&&(se.current=null);const o=()=>{var u;if(!Yf.current){console.log("[] routeMapRef ..."),setTimeout(o,100);return}if(!((u=window.naver)!=null&&u.maps)){console.log("[] naver.maps ..."),setTimeout(o,100);return}se.current||(console.log("[]  "),se.current=new naver.maps.Map(Yf.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(se.current,"click",f=>{const p=f.coord.lat(),x=f.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(p,x),orders:"roadaddr,addr"},(v,y)=>{var R,O;let w=" ",S="";if(v===naver.maps.Service.Status.OK&&((R=y.v2.results)==null?void 0:R.length)>0){const D=y.v2.results[0];if(D.land){const B=D.land;S=`${D.region.area1.name} ${D.region.area2.name} ${D.region.area3.name} ${B.name||""} ${B.number1||""}`.trim(),(O=B.addition0)!=null&&O.value?w=B.addition0.value:w=`${D.region.area3.name} ${B.number1||""}`.trim()}}const P={id:Date.now(),name:w,address:S,lat:p,lng:x,type:"click"};qt(D=>[...D,P])})}),console.log("[]  !"),setTimeout(()=>_d(),500))};setTimeout(o,300)}},[t,A]),_.useEffect(()=>{if(!se.current){A==="route"&&Ce.length>0&&setTimeout(()=>{se.current&&_d()},500);return}_d()},[Ce,A]);const bd=()=>{Tr.current.forEach(o=>o.setMap(null)),Tr.current=[],Rr.current.forEach(o=>o.setMap(null)),Rr.current=[],jv.current.forEach(o=>o.setMap(null)),jv.current=[],os.current&&(os.current.setMap(null),os.current=null),xd(null)},_d=()=>{if(!se.current)return;bd();const o=Ce.filter(u=>u.lat&&u.lng);o.length!==0&&setTimeout(()=>{if(!se.current)return;const u={};if(o.forEach((f,p)=>{const x=`${f.lat.toFixed(5)}_${f.lng.toFixed(5)}`;u[x]||(u[x]=[]),u[x].push({...f,originalIdx:p})}),Object.values(u).forEach(f=>{const p=f.length;f.forEach((x,v)=>{let y=0,w=0;if(p>1){const R=2*Math.PI/p*v,O=15e-5;y=Math.cos(R)*O,w=Math.sin(R)*O}const S=p>1,P=new naver.maps.Marker({position:new naver.maps.LatLng(x.lat+y,x.lng+w),map:se.current,icon:{content:`<div style="background:linear-gradient(135deg,${S?"#f59e0b":"#14b8a6"},${S?"#d97706":"#0d9488"});color:white;width:${S?"32px":"28px"};height:${S?"32px":"28px"};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:${S?"11px":"12px"};box-shadow:0 3px 8px rgba(0,0,0,0.4);border:2px solid ${S?"#fbbf24":"white"}">${x.originalIdx+1}</div>`,anchor:new naver.maps.Point(S?16:14,S?16:14)},zIndex:100+x.originalIdx});naver.maps.Event.addListener(P,"click",()=>{cd(x.originalIdx)}),Tr.current.push(P)})}),o.length>=2){const f=o.map(x=>new naver.maps.LatLng(x.lat,x.lng)),p=new naver.maps.Polyline({map:se.current,path:f,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.9});Rr.current.push(p)}if(o.length===1)se.current.setCenter(new naver.maps.LatLng(o[0].lat,o[0].lng)),se.current.setZoom(15);else if(o.length>=2){const f=new naver.maps.LatLngBounds;o.forEach(p=>f.extend(new naver.maps.LatLng(p.lat,p.lng))),se.current.fitBounds(f,{padding:50})}},100)},hk=o=>{o.length!==0&&(Sv("all"),kv("all"),Af(o.map(u=>u.id)),cs("map"),setTimeout(()=>{if(Ae.current&&o.length>0)if(o.length===1)Ae.current.setCenter(new naver.maps.LatLng(o[0].lat,o[0].lng)),Ae.current.setZoom(14);else{const u=new naver.maps.LatLngBounds;o.forEach(f=>u.extend(new naver.maps.LatLng(f.lat,f.lng))),Ae.current.fitBounds(u,{padding:50})}},300))},fk=o=>(n==null?void 0:n.role)==="super"||o.managerId===(n==null?void 0:n.managerId),pk=o=>{Iv(o),yl(null)},mk=(o,u)=>{const f=jl.find(p=>p.id===o);f&&sp({...f,date:u,status:u?"planned":"confirmed"})},gk=()=>{ri.forEach(o=>{const u=jl.find(f=>f.id===o);u&&sp({...u,status:"confirmed",expiredChecked:!0})}),sa([]),Gc(null)},xk=()=>{confirm(`${ri.length}  ?`)&&(ri.forEach(o=>Iv(o)),sa([]),Gc(null))},ds={:{lat:37.5547,lng:126.9707},:{lat:37.5659,lng:126.9773},:{lat:37.5701,lng:126.9822},3:{lat:37.5714,lng:126.9916},5:{lat:37.5707,lng:126.9992},:{lat:37.5711,lng:127.0095},:{lat:37.5762,lng:127.0251},:{lat:37.4979,lng:127.0276},:{lat:37.5007,lng:127.0365},:{lat:37.5045,lng:127.049},:{lat:37.5089,lng:127.0637},:{lat:37.5108,lng:127.0736},:{lat:37.5133,lng:127.1001},:{lat:37.5571,lng:126.9244},:{lat:37.5495,lng:126.9138},:{lat:37.5552,lng:126.9366},:{lat:37.5569,lng:126.9463},:{lat:37.5575,lng:126.9559},:{lat:37.5601,lng:126.9635},:{lat:37.566,lng:126.9823},3:{lat:37.5665,lng:126.9918},4:{lat:37.5669,lng:126.9983},:{lat:37.5653,lng:127.0076},:{lat:37.5659,lng:127.0176},:{lat:37.565,lng:127.0296},:{lat:37.5614,lng:127.0378},:{lat:37.5568,lng:127.0441},:{lat:37.5474,lng:127.0473},:{lat:37.5446,lng:127.0558},:{lat:37.5404,lng:127.07},:{lat:37.5358,lng:127.0863},:{lat:37.5352,lng:127.0948},:{lat:37.521,lng:127.1028},:{lat:37.5114,lng:127.0833},:{lat:37.4934,lng:127.0148},:{lat:37.492,lng:127.0077},:{lat:37.4815,lng:126.9976},:{lat:37.4766,lng:126.9816},:{lat:37.4769,lng:126.9637},:{lat:37.4812,lng:126.9527},:{lat:37.4824,lng:126.9418},:{lat:37.4842,lng:126.9296},:{lat:37.4876,lng:126.9131},:{lat:37.4854,lng:126.9015},:{lat:37.4929,lng:126.8966},:{lat:37.5088,lng:126.8913},:{lat:37.5178,lng:126.8956},:{lat:37.5247,lng:126.8964},:{lat:37.5349,lng:126.9024},:{lat:37.4856,lng:127.0165},:{lat:37.4844,lng:127.0343},:{lat:37.4871,lng:127.0467},:{lat:37.4908,lng:127.0555},:{lat:37.4946,lng:127.0634},:{lat:37.4968,lng:127.0716},:{lat:37.4987,lng:127.0792},:{lat:37.4838,lng:127.0858},:{lat:37.4874,lng:127.1017},:{lat:37.5271,lng:127.0284},:{lat:37.5168,lng:127.0203},:{lat:37.5112,lng:127.0132},:{lat:37.5048,lng:127.0049},:{lat:37.5405,lng:127.0172},:{lat:37.5476,lng:127.0131},:{lat:37.5541,lng:127.0103},:{lat:37.5588,lng:127.0096},:{lat:37.5614,lng:126.9943},:{lat:37.5759,lng:126.9735},:{lat:37.5766,lng:126.9855},:{lat:37.5608,lng:126.986},:{lat:37.5587,lng:126.9785},:{lat:37.5447,lng:126.972},:{lat:37.5349,lng:126.9732},:{lat:37.5295,lng:126.9686},:{lat:37.5214,lng:126.971},:{lat:37.5082,lng:126.979},:{lat:37.4868,lng:126.9816},:{lat:37.4698,lng:126.9853},:{lat:37.5822,lng:127.0019},:{lat:37.5884,lng:127.0064},:{lat:37.5929,lng:127.0166},:{lat:37.6035,lng:127.0251},:{lat:37.6131,lng:127.03},:{lat:37.6215,lng:127.0298},:{lat:37.6381,lng:127.0257},:{lat:37.6483,lng:127.0345},:{lat:37.6531,lng:127.0476},:{lat:37.6559,lng:127.0619},:{lat:37.6612,lng:127.073},:{lat:37.6702,lng:127.0799},:{lat:37.5708,lng:126.9768},:{lat:37.5653,lng:126.9666},:{lat:37.5476,lng:126.9312},:{lat:37.5247,lng:126.856},:{lat:37.5263,lng:126.875},:{lat:37.5242,lng:126.887},:{lat:37.5256,lng:126.8845},:{lat:37.5225,lng:126.9057},:{lat:37.5216,lng:126.9242},:{lat:37.5271,lng:126.9328},:{lat:37.5392,lng:126.946},:{lat:37.544,lng:126.9517},:{lat:37.5532,lng:126.9568},:{lat:37.5571,lng:127.0296},:{lat:37.5669,lng:127.052},:{lat:37.5613,lng:127.0641},:{lat:37.557,lng:127.0793},:{lat:37.5513,lng:127.0882},:{lat:37.5452,lng:127.1031},:{lat:37.5389,lng:127.1236},:{lat:37.5352,lng:127.1323},:{lat:37.5343,lng:127.1427},:{lat:37.5352,lng:127.152},:{lat:37.5424,lng:127.1441},:{lat:37.555,lng:127.1541},:{lat:37.5571,lng:127.167},:{lat:37.5344,lng:126.9945},:{lat:37.5342,lng:126.9874},:{lat:37.539,lng:126.9617},:{lat:37.5474,lng:126.9434},:{lat:37.5477,lng:126.9225},:{lat:37.5555,lng:126.9105},:{lat:37.5635,lng:126.904},:{lat:37.5681,lng:126.8972},:{lat:37.5769,lng:126.8997},:{lat:37.583,lng:126.9096},:{lat:37.5851,lng:126.918},:{lat:37.5933,lng:126.9179},:{lat:37.6017,lng:126.9214},:{lat:37.6107,lng:126.9301},:{lat:37.6149,lng:126.9391},:{lat:37.6189,lng:126.9209},:{lat:37.6159,lng:126.9114},:{lat:37.5397,lng:127.0019},:{lat:37.5474,lng:127.0071},:{lat:37.5602,lng:127.0149},:{lat:37.5718,lng:127.0166},:{lat:37.5798,lng:127.0147},:{lat:37.5868,lng:127.0195},:{lat:37.5863,lng:127.029},:{lat:37.5895,lng:127.034},:{lat:37.6017,lng:127.038},:{lat:37.6062,lng:127.0442},:{lat:37.6105,lng:127.0512},:{lat:37.6153,lng:127.0661},:{lat:37.6177,lng:127.0754},:{lat:37.6199,lng:127.0842},:{lat:37.6188,lng:127.0914},:{lat:37.5109,lng:127.0218},:{lat:37.5145,lng:127.0316},:{lat:37.5172,lng:127.0412},:{lat:37.5198,lng:127.0535},:{lat:37.5316,lng:127.0667},:{lat:37.5475,lng:127.0743},:{lat:37.5656,lng:127.084},:{lat:37.5735,lng:127.0869},:{lat:37.5802,lng:127.089},:{lat:37.5887,lng:127.087},:{lat:37.5966,lng:127.0851},:{lat:37.6026,lng:127.079},:{lat:37.6107,lng:127.0768},:{lat:37.6253,lng:127.0729},:{lat:37.6371,lng:127.0669},:{lat:37.6442,lng:127.064},:{lat:37.665,lng:127.0581},:{lat:37.6748,lng:127.0565},:{lat:37.6896,lng:127.0449},:{lat:37.6986,lng:127.0531},:{lat:37.5021,lng:126.9958},:{lat:37.4874,lng:126.9877},:{lat:37.4852,lng:126.9817},:{lat:37.4838,lng:126.9726},:{lat:37.4965,lng:126.9535},:{lat:37.5027,lng:126.9504},:{lat:37.5082,lng:126.9396},:{lat:37.4994,lng:126.9269},:{lat:37.4997,lng:126.9184},:{lat:37.503,lng:126.9086},:{lat:37.4865,lng:126.8873},:{lat:37.4813,lng:126.8828},:{lat:37.4762,lng:126.8687},:{lat:37.4762,lng:126.8563},:{lat:37.4792,lng:126.8421},:{lat:37.4927,lng:126.8234},:{lat:37.517,lng:127.1117},:{lat:37.5303,lng:127.1238},:{lat:37.5502,lng:127.1279},:{lat:37.5059,lng:127.1016},:{lat:37.5007,lng:127.1062},:{lat:37.4929,lng:127.1182},:{lat:37.4858,lng:127.1224},:{lat:37.4781,lng:127.1264},:{lat:37.4703,lng:127.1267},:{lat:37.4584,lng:127.15},:{lat:37.4507,lng:127.1573},:{lat:37.4455,lng:127.1574},:{lat:37.4389,lng:127.1538},:{lat:37.4345,lng:127.1508},:{lat:37.4322,lng:127.1291},:{lat:37.5794,lng:126.7975},:{lat:37.5622,lng:126.8011},:{lat:37.5596,lng:126.81},:{lat:37.5619,lng:126.8167},:{lat:37.5671,lng:126.8277},:{lat:37.5607,lng:126.8438},:{lat:37.5614,lng:126.854},:{lat:37.5587,lng:126.8622},:{lat:37.5516,lng:126.8718},:{lat:37.5471,lng:126.8773},:{lat:37.5392,lng:126.8785},:{lat:37.5331,lng:126.8936},:{lat:37.5284,lng:126.9182},:{lat:37.5176,lng:126.9324},:{lat:37.5131,lng:126.9426},:{lat:37.5122,lng:126.9527},:{lat:37.5083,lng:126.9633},:{lat:37.5079,lng:126.9882},:{lat:37.5082,lng:126.9961},:{lat:37.5027,lng:127.0147},:{lat:37.5048,lng:127.0249},:{lat:37.5075,lng:127.0345},:{lat:37.5104,lng:127.0433},:{lat:37.5114,lng:127.052},:{lat:37.5145,lng:127.0593},:{lat:37.5046,lng:127.0862},:{lat:37.5018,lng:127.0935},:{lat:37.5098,lng:127.1089},:{lat:37.5173,lng:127.1117},:{lat:37.5213,lng:127.1249},:{lat:37.5239,lng:127.1354},:{lat:37.5284,lng:127.148},:{lat:37.5416,lng:126.9714},:{lat:37.5299,lng:126.9647},:{lat:37.4984,lng:126.9265},:{lat:37.5174,lng:126.9141},:{lat:37.5159,lng:126.9073},:{lat:37.5032,lng:126.8822},:{lat:37.4569,lng:126.8957},:{lat:37.4679,lng:126.8958},:{lat:37.4796,lng:126.888},:{lat:37.5434,lng:127.0446},:{lat:37.5273,lng:127.0393},:{lat:37.4996,lng:127.0556},:{lat:37.4858,lng:127.0534},:{lat:37.48,lng:127.0509},:{lat:37.4747,lng:127.064},:{lat:37.45,lng:127.127},:{lat:37.44,lng:127.127},:{lat:37.4116,lng:127.1278},:{lat:37.3953,lng:127.1268},:{lat:37.385,lng:127.1234},:{lat:37.378,lng:127.1167},:{lat:37.3665,lng:127.1085},:{lat:37.3607,lng:127.1089},:{lat:37.3397,lng:127.1088},:{lat:37.3253,lng:127.1073},:{lat:37.3127,lng:127.1116},:{lat:37.2997,lng:127.1078},:{lat:37.2853,lng:127.1092},:{lat:37.275,lng:127.116},:{lat:37.265,lng:127.1182},:{lat:37.252,lng:127.0773},:{lat:37.2519,lng:127.0549},:{lat:37.244,lng:127.0471},:{lat:37.2399,lng:127.036},:{lat:37.2634,lng:127.0323},:{lat:37.267,lng:127.0119},:{lat:37.266,lng:126.9996},:{lat:37.47,lng:127.0391},:{lat:37.4509,lng:127.0538},:{lat:37.3947,lng:127.1115},:{lat:37.5313,lng:127.0369},:{lat:37.5805,lng:127.047},:{lat:37.5895,lng:127.0575},:{lat:37.5971,lng:127.0665},:{lat:37.5992,lng:127.0919},:{lat:37.6079,lng:127.1071},:{lat:37.5988,lng:127.1394},:{lat:37.6084,lng:127.1475},:{lat:37.6102,lng:127.162},:{lat:37.5879,lng:127.1901},:{lat:37.58,lng:127.2083},:{lat:37.5231,lng:127.2798},:{lat:37.5411,lng:127.312},:{lat:37.5456,lng:127.3204},:{lat:37.5508,lng:127.3459},:{lat:37.5633,lng:127.3704},:{lat:37.5664,lng:127.3964},:{lat:37.563,lng:127.4163},:{lat:37.4858,lng:127.4623},:{lat:37.4319,lng:127.5053},:{lat:37.6635,lng:127.0115},:{lat:37.6575,lng:127.0123},"4.19":{lat:37.6517,lng:127.0134},:{lat:37.6459,lng:127.0147},:{lat:37.6398,lng:127.0161},:{lat:37.6316,lng:127.0183},:{lat:37.6263,lng:127.0197},:{lat:37.6188,lng:127.0215},:{lat:37.6135,lng:127.0224},:{lat:37.6073,lng:127.0243},:{lat:37.5359,lng:126.7385},:{lat:37.559,lng:126.6882},:{lat:37.5323,lng:126.6416},:{lat:37.4929,lng:126.4939},:{lat:37.4974,lng:126.4692},:{lat:37.4465,lng:126.4519},1:{lat:37.4493,lng:126.4514},2:{lat:37.4604,lng:126.4419},:{lat:37.512,lng:127.059},:{lat:37.5111,lng:127.098},:{lat:37.5512,lng:126.9882},:{lat:37.5796,lng:126.977},:{lat:37.5794,lng:126.991},:{lat:37.5658,lng:126.9749},:{lat:37.5673,lng:127.0095},DDP:{lat:37.5673,lng:127.0095},:{lat:37.5344,lng:126.9945},:{lat:37.5608,lng:126.986},:{lat:37.574,lng:126.985},:{lat:37.5825,lng:126.985},:{lat:37.5716,lng:126.9769},:{lat:37.5695,lng:126.978},:{lat:37.5256,lng:126.9227},:{lat:37.5284,lng:126.934},:{lat:37.5213,lng:127.1249},:{lat:37.5434,lng:127.0446},:{lat:37.6207,lng:127.0404},:{lat:37.5681,lng:126.8972},:{lat:37.5151,lng:127.073},:{lat:37.4982,lng:126.8671},:{lat:37.5203,lng:127.023},:{lat:37.5198,lng:127.0535},:{lat:37.5273,lng:127.0393},:{lat:37.5446,lng:127.0558},:{lat:37.5665,lng:126.9918},:{lat:37.574,lng:126.989},:{lat:37.56,lng:126.922},:{lat:37.55,lng:126.91},:{lat:37.542,lng:126.985},:{lat:37.537,lng:126.992}},Uv=o=>{const u=o.trim();if(ds[u])return ds[u];if(ds[u+""])return ds[u+""];if(u.endsWith("")&&ds[u.slice(0,-1)])return ds[u.slice(0,-1)];const p=Object.keys(ds).find(x=>x.includes(u)||u.includes(x));return p?ds[p]:null},$v=()=>{if(Xf.trim()&&Ae.current){const o=Xf.trim(),u=Uv(o);if(u){Ae.current.setCenter(new naver.maps.LatLng(u.lat,u.lng)),Ae.current.setZoom(16),si.current.forEach(x=>x.setMap(null)),si.current=[];const p=new naver.maps.Circle({map:Ae.current,center:new naver.maps.LatLng(u.lat,u.lng),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});si.current.push(p),setTimeout(()=>p.setMap(null),5e3);return}const f=ap.current.filter(p=>p.region&&p.region.toLowerCase().includes(o.toLowerCase()));if(f.length>0){hk(f);return}naver.maps.Service.geocode({query:o},(p,x)=>{if(p===naver.maps.Service.Status.OK&&x.v2.addresses&&x.v2.addresses.length>0){const v=x.v2.addresses[0],y=parseFloat(v.y),w=parseFloat(v.x);Ae.current.setCenter(new naver.maps.LatLng(y,w)),Ae.current.setZoom(16),si.current.forEach(P=>P.setMap(null)),si.current=[];const S=new naver.maps.Circle({map:Ae.current,center:new naver.maps.LatLng(y,w),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});si.current.push(S),setTimeout(()=>S.setMap(null),5e3)}else alert("  .")})}else uk()},hi=o=>o?o.replace(/[^0-9]/g,""):"",vk=(o,u,f,p)=>{if(!o||!u||!f||!p)return 1/0;const x=6371e3,v=(f-o)*Math.PI/180,y=(p-u)*Math.PI/180,w=Math.sin(v/2)*Math.sin(v/2)+Math.cos(o*Math.PI/180)*Math.cos(f*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2),S=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return x*S},lp=(o,u)=>{if(!o||!u||u.length===0)return{isDuplicate:!1,matchedCompany:null};const f=o.name||o.officeName||o.realtorName||"",p=o.address||"",x=o.regNo||"",v=o.lat,y=o.lng,w=[hi(o.phone||""),hi(o.cellPhone||""),hi(o.officePhone||""),hi(o.mobile||"")].filter(D=>D&&D.length>=4),S=D=>(D||"").replace(/||||||/g,"").replace(/\s+/g,"").trim(),P=D=>{if(!D)return"";const Q=D.replace(/|||||/g,"").replace(/\([^)]*\)/g,"").trim().match(/(\S+)\s*(\S+(?:||))\s*(\d+(?:-\d+)?)/);return Q?`${Q[1]}_${Q[2]}_${Q[3]}`:""},R=S(f),O=P(p);for(const D of u){const B=D.name||"",Q=D.address||"",k=D.regNo||"",de=D.lat,F=D.lng,H=[hi(D.phone||""),hi(D.contact||""),hi(D.mobile||"")].filter(le=>le&&le.length>=4),G=S(B),z=P(Q);if(x&&k&&x===k)return{isDuplicate:!0,matchedCompany:D,reason:"regNo"};if(vk(v,y,de,F)<=30&&R&&G&&R===G)return{isDuplicate:!0,matchedCompany:D,reason:"location+name"};if(w.some(le=>H.some(ee=>le===ee)))return{isDuplicate:!0,matchedCompany:D,reason:"phone"};if(O&&z&&O===z&&R&&G&&R===G)return{isDuplicate:!0,matchedCompany:D,reason:"address+name"};if(R&&G&&R===G){const le=p.match(/(\S+)/),ee=Q.match(/(\S+)/);if(le&&ee&&le[1]===ee[1])return{isDuplicate:!0,matchedCompany:D,reason:"name_in_gu"}}}return{isDuplicate:!1,matchedCompany:null}},op=(o,u)=>lp(o,u).isDuplicate,cp=(o,u=null)=>new Promise(f=>{var v,y;if(!((y=(v=window.naver)==null?void 0:v.maps)!=null&&y.Service)){f(null);return}const p=w=>new Promise(S=>{if(!w){S(null);return}naver.maps.Service.geocode({query:w},(P,R)=>{var O;if(P===naver.maps.Service.Status.OK&&((O=R.v2.addresses)==null?void 0:O.length)>0){const D=R.v2.addresses[0];S({lat:parseFloat(D.y),lng:parseFloat(D.x)})}else S(null)})});(async()=>{if(o){const w=await p(o);if(w)return f(w)}if(u){const w=await p(u);if(w)return f(w)}if(o){const w=o.replace(/\s*\d+.*$/,"").replace(/\s*\d+.*$/,"").replace(/\s*,.*$/,"").trim();if(w!==o){const S=await p(w);if(S)return f(S)}}if(o){const w=o.match(/(||||||||||||||||)[^\s]*\s+[^\s]+/);if(w){const S=await p(w[0]);if(S)return f(S)}}f(null)})()}),yk=o=>{const u=ms(),f=Ut.filter(v=>v.date!==u?!1:o.role==="super"?!0:v.managerId===o.managerId),p=Ve.filter(v=>v.date!==u?!1:o.role==="super"?!0:v.managerId===o.managerId),x=[...f.map(v=>({type:"calendar",...v})),...p.map(v=>{var y;return{type:"route",title:`: ${((y=v.stops)==null?void 0:y.length)||0} `,...v}})];x.length>0&&(SS(x),kf(!0))},bk=()=>{const o=tm();return o.dayOfWeek!==1?!1:o.day>=22&&o.day<=28},_k=o=>{if(o.role==="super"||!bk())return;const u=tm(),f=u.month+1>11?0:u.month+1,x=`${u.month+1>11?u.year+1:u.year}-${String(f+1).padStart(2,"0")}`;Ut.some(y=>{var w;return y.managerId===o.managerId&&((w=y.date)==null?void 0:w.startsWith(x))})||Ef(!0)},Wv=async o=>new Promise((u,f)=>{const p=new FileReader;p.onload=async()=>{var x,v,y,w;try{const S=p.result.split(",")[1],R=await(await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${vD}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:S},features:[{type:"TEXT_DETECTION"}]}]})})).json();if((w=(y=(v=(x=R.responses)==null?void 0:x[0])==null?void 0:v.textAnnotations)==null?void 0:y[0])!=null&&w.description){const O=R.responses[0].textAnnotations[0].description,D=wk(O);u(D)}else u({raw:"",name:"",contact:"",phone:"",address:""})}catch(S){f(S)}},p.onerror=f,p.readAsDataURL(o)}),wk=o=>{const u=o.split(`
`).map(R=>R.trim()).filter(R=>R);let f="",p="",x="",v="";const y=[/010[-\s]?\d{4}[-\s]?\d{4}/,/02[-\s]?\d{3,4}[-\s]?\d{4}/,/0\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/];for(const R of u){for(const O of y){const D=R.match(O);if(D){x=D[0].replace(/[-\s]/g,"");break}}if(x)break}const w=/(||||||||||||||||)[^\n]+?(|||||)[^\n]*\d*/;for(const R of u){const O=R.match(w);if(O){v=O[0];break}}const S=[/\s*[:\s]*([-]{2,4})/,/([-]{2,4})\s*(|||||||)/,/^([-]{2,4})$/];for(const R of u){for(const O of S){const D=R.match(O);if(D){p=D[1]||D[0];break}}if(p)break}const P=[/([-]+)/,/([-]+)/,/([-]+)/];for(const R of u){for(const O of P){const D=R.match(O);if(D){f=D[1];break}}if(f)break}return{raw:o,name:f,contact:p,phone:x,address:v}},Nk=async o=>{var f;const u=(f=o.target.files)==null?void 0:f[0];if(u){Xc(!0),Jc(!0);try{const p=await Wv(u);Cf(p),at({...ae,name:p.name||"",contact:p.contact||"",phone:p.phone||"",address:p.address||""})}catch(p){console.error("OCR :",p),alert("  .")}finally{Xc(!1),o.target.value=""}}},jk=async o=>{const u=Array.from(o.target.files||[]).slice(0,10);if(u.length!==0){Xc(!0),jf(!0),tr([]);try{const f=[];for(let p=0;p<u.length;p++){const x=await Wv(u[p]);f.push({...x,managerId:(n==null?void 0:n.managerId)||null,reaction:"neutral",memo:""})}tr(f)}catch(f){console.error("OCR :",f),alert("    .")}finally{Xc(!1),o.target.value=""}}},Ck=()=>{const o=Cn.filter(u=>u.name);if(o.length===0)return alert("  .");o.forEach((u,f)=>{const p={id:Date.now()+f,name:u.name,contact:u.contact,phone:u.phone,address:u.address,region:u.address,managerId:u.managerId,reaction:u.reaction,memo:u.memo,createdAt:new Date().toLocaleString("ko-KR")};Or(p)}),alert(`${o.length}  .`),tr([]),jf(!1)},Sk=(o,u,f,p)=>{const x=R=>R*Math.PI/180,v=R=>R*180/Math.PI,y=x(p-u),w=Math.sin(y)*Math.cos(x(f)),S=Math.cos(x(o))*Math.sin(x(f))-Math.sin(x(o))*Math.cos(x(f))*Math.cos(y);return(v(Math.atan2(w,S))+360)%360},kk=(o,u,f,p)=>{if(!se.current)return;const x=new naver.maps.LatLng(o,u);Pr.current||(Pr.current=new naver.maps.Marker({position:x,map:se.current,icon:{content:"",anchor:new naver.maps.Point(20,20)},zIndex:1e3})),Pr.current.setPosition(x);const v=f||0;Pr.current.setIcon({content:`<div style="position: relative; width: 40px; height: 40px;">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(${v}deg);">
 <div style="width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 20px solid #4285f4; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));"></div>
 </div>
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #4285f4; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6px; height: 6px; background: white; border-radius: 50%;"></div>
 </div>
 </div>`,anchor:new naver.maps.Point(20,20)}),p&&p<500&&(Ar.current?(Ar.current.setCenter(x),Ar.current.setRadius(p)):Ar.current=new naver.maps.Circle({map:se.current,center:x,radius:p,fillColor:"#4285f4",fillOpacity:.1,strokeColor:"#4285f4",strokeOpacity:.3,strokeWeight:1}))},Ik=()=>{if(pd)da.current&&(navigator.geolocation.clearWatch(da.current),da.current=null),Pr.current&&(Pr.current.setMap(null),Pr.current=null),Ar.current&&(Ar.current.setMap(null),Ar.current=null),ua.current=null,gd.current=0,Qf(!1),Cv(null);else{if(!navigator.geolocation)return alert("GPS   .");Qf(!0),da.current=navigator.geolocation.watchPosition(o=>{const{latitude:u,longitude:f,accuracy:p,heading:x,speed:v}=o.coords,y={lat:u,lng:f};Cv(y);let w=gd.current;if(ua.current){const S=ua.current.lat,P=ua.current.lng;Math.sqrt(Math.pow(u-S,2)+Math.pow(f-P,2))*111e3>2&&(w=Sk(S,P,u,f),gd.current=w,ua.current=y)}else ua.current=y;x&&!isNaN(x)&&v>.3&&(w=x,gd.current=x),kk(u,f,w,p)},o=>{console.error("GPS :",o);let u="GPS  .";o.code===1?u="GPS  .    .":o.code===2?u="GPS    .":o.code===3&&(u="GPS   ."),alert(u),Qf(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},Ek=()=>{md&&se.current?(se.current.setCenter(new naver.maps.LatLng(md.lat,md.lng)),se.current.setZoom(16)):alert("    . GPS .")};_.useEffect(()=>()=>{da.current&&navigator.geolocation.clearWatch(da.current),Pr.current&&Pr.current.setMap(null),Ar.current&&Ar.current.setMap(null),os.current&&os.current.setMap(null)},[]),_.useEffect(()=>{if(t&&j&&n&&(Ut.length>0||Ve.length>0)){const o=`bc_alert_shown_${ms()}_${n.managerId||"admin"}`;sessionStorage.getItem(o)||setTimeout(()=>{yk(n),sessionStorage.setItem(o,"true")},1e3)}},[t,j,Ut,Ve,n]),_.useEffect(()=>{t&&A==="calendar"&&n&&n.role!=="super"&&_k(n)},[A,t,n,Ut]);const wd=_.useRef([]),zv=()=>{wd.current.forEach(o=>o.setMap(null)),wd.current=[]},dp=async()=>{if(!ca.trim())return alert(" ");if(Er.length>=10)return alert(` 10   .
    .`);Bf(!0);const o=Uv(ca);if(o&&se.current){Bf(!1),se.current.setCenter(new naver.maps.LatLng(o.lat,o.lng)),se.current.setZoom(16),Er.some(f=>f.lat===o.lat&&f.lng===o.lng)||Pl(f=>[...f,{id:Date.now(),name:Wf.trim()||ca,address:"",lat:o.lat,lng:o.lng}]),$f(""),zf(""),setTimeout(()=>{const f=new naver.maps.Marker({position:new naver.maps.LatLng(o.lat,o.lng),map:se.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});wd.current.push(f)},200);return}naver.maps.Service.geocode({query:ca},async(u,f)=>{var w;if(Bf(!1),u!==naver.maps.Service.Status.OK||!((w=f.v2.addresses)!=null&&w.length))return alert("    ");const p=f.v2.addresses[0],x=parseFloat(p.y),v=parseFloat(p.x);Er.some(S=>S.lat===x&&S.lng===v)||Pl(S=>[...S,{id:Date.now(),name:Wf.trim()||ca,address:p.roadAddress||p.jibunAddress||"",lat:x,lng:v}]),$f(""),zf(""),se.current&&(se.current.setCenter(new naver.maps.LatLng(x,v)),se.current.setZoom(16),setTimeout(()=>{const S=new naver.maps.Marker({position:new naver.maps.LatLng(x,v),map:se.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});wd.current.push(S)},200))})},Tk=o=>{Pl(u=>u.filter(f=>f.id!==o))},Rk=()=>{if(Er.length===0)return alert("  ");let o=0;const u=[];Er.forEach(f=>{Ce.some(x=>x.lat===f.lat&&x.lng===f.lng)||(u.push({id:Date.now()+Math.random(),name:f.name,address:f.address,lat:f.lat,lng:f.lng,type:"search"}),o++)}),u.length>0&&qt(f=>[...f,...u]),Pl([]),zv(),alert(`${o}   !`)},[HL,GL]=_.useState(!1);_.useRef(null);const Pk=o=>{qt(u=>u.filter(f=>f.id!==o))},Bv=(o,u)=>{const f=[...Ce],p=o+u;p<0||p>=f.length||([f[o],f[p]]=[f[p],f[o]],qt(f))},Nd=(o,u,f,p)=>{const v=(f-o)*Math.PI/180,y=(p-u)*Math.PI/180,w=Math.sin(v/2)*Math.sin(v/2)+Math.cos(o*Math.PI/180)*Math.cos(f*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},Vv=(o,u,f)=>{const p=[...o],x=[];let v=u,y=f;for(;p.length>0;){let w=0,S=1/0;for(let R=0;R<p.length;R++){const O=Nd(v,y,p[R].lat,p[R].lng);O<S&&(S=O,w=R)}const P=p.splice(w,1)[0];x.push(P),v=P.lat,y=P.lng}return x},Hv=async(o,u,f)=>{var v,y;if(f.length<1)return null;const p="dx2ymyk2b1",x=localStorage.getItem("ncp_client_secret")||"18184ztuYuPVkqzPumsSqRNVsMHCiBFMWhWdRJAJ";try{const w=`${u},${o}`,S=`${f[f.length-1].lng},${f[f.length-1].lat}`;let P="";f.length>1&&(P=f.slice(0,-1).map(Q=>`${Q.lng},${Q.lat}`).join("|"));let R=`https://naveropenapi.apigw.ntruss.com/map-direction-15/v1/driving?start=${w}&goal=${S}&option=trafast`;P&&(R+=`&waypoints=${P}`);const O=await fetch(R,{headers:{"X-NCP-APIGW-API-KEY-ID":p,"X-NCP-APIGW-API-KEY":x}});if(!O.ok)return null;const D=await O.json();if(D.code!==0||!((y=(v=D.route)==null?void 0:v.trafast)!=null&&y[0]))return null;const B=D.route.trafast[0];return{path:B.path,distance:B.summary.distance,duration:B.summary.duration}}catch(w){return console.error("Directions API  :",w),null}},Gv=o=>{if(!se.current||!(o!=null&&o.path))return;os.current&&os.current.setMap(null);const u=o.path.map(([x,v])=>new naver.maps.LatLng(v,x));os.current=new naver.maps.Polyline({map:se.current,path:u,strokeColor:"#4285f4",strokeWeight:5,strokeOpacity:.8,strokeLineCap:"round",strokeLineJoin:"round"});const f=(o.distance/1e3).toFixed(1),p=Math.round(o.duration/6e4);xd({distance:f,duration:p})},Ak=async()=>{const o=Ce.filter(f=>f.lat&&f.lng),u=Ce.filter(f=>!f.lat||!f.lng);if(o.length<2){alert(`   2  .
  .`);return}navigator.geolocation?navigator.geolocation.getCurrentPosition(async f=>{const p=f.coords.latitude,x=f.coords.longitude,v=Vv(o,p,x),y=[...v,...u];qt(y);const w=await Hv(p,x,v);if(w){Gv(w);const S=(w.distance/1e3).toFixed(1),P=Math.round(w.duration/6e4);alert(`  !

 ${v.length} 
 : ${S}km
 : ${P}

   !`)}else{let S=Nd(p,x,v[0].lat,v[0].lng);for(let P=0;P<v.length-1;P++)S+=Nd(v[P].lat,v[P].lng,v[P+1].lat,v[P+1].lng);xd(null),alert(`  !

 ${v.length} 
: ${S.toFixed(1)}km

     API  .`)}},f=>{Kv(o,u)},{enableHighAccuracy:!0,timeout:5e3}):Kv(o,u)},Ok=()=>{if(Ce.length<2){alert(" 2  .");return}qt([...Ce].reverse()),alert("   !")},Kv=async(o,u)=>{const f=o[0],p=Vv(o,f.lat,f.lng),x=[...p,...u];qt(x);const v=await Hv(f.lat,f.lng,p.slice(1));if(v){Gv(v);const y=(v.distance/1e3).toFixed(1),w=Math.round(v.duration/6e4);alert(`  !

 ${p.length} 
 : ${y}km
 : ${w}

(GPS   -   )`)}else{let y=0;for(let w=0;w<p.length-1;w++)y+=Nd(p[w].lat,p[w].lng,p[w+1].lat,p[w+1].lng);xd(null),alert(`  !

 ${p.length} 
: ${y.toFixed(1)}km

(GPS   -   )`)}},Mk=o=>{const u=(o.stops||[]).filter(f=>f.lat&&f.lng);if(u.length===0)return alert("   .");qv(o),setTimeout(()=>{if(se.current)if(Tr.current.forEach(f=>f.setMap(null)),Tr.current=[],Rr.current.forEach(f=>f.setMap(null)),Rr.current=[],u.forEach((f,p)=>{const x=new naver.maps.Marker({position:new naver.maps.LatLng(f.lat,f.lng),map:se.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 3px 8px rgba(0,0,0,0.4); border: 3px solid white;">${p+1}</div>`,anchor:new naver.maps.Point(16,16)}});Tr.current.push(x)}),u.length>=2){const f=u.map(v=>new naver.maps.LatLng(v.lat,v.lng)),p=new naver.maps.Polyline({map:se.current,path:f,strokeColor:"#14b8a6",strokeWeight:5,strokeOpacity:.9,strokeStyle:"solid"});Rr.current.push(p);const x=new naver.maps.LatLngBounds;u.forEach(v=>x.extend(new naver.maps.LatLng(v.lat,v.lng))),se.current.fitBounds(x,{padding:50})}else se.current.setCenter(new naver.maps.LatLng(u[0].lat,u[0].lng)),se.current.setZoom(15)},400)},qv=o=>{od(o.id),kl(o.name||""),ia(o.date||new Date().toISOString().split("T")[0]),Cl(o.time||"09:00"),as(o.managerId||null),qt(o.stops||[]),cd(0),setTimeout(()=>{se.current&&_d()},100),window.scrollTo({top:0,behavior:"smooth"})},Dk=o=>{var f;const u=((f=o.stops)==null?void 0:f.filter(p=>!p.visited))||[];u.length>0?Ff({route:o,unvisitedStops:u}):up(o,!1)},up=(o,u=!1)=>{var x;const f={...o,status:"completed",completedAt:new Date().toISOString()},p=Ve.map(v=>v.id===o.id?f:v);if(xv(p),localStorage.setItem("bc_routes",JSON.stringify(p)),u){const v=((x=o.stops)==null?void 0:x.filter(w=>!w.visited))||[];let y=0;v.forEach(w=>{const S=fe.find(P=>{var R,O;return P.name===w.name||((R=P.name)==null?void 0:R.includes(w.name))||((O=w.name)==null?void 0:O.includes(P.name))});if(S&&S.managerId){const P={...S,managerId:null};Or(P),y++}}),y>0?alert(`  .
  ${y}   .`):alert("  .")}else alert("  .");Ff(null)},Lk=()=>{od(null),kl(""),qt([]),ia(ms()),Cl("09:00"),as((n==null?void 0:n.managerId)||null),bd(),localStorage.removeItem("bc_temp_route")},Yv=()=>{if(Ce.length===0)return alert(" /  ");if(!Sl.trim())return alert("  (:  )");const o=Mf||(n==null?void 0:n.managerId)||0;if(!o&&(n==null?void 0:n.role)!=="super")return alert(" ");if(ii){const f={...Ve.find(p=>p.id===ii),name:Sl.trim(),date:ad,time:ld,managerId:o,stops:Ce.map(p=>({...p,visited:p.visited||!1}))};yd(f),od(null),alert(" !")}else{const u={id:Date.now(),name:Sl.trim(),date:ad,time:ld,managerId:o,stops:Ce.map(f=>({...f,visited:!1})),status:"planned",createdAt:new Date().toISOString()};yd(u),alert(" !")}kl(""),qt([]),ia(ms()),Cl("09:00"),as((n==null?void 0:n.managerId)||null),bd(),localStorage.removeItem("bc_temp_route")},Qv=o=>{if(o<0||o>=Ce.length)return;cd(o);const u=Ce[o];u.lat&&u.lng&&se.current&&(se.current.setCenter(new naver.maps.LatLng(u.lat,u.lng)),se.current.setZoom(16))},Fk=(o,u)=>{cd(u),o.lat&&o.lng&&se.current&&(se.current.setCenter(new naver.maps.LatLng(o.lat,o.lng)),se.current.setZoom(16))},Uk=(o,u)=>{const f=Ve.find(w=>w.id===o);if(!f)return;const p=f.stops.find(w=>w.id===u),x=!(p!=null&&p.visited),v=f.stops.map(w=>w.id===u?{...w,visited:!w.visited}:w),y=v.every(w=>w.visited);if(yd({...f,stops:v,status:y?"completed":"planned"}),x&&(p!=null&&p.name)){const w=fe.find(S=>S.name===p.name);w&&Or({...w,lastVisitDate:new Date().toISOString()})}(cn==null?void 0:cn.id)===o&&kr({...f,stops:v,status:y?"completed":"planned"})},$k=o=>{const u=Ve.find(x=>x.id===o);if(!u)return;const f=u.stops.map(x=>({...x,visited:!0}));yd({...u,stops:f,status:"completed"});const p=(u.stops||[]).filter(x=>x.name&&!fe.find(v=>v.name===x.name));p.forEach(x=>{const v={id:Date.now()+Math.random(),name:x.name,address:x.address||"",managerId:u.managerId,reaction:"positive",fromRoute:u.name,createdAt:new Date().toISOString()};Or(v)}),kr(null),p.length>0?alert(`  !
${p.length}   .`):alert("  !")},Wk=o=>{if(!o.lat||!o.lng)return alert("    ");kr(null),cs("map"),setTimeout(()=>{if(!Ae.current)return;zk(),Ae.current.setCenter(new naver.maps.LatLng(o.lat,o.lng)),Ae.current.setZoom(17);const u=new naver.maps.Marker({position:new naver.maps.LatLng(o.lat,o.lng),map:Ae.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; padding: 8px 12px; border-radius: 20px; font-weight: bold; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white; white-space: nowrap;">${o.name}</div>`,anchor:new naver.maps.Point(50,20)}});qf.current.push(u);const f=new naver.maps.Circle({map:Ae.current,center:new naver.maps.LatLng(o.lat,o.lng),radius:100,fillColor:"#14b8a6",fillOpacity:.2,strokeColor:"#d97706",strokeWeight:2});si.current.push(f)},300)},zk=()=>{Nv.current.forEach(o=>o.setMap(null)),Nv.current=[],qf.current.forEach(o=>o.setMap(null)),qf.current=[]},Bk=o=>{const u=(o.stops||[]).filter(f=>f.lat&&f.lng);if(u.length===0)return alert("   ");cs("route"),setTimeout(()=>{if(se.current)if(Tr.current.forEach(f=>f.setMap(null)),Tr.current=[],Rr.current.forEach(f=>f.setMap(null)),Rr.current=[],u.forEach((f,p)=>{const x=new naver.maps.Marker({position:new naver.maps.LatLng(f.lat,f.lng),map:se.current,icon:{content:`<div style="background: linear-gradient(135deg, #00C73C, #00a832); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 13px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">${p+1}</div>`,anchor:new naver.maps.Point(14,14)}});Tr.current.push(x)}),u.length>=2){const f=u.map(v=>new naver.maps.LatLng(v.lat,v.lng)),p=new naver.maps.Polyline({map:se.current,path:f,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.8,strokeStyle:"solid"});Rr.current.push(p);const x=new naver.maps.LatLngBounds;u.forEach(v=>x.extend(new naver.maps.LatLng(v.lat,v.lng))),se.current.fitBounds(x,{padding:50})}else se.current.setCenter(new naver.maps.LatLng(u[0].lat,u[0].lng)),se.current.setZoom(15)},300)},Dl=(o,u)=>{if(!o)return;const f={isOnline:u,lastSeen:new Date().toISOString()};oe.ref("userStatus/"+o).set(f)},Jv=async()=>{try{const o=i.includes("@")?i:`${i}@beancraft.com`,f=(await hn.auth().signInWithEmailAndPassword(o,l)).user;let p=null;const x=o.split("@")[0];if(x==="admin")p={name:"admin",role:"super",email:f.email};else{const y=(await oe.ref("managers").once("value")).val(),S=(y?Object.values(y):[]).find(P=>P.username===x||P.email===o);if(S){let P=S.name;const R=Hd.find(O=>O.username===x||O.id===S.id);R&&(!S.name||S.name.length<2||S.name.includes(""))&&(P=R.name,console.log(`[]   : ${S.name} -> ${P}`),oe.ref("managers/"+S.id).update({name:P})),p={name:P,role:"manager",managerId:S.id,username:S.username,email:f.email}}else p={name:x,role:"manager",email:f.email}}r(p),e(!0),setTimeout(()=>{r(v=>v&&{...v})},150),p.managerId&&as(p.managerId),localStorage.setItem("bc_session",JSON.stringify({user:p,expiry:Date.now()+6*60*60*1e3})),d?localStorage.setItem("bc_remember_login",JSON.stringify({id:i,pw:l,expiry:Date.now()+30*24*60*60*1e3})):localStorage.removeItem("bc_remember_login"),p.managerId&&Dl(p.managerId,!0)}catch(o){console.error(" :",o),o.code==="auth/user-not-found"?alert("  "):o.code==="auth/wrong-password"?alert("  "):o.code==="auth/invalid-email"?alert("   "):alert(" : "+o.message)}},Xv=async()=>{n!=null&&n.managerId&&Dl(n.managerId,!1);try{await hn.auth().signOut()}catch{}e(!1),r(null),localStorage.removeItem("bc_session"),Ae.current=null,se.current=null,xf([]),Pc(null),ta(null)};_.useEffect(()=>{const o=()=>{n!=null&&n.managerId&&oe.ref("userStatus/"+n.managerId).set({isOnline:!1,lastSeen:new Date().toISOString()})};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[n]),_.useEffect(()=>{if(!(n!=null&&n.managerId))return;const o=setInterval(()=>{Dl(n.managerId,!0)},6e4);return()=>clearInterval(o)},[n]);const Zv=async()=>{if(!nr.trim())return alert("  ");if(nr!==ed)return alert("  ");if(nr.length<6)return alert(" 6  ");try{const o=hn.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(nr),vf(!1),Zc(""),td(""),alert(" ")}catch(o){console.error("  :",o),o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}},ey=async()=>{if(rv){if(!Nl.trim())return alert("  ");if(Nl!==fv)return alert("  ");if(Nl.length<6)return alert(" 6  ");try{const o=hn.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(Nl),yf(!1),hv(""),pv(""),alert("  ")}catch(o){o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}}else{if(!nr.trim())return alert("  ");if(nr!==ed)return alert("  ");if(nr.length<6)return alert(" 6  ");try{const o=hn.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(nr),Zc(""),td(""),alert("  ")}catch(o){o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}}},ty=async()=>{if(!ae.name.trim())return alert(" ");let o=null,u=null;if(ae.address){const y=await cp(ae.address,ae.name);y&&(o=y.lat,u=y.lng)}const f=$n?ae.managerId:n==null?void 0:n.managerId,p={id:Date.now(),...ae,managerId:f,lat:o,lng:u,isReregistered:ae.isReregistered||!1,usedMents:L0,mentMemo:nS,createdAt:new Date().toLocaleString("ko-KR")};Or(p);const x=ae.reaction==="positive"||ae.reaction==="special";L0.forEach(y=>ok(y,x));const v=Yw[Math.floor(Math.random()*Yw.length)];if(_f({companyName:ae.name,quote:v}),ae.reaction==="positive"||ae.reaction==="special"){const y=new Date;y.setDate(y.getDate()+1);const w=y.toISOString().split("T")[0],S={id:Date.now()+1,date:w,title:`${ae.name}`,managerId:f,memo:`, .    .    ?

: ${ae.contact||"-"}
: ${ae.phone||"-"}
: ${ae.address||"-"}`,type:"followup",companyId:p.id};ip(S);const P=new Date;P.setMonth(P.getMonth()+1);const R=P.toISOString().split("T")[0],O={id:Date.now()+2,date:R,title:`${ae.name}`,managerId:f,memo:`, . .      ?

: ${ae.contact||"-"}
: ${ae.phone||"-"}
: ${ae.address||"-"}`,type:"followup",companyId:p.id};ip(O)}at({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),ZS(""),tS([]),rS("")},Vk=async()=>{if(!Ct)return;let o={...Ct};if(o.address&&(!o.lat||!o.lng)){const u=await cp(o.address,o.name);u&&(o.lat=u.lat,o.lng=u.lng)}Or(o),ft(null)},ny=o=>{la({type:"company",id:o.id,name:o.name})},Hk=()=>{if(!Tf.trim())return alert(" ");const o=Tf.split(`
`).map(f=>f.trim()).filter(f=>f),u=[];o.forEach(f=>{const p=f.split("/").map(O=>O.trim());if(p.length<1||!p[0])return;const[x,v,y,w,S]=p;let P=dv;S&&(S===""?P="negative":S===""?P="neutral":S===""?P="positive":S===""&&(P="special"));const R=w||IS||"";u.push({name:x,contact:v||"",phone:y||"",managerId:ov,region:R,address:R,reaction:P})}),u.forEach((f,p)=>{const x={id:Date.now()+p,...f,createdAt:new Date().toLocaleString("ko-KR")};Or(x)}),lv(""),cv(null),ES(""),TS(""),uv("neutral"),zc(!1),alert(`${u.length}  .`)},Gk=()=>{if(!Yt.name.trim())return alert(" ");const o={id:Date.now(),...Yt,createdAt:new Date().toLocaleString("ko-KR")};Ev(o),di({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""})},Kk=()=>{pt&&(Ev(pt),jn(null))},qk=()=>{if(!Un.managerId||!Un.amount)return alert("  ");const o={id:Date.now(),...Un,amount:Number(Un.amount),date:Un.date||ms()};Tv(o),vd({managerId:null,companyId:null,amount:"",date:"",note:""}),Kc(!1)},Yk=o=>id.filter(u=>u.managerId===o).reduce((u,f)=>u+f.amount,0),Qk=()=>{const o=Object.entries(Rf).filter(([f,p])=>p).map(([f])=>f);if(o.length===0)return alert("  ");const u={id:Date.now(),managerId:n.managerId,managerName:n.name,items:o,timestamp:new Date().toLocaleString("ko-KR"),status:"pending"};Rv(u),Pf({:!1,:!1,:!1,:!1}),Vc(null),alert(" .")},Jk=o=>{const u=gv.find(f=>f.id===o);u&&Rv({...u,status:"confirmed"})},Xk=(o,u,f)=>{const p=String(f).replace(/^0+/,"")||"0",x=ye.find(v=>v.id===o);x&&rp({...x,promo:{...x.promo,[u]:Number(p)||0}})},us=tp.trim()?fe.filter(o=>_D(o.name,tp)):fe,$n=(n==null?void 0:n.role)==="super",Ll=gv.filter(o=>o.status==="pending"),Zk=()=>ye,eI=o=>{if(!o)return"";const u=new Date(o);if(isNaN(u.getTime()))return" ";const p=new Date-u,x=Math.floor(p/6e4),v=Math.floor(p/36e5),y=Math.floor(p/864e5);return x<1?" ":x<60?`${x} `:v<24?`${v} `:y<7?`${y} `:u.toLocaleDateString("ko-KR")};if(!t){const o={transition:"opacity 1.5s ease-in-out, transform 1.5s ease-in-out",willChange:"opacity, transform"};return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-neutral-50 overflow-hidden",children:s.jsxs("div",{className:"w-full max-w-md relative",style:{minHeight:"500px"},children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...o,opacity:I==="quote"?1:0,transform:I==="quote"?"translateY(0)":"translateY(-30px)",pointerEvents:I==="quote"?"auto":"none"},children:s.jsxs("p",{className:"text-neutral-700 text-sm sm:text-base font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto text-center",style:{wordBreak:"keep-all"},children:['"',b,'"']})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...o,opacity:I==="logo"?1:0,transform:I==="logo"?"scale(1)":I==="quote"?"scale(0.9)":"scale(1.05)",pointerEvents:I==="logo"?"auto":"none"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-40 h-40 sm:w-56 sm:h-56 mx-auto mb-4 object-contain"}),s.jsx("p",{className:"text-neutral-800 text-base sm:text-lg tracking-widest font-semibold",children:" "})]})}),s.jsxs("div",{className:"absolute inset-0",style:{...o,opacity:I==="form"?1:0,transform:I==="form"?"translateY(0)":"translateY(50px)",pointerEvents:I==="form"?"auto":"none"},children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-28 h-28 sm:w-40 sm:h-40 mx-auto mb-3 object-contain"}),s.jsx("p",{className:"text-neutral-800 text-sm sm:text-base tracking-widest font-semibold",children:" "})]}),s.jsx("div",{className:"text-center mb-5 px-4",children:s.jsxs("p",{className:"text-neutral-700 text-xs sm:text-sm font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto",style:{wordBreak:"keep-all"},children:['"',b,'"']})}),s.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 shadow-lg border border-neutral-200",children:[s.jsx("input",{type:"text",placeholder:"",value:i,onChange:u=>a(u.target.value),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-neutral-50 text-[#171717] placeholder-neutral-400 outline-none focus:ring-2 focus:ring-neutral-300 border border-neutral-200 text-sm font-medium"}),s.jsx("input",{type:"password",placeholder:"",value:l,onChange:u=>c(u.target.value),onKeyPress:u=>u.key==="Enter"&&Jv(),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-neutral-50 text-[#171717] placeholder-neutral-400 outline-none focus:ring-2 focus:ring-neutral-300 border border-neutral-200 text-sm font-medium"}),s.jsxs("label",{className:"flex items-center gap-2 text-neutral-700 text-sm mb-4 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:u=>h(u.target.checked),className:"w-4 h-4 rounded accent-neutral-700"}),"  "]}),s.jsx("button",{type:"button",onClick:Jv,className:"w-full p-3 bg-neutral-900 hover:bg-neutral-800 text-white rounded-lg font-semibold transition-all text-sm",children:""})]})]})]})})}const ry=[{key:"report",icon:"",label:""},{key:"calendar",icon:"",label:""},{key:"route",icon:"",label:""},{key:"map",icon:"",label:""},{key:"managers",icon:"",label:""},{key:"companies",icon:"",label:""},{key:"realtors",icon:"",label:""},{key:"customers",icon:"",label:""},...$n?[]:[{key:"requests",icon:"",label:""}],{key:"settings",icon:"",label:""}];return xl?s.jsxs("div",{className:"min-h-screen bg-white text-black select-none",onClick:on,onTouchStart:on,style:{WebkitUserSelect:"none",userSelect:"none"},children:[ss==="select"&&s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-32 h-32 object-contain mb-8",onError:o=>{o.target.style.display="none"}}),s.jsx("h2",{className:"text-2xl font-bold text-black mb-2",children:""}),s.jsx("p",{className:"text-gray-500 mb-8",children:" "}),s.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[s.jsxs("button",{onClick:()=>{Oc("broker"),jr("main")},className:"w-full py-6 rounded-2xl border-2 border-gray-200 hover:border-black hover:bg-gray-50 transition-all",children:[s.jsx("span",{className:"text-xl font-bold text-black",children:""}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"  "})]}),s.jsxs("button",{onClick:()=>{Oc("client"),jr("main")},className:"w-full py-6 rounded-2xl border-2 border-gray-200 hover:border-black hover:bg-gray-50 transition-all",children:[s.jsx("span",{className:"text-xl font-bold text-black",children:""}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"  "})]})]}),s.jsx("button",{onClick:pf,className:"mt-8 text-gray-400 hover:text-gray-600 text-sm",children:" "})]}),ss==="locked"&&s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-neutral-900",onClick:()=>jr("pin"),children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-40 h-40 object-contain mb-8 opacity-80",onError:o=>{o.target.style.display="none"}}),s.jsx("p",{className:"text-white/60 text-sm mb-4",children:"   "}),s.jsx("div",{className:"w-48 h-1 bg-white/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-white/60 w-1/3 animate-pulse"})})]}),ss==="pin"&&s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-white",children:[s.jsx("h2",{className:"text-xl font-bold text-black mb-2",children:"PIN "}),s.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"4  "}),s.jsx("div",{className:"flex gap-3 mb-8",children:[0,1,2,3].map(o=>s.jsx("div",{className:`w-4 h-4 rounded-full ${G0.length>o?"bg-black":"bg-gray-200"} transition-all`},o))}),s.jsx("div",{className:"grid grid-cols-3 gap-4 w-64",children:[1,2,3,4,5,6,7,8,9,"",0,"del"].map((o,u)=>s.jsx("button",{onClick:()=>{o==="del"?cS():o!==""&&oS(String(o))},disabled:o==="",className:`w-16 h-16 rounded-full text-2xl font-bold transition-all ${o===""?"invisible":o==="del"?"text-gray-500 hover:bg-gray-100":"bg-gray-100 hover:bg-gray-200 text-black"}`,children:o==="del"?"":o},u))}),s.jsx("button",{onClick:()=>jr("locked"),className:"mt-8 text-gray-400 hover:text-gray-600 text-sm",children:""})]}),ss==="main"&&s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b border-gray-100 px-4 py-3 flex justify-between items-center sticky top-0 z-50",children:[s.jsx("button",{onClick:pf,className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-black border border-gray-200 rounded-lg hover:bg-gray-50 transition-all",children:""}),s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"h-8 object-contain",onError:o=>{o.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 30"><text y="22" font-size="18" font-weight="bold">BEANCRAFT</text></svg>'}}),s.jsx("div",{className:"w-16 flex justify-end",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H0==="broker"?"bg-blue-100 text-blue-700":"bg-emerald-100 text-emerald-700"}`,children:H0==="broker"?"":""})})]}),s.jsxs("div",{className:"bg-white border-b border-gray-100 flex",children:[s.jsx("button",{onClick:()=>{df("analysis"),on()},className:`flex-1 py-3 text-center font-medium transition-all ${Mc==="analysis"?"text-black border-b-2 border-black":"text-gray-400"}`,children:""}),s.jsx("button",{onClick:()=>{df("homepage"),on()},className:`flex-1 py-3 text-center font-medium transition-all ${Mc==="homepage"?"text-black border-b-2 border-black":"text-gray-400"}`,children:""})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[Mc==="analysis"&&s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:uf,onChange:o=>Y0(o.target.value),onKeyDown:o=>o.key==="Enter"&&ev(uf),placeholder:"  (: , )",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-black focus:outline-none text-black placeholder-gray-400"}),s.jsx("button",{onClick:()=>ev(uf),disabled:hf,className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-2 bg-neutral-900 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:hf?"...":""})]}),(re==null?void 0:re.success)&&s.jsxs("div",{className:"space-y-4",children:[((sy=re.data)==null?void 0:sy.reliability)&&s.jsxs("div",{className:`p-3 rounded-xl border ${re.data.reliability===""?"border-green-300 bg-green-50":re.data.reliability===""?"border-yellow-300 bg-yellow-50":"border-red-300 bg-red-50"}`,children:[s.jsxs("p",{className:"text-xs font-medium text-black",children:[" : ",re.data.reliability]}),re.data.dataDate&&s.jsxs("p",{className:"text-xs text-gray-500",children:[": ",re.data.dataDate]})]}),ti&&s.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"1"}),""]}),s.jsxs("div",{className:"h-48 bg-gray-100 rounded-lg overflow-hidden relative",children:[s.jsx("img",{src:`https://naveropenapi.apigw.ntruss.com/map-static/v2/raster?w=400&h=200&center=${ti.lng},${ti.lat}&level=15&markers=type:d|size:mid|pos:${ti.lng}%20${ti.lat}&X-NCP-APIGW-API-KEY-ID=dx2ymyk2b1`,alt:"",className:"w-full h-full object-cover",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}),s.jsx("div",{className:"absolute inset-0 hidden items-center justify-center bg-gray-100 text-gray-400 text-sm",children:"   "})]}),ti.roadAddress&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:ti.roadAddress})]}),s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"2"})," "]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),s.jsx("p",{className:"font-bold text-black",children:((ay=(iy=re.data)==null?void 0:iy.overview)==null?void 0:ay.cafeCount)||"-"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("p",{className:"font-bold text-black",children:((oy=(ly=re.data)==null?void 0:ly.overview)==null?void 0:oy.floatingPop)||"-"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),s.jsx("p",{className:"font-bold text-green-600",children:((dy=(cy=re.data)==null?void 0:cy.overview)==null?void 0:dy.newOpen)||"-"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("p",{className:"font-bold text-red-600",children:((hy=(uy=re.data)==null?void 0:uy.overview)==null?void 0:hy.closed)||"-"})]})]}),((py=(fy=re.data)==null?void 0:fy.overview)==null?void 0:py.source)&&s.jsxs("p",{className:"text-xs text-gray-400 mt-3",children:[": ",re.data.overview.source]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"3"})," "]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1 p-3 rounded-lg bg-blue-50 border border-blue-100",children:[s.jsx("p",{className:"text-xs text-blue-600 mb-1",children:" "}),s.jsx("p",{className:"font-bold text-black",children:((gy=(my=re.data)==null?void 0:my.consumers)==null?void 0:gy.mainTarget)||"-"}),s.jsx("p",{className:"text-sm text-blue-600",children:((vy=(xy=re.data)==null?void 0:xy.consumers)==null?void 0:vy.mainRatio)||"-"})]}),s.jsxs("div",{className:"flex-1 p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"2"}),s.jsx("p",{className:"font-bold text-black",children:((by=(yy=re.data)==null?void 0:yy.consumers)==null?void 0:by.secondTarget)||"-"}),s.jsx("p",{className:"text-sm text-gray-500",children:((wy=(_y=re.data)==null?void 0:_y.consumers)==null?void 0:wy.secondRatio)||"-"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-black",children:((jy=(Ny=re.data)==null?void 0:Ny.consumers)==null?void 0:jy.peakTime)||"-"})]}),s.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-black",children:((Sy=(Cy=re.data)==null?void 0:Cy.consumers)==null?void 0:Sy.takeoutRatio)||"-"})]}),s.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"text-sm font-bold text-black",children:((Iy=(ky=re.data)==null?void 0:ky.consumers)==null?void 0:Iy.avgStay)||"-"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"4"}),"  "]}),s.jsx("div",{className:"space-y-2",children:(((Ey=re.data)==null?void 0:Ey.franchise)||[]).map((o,u)=>{var f;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-black",children:o.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[o.count," "]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-black",children:[(f=o.price)==null?void 0:f.toLocaleString(),""]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[" ",o.monthly]})]})]},u)})})]}),s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"5"}),"/"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),s.jsx("p",{className:"font-bold text-black",children:((Ry=(Ty=re.data)==null?void 0:Ty.rent)==null?void 0:Ry.monthly)||"-"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("p",{className:"font-bold text-black",children:((Ay=(Py=re.data)==null?void 0:Py.rent)==null?void 0:Ay.deposit)||"-"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),s.jsx("p",{className:"font-bold text-black",children:((My=(Oy=re.data)==null?void 0:Oy.rent)==null?void 0:My.premium)||"-"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),s.jsx("p",{className:`font-bold ${(((Ly=(Dy=re.data)==null?void 0:Dy.rent)==null?void 0:Ly.yoyChange)||"").includes("+")?"text-red-600":"text-blue-600"}`,children:((Uy=(Fy=re.data)==null?void 0:Fy.rent)==null?void 0:Uy.yoyChange)||"-"})]})]})]}),((Wy=($y=re.data)==null?void 0:$y.opportunities)==null?void 0:Wy.length)>0&&s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"6"})," "]}),s.jsx("div",{className:"space-y-3",children:re.data.opportunities.map((o,u)=>s.jsxs("div",{className:"p-3 rounded-lg bg-green-50 border border-green-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${o.impact===""?"bg-green-500 text-white":"bg-green-200 text-green-700"}`,children:o.impact}),s.jsx("p",{className:"font-medium text-black",children:o.title})]}),s.jsx("p",{className:"text-sm text-gray-600",children:o.detail})]},u))})]}),((By=(zy=re.data)==null?void 0:zy.risks)==null?void 0:By.length)>0&&s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"7"})," "]}),s.jsx("div",{className:"space-y-3",children:re.data.risks.map((o,u)=>s.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${o.level===""?"bg-red-500 text-white":"bg-red-200 text-red-700"}`,children:o.level}),s.jsx("p",{className:"font-medium text-black",children:o.title})]}),s.jsx("p",{className:"text-sm text-gray-600",children:o.detail})]},u))})]}),s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"8"}),"  "]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"font-medium text-black",children:((Hy=(Vy=re.data)==null?void 0:Vy.startupCost)==null?void 0:Hy.deposit)||"-"})]}),s.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"font-medium text-black",children:((Ky=(Gy=re.data)==null?void 0:Gy.startupCost)==null?void 0:Ky.premium)||"-"})]}),s.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"font-medium text-black",children:((Yy=(qy=re.data)==null?void 0:qy.startupCost)==null?void 0:Yy.interior)||"-"})]}),s.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-gray-600",children:"/"}),s.jsx("span",{className:"font-medium text-black",children:((Jy=(Qy=re.data)==null?void 0:Qy.startupCost)==null?void 0:Jy.equipment)||"-"})]}),s.jsxs("div",{className:"flex justify-between py-3 bg-neutral-100 text-[#171717] rounded-lg border border-neutral-200 px-3 mt-3",children:[s.jsx("span",{className:"font-bold",children:"  "}),s.jsx("span",{className:"font-bold",children:((Zy=(Xy=re.data)==null?void 0:Xy.startupCost)==null?void 0:Zy.total)||"-"})]})]})]}),((eb=re.data)==null?void 0:eb.consultingEffect)&&s.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"9"}),"  "]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-4 rounded-xl bg-green-50 border border-green-200",children:[s.jsx("p",{className:"text-xs font-bold text-green-700 mb-3 text-center",children:"  O"}),s.jsxs("div",{className:"space-y-2 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"3 "}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:((tb=re.data.consultingEffect.withConsulting)==null?void 0:tb.survivalRate)||"78%"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:" "}),s.jsx("p",{className:"font-bold text-black",children:((nb=re.data.consultingEffect.withConsulting)==null?void 0:nb.avgMonthlyRevenue)||"3,200"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"font-medium text-gray-700",children:((rb=re.data.consultingEffect.withConsulting)==null?void 0:rb.breakEvenMonths)||"14"})]})]})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-red-50 border border-red-200",children:[s.jsx("p",{className:"text-xs font-bold text-red-700 mb-3 text-center",children:"  X"}),s.jsxs("div",{className:"space-y-2 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"3 "}),s.jsx("p",{className:"text-xl font-bold text-red-600",children:((sb=re.data.consultingEffect.withoutConsulting)==null?void 0:sb.survivalRate)||"42%"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:" "}),s.jsx("p",{className:"font-bold text-black",children:((ib=re.data.consultingEffect.withoutConsulting)==null?void 0:ib.avgMonthlyRevenue)||"1,800"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:""}),s.jsx("p",{className:"font-medium text-gray-700",children:((ab=re.data.consultingEffect.withoutConsulting)==null?void 0:ab.breakEvenMonths)||"26"})]})]})]})]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-3 text-center",children:[": ",re.data.consultingEffect.source||" "]})]}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 p-5 rounded-xl border border-blue-100",children:[s.jsxs("h3",{className:"font-bold text-black mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded border border-black text-black flex items-center justify-center text-xs font-bold",children:"10"}),"AI "]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:((lb=re.data)==null?void 0:lb.insight)||"-"}),s.jsxs("div",{className:"mt-4 p-3 bg-white/80 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-black mb-2",children:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsx("div",{className:"flex items-center gap-1 text-green-600",children:"  0"}),s.jsx("div",{className:"flex items-center gap-1 text-green-600",children:"  0"}),s.jsx("div",{className:"flex items-center gap-1 text-green-600",children:"  "}),s.jsx("div",{className:"flex items-center gap-1 text-green-600",children:"  "})]})]})]}),s.jsxs("button",{onClick:()=>J0(!ff),className:"w-full py-3 text-center text-gray-500 text-sm border border-gray-200 rounded-xl hover:bg-gray-50",children:[" ",ff?"":""]}),ff&&s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl text-xs text-gray-500 space-y-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${re!=null&&re.hasApiData?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.jsx("p",{className:"font-medium",children:re!=null&&re.hasApiData?" 365 API   ":"API    - AI  "})}),s.jsx("p",{children:"  ()"}),s.jsx("p",{children:" 365  "}),s.jsx("p",{children:"  SGIS / "}),s.jsx("p",{children:"  R-ONE  "}),s.jsx("p",{children:"   "}),s.jsx("p",{children:" Google Gemini AI () "})]})]}),!re&&!hf&&s.jsxs("div",{className:"text-center py-20",children:[s.jsx("p",{className:"text-gray-400 mb-2",children:" "}),s.jsx("p",{className:"text-gray-400",children:"AI      "})]}),(re==null?void 0:re.success)===!1&&s.jsxs("div",{className:"text-center py-10",children:[s.jsx("p",{className:"text-red-500 mb-2",children:"   "}),s.jsx("p",{className:"text-gray-400 text-sm",children:re.error})]})]}),Mc==="homepage"&&s.jsxs("div",{className:"h-[calc(100vh-120px)] flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 p-3",children:s.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[s.jsx("a",{href:"https://beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 px-4 py-2 bg-neutral-900 text-white rounded-full text-sm font-medium",onClick:()=>on(),children:""}),s.jsx("a",{href:"https://beancraft.co.kr/consulting",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200",onClick:()=>on(),children:""}),s.jsx("a",{href:"https://beancraft.co.kr/interior",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200",onClick:()=>on(),children:""}),s.jsx("a",{href:"https://beancraft.co.kr/equipment",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200",onClick:()=>on(),children:""}),s.jsx("a",{href:"https://beancraft.co.kr/menu",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200",onClick:()=>on(),children:""}),s.jsx("a",{href:"https://beancraft.co.kr/support",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200",onClick:()=>on(),children:""})]})}),s.jsx("div",{className:"flex-1 relative",children:aS?s.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 bg-gray-50",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-24 h-24 mx-auto mb-4 object-contain",onError:o=>{o.target.style.display="none"}}),s.jsx("h2",{className:"text-xl font-bold text-black mb-2",children:""}),s.jsx("p",{className:"text-gray-500 text-sm",children:"   "})]}),s.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[s.jsx("a",{href:"https://beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-4 bg-neutral-900 text-white rounded-xl font-medium text-center hover:bg-gray-800 transition-all",children:" "}),s.jsx("a",{href:"https://beancraft.co.kr/consulting",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-4 bg-white text-black border border-gray-200 rounded-xl font-medium text-center hover:bg-gray-50 transition-all",children:"  "}),s.jsx("a",{href:"tel:1588-0000",className:"block w-full py-4 bg-emerald-500 text-white rounded-xl font-medium text-center hover:bg-emerald-600 transition-all",children:"  1588-0000"})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4 w-full max-w-sm",children:[s.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-100 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-black",children:"0"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),s.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-100 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-black",children:"0"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),s.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-100 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-black",children:""}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" "})]}),s.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-100 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-black",children:""}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]})]})]}):s.jsx("iframe",{src:"https://beancraft.co.kr",className:"w-full h-full border-0",title:" ",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",onLoad:o=>{try{const u=o.target.contentDocument;(!u||u.body.innerHTML==="")&&Lc(!0)}catch{Lc(!0)}},onError:()=>Lc(!0)})})]})]}),s.jsx("div",{className:"bg-white border-t border-gray-100 p-4 sticky bottom-0",children:s.jsx("button",{onClick:()=>jr("locked"),className:"w-full py-3 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200 transition-all",children:" "})})]})]}):s.jsxs("div",{className:"flex h-screen bg-neutral-50",children:[s.jsxs("aside",{className:"hidden md:flex w-56 flex-col bg-neutral-900",children:[s.jsxs("div",{className:"p-5 border-b border-neutral-800",children:[s.jsx("h1",{className:"text-lg font-bold text-white",children:"BEANCRAFT"}),s.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:""})]}),s.jsx("nav",{className:"flex-1 p-3 space-y-0.5 overflow-y-auto",children:ry.map(o=>s.jsx("button",{onClick:()=>cs(o.key),className:`w-full flex items-center justify-between px-3 py-2.5 text-left text-sm font-medium rounded-lg transition-all ${A===o.key?"bg-white/12 text-white":"text-neutral-400 hover:bg-white/8 hover:text-neutral-200"}`,children:s.jsx("span",{children:o.label})},o.key))}),s.jsx("div",{className:"p-4 border-t border-neutral-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-white",children:((ob=ye.find(o=>o.id===(n==null?void 0:n.managerId)))==null?void 0:ob.name)||(n==null?void 0:n.name)}),s.jsx("p",{className:"text-xs text-neutral-500",children:(n==null?void 0:n.role)==="super"?"":""})]}),s.jsx("button",{type:"button",onClick:Xv,className:"text-neutral-500 hover:text-rose-400 text-xs font-medium transition-colors",children:""})]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[s.jsxs("div",{className:"md:hidden bg-white border-b border-neutral-200 px-4 py-3 flex justify-between items-center sticky top-0 z-50 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-8 h-8 object-contain"}),s.jsx("span",{className:"font-semibold text-[#171717] text-sm",children:"BEANCRAFT"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[$n&&Ll.length>0&&s.jsx("span",{className:"bg-rose-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:Ll.length}),s.jsx("span",{className:"text-sm text-neutral-700 bg-neutral-100 px-2 py-1 rounded-lg font-medium",children:((cb=ye.find(o=>o.id===(n==null?void 0:n.managerId)))==null?void 0:cb.name)||(n==null?void 0:n.name)}),s.jsx("button",{type:"button",onClick:Xv,className:"text-neutral-500 hover:text-rose-500 text-sm font-medium transition-colors",children:""})]})]}),s.jsx("div",{className:"md:hidden bg-neutral-100 border-b border-neutral-200 tabs-container scrollbar-hide",children:s.jsx("div",{className:"flex justify-start min-w-max px-2 gap-2 py-2",children:ry.map(o=>s.jsx("button",{onClick:()=>cs(o.key),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all whitespace-nowrap ${A===o.key?"bg-white text-[#171717] shadow-sm border border-neutral-200":"text-neutral-500 hover:text-[#171717] hover:bg-white/50"}`,children:o.label},o.key))})}),s.jsxs("main",{className:"flex-1 overflow-auto pb-6",children:[nf&&s.jsxs("div",{className:"bg-white border-b border-neutral-200 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-neutral-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-neutral-600 text-lg"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[#171717] font-bold text-sm",children:["   ",nf.count,""]}),s.jsx("p",{className:"text-neutral-500 text-xs",children:nf.preview})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{cs("calendar"),Pc(null)},className:"px-3 py-1.5 bg-neutral-900 hover:bg-neutral-800 text-white text-xs font-bold rounded-lg transition-all",children:" "}),s.jsx("button",{onClick:()=>Pc(null),className:"w-6 h-6 flex items-center justify-center text-neutral-400 hover:text-neutral-600 transition-colors",children:""})]})]}),F0&&s.jsxs("div",{className:"bg-white border-b border-neutral-200 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-neutral-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-neutral-600 text-lg"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[#171717] font-bold text-sm",children:["  ",F0.count,""]}),s.jsx("p",{className:"text-neutral-500 text-xs",children:"     "})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{cs("calendar"),ta(null)},className:"px-3 py-1.5 bg-neutral-900 hover:bg-neutral-800 text-white text-xs font-bold rounded-lg transition-all",children:""}),s.jsx("button",{onClick:()=>ta(null),className:"w-6 h-6 flex items-center justify-center text-neutral-400 hover:text-neutral-600 transition-colors",children:""})]})]}),dd&&s.jsxs("div",{className:"bg-white border-b border-neutral-200 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-neutral-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-neutral-600 text-lg"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[#171717] font-bold text-sm",children:["   ",dd.count,""]}),s.jsx("p",{className:"text-neutral-500 text-xs",children:"     "})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{dd.companies[0],alert(`[  ]

${dd.companies.map((o,u)=>`${u+1}. ${o.name}
   : ${o.address||""}
   : ${o.issue}`).join(`

`)}

     .`)},className:"px-3 py-1.5 bg-neutral-900 hover:bg-neutral-800 text-white text-xs font-bold rounded-lg transition-all",children:""}),s.jsx("button",{onClick:()=>Uf(null),className:"w-6 h-6 flex items-center justify-center text-neutral-400 hover:text-neutral-600 transition-colors",children:""})]})]}),s.jsxs("div",{className:"p-3 sm:p-4 max-w-6xl mx-auto",children:[A==="report"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[s.jsx("h2",{className:"font-bold text-[#171717] text-xl",children:" "}),s.jsx("div",{className:"flex gap-2",children:$n?s.jsxs("select",{className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm py-2",value:V||"all",onChange:o=>X(o.target.value==="all"?null:o.target.value),children:[s.jsx("option",{value:"all",children:" "}),ye.filter(o=>o.role!=="super").map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>X(n==null?void 0:n.id),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${!V||V===(n==null?void 0:n.id)?"bg-neutral-800 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:" "}),s.jsx("button",{onClick:()=>X("all"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${V==="all"?"bg-neutral-800 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:" "})]})})]}),s.jsxs("div",{className:"flex gap-2 p-1 bg-white rounded-xl w-fit",children:[s.jsx("button",{onClick:()=>Re("basic"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${te==="basic"?"bg-neutral-800 text-white":"text-neutral-500 hover:text-neutral-800"}`,children:" "}),s.jsx("button",{onClick:()=>{var o;if(Re("ai"),!Uc){vl(null);const u=new Date,f=u.getMonth(),p=u.getFullYear(),x=V==="all"||!V?null:Number(V),v=x?fe.filter(S=>S.managerId===x):fe,w=Ve.filter(S=>{const P=new Date(S.date);return P.getMonth()===f&&P.getFullYear()===p&&(!x||S.managerId===x)}).reduce((S,P)=>{var R;return S+(((R=P.stops)==null?void 0:R.length)||0)},0);mf({managerName:x?((o=ye.find(S=>S.id===x))==null?void 0:o.name)||"":" ",thisVisits:w,visitChange:0,newCompanies:fe.filter(S=>S.createdAt&&new Date(S.createdAt).getMonth()===f&&(!x||S.managerId===x)).length,consults:sd.filter(S=>S.status==="completed"&&S.createdAt&&new Date(S.createdAt).getMonth()===f).length,positiveRate:Math.round(v.filter(S=>S.reaction==="positive").length/Math.max(v.length,1)*100),positive:v.filter(S=>S.reaction==="positive").length,special:v.filter(S=>S.reaction==="special").length,neutral:v.filter(S=>S.reaction==="neutral").length,missed:v.filter(S=>S.reaction==="missed").length})}},className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${te==="ai"?"bg-neutral-800 text-white":"text-neutral-500 hover:text-neutral-800"}`,children:"AI "})]})]}),te==="basic"&&(()=>{const o=new Date,u=o.getMonth(),f=o.getFullYear(),p=u===0?11:u-1,x=u===0?f-1:f,v=V==="all"||!V?null:Number(V),y=Ve.filter(K=>{const ue=new Date(K.date),Ie=ue.getMonth()===u&&ue.getFullYear()===f,je=!v||K.managerId===v;return Ie&&je}),w=fe.filter(K=>{if(!K.createdAt||K.isReregistered)return!1;const ue=new Date(K.createdAt),Ie=ue.getMonth()===u&&ue.getFullYear()===f,je=!v||K.managerId===v;return Ie&&je}),S=Ve.filter(K=>{const ue=new Date(K.date),Ie=ue.getMonth()===p&&ue.getFullYear()===x,je=!v||K.managerId===v;return Ie&&je}),P=fe.filter(K=>{if(!K.createdAt||K.isReregistered)return!1;const ue=new Date(K.createdAt),Ie=ue.getMonth()===p&&ue.getFullYear()===x,je=!v||K.managerId===v;return Ie&&je}),R=y.reduce((K,ue)=>{var Ie;return K+(((Ie=ue.stops)==null?void 0:Ie.length)||0)},0),O=S.reduce((K,ue)=>{var Ie;return K+(((Ie=ue.stops)==null?void 0:Ie.length)||0)},0),D=w.length,B=P.length,Q=v?fe.filter(K=>K.managerId===v):fe,k=Q.filter(K=>K.reaction==="positive"||K.reaction==="special").length,de=Q.length>0?Math.round(k/Q.length*100):0,F=Math.max(0,de-Math.floor(Math.random()*10)+5),H=y.reduce((K,ue)=>{var Ie,je;return K+(((je=(Ie=ue.stops)==null?void 0:Ie.filter(rt=>rt.visited))==null?void 0:je.length)||0)},0),G=S.reduce((K,ue)=>{var Ie,je;return K+(((je=(Ie=ue.stops)==null?void 0:Ie.filter(rt=>rt.visited))==null?void 0:je.length)||0)},0),z=(K,ue)=>ue===0?K>0?100:0:Math.round((K-ue)/ue*100),E=z(R,O),M=z(D,B),le=z(H,G),ee=de-F,Pe=(()=>{var rt;const K=v?((rt=ye.find(sr=>sr.id===v))==null?void 0:rt.name)||"":" ";let ue="",Ie="",je="";return ue=`${K} :    ${R},   ${E>=0?"+":""}${E}%`,je=`  ${D} |   ${H} |   ${de}%`,E>=0?Ie="     .":Ie="   .",{comment:ue,suggestion:Ie,analysis:je}})(),$t=K=>{const ue=new Date(f,u-K,1),Ie=ue.getMonth(),je=ue.getFullYear();return Ve.filter(rt=>{const sr=new Date(rt.date),mt=sr.getMonth()===Ie&&sr.getFullYear()===je,Se=!v||rt.managerId===v;return mt&&Se}).reduce((rt,sr)=>{var mt;return rt+(((mt=sr.stops)==null?void 0:mt.length)||0)},0)},hs=["1","2","3","4","5","6","7","8","9","10","11","12"],Mr=[{month:hs[(u-2+12)%12],visits:$t(2)},{month:hs[(u-1+12)%12],visits:$t(1)},{month:hs[u],visits:$t(0)}],Fl=Math.max(...Mr.map(K=>K.visits),1),fi=ye.filter(K=>K.role!=="super").map(K=>{const Ie=y.filter(mt=>mt.managerId===K.id).reduce((mt,Se)=>{var pi;return mt+(((pi=Se.stops)==null?void 0:pi.length)||0)},0),je=fe.filter(mt=>mt.managerId===K.id),rt=je.filter(mt=>mt.reaction==="positive"||mt.reaction==="special").length,sr=je.length>0?Math.round(rt/je.length*100):0;return{...K,visits:Ie,positiveRate:sr,newCompanies:w.filter(mt=>mt.managerId===K.id).length}}).sort((K,ue)=>ue.visits-K.visits);return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("div",{className:"text-neutral-500 text-xs mb-1",children:""}),s.jsxs("div",{className:"text-2xl font-bold text-[#171717]",children:[R,s.jsx("span",{className:"text-sm text-neutral-500 ml-1",children:""})]}),s.jsxs("div",{className:`text-xs mt-1 ${E>=0?"text-emerald-400":"text-rose-400"}`,children:[E>=0?"":""," ",Math.abs(E),"%"]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("div",{className:"text-neutral-500 text-xs mb-1",children:" "}),s.jsxs("div",{className:"text-2xl font-bold text-[#171717]",children:[D,s.jsx("span",{className:"text-sm text-neutral-500 ml-1",children:""})]}),s.jsxs("div",{className:`text-xs mt-1 ${M>=0?"text-emerald-400":"text-rose-400"}`,children:[M>=0?"":""," ",Math.abs(M),"%"]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("div",{className:"text-neutral-500 text-xs mb-1",children:" "}),s.jsxs("div",{className:"text-2xl font-bold text-[#171717]",children:[H,s.jsx("span",{className:"text-sm text-neutral-500 ml-1",children:""})]}),s.jsxs("div",{className:`text-xs mt-1 ${le>=0?"text-emerald-400":"text-rose-400"}`,children:[le>=0?"":""," ",Math.abs(le),"%"]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("div",{className:"text-neutral-500 text-xs mb-1",children:" "}),s.jsxs("div",{className:"text-2xl font-bold text-[#171717]",children:[de,s.jsx("span",{className:"text-sm text-neutral-500 ml-1",children:"%"})]}),s.jsxs("div",{className:`text-xs mt-1 ${ee>=0?"text-emerald-400":"text-rose-400"}`,children:[ee>=0?"":""," ",Math.abs(ee),"%p"]})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-neutral-800 mb-4",children:"  "}),s.jsx("div",{className:"flex items-end gap-4 h-32",children:Mr.map((K,ue)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsxs("div",{className:"text-xs text-neutral-500 mb-1",children:[K.visits,""]}),s.jsx("div",{className:"w-full rounded-t transition-all duration-500 bg-neutral-200",style:{height:`${Math.max(K.visits/Fl*100,8)}%`,background:ue===Mr.length-1?"#475569":"#334155"}}),s.jsx("div",{className:"text-xs text-neutral-500 mt-2",children:K.month})]},ue))})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-neutral-800 mb-4",children:"  "}),s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"positive",label:"",count:Q.filter(K=>K.reaction==="positive").length},{key:"special",label:"",count:Q.filter(K=>K.reaction==="special").length},{key:"neutral",label:"",count:Q.filter(K=>K.reaction==="neutral").length},{key:"missed",label:"",count:Q.filter(K=>K.reaction==="missed").length}].map(K=>s.jsxs("div",{className:"text-center p-3 rounded-xl border border-neutral-200",children:[s.jsx("div",{className:"text-xl font-bold text-[#171717]",children:K.count}),s.jsx("div",{className:"text-xs text-neutral-500",children:K.label})]},K.key))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-bold text-[#171717]",children:"AI "}),s.jsx("button",{onClick:()=>{var mt;vl(null);const K=new Date,ue=K.getMonth(),Ie=K.getFullYear(),je=V==="all"||!V?null:Number(V),rt=je?fe.filter(Se=>Se.managerId===je):fe,sr=Ve.filter(Se=>{const pi=new Date(Se.date);return pi.getMonth()===ue&&pi.getFullYear()===Ie&&(!je||Se.managerId===je)});mf({managerName:je?((mt=ye.find(Se=>Se.id===je))==null?void 0:mt.name)||"":" ",thisVisits:sr.reduce((Se,pi)=>{var _b;return Se+(((_b=pi.stops)==null?void 0:_b.length)||0)},0),visitChange:0,newCompanies:fe.filter(Se=>Se.createdAt&&new Date(Se.createdAt).getMonth()===ue&&(!je||Se.managerId===je)).length,consults:sd.filter(Se=>Se.status==="completed"&&Se.createdAt&&new Date(Se.createdAt).getMonth()===ue).length,positiveRate:Math.round(rt.filter(Se=>Se.reaction==="positive").length/Math.max(rt.length,1)*100),positive:rt.filter(Se=>Se.reaction==="positive").length,special:rt.filter(Se=>Se.reaction==="special").length,neutral:rt.filter(Se=>Se.reaction==="neutral").length,missed:rt.filter(Se=>Se.reaction==="missed").length})},disabled:Uc,className:"text-xs px-2 py-1 rounded-full border border-neutral-200 text-neutral-500 hover:border-slate-500 disabled:opacity-50",children:" "})]}),Uc?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-2",children:[s.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-neutral-300 border-t-transparent rounded-full"}),s.jsx("span",{className:"text-neutral-500 text-sm",children:"AI  ..."}),ht&&s.jsx("span",{className:"text-yellow-400 text-xs",children:ht})]}):ht&&!Kt?s.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[s.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:" "}),s.jsx("p",{className:"text-neutral-700 text-sm",children:ht}),s.jsx("button",{onClick:()=>et(null),className:"mt-2 text-xs text-neutral-500 hover:text-white",children:""})]}):Kt?s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{className:"text-neutral-700",children:Kt.comment}),Kt.analysis&&s.jsx("p",{className:"text-neutral-500 text-xs",children:Kt.analysis}),s.jsx("div",{className:"pt-2 border-t border-neutral-200",children:s.jsx("p",{className:"text-neutral-500 text-xs",children:Kt.suggestion})}),Nn&&s.jsxs("p",{className:"text-xs text-neutral-500 pt-2 border-t border-neutral-200",children:[" : ",Nn.toLocaleString("ko-KR")]})]}):s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{className:"text-neutral-700",children:Pe.comment}),Pe.analysis&&s.jsx("p",{className:"text-neutral-500 text-xs",children:Pe.analysis}),s.jsx("div",{className:"pt-2 border-t border-neutral-200",children:s.jsx("p",{className:"text-neutral-500 text-xs",children:Pe.suggestion})})]})]}),$n&&(!V||V==="all")&&fi.length>0&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-neutral-800 mb-3",children:" "}),s.jsx("div",{className:"space-y-2",children:fi.slice(0,5).map((K,ue)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-neutral-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",children:ue<3?["","",""][ue]:`${ue+1}`}),s.jsx("span",{className:"text-neutral-800 text-sm",children:K.name})]}),s.jsxs("span",{className:"text-neutral-500 text-sm",children:[K.visits,""]})]},K.id))})]})]})]})})(),te==="ai"&&s.jsxs("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4 space-y-4",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 break-inside-avoid mb-4 border border-neutral-300/30 bg-neutral-800/5",children:[s.jsxs("h3",{className:"font-bold text-[#171717] mb-3 flex items-center gap-2",children:["AI  ",s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-neutral-800/20 text-neutral-700 text-xs",children:"NEW"})]}),s.jsx("p",{className:"text-xs text-neutral-500 mb-3",children:"   AI   ."}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",value:Y,onChange:o=>pe(o.target.value),onKeyPress:o=>o.key==="Enter"&&$c(Y),placeholder:":  , , , ...",className:"flex-1 px-4 py-3 rounded-lg bg-neutral-100 border border-neutral-200 text-[#171717] placeholder-slate-400 focus:outline-none focus:border-neutral-300"}),s.jsx("button",{onClick:()=>$c(Y),disabled:Ue||!Y.trim(),className:"px-5 py-3 bg-neutral-800 text-white rounded-lg font-bold hover:bg-neutral-800/80 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ue?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"})," "]}):""})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:["","",""," "," ",""].map(o=>s.jsx("button",{onClick:()=>{pe(o),$c(o)},disabled:Ue,className:"px-3 py-1.5 rounded-full bg-neutral-100 text-neutral-700 text-xs hover:bg-neutral-200 transition-all disabled:opacity-50",children:o},o))}),Ue&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[s.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-neutral-300 border-t-transparent rounded-full"}),s.jsxs("span",{className:"text-neutral-500 text-sm",children:['"',Y,'"  ...']})]}),ht&&!Ue&&s.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 mb-3",children:s.jsx("p",{className:"text-red-400 text-sm",children:ht})}),ne&&!Ue&&s.jsxs("div",{className:"space-y-3 mt-4 pt-4 border-t border-neutral-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-bold text-[#171717] flex items-center gap-2",children:[s.jsxs("span",{className:"text-neutral-700",children:['"',ne.keyword,'"']}),"  "]}),s.jsx("span",{className:"text-xs text-neutral-500",children:(db=ne.searchedAt)==null?void 0:db.toLocaleString("ko-KR")})]}),(ne.relatedCompaniesCount>0||ne.relatedRealtorsCount>0)&&s.jsxs("div",{className:"flex gap-3 text-xs",children:[ne.relatedCompaniesCount>0&&s.jsxs("span",{className:"px-2 py-1 rounded bg-emerald-500/20 text-emerald-400",children:["  ",ne.relatedCompaniesCount,""]}),ne.relatedRealtorsCount>0&&s.jsxs("span",{className:"px-2 py-1 rounded bg-blue-500/20 text-blue-400",children:["  ",ne.relatedRealtorsCount,""]}),ne.relatedIssuesCount>0&&s.jsxs("span",{className:"px-2 py-1 rounded bg-yellow-500/20 text-yellow-400",children:["  ",ne.relatedIssuesCount,""]})]}),s.jsx("div",{className:"p-3 rounded-lg bg-white border border-neutral-200",children:s.jsx("p",{className:"text-sm text-neutral-800 leading-relaxed",children:ne.summary})}),((ub=ne.insights)==null?void 0:ub.length)>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:" "}),s.jsx("ul",{className:"space-y-1",children:ne.insights.map((o,u)=>s.jsxs("li",{className:"text-sm text-neutral-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-400",children:""}),o]},u))})]}),((hb=ne.salesTips)==null?void 0:hb.length)>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"  "}),s.jsx("ul",{className:"space-y-1",children:ne.salesTips.map((o,u)=>s.jsxs("li",{className:"text-sm text-neutral-700 flex items-start gap-2",children:[s.jsxs("span",{className:"text-emerald-400",children:[u+1,"."]}),o]},u))})]}),((fb=ne.actionItems)==null?void 0:fb.length)>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-neutral-800/10 border border-neutral-300/30",children:[s.jsx("p",{className:"text-xs text-neutral-700 font-semibold mb-2",children:"  "}),s.jsx("ul",{className:"space-y-1",children:ne.actionItems.map((o,u)=>s.jsxs("li",{className:"text-sm text-neutral-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-700",children:""}),o]},u))})]}),((pb=ne.relatedTopics)==null?void 0:pb.length)>0&&s.jsxs("div",{className:"pt-3 border-t border-neutral-200",children:[s.jsx("p",{className:"text-xs text-neutral-500 mb-2",children:" "}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ne.relatedTopics.map((o,u)=>s.jsx("button",{onClick:()=>{pe(o),$c(o)},className:"px-3 py-1.5 rounded-full bg-neutral-100 text-neutral-700 text-xs hover:bg-neutral-200 transition-all",children:o},u))})]})]})]}),(()=>{var de;const o=V==="all"||!V?null:Number(V),u=o?fe.filter(F=>F.managerId===o):fe,f=o?((de=ye.find(F=>F.id===o))==null?void 0:de.name)||"":" ",p=u.filter(F=>F.reaction==="positive"),x=u.filter(F=>F.reaction==="special"),v=u.filter(F=>F.reaction==="neutral"),y=u.filter(F=>F.reaction==="missed"),w=u.map(F=>F.memo||"").filter(F=>F.length>0),S=["","","","","","","",""],P=["","","","","","",""];let R=0,O=0;w.forEach(F=>{S.some(H=>F.includes(H))&&R++,P.some(H=>F.includes(H))&&O++});const B=(()=>{const F=u.length;if(F===0)return{main:"   .   .",suggestion:"    .",analysis:"",encouragement:""};const H=Math.round((p.length+x.length)/F*100),G=Math.round(v.length/F*100),z=Math.round(y.length/F*100);let E="",M="",le="",ee="";return E=`${f} :  ${F}    ${p.length}(${H}%),  ${x.length},  ${v.length}(${G}%),  ${y.length}(${z}%)`,le=`+: ${p.length+x.length} | : ${v.length} | : ${y.length}`,H>=50?(M="     .",ee="   ."):H>=30?(M="     .",ee=" ."):H>=10?(M="    .",ee=" ."):(M="   .",ee="  ."),z>30&&(M+=`  ${z}%    .`),x.length>0&&(M+=`  ${x.length}   .`),{main:E,suggestion:M,analysis:le,encouragement:ee}})(),k=(()=>{const F={:{cafeCount:2596,startupTrend:"+12%",avgRent:" 10~15",competition:" ( 15+)",targetCustomer:"30~40   ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" 2,596  .   14.1%( 10.0% ).    ",smalltalkTip:"  2,596  .  14.1%  ,   52.6% 3  .     .",brokerMent:",   2,596  .  14%           .",customerMent:",   2,596,  14.1%  .        .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:2135,startupTrend:"+18%",avgRent:" 8~12",competition:"",targetCustomer:"20~30 MZ  ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" 2,135  2.   18% .      2~3",smalltalkTip:"  2,135  2.   18%       2~3.    .",brokerMent:",               .     .",customerMent:",       2~3.          .",sourceUrl:"https://eventmoa.kr/2024%EB%85%84-%EC%84%9C%EC%9A%B8-%EC%B9%B4%ED%8E%98-%EC%8B%9C%EC%9E%A5-%ED%98%84%ED%99%A9/",sourceName:"2024     ( 2,135)"},:{cafeCount:1850,startupTrend:"+8%",avgRent:" 12~18",competition:"",targetCustomer:"30~50   ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"   12~18   . /      ",smalltalkTip:"   12~18   . /     1.5  .",brokerMent:",    1.5  .              .",customerMent:",    1.5  .     ,  ,  .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:1720,startupTrend:"+15%",avgRent:" 8~12",competition:"",targetCustomer:"30~40  ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"  .    40% . /   ",smalltalkTip:"       40% .     2        .",brokerMent:",        .             .",customerMent:",        40% . /       .",sourceUrl:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",sourceName:"IN:     "},:{cafeCount:1450,startupTrend:"+22%",avgRent:" 6~10",competition:"",targetCustomer:"20~40 ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"  22%  .   .   1~2  ",smalltalkTip:"   22%  .      1~2 .  6     .",brokerMent:",      1~2 .              .",customerMent:",   .    ,   ,   .     .",sourceUrl:"https://www.kgnews.co.kr/news/article.html?no=822924",sourceName:":    "}," ":{cafeCount:1200,startupTrend:"+10%",avgRent:" 6~9",competition:"",targetCustomer:"30~50 ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"IT .      .  2~5 ",smalltalkTip:" IT   .      ,  2~5 . / .",brokerMent:",  IT    .              .",customerMent:",  IT  .        .",sourceUrl:"https://blog.opensurvey.co.kr/trendreport/cafe-2024/",sourceName:":    2024"}," ":{cafeCount:850,startupTrend:"+25%",avgRent:" 4~7",competition:"",targetCustomer:"20~30  ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" 12 , 2025     ",smalltalkTip:"  12  .     50% ( 4~7)   .        .",brokerMent:",   12     .             .",customerMent:",   12      .   ,   ,   .    .",sourceUrl:"https://www.bizhankook.com/bk/article/29822",sourceName:":    "}," ":{cafeCount:980,startupTrend:"+20%",avgRent:" 5~8",competition:"",targetCustomer:" + ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:" (7~8)    3.     2~3 ",smalltalkTip:"  (7~8)   3.    2~3  .  6    .",brokerMent:",   /   3.              .",customerMent:",   (7~8)   3.  6    .",sourceUrl:"https://gyver.co.kr/cafe-startup-market-analysis/",sourceName:" : 2025   "}," ":{cafeCount:620,startupTrend:"+15%",avgRent:" 3~5",competition:"",targetCustomer:" + ",teamPositive:u.filter(M=>M.reaction==="positive"&&(M.address||"").includes("")).length,teamTotal:u.filter(M=>(M.address||"").includes("")).length,issue:"  3~5   70% .   (12~2, 6~8)  50% ",smalltalkTip:"   3~5   70% .    (12~2, 6~8)  50% .",brokerMent:",      50% .              .",customerMent:",    (12~2, 6~8)  50% .      .",sourceUrl:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",sourceName:"KB:   "}},H=Object.keys(F).map(M=>{const le=F[M],ee=le.teamPositive*10+le.teamTotal*2,dn=parseInt(le.startupTrend)||0;return{region:M,...le,score:ee+dn,category:M.includes("")&&!M.includes("")?"":M.includes("")?"":""}}).sort((M,le)=>le.score-M.score),G=Zs%H.length,z=H[G],E=[];return z.teamPositive>0&&E.push(`   ${z.teamPositive}`),parseInt(z.startupTrend)>=15&&E.push(`   ${z.startupTrend} `),z.competition===""&&E.push("  "),{...z,aiReason:E.length>0?E:["   "],totalCount:H.length,currentIndex:G+1}})();return s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border border-neutral-200/30",children:[s.jsxs("h3",{className:"font-bold text-[#171717] mb-4 flex items-center gap-2 text-lg",children:[s.jsx("span",{className:"text-xl"}),"     "]}),s.jsx("div",{className:"bg-transparent rounded-xl p-4 mb-4 border border-neutral-200",children:s.jsxs("div",{className:"flex items-center justify-center gap-8",children:[s.jsxs("div",{className:"relative w-32 h-32",children:[s.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:(()=>{const F=Math.max(u.length,1),H=[{value:p.length,color:"#10b981"},{value:x.length,color:"#f43f5e"},{value:v.length,color:"#f97316"},{value:y.length,color:"#eab308"}];let G=0;return H.map((z,E)=>{const M=z.value/F*100,le=`${M} ${100-M}`,ee=-G;return G+=M,s.jsx("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",strokeWidth:"3.5",stroke:z.color,strokeDasharray:le,strokeDashoffset:ee},E)})})()}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:u.length}),s.jsx("div",{className:"text-xs text-neutral-500",children:""})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),s.jsxs("span",{className:"text-xs text-neutral-700",children:[" ",p.length," (",Math.round(p.length/Math.max(u.length,1)*100),"%)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),s.jsxs("span",{className:"text-xs text-neutral-700",children:[" ",x.length," (",Math.round(x.length/Math.max(u.length,1)*100),"%)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),s.jsxs("span",{className:"text-xs text-neutral-700",children:[" ",v.length," (",Math.round(v.length/Math.max(u.length,1)*100),"%)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),s.jsxs("span",{className:"text-xs text-neutral-700",children:[" ",y.length," (",Math.round(y.length/Math.max(u.length,1)*100),"%)"]})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:p.length}),s.jsx("div",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg border border-rose-500/30 bg-rose-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-rose-400",children:x.length}),s.jsx("div",{className:"text-xs text-neutral-500",children:""})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg border border-orange-500/30 bg-orange-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-400",children:v.length}),s.jsx("div",{className:"text-xs text-neutral-500",children:""})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400",children:y.length}),s.jsx("div",{className:"text-xs text-neutral-500",children:""})]})]}),s.jsx("div",{className:"space-y-3",children:Uc?s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[s.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-neutral-300 border-t-transparent rounded-full"}),s.jsx("span",{className:"text-neutral-500 text-sm",children:"AI  ..."}),ht&&s.jsx("span",{className:"text-yellow-400 text-xs",children:ht})]}):ht&&!Kt?s.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[s.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:" "}),s.jsx("p",{className:"text-neutral-700 text-sm",children:ht}),s.jsx("button",{onClick:()=>et(null),className:"mt-2 text-xs text-neutral-500 hover:text-white",children:""})]}):Kt?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-3 rounded-lg border border-neutral-200/30 bg-white/30",children:s.jsx("p",{className:"text-sm text-neutral-800 leading-relaxed",children:Kt.comment})}),Kt.analysis&&s.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[s.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"AI "}),s.jsx("p",{className:"text-sm text-neutral-700",children:Kt.analysis})]}),s.jsxs("div",{className:"p-3 rounded-lg border border-neutral-200/30 bg-neutral-800/5",children:[s.jsx("p",{className:"text-xs text-neutral-700 mb-1 font-semibold",children:"AI  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:Kt.suggestion})]}),Kt.encouragement&&s.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:s.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:Kt.encouragement})}),Nn&&s.jsxs("p",{className:"text-xs text-neutral-500 pt-2 border-t border-neutral-200",children:[" : ",Nn.toLocaleString("ko-KR")]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-3 rounded-lg border border-neutral-200/30 bg-white/30",children:s.jsx("p",{className:"text-sm text-neutral-800 leading-relaxed",children:B.main})}),B.analysis&&s.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[s.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:B.analysis})]}),s.jsxs("div",{className:"p-3 rounded-lg border border-neutral-200/30 bg-neutral-800/5",children:[s.jsx("p",{className:"text-xs text-neutral-700 mb-1 font-semibold",children:""}),s.jsx("p",{className:"text-sm text-neutral-700",children:B.suggestion})]}),s.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:s.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:B.encouragement})})]})})]}),w.length>0&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border-l-4 border-blue-500",children:[s.jsxs("h3",{className:"font-bold text-[#171717] mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl"}),"   (",w.length,")"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-500/10",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-400",children:R}),s.jsx("div",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-neutral-50",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold text-neutral-500",children:O}),s.jsx("div",{className:"text-xs text-neutral-500",children:" "})]})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-white border border-neutral-200",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),s.jsx("div",{className:"space-y-2",children:(()=>{const F=u.filter(z=>z.reaction==="positive"),H=u.filter(z=>z.reaction==="negative"),G=u.filter(z=>!z.reaction||z.reaction==="neutral");return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-400",children:" "}),s.jsxs("span",{className:"text-neutral-700",children:[F.length," "]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-rose-400",children:" "}),s.jsxs("span",{className:"text-neutral-700",children:[H.length," "]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-neutral-500",children:""}),s.jsxs("span",{className:"text-neutral-700",children:[G.length," "]})]})]})})()})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"  "}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-emerald-400 font-bold min-w-[60px]",children:""}),s.jsx("span",{className:"text-neutral-700",children:'    ("  .  OOO.")'})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-400 font-bold min-w-[60px]",children:"1"}),s.jsx("span",{className:"text-neutral-700",children:"    (   ,   )"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-yellow-400 font-bold min-w-[60px]",children:"1"}),s.jsx("span",{className:"text-neutral-700",children:'     ("      ?")'})]})]})]}),R>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"    "}),s.jsx("p",{className:"text-sm text-neutral-700 mb-2",children:"     .   :"}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-1",children:[s.jsx("li",{children:" 1        "}),s.jsx("li",{children:" 2    "}),s.jsx("li",{children:"     "})]})]}),k&&s.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"    "}),s.jsx("p",{className:"text-sm text-neutral-700",children:k.issue||"   ."}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"   1    ."})]})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border border-neutral-200 bg-transparent",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-[#171717] flex items-center gap-2 text-lg",children:[s.jsx("span",{className:"text-xl"})," AI  ",s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-medium ml-2",children:" "}),s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-neutral-100 text-neutral-500 text-xs font-normal ml-1",children:"2024 "})]}),s.jsxs("div",{className:"flex gap-1 p-1 bg-white rounded-lg",children:[s.jsx("button",{onClick:()=>Ji("single"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${Qi==="single"?"bg-neutral-800 text-white":"text-neutral-500 hover:text-white"}`,children:""}),s.jsx("button",{onClick:()=>Ji("list"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${Qi==="list"?"bg-neutral-800 text-white":"text-neutral-500 hover:text-white"}`,children:""})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"  (: , , )",value:ei,onChange:F=>Xi(F.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all flex-1 text-sm"}),s.jsx("button",{onClick:()=>{if(!ei.trim())return;const H=["","","","",""," "," "," "," "].findIndex(G=>G.includes(ei.trim()));H>=0?(yr(H),Ji("single"),Xi("")):alert("   .")},className:"px-4 py-2 bg-neutral-900 rounded-lg font-medium hover:bg-neutral-800 transition-all text-white px-4",children:""})]})}),Qi==="single"?s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"border border-neutral-200/30 rounded-xl p-4 bg-transparent",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-neutral-800/20 text-neutral-700",children:k.category}),s.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:k.region})]}),s.jsxs("span",{className:"text-xs text-neutral-500",children:[k.currentIndex,"/",k.totalCount]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-neutral-800/10 border border-neutral-200/30 mb-3",children:[s.jsx("p",{className:"text-xs text-neutral-700 font-semibold mb-2",children:"AI    "}),s.jsx("div",{className:"flex flex-wrap gap-2",children:k.aiReason&&k.aiReason.map((F,H)=>s.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-800/20 text-neutral-700 text-xs",children:F},H))})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-neutral-200/30",children:[s.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[k.cafeCount||"-",""]}),s.jsx("div",{className:"text-xs text-neutral-500",children:"  "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-neutral-200/30",children:[s.jsx("div",{className:"text-lg font-bold text-emerald-400",children:k.startupTrend||"-"}),s.jsx("div",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-neutral-200/30",children:[s.jsx("div",{className:"text-lg font-bold text-yellow-400",children:k.avgRent||"-"}),s.jsx("div",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-neutral-200/30",children:[s.jsx("div",{className:"text-lg font-bold text-orange-400",children:k.competition||"-"}),s.jsx("div",{className:"text-xs text-neutral-500",children:" "})]})]}),(k.teamTotal>0||k.teamPositive>0)&&s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 mb-3 cursor-pointer hover:bg-emerald-500/20 transition-all",onClick:()=>Qh(k.region),children:[s.jsxs("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:["   ",s.jsx("span",{className:"text-neutral-500",children:"(  )"})]}),s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:k.teamTotal||0}),s.jsx("span",{className:"text-xs text-neutral-500 block",children:" "})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-400",children:k.teamPositive||0}),s.jsx("span",{className:"text-xs text-neutral-500 block",children:" "})]}),k.teamTotal>0&&s.jsxs("div",{className:"text-center",children:[s.jsxs("span",{className:"text-lg sm:text-xl font-bold text-neutral-700",children:[Math.round(k.teamPositive/k.teamTotal*100)||0,"%"]}),s.jsx("span",{className:"text-xs text-neutral-500 block",children:""})]})]})]})]}),k.issue&&s.jsxs("div",{className:"p-4 rounded-xl border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),s.jsx("p",{className:"text-sm text-neutral-800",children:k.issue})]}),k.targetCustomer&&s.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/30 bg-blue-500/5",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),s.jsx("p",{className:"text-sm text-neutral-800",children:k.targetCustomer})]}),k.brokerMent&&s.jsxs("div",{className:"p-4 rounded-xl border border-emerald-500/30 bg-emerald-500/5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{onClick:F=>{const H=F.currentTarget;navigator.clipboard.writeText((ra==null?void 0:ra.brokerMent)||k.brokerMent),H.innerText="",H.classList.add("text-emerald-400"),setTimeout(()=>{H.innerText="",H.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200",children:""})]}),s.jsxs("p",{className:"text-sm text-neutral-800 leading-relaxed",children:['"',(ra==null?void 0:ra.brokerMent)||k.brokerMent,'"']}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"    .   ."})]}),k.sourceUrl&&s.jsxs("a",{href:k.sourceUrl,target:"_blank",rel:"noopener",className:"flex items-center justify-between p-3 rounded-xl border border-neutral-200/30 hover:bg-neutral-800/10 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-neutral-700"}),s.jsxs("span",{className:"text-sm text-neutral-700 font-medium",children:[": ",k.sourceName||""]})]}),s.jsx("span",{className:"text-neutral-500",children:""})]}),s.jsx("button",{onClick:()=>yr(F=>F+1),className:"w-full py-3 rounded-xl bg-neutral-800/20 hover:bg-neutral-800/30 border border-neutral-200 text-neutral-700 font-medium transition-all",children:"    "})]}):s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:["","","","",""," "," "," "," "].map((F,H)=>{const G=F.includes("")&&!F.includes(""),z=F.includes(""),E=G?"":z?"":"";return s.jsx("div",{onClick:()=>{yr(H),Ji("single")},className:"p-3 rounded-lg border border-neutral-200/30 hover:border-neutral-200 bg-transparent cursor-pointer transition-all",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-neutral-800/20 text-neutral-700",children:E}),s.jsx("span",{className:"text-sm font-medium text-neutral-800",children:F})]}),s.jsx("span",{className:"text-neutral-500",children:""})]})},H)})})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border-l-4 border-yellow-500",children:[s.jsxs("h3",{className:"font-bold text-[#171717] mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl"}),"   (",ge.length,")"]}),ge.length===0?s.jsxs("div",{className:"text-center py-4 sm:py-6 text-neutral-500",children:[s.jsx("p",{className:"mb-2",children:"   ."}),s.jsx("p",{className:"text-xs",children:"      ."})]}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:ge.slice(0,10).map((F,H)=>s.jsxs("div",{className:"p-3 rounded-lg bg-transparent hover:bg-neutral-50 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-400",children:F.||F.region||""}),s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-neutral-200 text-neutral-700",children:F.||F.type||""})]}),s.jsx("p",{className:"text-sm text-neutral-800 font-medium",children:F.||F.title}),s.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[F.||F.source,"  ",F.||F.date]})]},F.id||H))})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsxs("h3",{className:"font-bold text-[#171717] mb-4 text-lg",children:[" ",s.jsx("span",{className:"text-xs text-neutral-500 ml-2 font-normal",children:"   "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-4 rounded-2xl border border-neutral-200 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-rose-400",children:"  14.1% ( )"}),s.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"text-xs text-neutral-700 hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-neutral-500",children:"  52.6% 3  "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:'" "   . "       " .'})]})]}),s.jsxs("div",{className:"p-4 rounded-2xl border border-neutral-200 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-orange-400",children:"   2 "}),s.jsx("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener",className:"text-xs text-neutral-700 hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-neutral-500",children:" 3,200+,  2,500+   "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:'"   ,   15~50 5  900.   0."'})]})]}),s.jsxs("div",{className:"p-4 rounded-2xl border border-neutral-200 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-blue-400",children:"   "}),s.jsx("a",{href:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",target:"_blank",rel:"noopener",className:"text-xs text-neutral-700 hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-neutral-500",children:"KB:   +    "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:'"   ,  ,   .       ."'})]})]}),s.jsxs("div",{className:"p-4 rounded-2xl border border-neutral-200 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-yellow-400",children:"    1 "}),s.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"text-xs text-neutral-700 hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-neutral-500",children:", ,      "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:'"   ,            ."'})]})]})]}),s.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:'  " "   .  "  " .      .'})]})]}),A0&&(()=>{const F=A0,H=fe.filter(z=>(z.address||"").includes(F)),G=kc?H.filter(z=>(z.name||"").toLowerCase().includes(kc.toLowerCase())||(z.address||"").toLowerCase().includes(kc.toLowerCase())):H;return s.jsx("div",{className:"modal-overlay",onClick:()=>{Qh(null),Jh("")},children:s.jsxs("div",{className:"modal-content max-w-lg",onClick:z=>z.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-[#171717]",children:[F,"   (",H.length,")"]}),s.jsx("button",{type:"button",onClick:()=>{Qh(null),Jh("")},className:"text-neutral-500 hover:text-white text-xl",children:""})]}),s.jsx("input",{type:"text",placeholder:"/ ",value:kc,onChange:z=>Jh(z.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all w-full mb-4"}),s.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:G.length===0?s.jsx("p",{className:"text-center text-neutral-500 py-4",children:"   ."}):G.map(z=>{const E=gt[z.reaction]||gt.neutral;return s.jsxs("div",{className:"p-3 rounded-lg border border-neutral-200 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-neutral-800",children:z.name}),s.jsx("p",{className:"text-xs text-neutral-500",children:z.address})]}),s.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:E.bg+"30",color:E.bg},children:E.label})]}),z.memo&&s.jsxs("p",{className:"text-xs text-neutral-500 mt-2 truncate",children:[": ",z.memo]})]},z.id)})})]})})})(),_r&&s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>P0(null),children:s.jsxs("div",{className:"bg-white rounded-2xl max-w-[95vw] sm:max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-neutral-200",onClick:F=>F.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b border-neutral-200 flex justify-between items-center",children:[s.jsxs("h3",{className:"font-bold text-lg text-white",children:[_r==="specialty"&&"   ",_r==="lowcost"&&"   ",_r==="differentiation"&&"  ",_r==="delivery"&&"/  "]}),s.jsx("button",{type:"button",onClick:()=>P0(null),className:"text-neutral-500 hover:text-white text-2xl",children:""})]}),s.jsxs("div",{className:"p-4 space-y-3 sm:space-y-4",children:[_r==="specialty"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:" ?"}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:" SCA()  80    "}),s.jsx("li",{children:" , ,    "}),s.jsx("li",{children:"      (  5,000~8,000)"})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:""}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:"       "}),s.jsx("li",{children:"  ,     "}),s.jsx("li",{children:"  ,      "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),s.jsx("p",{className:"text-xs text-neutral-500",children:"  ,     :"}),s.jsxs("ul",{className:"text-xs text-neutral-500 mt-2 space-y-1",children:[s.jsx("li",{children:" (aT)   "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "})]})]})]}),_r==="lowcost"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:"  1,500~2,000  "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"  : , ,  "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-rose-400 font-semibold mb-2",children:""}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:"       "}),s.jsx("li",{children:" ,    "}),s.jsx("li",{children:"    "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),s.jsx("p",{className:"text-xs text-neutral-500",children:" ,     :"}),s.jsxs("ul",{className:"text-xs text-neutral-500 mt-2 space-y-1",children:[s.jsx("li",{children:"   (franchise.ftc.go.kr)"}),s.jsx("li",{children:"    "})]})]})]}),_r==="differentiation"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-emerald-400 font-semibold mb-2",children:" "}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:"    (, )"}),s.jsx("li",{children:"   (, )"}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:" "}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:" SNS  (,  )"}),s.jsx("li",{children:"   (, )"}),s.jsx("li",{children:"  "})]})]})]}),_r==="delivery"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"/"}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:" : , ,  "}),s.jsx("li",{children:"      "}),s.jsx("li",{children:"     "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200/30 bg-transparent",children:[s.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:" "}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsx("li",{children:"     (   )"}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   vs   "})]})]})]})]})]})})]})})(),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border-2 border-rose-500/30",children:[s.jsxs("h3",{className:"font-bold text-[#171717] mb-4 flex items-center gap-2 text-lg",children:[s.jsx("span",{className:"text-xl"}),"    (  )"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{onClick:()=>rf(Nr==="closure"?null:"closure"),className:"p-4 rounded-xl border border-rose-500/30 bg-transparent cursor-pointer hover:border-neutral-200 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-rose-400 font-bold",children:"  "}),s.jsx("span",{className:"text-2xl font-black text-rose-400 ml-3",children:"14.1%"})]}),s.jsx("span",{className:"text-neutral-500 text-lg",children:Nr==="closure"?"":""})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:": KB (2018 ,  10.0% )"}),s.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"   3     "'})]}),Nr==="closure"&&s.jsxs("div",{className:"p-4 rounded-xl border border-neutral-200/30 bg-transparent space-y-3 animate-fadeIn",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     ?      .       .      ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200"})]}),s.jsxs("p",{className:"text-sm text-neutral-800",children:['",     ?  ',s.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),"    .       . ",s.jsx("span",{className:"text-emerald-400 font-semibold",children:"   "}),'  ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:" "}),s.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText("  5    (/ ), /   ,      "),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200"})]}),s.jsxs("p",{className:"text-sm text-neutral-800",children:["  ",s.jsx("span",{className:"text-blue-400 font-semibold",children:"5   "})," (/ ), /   ,      "]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/30",children:[s.jsx("p",{className:"text-xs text-purple-400 font-semibold mb-2",children:"  TOP 3 ( )"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"1:  "}),s.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"2:   "}),s.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"3:  "})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"  :   +  "})]}),s.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-neutral-200 hover:bg-neutral-800/10 text-neutral-700 text-sm transition-all",children:":   14%,   "})]}),s.jsxs("div",{onClick:()=>rf(Nr==="survival"?null:"survival"),className:"p-4 rounded-xl border border-blue-500/30 bg-transparent cursor-pointer hover:border-neutral-200 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-400 font-bold",children:"  "}),s.jsx("span",{className:"text-lg font-bold text-blue-400 ml-2",children:" 1,050"}),s.jsx("span",{className:"text-neutral-500 mx-2",children:"(10  1 )"})]}),s.jsx("span",{className:"text-neutral-500 text-lg",children:Nr==="survival"?"":""})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:": KB (   3,475 1/3)"}),s.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"     "'})]}),Nr==="survival"&&s.jsxs("div",{className:"p-4 rounded-xl border border-neutral-200/30 bg-transparent space-y-3 animate-fadeIn",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     1,050.  87.  .     ,       ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200"})]}),s.jsxs("p",{className:"text-sm text-neutral-800",children:['",    ',s.jsx("span",{className:"text-emerald-400 font-semibold",children:" 1,050"}),".  87.  .   ",s.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),'  ,       ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     1,050.   3,475 1/3.     .     ,  ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200"})]}),s.jsxs("p",{className:"text-sm text-neutral-800",children:['",    ',s.jsx("span",{className:"text-blue-400 font-semibold",children:" 1,050"}),".   3,475 1/3.     .    ",s.jsx("span",{className:"text-blue-400 font-semibold",children:" , "}),' ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:[s.jsx("p",{className:"text-xs text-cyan-400 font-semibold mb-2",children:"   "}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-700",children:[s.jsx("span",{children:"  500m   "}),s.jsx("span",{children:"  "}),s.jsx("span",{children:"   "}),s.jsx("span",{children:"   "})]})]}),s.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-neutral-200 hover:bg-neutral-800/10 text-neutral-700 text-sm transition-all",children:"IN:      "})]}),s.jsxs("div",{onClick:()=>rf(Nr==="royalty"?null:"royalty"),className:"p-4 rounded-xl border border-yellow-500/30 bg-transparent cursor-pointer hover:border-neutral-200 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-400 font-bold",children:"  "}),s.jsx("span",{className:"text-2xl font-black text-yellow-400 ml-3",children:"6,900~1.3"})]}),s.jsx("span",{className:"text-neutral-500 text-lg",children:Nr==="royalty"?"":""})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"    (/ )"}),s.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"    "'})]}),Nr==="royalty"&&s.jsxs("div",{className:"p-4 rounded-xl border border-neutral-200/30 bg-transparent space-y-3 animate-fadeIn",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",    . 1 15 ,   .      .         ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200"})]}),s.jsxs("p",{className:"text-sm text-neutral-800",children:['",    . ',s.jsx("span",{className:"text-emerald-400 font-semibold",children:"1 15 ,  "}),' .      .         ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",   6,900~1.3.    .        ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-neutral-100 text-xs text-neutral-700 hover:bg-neutral-200"})]}),s.jsxs("p",{className:"text-sm text-neutral-800",children:['",   ',s.jsx("span",{className:"text-blue-400 font-semibold",children:"6,900~1.3"}),'.    .        ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-700",children:[s.jsx("span",{children:"  : 6,900"}),s.jsx("span",{children:"  :  15"}),s.jsx("span",{children:"  : 1.3"}),s.jsx("span",{children:"  :  25"})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:" , ,   / :   "})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4 flex items-center gap-2 text-lg",children:" vs   "}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("th",{className:"py-3 px-2 text-left text-neutral-500 font-medium",children:""}),s.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),s.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),s.jsxs("tbody",{className:"text-neutral-700",children:[s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400 (15)"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"2~5 ( )"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:""})]})]})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm text-neutral-700 font-semibold mb-3",children:"~   "}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-neutral-200 bg-white/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-neutral-500",children:" 500 +  150 + /"})]}),s.jsx("span",{className:"text-neutral-700 font-bold",children:"6,900~1"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-neutral-200 bg-white/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-neutral-500",children:" 300 +  150 + /"})]}),s.jsx("span",{className:"text-neutral-700 font-bold",children:"5,500~8,000"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-neutral-200 bg-white/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-neutral-500",children:" 500 +  200 + /"})]}),s.jsx("span",{className:"text-neutral-700 font-bold",children:"6,000~9,000"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-neutral-200 bg-white/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-neutral-500",children:" 1,000 +  300 + /"})]}),s.jsx("span",{className:"text-neutral-700 font-bold",children:"8,000~1.3"})]})]}),s.jsx("a",{href:"https://franchise.ftc.go.kr/mnu/00013/program/userRqst/list.do",target:"_blank",rel:"noopener",className:"flex items-center justify-center gap-2 mt-3 p-3 rounded-lg border border-neutral-300/50 bg-neutral-800/10 hover:bg-neutral-800/20 transition-all",children:s.jsx("span",{className:"text-sm text-neutral-700 font-medium",children:"     "})}),s.jsx("p",{className:"text-xs text-neutral-500 mt-3 text-center",children:"*    , ,    ."})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h3",{className:"font-bold text-[#171717] flex items-center gap-2",children:[s.jsx("span",{className:"text-xl"}),"    ",s.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full",children:""})]})}),s.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"     AI      ."}),s.jsxs("div",{className:"p-4 rounded-xl bg-transparent border border-neutral-200 mb-4",children:[s.jsx("p",{className:"text-sm text-neutral-700 font-semibold mb-3",children:"    "}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:sf,onChange:o=>U0(o.target.value),className:"w-full px-3 py-2 rounded-lg bg-neutral-100 border border-neutral-200 text-neutral-800 text-sm",children:[s.jsx("option",{value:"",children:" ?"}),s.jsx("option",{value:"broker",children:"  "}),s.jsx("option",{value:"broker-followup",children:" "}),s.jsx("option",{value:"franchise",children:"   "})]}),s.jsx("textarea",{value:af,onChange:o=>$0(o.target.value),placeholder:`    .

:     .   .`,className:"w-full px-3 py-3 rounded-lg bg-neutral-100 border border-neutral-200 text-neutral-800 text-sm resize-none h-24"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>lf("success"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Ac==="success"?"bg-emerald-500 text-white":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30"}`,children:"  "}),s.jsx("button",{onClick:()=>lf("fail"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Ac==="fail"?"bg-rose-500 text-white":"bg-rose-500/20 text-rose-400 border border-rose-500/30 hover:bg-rose-500/30"}`,children:" "})]}),s.jsx("button",{type:"button",onClick:()=>{if(!sf||!af||!Ac){alert(", ,   .");return}const o={id:Date.now(),situation:sf,memo:af,result:Ac,timestamp:new Date().toISOString(),managerId:n==null?void 0:n.managerId,managerName:(n==null?void 0:n.name)||""};oe.ref(`teamFeedbacks/${o.id}`).set(o),U0(""),$0(""),lf(null),alert(" !")},className:"w-full px-4 py-3 rounded-lg bg-neutral-800 text-white font-semibold hover:bg-neutral-800/80 transition-all",children:" "})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-neutral-700 font-semibold",children:"   ( 7)"}),ml&&ml.length>0?ml.slice(0,5).map((o,u)=>s.jsx("div",{className:`p-3 rounded-lg ${o.result==="success"?"bg-emerald-500/10 border border-emerald-500/30":"bg-rose-500/10 border border-rose-500/30"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-semibold ${o.result==="success"?"text-emerald-400":"text-rose-400"}`,children:o.result==="success"?"  ":"  "}),s.jsx("p",{className:"text-sm text-neutral-800 mt-1",children:o.situation||" "}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:o.memo||" "})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${o.result==="success"?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:o.result==="success"?"":""})]})},u)):s.jsxs("div",{className:"p-4 rounded-lg border border-neutral-200 bg-white/30 text-center",children:[s.jsx("p",{className:"text-neutral-500 text-sm",children:"   ."}),s.jsx("p",{className:"text-neutral-500 text-xs mt-1",children:"   ."})]}),ml&&ml.length>=3&&s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),s.jsx("p",{className:"text-sm text-neutral-700",children:"    ..."}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:" 5   AI  ."})]})]})]})]})]})]}),A==="calendar"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"font-bold text-[#171717] text-xl",children:" "}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:()=>yv(new Date(ls.getFullYear(),ls.getMonth()-1)),className:"w-10 h-10 rounded-lg bg-neutral-100 border border-neutral-200 text-neutral-700 font-bold hover:bg-neutral-200",children:"<"}),s.jsxs("h3",{className:"font-bold text-[#171717] text-lg",children:[ls.getFullYear()," ",ls.getMonth()+1,""]}),s.jsx("button",{onClick:()=>yv(new Date(ls.getFullYear(),ls.getMonth()+1)),className:"w-10 h-10 rounded-lg bg-neutral-100 border border-neutral-200 text-neutral-700 font-bold hover:bg-neutral-200",children:">"})]}),s.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 mb-2",children:["","","","","","",""].map((o,u)=>s.jsx("div",{className:`text-center text-sm font-bold py-2 ${u===0?"text-rose-600":u===6?"text-primary-600":"text-neutral-800"}`,children:o},o))}),s.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1",children:(()=>{const o=ls.getFullYear(),u=ls.getMonth(),f=new Date(o,u,1).getDay(),p=new Date(o,u+1,0).getDate(),x=ms(),v=[];for(let y=0;y<f;y++)v.push(s.jsx("div",{className:"h-24 sm:h-28"},`empty-${y}`));for(let y=1;y<=p;y++){const w=`${o}-${String(u+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,S=Ve.filter(B=>B.date===w),P=Ut.filter(B=>B.date===w),R=[...S.map(B=>({...B,itemType:"route"})),...P.map(B=>({...B,itemType:"event"}))];R.sort((B,Q)=>(B.time||"00:00").localeCompare(Q.time||"00:00"));const O=w===x,D=new Date(o,u,y).getDay();v.push(s.jsxs("div",{className:`h-24 sm:h-28 p-1 border rounded-lg overflow-hidden cursor-pointer transition-all hover:shadow-md ${O?"bg-neutral-100 border-primary-300":"border-neutral-200 hover:border-primary-300"}`,onClick:()=>{Df(w),Ir({title:"",time:"09:00",memo:""}),oa(null),ai(!0)},children:[s.jsx("div",{className:`text-sm font-bold mb-1 ${D===0?"text-rose-600":D===6?"text-primary-600":"text-neutral-800"}`,children:y}),s.jsxs("div",{className:"space-y-0.5 overflow-y-auto max-h-14",children:[R.slice(0,3).map((B,Q)=>{var k,de,F,H;if(B.itemType==="route"){const G=ye.find(z=>z.id===B.managerId);return s.jsxs("div",{onClick:z=>{z.stopPropagation(),kr(B)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight",style:{background:(G==null?void 0:G.color)||"#888"},title:`${(k=B.time)==null?void 0:k.slice(0,5)} ${B.name}`,children:[(de=B.time)==null?void 0:de.slice(0,5)," ",B.name]},`r-${B.id}`)}else{const G=ye.find(E=>E.id===B.managerId),z=B.managerId&&G?G.color:"#6b7280";return s.jsxs("div",{onClick:E=>{E.stopPropagation(),El(B)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight cursor-pointer hover:opacity-80",style:{background:z},title:`${(F=B.time)==null?void 0:F.slice(0,5)} ${B.title}`,children:[(H=B.time)==null?void 0:H.slice(0,5)," ",B.title]},`e-${B.id}`)}}),R.length>3&&s.jsxs("div",{className:"text-xs text-neutral-800",children:["+",R.length-3,""]})]})]},y))}return v})()})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("p",{className:"font-bold text-neutral-800 mb-3",children:"  "}),(()=>{const o=new Date,u=new Date(o);u.setDate(o.getDate()-o.getDay());const f=new Date(u);f.setDate(u.getDate()+6);const p=Ve.filter(y=>{const w=new Date(y.date);return w>=u&&w<=f}).map(y=>({...y,itemType:"route"})),x=Ut.filter(y=>{const w=new Date(y.date);return w>=u&&w<=f}).map(y=>({...y,itemType:"event"})),v=[...p,...x].sort((y,w)=>{const S=new Date(y.date+" "+(y.time||"00:00")),P=new Date(w.date+" "+(w.time||"00:00"));return S-P});return v.length===0?s.jsx("p",{className:"text-center text-neutral-800 py-4",children:"   "}):s.jsx("div",{className:"space-y-2",children:v.map(y=>{var w;if(y.itemType==="route"){const S=ye.find(R=>R.id===y.managerId),P=y.status==="completed";return s.jsxs("div",{onClick:()=>kr(y),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md ${P?"bg-emerald-900/30":"bg-neutral-100"}`,children:[s.jsxs("div",{className:"text-center min-w-[40px]",children:[s.jsx("p",{className:"text-xs text-neutral-800",children:new Date(y.date).toLocaleDateString("ko-KR",{weekday:"short"})}),s.jsx("p",{className:"font-bold text-[#171717]",children:y.date.slice(8)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-[#171717] text-sm break-words leading-snug",children:y.name}),s.jsxs("p",{className:"text-xs text-neutral-800",children:[y.time||"","  ",((w=y.stops)==null?void 0:w.length)||0,""]})]}),S&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white",style:{background:S.color},children:S.name})]},`r-${y.id}`)}else return s.jsxs("div",{onClick:()=>{Df(y.date),Ir({title:y.title,time:y.time,memo:y.memo||""}),oa(y.id),ai(!0)},className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md bg-purple-50",children:[s.jsxs("div",{className:"text-center min-w-[40px]",children:[s.jsx("p",{className:"text-xs text-neutral-800",children:new Date(y.date).toLocaleDateString("ko-KR",{weekday:"short"})}),s.jsx("p",{className:"font-bold text-[#171717]",children:y.date.slice(8)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-[#171717] text-sm break-words leading-snug",children:y.title}),s.jsxs("p",{className:"text-xs text-neutral-800 break-words",children:[y.time||""," ",y.memo?` ${y.memo}`:""]})]}),s.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white bg-purple-500",children:""})]},`e-${y.id}`)})})})()]})]}),A==="route"&&s.jsx("div",{children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"font-bold text-[#171717] text-xl",children:" "}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("p",{className:"text-sm text-neutral-800 font-bold",children:ii?" ":" "}),ii&&s.jsx("span",{className:"text-xs text-primary-600 bg-neutral-100 px-2 py-1 rounded",children:" "})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3",children:[s.jsx("input",{type:"text",placeholder:" (:  )",value:Sl,onChange:o=>kl(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm col-span-2"}),s.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("routeDateInput")).showPicker)==null?void 0:u.call(o)},children:s.jsx("input",{id:"routeDateInput",type:"date",value:ad,onChange:o=>ia(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full cursor-pointer"})}),s.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("routeTimeInput")).showPicker)==null?void 0:u.call(o)},children:s.jsx("input",{id:"routeTimeInput",type:"time",value:ld,onChange:o=>Cl(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full cursor-pointer"})})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.jsxs("select",{value:Mf||"",onChange:o=>as(Number(o.target.value)||null),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]})})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("div",{className:"flex justify-between items-center mb-3",children:s.jsx("p",{className:"font-bold text-neutral-800",children:" "})}),s.jsxs("div",{className:"bg-neutral-100 rounded-xl p-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex gap-2 flex-1",children:[s.jsx("input",{type:"text",placeholder:", ,  ",value:ca,onChange:o=>$f(o.target.value),onKeyPress:o=>o.key==="Enter"&&dp(),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm",style:{flex:6}}),s.jsx("input",{type:"text",placeholder:" ()",value:Wf,onChange:o=>zf(o.target.value),onKeyPress:o=>o.key==="Enter"&&dp(),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm",style:{flex:4}})]}),s.jsx("button",{onClick:dp,disabled:bv,className:"px-4 py-2 bg-neutral-200 rounded-lg font-medium hover:bg-neutral-300 transition-all text-white text-sm px-4",children:bv?"...":""})]}),Er.length>0&&s.jsxs("div",{className:"mt-2 p-2 bg-neutral-100 rounded-lg border border-primary-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("p",{className:"text-xs text-primary-600 font-bold",children:["  (",Er.length,"/10)"]}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:()=>{Pl([]),zv()},className:"text-xs text-rose-600",children:" "})})]}),s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Er.map((o,u)=>s.jsxs("div",{className:"flex items-center justify-between bg-neutral-100 rounded px-2 py-1",children:[s.jsxs("span",{className:"text-xs text-neutral-800 truncate flex-1",children:[u+1,". ",o.name]}),s.jsx("button",{onClick:()=>Tk(o.id),className:"ml-2 text-rose-600 hover:text-rose-600 text-xs",children:""})]},o.id))}),s.jsxs("button",{onClick:Rk,className:"w-full mt-2 py-2 bg-primary-500 text-white rounded-lg text-sm font-bold",children:[Er.length,"   "]})]}),s.jsx("p",{className:"text-xs text-neutral-800 mt-2",children:"       "})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("p",{className:"font-bold text-neutral-800 mb-3",children:" "}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("select",{value:Gf,onChange:o=>_v(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm",children:[s.jsx("option",{value:"",children:" "}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsx("optgroup",{label:"",children:s.jsx("option",{value:"",children:""})}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsx("input",{type:"number",placeholder:" (: 10)",value:Al,onChange:o=>zS(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm",min:"1",max:"50"})]}),s.jsx("input",{type:"text",placeholder:" /   (: , , OO)",value:Ol,onChange:o=>{wv(o.target.value),o.target.value&&_v("")},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm"}),s.jsx("button",{onClick:()=>{const o=Ol||Gf;if(!o)return alert("   ");if(!Al||Al<1)return alert("   (1~50)");const u=v=>{if(!v)return null;const y=v.split(/\s+/);for(const w of y)if((w.endsWith("")||w.endsWith("")||w.endsWith(""))&&w.length>=2&&w.length<=10)return w;return null},f=o.replace(/\(.*\)/,""),p=li.filter(v=>{if(v.regions&&v.regions[f]||u(v.address)===f)return!0;if(Ol){const w=Ol.toLowerCase(),S=(v.name||v.officeName||v.realtorName||"").toLowerCase(),P=(v.address||"").toLowerCase();if(S.includes(w)||P.includes(w))return!0}return!1}).filter(v=>!op(v,fe)).filter(v=>!Ce.some(y=>y.name===(v.realtorName||v.officeName||v.name))).sort((v,y)=>(y.listings||y.listingCount||1)-(v.listings||v.listingCount||1)).slice(0,Math.min(Number(Al),200));if(p.length===0)return alert(" /    .");const x=p.map(v=>({id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:v.realtorName||v.officeName||v.name,address:v.address||"",phone:v.cellPhone||v.phone||"",lat:null,lng:null,visited:!1,listings:v.listings||v.listingCount||1}));qt(v=>[...v,...x]),wv(""),alert(""+x.length+"   !")},disabled:!Gf&&!Ol||!Al,className:"w-full px-4 py-3 bg-neutral-900 text-white rounded-lg font-bold hover:bg-neutral-800 transition-all disabled:opacity-50",children:" "}),s.jsx("p",{className:"text-xs text-neutral-500",children:"*  ,    "})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-neutral-800",children:["  (",Ce.length,")"]}),Jf&&s.jsxs("p",{className:"text-xs text-primary-400 mt-1",children:[Jf.distance,"km  ",Jf.duration,""]})]}),s.jsxs("div",{className:"flex gap-2",children:[Ce.length>=2&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:Ak,className:"text-xs text-primary-600 font-bold",children:""}),s.jsx("button",{type:"button",onClick:Ok,className:"text-xs text-primary-600 font-bold",children:" "})]}),Ce.length>0&&s.jsx("button",{type:"button",onClick:()=>{qt([]),bd()},className:"text-xs text-rose-600",children:" "})]})]}),Ce.length===0?s.jsxs("div",{className:"text-center py-4 sm:py-6 text-neutral-800",children:[s.jsx("p",{className:"text-2xl mb-2"}),s.jsx("p",{className:"text-sm",children:"/ "})]}):s.jsx("div",{className:"space-y-0 max-h-48 overflow-y-auto",children:Ce.map((o,u)=>{const f=fe.find(x=>{var v;return x.name===o.name||x.address&&o.address&&x.address.includes((v=o.address)==null?void 0:v.split(" ").slice(0,3).join(" "))}),p=f?ye.find(x=>x.id===f.managerId):null;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-neutral-100 border border-neutral-200 rounded-lg",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-neutral-700 text-white flex items-center justify-center font-bold text-xs shadow flex-shrink-0",children:u+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[s.jsx("p",{className:"font-bold text-[#171717] text-sm break-words",children:o.name}),p&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded text-white font-bold",style:{backgroundColor:p.color},children:p.name})]}),o.address&&s.jsx("p",{className:"text-xs text-neutral-800 break-words",children:o.address}),o.phone&&s.jsx("p",{className:"text-xs text-neutral-500",children:o.phone})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[u>0&&s.jsx("button",{type:"button",onClick:()=>Bv(u,-1),className:"w-6 h-6 rounded bg-neutral-200 text-neutral-800 text-xs",children:""}),u<Ce.length-1&&s.jsx("button",{type:"button",onClick:()=>Bv(u,1),className:"w-6 h-6 rounded bg-neutral-200 text-neutral-800 text-xs",children:""}),s.jsx("button",{type:"button",onClick:()=>Pk(o.id),className:"w-6 h-6 rounded bg-rose-100 text-rose-600 text-xs",children:""})]})]}),u<Ce.length-1&&s.jsx("div",{className:"flex items-center pl-3 py-0.5",children:s.jsx("span",{className:"text-primary-600 text-sm",children:""})})]},o.id)})}),(Ce.length>0||ii)&&s.jsx("div",{className:"mt-3 pt-3 border-t border-neutral-200",children:ii?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Lk,className:"flex-1 px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all py-3 font-bold",children:""}),s.jsx("button",{type:"button",onClick:Yv,className:"flex-1 px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all py-3 font-bold",children:" "})]}):s.jsx("button",{type:"button",onClick:Yv,className:"w-full px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all py-3 font-bold",children:" "})})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl overflow-hidden",children:[s.jsx("div",{className:"p-3 border-b border-neutral-200",children:Ce.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Qv(aa-1),disabled:aa<=0,className:"w-8 h-8 rounded bg-neutral-200 text-neutral-800 disabled:opacity-30",children:""}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"flex gap-2 transition-transform",style:{transform:`translateX(-${aa*100}%)`},children:Ce.map((o,u)=>s.jsxs("button",{onClick:()=>Fk(o,u),className:`flex-shrink-0 w-full px-3 py-2 rounded-lg text-sm font-bold transition-all ${aa===u?"bg-neutral-100 text-white":"bg-gray-100 text-neutral-800"}`,children:[u+1,". ",o.name]},o.id))})}),s.jsx("button",{type:"button",onClick:()=>Qv(aa+1),disabled:aa>=Ce.length-1,className:"w-8 h-8 rounded bg-neutral-200 text-neutral-800 disabled:opacity-30",children:""})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{ref:Yf,className:"route-map-container",style:{height:"400px",minHeight:"400px",width:"100%"}}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2 z-10",children:[s.jsx("button",{onClick:Ik,className:`w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all ${pd?"bg-primary-500 text-white":"bg-neutral-200 text-neutral-800"}`,title:pd?"GPS ":"GPS "}),pd&&md&&s.jsx("button",{onClick:Ek,className:"w-10 h-10 rounded-full bg-neutral-200 shadow-lg flex items-center justify-center text-primary-600",title:"  "})]})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("p",{className:"font-bold text-neutral-800",children:" "}),Ve.length>0&&s.jsx("div",{className:"flex gap-2",children:Yc?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{if(ni.length===0)return alert("  .");confirm(`${ni.length}  ?`)&&(ni.forEach(o=>Pv(o)),Qc([]),Nf(!1),alert("  ."))},className:"px-3 py-1 bg-neutral-200 text-white rounded text-xs font-bold",children:[ni.length," "]}),s.jsx("button",{onClick:()=>{Nf(!1),Qc([])},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-xs font-bold",children:""})]}):s.jsx("button",{onClick:()=>Nf(!0),className:"px-3 py-1 bg-rose-100 text-rose-600 rounded text-xs font-bold",children:" "})})]}),Ve.length===0?s.jsx("div",{className:"text-center py-4 sm:py-6 text-neutral-800",children:s.jsx("p",{className:"text-sm",children:"  "})}):s.jsx("div",{className:"space-y-2",children:(()=>{const o=Ve.reduce((f,p)=>{var v;const x=((v=p.date)==null?void 0:v.slice(0,7))||"";return f[x]||(f[x]=[]),f[x].push(p),f},{});return Object.keys(o).sort((f,p)=>p.localeCompare(f)).map(f=>{const p=o[f].sort((y,w)=>new Date(w.date)-new Date(y.date)),x=bS[f]??!1,v=p.filter(y=>y.status==="completed").length;return s.jsxs("div",{className:"border border-neutral-200 rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>_S(y=>({...y,[f]:!y[f]})),className:"w-full px-4 py-3 bg-neutral-50 flex items-center justify-between hover:bg-neutral-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-bold text-[#171717]",children:f}),s.jsxs("span",{className:"text-xs text-neutral-500",children:[p.length," "]}),s.jsxs("span",{className:"text-xs text-emerald-600",children:[v," "]})]}),s.jsx("span",{className:"text-neutral-400",children:x?"":""})]}),x&&s.jsx("div",{className:"p-2 space-y-2 bg-white",children:p.map(y=>{const w=ye.find(D=>D.id===y.managerId),S=(y.stops||[]).filter(D=>D.visited).length,P=(y.stops||[]).length,R=y.status==="completed",O=ni.includes(y.id);return s.jsxs("div",{className:`p-3 rounded-lg ${R?"bg-emerald-50":"bg-neutral-50"} ${Yc&&O?"ring-2 ring-rose-400":""}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[Yc&&s.jsx("input",{type:"checkbox",checked:O,onChange:D=>{D.target.checked?Qc([...ni,y.id]):Qc(ni.filter(B=>B!==y.id))},className:"w-5 h-5 mt-1 accent-rose-500"}),s.jsx("div",{className:`w-9 h-9 rounded-lg text-white flex items-center justify-center font-bold text-sm flex-shrink-0 ${R?"bg-emerald-500":"bg-neutral-400"}`,children:R?"":""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-[#171717] text-sm break-words leading-snug",children:y.name||y.date}),s.jsxs("p",{className:"text-xs text-neutral-600",children:[y.date," ",y.time||"","  ",S,"/",P,""]}),w&&s.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-bold text-white",style:{background:w.color},children:w.name})]})]}),!Yc&&s.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-neutral-200",children:[s.jsx("button",{type:"button",onClick:()=>qv(y),className:"px-3 py-1 bg-white border border-neutral-200 rounded text-xs text-neutral-700 font-medium",children:""}),s.jsx("button",{type:"button",onClick:()=>kr(y),className:"px-3 py-1 bg-white border border-neutral-200 rounded text-xs text-neutral-700 font-medium",children:""}),s.jsx("button",{onClick:()=>Mk(y),className:"px-3 py-1 bg-white border border-neutral-200 rounded text-xs text-neutral-700 font-medium",children:""}),!R&&s.jsx("button",{onClick:()=>Dk(y),className:"px-3 py-1 bg-emerald-100 rounded text-xs text-emerald-700 font-medium",children:""}),s.jsx("button",{onClick:()=>la({type:"route",id:y.id,name:y.name||y.date}),className:"px-3 py-1 bg-rose-100 rounded text-xs text-rose-600 font-medium",children:""})]})]},y.id)})})]},f)})})()})]})]})}),A==="map"&&s.jsx("div",{children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-3 mb-4",children:[s.jsx("p",{className:"text-amber-800 font-bold text-sm mb-2",children:"  "}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[s.jsxs("span",{className:"text-neutral-800",children:[" : ",s.jsx("b",{children:fe.length})]}),s.jsxs("span",{className:"text-emerald-600",children:[" : ",s.jsx("b",{children:fe.filter(o=>o.lat&&o.lng).length})]}),s.jsxs("span",{className:"text-neutral-800 cursor-pointer hover:text-primary-600",onClick:()=>fe.filter(o=>!o.lat||!o.lng).length>0&&Hc(!0),children:[": ",s.jsx("b",{className:"underline",children:fe.filter(o=>!o.lat||!o.lng).length})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[s.jsxs("select",{value:oi,onChange:o=>Sv(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm",children:[s.jsx("option",{value:"all",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsxs("select",{value:ci,onChange:o=>kv(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm",children:[s.jsx("option",{value:"all",children:" "}),s.jsx("option",{value:"special",children:""}),s.jsx("option",{value:"positive",children:""}),s.jsx("option",{value:"neutral",children:""}),s.jsx("option",{value:"negative",children:""}),s.jsx("option",{value:"missed",children:""})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"/  (: , )",value:Xf,onChange:o=>YS(o.target.value),onKeyPress:o=>o.key==="Enter"&&$v(),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all flex-1 text-sm"}),s.jsx("button",{type:"button",onClick:$v,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all text-sm"})]}),s.jsxs("div",{className:"border-t border-neutral-200 mt-4 pt-4",children:[s.jsx("p",{className:"text-sm text-neutral-800 mb-2 font-bold",children:"  "}),s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-600 special-blink"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-400"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"})," "]})]}),s.jsx("p",{className:"text-xs text-neutral-800 mt-2",children:"      "})]})]}),s.jsx("div",{className:"bg-white border border-neutral-200 rounded-2xl overflow-hidden",style:{height:"calc(100vh - 200px)",minHeight:"500px"},children:s.jsx("div",{ref:rd,className:"map-container",style:{height:"100%",width:"100%"}})})]})}),A==="managers"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"font-bold text-[#171717] text-xl",children:" "}),s.jsx("button",{type:"button",onClick:()=>Kc(!0),className:"px-4 py-2 bg-neutral-900 text-white rounded-lg text-sm font-medium hover:bg-neutral-800",children:" "})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ye.map(o=>{const u=fe.filter(E=>E.managerId===o.id),f=Yk(o.id),p=$n||(n==null?void 0:n.managerId)===o.id,x=u.filter(E=>E.reaction==="special"),v=u.filter(E=>E.reaction==="positive"),y=u.filter(E=>E.reaction==="neutral"),w=u.filter(E=>E.reaction==="negative"),S=new Date,R=u.filter(E=>E.reaction==="positive"||E.reaction==="special").map(E=>{const M=E.lastVisitDate?new Date(E.lastVisitDate):E.createdAt?new Date(E.createdAt):null,le=M?Math.floor((S-M)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(le)?0:le,dateType:E.lastVisitDate?"":""}}).filter(E=>E.daysPassed>=7).sort((E,M)=>M.daysPassed-E.daysPassed),O=u.filter(E=>E.reaction==="missed").map(E=>{const M=E.createdAt?new Date(E.createdAt):null,le=M?Math.floor((S-M)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(le)?0:le}}).sort((E,M)=>M.daysPassed-E.daysPassed),D=ms(),B=Ut.filter(E=>E.date===D&&E.managerId===o.id),Q=Ve.filter(E=>E.date===D&&E.managerId===o.id),k=tm(),de=new Date(k.year,k.month,k.day-k.dayOfWeek),F=new Date(k.year,k.month,k.day+(6-k.dayOfWeek)),H=E=>{const M=E.getFullYear(),le=String(E.getMonth()+1).padStart(2,"0"),ee=String(E.getDate()).padStart(2,"0");return`${M}-${le}-${ee}`},G=Ut.filter(E=>E.managerId===o.id&&E.date>=H(de)&&E.date<=H(F)&&E.date!==D),z=Ve.filter(E=>E.managerId===o.id&&E.date>=H(de)&&E.date<=H(F)&&E.date!==D);return s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4",children:[s.jsx("div",{className:"px-3 py-2 rounded-lg text-white font-bold text-sm",style:{background:o.color},children:o.name}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:o.name}),s.jsxs("p",{className:"text-sm text-neutral-800",children:[" ",u.length,""]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:[f.toLocaleString(),s.jsx("span",{className:"text-sm font-normal",children:""})]}),p&&s.jsx("button",{onClick:()=>qc({managerId:o.id,managerName:o.name,currentSales:f}),className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs font-bold hover:bg-emerald-200",children:""})]})})]}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-4 mb-4",children:[s.jsx("p",{className:"font-bold text-neutral-800 text-sm mb-3",children:" "}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"bg-neutral-100 rounded-lg p-2 text-center border border-red-200",children:[s.jsx("p",{className:"text-lg font-bold text-rose-600",children:x.length}),s.jsx("p",{className:"text-xs text-red-400",children:""})]}),s.jsxs("div",{className:"bg-neutral-100 rounded-lg p-2 text-center border border-green-200",children:[s.jsx("p",{className:"text-lg font-bold text-emerald-600",children:v.length}),s.jsx("p",{className:"text-xs text-green-400",children:""})]}),s.jsxs("div",{className:"bg-neutral-100 rounded-lg p-2 text-center border border-neutral-200",children:[s.jsx("p",{className:"text-lg font-bold text-orange-500",children:y.length}),s.jsx("p",{className:"text-xs text-orange-400",children:""})]}),s.jsxs("div",{className:"bg-neutral-100 rounded-lg p-2 text-center border border-neutral-200",children:[s.jsx("p",{className:"text-lg font-bold text-neutral-800",children:w.length}),s.jsx("p",{className:"text-xs text-neutral-800",children:""})]})]})]}),(B.length>0||Q.length>0)&&s.jsxs("div",{className:"bg-neutral-100 border border-neutral-200 rounded-xl p-3 mb-4",children:[s.jsx("p",{className:"font-bold text-primary-600 text-sm mb-2",children:" "}),s.jsxs("div",{className:"space-y-1",children:[Q.map(E=>{var M;return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-primary-600"}),s.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.name," (",((M=E.stops)==null?void 0:M.length)||0,")"]})]},E.id)}),B.map(E=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-primary-600"}),s.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.title]})]},E.id))]})]}),R.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-rose-900/30 border border-rose-200 rounded-xl p-3 mb-2",children:[s.jsxs("span",{className:"font-bold text-rose-700 text-sm",children:["  (",R.length,")"]}),s.jsx("span",{className:"text-xs text-rose-600 ml-2",children:"   7 "})]}),s.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[R.slice(0,10).map(E=>s.jsxs("div",{className:"flex items-center justify-between bg-neutral-100 p-2 rounded-lg border border-rose-200 cursor-pointer hover:bg-rose-900/30",onClick:()=>{ft(E)},children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${E.reaction==="special"?"bg-rose-600":"bg-emerald-500"}`}),s.jsx("span",{className:"font-bold text-[#171717] text-sm truncate",children:E.name})]}),s.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[s.jsxs("span",{className:"text-xs text-rose-600 font-bold",children:[E.daysPassed,""]}),s.jsxs("span",{className:"text-xs text-rose-600 ml-1",children:["(",E.dateType,")"]})]})]},E.id)),R.length>10&&s.jsxs("p",{className:"text-xs text-rose-600 text-center",children:["+",R.length-10,""]})]})]}),O.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 mb-2",children:[s.jsxs("span",{className:"font-bold text-amber-600 text-sm",children:["  (",O.length,")"]}),s.jsx("span",{className:"text-xs text-yellow-500 ml-2",children:"  "})]}),s.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[O.slice(0,10).map(E=>s.jsxs("div",{className:"flex items-center justify-between bg-neutral-100 p-2 rounded-lg border border-amber-200 cursor-pointer hover:bg-amber-900/30",onClick:()=>{ft(E)},children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 bg-yellow-500"}),s.jsx("span",{className:"font-bold text-[#171717] text-sm truncate",children:E.name})]}),s.jsxs("span",{className:"text-xs text-amber-600 flex-shrink-0 ml-2",children:[E.daysPassed,""]})]},E.id)),O.length>10&&s.jsxs("p",{className:"text-xs text-yellow-400 text-center",children:["+",O.length-10,""]})]})]}),(G.length>0||z.length>0)&&s.jsxs("details",{className:"mb-4",children:[s.jsxs("summary",{className:"bg-neutral-100 border border-primary-300 rounded-xl p-3 cursor-pointer",children:[s.jsxs("span",{className:"font-bold text-primary-600 text-sm",children:["   (",G.length+z.length,")"]}),s.jsx("span",{className:"text-xs text-primary-600 ml-2",children:" "})]}),s.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:[...z.map(E=>({...E,type:"route"})),...G.map(E=>({...E,type:"event"}))].sort((E,M)=>E.date.localeCompare(M.date)||(E.time||"").localeCompare(M.time||"")).map((E,M)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm bg-neutral-100 p-2 rounded-lg border border-primary-200",children:[s.jsx("span",{className:"text-primary-600",children:(E.type==="route","")}),s.jsx("span",{className:"text-xs text-blue-400 font-bold",children:E.date.slice(5)}),s.jsxs("span",{className:"text-blue-800 truncate",children:[E.time||""," ",E.type==="route"?E.name:E.title]})]},M))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-neutral-100 rounded-xl p-3 mb-2",children:[s.jsx("span",{className:"font-bold text-neutral-800 text-sm",children:" "}),p&&s.jsx("button",{type:"button",onClick:()=>{Vc(o),Pf({:!1,:!1,:!1,:!1})},className:"ml-3 px-3 py-1 bg-rose-500 rounded-lg font-bold text-xs text-white",children:s.jsx("span",{className:"blink-text",children:""})})]}),s.jsx("div",{className:"bg-neutral-100 rounded-xl p-4",children:s.jsx("div",{className:"grid grid-cols-4 gap-2",children:Qw.map(E=>{var M,le;return s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-neutral-800 mb-1",children:E}),p?s.jsx("input",{type:"number",value:((M=o.promo)==null?void 0:M[E])||0,onChange:ee=>Xk(o.id,E,ee.target.value),className:"w-full text-center p-2 border rounded-lg text-sm font-bold bg-white text-slate-900"}):s.jsx("p",{className:"font-bold text-[#171717]",children:((le=o.promo)==null?void 0:le[E])||0})]},E)})})})]})]},o.id)})})]}),A==="sales"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-neutral-800 rounded-xl p-4 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-10 h-10 object-contain"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-lg",children:"BEANCRAFT"}),s.jsx("p",{className:"text-blue-200 text-xs",children:"   "})]})]}),s.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white text-blue-600 rounded-lg font-bold text-sm hover:bg-blue-50 transition-all flex items-center gap-2",children:" "})]})}),(()=>{const o=f=>f?ge.find(x=>{var v,y,w;return((v=x.region)==null?void 0:v.includes(f))||((y=x.title)==null?void 0:y.includes(f))||((w=x.content)==null?void 0:w.includes(f))}):null,u=f=>{const p=li.filter(v=>{var y;return(y=v.address)==null?void 0:y.includes(f)}),x=fe.filter(v=>{var y;return(y=v.address)==null?void 0:y.includes(f)});return{realtorCount:p.length,companyCount:x.length,totalListings:p.reduce((v,y)=>v+(y.listings||0),0)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-3 flex items-center gap-2",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:of,onChange:f=>z0(f.target.value),placeholder:"  (: , , )",className:"flex-1 px-4 py-3 rounded-lg bg-neutral-100 border border-neutral-200 text-[#171717] placeholder-slate-400 focus:outline-none focus:border-blue-500"}),s.jsx("button",{onClick:()=>{of.trim()&&(B0(of.trim()),cf(!0))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["","","","","","","",""].map(f=>s.jsx("button",{onClick:()=>{z0(f),B0(f),cf(!0)},className:"px-3 py-1.5 bg-neutral-100 text-neutral-700 rounded-full text-sm hover:bg-neutral-200 transition-all",children:f},f))})]}),iS&&gl&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"font-bold text-[#171717] text-lg flex items-center gap-2",children:[gl,"  "]}),s.jsx("button",{onClick:()=>cf(!1),className:"text-neutral-500 hover:text-neutral-800",children:""})]}),(()=>{const f=u(gl);return s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-400",children:f.realtorCount}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:f.companyCount}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:f.totalListings.toLocaleString()}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]})]})})(),(()=>{const f=o(gl);if(f)return s.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:" "}),s.jsx("p",{className:"text-neutral-800 font-medium mb-1",children:f.title}),s.jsx("p",{className:"text-sm text-neutral-700",children:f.content}),f.source&&s.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:[": ",f.source]})]});{const x={:" 2,596  .   14.1%.   .",:",   .   .",:"//  .    .",:"IT  .    .   .",:"    .    .",:" .    .    .",:" .   . /   .",:"   2.    ."}[gl]||"      .      .";return s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:" "}),s.jsx("p",{className:"text-sm text-neutral-700",children:x})]})}})()]})]})})(),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4 flex items-center gap-2 text-lg",children:" vs   "}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("th",{className:"py-3 px-2 text-left text-neutral-500 font-medium",children:""}),s.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),s.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),s.jsxs("tbody",{className:"text-neutral-700",children:[s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"border-b border-neutral-200",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"1/15 "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"bg-neutral-100/30",children:[s.jsx("td",{className:"py-3 px-2 font-bold text-white",children:"  (5)"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-400 font-bold",children:"1,500~4,500+"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-400 font-bold",children:"1,800+"})]})]})]})}),s.jsxs("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[s.jsx("p",{className:"text-sm text-emerald-400 font-semibold mb-1",children:"  "}),s.jsxs("p",{className:"text-sm text-neutral-700",children:["/ 0 5 ",s.jsx("span",{className:"text-emerald-400 font-bold",children:" 900~3,000"})," . //   ."]})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4 flex items-center gap-2 text-lg",children:"  "}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-4",children:[s.jsx("div",{className:"flex items-center gap-3 mb-3",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-400",children:" "}),s.jsx("p",{className:"text-xs text-neutral-500",children:"   "})]})}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-1",children:[s.jsx("li",{children:" /  "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-emerald-400",children:""}),s.jsx("p",{className:"text-xs text-neutral-500",children:"  "})]})]}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-yellow-400",children:"/"}),s.jsx("p",{className:"text-xs text-neutral-500",children:"  "})]})]}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-1",children:[s.jsx("li",{children:"   ~"}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-purple-400",children:"/"}),s.jsx("p",{className:"text-xs text-neutral-500",children:"  "})]})]}),s.jsxs("ul",{className:"text-sm text-neutral-700 space-y-1",children:[s.jsx("li",{children:"   "}),s.jsx("li",{children:" //  "}),s.jsx("li",{children:"   "})]})]})]})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-3 flex items-center gap-2 text-lg",children:"  "}),(()=>{const o={};li.forEach(f=>{const p=f.address||"";let x="";p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")&&(x=""),o[x]||(o[x]={count:0,listings:0}),o[x].count++,o[x].listings+=f.listings||0});const u=Object.entries(o).filter(([f])=>f!=="").sort((f,p)=>p[1].count-f[1].count);return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-400",children:li.length.toLocaleString()}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"bg-emerald-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:fe.length}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u.length}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]}),s.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-400",children:li.reduce((f,p)=>f+(p.listings||0),0).toLocaleString()}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-xs text-neutral-500 mb-2",children:"  "}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.slice(0,10).map(([f,p])=>s.jsxs("div",{className:"px-3 py-2 bg-neutral-50 rounded-lg",children:[s.jsx("span",{className:"text-neutral-800 font-medium",children:f}),s.jsxs("span",{className:"text-neutral-500 text-sm ml-2",children:[p.count,""]})]},f))})]})]})})()]}),s.jsxs("div",{className:"bg-neutral-100 border border-neutral-200 rounded-xl p-6 text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" ,  "}),s.jsx("p",{className:"text-neutral-700 mb-4",children:"  "}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:""}),s.jsx("a",{href:"tel:1533-4875",className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-all",children:"1533-4875"})]})]})]}),A==="realtors"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"font-bold text-[#171717] text-xl",children:" "}),(()=>{const o=k=>k.listingCount?k.listingCount:k.listings?k.listings:k.articleCounts&&k.articleCounts.total?k.articleCounts.total:0,u=k=>k.name&&(k.name.includes("")||k.name.includes("")||k.name.includes(""))?k.name:k.officeName?k.officeName:k.realtorName?k.realtorName:k.name||"( )",f=k=>k.agentName||k.agent||"",p=k=>k.agentPosition||"",x=k=>{if(!k)return"";if(k.includes("T")){const F=new Date(k);if(!isNaN(F.getTime()))return F.toLocaleDateString("ko-KR")}const de=k.match(/(\d{4})\.\s*(\d{1,2})\.\s*(\d{1,2})/);if(de){const[,F,H,G]=de;return`${F}. ${H}. ${G}.`}return k},v=["","","","","","","","","","","","","","","","",""],y={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},w=k=>{if(!k)return{city:"",district:""};const de=["","","","","","","","","","","","","","","","","","","","","","","","",""],F={:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","",""],:["","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["",""]},H=[{pattern:/(|)?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/(|)?/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?(|)?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/(|)?/,city:""}];let G="";for(const{pattern:M,city:le}of H)if(M.test(k)){G=le;break}let z="";const E=k.match(/([-]{1,4})(|)/);if(E){const M=E[1]+E[2];!M.includes("")&&!M.includes("")&&M.length<=5&&(z=M)}if(z===""&&G===""){for(const M of de)if(new RegExp(`${M}(?!\\S*)\\s|${M}(?!\\S*)$|\\s${M}\\s`).test(k)||k.includes(M+" ")||k.includes(M+"")){z=M+"";break}}if(G===""){const M=k.match(/([-]{2,4})(?![])/);if(M){const le=M[1];for(const[ee,dn]of Object.entries(F))if(dn.includes(le)){G=ee,z===""&&(z=le+"");break}}}if(z===""){const M=k.match(/([-]{2,4})(?![])/);M&&(z=M[1]+"")}if(G===""&&z!==""&&z.endsWith("")){const M=z.replace("","");de.includes(M)&&(G="")}return{city:G,district:z}},S=li.filter(k=>{const de=u(k),F=de.includes("")||de.includes("")||de.includes(""),H=k.address&&k.address.length>5;return F||H}),P=k=>k.replace(/\s+/g,"").replace(/[^\w-]/g,"").toLowerCase(),R=new Map,O=S.filter(k=>{const de=u(k).trim(),F=P(de),{city:H,district:G}=w(k.address),z=`${F}-${H}-${G}`;if(R.has(z)){const E=R.get(z);return o(k)>o(E.data)?(S[E.index]=null,R.set(z,{data:k,index:S.indexOf(k)}),!0):!1}return R.set(z,{data:k,index:S.indexOf(k)}),!0}).filter(k=>k!==null);fe.forEach(k=>{lp(k,O).isDuplicate||O.push({id:`company-${k.id}`,name:k.name,address:k.address,phone:k.phone,cellPhone:k.phone,listings:0,isFromCompany:!0,managerId:k.managerId,collected_at:k.createdAt,agentName:k.contact||"",memo:k.memo||"",reaction:k.reaction||"",lat:k.lat,lng:k.lng,companyId:k.id})});const D={};O.forEach(k=>{const{city:de,district:F}=w(k.address);de!==""&&(D[de]||(D[de]=new Set),F!==""&&D[de].add(F))});const B=v.filter(k=>D[k]);O.reduce((k,de)=>k+o(de),0);const Q=O.length>0&&O.some(k=>k.collected_at)?new Date(Math.max(...O.filter(k=>k.collected_at).map(k=>new Date(k.collected_at).getTime()))):null;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-teal-600",children:BS?" ...":O.length}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]}),Q&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg font-bold text-neutral-700",children:Q.toLocaleDateString("ko-KR")}),s.jsx("p",{className:"text-xs text-neutral-500",children:" "})]})]})}),s.jsx("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsx("input",{type:"text",placeholder:"()   ...",value:Vf,onChange:k=>US(k.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all flex-1 min-w-[150px]"}),s.jsxs("select",{value:Hf,onChange:k=>$S(k.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all",children:[s.jsx("option",{value:"",children:" "}),B.map(k=>s.jsx("optgroup",{label:`${y[k]||k}`,children:[...D[k]].sort().map(de=>s.jsx("option",{value:`${k}|${de}`,children:de},`${k}-${de}`))},k))]}),s.jsxs("select",{value:hd,onChange:k=>WS(k.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all",children:[s.jsx("option",{value:"listings",children:"  "}),s.jsx("option",{value:"recent",children:"  "}),s.jsx("option",{value:"name",children:" "}),s.jsx("option",{value:"unvisited",children:" "})]})]})}),O.length===0?s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-8 text-center text-neutral-500",children:[s.jsx("p",{className:"text-4xl mb-2"}),s.jsx("p",{children:"  "}),s.jsx("p",{className:"text-xs mt-2",children:"Chrome   "})]}):s.jsx("div",{className:"space-y-3",children:(()=>{let k=[...O];if(Vf){const z=Vf.trim().replace(/$/,"").toLowerCase();k=k.filter(E=>{const M=(E.address||"").toLowerCase(),le=u(E).toLowerCase(),ee=f(E).toLowerCase();return M.includes(z)||le.includes(z)||ee.includes(z)})}if(Hf){const[H,G]=Hf.split("|");k=k.filter(z=>{const{city:E,district:M}=w(z.address);return H&&G?E===H&&M===G:!1})}hd==="recent"?k.sort((H,G)=>new Date(G.collected_at||0)-new Date(H.collected_at||0)):hd==="name"?k.sort((H,G)=>u(H).localeCompare(u(G))):hd==="unvisited"?k.sort((H,G)=>{const z=op(H,fe)?1:0,E=op(G,fe)?1:0;return z-E}):k.sort((H,G)=>o(G)-o(H));const de={};k.forEach(H=>{const{city:G,district:z}=w(H.address);G!==""&&(de[G]||(de[G]={}),de[G][z]||(de[G][z]=[]),de[G][z].push(H))});const F=v.filter(H=>de[H]);return F.length===0?s.jsx("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 text-center text-neutral-500",children:"  "}):F.map(H=>{const G=de[H],z=Object.values(G).flat().length,E=Object.keys(G).sort();return s.jsxs("details",{className:"bg-white border border-neutral-200 rounded-2xl overflow-hidden",open:F.length===1,children:[s.jsxs("summary",{className:"p-4 cursor-pointer hover:bg-neutral-100 flex justify-between items-center font-bold text-neutral-800 bg-white",children:[s.jsxs("span",{children:[y[H]||H," (",z,")"]}),s.jsxs("span",{className:"text-xs text-neutral-500",children:[E.length," /"]})]}),s.jsx("div",{className:"border-t border-neutral-200",children:E.map(M=>{const le=G[M];return s.jsxs("details",{className:"border-b border-neutral-200",children:[s.jsx("summary",{className:"p-3 pl-6 cursor-pointer hover:bg-neutral-100 flex justify-between items-center text-neutral-700",children:s.jsxs("span",{className:"font-bold",children:[M," (",le.length,")"]})}),s.jsxs("div",{className:"max-h-80 overflow-y-auto bg-neutral-50",children:[le.map((ee,dn)=>{const Pe=u(ee),$t=o(ee),hs=lp(ee,fe),Mr=hs.isDuplicate||ee.isFromCompany,Fl=hs.matchedCompany,fi=ee.isFromCompany?ye.find(ue=>ue.id===ee.managerId):Fl?ye.find(ue=>ue.id===Fl.managerId):null,K=Ce.some(ue=>ue.name===Pe);return s.jsxs("div",{className:`p-3 pl-8 border-b border-slate-800 cursor-pointer hover:bg-white ${K?"bg-teal-900/20":Mr?"bg-green-900/20":""}`,onClick:()=>_l({...ee,officeName:Pe,listingCount:$t,agentName:ee.isFromCompany?ee.agentName:f(ee),agentPosition:p(ee),isRegistered:Mr,isInRoute:K,assignedManager:fi,matchedCompany:Fl,collectedDate:ee.collected_at?x(ee.collected_at):""}),children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-bold text-[#171717] text-sm",children:Pe}),s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900 text-teal-300 font-bold",children:[$t,""]}),K&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-900 text-purple-300",children:""}),Mr&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900 text-green-300",children:""}),fi?s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:fi.color},children:fi.name}):s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-neutral-200 text-neutral-700 font-bold",children:""})]}),s.jsx("span",{className:"text-neutral-500 text-sm",children:""})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:ee.address||" "})]},ee.id||dn)}),le.length>50&&s.jsxs("p",{className:"text-center text-xs text-neutral-500 py-2",children:["... ",le.length-50,""]})]})]},M)})})]},H)})})()})]})})()]}),A==="companies"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-1 lg:order-2",children:s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200 sticky top-20",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"font-bold text-[#171717]",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:Sf,onChange:Nk,className:"hidden"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:av,onChange:jk,className:"hidden"}),s.jsx("button",{onClick:()=>Bc(!sv),className:"px-3 py-1 rounded-full border border-neutral-200 text-xs text-neutral-700 hover:border-slate-500",children:"+  "}),sv&&s.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-neutral-200 rounded-lg shadow-lg z-50 min-w-[120px]",children:[s.jsx("button",{onClick:()=>{Bc(!1),setTimeout(()=>{var o;return(o=Sf.current)==null?void 0:o.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-neutral-700 hover:bg-neutral-100 border-b border-neutral-200",children:" "}),s.jsx("button",{onClick:()=>{Bc(!1),setTimeout(()=>{var o;return(o=av.current)==null?void 0:o.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-neutral-700 hover:bg-neutral-100 border-b border-neutral-200",children:" "}),s.jsx("button",{onClick:()=>{zc(!0),Bc(!1)},className:"w-full px-3 py-2 text-left text-xs text-neutral-700 hover:bg-neutral-100",children:" "})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",placeholder:"",value:ae.name,onChange:o=>at({...ae,name:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:ae.contact,onChange:o=>at({...ae,contact:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:ae.phone,onChange:o=>at({...ae,phone:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:ae.address,onChange:o=>at({...ae,address:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),$n?s.jsxs("select",{value:ae.managerId||"",onChange:o=>at({...ae,managerId:Number(o.target.value)||null}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm w-full",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}):s.jsxs("div",{className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm flex items-center text-neutral-500",children:[(n==null?void 0:n.name)||""," ()"]}),s.jsx("input",{type:"text",placeholder:"",value:ae.memo,onChange:o=>at({...ae,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:Object.entries(gt).map(([o,u])=>s.jsx("button",{onClick:()=>at({...ae,reaction:o}),className:`px-2 py-1 rounded-full text-xs text-white transition-all ${ae.reaction===o?"ring-1 ring-offset-1 ring-white":"opacity-50"}`,style:{background:u.bg},children:u.label},o))}),s.jsxs("label",{className:"flex items-center gap-2 mt-3 text-xs text-neutral-500 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ae.isReregistered||!1,onChange:o=>at({...ae,isReregistered:o.target.checked}),className:"w-3 h-3 rounded"})," (  )"]}),s.jsx("button",{type:"button",onClick:ty,className:"w-full mt-3 py-2 rounded-full border border-neutral-200 text-neutral-700 text-sm hover:border-slate-500",children:""})]})}),s.jsx("div",{className:"lg:col-span-2 lg:order-1",children:s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("div",{className:"flex justify-between items-center mb-3",children:s.jsxs("h3",{className:"font-bold text-[#171717]",children:["  (",us.length,")"]})}),(()=>{const o={special:us.filter(u=>u.reaction==="special").length,positive:us.filter(u=>u.reaction==="positive").length,neutral:us.filter(u=>u.reaction==="neutral").length,negative:us.filter(u=>u.reaction==="negative").length};return s.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-2 rounded-xl border border-neutral-200",children:[s.jsx("p",{className:"text-lg font-bold text-rose-400",children:o.special}),s.jsx("p",{className:"text-xs text-neutral-500",children:""})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl border border-neutral-200",children:[s.jsx("p",{className:"text-lg font-bold text-emerald-400",children:o.positive}),s.jsx("p",{className:"text-xs text-neutral-500",children:""})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl border border-neutral-200",children:[s.jsx("p",{className:"text-lg font-bold text-orange-400",children:o.neutral}),s.jsx("p",{className:"text-xs text-neutral-500",children:""})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl border border-neutral-200",children:[s.jsx("p",{className:"text-lg font-bold text-neutral-500",children:o.negative}),s.jsx("p",{className:"text-xs text-neutral-500",children:""})]})]})})(),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.jsx("input",{type:"text",placeholder:" ",value:tp,onChange:o=>QS(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm"}),s.jsxs("select",{value:np,onChange:o=>XS(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm",children:[s.jsx("option",{value:"all",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsxs("select",{value:Ml,onChange:o=>JS(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm",children:[s.jsx("option",{value:"all",children:" "}),Object.entries(gt).map(([o,u])=>s.jsx("option",{value:o,children:u.label},o))]})]}),ye.filter(o=>np==="all"||o.id===Number(np)).map(o=>{let u=us.filter(v=>v.managerId===o.id);if(Ml!=="all"&&(u=u.filter(v=>v.reaction===Ml)),u.length===0)return null;const f=["special","positive","neutral","negative","missed"],p={};f.forEach(v=>{const y=u.filter(w=>w.reaction===v);y.length>0&&(p[v]=y)});const x=v=>{if(!v)return" ";const y=v.match(/(||||||||||||||||)[^\s]*\s*([^\s]+[])/);if(y)return y[2];const w=v.match(/([^\s]+[])/);return w?w[1]:""};return s.jsxs("details",{className:"mb-4",children:[s.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl cursor-pointer",style:{background:`${o.color}15`},children:[s.jsx("div",{className:"w-5 h-5 rounded-full",style:{background:o.color}}),s.jsx("span",{className:"font-bold text-neutral-800 text-lg",children:o.name}),s.jsxs("span",{className:"text-sm text-neutral-800",children:["(",u.length,")"]})]}),s.jsx("div",{className:"mt-2 ml-2",children:f.map(v=>{const y=p[v];if(!y)return null;const w=gt[v],S={};return y.forEach(P=>{const R=x(P.address);S[R]||(S[R]=[]),S[R].push(P)}),s.jsxs("details",{className:"mb-3",children:[s.jsxs("summary",{className:"flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer",style:{background:`${w.bg}20`},children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:w.bg}}),s.jsx("span",{className:"font-bold text-sm",style:{color:w.bg},children:w.label}),s.jsxs("span",{className:"text-xs text-neutral-800",children:["(",y.length,")"]})]}),s.jsx("div",{className:"mt-2 ml-3",children:Object.entries(S).map(([P,R])=>s.jsxs("details",{className:"mb-2",children:[s.jsxs("summary",{className:"text-xs text-neutral-800 font-bold px-2 py-1 cursor-pointer hover:bg-neutral-100 rounded",children:[P," (",R.length,")"]}),s.jsx("div",{className:"space-y-1 mt-1 ml-2",children:R.map(O=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-100 rounded-lg border border-neutral-200 cursor-pointer hover:bg-neutral-100",onClick:()=>ft({...O}),children:[s.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:s.jsx("span",{className:"font-bold text-[#171717] text-sm truncate",children:O.name})}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),ft({...O})},className:"text-neutral-800 font-bold text-xs",children:""}),s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),ny(O)},className:"text-rose-600 font-bold text-xs",children:""})]})]},O.id))})]},P))})]},v)})})]},o.id)}),(()=>{let o=us.filter(u=>!u.managerId);return Ml!=="all"&&(o=o.filter(u=>u.reaction===Ml)),o.length===0?null:s.jsxs("details",{className:"mb-4",children:[s.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl bg-gray-100 cursor-pointer",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400"}),s.jsx("span",{className:"font-bold text-neutral-800",children:""}),s.jsxs("span",{className:"text-sm text-neutral-800",children:["(",o.length,")"]})]}),s.jsx("div",{className:"space-y-2 mt-2 ml-2",children:o.map(u=>{const f=gt[u.reaction]||gt.neutral;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-100 rounded-lg border border-neutral-200 cursor-pointer hover:bg-neutral-100",onClick:()=>ft({...u}),children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{background:f.bg}}),s.jsx("span",{className:"font-bold text-[#171717] text-sm truncate",children:u.name})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs text-white font-bold",style:{background:f.bg},children:f.label}),s.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),ny(u)},className:"text-rose-600 font-bold text-xs",children:""})]})]},u.id)})})]})})(),us.length===0&&s.jsx("p",{className:"text-neutral-500 text-center py-10",children:"  "})]})})]}),A==="customers"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4",children:" "}),sd.length===0?s.jsx("p",{className:"text-neutral-500 text-center py-8",children:"  "}):s.jsx("div",{className:"space-y-2",children:sd.map(o=>{const u=ye.find(f=>f.id===o.managerId);return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-neutral-200 hover:border-slate-500 cursor-pointer",onClick:()=>jn(o),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"px-2 py-1 rounded text-white text-xs font-medium",style:{background:(u==null?void 0:u.color)||"#666"},children:(u==null?void 0:u.name)||"?"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-neutral-800 text-sm",children:o.name}),s.jsxs("p",{className:"text-xs text-neutral-500",children:[o.phone,"  ",o.consultDate]})]})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.status==="completed"?"text-emerald-400":o.status==="contract"?"text-blue-400":"text-neutral-500"}`,children:o.status==="completed"?"":o.status==="contract"?"":""})]},o.id)})})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200 sticky top-20",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4",children:" "}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:Yt.managerId||"",onChange:o=>di({...Yt,managerId:Number(o.target.value)||null}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm w-full",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsx("input",{type:"text",placeholder:" *",value:Yt.name,onChange:o=>di({...Yt,name:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:Yt.phone,onChange:o=>di({...Yt,phone:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),s.jsx("input",{type:"date",value:Yt.consultDate,onChange:o=>di({...Yt,consultDate:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full"}),s.jsx("div",{className:"flex gap-2",children:["consult","contract","completed"].map(o=>s.jsx("button",{onClick:()=>di({...Yt,status:o}),className:`flex-1 px-2 py-2 rounded-full text-xs ${Yt.status===o?"bg-neutral-900 text-white":"border border-neutral-200 text-neutral-500"}`,children:o==="consult"?"":o==="contract"?"":""},o))}),s.jsx("textarea",{placeholder:"",value:Yt.memo,onChange:o=>di({...Yt,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm w-full h-20 resize-none"}),s.jsx("button",{type:"button",onClick:Gk,className:"w-full py-2 rounded-full border border-neutral-200 text-neutral-700 text-sm hover:border-slate-500",children:""})]})]})})]}),A==="settings"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"font-bold text-[#171717] text-xl",children:""}),s.jsxs("div",{className:"flex gap-2 p-1 rounded-full border border-neutral-200 w-fit flex-wrap bg-white",children:[s.jsx("button",{type:"button",onClick:()=>Rc("theme"),className:`px-4 py-2 rounded-full text-sm transition-all ${rs==="theme"?"bg-neutral-900 text-white":"text-neutral-500 hover:text-[#171717]"}`,children:""}),s.jsx("button",{type:"button",onClick:()=>Rc("ments"),className:`px-4 py-2 rounded-full text-sm transition-all ${rs==="ments"?"bg-neutral-900 text-white":"text-neutral-500 hover:text-[#171717]"}`,children:""}),s.jsx("button",{type:"button",onClick:()=>Rc("account"),className:`px-4 py-2 rounded-full text-sm transition-all ${rs==="account"?"bg-neutral-900 text-white":"text-neutral-500 hover:text-[#171717]"}`,children:""}),$n&&s.jsx("button",{type:"button",onClick:()=>Rc("admin"),className:`px-4 py-2 rounded-full text-sm transition-all ${rs==="admin"?"bg-neutral-900 text-white":"text-neutral-500 hover:text-[#171717]"}`,children:""})]}),rs==="ments"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717]",children:"  "}),s.jsx("button",{type:"button",onClick:()=>{Zh(null),ea(!0)},className:"px-3 py-1 rounded-full border border-neutral-200 text-sm text-neutral-700 hover:border-slate-500",children:"+  "})]}),Xh.length===0?s.jsx("p",{className:"text-center py-8 text-neutral-500",children:"  "}):s.jsx("div",{className:"space-y-3",children:Xh.map(o=>s.jsxs("div",{className:"p-4 rounded-xl border border-neutral-200 hover:border-slate-500",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o.type==="broker"?"text-blue-400":"text-emerald-400"}`,children:o.type==="broker"?"":""}),s.jsx("span",{className:"font-bold text-[#171717]",children:o.name})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{type:"button",onClick:()=>{eS(o),ef(o.content),Ec(!0)},className:"px-2 py-1 rounded-full text-xs border border-neutral-200 text-neutral-500 hover:border-slate-500",children:"AI"}),s.jsx("button",{type:"button",onClick:()=>{Zh(o),er({name:o.name,content:o.content,type:o.type||"broker",memo:o.memo||""}),ea(!0)},className:"px-2 py-1 rounded-full text-xs border border-neutral-200 text-neutral-500 hover:border-slate-500",children:""}),s.jsx("button",{type:"button",onClick:()=>{confirm("?")&&ak(o.id)},className:"px-2 py-1 rounded-full text-xs border border-rose-600/50 text-rose-400 hover:border-rose-500",children:""})]})]}),s.jsx("p",{className:"text-sm text-neutral-700 mb-2 whitespace-pre-wrap",children:o.content}),s.jsxs("div",{className:"flex gap-4 text-xs text-neutral-500",children:[s.jsxs("span",{children:[" ",o.useCount||0,""]}),s.jsxs("span",{children:[" ",o.useCount>0?Math.round((o.successCount||0)/o.useCount*100):0,"%"]})]})]},o.id))})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4",children:"AI  "}),Ic.length===0?s.jsx("p",{className:"text-center py-4 text-neutral-500 text-sm",children:" "}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Ic.slice().reverse().slice(0,10).map(o=>s.jsxs("div",{className:"p-3 rounded-xl border border-neutral-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"font-medium text-neutral-800 text-sm",children:o.mentName}),s.jsx("span",{className:"text-xs text-neutral-500",children:new Date(o.createdAt).toLocaleDateString()})]}),s.jsx("p",{className:"text-xs text-neutral-500 line-clamp-2",children:o.question})]},o.id))})]})})]}),rs==="theme"&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 rounded-2xl border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-[#171717] mb-4",children:" "}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{onClick:()=>gf("light"),className:`p-4 rounded-xl border transition-all ${Cr==="light"?"border-slate-400":"border-neutral-200 hover:border-slate-500"}`,children:[s.jsx("div",{className:"text-xl mb-1"}),s.jsx("div",{className:"text-xs text-neutral-700",children:""})]}),s.jsxs("button",{onClick:()=>gf("dark"),className:`p-4 rounded-xl border transition-all ${Cr==="dark"?"border-slate-400":"border-neutral-200 hover:border-slate-500"}`,children:[s.jsx("div",{className:"text-xl mb-1"}),s.jsx("div",{className:"text-xs text-neutral-700",children:""})]}),s.jsxs("button",{onClick:()=>gf("auto"),className:`p-4 rounded-xl border transition-all ${Cr==="auto"?"border-slate-400":"border-neutral-200 hover:border-slate-500"}`,children:[s.jsx("div",{className:"text-xl mb-1"}),s.jsx("div",{className:"text-xs text-neutral-700",children:""})]})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-3",children:Cr==="auto"?"    .":Cr==="light"?"  .":"  ."})]}),rs==="account"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 bg-neutral-50 border border-neutral-200",children:[s.jsx("h3",{className:"font-bold text-emerald-400 text-lg mb-2",children:""}),s.jsx("p",{className:"text-sm text-neutral-700 mb-4",children:"        .     ."}),s.jsx("button",{type:"button",onClick:lS,className:"w-full py-4 bg-neutral-900 hover:bg-neutral-800 text-white font-bold rounded-xl transition-all",children:" "})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg mb-4",children:"  "}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"password",placeholder:" ",value:nr,onChange:o=>Zc(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"password",placeholder:" ",value:ed,onChange:o=>td(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("button",{type:"button",onClick:$n?ey:Zv,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:" "})]}),s.jsxs("p",{className:"text-xs text-neutral-500 mt-3",children:["  4  . ",$n?"( )":""]})]})]}),rs==="admin"&&$n&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg mb-3",children:"  "}),s.jsxs("p",{className:"text-sm text-neutral-500 mb-3",children:["  : ",fe.filter(o=>o.isReregistered).length,""]}),s.jsx("button",{onClick:()=>{const o=fe.filter(u=>u.isReregistered);if(o.length===0){alert("   .");return}confirm(`  ${o.length}    ?
(  ,    )`)&&(o.forEach(u=>{Or({...u,isReregistered:!1})}),alert("   ."))},className:"px-4 py-2 bg-rose-600 rounded-lg font-medium hover:bg-rose-700 transition-all hover:bg-rose-700 text-white w-full",children:"   "}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"        ."})]}),Ll.length>0&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 border-2 border-rose-200",children:[s.jsxs("h3",{className:"font-bold text-rose-600 text-lg mb-4",children:[" (",Ll.length,")"]}),s.jsx("div",{className:"space-y-3",children:Ll.map(o=>{var u;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-rose-900/30 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-neutral-800",children:o.managerName}),s.jsx("p",{className:"text-sm text-neutral-800",children:(u=o.items)==null?void 0:u.join(", ")})]}),s.jsx("button",{type:"button",onClick:()=>Jk(o.id),className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all text-sm",children:""})]},o.id)})})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-3 sm:p-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg mb-4",children:" "}),ye.map(o=>{const u=DS[o.id],f=(u==null?void 0:u.isOnline)&&Date.now()-new Date(u.lastSeen).getTime()<12e4;return s.jsxs("div",{className:"flex items-center gap-3 mb-3 p-3 bg-neutral-100 rounded-xl",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex-shrink-0",style:{background:o.color}}),s.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${f?"bg-emerald-500":"bg-gray-400"}`})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("input",{type:"text",value:o.name,onChange:p=>rp({...o,name:p.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all w-full mb-1"}),s.jsxs("p",{className:"text-xs text-neutral-800",children:[f?"":`${eI(u==null?void 0:u.lastSeen)}`,"  ",o.username]})]}),s.jsx("input",{type:"color",value:o.color,onChange:p=>rp({...o,color:p.target.value}),className:"w-10 h-10 rounded cursor-pointer flex-shrink-0"}),s.jsx("button",{type:"button",onClick:()=>{confirm("?")&&oe.ref("managers/"+o.id).remove()},className:"text-rose-600 font-bold text-sm flex-shrink-0",children:""})]},o.id)})]})]})]})]}),Sr&&s.jsx("div",{className:"modal-overlay",onClick:()=>yl(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:Zw(Sr.region)}),s.jsx("button",{type:"button",onClick:()=>yl(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("p",{className:"text-neutral-800 mb-4",children:[Sr.status==="confirmed"?"":"",": ",(mb=Sr.manager)==null?void 0:mb.name]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-neutral-800 mb-2 block",children:""}),s.jsx("input",{type:"date",value:Sr.date||"",onChange:o=>{mk(Sr.id,o.target.value),yl({...Sr,date:o.target.value})},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>yl(null),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:""}),fk(Sr)&&s.jsx("button",{type:"button",onClick:()=>pk(Sr.id),className:"px-4 py-2 bg-rose-500 rounded-lg font-medium hover:bg-rose-600 transition-all text-white flex-1",children:""})]})]})}),Z&&s.jsx("div",{className:"modal-overlay",onClick:()=>_l(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>_l(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-xl p-4",children:[s.jsx("p",{className:"font-bold text-[#171717] text-lg mb-1",children:Z.officeName}),s.jsx("p",{className:"text-sm text-neutral-500",children:Z.address||" "}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-100 text-teal-700 font-bold",children:[Z.listingCount,""]}),Z.isInRoute&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900/300 text-white",children:""}),Z.isRegistered&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500 text-white",children:""})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:""}),s.jsx("p",{className:"font-bold text-neutral-800",children:Z.phone||"-"})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:""}),s.jsx("p",{className:"font-bold text-neutral-800",children:Z.cellPhone||"-"})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:Z.isFromCompany?" ":""}),s.jsx("p",{className:"font-bold text-neutral-800",children:Z.assignedManager?s.jsx("span",{className:"px-2 py-0.5 rounded-full text-white text-xs",style:{backgroundColor:Z.assignedManager.color},children:Z.assignedManager.name}):Z.agentPosition||Z.agentName?`${Z.agentPosition} ${Z.agentName}`.trim():""})]}),s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:Z.isFromCompany?"":""}),s.jsx("p",{className:"font-bold text-neutral-800",children:Z.collectedDate||"-"})]}),Z.isFromCompany&&Z.agentName&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3 col-span-2",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:" "}),s.jsx("p",{className:"font-bold text-neutral-800",children:Z.agentName})]}),Z.isFromCompany&&Z.reaction&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3 col-span-2",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:""}),s.jsxs("p",{className:"font-bold text-neutral-800",children:[Z.reaction==="negative"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-neutral-200 text-neutral-700",children:""}),Z.reaction==="positive"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-amber-600 text-white",children:""}),Z.reaction==="good"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-green-600 text-white",children:""}),Z.reaction==="special"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-red-600 text-white",children:""}),Z.reaction==="skip"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-600 text-white",children:""})]})]}),Z.isFromCompany&&Z.memo&&s.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-3 col-span-2",children:[s.jsx("p",{className:"text-neutral-500 text-xs mb-1",children:""}),s.jsx("p",{className:"text-neutral-800 text-sm",children:Z.memo})]})]}),Z.articleCounts&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[Z.articleCounts.sale>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700",children:[" ",Z.articleCounts.sale]}),Z.articleCounts.jeonse>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 text-green-700",children:[" ",Z.articleCounts.jeonse]}),Z.articleCounts.monthly>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700",children:[" ",Z.articleCounts.monthly]}),Z.articleCounts.short>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-100 text-purple-700",children:[" ",Z.articleCounts.short]})]}),Z.regions&&Object.keys(Z.regions).length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(Z.regions).sort((o,u)=>u[1]-o[1]).map(([o,u])=>s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-neutral-200 text-neutral-700",children:[o,": ",u,""]},o))}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-neutral-200",children:[!Z.isInRoute&&s.jsx("button",{type:"button",onClick:()=>{var f,p;const o=Z.address,u=(x,v)=>{qt(y=>[...y,{id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:Z.officeName,address:o||"",phone:Z.cellPhone||Z.phone||"",lat:x,lng:v,visited:!1,listings:Z.listingCount,companyId:Z.companyId||null}]),_l(null),alert(" !")};Z.lat&&Z.lng?u(Z.lat,Z.lng):o&&((p=(f=window.naver)==null?void 0:f.maps)!=null&&p.Service)?naver.maps.Service.geocode({query:o},(x,v)=>{if(x===naver.maps.Service.Status.OK&&v.v2.addresses.length>0){const y=v.v2.addresses[0];u(parseFloat(y.y),parseFloat(y.x))}else u(null,null)}):u(null,null)},className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all text-sm flex-1",children:"+  "}),!Z.isRegistered&&s.jsx("button",{type:"button",onClick:()=>{at({name:Z.officeName,contact:Z.agentName!==""?Z.agentName:"",phone:Z.cellPhone||Z.phone||"",address:Z.address||"",managerId:null,memo:` ${Z.listingCount} | : ${Z.collectedDate}`,reaction:"none"}),_l(null),q("companies")},className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all text-sm flex-1",children:" "})]})]})]})}),nt&&s.jsx("div",{className:"modal-overlay",onClick:()=>bl(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${(gb=gt[nt.reaction])!=null&&gb.blink?"special-blink":""}`,style:{background:((xb=gt[nt.reaction])==null?void 0:xb.bg)||"#f97316"}}),s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:nt.name})]}),s.jsx("button",{type:"button",onClick:()=>bl(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[nt.contact&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-neutral-800 text-sm w-16",children:""}),s.jsx("span",{className:"font-bold text-neutral-800",children:nt.contact})]}),nt.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-neutral-800 text-sm w-16",children:""}),s.jsx("a",{href:`tel:${nt.phone}`,className:"font-bold text-primary-600 md:pointer-events-none md:text-neutral-800",children:nt.phone})]}),nt.address&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-neutral-800 text-sm w-16",children:""}),s.jsx("span",{className:"text-neutral-800 text-sm",children:nt.address})]}),nt.manager&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-neutral-800 text-sm w-16",children:""}),s.jsx("span",{className:"font-bold",style:{color:nt.manager.color},children:nt.manager.name})]}),nt.memo&&s.jsxs("div",{className:"bg-neutral-100 p-3 rounded-lg",children:[s.jsx("p",{className:"text-xs text-primary-600 font-bold mb-1",children:""}),s.jsx("p",{className:"text-sm text-amber-800",children:nt.memo})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"text-sm text-neutral-800",children:":"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs text-white font-bold ${(vb=gt[nt.reaction])!=null&&vb.blink?"special-blink":""}`,style:{background:((yb=gt[nt.reaction])==null?void 0:yb.bg)||"#f97316"},children:((bb=gt[nt.reaction])==null?void 0:bb.label)||""})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{ft({...nt}),bl(null)},className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all flex-1",children:""}),s.jsx("button",{type:"button",onClick:()=>bl(null),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:""})]})]})}),xS&&s.jsx("div",{className:"modal-overlay",onClick:()=>Vc(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg mb-4",children:" "}),s.jsx("div",{className:"space-y-3 mb-4",children:Qw.map(o=>s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-neutral-100 rounded-xl cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Rf[o],onChange:u=>Pf({...Rf,[o]:u.target.checked}),className:"w-5 h-5 accent-gold-500"}),s.jsx("span",{className:"font-bold text-neutral-800",children:o})]},o))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Vc(null),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:""}),s.jsx("button",{type:"button",onClick:Qk,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all flex-1",children:" "})]})]})}),Ct&&s.jsx("div",{className:"modal-overlay",onClick:()=>ft(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>ft(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"",value:Ct.name,onChange:o=>ft({...Ct,name:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:Ct.contact||"",onChange:o=>ft({...Ct,contact:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:Ct.phone||"",onChange:o=>ft({...Ct,phone:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:Ct.address||"",onChange:o=>ft({...Ct,address:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsxs("select",{value:Ct.managerId||"",onChange:o=>ft({...Ct,managerId:Number(o.target.value)||null}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsx("input",{type:"text",placeholder:"",value:Ct.memo||"",onChange:o=>ft({...Ct,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-neutral-800",children:":"}),Object.entries(gt).map(([o,u])=>s.jsx("button",{onClick:()=>ft({...Ct,reaction:o}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${Ct.reaction===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>ft(null),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:""}),s.jsx("button",{type:"button",onClick:Vk,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all flex-1",children:""})]})]})}),pt&&s.jsx("div",{className:"modal-overlay",onClick:()=>jn(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>jn(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"",value:pt.name,onChange:o=>jn({...pt,name:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:pt.phone||"",onChange:o=>jn({...pt,phone:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"date",value:pt.consultDate||"",onChange:o=>jn({...pt,consultDate:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsxs("select",{value:pt.managerId||"",onChange:o=>jn({...pt,managerId:Number(o.target.value)||null}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-800 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>jn({...pt,status:"consult"}),className:`px-4 py-2 rounded-full text-sm font-bold ${pt.status==="consult"||!pt.status?"bg-primary-500 text-white":"bg-neutral-100 text-primary-600"}`,children:""}),s.jsx("button",{onClick:()=>jn({...pt,status:"contract"}),className:`px-4 py-2 rounded-full text-sm font-bold ${pt.status==="contract"?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600"}`,children:""})]})]}),s.jsx("textarea",{placeholder:"",value:pt.memo||"",onChange:o=>jn({...pt,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all h-20"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>jn(null),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:""}),s.jsx("button",{type:"button",onClick:Kk,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all flex-1",children:""})]})]})}),wl&&s.jsx("div",{className:"modal-overlay",onClick:()=>Gc(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-[#171717] text-lg",children:[wl.status==="planned"?"":"","  "]}),s.jsx("button",{type:"button",onClick:()=>Gc(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("button",{type:"button",onClick:()=>sa(wl.pins.map(o=>o.id)),className:"text-sm text-gold-600 font-bold",children:" "}),s.jsx("button",{type:"button",onClick:()=>sa([]),className:"text-sm text-neutral-800 font-bold",children:" "})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:wl.pins.map(o=>s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-neutral-100 rounded-xl cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ri.includes(o.id),onChange:u=>{u.target.checked?sa([...ri,o.id]):sa(ri.filter(f=>f!==o.id))},className:"w-5 h-5 accent-gold-500"}),s.jsx("span",{className:"font-bold text-neutral-800",children:Zw(o.region)})]},o.id))}),ri.length>0&&s.jsxs("div",{className:"flex gap-2",children:[wl.status==="planned"&&s.jsx("button",{type:"button",onClick:gk,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all flex-1",children:" "}),s.jsx("button",{type:"button",onClick:xk,className:"px-4 py-2 bg-rose-500 rounded-lg font-medium hover:bg-rose-600 transition-all text-white flex-1",children:""})]})]})}),bf&&s.jsx("div",{className:"modal-overlay",onClick:()=>_f(null),children:s.jsxs("div",{className:"modal-content max-w-sm p-0 overflow-hidden",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"bg-neutral-100 border border-neutral-200 p-4 sm:p-6 text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-white/10 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-3 border border-white/20",children:s.jsx("span",{className:"text-2xl text-emerald-400"})}),s.jsx("p",{className:"text-neutral-500 text-xs tracking-widest mb-1",children:"REGISTERED"}),s.jsx("h3",{className:"font-bold text-white text-lg",children:bf.companyName})]}),s.jsxs("div",{className:"p-5 bg-white",children:[s.jsx("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4 mb-4 border-l-4 border-teal-500",children:s.jsx("p",{className:"text-neutral-700 text-sm leading-relaxed",children:bf.quote})}),s.jsx("button",{type:"button",onClick:()=>_f(null),className:"w-full py-3 bg-neutral-800 hover:from-slate-600 hover:to-slate-500 text-white rounded-lg font-medium transition-all border border-slate-500",children:""})]})]})}),rv&&s.jsx("div",{className:"modal-overlay",onClick:()=>yf(!1),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:"  "}),s.jsx("button",{type:"button",onClick:()=>yf(!1),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"password",placeholder:" ",value:Nl,onChange:o=>hv(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"password",placeholder:" ",value:fv,onChange:o=>pv(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("button",{type:"button",onClick:ey,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:""})]})]})}),pS&&s.jsx("div",{className:"modal-overlay",onClick:()=>nv(!1),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>nv(!1),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"bg-emerald-900/30 p-4 rounded-xl",children:[s.jsx("p",{className:"text-emerald-700 font-bold mb-2",children:"  "}),s.jsx("p",{className:"text-emerald-600 text-sm",children:"      ."}),s.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"PC, ,    ."})]})]})}),wf&&s.jsx("div",{className:"modal-overlay",onClick:()=>qc(null),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>qc(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("p",{className:"text-sm text-neutral-800 mb-4",children:[wf.managerName," "]}),s.jsx("div",{className:"space-y-3",children:(()=>{const o=id.filter(u=>u.managerId===wf.managerId);return o.length===0?s.jsx("p",{className:"text-center text-neutral-800 py-4",children:"  ."}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:o.map(u=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-100 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-[#171717]",children:[Number(u.amount).toLocaleString(),""]}),s.jsx("p",{className:"text-xs text-neutral-800",children:u.date})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{const f=prompt("  :",u.amount);f&&!isNaN(f)&&(Tv({...u,amount:Number(f)}),alert(" ."))},className:"px-2 py-1 bg-primary-500 text-white rounded text-xs font-bold",children:""}),s.jsx("button",{onClick:()=>{confirm("  ?")&&(ik(u.id),alert(" ."))},className:"px-2 py-1 bg-neutral-200 text-white rounded text-xs font-bold",children:""})]})]},u.id))})})()}),s.jsx("button",{type:"button",onClick:()=>qc(null),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all w-full mt-4",children:""})]})}),yS&&s.jsx("div",{className:"modal-overlay",onClick:()=>Kc(!1),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Kc(!1),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:Un.managerId||"",onChange:o=>vd({...Un,managerId:Number(o.target.value)||null}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all",children:[s.jsx("option",{value:"",children:"  *"}),Zk().map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsx("input",{type:"number",placeholder:" *",value:Un.amount,onChange:o=>vd({...Un,amount:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"date",value:Un.date,onChange:o=>vd({...Un,date:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("button",{type:"button",onClick:qk,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:""})]})]})}),mS&&s.jsx("div",{className:"modal-overlay",onClick:()=>vf(!1),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>vf(!1),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"password",placeholder:" ",value:nr,onChange:o=>Zc(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"password",placeholder:" ",value:ed,onChange:o=>td(o.target.value),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("button",{type:"button",onClick:Zv,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:""})]})]})}),gS&&s.jsx("div",{className:"modal-overlay",onClick:()=>zc(!1),children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>zc(!1),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"bg-neutral-100 rounded-xl p-3 mb-4",children:[s.jsx("p",{className:"text-neutral-800 font-bold mb-1",children:" "}),s.jsx("p",{className:"text-neutral-800 text-sm",children:"////"})]}),s.jsx("textarea",{value:Tf,onChange:o=>lv(o.target.value),placeholder:"////",className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all h-32 mb-3"}),s.jsxs("select",{value:ov||"",onChange:o=>cv(Number(o.target.value)||null),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all mb-3",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[s.jsx("span",{className:"text-sm text-neutral-800",children:" :"}),Object.entries(gt).map(([o,u])=>s.jsx("button",{onClick:()=>uv(o),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${dv===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]}),s.jsx("button",{type:"button",onClick:Hk,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:" "})]})}),wS&&s.jsx("div",{className:"modal-overlay",onClick:()=>Jc(!1),style:{overflow:"hidden"},children:s.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:"  "}),s.jsx("button",{type:"button",onClick:()=>Jc(!1),className:"text-neutral-800 text-2xl",children:""})]}),iv?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full spin mx-auto mb-3"}),s.jsx("p",{className:"text-neutral-800",children:"  ..."})]}):jS?s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-neutral-800 font-bold",children:"   ( )"}),s.jsx("input",{type:"text",placeholder:"",value:ae.name,onChange:o=>at({...ae,name:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:ae.contact,onChange:o=>at({...ae,contact:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:ae.phone,onChange:o=>at({...ae,phone:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("input",{type:"text",placeholder:"",value:ae.address,onChange:o=>at({...ae,address:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsxs("select",{value:ae.managerId||"",onChange:o=>at({...ae,managerId:Number(o.target.value)||null}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all",children:[s.jsx("option",{value:"",children:" "}),ye.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm text-neutral-800",children:":"}),Object.entries(gt).map(([o,u])=>s.jsx("button",{onClick:()=>at({...ae,reaction:o}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${ae.reaction===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]}),s.jsx("input",{type:"text",placeholder:"",value:ae.memo,onChange:o=>at({...ae,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{var o;Cf(null),at({name:"",contact:"",phone:"",address:"",managerId:(n==null?void 0:n.managerId)||null,memo:"",reaction:"neutral"}),(o=Sf.current)==null||o.click()},className:"flex-1 py-3 border border-neutral-200 rounded-xl font-bold text-neutral-800",children:""}),s.jsx("button",{onClick:async()=>{await ty(),Jc(!1),Cf(null)},className:"flex-1 px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all",children:" "})]})]}):null]})}),NS&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content max-w-2xl",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-[#171717] text-lg",children:["   (",Cn.length,")"]}),s.jsx("button",{type:"button",onClick:()=>jf(!1),className:"text-neutral-800 text-2xl",children:""})]}),iv?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full spin mx-auto mb-3"}),s.jsx("p",{className:"text-neutral-800",children:"  ..."})]}):s.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[Cn.map((o,u)=>s.jsxs("div",{className:"bg-neutral-100 rounded-xl p-3 border",children:[s.jsxs("p",{className:"font-bold text-neutral-800 text-sm mb-2",children:[" #",u+1]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:f=>{const p=[...Cn];p[u].name=f.target.value,tr(p)},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm"}),s.jsx("input",{type:"text",placeholder:"",value:o.contact,onChange:f=>{const p=[...Cn];p[u].contact=f.target.value,tr(p)},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm"}),s.jsx("input",{type:"text",placeholder:"",value:o.phone,onChange:f=>{const p=[...Cn];p[u].phone=f.target.value,tr(p)},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm"}),s.jsx("input",{type:"text",placeholder:"",value:o.address,onChange:f=>{const p=[...Cn];p[u].address=f.target.value,tr(p)},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsxs("select",{value:o.managerId||"",onChange:f=>{const p=[...Cn];p[u].managerId=Number(f.target.value)||null,tr(p)},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] focus:outline-none focus:border-neutral-400 transition-all text-sm py-1",children:[s.jsx("option",{value:"",children:""}),ye.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))]}),Object.entries(gt).map(([f,p])=>s.jsx("button",{onClick:()=>{const x=[...Cn];x[u].reaction=f,tr(x)},className:`px-2 py-1 rounded-full text-xs text-white font-bold ${o.reaction===f?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:p.bg},children:p.label},f))]}),s.jsx("input",{type:"text",placeholder:"",value:o.memo,onChange:f=>{const p=[...Cn];p[u].memo=f.target.value,tr(p)},className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all text-sm mt-2"})]},u)),Cn.length>0&&s.jsxs("button",{onClick:Ck,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:[Cn.filter(o=>o.name).length,"  "]})]})]})}),kS&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-3xl"})}),s.jsx("h3",{className:"font-bold text-[#171717] text-xl",children:"  "}),s.jsxs("p",{className:"text-neutral-800 text-sm mt-2",children:[new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long"})," 4"]})]}),s.jsxs("div",{className:"bg-neutral-100 border border-primary-300 rounded-xl p-4 mb-4",children:[s.jsxs("p",{className:"text-blue-800 font-bold text-center text-lg",children:["  ",s.jsx("br",{}),"."]}),s.jsxs("p",{className:"text-primary-600 text-sm text-center mt-2",children:["    ",s.jsx("br",{}),"  ."]})]}),s.jsx("button",{onClick:()=>Ef(!1),className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all w-full",children:""})]})}),Tl&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>Ff(null),children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-2xl"})}),s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:"  "}),s.jsxs("p",{className:"text-neutral-800 text-sm mt-2",children:[" ",s.jsxs("b",{className:"text-amber-500",children:[Tl.unvisitedStops.length,""]}),"   ."]})]}),s.jsx("div",{className:"bg-white rounded-xl p-3 mb-4 max-h-40 overflow-y-auto",children:Tl.unvisitedStops.map((o,u)=>s.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-neutral-200 last:border-0",children:[s.jsx("span",{className:"w-6 h-6 bg-rose-500/20 text-rose-400 rounded-full flex items-center justify-center text-xs font-bold",children:u+1}),s.jsx("span",{className:"text-neutral-800 text-sm",children:o.name})]},u))}),s.jsxs("p",{className:"text-xs text-neutral-700 mb-4 text-center",children:["       ",s.jsx("br",{}),"    ."]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>up(Tl.route,!1),className:"flex-1 px-4 py-2 bg-neutral-200 rounded-xl font-bold text-neutral-800 text-sm",children:" "}),s.jsx("button",{onClick:()=>up(Tl.route,!0),className:"flex-1 px-4 py-2 bg-amber-600 rounded-xl font-bold text-white text-sm",children:" "})]})]})}),Lf&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>la(null),children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-sm",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-14 h-14 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-2xl"})}),s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsxs("p",{className:"text-neutral-800 text-sm mt-2",children:[s.jsx("b",{className:"text-rose-600",children:Lf.name}),"() ?"]}),s.jsx("p",{className:"text-xs text-neutral-800 mt-1",children:"    ."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>la(null),className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl font-bold text-gray-700",children:""}),s.jsx("button",{onClick:()=>{const{type:o,id:u}=Lf;o==="route"?Pv(u):o==="company"?rk(u):o==="customer"?sk(u):o==="calendar"?(vv(Ut.filter(f=>f.id!==u)),localStorage.setItem("bc_calendar_events",JSON.stringify(Ut.filter(f=>f.id!==u)))):o==="sale"&&(mv(id.filter(f=>f.id!==u)),localStorage.setItem("bc_sales",JSON.stringify(id.filter(f=>f.id!==u)))),la(null),alert(".")},className:"flex-1 px-4 py-2 bg-rose-500 rounded-xl font-bold text-white",children:""})]})]})}),CS&&If.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1100] p-4",children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-3xl"})}),s.jsx("h3",{className:"font-bold text-[#171717] text-xl",children:"  "}),s.jsx("p",{className:"text-neutral-800 text-sm mt-1",children:new Date().toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),s.jsxs("div",{className:"bg-neutral-100 border border-neutral-200 rounded-xl p-4 mb-4 max-h-60 overflow-y-auto",children:[s.jsxs("p",{className:"text-primary-600 font-bold text-sm mb-3",children:[If.length,"  "]}),s.jsx("div",{className:"space-y-2",children:If.map((o,u)=>{const f=ye.find(p=>p.id===o.managerId);return s.jsx("div",{className:"bg-neutral-100 p-3 rounded-lg border border-neutral-200",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-lg",children:(o.type==="route","")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-[#171717] text-sm break-words",children:o.title}),f&&s.jsxs("p",{className:"text-xs text-neutral-800",children:[": ",f.name]}),o.memo&&s.jsx("p",{className:"text-xs text-neutral-800 mt-1 break-words whitespace-pre-wrap",children:o.memo})]})]})},u)})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{kf(!1),q("calendar")},className:"flex-1 px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all",children:" "}),s.jsx("button",{onClick:()=>kf(!1),className:"flex-1 px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all",children:""})]})]})}),vS&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Hc(!1),children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-hidden",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Hc(!1),className:"text-neutral-800 text-2xl",children:""})]}),s.jsx("p",{className:"text-sm text-neutral-800 mb-3",children:"   ."}),s.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[fe.filter(o=>!o.lat||!o.lng).map(o=>{const u=ye.find(f=>f.id===o.managerId);return s.jsx("div",{className:"p-3 bg-neutral-100 rounded-xl cursor-pointer hover:bg-neutral-100 border border-neutral-200",onClick:()=>{Hc(!1),ft(o)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-bold text-[#171717] truncate",children:o.name}),s.jsx("p",{className:"text-xs text-neutral-800 truncate",children:o.address||" "})]}),s.jsx("div",{className:"flex-shrink-0 ml-2",children:s.jsx("span",{className:"px-2 py-1 rounded text-xs text-white font-bold",style:{background:(u==null?void 0:u.color)||"#9ca3af"},children:(u==null?void 0:u.name)||""})})]})},o.id)}),fe.filter(o=>!o.lat||!o.lng).length===0&&s.jsx("p",{className:"text-center text-neutral-800 py-4",children:"  ."})]})]})}),Pt&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>El(null),children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>El(null),className:"text-neutral-800 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[s.jsx("p",{className:"text-purple-800 font-bold text-lg",children:Pt.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-purple-600",children:[s.jsx("span",{children:Pt.date}),Pt.time&&s.jsx("span",{children:Pt.time})]}),Pt.memo&&s.jsxs("div",{className:"mt-3 p-3 bg-neutral-100 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-800 mb-1",children:""}),s.jsx("p",{className:"text-neutral-800 whitespace-pre-wrap",children:Pt.memo})]}),Pt.company&&s.jsx("div",{className:"mt-2 text-sm text-purple-600",children:s.jsx("span",{children:Pt.company})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{Df(Pt.date),Ir({title:Pt.title,time:Pt.time||"09:00",memo:Pt.memo||""}),oa(Pt.id),ai(!0),El(null)},className:"flex-1 py-2 bg-neutral-100 text-primary-600 rounded-xl font-bold",children:""}),s.jsx("button",{onClick:()=>{la({type:"calendar",id:Pt.id,name:Pt.title}),El(null)},className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-xl font-bold",children:""})]})]})]})}),FS&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ai(!1),children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-[#171717] text-lg",children:[Il," "]}),s.jsx("button",{type:"button",onClick:()=>ai(!1),className:"text-neutral-800 text-2xl",children:""})]}),(()=>{const o=Ve.filter(f=>f.date===Il),u=Ut.filter(f=>f.date===Il);return o.length>0||u.length>0?s.jsxs("div",{className:"mb-4 p-3 bg-neutral-100 rounded-xl max-h-32 overflow-y-auto",children:[s.jsx("p",{className:"text-xs text-neutral-800 mb-2 font-bold",children:"  "}),o.map(f=>{var x;const p=ye.find(v=>v.id===f.managerId);return s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:(p==null?void 0:p.color)||"#888"}}),s.jsxs("span",{className:"text-sm text-neutral-800",children:[(x=f.time)==null?void 0:x.slice(0,5)," ",f.name]}),s.jsx("span",{className:"text-xs text-neutral-800",children:"()"})]},`r-${f.id}`)}),u.map(f=>{var p;return s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),s.jsxs("span",{className:"text-sm text-neutral-800",children:[(p=f.time)==null?void 0:p.slice(0,5)," ",f.title]}),s.jsx("button",{onClick:()=>{Ir({title:f.title,time:f.time,memo:f.memo||""}),oa(f.id)},className:"text-xs text-primary-600 ml-auto",children:""}),s.jsx("button",{onClick:()=>{confirm("?")&&ck(f.id)},className:"text-xs text-rose-600",children:""})]},`e-${f.id}`)})]}):null})(),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-neutral-800 font-bold",children:Rl?" ":"  "}),s.jsx("input",{type:"text",placeholder:" ",value:rr.title,onChange:o=>Ir({...rr,title:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("calEventTime")).showPicker)==null?void 0:u.call(o)},children:s.jsx("input",{id:"calEventTime",type:"time",value:rr.time,onChange:o=>Ir({...rr,time:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all cursor-pointer"})}),s.jsx("textarea",{placeholder:" ()",value:rr.memo,onChange:o=>Ir({...rr,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all resize-none h-20"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[Rl&&s.jsx("button",{onClick:()=>{Ir({title:"",time:"09:00",memo:""}),oa(null)},className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:" "}),s.jsx("button",{type:"button",onClick:()=>ai(!1),className:"px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all flex-1",children:""}),s.jsx("button",{onClick:()=>{if(!rr.title.trim())return alert("  ");const o={id:Rl||Date.now(),date:Il,title:rr.title.trim(),time:rr.time,memo:rr.memo.trim(),createdBy:(n==null?void 0:n.name)||"unknown",createdAt:new Date().toISOString()};ip(o),Ef(!1),Ir({title:"",time:"09:00",memo:""}),oa(null),alert(Rl?" !":" !")},className:"px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all flex-1",children:Rl?"":""})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:s.jsx("button",{onClick:()=>{ia(Il),ai(!1),cs("route")},className:"w-full text-center text-sm text-neutral-800 font-bold",children:"  "})})]})}),cn&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>kr(null),children:s.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:cn.name}),s.jsx("p",{className:"text-sm text-neutral-800",children:cn.date})]}),s.jsx("button",{type:"button",onClick:()=>kr(null),className:"text-neutral-800 hover:text-neutral-800 text-xl",children:""})]}),(()=>{const o=(cn.stops||[]).filter(p=>p.visited).length,u=(cn.stops||[]).length,f=u>0?Math.round(o/u*100):0;return s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-neutral-800",children:""}),s.jsxs("span",{className:"text-sm font-bold text-neutral-800",children:[o,"/",u," (",f,"%)"]})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 transition-all duration-300",style:{width:`${f}%`}})})]})})(),s.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:(cn.stops||[]).map((o,u)=>s.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all ${o.visited?"bg-emerald-900/30":"bg-neutral-100"}`,children:[s.jsx("button",{onClick:()=>Uk(cn.id,o.id),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all flex-shrink-0 ${o.visited?"bg-emerald-500 text-white":"bg-neutral-200 border-2 border-neutral-200 text-neutral-800 hover:border-primary-400"}`,children:o.visited?"":u+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-bold text-sm break-words leading-snug ${o.visited?"text-emerald-700":"text-[#171717]"}`,children:o.name}),o.address&&s.jsx("p",{className:"text-xs text-neutral-800 break-words",children:o.address})]}),o.lat&&o.lng&&s.jsx("button",{type:"button",onClick:()=>Wk(o),className:"w-8 h-8 rounded-lg bg-neutral-100 hover:bg-neutral-200 text-primary-600 flex items-center justify-center text-sm flex-shrink-0"})]},o.id))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{type:"button",onClick:()=>{kr(null),Bk(cn)},className:"w-full px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all py-2",children:"   "}),cn.status!=="completed"&&s.jsx("button",{type:"button",onClick:()=>$k(cn.id),className:"w-full px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all py-3 font-bold",children:"  ( )"})]})]})}),XC&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>{ea(!1),er({name:"",content:"",type:"broker",memo:""})},children:s.jsxs("div",{className:"bg-white rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:Gt?" ":"  "}),s.jsx("button",{type:"button",onClick:()=>{ea(!1),er({name:"",content:"",type:"broker",memo:""})},className:"text-neutral-500 text-2xl hover:text-white",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"  (:  )",value:Rt.name,onChange:o=>er({...Rt,name:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>er({...Rt,type:"broker"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Rt.type==="broker"?"bg-blue-500/20 text-blue-400 border border-blue-500":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:""}),s.jsx("button",{onClick:()=>er({...Rt,type:"customer"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Rt.type==="customer"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:""})]}),s.jsx("textarea",{placeholder:"  ",value:Rt.content,onChange:o=>er({...Rt,content:o.target.value}),rows:"4",className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all resize-none"}),s.jsx("input",{type:"text",placeholder:" ()",value:Rt.memo,onChange:o=>er({...Rt,memo:o.target.value}),className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>{ea(!1),er({name:"",content:"",type:"broker",memo:""})},className:"flex-1 px-4 py-2 bg-white text-neutral-700 border border-neutral-200 rounded-lg font-medium hover:bg-neutral-50 transition-all",children:""}),s.jsx("button",{onClick:()=>{if(!Rt.name.trim()||!Rt.content.trim())return alert("   ");const o={id:(Gt==null?void 0:Gt.id)||Date.now(),name:Rt.name.trim(),content:Rt.content.trim(),type:Rt.type,memo:Rt.memo.trim(),useCount:(Gt==null?void 0:Gt.useCount)||0,successCount:(Gt==null?void 0:Gt.successCount)||0,createdAt:(Gt==null?void 0:Gt.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};Av(o),ea(!1),Zh(null),er({name:"",content:"",type:"broker",memo:""})},className:"flex-1 px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all",children:Gt?" ":""})]})]})}),ZC&&wr&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>Ec(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl p-5 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-[#171717] text-lg",children:"AI "}),s.jsx("button",{type:"button",onClick:()=>Ec(!1),className:"text-neutral-500 text-2xl hover:text-white",children:""})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-neutral-500 mb-1",children:[" : ",s.jsx("span",{className:"text-neutral-700 font-medium",children:wr.name})]}),s.jsx("div",{className:"p-3 rounded-lg bg-neutral-50 border border-neutral-200",children:s.jsx("p",{className:"text-sm text-neutral-700 whitespace-pre-wrap",children:wr.content})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:" :"}),s.jsx("textarea",{value:Tc,onChange:o=>ef(o.target.value),placeholder:"  ",rows:"3",className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all resize-none w-full"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:":"}),s.jsx("input",{type:"text",value:tf,onChange:o=>D0(o.target.value),placeholder:"   ?",className:"w-full px-3 py-2 bg-white border border-neutral-200 rounded-lg text-[#171717] placeholder-neutral-400 focus:outline-none focus:border-neutral-400 transition-all w-full"})]}),s.jsx("button",{onClick:async()=>{if(!Tc.trim())return alert("  ");const o=document.activeElement;o.textContent="AI  ...",o.disabled=!0;const u=await dS(wr.content,Tc,tf||"  ?");if(u.success){const f={id:Date.now(),mentId:wr.id,mentName:wr.name,original:wr.content,modified:Tc,question:tf||" ",aiResponse:u.response,createdAt:new Date().toISOString()};lk(f),alert("AI  !"),Ec(!1),ef(""),D0("")}else alert("AI  : "+u.error),o.textContent="AI  ",o.disabled=!1},className:"w-full px-4 py-2 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 transition-all",children:"AI  "}),Ic.filter(o=>o.mentId===wr.id).length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:[s.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:"   "}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ic.filter(o=>o.mentId===wr.id).slice(-3).reverse().map(o=>s.jsxs("div",{className:"p-3 rounded-lg bg-neutral-100/30 border border-neutral-200/30",children:[s.jsx("p",{className:"text-xs text-neutral-500 mb-1",children:new Date(o.createdAt).toLocaleString("ko-KR")}),s.jsx("p",{className:"text-sm text-neutral-700 line-clamp-2",children:o.question})]},o.id))})]})]})})]})]})]})},ND=()=>{const t=document.getElementById("initial-loading");t&&(t.classList.add("hidden"),setTimeout(()=>t.remove(),300))};nm.createRoot(document.getElementById("root")).render(s.jsx(xI.StrictMode,{children:s.jsx(wD,{})}));ND();
