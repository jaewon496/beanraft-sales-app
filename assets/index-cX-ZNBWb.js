(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function oI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hb={exports:{}},Wu={},fb={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),cI=Symbol.for("react.portal"),dI=Symbol.for("react.fragment"),uI=Symbol.for("react.strict_mode"),hI=Symbol.for("react.profiler"),fI=Symbol.for("react.provider"),pI=Symbol.for("react.context"),mI=Symbol.for("react.forward_ref"),gI=Symbol.for("react.suspense"),xI=Symbol.for("react.memo"),vI=Symbol.for("react.lazy"),Dv=Symbol.iterator;function yI(t){return t===null||typeof t!="object"?null:(t=Dv&&t[Dv]||t["@@iterator"],typeof t=="function"?t:null)}var pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mb=Object.assign,gb={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=gb,this.updater=n||pb}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xb(){}xb.prototype=Ja.prototype;function ig(t,e,n){this.props=t,this.context=e,this.refs=gb,this.updater=n||pb}var ag=ig.prototype=new xb;ag.constructor=ig;mb(ag,Ja.prototype);ag.isPureReactComponent=!0;var Mv=Array.isArray,vb=Object.prototype.hasOwnProperty,lg={current:null},yb={key:!0,ref:!0,__self:!0,__source:!0};function _b(t,e,n){var s,r={},a=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)vb.call(e,s)&&!yb.hasOwnProperty(s)&&(r[s]=e[s]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];r.children=d}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)r[s]===void 0&&(r[s]=c[s]);return{$$typeof:Qo,type:t,key:a,ref:l,props:r,_owner:lg.current}}function _I(t,e){return{$$typeof:Qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function og(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qo}function bI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lv=/\/+/g;function Bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bI(""+t.key):e.toString(36)}function Rd(t,e,n,s,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Qo:case cI:l=!0}}if(l)return l=t,r=r(l),t=s===""?"."+Bf(l,0):s,Mv(r)?(n="",t!=null&&(n=t.replace(Lv,"$&/")+"/"),Rd(r,e,n,"",function(h){return h})):r!=null&&(og(r)&&(r=_I(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(Lv,"$&/")+"/")+t)),e.push(r)),1;if(l=0,s=s===""?".":s+":",Mv(t))for(var c=0;c<t.length;c++){a=t[c];var d=s+Bf(a,c);l+=Rd(a,e,n,d,r)}else if(d=yI(t),typeof d=="function")for(t=d.call(t),c=0;!(a=t.next()).done;)a=a.value,d=s+Bf(a,c++),l+=Rd(a,e,n,d,r);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function dd(t,e,n){if(t==null)return t;var s=[],r=0;return Rd(t,s,"","",function(a){return e.call(n,a,r++)}),s}function wI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Pd={transition:null},NI={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Pd,ReactCurrentOwner:lg};function bb(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:dd,forEach:function(t,e,n){dd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dd(t,function(){e++}),e},toArray:function(t){return dd(t,function(e){return e})||[]},only:function(t){if(!og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Ja;_e.Fragment=dI;_e.Profiler=hI;_e.PureComponent=ig;_e.StrictMode=uI;_e.Suspense=gI;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI;_e.act=bb;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=mb({},t.props),r=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=lg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)vb.call(e,d)&&!yb.hasOwnProperty(d)&&(s[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:Qo,type:t.type,key:r,ref:a,props:s,_owner:l}};_e.createContext=function(t){return t={$$typeof:pI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fI,_context:t},t.Consumer=t};_e.createElement=_b;_e.createFactory=function(t){var e=_b.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:mI,render:t}};_e.isValidElement=og;_e.lazy=function(t){return{$$typeof:vI,_payload:{_status:-1,_result:t},_init:wI}};_e.memo=function(t,e){return{$$typeof:xI,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Pd.transition;Pd.transition={};try{t()}finally{Pd.transition=e}};_e.unstable_act=bb;_e.useCallback=function(t,e){return Wt.current.useCallback(t,e)};_e.useContext=function(t){return Wt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Wt.current.useEffect(t,e)};_e.useId=function(){return Wt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Wt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};_e.useRef=function(t){return Wt.current.useRef(t)};_e.useState=function(t){return Wt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Wt.current.useTransition()};_e.version="18.3.1";fb.exports=_e;var _=fb.exports;const jI=oI(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=_,SI=Symbol.for("react.element"),II=Symbol.for("react.fragment"),kI=Object.prototype.hasOwnProperty,EI=CI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TI={key:!0,ref:!0,__self:!0,__source:!0};function wb(t,e,n){var s,r={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)kI.call(e,s)&&!TI.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:SI,type:t,key:a,ref:l,props:r,_owner:EI.current}}Wu.Fragment=II;Wu.jsx=wb;Wu.jsxs=wb;hb.exports=Wu;var i=hb.exports,Ap={},Nb={exports:{}},gn={},jb={exports:{}},Cb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,he){var ee=Y.length;Y.push(he);e:for(;0<ee;){var Me=ee-1>>>1,Le=Y[Me];if(0<r(Le,he))Y[Me]=he,Y[ee]=Le,ee=Me;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var he=Y[0],ee=Y.pop();if(ee!==he){Y[0]=ee;e:for(var Me=0,Le=Y.length,ms=Le>>>1;Me<ms;){var vn=2*(Me+1)-1,Vi=Y[vn],dt=vn+1,Xe=Y[dt];if(0>r(Vi,ee))dt<Le&&0>r(Xe,Vi)?(Y[Me]=Xe,Y[dt]=ee,Me=dt):(Y[Me]=Vi,Y[vn]=ee,Me=vn);else if(dt<Le&&0>r(Xe,ee))Y[Me]=Xe,Y[dt]=ee,Me=dt;else break e}}return he}function r(Y,he){var ee=Y.sortIndex-he.sortIndex;return ee!==0?ee:Y.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,m=null,y=3,I=!1,T=!1,L=!1,ne=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Y){for(var he=n(h);he!==null;){if(he.callback===null)s(h);else if(he.startTime<=Y)s(h),he.sortIndex=he.expirationTime,e(d,he);else break;he=n(h)}}function R(Y){if(L=!1,S(Y),!T)if(n(d)!==null)T=!0,Hr(K);else{var he=n(h);he!==null&&Bi(R,he.startTime-Y)}}function K(Y,he){T=!1,L&&(L=!1,C(Z),Z=-1),I=!0;var ee=y;try{for(S(he),m=n(d);m!==null&&(!(m.expirationTime>he)||Y&&!Mt());){var Me=m.callback;if(typeof Me=="function"){m.callback=null,y=m.priorityLevel;var Le=Me(m.expirationTime<=he);he=t.unstable_now(),typeof Le=="function"?m.callback=Le:m===n(d)&&s(d),S(he)}else s(d);m=n(d)}if(m!==null)var ms=!0;else{var vn=n(h);vn!==null&&Bi(R,vn.startTime-he),ms=!1}return ms}finally{m=null,y=ee,I=!1}}var B=!1,J=null,Z=-1,Te=5,pe=-1;function Mt(){return!(t.unstable_now()-pe<Te)}function Vr(){if(J!==null){var Y=t.unstable_now();pe=Y;var he=!0;try{he=J(!0,Y)}finally{he?ps():(B=!1,J=null)}}else B=!1}var ps;if(typeof N=="function")ps=function(){N(Vr)};else if(typeof MessageChannel<"u"){var Wi=new MessageChannel,zi=Wi.port2;Wi.port1.onmessage=Vr,ps=function(){zi.postMessage(null)}}else ps=function(){ne(Vr,0)};function Hr(Y){J=Y,B||(B=!0,ps())}function Bi(Y,he){Z=ne(function(){Y(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){T||I||(T=!0,Hr(K))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var he=3;break;default:he=y}var ee=y;y=he;try{return Y()}finally{y=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=y;y=Y;try{return he()}finally{y=ee}},t.unstable_scheduleCallback=function(Y,he,ee){var Me=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Me+ee:Me):ee=Me,Y){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ee+Le,Y={id:g++,callback:he,priorityLevel:Y,startTime:ee,expirationTime:Le,sortIndex:-1},ee>Me?(Y.sortIndex=ee,e(h,Y),n(d)===null&&Y===n(h)&&(L?(C(Z),Z=-1):L=!0,Bi(R,ee-Me))):(Y.sortIndex=Le,e(d,Y),T||I||(T=!0,Hr(K))),Y},t.unstable_shouldYield=Mt,t.unstable_wrapCallback=function(Y){var he=y;return function(){var ee=y;y=he;try{return Y.apply(this,arguments)}finally{y=ee}}}})(Cb);jb.exports=Cb;var RI=jb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=_,fn=RI;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sb=new Set,mo={};function Ai(t,e){Da(t,e),Da(t+"Capture",e)}function Da(t,e){for(mo[t]=e,t=0;t<e.length;t++)Sb.add(e[t])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,AI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fv={},Uv={};function OI(t){return Op.call(Uv,t)?!0:Op.call(Fv,t)?!1:AI.test(t)?Uv[t]=!0:(Fv[t]=!0,!1)}function DI(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MI(t,e,n,s){if(e===null||typeof e>"u"||DI(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,s,r,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var cg=/[\-:]([a-z])/g;function dg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cg,dg);It[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cg,dg);It[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cg,dg);It[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ug(t,e,n,s){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MI(e,n,r,s)&&(n=null),s||r===null?OI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ks=PI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ud=Symbol.for("react.element"),da=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),hg=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Ib=Symbol.for("react.provider"),kb=Symbol.for("react.context"),fg=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),pg=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),Eb=Symbol.for("react.offscreen"),$v=Symbol.iterator;function Rl(t){return t===null||typeof t!="object"?null:(t=$v&&t[$v]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Vf;function Gl(t){if(Vf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vf=e&&e[1]||""}return`
`+Vf+t}var Hf=!1;function Gf(t,e){if(!t||Hf)return"";Hf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var s=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){s=h}t.call(e.prototype)}else{try{throw Error()}catch(h){s=h}t()}}catch(h){if(h&&s&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),a=s.stack.split(`
`),l=r.length-1,c=a.length-1;1<=l&&0<=c&&r[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(r[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||r[l]!==a[c]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{Hf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gl(t):""}function LI(t){switch(t.tag){case 5:return Gl(t.type);case 16:return Gl("Lazy");case 13:return Gl("Suspense");case 19:return Gl("SuspenseList");case 0:case 2:case 15:return t=Gf(t.type,!1),t;case 11:return t=Gf(t.type.render,!1),t;case 1:return t=Gf(t.type,!0),t;default:return""}}function Fp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ua:return"Fragment";case da:return"Portal";case Dp:return"Profiler";case hg:return"StrictMode";case Mp:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kb:return(t.displayName||"Context")+".Consumer";case Ib:return(t._context.displayName||"Context")+".Provider";case fg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pg:return e=t.displayName||null,e!==null?e:Fp(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Fp(t(e))}catch{}}return null}function FI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fp(e);case 8:return e===hg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UI(t){var e=Tb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hd(t){t._valueTracker||(t._valueTracker=UI(t))}function Rb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Tb(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Kd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Up(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wv(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pb(t,e){e=e.checked,e!=null&&ug(t,"checked",e,!1)}function $p(t,e){Pb(t,e);var n=kr(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wp(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wp(t,e,n){(e!=="number"||Kd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kl=Array.isArray;function Na(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Kl(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Ab(t,e){var n=kr(e.value),s=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Vv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ob(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ob(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fd,Db=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fd=fd||document.createElement("div"),fd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$I=["Webkit","ms","Moz","O"];Object.keys(Xl).forEach(function(t){$I.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xl[e]=Xl[t]})});function Mb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xl.hasOwnProperty(t)&&Xl[t]?(""+e).trim():e+"px"}function Lb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Mb(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var WI=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(t,e){if(e){if(WI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Hp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=null;function mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kp=null,ja=null,Ca=null;function Hv(t){if(t=Zo(t)){if(typeof Kp!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Gu(e),Kp(t.stateNode,t.type,e))}}function Fb(t){ja?Ca?Ca.push(t):Ca=[t]:ja=t}function Ub(){if(ja){var t=ja,e=Ca;if(Ca=ja=null,Hv(t),e)for(t=0;t<e.length;t++)Hv(e[t])}}function $b(t,e){return t(e)}function Wb(){}var Kf=!1;function zb(t,e,n){if(Kf)return t(e,n);Kf=!0;try{return $b(t,e,n)}finally{Kf=!1,(ja!==null||Ca!==null)&&(Wb(),Ub())}}function xo(t,e){var n=t.stateNode;if(n===null)return null;var s=Gu(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var qp=!1;if($s)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){qp=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{qp=!1}function zI(t,e,n,s,r,a,l,c,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(g){this.onError(g)}}var Zl=!1,qd=null,Yd=!1,Yp=null,BI={onError:function(t){Zl=!0,qd=t}};function VI(t,e,n,s,r,a,l,c,d){Zl=!1,qd=null,zI.apply(BI,arguments)}function HI(t,e,n,s,r,a,l,c,d){if(VI.apply(this,arguments),Zl){if(Zl){var h=qd;Zl=!1,qd=null}else throw Error(F(198));Yd||(Yd=!0,Yp=h)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gv(t){if(Oi(t)!==t)throw Error(F(188))}function GI(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Gv(r),t;if(a===s)return Gv(r),e;a=a.sibling}throw Error(F(188))}if(n.return!==s.return)n=r,s=a;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,s=a;break}if(c===s){l=!0,s=r,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,s=r;break}if(c===s){l=!0,s=a,n=r;break}c=c.sibling}if(!l)throw Error(F(189))}}if(n.alternate!==s)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Vb(t){return t=GI(t),t!==null?Hb(t):null}function Hb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hb(t);if(e!==null)return e;t=t.sibling}return null}var Gb=fn.unstable_scheduleCallback,Kv=fn.unstable_cancelCallback,KI=fn.unstable_shouldYield,qI=fn.unstable_requestPaint,Ze=fn.unstable_now,YI=fn.unstable_getCurrentPriorityLevel,gg=fn.unstable_ImmediatePriority,Kb=fn.unstable_UserBlockingPriority,Qd=fn.unstable_NormalPriority,QI=fn.unstable_LowPriority,qb=fn.unstable_IdlePriority,zu=null,os=null;function JI(t){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(zu,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:ek,XI=Math.log,ZI=Math.LN2;function ek(t){return t>>>=0,t===0?32:31-(XI(t)/ZI|0)|0}var pd=64,md=4194304;function ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jd(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~r;c!==0?s=ql(c):(a&=l,a!==0&&(s=ql(a)))}else l=n&~r,l!==0?s=ql(l):a!==0&&(s=ql(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,a=e&-e,r>=a||r===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-zn(e),r=1<<n,s|=t[n],e&=~r;return s}function tk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nk(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-zn(a),c=1<<l,d=r[l];d===-1?(!(c&n)||c&s)&&(r[l]=tk(c,e)):d<=e&&(t.expiredLanes|=c),a&=~c}}function Qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yb(){var t=pd;return pd<<=1,!(pd&4194240)&&(pd=64),t}function qf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function sk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-zn(n),a=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~a}}function xg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-zn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Ee=0;function Qb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jb,vg,Xb,Zb,ew,Jp=!1,gd=[],gr=null,xr=null,vr=null,vo=new Map,yo=new Map,cr=[],rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qv(t,e){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(e.pointerId)}}function Al(t,e,n,s,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},e!==null&&(e=Zo(e),e!==null&&vg(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ik(t,e,n,s,r){switch(e){case"focusin":return gr=Al(gr,t,e,n,s,r),!0;case"dragenter":return xr=Al(xr,t,e,n,s,r),!0;case"mouseover":return vr=Al(vr,t,e,n,s,r),!0;case"pointerover":var a=r.pointerId;return vo.set(a,Al(vo.get(a)||null,t,e,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,yo.set(a,Al(yo.get(a)||null,t,e,n,s,r)),!0}return!1}function tw(t){var e=ui(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=Bb(n),e!==null){t.blockedOn=e,ew(t.priority,function(){Xb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Gp=s,n.target.dispatchEvent(s),Gp=null}else return e=Zo(n),e!==null&&vg(e),t.blockedOn=n,!1;e.shift()}return!0}function Yv(t,e,n){Ad(t)&&n.delete(e)}function ak(){Jp=!1,gr!==null&&Ad(gr)&&(gr=null),xr!==null&&Ad(xr)&&(xr=null),vr!==null&&Ad(vr)&&(vr=null),vo.forEach(Yv),yo.forEach(Yv)}function Ol(t,e){t.blockedOn===e&&(t.blockedOn=null,Jp||(Jp=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,ak)))}function _o(t){function e(r){return Ol(r,t)}if(0<gd.length){Ol(gd[0],t);for(var n=1;n<gd.length;n++){var s=gd[n];s.blockedOn===t&&(s.blockedOn=null)}}for(gr!==null&&Ol(gr,t),xr!==null&&Ol(xr,t),vr!==null&&Ol(vr,t),vo.forEach(e),yo.forEach(e),n=0;n<cr.length;n++)s=cr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)tw(n),n.blockedOn===null&&cr.shift()}var Sa=Ks.ReactCurrentBatchConfig,Xd=!0;function lk(t,e,n,s){var r=Ee,a=Sa.transition;Sa.transition=null;try{Ee=1,yg(t,e,n,s)}finally{Ee=r,Sa.transition=a}}function ok(t,e,n,s){var r=Ee,a=Sa.transition;Sa.transition=null;try{Ee=4,yg(t,e,n,s)}finally{Ee=r,Sa.transition=a}}function yg(t,e,n,s){if(Xd){var r=Xp(t,e,n,s);if(r===null)rp(t,e,s,Zd,n),qv(t,s);else if(ik(r,t,e,n,s))s.stopPropagation();else if(qv(t,s),e&4&&-1<rk.indexOf(t)){for(;r!==null;){var a=Zo(r);if(a!==null&&Jb(a),a=Xp(t,e,n,s),a===null&&rp(t,e,s,Zd,n),a===r)break;r=a}r!==null&&s.stopPropagation()}else rp(t,e,s,null,n)}}var Zd=null;function Xp(t,e,n,s){if(Zd=null,t=mg(s),t=ui(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zd=t,null}function nw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YI()){case gg:return 1;case Kb:return 4;case Qd:case QI:return 16;case qb:return 536870912;default:return 16}default:return 16}}var ur=null,_g=null,Od=null;function sw(){if(Od)return Od;var t,e=_g,n=e.length,s,r="value"in ur?ur.value:ur.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(s=1;s<=l&&e[n-s]===r[a-s];s++);return Od=r.slice(t,1<s?1-s:void 0)}function Dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xd(){return!0}function Qv(){return!1}function xn(t){function e(n,s,r,a,l){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?xd:Qv,this.isPropagationStopped=Qv,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xd)},persist:function(){},isPersistent:xd}),e}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bg=xn(Xa),Xo=Ge({},Xa,{view:0,detail:0}),ck=xn(Xo),Yf,Qf,Dl,Bu=Ge({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dl&&(Dl&&t.type==="mousemove"?(Yf=t.screenX-Dl.screenX,Qf=t.screenY-Dl.screenY):Qf=Yf=0,Dl=t),Yf)},movementY:function(t){return"movementY"in t?t.movementY:Qf}}),Jv=xn(Bu),dk=Ge({},Bu,{dataTransfer:0}),uk=xn(dk),hk=Ge({},Xo,{relatedTarget:0}),Jf=xn(hk),fk=Ge({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),pk=xn(fk),mk=Ge({},Xa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gk=xn(mk),xk=Ge({},Xa,{data:0}),Xv=xn(xk),vk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_k[t])?!!e[t]:!1}function wg(){return bk}var wk=Ge({},Xo,{key:function(t){if(t.key){var e=vk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wg,charCode:function(t){return t.type==="keypress"?Dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nk=xn(wk),jk=Ge({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zv=xn(jk),Ck=Ge({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wg}),Sk=xn(Ck),Ik=Ge({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),kk=xn(Ik),Ek=Ge({},Bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tk=xn(Ek),Rk=[9,13,27,32],Ng=$s&&"CompositionEvent"in window,eo=null;$s&&"documentMode"in document&&(eo=document.documentMode);var Pk=$s&&"TextEvent"in window&&!eo,rw=$s&&(!Ng||eo&&8<eo&&11>=eo),ey=" ",ty=!1;function iw(t,e){switch(t){case"keyup":return Rk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ha=!1;function Ak(t,e){switch(t){case"compositionend":return aw(e);case"keypress":return e.which!==32?null:(ty=!0,ey);case"textInput":return t=e.data,t===ey&&ty?null:t;default:return null}}function Ok(t,e){if(ha)return t==="compositionend"||!Ng&&iw(t,e)?(t=sw(),Od=_g=ur=null,ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rw&&e.locale!=="ko"?null:e.data;default:return null}}var Dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dk[t.type]:e==="textarea"}function lw(t,e,n,s){Fb(s),e=eu(e,"onChange"),0<e.length&&(n=new bg("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var to=null,bo=null;function Mk(t){vw(t,0)}function Vu(t){var e=ma(t);if(Rb(e))return t}function Lk(t,e){if(t==="change")return e}var ow=!1;if($s){var Xf;if($s){var Zf="oninput"in document;if(!Zf){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),Zf=typeof sy.oninput=="function"}Xf=Zf}else Xf=!1;ow=Xf&&(!document.documentMode||9<document.documentMode)}function ry(){to&&(to.detachEvent("onpropertychange",cw),bo=to=null)}function cw(t){if(t.propertyName==="value"&&Vu(bo)){var e=[];lw(e,bo,t,mg(t)),zb(Mk,e)}}function Fk(t,e,n){t==="focusin"?(ry(),to=e,bo=n,to.attachEvent("onpropertychange",cw)):t==="focusout"&&ry()}function Uk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu(bo)}function $k(t,e){if(t==="click")return Vu(e)}function Wk(t,e){if(t==="input"||t==="change")return Vu(e)}function zk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:zk;function wo(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Op.call(e,r)||!Gn(t[r],e[r]))return!1}return!0}function iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ay(t,e){var n=iy(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iy(n)}}function dw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uw(){for(var t=window,e=Kd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kd(t.document)}return e}function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bk(t){var e=uw(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dw(n.ownerDocument.documentElement,n)){if(s!==null&&jg(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,a=Math.min(s.start,r);s=s.end===void 0?a:Math.min(s.end,r),!t.extend&&a>s&&(r=s,s=a,a=r),r=ay(n,a);var l=ay(n,s);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vk=$s&&"documentMode"in document&&11>=document.documentMode,fa=null,Zp=null,no=null,em=!1;function ly(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;em||fa==null||fa!==Kd(s)||(s=fa,"selectionStart"in s&&jg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),no&&wo(no,s)||(no=s,s=eu(Zp,"onSelect"),0<s.length&&(e=new bg("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=fa)))}function vd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pa={animationend:vd("Animation","AnimationEnd"),animationiteration:vd("Animation","AnimationIteration"),animationstart:vd("Animation","AnimationStart"),transitionend:vd("Transition","TransitionEnd")},ep={},hw={};$s&&(hw=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Hu(t){if(ep[t])return ep[t];if(!pa[t])return t;var e=pa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hw)return ep[t]=e[n];return t}var fw=Hu("animationend"),pw=Hu("animationiteration"),mw=Hu("animationstart"),gw=Hu("transitionend"),xw=new Map,oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){xw.set(t,e),Ai(e,[t])}for(var tp=0;tp<oy.length;tp++){var np=oy[tp],Hk=np.toLowerCase(),Gk=np[0].toUpperCase()+np.slice(1);Fr(Hk,"on"+Gk)}Fr(fw,"onAnimationEnd");Fr(pw,"onAnimationIteration");Fr(mw,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(gw,"onTransitionEnd");Da("onMouseEnter",["mouseout","mouseover"]);Da("onMouseLeave",["mouseout","mouseover"]);Da("onPointerEnter",["pointerout","pointerover"]);Da("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function cy(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,HI(s,e,void 0,t),t.currentTarget=null}function vw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var l=s.length-1;0<=l;l--){var c=s[l],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==a&&r.isPropagationStopped())break e;cy(r,c,h),a=d}else for(l=0;l<s.length;l++){if(c=s[l],d=c.instance,h=c.currentTarget,c=c.listener,d!==a&&r.isPropagationStopped())break e;cy(r,c,h),a=d}}}if(Yd)throw t=Yp,Yd=!1,Yp=null,t}function Fe(t,e){var n=e[im];n===void 0&&(n=e[im]=new Set);var s=t+"__bubble";n.has(s)||(yw(e,t,2,!1),n.add(s))}function sp(t,e,n){var s=0;e&&(s|=4),yw(n,t,s,e)}var yd="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[yd]){t[yd]=!0,Sb.forEach(function(n){n!=="selectionchange"&&(Kk.has(n)||sp(n,!1,t),sp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yd]||(e[yd]=!0,sp("selectionchange",!1,e))}}function yw(t,e,n,s){switch(nw(e)){case 1:var r=lk;break;case 4:r=ok;break;default:r=yg}n=r.bind(null,e,n,t),r=void 0,!qp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function rp(t,e,n,s,r){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var c=s.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;c!==null;){if(l=ui(c),l===null)return;if(d=l.tag,d===5||d===6){s=a=l;continue e}c=c.parentNode}}s=s.return}zb(function(){var h=a,g=mg(n),m=[];e:{var y=xw.get(t);if(y!==void 0){var I=bg,T=t;switch(t){case"keypress":if(Dd(n)===0)break e;case"keydown":case"keyup":I=Nk;break;case"focusin":T="focus",I=Jf;break;case"focusout":T="blur",I=Jf;break;case"beforeblur":case"afterblur":I=Jf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=uk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Sk;break;case fw:case pw:case mw:I=pk;break;case gw:I=kk;break;case"scroll":I=ck;break;case"wheel":I=Tk;break;case"copy":case"cut":case"paste":I=gk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Zv}var L=(e&4)!==0,ne=!L&&t==="scroll",C=L?y!==null?y+"Capture":null:y;L=[];for(var N=h,S;N!==null;){S=N;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,C!==null&&(R=xo(N,C),R!=null&&L.push(jo(N,R,S)))),ne)break;N=N.return}0<L.length&&(y=new I(y,T,null,n,g),m.push({event:y,listeners:L}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",y&&n!==Gp&&(T=n.relatedTarget||n.fromElement)&&(ui(T)||T[Ws]))break e;if((I||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,I?(T=n.relatedTarget||n.toElement,I=h,T=T?ui(T):null,T!==null&&(ne=Oi(T),T!==ne||T.tag!==5&&T.tag!==6)&&(T=null)):(I=null,T=h),I!==T)){if(L=Jv,R="onMouseLeave",C="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(L=Zv,R="onPointerLeave",C="onPointerEnter",N="pointer"),ne=I==null?y:ma(I),S=T==null?y:ma(T),y=new L(R,N+"leave",I,n,g),y.target=ne,y.relatedTarget=S,R=null,ui(g)===h&&(L=new L(C,N+"enter",T,n,g),L.target=S,L.relatedTarget=ne,R=L),ne=R,I&&T)t:{for(L=I,C=T,N=0,S=L;S;S=la(S))N++;for(S=0,R=C;R;R=la(R))S++;for(;0<N-S;)L=la(L),N--;for(;0<S-N;)C=la(C),S--;for(;N--;){if(L===C||C!==null&&L===C.alternate)break t;L=la(L),C=la(C)}L=null}else L=null;I!==null&&dy(m,y,I,L,!1),T!==null&&ne!==null&&dy(m,ne,T,L,!0)}}e:{if(y=h?ma(h):window,I=y.nodeName&&y.nodeName.toLowerCase(),I==="select"||I==="input"&&y.type==="file")var K=Lk;else if(ny(y))if(ow)K=Wk;else{K=Uk;var B=Fk}else(I=y.nodeName)&&I.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(K=$k);if(K&&(K=K(t,h))){lw(m,K,n,g);break e}B&&B(t,y,h),t==="focusout"&&(B=y._wrapperState)&&B.controlled&&y.type==="number"&&Wp(y,"number",y.value)}switch(B=h?ma(h):window,t){case"focusin":(ny(B)||B.contentEditable==="true")&&(fa=B,Zp=h,no=null);break;case"focusout":no=Zp=fa=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,ly(m,n,g);break;case"selectionchange":if(Vk)break;case"keydown":case"keyup":ly(m,n,g)}var J;if(Ng)e:{switch(t){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else ha?iw(t,n)&&(Z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Z="onCompositionStart");Z&&(rw&&n.locale!=="ko"&&(ha||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&ha&&(J=sw()):(ur=g,_g="value"in ur?ur.value:ur.textContent,ha=!0)),B=eu(h,Z),0<B.length&&(Z=new Xv(Z,t,null,n,g),m.push({event:Z,listeners:B}),J?Z.data=J:(J=aw(n),J!==null&&(Z.data=J)))),(J=Pk?Ak(t,n):Ok(t,n))&&(h=eu(h,"onBeforeInput"),0<h.length&&(g=new Xv("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:h}),g.data=J))}vw(m,e)})}function jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eu(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=xo(t,n),a!=null&&s.unshift(jo(t,a,r)),a=xo(t,e),a!=null&&s.push(jo(t,a,r))),t=t.return}return s}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dy(t,e,n,s,r){for(var a=e._reactName,l=[];n!==null&&n!==s;){var c=n,d=c.alternate,h=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&h!==null&&(c=h,r?(d=xo(n,a),d!=null&&l.unshift(jo(n,d,c))):r||(d=xo(n,a),d!=null&&l.push(jo(n,d,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var qk=/\r\n?/g,Yk=/\u0000|\uFFFD/g;function uy(t){return(typeof t=="string"?t:""+t).replace(qk,`
`).replace(Yk,"")}function _d(t,e,n){if(e=uy(e),uy(t)!==e&&n)throw Error(F(425))}function tu(){}var tm=null,nm=null;function sm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rm=typeof setTimeout=="function"?setTimeout:void 0,Qk=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,Jk=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(t){return hy.resolve(null).then(t).catch(Xk)}:rm;function Xk(t){setTimeout(function(){throw t})}function ip(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),_o(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);_o(e)}function yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Za=Math.random().toString(36).slice(2),ns="__reactFiber$"+Za,Co="__reactProps$"+Za,Ws="__reactContainer$"+Za,im="__reactEvents$"+Za,Zk="__reactListeners$"+Za,eE="__reactHandles$"+Za;function ui(t){var e=t[ns];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ws]||n[ns]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fy(t);t!==null;){if(n=t[ns])return n;t=fy(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[ns]||t[Ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Gu(t){return t[Co]||null}var am=[],ga=-1;function Ur(t){return{current:t}}function Ue(t){0>ga||(t.current=am[ga],am[ga]=null,ga--)}function Oe(t,e){ga++,am[ga]=t.current,t.current=e}var Er={},Dt=Ur(Er),Xt=Ur(!1),bi=Er;function Ma(t,e){var n=t.type.contextTypes;if(!n)return Er;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Zt(t){return t=t.childContextTypes,t!=null}function nu(){Ue(Xt),Ue(Dt)}function py(t,e,n){if(Dt.current!==Er)throw Error(F(168));Oe(Dt,e),Oe(Xt,n)}function _w(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(F(108,FI(t)||"Unknown",r));return Ge({},n,s)}function su(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,bi=Dt.current,Oe(Dt,t),Oe(Xt,Xt.current),!0}function my(t,e,n){var s=t.stateNode;if(!s)throw Error(F(169));n?(t=_w(t,e,bi),s.__reactInternalMemoizedMergedChildContext=t,Ue(Xt),Ue(Dt),Oe(Dt,t)):Ue(Xt),Oe(Xt,n)}var Ts=null,Ku=!1,ap=!1;function bw(t){Ts===null?Ts=[t]:Ts.push(t)}function tE(t){Ku=!0,bw(t)}function $r(){if(!ap&&Ts!==null){ap=!0;var t=0,e=Ee;try{var n=Ts;for(Ee=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ts=null,Ku=!1}catch(r){throw Ts!==null&&(Ts=Ts.slice(t+1)),Gb(gg,$r),r}finally{Ee=e,ap=!1}}return null}var xa=[],va=0,ru=null,iu=0,bn=[],wn=0,wi=null,Rs=1,Ps="";function li(t,e){xa[va++]=iu,xa[va++]=ru,ru=t,iu=e}function ww(t,e,n){bn[wn++]=Rs,bn[wn++]=Ps,bn[wn++]=wi,wi=t;var s=Rs;t=Ps;var r=32-zn(s)-1;s&=~(1<<r),n+=1;var a=32-zn(e)+r;if(30<a){var l=r-r%5;a=(s&(1<<l)-1).toString(32),s>>=l,r-=l,Rs=1<<32-zn(e)+r|n<<r|s,Ps=a+t}else Rs=1<<a|n<<r|s,Ps=t}function Cg(t){t.return!==null&&(li(t,1),ww(t,1,0))}function Sg(t){for(;t===ru;)ru=xa[--va],xa[va]=null,iu=xa[--va],xa[va]=null;for(;t===wi;)wi=bn[--wn],bn[wn]=null,Ps=bn[--wn],bn[wn]=null,Rs=bn[--wn],bn[wn]=null}var hn=null,dn=null,$e=!1,$n=null;function Nw(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,dn=yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wi!==null?{id:Rs,overflow:Ps}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,dn=null,!0):!1;default:return!1}}function lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function om(t){if($e){var e=dn;if(e){var n=e;if(!gy(t,e)){if(lm(t))throw Error(F(418));e=yr(n.nextSibling);var s=hn;e&&gy(t,e)?Nw(s,n):(t.flags=t.flags&-4097|2,$e=!1,hn=t)}}else{if(lm(t))throw Error(F(418));t.flags=t.flags&-4097|2,$e=!1,hn=t}}}function xy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function bd(t){if(t!==hn)return!1;if(!$e)return xy(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sm(t.type,t.memoizedProps)),e&&(e=dn)){if(lm(t))throw jw(),Error(F(418));for(;e;)Nw(t,e),e=yr(e.nextSibling)}if(xy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=yr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=hn?yr(t.stateNode.nextSibling):null;return!0}function jw(){for(var t=dn;t;)t=yr(t.nextSibling)}function La(){dn=hn=null,$e=!1}function Ig(t){$n===null?$n=[t]:$n.push(t)}var nE=Ks.ReactCurrentBatchConfig;function Ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var s=n.stateNode}if(!s)throw Error(F(147,t));var r=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=r.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function wd(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vy(t){var e=t._init;return e(t._payload)}function Cw(t){function e(C,N){if(t){var S=C.deletions;S===null?(C.deletions=[N],C.flags|=16):S.push(N)}}function n(C,N){if(!t)return null;for(;N!==null;)e(C,N),N=N.sibling;return null}function s(C,N){for(C=new Map;N!==null;)N.key!==null?C.set(N.key,N):C.set(N.index,N),N=N.sibling;return C}function r(C,N){return C=Nr(C,N),C.index=0,C.sibling=null,C}function a(C,N,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<N?(C.flags|=2,N):S):(C.flags|=2,N)):(C.flags|=1048576,N)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,N,S,R){return N===null||N.tag!==6?(N=fp(S,C.mode,R),N.return=C,N):(N=r(N,S),N.return=C,N)}function d(C,N,S,R){var K=S.type;return K===ua?g(C,N,S.props.children,R,S.key):N!==null&&(N.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===lr&&vy(K)===N.type)?(R=r(N,S.props),R.ref=Ml(C,N,S),R.return=C,R):(R=zd(S.type,S.key,S.props,null,C.mode,R),R.ref=Ml(C,N,S),R.return=C,R)}function h(C,N,S,R){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=pp(S,C.mode,R),N.return=C,N):(N=r(N,S.children||[]),N.return=C,N)}function g(C,N,S,R,K){return N===null||N.tag!==7?(N=xi(S,C.mode,R,K),N.return=C,N):(N=r(N,S),N.return=C,N)}function m(C,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return N=fp(""+N,C.mode,S),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ud:return S=zd(N.type,N.key,N.props,null,C.mode,S),S.ref=Ml(C,null,N),S.return=C,S;case da:return N=pp(N,C.mode,S),N.return=C,N;case lr:var R=N._init;return m(C,R(N._payload),S)}if(Kl(N)||Rl(N))return N=xi(N,C.mode,S,null),N.return=C,N;wd(C,N)}return null}function y(C,N,S,R){var K=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return K!==null?null:c(C,N,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ud:return S.key===K?d(C,N,S,R):null;case da:return S.key===K?h(C,N,S,R):null;case lr:return K=S._init,y(C,N,K(S._payload),R)}if(Kl(S)||Rl(S))return K!==null?null:g(C,N,S,R,null);wd(C,S)}return null}function I(C,N,S,R,K){if(typeof R=="string"&&R!==""||typeof R=="number")return C=C.get(S)||null,c(N,C,""+R,K);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ud:return C=C.get(R.key===null?S:R.key)||null,d(N,C,R,K);case da:return C=C.get(R.key===null?S:R.key)||null,h(N,C,R,K);case lr:var B=R._init;return I(C,N,S,B(R._payload),K)}if(Kl(R)||Rl(R))return C=C.get(S)||null,g(N,C,R,K,null);wd(N,R)}return null}function T(C,N,S,R){for(var K=null,B=null,J=N,Z=N=0,Te=null;J!==null&&Z<S.length;Z++){J.index>Z?(Te=J,J=null):Te=J.sibling;var pe=y(C,J,S[Z],R);if(pe===null){J===null&&(J=Te);break}t&&J&&pe.alternate===null&&e(C,J),N=a(pe,N,Z),B===null?K=pe:B.sibling=pe,B=pe,J=Te}if(Z===S.length)return n(C,J),$e&&li(C,Z),K;if(J===null){for(;Z<S.length;Z++)J=m(C,S[Z],R),J!==null&&(N=a(J,N,Z),B===null?K=J:B.sibling=J,B=J);return $e&&li(C,Z),K}for(J=s(C,J);Z<S.length;Z++)Te=I(J,C,Z,S[Z],R),Te!==null&&(t&&Te.alternate!==null&&J.delete(Te.key===null?Z:Te.key),N=a(Te,N,Z),B===null?K=Te:B.sibling=Te,B=Te);return t&&J.forEach(function(Mt){return e(C,Mt)}),$e&&li(C,Z),K}function L(C,N,S,R){var K=Rl(S);if(typeof K!="function")throw Error(F(150));if(S=K.call(S),S==null)throw Error(F(151));for(var B=K=null,J=N,Z=N=0,Te=null,pe=S.next();J!==null&&!pe.done;Z++,pe=S.next()){J.index>Z?(Te=J,J=null):Te=J.sibling;var Mt=y(C,J,pe.value,R);if(Mt===null){J===null&&(J=Te);break}t&&J&&Mt.alternate===null&&e(C,J),N=a(Mt,N,Z),B===null?K=Mt:B.sibling=Mt,B=Mt,J=Te}if(pe.done)return n(C,J),$e&&li(C,Z),K;if(J===null){for(;!pe.done;Z++,pe=S.next())pe=m(C,pe.value,R),pe!==null&&(N=a(pe,N,Z),B===null?K=pe:B.sibling=pe,B=pe);return $e&&li(C,Z),K}for(J=s(C,J);!pe.done;Z++,pe=S.next())pe=I(J,C,Z,pe.value,R),pe!==null&&(t&&pe.alternate!==null&&J.delete(pe.key===null?Z:pe.key),N=a(pe,N,Z),B===null?K=pe:B.sibling=pe,B=pe);return t&&J.forEach(function(Vr){return e(C,Vr)}),$e&&li(C,Z),K}function ne(C,N,S,R){if(typeof S=="object"&&S!==null&&S.type===ua&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ud:e:{for(var K=S.key,B=N;B!==null;){if(B.key===K){if(K=S.type,K===ua){if(B.tag===7){n(C,B.sibling),N=r(B,S.props.children),N.return=C,C=N;break e}}else if(B.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===lr&&vy(K)===B.type){n(C,B.sibling),N=r(B,S.props),N.ref=Ml(C,B,S),N.return=C,C=N;break e}n(C,B);break}else e(C,B);B=B.sibling}S.type===ua?(N=xi(S.props.children,C.mode,R,S.key),N.return=C,C=N):(R=zd(S.type,S.key,S.props,null,C.mode,R),R.ref=Ml(C,N,S),R.return=C,C=R)}return l(C);case da:e:{for(B=S.key;N!==null;){if(N.key===B)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){n(C,N.sibling),N=r(N,S.children||[]),N.return=C,C=N;break e}else{n(C,N);break}else e(C,N);N=N.sibling}N=pp(S,C.mode,R),N.return=C,C=N}return l(C);case lr:return B=S._init,ne(C,N,B(S._payload),R)}if(Kl(S))return T(C,N,S,R);if(Rl(S))return L(C,N,S,R);wd(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,N!==null&&N.tag===6?(n(C,N.sibling),N=r(N,S),N.return=C,C=N):(n(C,N),N=fp(S,C.mode,R),N.return=C,C=N),l(C)):n(C,N)}return ne}var Fa=Cw(!0),Sw=Cw(!1),au=Ur(null),lu=null,ya=null,kg=null;function Eg(){kg=ya=lu=null}function Tg(t){var e=au.current;Ue(au),t._currentValue=e}function cm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Ia(t,e){lu=t,kg=ya=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(kg!==t)if(t={context:t,memoizedValue:e,next:null},ya===null){if(lu===null)throw Error(F(308));ya=t,lu.dependencies={lanes:0,firstContext:t}}else ya=ya.next=t;return e}var hi=null;function Rg(t){hi===null?hi=[t]:hi.push(t)}function Iw(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Rg(e)):(n.next=r.next,r.next=n),e.interleaved=n,zs(t,s)}function zs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Pg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ls(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _r(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,zs(t,n)}return r=s.interleaved,r===null?(e.next=e,Rg(s)):(e.next=r.next,r.next=e),s.interleaved=e,zs(t,n)}function Md(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,xg(t,n)}}function yy(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ou(t,e,n,s){var r=t.updateQueue;or=!1;var a=r.firstBaseUpdate,l=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var d=c,h=d.next;d.next=null,l===null?a=h:l.next=h,l=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==l&&(c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=d))}if(a!==null){var m=r.baseState;l=0,g=h=d=null,c=a;do{var y=c.lane,I=c.eventTime;if((s&y)===y){g!==null&&(g=g.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,L=c;switch(y=e,I=n,L.tag){case 1:if(T=L.payload,typeof T=="function"){m=T.call(I,m,y);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=L.payload,y=typeof T=="function"?T.call(I,m,y):T,y==null)break e;m=Ge({},m,y);break e;case 2:or=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[c]:y.push(c))}else I={eventTime:I,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(h=g=I,d=m):g=g.next=I,l|=y;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;y=c,c=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);if(g===null&&(d=m),r.baseState=d,r.firstBaseUpdate=h,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else a===null&&(r.shared.lanes=0);ji|=l,t.lanes=l,t.memoizedState=m}}function _y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(F(191,r));r.call(s)}}}var ec={},cs=Ur(ec),So=Ur(ec),Io=Ur(ec);function fi(t){if(t===ec)throw Error(F(174));return t}function Ag(t,e){switch(Oe(Io,e),Oe(So,t),Oe(cs,ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bp(e,t)}Ue(cs),Oe(cs,e)}function Ua(){Ue(cs),Ue(So),Ue(Io)}function Ew(t){fi(Io.current);var e=fi(cs.current),n=Bp(e,t.type);e!==n&&(Oe(So,t),Oe(cs,n))}function Og(t){So.current===t&&(Ue(cs),Ue(So))}var Be=Ur(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lp=[];function Dg(){for(var t=0;t<lp.length;t++)lp[t]._workInProgressVersionPrimary=null;lp.length=0}var Ld=Ks.ReactCurrentDispatcher,op=Ks.ReactCurrentBatchConfig,Ni=0,He=null,it=null,gt=null,du=!1,so=!1,ko=0,sE=0;function Rt(){throw Error(F(321))}function Mg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function Lg(t,e,n,s,r,a){if(Ni=a,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ld.current=t===null||t.memoizedState===null?lE:oE,t=n(s,r),so){a=0;do{if(so=!1,ko=0,25<=a)throw Error(F(301));a+=1,gt=it=null,e.updateQueue=null,Ld.current=cE,t=n(s,r)}while(so)}if(Ld.current=uu,e=it!==null&&it.next!==null,Ni=0,gt=it=He=null,du=!1,e)throw Error(F(300));return t}function Fg(){var t=ko!==0;return ko=0,t}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?He.memoizedState=gt=t:gt=gt.next=t,gt}function Tn(){if(it===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=gt===null?He.memoizedState:gt.next;if(e!==null)gt=e,it=t;else{if(t===null)throw Error(F(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},gt===null?He.memoizedState=gt=t:gt=gt.next=t}return gt}function Eo(t,e){return typeof e=="function"?e(t):e}function cp(t){var e=Tn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var s=it,r=s.baseQueue,a=n.pending;if(a!==null){if(r!==null){var l=r.next;r.next=a.next,a.next=l}s.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,s=s.baseState;var c=l=null,d=null,h=a;do{var g=h.lane;if((Ni&g)===g)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:t(s,h.action);else{var m={lane:g,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=m,l=s):d=d.next=m,He.lanes|=g,ji|=g}h=h.next}while(h!==null&&h!==a);d===null?l=s:d.next=c,Gn(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=d,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do a=r.lane,He.lanes|=a,ji|=a,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dp(t){var e=Tn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do a=t(a,l.action),l=l.next;while(l!==r);Gn(a,e.memoizedState)||(Qt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function Tw(){}function Rw(t,e){var n=He,s=Tn(),r=e(),a=!Gn(s.memoizedState,r);if(a&&(s.memoizedState=r,Qt=!0),s=s.queue,Ug(Ow.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,To(9,Aw.bind(null,n,s,r,e),void 0,null),_t===null)throw Error(F(349));Ni&30||Pw(n,e,r)}return r}function Pw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Aw(t,e,n,s){e.value=n,e.getSnapshot=s,Dw(e)&&Mw(t)}function Ow(t,e,n){return n(function(){Dw(e)&&Mw(t)})}function Dw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function Mw(t){var e=zs(t,1);e!==null&&Bn(e,t,1,-1)}function by(t){var e=ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:t},e.queue=t,t=t.dispatch=aE.bind(null,He,t),[e.memoizedState,t]}function To(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Lw(){return Tn().memoizedState}function Fd(t,e,n,s){var r=ts();He.flags|=t,r.memoizedState=To(1|e,n,void 0,s===void 0?null:s)}function qu(t,e,n,s){var r=Tn();s=s===void 0?null:s;var a=void 0;if(it!==null){var l=it.memoizedState;if(a=l.destroy,s!==null&&Mg(s,l.deps)){r.memoizedState=To(e,n,a,s);return}}He.flags|=t,r.memoizedState=To(1|e,n,a,s)}function wy(t,e){return Fd(8390656,8,t,e)}function Ug(t,e){return qu(2048,8,t,e)}function Fw(t,e){return qu(4,2,t,e)}function Uw(t,e){return qu(4,4,t,e)}function $w(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ww(t,e,n){return n=n!=null?n.concat([t]):null,qu(4,4,$w.bind(null,e,t),n)}function $g(){}function zw(t,e){var n=Tn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Mg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Bw(t,e){var n=Tn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Mg(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Vw(t,e,n){return Ni&21?(Gn(n,e)||(n=Yb(),He.lanes|=n,ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function rE(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var s=op.transition;op.transition={};try{t(!1),e()}finally{Ee=n,op.transition=s}}function Hw(){return Tn().memoizedState}function iE(t,e,n){var s=wr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Gw(t))Kw(e,n);else if(n=Iw(t,e,n,s),n!==null){var r=$t();Bn(n,t,s,r),qw(n,e,s)}}function aE(t,e,n){var s=wr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gw(t))Kw(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,n);if(r.hasEagerState=!0,r.eagerState=c,Gn(c,l)){var d=e.interleaved;d===null?(r.next=r,Rg(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=Iw(t,e,r,s),n!==null&&(r=$t(),Bn(n,t,s,r),qw(n,e,s))}}function Gw(t){var e=t.alternate;return t===He||e!==null&&e===He}function Kw(t,e){so=du=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qw(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,xg(t,n)}}var uu={readContext:En,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},lE={readContext:En,useCallback:function(t,e){return ts().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:wy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fd(4194308,4,$w.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fd(4,2,t,e)},useMemo:function(t,e){var n=ts();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=ts();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=iE.bind(null,He,t),[s.memoizedState,t]},useRef:function(t){var e=ts();return t={current:t},e.memoizedState=t},useState:by,useDebugValue:$g,useDeferredValue:function(t){return ts().memoizedState=t},useTransition:function(){var t=by(!1),e=t[0];return t=rE.bind(null,t[1]),ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=He,r=ts();if($e){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),_t===null)throw Error(F(349));Ni&30||Pw(s,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,wy(Ow.bind(null,s,a,t),[t]),s.flags|=2048,To(9,Aw.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=ts(),e=_t.identifierPrefix;if($e){var n=Ps,s=Rs;n=(s&~(1<<32-zn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=ko++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oE={readContext:En,useCallback:zw,useContext:En,useEffect:Ug,useImperativeHandle:Ww,useInsertionEffect:Fw,useLayoutEffect:Uw,useMemo:Bw,useReducer:cp,useRef:Lw,useState:function(){return cp(Eo)},useDebugValue:$g,useDeferredValue:function(t){var e=Tn();return Vw(e,it.memoizedState,t)},useTransition:function(){var t=cp(Eo)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Tw,useSyncExternalStore:Rw,useId:Hw,unstable_isNewReconciler:!1},cE={readContext:En,useCallback:zw,useContext:En,useEffect:Ug,useImperativeHandle:Ww,useInsertionEffect:Fw,useLayoutEffect:Uw,useMemo:Bw,useReducer:dp,useRef:Lw,useState:function(){return dp(Eo)},useDebugValue:$g,useDeferredValue:function(t){var e=Tn();return it===null?e.memoizedState=t:Vw(e,it.memoizedState,t)},useTransition:function(){var t=dp(Eo)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Tw,useSyncExternalStore:Rw,useId:Hw,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yu={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=$t(),r=wr(t),a=Ls(s,r);a.payload=e,n!=null&&(a.callback=n),e=_r(t,a,r),e!==null&&(Bn(e,t,r,s),Md(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=$t(),r=wr(t),a=Ls(s,r);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=_r(t,a,r),e!==null&&(Bn(e,t,r,s),Md(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),s=wr(t),r=Ls(n,s);r.tag=2,e!=null&&(r.callback=e),e=_r(t,r,s),e!==null&&(Bn(e,t,s,n),Md(e,t,s))}};function Ny(t,e,n,s,r,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,l):e.prototype&&e.prototype.isPureReactComponent?!wo(n,s)||!wo(r,a):!0}function Yw(t,e,n){var s=!1,r=Er,a=e.contextType;return typeof a=="object"&&a!==null?a=En(a):(r=Zt(e)?bi:Dt.current,s=e.contextTypes,a=(s=s!=null)?Ma(t,r):Er),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yu,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function jy(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Yu.enqueueReplaceState(e,e.state,null)}function um(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Pg(t);var a=e.contextType;typeof a=="object"&&a!==null?r.context=En(a):(a=Zt(e)?bi:Dt.current,r.context=Ma(t,a)),r.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(dm(t,e,a,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Yu.enqueueReplaceState(r,r.state,null),ou(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function $a(t,e){try{var n="",s=e;do n+=LI(s),s=s.return;while(s);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:r,digest:null}}function up(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dE=typeof WeakMap=="function"?WeakMap:Map;function Qw(t,e,n){n=Ls(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){fu||(fu=!0,wm=s),hm(t,e)},n}function Jw(t,e,n){n=Ls(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){hm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){hm(t,e),typeof s!="function"&&(br===null?br=new Set([this]):br.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Cy(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new dE;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=jE.bind(null,t,e,n),e.then(t,t))}function Sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Iy(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ls(-1,1),e.tag=2,_r(n,e,1))),n.lanes|=1),t)}var uE=Ks.ReactCurrentOwner,Qt=!1;function Ft(t,e,n,s){e.child=t===null?Sw(e,null,n,s):Fa(e,t.child,n,s)}function ky(t,e,n,s,r){n=n.render;var a=e.ref;return Ia(e,r),s=Lg(t,e,n,s,a,r),n=Fg(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bs(t,e,r)):($e&&n&&Cg(e),e.flags|=1,Ft(t,e,s,r),e.child)}function Ey(t,e,n,s,r){if(t===null){var a=n.type;return typeof a=="function"&&!qg(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Xw(t,e,a,s,r)):(t=zd(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&r)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(l,s)&&t.ref===e.ref)return Bs(t,e,r)}return e.flags|=1,t=Nr(a,s),t.ref=e.ref,t.return=e,e.child=t}function Xw(t,e,n,s,r){if(t!==null){var a=t.memoizedProps;if(wo(a,s)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=s=a,(t.lanes&r)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Bs(t,e,r)}return fm(t,e,n,s,r)}function Zw(t,e,n){var s=e.pendingProps,r=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(ba,an),an|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(ba,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Oe(ba,an),an|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,Oe(ba,an),an|=s;return Ft(t,e,r,n),e.child}function eN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fm(t,e,n,s,r){var a=Zt(n)?bi:Dt.current;return a=Ma(e,a),Ia(e,r),n=Lg(t,e,n,s,a,r),s=Fg(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bs(t,e,r)):($e&&s&&Cg(e),e.flags|=1,Ft(t,e,n,r),e.child)}function Ty(t,e,n,s,r){if(Zt(n)){var a=!0;su(e)}else a=!1;if(Ia(e,r),e.stateNode===null)Ud(t,e),Yw(e,n,s),um(e,n,s,r),s=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var d=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=En(h):(h=Zt(n)?bi:Dt.current,h=Ma(e,h));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==s||d!==h)&&jy(e,l,s,h),or=!1;var y=e.memoizedState;l.state=y,ou(e,s,l,r),d=e.memoizedState,c!==s||y!==d||Xt.current||or?(typeof g=="function"&&(dm(e,n,g,s),d=e.memoizedState),(c=or||Ny(e,n,c,s,y,d,h))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),l.props=s,l.state=d,l.context=h,s=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,kw(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:Fn(e.type,c),l.props=h,m=e.pendingProps,y=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=En(d):(d=Zt(n)?bi:Dt.current,d=Ma(e,d));var I=n.getDerivedStateFromProps;(g=typeof I=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==m||y!==d)&&jy(e,l,s,d),or=!1,y=e.memoizedState,l.state=y,ou(e,s,l,r);var T=e.memoizedState;c!==m||y!==T||Xt.current||or?(typeof I=="function"&&(dm(e,n,I,s),T=e.memoizedState),(h=or||Ny(e,n,h,s,y,T,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,T,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,T,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=T),l.props=s,l.state=T,l.context=d,s=h):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),s=!1)}return pm(t,e,n,s,a,r)}function pm(t,e,n,s,r,a){eN(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return r&&my(e,n,!1),Bs(t,e,a);s=e.stateNode,uE.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=Fa(e,t.child,null,a),e.child=Fa(e,null,c,a)):Ft(t,e,c,a),e.memoizedState=s.state,r&&my(e,n,!0),e.child}function tN(t){var e=t.stateNode;e.pendingContext?py(t,e.pendingContext,e.pendingContext!==e.context):e.context&&py(t,e.context,!1),Ag(t,e.containerInfo)}function Ry(t,e,n,s,r){return La(),Ig(r),e.flags|=256,Ft(t,e,n,s),e.child}var mm={dehydrated:null,treeContext:null,retryLane:0};function gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function nN(t,e,n){var s=e.pendingProps,r=Be.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Oe(Be,r&1),t===null)return om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Xu(l,s,0,null),t=xi(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=gm(n),e.memoizedState=mm,t):Wg(e,l));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return hE(t,e,l,s,c,r,n);if(a){a=s.fallback,l=e.mode,r=t.child,c=r.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=d,e.deletions=null):(s=Nr(r,d),s.subtreeFlags=r.subtreeFlags&14680064),c!==null?a=Nr(c,a):(a=xi(a,l,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=t.child.memoizedState,l=l===null?gm(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=mm,s}return a=t.child,t=a.sibling,s=Nr(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Wg(t,e){return e=Xu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nd(t,e,n,s){return s!==null&&Ig(s),Fa(e,t.child,null,n),t=Wg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hE(t,e,n,s,r,a,l){if(n)return e.flags&256?(e.flags&=-257,s=up(Error(F(422))),Nd(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,r=e.mode,s=Xu({mode:"visible",children:s.children},r,0,null),a=xi(a,r,l,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Fa(e,t.child,null,l),e.child.memoizedState=gm(l),e.memoizedState=mm,a);if(!(e.mode&1))return Nd(t,e,l,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(F(419)),s=up(a,s,void 0),Nd(t,e,l,s)}if(c=(l&t.childLanes)!==0,Qt||c){if(s=_t,s!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|l)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,zs(t,r),Bn(s,t,r,-1))}return Kg(),s=up(Error(F(421))),Nd(t,e,l,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=CE.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,dn=yr(r.nextSibling),hn=e,$e=!0,$n=null,t!==null&&(bn[wn++]=Rs,bn[wn++]=Ps,bn[wn++]=wi,Rs=t.id,Ps=t.overflow,wi=e),e=Wg(e,s.children),e.flags|=4096,e)}function Py(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),cm(t.return,e,n)}function hp(t,e,n,s,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function sN(t,e,n){var s=e.pendingProps,r=s.revealOrder,a=s.tail;if(Ft(t,e,s.children,n),s=Be.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Py(t,n,e);else if(t.tag===19)Py(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Oe(Be,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),hp(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}hp(e,!0,n,null,a);break;case"together":hp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fE(t,e,n){switch(e.tag){case 3:tN(e),La();break;case 5:Ew(e);break;case 1:Zt(e.type)&&su(e);break;case 4:Ag(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Oe(au,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Oe(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?nN(t,e,n):(Oe(Be,Be.current&1),t=Bs(t,e,n),t!==null?t.sibling:null);Oe(Be,Be.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return sN(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe(Be,Be.current),s)break;return null;case 22:case 23:return e.lanes=0,Zw(t,e,n)}return Bs(t,e,n)}var rN,xm,iN,aN;rN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xm=function(){};iN=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,fi(cs.current);var a=null;switch(n){case"input":r=Up(t,r),s=Up(t,s),a=[];break;case"select":r=Ge({},r,{value:void 0}),s=Ge({},s,{value:void 0}),a=[];break;case"textarea":r=zp(t,r),s=zp(t,s),a=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=tu)}Vp(n,s);var l;n=null;for(h in r)if(!s.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var c=r[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(mo.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var d=s[h];if(c=r!=null?r[h]:void 0,s.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(mo.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Fe("scroll",t),a||c===d||(a=[])):(a=a||[]).push(h,d))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};aN=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ll(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function pE(t,e,n){var s=e.pendingProps;switch(Sg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Zt(e.type)&&nu(),Pt(e),null;case 3:return s=e.stateNode,Ua(),Ue(Xt),Ue(Dt),Dg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(bd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$n!==null&&(Cm($n),$n=null))),xm(t,e),Pt(e),null;case 5:Og(e);var r=fi(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)iN(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(F(166));return Pt(e),null}if(t=fi(cs.current),bd(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[ns]=e,s[Co]=a,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(r=0;r<Yl.length;r++)Fe(Yl[r],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Wv(s,a),Fe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Fe("invalid",s);break;case"textarea":Bv(s,a),Fe("invalid",s)}Vp(n,a),r=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&_d(s.textContent,c,t),r=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&_d(s.textContent,c,t),r=["children",""+c]):mo.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Fe("scroll",s)}switch(n){case"input":hd(s),zv(s,a,!0);break;case"textarea":hd(s),Vv(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=tu)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ob(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(n,{is:s.is}):(t=l.createElement(n),n==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,n),t[ns]=e,t[Co]=s,rN(t,e,!1,!1),e.stateNode=t;e:{switch(l=Hp(n,s),n){case"dialog":Fe("cancel",t),Fe("close",t),r=s;break;case"iframe":case"object":case"embed":Fe("load",t),r=s;break;case"video":case"audio":for(r=0;r<Yl.length;r++)Fe(Yl[r],t);r=s;break;case"source":Fe("error",t),r=s;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),r=s;break;case"details":Fe("toggle",t),r=s;break;case"input":Wv(t,s),r=Up(t,s),Fe("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ge({},s,{value:void 0}),Fe("invalid",t);break;case"textarea":Bv(t,s),r=zp(t,s),Fe("invalid",t);break;default:r=s}Vp(n,r),c=r;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?Lb(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Db(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&go(t,d):typeof d=="number"&&go(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(mo.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Fe("scroll",t):d!=null&&ug(t,a,d,l))}switch(n){case"input":hd(t),zv(t,s,!1);break;case"textarea":hd(t),Vv(t);break;case"option":s.value!=null&&t.setAttribute("value",""+kr(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Na(t,!!s.multiple,a,!1):s.defaultValue!=null&&Na(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=tu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)aN(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(F(166));if(n=fi(Io.current),fi(cs.current),bd(e)){if(s=e.stateNode,n=e.memoizedProps,s[ns]=e,(a=s.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:_d(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_d(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ns]=e,e.stateNode=s}return Pt(e),null;case 13:if(Ue(Be),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&dn!==null&&e.mode&1&&!(e.flags&128))jw(),La(),e.flags|=98560,a=!1;else if(a=bd(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(F(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(F(317));a[ns]=e}else La(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),a=!1}else $n!==null&&(Cm($n),$n=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?lt===0&&(lt=3):Kg())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Ua(),xm(t,e),t===null&&No(e.stateNode.containerInfo),Pt(e),null;case 10:return Tg(e.type._context),Pt(e),null;case 17:return Zt(e.type)&&nu(),Pt(e),null;case 19:if(Ue(Be),a=e.memoizedState,a===null)return Pt(e),null;if(s=(e.flags&128)!==0,l=a.rendering,l===null)if(s)Ll(a,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=cu(t),l!==null){for(e.flags|=128,Ll(a,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Be,Be.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ze()>Wa&&(e.flags|=128,s=!0,Ll(a,!1),e.lanes=4194304)}else{if(!s)if(t=cu(l),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ll(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!$e)return Pt(e),null}else 2*Ze()-a.renderingStartTime>Wa&&n!==1073741824&&(e.flags|=128,s=!0,Ll(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ze(),e.sibling=null,n=Be.current,Oe(Be,s?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Gg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?an&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function mE(t,e){switch(Sg(e),e.tag){case 1:return Zt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ua(),Ue(Xt),Ue(Dt),Dg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Og(e),null;case 13:if(Ue(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));La()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Be),null;case 4:return Ua(),null;case 10:return Tg(e.type._context),null;case 22:case 23:return Gg(),null;case 24:return null;default:return null}}var jd=!1,At=!1,gE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ke(t,e,s)}else n.current=null}function vm(t,e,n){try{n()}catch(s){Ke(t,e,s)}}var Ay=!1;function xE(t,e){if(tm=Xd,t=uw(),jg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,h=0,g=0,m=t,y=null;t:for(;;){for(var I;m!==n||r!==0&&m.nodeType!==3||(c=l+r),m!==a||s!==0&&m.nodeType!==3||(d=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(I=m.firstChild)!==null;)y=m,m=I;for(;;){if(m===t)break t;if(y===n&&++h===r&&(c=l),y===a&&++g===s&&(d=l),(I=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=I}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(nm={focusedElem:t,selectionRange:n},Xd=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var L=T.memoizedProps,ne=T.memoizedState,C=e.stateNode,N=C.getSnapshotBeforeUpdate(e.elementType===e.type?L:Fn(e.type,L),ne);C.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(R){Ke(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return T=Ay,Ay=!1,T}function ro(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,a!==void 0&&vm(e,n,a)}r=r.next}while(r!==s)}}function Qu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lN(t){var e=t.alternate;e!==null&&(t.alternate=null,lN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[Co],delete e[im],delete e[Zk],delete e[eE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oN(t){return t.tag===5||t.tag===3||t.tag===4}function Oy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _m(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tu));else if(s!==4&&(t=t.child,t!==null))for(_m(t,e,n),t=t.sibling;t!==null;)_m(t,e,n),t=t.sibling}function bm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}var Ct=null,Un=!1;function rr(t,e,n){for(n=n.child;n!==null;)cN(t,e,n),n=n.sibling}function cN(t,e,n){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(zu,n)}catch{}switch(n.tag){case 5:At||_a(n,e);case 6:var s=Ct,r=Un;Ct=null,rr(t,e,n),Ct=s,Un=r,Ct!==null&&(Un?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Un?(t=Ct,n=n.stateNode,t.nodeType===8?ip(t.parentNode,n):t.nodeType===1&&ip(t,n),_o(t)):ip(Ct,n.stateNode));break;case 4:s=Ct,r=Un,Ct=n.stateNode.containerInfo,Un=!0,rr(t,e,n),Ct=s,Un=r;break;case 0:case 11:case 14:case 15:if(!At&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var a=r,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&vm(n,e,l),r=r.next}while(r!==s)}rr(t,e,n);break;case 1:if(!At&&(_a(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){Ke(n,e,c)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(At=(s=At)||n.memoizedState!==null,rr(t,e,n),At=s):rr(t,e,n);break;default:rr(t,e,n)}}function Dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gE),e.forEach(function(s){var r=SE.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:Ct=c.stateNode,Un=!1;break e;case 3:Ct=c.stateNode.containerInfo,Un=!0;break e;case 4:Ct=c.stateNode.containerInfo,Un=!0;break e}c=c.return}if(Ct===null)throw Error(F(160));cN(a,l,r),Ct=null,Un=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(h){Ke(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dN(e,t),e=e.sibling}function dN(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),es(t),s&4){try{ro(3,t,t.return),Qu(3,t)}catch(L){Ke(t,t.return,L)}try{ro(5,t,t.return)}catch(L){Ke(t,t.return,L)}}break;case 1:Mn(e,t),es(t),s&512&&n!==null&&_a(n,n.return);break;case 5:if(Mn(e,t),es(t),s&512&&n!==null&&_a(n,n.return),t.flags&32){var r=t.stateNode;try{go(r,"")}catch(L){Ke(t,t.return,L)}}if(s&4&&(r=t.stateNode,r!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Pb(r,a),Hp(c,l);var h=Hp(c,a);for(l=0;l<d.length;l+=2){var g=d[l],m=d[l+1];g==="style"?Lb(r,m):g==="dangerouslySetInnerHTML"?Db(r,m):g==="children"?go(r,m):ug(r,g,m,h)}switch(c){case"input":$p(r,a);break;case"textarea":Ab(r,a);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var I=a.value;I!=null?Na(r,!!a.multiple,I,!1):y!==!!a.multiple&&(a.defaultValue!=null?Na(r,!!a.multiple,a.defaultValue,!0):Na(r,!!a.multiple,a.multiple?[]:"",!1))}r[Co]=a}catch(L){Ke(t,t.return,L)}}break;case 6:if(Mn(e,t),es(t),s&4){if(t.stateNode===null)throw Error(F(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(L){Ke(t,t.return,L)}}break;case 3:if(Mn(e,t),es(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(e.containerInfo)}catch(L){Ke(t,t.return,L)}break;case 4:Mn(e,t),es(t);break;case 13:Mn(e,t),es(t),r=t.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(Vg=Ze())),s&4&&Dy(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(At=(h=At)||g,Mn(e,t),At=h):Mn(e,t),es(t),s&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!g&&t.mode&1)for(Q=t,g=t.child;g!==null;){for(m=Q=g;Q!==null;){switch(y=Q,I=y.child,y.tag){case 0:case 11:case 14:case 15:ro(4,y,y.return);break;case 1:_a(y,y.return);var T=y.stateNode;if(typeof T.componentWillUnmount=="function"){s=y,n=y.return;try{e=s,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(L){Ke(s,n,L)}}break;case 5:_a(y,y.return);break;case 22:if(y.memoizedState!==null){Ly(m);continue}}I!==null?(I.return=y,Q=I):Ly(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{r=m.stateNode,h?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,d=m.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Mb("display",l))}catch(L){Ke(t,t.return,L)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(L){Ke(t,t.return,L)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Mn(e,t),es(t),s&4&&Dy(t);break;case 21:break;default:Mn(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oN(n)){var s=n;break e}n=n.return}throw Error(F(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(go(r,""),s.flags&=-33);var a=Oy(t);bm(t,a,r);break;case 3:case 4:var l=s.stateNode.containerInfo,c=Oy(t);_m(t,c,l);break;default:throw Error(F(161))}}catch(d){Ke(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vE(t,e,n){Q=t,uN(t)}function uN(t,e,n){for(var s=(t.mode&1)!==0;Q!==null;){var r=Q,a=r.child;if(r.tag===22&&s){var l=r.memoizedState!==null||jd;if(!l){var c=r.alternate,d=c!==null&&c.memoizedState!==null||At;c=jd;var h=At;if(jd=l,(At=d)&&!h)for(Q=r;Q!==null;)l=Q,d=l.child,l.tag===22&&l.memoizedState!==null?Fy(r):d!==null?(d.return=l,Q=d):Fy(r);for(;a!==null;)Q=a,uN(a),a=a.sibling;Q=r,jd=c,At=h}My(t)}else r.subtreeFlags&8772&&a!==null?(a.return=r,Q=a):My(t)}}function My(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Qu(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!At)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&_y(e,a,s);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_y(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var g=h.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&_o(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}At||e.flags&512&&ym(e)}catch(y){Ke(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Ly(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Fy(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qu(4,e)}catch(d){Ke(e,n,d)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(d){Ke(e,r,d)}}var a=e.return;try{ym(e)}catch(d){Ke(e,a,d)}break;case 5:var l=e.return;try{ym(e)}catch(d){Ke(e,l,d)}}}catch(d){Ke(e,e.return,d)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var yE=Math.ceil,hu=Ks.ReactCurrentDispatcher,zg=Ks.ReactCurrentOwner,In=Ks.ReactCurrentBatchConfig,be=0,_t=null,st=null,St=0,an=0,ba=Ur(0),lt=0,Ro=null,ji=0,Ju=0,Bg=0,io=null,qt=null,Vg=0,Wa=1/0,Es=null,fu=!1,wm=null,br=null,Cd=!1,hr=null,pu=0,ao=0,Nm=null,$d=-1,Wd=0;function $t(){return be&6?Ze():$d!==-1?$d:$d=Ze()}function wr(t){return t.mode&1?be&2&&St!==0?St&-St:nE.transition!==null?(Wd===0&&(Wd=Yb()),Wd):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:nw(t.type)),t):1}function Bn(t,e,n,s){if(50<ao)throw ao=0,Nm=null,Error(F(185));Jo(t,n,s),(!(be&2)||t!==_t)&&(t===_t&&(!(be&2)&&(Ju|=n),lt===4&&dr(t,St)),en(t,s),n===1&&be===0&&!(e.mode&1)&&(Wa=Ze()+500,Ku&&$r()))}function en(t,e){var n=t.callbackNode;nk(t,e);var s=Jd(t,t===_t?St:0);if(s===0)n!==null&&Kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Kv(n),e===1)t.tag===0?tE(Uy.bind(null,t)):bw(Uy.bind(null,t)),Jk(function(){!(be&6)&&$r()}),n=null;else{switch(Qb(s)){case 1:n=gg;break;case 4:n=Kb;break;case 16:n=Qd;break;case 536870912:n=qb;break;default:n=Qd}n=yN(n,hN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hN(t,e){if($d=-1,Wd=0,be&6)throw Error(F(327));var n=t.callbackNode;if(ka()&&t.callbackNode!==n)return null;var s=Jd(t,t===_t?St:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=mu(t,s);else{e=s;var r=be;be|=2;var a=pN();(_t!==t||St!==e)&&(Es=null,Wa=Ze()+500,gi(t,e));do try{wE();break}catch(c){fN(t,c)}while(!0);Eg(),hu.current=a,be=r,st!==null?e=0:(_t=null,St=0,e=lt)}if(e!==0){if(e===2&&(r=Qp(t),r!==0&&(s=r,e=jm(t,r))),e===1)throw n=Ro,gi(t,0),dr(t,s),en(t,Ze()),n;if(e===6)dr(t,s);else{if(r=t.current.alternate,!(s&30)&&!_E(r)&&(e=mu(t,s),e===2&&(a=Qp(t),a!==0&&(s=a,e=jm(t,a))),e===1))throw n=Ro,gi(t,0),dr(t,s),en(t,Ze()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(F(345));case 2:oi(t,qt,Es);break;case 3:if(dr(t,s),(s&130023424)===s&&(e=Vg+500-Ze(),10<e)){if(Jd(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){$t(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=rm(oi.bind(null,t,qt,Es),e);break}oi(t,qt,Es);break;case 4:if(dr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var l=31-zn(s);a=1<<l,l=e[l],l>r&&(r=l),s&=~a}if(s=r,s=Ze()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*yE(s/1960))-s,10<s){t.timeoutHandle=rm(oi.bind(null,t,qt,Es),s);break}oi(t,qt,Es);break;case 5:oi(t,qt,Es);break;default:throw Error(F(329))}}}return en(t,Ze()),t.callbackNode===n?hN.bind(null,t):null}function jm(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=mu(t,e),t!==2&&(e=qt,qt=n,e!==null&&Cm(e)),t}function Cm(t){qt===null?qt=t:qt.push.apply(qt,t)}function _E(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!Gn(a(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~Bg,e&=~Ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),s=1<<n;t[n]=-1,e&=~s}}function Uy(t){if(be&6)throw Error(F(327));ka();var e=Jd(t,0);if(!(e&1))return en(t,Ze()),null;var n=mu(t,e);if(t.tag!==0&&n===2){var s=Qp(t);s!==0&&(e=s,n=jm(t,s))}if(n===1)throw n=Ro,gi(t,0),dr(t,e),en(t,Ze()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oi(t,qt,Es),en(t,Ze()),null}function Hg(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Wa=Ze()+500,Ku&&$r())}}function Ci(t){hr!==null&&hr.tag===0&&!(be&6)&&ka();var e=be;be|=1;var n=In.transition,s=Ee;try{if(In.transition=null,Ee=1,t)return t()}finally{Ee=s,In.transition=n,be=e,!(be&6)&&$r()}}function Gg(){an=ba.current,Ue(ba)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Qk(n)),st!==null)for(n=st.return;n!==null;){var s=n;switch(Sg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&nu();break;case 3:Ua(),Ue(Xt),Ue(Dt),Dg();break;case 5:Og(s);break;case 4:Ua();break;case 13:Ue(Be);break;case 19:Ue(Be);break;case 10:Tg(s.type._context);break;case 22:case 23:Gg()}n=n.return}if(_t=t,st=t=Nr(t.current,null),St=an=e,lt=0,Ro=null,Bg=Ju=ji=0,qt=io=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,a=n.pending;if(a!==null){var l=a.next;a.next=r,s.next=l}n.pending=s}hi=null}return t}function fN(t,e){do{var n=st;try{if(Eg(),Ld.current=uu,du){for(var s=He.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}du=!1}if(Ni=0,gt=it=He=null,so=!1,ko=0,zg.current=null,n===null||n.return===null){lt=1,Ro=e,st=null;break}e:{var a=t,l=n.return,c=n,d=e;if(e=St,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,g=c,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var I=Sy(l);if(I!==null){I.flags&=-257,Iy(I,l,c,a,e),I.mode&1&&Cy(a,h,e),e=I,d=h;var T=e.updateQueue;if(T===null){var L=new Set;L.add(d),e.updateQueue=L}else T.add(d);break e}else{if(!(e&1)){Cy(a,h,e),Kg();break e}d=Error(F(426))}}else if($e&&c.mode&1){var ne=Sy(l);if(ne!==null){!(ne.flags&65536)&&(ne.flags|=256),Iy(ne,l,c,a,e),Ig($a(d,c));break e}}a=d=$a(d,c),lt!==4&&(lt=2),io===null?io=[a]:io.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var C=Qw(a,d,e);yy(a,C);break e;case 1:c=d;var N=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(br===null||!br.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=Jw(a,c,e);yy(a,R);break e}}a=a.return}while(a!==null)}gN(n)}catch(K){e=K,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function pN(){var t=hu.current;return hu.current=uu,t===null?uu:t}function Kg(){(lt===0||lt===3||lt===2)&&(lt=4),_t===null||!(ji&268435455)&&!(Ju&268435455)||dr(_t,St)}function mu(t,e){var n=be;be|=2;var s=pN();(_t!==t||St!==e)&&(Es=null,gi(t,e));do try{bE();break}catch(r){fN(t,r)}while(!0);if(Eg(),be=n,hu.current=s,st!==null)throw Error(F(261));return _t=null,St=0,lt}function bE(){for(;st!==null;)mN(st)}function wE(){for(;st!==null&&!KI();)mN(st)}function mN(t){var e=vN(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?gN(t):st=e,zg.current=null}function gN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mE(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,st=null;return}}else if(n=pE(n,e,an),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);lt===0&&(lt=5)}function oi(t,e,n){var s=Ee,r=In.transition;try{In.transition=null,Ee=1,NE(t,e,n,s)}finally{In.transition=r,Ee=s}return null}function NE(t,e,n,s){do ka();while(hr!==null);if(be&6)throw Error(F(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(sk(t,a),t===_t&&(st=_t=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cd||(Cd=!0,yN(Qd,function(){return ka(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=In.transition,In.transition=null;var l=Ee;Ee=1;var c=be;be|=4,zg.current=null,xE(t,n),dN(n,t),Bk(nm),Xd=!!tm,nm=tm=null,t.current=n,vE(n),qI(),be=c,Ee=l,In.transition=a}else t.current=n;if(Cd&&(Cd=!1,hr=t,pu=r),a=t.pendingLanes,a===0&&(br=null),JI(n.stateNode),en(t,Ze()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(fu)throw fu=!1,t=wm,wm=null,t;return pu&1&&t.tag!==0&&ka(),a=t.pendingLanes,a&1?t===Nm?ao++:(ao=0,Nm=t):ao=0,$r(),null}function ka(){if(hr!==null){var t=Qb(pu),e=In.transition,n=Ee;try{if(In.transition=null,Ee=16>t?16:t,hr===null)var s=!1;else{if(t=hr,hr=null,pu=0,be&6)throw Error(F(331));var r=be;for(be|=4,Q=t.current;Q!==null;){var a=Q,l=a.child;if(Q.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(Q=h;Q!==null;){var g=Q;switch(g.tag){case 0:case 11:case 15:ro(8,g,a)}var m=g.child;if(m!==null)m.return=g,Q=m;else for(;Q!==null;){g=Q;var y=g.sibling,I=g.return;if(lN(g),g===h){Q=null;break}if(y!==null){y.return=I,Q=y;break}Q=I}}}var T=a.alternate;if(T!==null){var L=T.child;if(L!==null){T.child=null;do{var ne=L.sibling;L.sibling=null,L=ne}while(L!==null)}}Q=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Q=l;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ro(9,a,a.return)}var C=a.sibling;if(C!==null){C.return=a.return,Q=C;break e}Q=a.return}}var N=t.current;for(Q=N;Q!==null;){l=Q;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,Q=S;else e:for(l=N;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Qu(9,c)}}catch(K){Ke(c,c.return,K)}if(c===l){Q=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,Q=R;break e}Q=c.return}}if(be=r,$r(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(zu,t)}catch{}s=!0}return s}finally{Ee=n,In.transition=e}}return!1}function $y(t,e,n){e=$a(n,e),e=Qw(t,e,1),t=_r(t,e,1),e=$t(),t!==null&&(Jo(t,1,e),en(t,e))}function Ke(t,e,n){if(t.tag===3)$y(t,t,n);else for(;e!==null;){if(e.tag===3){$y(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(br===null||!br.has(s))){t=$a(n,t),t=Jw(e,t,1),e=_r(e,t,1),t=$t(),e!==null&&(Jo(e,1,t),en(e,t));break}}e=e.return}}function jE(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(St&n)===n&&(lt===4||lt===3&&(St&130023424)===St&&500>Ze()-Vg?gi(t,0):Bg|=n),en(t,e)}function xN(t,e){e===0&&(t.mode&1?(e=md,md<<=1,!(md&130023424)&&(md=4194304)):e=1);var n=$t();t=zs(t,e),t!==null&&(Jo(t,e,n),en(t,n))}function CE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xN(t,n)}function SE(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(e),xN(t,n)}var vN;vN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,fE(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,$e&&e.flags&1048576&&ww(e,iu,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ud(t,e),t=e.pendingProps;var r=Ma(e,Dt.current);Ia(e,n),r=Lg(null,e,s,t,r,n);var a=Fg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(s)?(a=!0,su(e)):a=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Pg(e),r.updater=Yu,e.stateNode=r,r._reactInternals=e,um(e,s,t,n),e=pm(null,e,s,!0,a,n)):(e.tag=0,$e&&a&&Cg(e),Ft(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Ud(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=kE(s),t=Fn(s,t),r){case 0:e=fm(null,e,s,t,n);break e;case 1:e=Ty(null,e,s,t,n);break e;case 11:e=ky(null,e,s,t,n);break e;case 14:e=Ey(null,e,s,Fn(s.type,t),n);break e}throw Error(F(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Fn(s,r),fm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Fn(s,r),Ty(t,e,s,r,n);case 3:e:{if(tN(e),t===null)throw Error(F(387));s=e.pendingProps,a=e.memoizedState,r=a.element,kw(t,e),ou(e,s,null,n);var l=e.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){r=$a(Error(F(423)),e),e=Ry(t,e,s,n,r);break e}else if(s!==r){r=$a(Error(F(424)),e),e=Ry(t,e,s,n,r);break e}else for(dn=yr(e.stateNode.containerInfo.firstChild),hn=e,$e=!0,$n=null,n=Sw(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),s===r){e=Bs(t,e,n);break e}Ft(t,e,s,n)}e=e.child}return e;case 5:return Ew(e),t===null&&om(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,l=r.children,sm(s,r)?l=null:a!==null&&sm(s,a)&&(e.flags|=32),eN(t,e),Ft(t,e,l,n),e.child;case 6:return t===null&&om(e),null;case 13:return nN(t,e,n);case 4:return Ag(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Fa(e,null,s,n):Ft(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Fn(s,r),ky(t,e,s,r,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,a=e.memoizedProps,l=r.value,Oe(au,s._currentValue),s._currentValue=l,a!==null)if(Gn(a.value,l)){if(a.children===r.children&&!Xt.current){e=Bs(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(a.tag===1){d=Ls(-1,n&-n),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var g=h.pending;g===null?d.next=d:(d.next=g.next,g.next=d),h.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),cm(a.return,n,e),c.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(F(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),cm(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ft(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Ia(e,n),r=En(r),s=s(r),e.flags|=1,Ft(t,e,s,n),e.child;case 14:return s=e.type,r=Fn(s,e.pendingProps),r=Fn(s.type,r),Ey(t,e,s,r,n);case 15:return Xw(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Fn(s,r),Ud(t,e),e.tag=1,Zt(s)?(t=!0,su(e)):t=!1,Ia(e,n),Yw(e,s,r),um(e,s,r,n),pm(null,e,s,!0,t,n);case 19:return sN(t,e,n);case 22:return Zw(t,e,n)}throw Error(F(156,e.tag))};function yN(t,e){return Gb(t,e)}function IE(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,s){return new IE(t,e,n,s)}function qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kE(t){if(typeof t=="function")return qg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fg)return 11;if(t===pg)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zd(t,e,n,s,r,a){var l=2;if(s=t,typeof t=="function")qg(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ua:return xi(n.children,r,a,e);case hg:l=8,r|=8;break;case Dp:return t=jn(12,n,e,r|2),t.elementType=Dp,t.lanes=a,t;case Mp:return t=jn(13,n,e,r),t.elementType=Mp,t.lanes=a,t;case Lp:return t=jn(19,n,e,r),t.elementType=Lp,t.lanes=a,t;case Eb:return Xu(n,r,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ib:l=10;break e;case kb:l=9;break e;case fg:l=11;break e;case pg:l=14;break e;case lr:l=16,s=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=jn(l,n,e,r),e.elementType=t,e.type=s,e.lanes=a,e}function xi(t,e,n,s){return t=jn(7,t,s,e),t.lanes=n,t}function Xu(t,e,n,s){return t=jn(22,t,s,e),t.elementType=Eb,t.lanes=n,t.stateNode={isHidden:!1},t}function fp(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function pp(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EE(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qf(0),this.expirationTimes=qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qf(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Yg(t,e,n,s,r,a,l,c,d){return t=new EE(t,e,n,c,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=jn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pg(a),t}function TE(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:da,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function _N(t){if(!t)return Er;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Zt(n))return _w(t,n,e)}return e}function bN(t,e,n,s,r,a,l,c,d){return t=Yg(n,s,!0,t,r,a,l,c,d),t.context=_N(null),n=t.current,s=$t(),r=wr(n),a=Ls(s,r),a.callback=e??null,_r(n,a,r),t.current.lanes=r,Jo(t,r,s),en(t,s),t}function Zu(t,e,n,s){var r=e.current,a=$t(),l=wr(r);return n=_N(n),e.context===null?e.context=n:e.pendingContext=n,e=Ls(a,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=_r(r,e,l),t!==null&&(Bn(t,r,l,a),Md(t,r,l)),l}function gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qg(t,e){Wy(t,e),(t=t.alternate)&&Wy(t,e)}function RE(){return null}var wN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jg(t){this._internalRoot=t}eh.prototype.render=Jg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Zu(t,e,null,null)};eh.prototype.unmount=Jg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ci(function(){Zu(null,t,null,null)}),e[Ws]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&tw(t)}};function Xg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zy(){}function PE(t,e,n,s,r){if(r){if(typeof s=="function"){var a=s;s=function(){var h=gu(l);a.call(h)}}var l=bN(e,s,t,0,null,!1,!1,"",zy);return t._reactRootContainer=l,t[Ws]=l.current,No(t.nodeType===8?t.parentNode:t),Ci(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var c=s;s=function(){var h=gu(d);c.call(h)}}var d=Yg(t,0,!1,null,null,!1,!1,"",zy);return t._reactRootContainer=d,t[Ws]=d.current,No(t.nodeType===8?t.parentNode:t),Ci(function(){Zu(e,d,n,s)}),d}function nh(t,e,n,s,r){var a=n._reactRootContainer;if(a){var l=a;if(typeof r=="function"){var c=r;r=function(){var d=gu(l);c.call(d)}}Zu(e,l,t,r)}else l=PE(n,e,t,r,s);return gu(l)}Jb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ql(e.pendingLanes);n!==0&&(xg(e,n|1),en(e,Ze()),!(be&6)&&(Wa=Ze()+500,$r()))}break;case 13:Ci(function(){var s=zs(t,1);if(s!==null){var r=$t();Bn(s,t,1,r)}}),Qg(t,1)}};vg=function(t){if(t.tag===13){var e=zs(t,134217728);if(e!==null){var n=$t();Bn(e,t,134217728,n)}Qg(t,134217728)}};Xb=function(t){if(t.tag===13){var e=wr(t),n=zs(t,e);if(n!==null){var s=$t();Bn(n,t,e,s)}Qg(t,e)}};Zb=function(){return Ee};ew=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Kp=function(t,e,n){switch(e){case"input":if($p(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Gu(s);if(!r)throw Error(F(90));Rb(s),$p(s,r)}}}break;case"textarea":Ab(t,n);break;case"select":e=n.value,e!=null&&Na(t,!!n.multiple,e,!1)}};$b=Hg;Wb=Ci;var AE={usingClientEntryPoint:!1,Events:[Zo,ma,Gu,Fb,Ub,Hg]},Fl={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OE={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vb(t),t===null?null:t.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||RE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{zu=Sd.inject(OE),os=Sd}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AE;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xg(e))throw Error(F(200));return TE(t,e,null,n)};gn.createRoot=function(t,e){if(!Xg(t))throw Error(F(299));var n=!1,s="",r=wN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Yg(t,1,!1,null,null,n,!1,s,r),t[Ws]=e.current,No(t.nodeType===8?t.parentNode:t),new Jg(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Vb(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Ci(t)};gn.hydrate=function(t,e,n){if(!th(e))throw Error(F(200));return nh(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!Xg(t))throw Error(F(405));var s=n!=null&&n.hydratedSources||null,r=!1,a="",l=wN;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=bN(e,null,t,1,n??null,r,!1,a,l),t[Ws]=e.current,No(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new eh(e)};gn.render=function(t,e,n){if(!th(e))throw Error(F(200));return nh(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!th(t))throw Error(F(40));return t._reactRootContainer?(Ci(function(){nh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ws]=null})}),!0):!1};gn.unstable_batchedUpdates=Hg;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!th(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return nh(t,e,n,!1,s)};gn.version="18.3.1-next-f1338f8080-20240426";function NN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NN)}catch(t){console.error(t)}}NN(),Nb.exports=gn;var DE=Nb.exports,By=DE;Ap.createRoot=By.createRoot,Ap.hydrateRoot=By.hydrateRoot;var Vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(t,e){if(!t)throw el(e)},el=function(t){return new Error("Firebase Database ("+jN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ME=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],l=t[n++],c=t[n++],d=((r&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Zg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const a=t[r],l=r+1<t.length,c=l?t[r+1]:0,d=r+2<t.length,h=d?t[r+2]:0,g=a>>2,m=(a&3)<<4|c>>4;let y=(c&15)<<2|h>>6,I=h&63;d||(I=64,l||(y=64)),s.push(n[g],n[m],n[y],n[I])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ME(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||c==null||h==null||m==null)throw new LE;const y=a<<2|c>>4;if(s.push(y),h!==64){const I=c<<4&240|h>>2;if(s.push(I),m!==64){const T=h<<6&192|m;s.push(T)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SN=function(t){const e=CN(t);return Zg.encodeByteArray(e,!0)},xu=function(t){return SN(t).replace(/\./g,"")},vu=function(t){try{return Zg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){return Po(void 0,t)}function Po(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!UE(n)||(t[n]=Po(t[n],e[n]));return t}function UE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=()=>IN().__FIREBASE_DEFAULTS__,WE=()=>{if(typeof process>"u"||typeof Vy>"u")return;const t=Vy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vu(t[1]);return e&&JSON.parse(e)},ex=()=>{try{return $E()||WE()||zE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kN=()=>{var t;return(t=ex())===null||t===void 0?void 0:t.config},BE=t=>{var e;return(e=ex())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xu(JSON.stringify(n)),xu(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function EN(){var t;const e=(t=ex())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HE(){return typeof window<"u"||TN()}function TN(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function GE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PN(){const t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KE(){return jN.NODE_ADMIN===!0}function yu(){try{return typeof indexedDB=="object"}catch{return!1}}function qE(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="FirebaseError";class tn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=YE,Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Di.prototype.create)}}class Di{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?QE(a,s):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new tn(r,c,s)}}function QE(t,e){return t.replace(JE,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const JE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){return JSON.parse(t)}function at(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=function(t){let e={},n={},s={},r="";try{const a=t.split(".");e=Ao(vu(a[0])||""),n=Ao(vu(a[1])||""),r=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},XE=function(t){const e=AN(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ZE=function(t){const e=AN(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Si(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function _u(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bu(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Sm(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const a=t[r],l=e[r];if(Hy(a)&&Hy(l)){if(!Sm(a,l))return!1}else if(a!==l)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,a]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Ql(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)s[m]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)s[m]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let m=16;m<80;m++){const y=s[m-3]^s[m-8]^s[m-14]^s[m-16];s[m]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],l=this.chain_[2],c=this.chain_[3],d=this.chain_[4],h,g;for(let m=0;m<80;m++){m<40?m<20?(h=c^a&(l^c),g=1518500249):(h=a^l^c,g=1859775393):m<60?(h=a&l|c&(a|l),g=2400959708):(h=a^l^c,g=3395469782);const y=(r<<5|r>>>27)+h+d+g+s[m]&4294967295;d=c,c=l,l=(a<<30|a>>>2)&4294967295,a=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const a=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(a[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}else for(;r<n;)if(a[l]=e[r],++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[r]>>a&255,++s;return e}}function ON(t,e){const n=new t2(t,e);return n.subscribe.bind(n)}class t2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");n2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=mp),r.error===void 0&&(r.error=mp),r.complete===void 0&&(r.complete=mp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(t,e,n,s){let r;if(s<e?r="at least "+e:s>n&&(r=n===0?"none":"no more than "+n),r){const a=t+" failed: Was called with "+s+(s===1?" argument.":" arguments.")+" Expects "+r+".";throw new Error(a)}};function nn(t,e){return`${t} failed: ${e} argument `}function xt(t,e,n,s){if(!(s&&!n)&&typeof n!="function")throw new Error(nn(t,e)+"must be a valid function.")}function Gy(t,e,n,s){if(n&&(typeof n!="object"||n===null))throw new Error(nn(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const a=r-55296;s++,W(s<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(s)-56320;r=65536+(a<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},rh=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class Rn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Yt;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i2(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);s===c&&l.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:r2(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r2(t){return t===ci?void 0:t}function i2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Im(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=[];var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const DN={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},a2=ke.INFO,l2={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},o2=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=l2[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tc{constructor(e){this.name=e,this._logLevel=a2,this._logHandler=o2,this._userLogHandler=null,sx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}function c2(t){sx.forEach(e=>{e.setLogLevel(t)})}function d2(t,e){for(const n of sx){let s=null;e&&e.level&&(s=DN[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,a,...l)=>{const c=l.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");a>=(s??r.logLevel)&&t({level:ke[a].toLowerCase(),message:c,args:l,type:r.name})}}}const u2=(t,e)=>e.some(n=>t instanceof n);let Ky,qy;function h2(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f2(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MN=new WeakMap,km=new WeakMap,LN=new WeakMap,gp=new WeakMap,rx=new WeakMap;function p2(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(jr(t.result)),r()},l=()=>{s(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&MN.set(n,t)}).catch(()=>{}),rx.set(e,t),e}function m2(t){if(km.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});km.set(t,e)}let Em={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return km.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function g2(t){Em=t(Em)}function x2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(xp(this),e,...n);return LN.set(s,e.sort?e.sort():[e]),jr(s)}:f2().includes(t)?function(...e){return t.apply(xp(this),e),jr(MN.get(this))}:function(...e){return jr(t.apply(xp(this),e))}}function v2(t){return typeof t=="function"?x2(t):(t instanceof IDBTransaction&&m2(t),u2(t,h2())?new Proxy(t,Em):t)}function jr(t){if(t instanceof IDBRequest)return p2(t);if(gp.has(t))return gp.get(t);const e=v2(t);return e!==t&&(gp.set(t,e),rx.set(e,t)),e}const xp=t=>rx.get(t);function y2(t,e,{blocked:n,upgrade:s,blocking:r,terminated:a}={}){const l=indexedDB.open(t,e),c=jr(l);return s&&l.addEventListener("upgradeneeded",d=>{s(jr(l.result),d.oldVersion,d.newVersion,jr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const _2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],vp=new Map;function Yy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=b2.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||_2.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let h=d.store;return s&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),r&&d.done]))[0]};return vp.set(e,a),a}g2(t=>({...t,get:(e,n,s)=>Yy(e,n)||t.get(e,n,s),has:(e,n)=>!!Yy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N2(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function N2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wu="@firebase/app",Tm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new tc("@firebase/app"),j2="@firebase/app-compat",C2="@firebase/analytics-compat",S2="@firebase/analytics",I2="@firebase/app-check-compat",k2="@firebase/app-check",E2="@firebase/auth",T2="@firebase/auth-compat",R2="@firebase/database",P2="@firebase/data-connect",A2="@firebase/database-compat",O2="@firebase/functions",D2="@firebase/functions-compat",M2="@firebase/installations",L2="@firebase/installations-compat",F2="@firebase/messaging",U2="@firebase/messaging-compat",$2="@firebase/performance",W2="@firebase/performance-compat",z2="@firebase/remote-config",B2="@firebase/remote-config-compat",V2="@firebase/storage",H2="@firebase/storage-compat",G2="@firebase/firestore",K2="@firebase/vertexai-preview",q2="@firebase/firestore-compat",Y2="firebase",Q2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="[DEFAULT]",J2={[wu]:"fire-core",[j2]:"fire-core-compat",[S2]:"fire-analytics",[C2]:"fire-analytics-compat",[k2]:"fire-app-check",[I2]:"fire-app-check-compat",[E2]:"fire-auth",[T2]:"fire-auth-compat",[R2]:"fire-rtdb",[P2]:"fire-data-connect",[A2]:"fire-rtdb-compat",[O2]:"fire-fn",[D2]:"fire-fn-compat",[M2]:"fire-iid",[L2]:"fire-iid-compat",[F2]:"fire-fcm",[U2]:"fire-fcm-compat",[$2]:"fire-perf",[W2]:"fire-perf-compat",[z2]:"fire-rc",[B2]:"fire-rc-compat",[V2]:"fire-gcs",[H2]:"fire-gcs-compat",[G2]:"fire-fst",[q2]:"fire-fst-compat",[K2]:"fire-vertex","fire-js":"fire-js",[Y2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Map,za=new Map,Ba=new Map;function Oo(t,e){try{t.container.addComponent(e)}catch(n){Vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function FN(t,e){t.container.addOrOverwriteComponent(e)}function Pr(t){const e=t.name;if(Ba.has(e))return Vs.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,t);for(const n of Rr.values())Oo(n,t);for(const n of za.values())Oo(n,t);return!0}function UN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function X2(t,e,n=Tr){UN(t,e).clearInstance(n)}function $N(t){return t.options!==void 0}function qe(t){return t.settings!==void 0}function Z2(){Ba.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kn=new Di("app","Firebase",eT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WN=class{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends WN{constructor(e,n,s,r){const a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,l={name:s,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,r);else{const c=e;super(c.options,l,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Vn(wu,Tm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ax(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw kn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=Q2;function ix(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Tr,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw kn.create("bad-app-name",{appName:String(r)});if(n||(n=kN()),!n)throw kn.create("no-options");const a=Rr.get(r);if(a){if(Sm(n,a.options)&&Sm(s,a.config))return a;throw kn.create("duplicate-app",{appName:r})}const l=new nx(r);for(const d of Ba.values())l.addComponent(d);const c=new WN(n,s,l);return Rr.set(r,c),c}function nT(t,e){if(HE()&&!TN())throw kn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;$N(t)?n=t.options:n=t;const s=Object.assign(Object.assign({},e),n);s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const r=h=>[...h].reduce((g,m)=>Math.imul(31,g)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw kn.create("finalization-registry-not-supported",{});const a=""+r(JSON.stringify(s)),l=za.get(a);if(l)return l.incRefCount(e.releaseOnDeref),l;const c=new nx(a);for(const h of Ba.values())c.addComponent(h);const d=new tT(n,e,a,c);return za.set(a,d),d}function sT(t=Tr){const e=Rr.get(t);if(!e&&t===Tr&&kN())return ix();if(!e)throw kn.create("no-app",{appName:t});return e}function rT(){return Array.from(Rr.values())}async function ax(t){let e=!1;const n=t.name;Rr.has(n)?(e=!0,Rr.delete(n)):za.has(n)&&t.decRefCount()<=0&&(za.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(s=>s.delete())),t.isDeleted=!0)}function Vn(t,e,n){var s;let r=(s=J2[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vs.warn(c.join(" "));return}Pr(new Rn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function zN(t,e){if(t!==null&&typeof t!="function")throw kn.create("invalid-log-argument");d2(t,e)}function BN(t){c2(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebase-heartbeat-database",aT=1,Do="firebase-heartbeat-store";let yp=null;function VN(){return yp||(yp=y2(iT,aT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Do)}catch(n){console.warn(n)}}}}).catch(t=>{throw kn.create("idb-open",{originalErrorMessage:t.message})})),yp}async function lT(t){try{const n=(await VN()).transaction(Do),s=await n.objectStore(Do).get(HN(t));return await n.done,s}catch(e){if(e instanceof tn)Vs.warn(e.message);else{const n=kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vs.warn(n.message)}}}async function Qy(t,e){try{const s=(await VN()).transaction(Do,"readwrite");await s.objectStore(Do).put(e,HN(t)),await s.done}catch(n){if(n instanceof tn)Vs.warn(n.message);else{const s=kn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vs.warn(s.message)}}}function HN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=1024,cT=30*24*60*60*1e3;class dT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=cT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Vs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jy(),{heartbeatsToSend:s,unsentEntries:r}=uT(this._heartbeatsCache.heartbeats),a=xu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Vs.warn(n),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function uT(t,e=oT){const n=[];let s=t.slice();for(const r of t){const a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),Xy(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Xy(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class hT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yu()?qE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Xy(t){return xu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){Pr(new Rn("platform-logger",e=>new w2(e),"PRIVATE")),Pr(new Rn("heartbeat",e=>new dT(e),"PRIVATE")),Vn(wu,Tm,t),Vn(wu,Tm,"esm2017"),Vn("fire-js","")}fT("");const pT=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:tn,SDK_VERSION:Wr,_DEFAULT_ENTRY_NAME:Tr,_addComponent:Oo,_addOrOverwriteComponent:FN,_apps:Rr,_clearComponents:Z2,_components:Ba,_getProvider:UN,_isFirebaseApp:$N,_isFirebaseServerApp:qe,_registerComponent:Pr,_removeServiceInstance:X2,_serverApps:za,deleteApp:ax,getApp:sT,getApps:rT,initializeApp:ix,initializeServerApp:nT,onLog:zN,registerVersion:Vn,setLogLevel:BN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this._delegate=e,this.firebase=n,Oo(e,new Rn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ax(this._delegate)))}_getService(e,n=Tr){var s;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((s=r.getComponent())===null||s===void 0?void 0:s.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Tr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Oo(this._delegate,e)}_addOrOverwriteComponent(e){FN(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Zy=new Di("app-compat","Firebase",gT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){const e={},n={__esModule:!0,initializeApp:a,app:r,registerVersion:Vn,setLogLevel:BN,onLog:zN,apps:null,SDK_VERSION:Wr,INTERNAL:{registerComponent:c,removeApp:s,useAsService:d,modularAPIs:pT}};n.default=n,Object.defineProperty(n,"apps",{get:l});function s(h){delete e[h]}function r(h){if(h=h||Tr,!pn(e,h))throw Zy.create("no-app",{appName:h});return e[h]}r.App=t;function a(h,g={}){const m=ix(h,g);if(pn(e,m.name))return e[m.name];const y=new t(m,n);return e[m.name]=y,y}function l(){return Object.keys(e).map(h=>e[h])}function c(h){const g=h.name,m=g.replace("-compat","");if(Pr(h)&&h.type==="PUBLIC"){const y=(I=r())=>{if(typeof I[m]!="function")throw Zy.create("invalid-app-argument",{appName:g});return I[m]()};h.serviceProps!==void 0&&Po(y,h.serviceProps),n[m]=y,t.prototype[m]=function(...I){return this._getService.bind(this,g).apply(this,h.multipleInstances?I:[])}}return h.type==="PUBLIC"?n[m]:null}function d(h,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){const t=xT(mT);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:GN,extendNamespace:e,createSubscribe:ON,ErrorFactory:Di,deepExtend:Po});function e(n){Po(t,n)}return t}const vT=GN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new tc("@firebase/app-compat"),yT="@firebase/app-compat",_T="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){Vn(yT,_T,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=IN();if(t.firebase!==void 0){e_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&e_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ln=vT;bT();var wT="firebase",NT="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.registerVersion(wT,NT,"app-compat");function lx(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}const Ul={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},oa={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function KN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CT=jT,ST=KN,qN=new Di("auth","Firebase",KN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new tc("@firebase/auth");function IT(t,...e){Nu.logLevel<=ke.WARN&&Nu.warn(`Auth (${Wr}): ${t}`,...e)}function Bd(t,...e){Nu.logLevel<=ke.ERROR&&Nu.error(`Auth (${Wr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t,...e){throw cx(t,...e)}function ot(t,...e){return cx(t,...e)}function ox(t,e,n){const s=Object.assign(Object.assign({},ST()),{[e]:n});return new Di("auth","Firebase",s).create(e,{appName:t.name})}function bt(t){return ox(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tl(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&kt(t,"argument-error"),ox(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return qN.create(t,...e)}function U(t,e,...n){if(!t)throw cx(e,...n)}function ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bd(e),new Error(e)}function Kn(t,e){t||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dx(){return t_()==="http:"||t_()==="https:"}function t_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dx()||RN()||"connection"in navigator)?navigator.onLine:!0}function ET(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=tx()||sh()}get(){return kT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new nc(3e4,6e4);function Qe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Je(t,e,n,s,r={}){return QN(t,r,async()=>{let a={},l={};s&&(e==="GET"?l=s:a={body:JSON.stringify(s)});const c=Mi(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return GE()||(h.referrerPolicy="no-referrer"),YN.fetch()(JN(t,t.config.apiHost,n,c),h)})}async function QN(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},TT),e);try{const r=new AT(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Jl(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jl(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Jl(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Jl(t,"user-disabled",l);const g=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ox(t,g,h);kt(t,g)}}catch(r){if(r instanceof tn)throw r;kt(t,"network-request-failed",{message:String(r)})}}async function qs(t,e,n,s,r={}){const a=await Je(t,e,n,s,r);return"mfaPendingCredential"in a&&kt(t,"multi-factor-auth-required",{_serverResponse:a}),a}function JN(t,e,n,s){const r=`${e}${n}?${s}`;return t.config.emulator?ux(t.config,r):`${t.config.apiScheme}://${r}`}function PT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ot(this.auth,"network-request-failed")),RT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=ot(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){return t!==void 0&&t.getResponse!==void 0}function s_(t){return t!==void 0&&t.enterprise!==void 0}class OT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(t){return(await Je(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function MT(t,e){return Je(t,"GET","/v2/recaptchaConfig",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(t,e){return Je(t,"POST","/v1/accounts:delete",e)}async function FT(t,e){return Je(t,"POST","/v1/accounts:update",e)}async function XN(t,e){return Je(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UT(t,e=!1){const n=fe(t),s=await n.getIdToken(e),r=ih(s);U(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:r,token:s,authTime:lo(_p(r.auth_time)),issuedAtTime:lo(_p(r.iat)),expirationTime:lo(_p(r.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function _p(t){return Number(t)*1e3}function ih(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const r=vu(n);return r?JSON.parse(r):(Bd("Failed to decode base64 JWT payload"),null)}catch(r){return Bd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function r_(t){const e=ih(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof tn&&$T(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function $T({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Hs(t,XN(n,{idToken:s}));U(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ZN(a.providerUserInfo):[],c=BT(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Rm(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,m)}async function zT(t){const e=fe(t);await Lo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BT(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function ZN(t){return t.map(e=>{var{providerId:n}=e,s=lx(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(t,e){const n=await QN(t,{},async()=>{const s=Mi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,l=JN(t,r,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",YN.fetch()(l,{method:"POST",headers:c,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HT(t,e){return Je(t,"POST","/v2/accounts:revokeToken",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");const n=r_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:a}=await VT(e,n);this.updateTokensAndExpiration(s,r,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:a}=n,l=new Ea;return s&&(U(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),r&&(U(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(U(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ea,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class As{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,a=lx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Rm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Hs(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UT(this,e)}reload(){return zT(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Lo(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qe(this.auth.app))return Promise.reject(bt(this.auth));const e=await this.getIdToken();return await Hs(this,LT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,a,l,c,d,h,g;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,I=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=n.photoURL)!==null&&l!==void 0?l:void 0,L=(c=n.tenantId)!==null&&c!==void 0?c:void 0,ne=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,C=(h=n.createdAt)!==null&&h!==void 0?h:void 0,N=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:S,emailVerified:R,isAnonymous:K,providerData:B,stsTokenManager:J}=n;U(S&&J,e,"internal-error");const Z=Ea.fromJSON(this.name,J);U(typeof S=="string",e,"internal-error"),ir(m,e.name),ir(y,e.name),U(typeof R=="boolean",e,"internal-error"),U(typeof K=="boolean",e,"internal-error"),ir(I,e.name),ir(T,e.name),ir(L,e.name),ir(ne,e.name),ir(C,e.name),ir(N,e.name);const Te=new As({uid:S,auth:e,email:y,emailVerified:R,displayName:m,isAnonymous:K,photoURL:T,phoneNumber:I,tenantId:L,stsTokenManager:Z,createdAt:C,lastLoginAt:N});return B&&Array.isArray(B)&&(Te.providerData=B.map(pe=>Object.assign({},pe))),ne&&(Te._redirectEventId=ne),Te}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ea;r.updateFromServerResponse(n);const a=new As({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Lo(a),a}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];U(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?ZN(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),c=new Ea;c.updateFromIdToken(s);const d=new As({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Rm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new Map;function un(t){Kn(t instanceof Function,"Expected a class definition");let e=i_.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ej.type="NONE";const Va=ej;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e,n){return`firebase:${t}:${e}:${n}`}class Ta{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:a}=this.auth;this.fullUserKey=vi(this.userKey,r.apiKey,a),this.fullPersistenceKey=vi("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ta(un(Va),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=r[0]||un(Va);const l=vi(s,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=await h._get(l);if(g){const m=As._fromJSON(e,g);h!==a&&(c=m),a=h;break}}catch{}const d=r.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Ta(a,e,s):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new Ta(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ij(e))return"Blackberry";if(aj(e))return"Webos";if(nj(e))return"Safari";if((e.includes("chrome/")||sj(e))&&!e.includes("edge/"))return"Chrome";if(sc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function tj(t=ct()){return/firefox\//i.test(t)}function nj(t=ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sj(t=ct()){return/crios\//i.test(t)}function rj(t=ct()){return/iemobile/i.test(t)}function sc(t=ct()){return/android/i.test(t)}function ij(t=ct()){return/blackberry/i.test(t)}function aj(t=ct()){return/webos/i.test(t)}function rc(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GT(t=ct()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function KT(t=ct()){var e;return rc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qT(){return PN()&&document.documentMode===10}function lj(t=ct()){return rc(t)||sc(t)||aj(t)||ij(t)||/windows phone/i.test(t)||rj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t,e=[]){let n;switch(t){case"Browser":n=a_(ct());break;case"Worker":n=`${a_(ct())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(t,e={}){return Je(t,"GET","/v2/passwordPolicy",Qe(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=6;class XT{constructor(e){var n,s,r,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:JT,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(s=d.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l_(this),this.idTokenSubscription=new l_(this),this.beforeStateQueue=new YT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=un(n)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XN(this,{idToken:e}),s=await As._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qe(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ET()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qe(this.app))return Promise.reject(bt(this));const n=e?fe(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qe(this.app)?Promise.reject(bt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qe(this.app)?Promise.reject(bt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QT(this),n=new XT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Di("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await HT(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&un(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,s,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&IT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ye(t){return fe(t)}class l_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ON(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e3(t){ic=t}function hx(t){return ic.loadJS(t)}function t3(){return ic.recaptchaV2Script}function n3(){return ic.recaptchaEnterpriseScript}function s3(){return ic.gapiScript}function cj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const r3="recaptcha-enterprise",i3="NO_RECAPTCHA";class a3{constructor(e){this.type=r3,this.auth=Ye(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{MT(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new OT(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function r(a,l,c){const d=window.grecaptcha;s_(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(i3)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{s(this.auth).then(c=>{if(!n&&s_(window.grecaptcha))r(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=n3();d.length!==0&&(d+=c),hx(d).then(()=>{r(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function o_(t,e,n,s=!1){const r=new a3(t);let a;try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l=Object.assign({},e);return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Fo(t,e,n,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await o_(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await o_(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(a)})}function l3(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function o3(t,e,n){const s=Ye(t);U(s._canInitEmulator,s,"emulator-config-failed"),U(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),a=dj(e),{host:l,port:c}=c3(e),d=c===null?"":`:${c}`;s.config.emulator={url:`${a}//${l}${d}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||d3()}function dj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function c3(t){const e=dj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const a=r[1];return{host:a,port:c_(s.substr(a.length+1))}}else{const[a,l]=s.split(":");return{host:a,port:c_(l)}}}function c_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function d3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,n){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return Je(t,"POST","/v1/accounts:resetPassword",Qe(t,e))}async function u3(t,e){return Je(t,"POST","/v1/accounts:update",e)}async function h3(t,e){return Je(t,"POST","/v1/accounts:signUp",e)}async function f3(t,e){return Je(t,"POST","/v1/accounts:update",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(t,e){return qs(t,"POST","/v1/accounts:signInWithPassword",Qe(t,e))}async function ah(t,e){return Je(t,"POST","/v1/accounts:sendOobCode",Qe(t,e))}async function m3(t,e){return ah(t,e)}async function g3(t,e){return ah(t,e)}async function x3(t,e){return ah(t,e)}async function v3(t,e){return ah(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(t,e){return qs(t,"POST","/v1/accounts:signInWithEmailLink",Qe(t,e))}async function _3(t,e){return qs(t,"POST","/v1/accounts:signInWithEmailLink",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends nl{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Uo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Uo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fo(e,n,"signInWithPassword",p3);case"emailLink":return y3(e,{email:this._email,oobCode:this._password});default:kt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fo(e,s,"signUpPassword",h3);case"emailLink":return _3(e,{idToken:n,email:this._email,oobCode:this._password});default:kt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t,e){return qs(t,"POST","/v1/accounts:signInWithIdp",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="http://localhost";class us extends nl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,a=lx(n,["providerId","signInMethod"]);if(!s||!r)return null;const l=new us(s,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Fs(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Fs(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fs(e,n)}buildRequest(){const e={requestUri:b3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w3(t,e){return Je(t,"POST","/v1/accounts:sendVerificationCode",Qe(t,e))}async function N3(t,e){return qs(t,"POST","/v1/accounts:signInWithPhoneNumber",Qe(t,e))}async function j3(t,e){const n=await qs(t,"POST","/v1/accounts:signInWithPhoneNumber",Qe(t,e));if(n.temporaryProof)throw Jl(t,"account-exists-with-different-credential",n);return n}const C3={USER_NOT_FOUND:"user-not-found"};async function S3(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return qs(t,"POST","/v1/accounts:signInWithPhoneNumber",Qe(t,n),C3)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends nl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new yi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new yi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return N3(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return j3(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return S3(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:a}=e;return!s&&!n&&!r&&!a?null:new yi({verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k3(t){const e=wa(Ql(t)).link,n=e?wa(Ql(e)).deep_link_id:null,s=wa(Ql(t)).deep_link_id;return(s?wa(Ql(s)).link:null)||s||n||e||t}class lh{constructor(e){var n,s,r,a,l,c;const d=wa(Ql(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(s=d.oobCode)!==null&&s!==void 0?s:null,m=I3((r=d.mode)!==null&&r!==void 0?r:null);U(h&&g&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=g,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=k3(e);try{return new lh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.providerId=zr.PROVIDER_ID}static credential(e,n){return Uo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=lh.parseLink(n);return U(s,"argument-error"),Uo._fromEmailAndCode(e,s.code,s.tenantId)}}zr.PROVIDER_ID="password";zr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends Ys{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ra extends sl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return U("providerId"in n&&"signInMethod"in n,"argument-error"),us._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return U(e.idToken||e.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ra.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ra.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s,oauthTokenSecret:r,pendingToken:a,nonce:l,providerId:c}=e;if(!s&&!r&&!n&&!a||!c)return null;try{return new Ra(c)._credential({idToken:n,accessToken:s,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends sl{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return us._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return rs.credential(n,s)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends sl{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="http://localhost";class Ha extends nl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Fs(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Fs(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,pendingToken:a}=n;return!s||!r||!a||s!==r?null:new Ha(s,a)}static _create(e,n){return new Ha(e,n)}buildRequest(){return{requestUri:E3,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="saml.";class ju extends Ys{constructor(e){U(e.startsWith(T3),"argument-error"),super(e)}static credentialFromResult(e){return ju.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ju.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ha.fromJSON(e);return U(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:s}=e;if(!n||!s)return null;try{return Ha._create(s,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends sl{constructor(){super("twitter.com")}static credential(e,n){return us._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return as.credential(n,s)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(t,e){return qs(t,"POST","/v1/accounts:signUp",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const a=await As._fromIdTokenResponse(e,s,r),l=d_(s);return new Pn({user:a,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=d_(s);return new Pn({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function d_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R3(t){var e;if(qe(t.app))return Promise.reject(bt(t));const n=Ye(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Pn({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await hj(n,{returnSecureToken:!0}),r=await Pn._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends tn{constructor(e,n,s,r){var a;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Cu.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Cu(e,n,s,r)}}function fj(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Cu._fromErrorAndOperation(t,a,e,s):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(t,e){const n=fe(t);await oh(!0,n,e);const{providerUserInfo:s}=await FT(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=pj(s||[]);return n.providerData=n.providerData.filter(a=>r.has(a.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function fx(t,e,n=!1){const s=await Hs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pn._forOperation(t,"link",s)}async function oh(t,e,n){await Lo(e);const s=pj(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";U(s.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e,n=!1){const{auth:s}=t;if(qe(s.app))return Promise.reject(bt(s));const r="reauthenticate";try{const a=await Hs(t,fj(s,r,e,t),n);U(a.idToken,s,"internal-error");const l=ih(a.idToken);U(l,s,"internal-error");const{sub:c}=l;return U(t.uid===c,s,"user-mismatch"),Pn._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&kt(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e,n=!1){if(qe(t.app))return Promise.reject(bt(t));const s="signIn",r=await fj(t,s,e),a=await Pn._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(a.user),a}async function ch(t,e){return gj(Ye(t),e)}async function xj(t,e){const n=fe(t);return await oh(!1,n,e.providerId),fx(n,e)}async function vj(t,e){return mj(fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(t,e){return qs(t,"POST","/v1/accounts:signInWithCustomToken",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(t,e){if(qe(t.app))return Promise.reject(bt(t));const n=Ye(t),s=await A3(n,{token:e,returnSecureToken:!0}),r=await Pn._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?px._fromServerResponse(e,n):"totpInfo"in n?mx._fromServerResponse(e,n):kt(e,"internal-error")}}class px extends ac{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new px(n)}}class mx extends ac{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new mx(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e,n){var s;U(((s=n.url)===null||s===void 0?void 0:s.length)>0,t,"invalid-continue-uri"),U(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(U(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(U(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t){const e=Ye(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function D3(t,e,n){const s=Ye(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&dh(s,r,n),await Fo(s,r,"getOobCode",g3)}async function M3(t,e,n){await uj(fe(t),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&gx(t),s})}async function L3(t,e){await f3(fe(t),{oobCode:e})}async function yj(t,e){const n=fe(t),s=await uj(n,{oobCode:e}),r=s.requestType;switch(U(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(s.mfaInfo,n,"internal-error");default:U(s.email,n,"internal-error")}let a=null;return s.mfaInfo&&(a=ac._fromServerResponse(Ye(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:a},operation:r}}async function F3(t,e){const{data:n}=await yj(fe(t),e);return n.email}async function U3(t,e,n){if(qe(t.app))return Promise.reject(bt(t));const s=Ye(t),l=await Fo(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hj).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&gx(t),d}),c=await Pn._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(c.user),c}function $3(t,e,n){return qe(t.app)?Promise.reject(bt(t)):ch(fe(t),zr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&gx(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e,n){const s=Ye(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,c){U(c.handleCodeInApp,s,"argument-error"),c&&dh(s,l,c)}a(r,n),await Fo(s,r,"getOobCode",x3)}function z3(t,e){const n=lh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function B3(t,e,n){if(qe(t.app))return Promise.reject(bt(t));const s=fe(t),r=zr.credentialWithLink(e,n||Mo());return U(r._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),ch(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(t,e){return Je(t,"POST","/v1/accounts:createAuthUri",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){const n=dx()?Mo():"http://localhost",s={identifier:e,continueUri:n},{signinMethods:r}=await V3(fe(t),s);return r||[]}async function G3(t,e){const n=fe(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&dh(n.auth,r,e);const{email:a}=await m3(n.auth,r);a!==t.email&&await t.reload()}async function K3(t,e,n){const s=fe(t),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&dh(s.auth,a,n);const{email:l}=await v3(s.auth,a);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(t,e){return Je(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=fe(t),a={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Hs(s,q3(s.auth,a));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;const c=s.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),await s._updateTokensIfNecessary(l)}function Q3(t,e){const n=fe(t);return qe(n.auth.app)?Promise.reject(bt(n.auth)):_j(n,e,null)}function J3(t,e){return _j(fe(t),null,e)}async function _j(t,e,n){const{auth:s}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const l=await Hs(t,u3(s,a));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){var e,n;if(!t)return null;const{providerId:s}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!s&&(t!=null&&t.idToken)){const l=(n=(e=ih(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new Pa(a,c)}}if(!s)return null;switch(s){case"facebook.com":return new Z3(a,r);case"github.com":return new eR(a,r);case"google.com":return new tR(a,r);case"twitter.com":return new nR(a,r,t.screenName||null);case"custom":case"anonymous":return new Pa(a,null);default:return new Pa(a,s,r)}}class Pa{constructor(e,n,s={}){this.isNewUser=e,this.providerId=n,this.profile=s}}class bj extends Pa{constructor(e,n,s,r){super(e,n,s),this.username=r}}class Z3 extends Pa{constructor(e,n){super(e,"facebook.com",n)}}class eR extends bj{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class tR extends Pa{constructor(e,n){super(e,"google.com",n)}}class nR extends bj{constructor(e,n,s){super(e,"twitter.com",n,s)}}function sR(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:X3(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,s){this.type=e,this.credential=n,this.user=s}static _fromIdtoken(e,n){return new pi("enroll",e,n)}static _fromMfaPendingCredential(e){return new pi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,s;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return pi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((s=e.multiFactorSession)===null||s===void 0)&&s.idToken)return pi._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,s){this.session=e,this.hints=n,this.signInResolver=s}static _fromError(e,n){const s=Ye(e),r=n.customData._serverResponse,a=(r.mfaInfo||[]).map(c=>ac._fromServerResponse(s,c));U(r.mfaPendingCredential,s,"internal-error");const l=pi._fromMfaPendingCredential(r.mfaPendingCredential);return new xx(l,a,async c=>{const d=await c._process(s,l);delete r.mfaInfo,delete r.mfaPendingCredential;const h=Object.assign(Object.assign({},r),{idToken:d.idToken,refreshToken:d.refreshToken});switch(n.operationType){case"signIn":const g=await Pn._fromIdTokenResponse(s,n.operationType,h);return await s._updateCurrentUser(g.user),g;case"reauthenticate":return U(n.user,s,"internal-error"),Pn._forOperation(n.user,n.operationType,h);default:kt(s,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function rR(t,e){var n;const s=fe(t),r=e;return U(e.customData.operationType,s,"argument-error"),U((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,s,"argument-error"),xx._fromError(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t,e){return Je(t,"POST","/v2/accounts/mfaEnrollment:start",Qe(t,e))}function aR(t,e){return Je(t,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(t,e))}function lR(t,e){return Je(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(t,e))}class vx{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(s=>ac._fromServerResponse(e.auth,s)))})}static _fromUser(e){return new vx(e)}async getSession(){return pi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const s=e,r=await this.getSession(),a=await Hs(this.user,s._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,s=await this.user.getIdToken();try{const r=await Hs(this.user,lR(this.user.auth,{idToken:s,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const bp=new WeakMap;function oR(t){const e=fe(t);return bp.has(e)||bp.set(e,vx._fromUser(e)),bp.get(e)}const Su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1e3,dR=10;class Nj extends wj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},a=this.storage.getItem(s);qT()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,dR):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},cR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nj.type="LOCAL";const yx=Nj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj extends wj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jj.type="SESSION";const Ii=jj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new uh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await uR(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=lc("",20);r.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},s);l={messageChannel:r,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(){return window}function fR(t){nt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){return typeof nt().WorkerGlobalScope<"u"&&typeof nt().importScripts=="function"}async function pR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gR(){return _x()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="firebaseLocalStorageDb",xR=1,Iu="firebaseLocalStorage",Sj="fbase_key";class oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(t,e){return t.transaction([Iu],e?"readwrite":"readonly").objectStore(Iu)}function vR(){const t=indexedDB.deleteDatabase(Cj);return new oc(t).toPromise()}function Pm(){const t=indexedDB.open(Cj,xR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Iu,{keyPath:Sj})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Iu)?e(s):(s.close(),await vR(),e(await Pm()))})})}async function u_(t,e,n){const s=hh(t,!0).put({[Sj]:e,value:n});return new oc(s).toPromise()}async function yR(t,e){const n=hh(t,!1).get(e),s=await new oc(n).toPromise();return s===void 0?null:s.value}function h_(t,e){const n=hh(t,!0).delete(e);return new oc(n).toPromise()}const _R=800,bR=3;class Ij{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>bR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _x()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(gR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pR(),!this.activeServiceWorker)return;this.sender=new hR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await u_(e,Su,"1"),await h_(e,Su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>u_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>h_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=hh(r,!1).getAll();return new oc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_R)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ij.type="LOCAL";const $o=Ij;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e){return Je(t,"POST","/v2/accounts/mfaSignIn:start",Qe(t,e))}function NR(t,e){return Je(t,"POST","/v2/accounts/mfaSignIn:finalize",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=500,CR=6e4,Id=1e12;class SR{constructor(e){this.auth=e,this.counter=Id,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new IR(e,this.auth.name,n||{})),this.counter++,s}reset(e){var n;const s=e||Id;(n=this._widgets.get(s))===null||n===void 0||n.delete(),this._widgets.delete(s)}getResponse(e){var n;const s=e||Id;return((n=this._widgets.get(s))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const s=e||Id;return(n=this._widgets.get(s))===null||n===void 0||n.execute(),""}}class IR{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;U(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=kR(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},CR)},jR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function kR(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=cj("rcb"),ER=new nc(3e4,6e4);class TR{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=nt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return U(RR(n),e,"argument-error"),this.shouldResolveImmediately(n)&&n_(nt().grecaptcha)?Promise.resolve(nt().grecaptcha):new Promise((s,r)=>{const a=nt().setTimeout(()=>{r(ot(e,"network-request-failed"))},ER.get());nt()[wp]=()=>{nt().clearTimeout(a),delete nt()[wp];const c=nt().grecaptcha;if(!c||!n_(c)){r(ot(e,"internal-error"));return}const d=c.render;c.render=(h,g)=>{const m=d(h,g);return this.counter++,m},this.hostLanguage=n,s(c)};const l=`${t3()}?${Mi({onload:wp,render:"explicit",hl:n})}`;hx(l).catch(()=>{clearTimeout(a),r(ot(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=nt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function RR(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class PR{async load(e){return new SR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="recaptcha",AR={theme:"light",type:"image"};let OR=class{constructor(e,n,s=Object.assign({},AR)){this.parameters=s,this.type=kj,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(e),this.isInvisible=this.parameters.size==="invisible",U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;U(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new PR:new TR,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(r=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),r(l))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=nt()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){U(dx()&&!_x(),this.auth,"internal-error"),await DR(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await DT(this.auth);U(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function DR(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=yi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function MR(t,e,n){if(qe(t.app))return Promise.reject(bt(t));const s=Ye(t),r=await fh(s,e,fe(n));return new bx(r,a=>ch(s,a))}async function LR(t,e,n){const s=fe(t);await oh(!1,s,"phone");const r=await fh(s.auth,e,fe(n));return new bx(r,a=>xj(s,a))}async function FR(t,e,n){const s=fe(t);if(qe(s.auth.app))return Promise.reject(bt(s.auth));const r=await fh(s.auth,e,fe(n));return new bx(r,a=>vj(s,a))}async function fh(t,e,n){var s;const r=await n.verify();try{U(typeof r=="string",t,"argument-error"),U(n.type===kj,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a)return U(l.type==="enroll",t,"internal-error"),(await iR(t,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{U(l.type==="signin",t,"internal-error");const c=((s=a.multiFactorHint)===null||s===void 0?void 0:s.uid)||a.multiFactorUid;return U(c,t,"missing-multi-factor-info"),(await wR(t,{mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await w3(t,{phoneNumber:a.phoneNumber,recaptchaToken:r});return l}}finally{n._reset()}}async function UR(t,e){const n=fe(t);if(qe(n.auth.app))return Promise.reject(bt(n.auth));await fx(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki=class Vd{constructor(e){this.providerId=Vd.PROVIDER_ID,this.auth=Ye(e)}verifyPhoneNumber(e,n){return fh(this.auth,e,fe(n))}static credential(e,n){return yi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Vd.credentialFromTaggedObject(n)}static credentialFromError(e){return Vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:s}=e;return n&&s?yi._fromTokenResponse(n,s):null}};ki.PROVIDER_ID="phone";ki.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t,e){return e?un(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends nl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $R(t){return gj(t.auth,new wx(t),t.bypassAuthState)}function WR(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),mj(n,new wx(t),t.bypassAuthState)}async function zR(t){const{auth:e,user:n}=t;return U(n,e,"internal-error"),fx(n,new wx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n,s,r,a=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $R;case"linkViaPopup":case"linkViaRedirect":return zR;case"reauthViaPopup":case"reauthViaRedirect":return WR;default:kt(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new nc(2e3,1e4);async function VR(t,e,n){if(qe(t.app))return Promise.reject(ot(t,"operation-not-supported-in-this-environment"));const s=Ye(t);tl(t,e,Ys);const r=Li(s,n);return new Os(s,"signInViaPopup",e,r).executeNotNull()}async function HR(t,e,n){const s=fe(t);if(qe(s.auth.app))return Promise.reject(ot(s.auth,"operation-not-supported-in-this-environment"));tl(s.auth,e,Ys);const r=Li(s.auth,n);return new Os(s.auth,"reauthViaPopup",e,r,s).executeNotNull()}async function GR(t,e,n){const s=fe(t);tl(s.auth,e,Ys);const r=Li(s.auth,n);return new Os(s.auth,"linkViaPopup",e,r,s).executeNotNull()}class Os extends Ej{constructor(e,n,s,r,a){super(e,n,r,a),this.provider=s,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return U(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=lc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ot(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BR.get())};e()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="pendingRedirect",oo=new Map;class qR extends Ej{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=oo.get(this.auth._key());if(!e){try{const s=await YR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}oo.set(this.auth._key(),e)}return this.bypassAuthState||oo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YR(t,e){const n=Rj(e),s=Tj(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}async function Nx(t,e){return Tj(t)._set(Rj(e),"true")}function QR(){oo.clear()}function jx(t,e){oo.set(t._key(),e)}function Tj(t){return un(t._redirectPersistence)}function Rj(t){return vi(KR,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t,e,n){return XR(t,e,n)}async function XR(t,e,n){if(qe(t.app))return Promise.reject(bt(t));const s=Ye(t);tl(t,e,Ys),await s._initializationPromise;const r=Li(s,n);return await Nx(r,s),r._openRedirect(s,e,"signInViaRedirect")}function ZR(t,e,n){return eP(t,e,n)}async function eP(t,e,n){const s=fe(t);if(tl(s.auth,e,Ys),qe(s.auth.app))return Promise.reject(bt(s.auth));await s.auth._initializationPromise;const r=Li(s.auth,n);await Nx(r,s.auth);const a=await Pj(s);return r._openRedirect(s.auth,e,"reauthViaRedirect",a)}function tP(t,e,n){return nP(t,e,n)}async function nP(t,e,n){const s=fe(t);tl(s.auth,e,Ys),await s.auth._initializationPromise;const r=Li(s.auth,n);await oh(!1,s,e.providerId),await Nx(r,s.auth);const a=await Pj(s);return r._openRedirect(s.auth,e,"linkViaRedirect",a)}async function sP(t,e){return await Ye(t)._initializationPromise,ph(t,e,!1)}async function ph(t,e,n=!1){if(qe(t.app))return Promise.reject(bt(t));const s=Ye(t),r=Li(s,e),l=await new qR(s,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}async function Pj(t){const e=lc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=10*60*1e3;class Aj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Oj(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ot(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rP&&this.cachedEventUids.clear(),this.cachedEventUids.has(f_(e))}saveEventToCache(e){this.cachedEventUids.add(f_(e)),this.lastProcessedEventTime=Date.now()}}function f_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Oj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t,e={}){return Je(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lP=/^https?/;async function oP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Dj(t);for(const n of e)try{if(cP(n))return}catch{}kt(t,"unauthorized-domain")}function cP(t){const e=Mo(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!lP.test(n))return!1;if(aP.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new nc(3e4,6e4);function p_(){const t=nt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uP(t){return new Promise((e,n)=>{var s,r,a;function l(){p_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p_(),n(ot(t,"network-request-failed"))},timeout:dP.get()})}if(!((r=(s=nt().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=nt().gapi)===null||a===void 0)&&a.load)l();else{const c=cj("iframefcb");return nt()[c]=()=>{gapi.load?l():n(ot(t,"network-request-failed"))},hx(`${s3()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw Hd=null,e})}let Hd=null;function hP(t){return Hd=Hd||uP(t),Hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new nc(5e3,15e3),pP="__/auth/iframe",mP="emulator/auth/iframe",gP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vP(t){const e=t.config;U(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ux(e,mP):`https://${t.config.authDomain}/${pP}`,s={apiKey:e.apiKey,appName:t.name,v:Wr},r=xP.get(t.config.apiHost);r&&(s.eid=r);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Mi(s).slice(1)}`}async function yP(t){const e=await hP(t),n=nt().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:vP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gP,dontclear:!0},s=>new Promise(async(r,a)=>{await s.restyle({setHideOnLeave:!1});const l=ot(t,"network-request-failed"),c=nt().setTimeout(()=>{a(l)},fP.get());function d(){nt().clearTimeout(c),r(s)}s.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bP=500,wP=600,NP="_blank",jP="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CP(t,e,n,s=bP,r=wP){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const d=Object.assign(Object.assign({},_P),{width:s.toString(),height:r.toString(),top:a,left:l}),h=ct().toLowerCase();n&&(c=sj(h)?NP:n),tj(h)&&(e=e||jP,d.scrollbars="yes");const g=Object.entries(d).reduce((y,[I,T])=>`${y}${I}=${T},`,"");if(KT(h)&&c!=="_self")return SP(e||"",c),new m_(null);const m=window.open(e||"",c,g);U(m,t,"popup-blocked");try{m.focus()}catch{}return new m_(m)}function SP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="__/auth/handler",kP="emulator/auth/handler",EP=encodeURIComponent("fac");async function Am(t,e,n,s,r,a){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Wr,eventId:r};if(e instanceof Ys){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",_u(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries(a||{}))l[g]=m}if(e instanceof sl){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),h=d?`#${EP}=${encodeURIComponent(d)}`:"";return`${TP(t)}?${Mi(c).slice(1)}${h}`}function TP({config:t}){return t.emulator?ux(t,kP):`https://${t.authDomain}/${IP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class RP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ii,this._completeRedirectFn=ph,this._overrideRedirectResult=jx}async _openPopup(e,n,s,r){var a;Kn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Am(e,n,s,Mo(),r);return CP(e,l,lc())}async _openRedirect(e,n,s,r){await this._originValidation(e);const a=await Am(e,n,s,Mo(),r);return fR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Kn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await yP(e),s=new Aj(e);return n.register("authEvent",r=>(U(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Np,{type:Np},r=>{var a;const l=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[Np];l!==void 0&&n(!!l),kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lj()||nj()||rc()}}const PP=RP;class AP{constructor(e){this.factorId=e}_process(e,n,s){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,s);case"signin":return this._finalizeSignIn(e,n.credential);default:return ls("unexpected MultiFactorSessionType")}}}class Cx extends AP{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Cx(e)}_finalizeEnroll(e,n,s){return aR(e,{idToken:n,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return NR(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Mj{constructor(){}static assertion(e){return Cx._fromCredential(e)}}Mj.FACTOR_ID="phone";var g_="@firebase/auth",x_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MP(t){Pr(new Rn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=s.options;U(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oj(t)},h=new ZT(s,r,a,d);return l3(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Pr(new Rn("auth-internal",e=>{const n=Ye(e.getProvider("auth").getImmediate());return(s=>new OP(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(g_,x_,DP(t)),Vn(g_,x_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=5*60;BE("authIdTokenMaxAge");function FP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}e3({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const a=ot("internal-error");a.customData=r,n(a)},s.type="text/javascript",s.charset="UTF-8",FP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MP("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=2e3;async function $P(t,e,n){var s;const{BuildInfo:r}=Ei();Kn(e.sessionId,"AuthEvent did not contain a session ID");const a=await HP(e.sessionId),l={};return rc()?l.ibi=r.packageName:sc()?l.apn=r.packageName:kt(t,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,Am(t,n,e.type,void 0,(s=e.eventId)!==null&&s!==void 0?s:void 0,l)}async function WP(t){const{BuildInfo:e}=Ei(),n={};rc()?n.iosBundleId=e.packageName:sc()?n.androidPackageName=e.packageName:kt(t,"operation-not-supported-in-this-environment"),await Dj(t,n)}function zP(t){const{cordova:e}=Ei();return new Promise(n=>{e.plugins.browsertab.isAvailable(s=>{let r=null;s?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,GT()?"_blank":"_system","location=yes"),n(r)})})}async function BP(t,e,n){const{cordova:s}=Ei();let r=()=>{};try{await new Promise((a,l)=>{let c=null;function d(){var m;a();const y=(m=s.plugins.browsertab)===null||m===void 0?void 0:m.close;typeof y=="function"&&y(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){c||(c=window.setTimeout(()=>{l(ot(t,"redirect-cancelled-by-user"))},UP))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(d),document.addEventListener("resume",h,!1),sc()&&document.addEventListener("visibilitychange",g,!1),r=()=>{e.removePassiveListener(d),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",g,!1),c&&window.clearTimeout(c)}})}finally{r()}}function VP(t){var e,n,s,r,a,l,c,d,h,g;const m=Ei();U(typeof((e=m==null?void 0:m.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof((n=m==null?void 0:m.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U(typeof((a=(r=(s=m==null?void 0:m.cordova)===null||s===void 0?void 0:s.plugins)===null||r===void 0?void 0:r.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((d=(c=(l=m==null?void 0:m.cordova)===null||l===void 0?void 0:l.plugins)===null||c===void 0?void 0:c.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U(typeof((g=(h=m==null?void 0:m.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function HP(t){const e=GP(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function GP(t){if(Kn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=20;class qP extends Aj{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function YP(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:XP(),postBody:null,tenantId:t.tenantId,error:ot(t,"no-auth-event")}}function QP(t,e){return Om()._set(Dm(t),e)}async function v_(t){const e=await Om()._get(Dm(t));return e&&await Om()._remove(Dm(t)),e}function JP(t,e){var n,s;const r=eA(e);if(r.includes("/__/auth/callback")){const a=Gd(r),l=a.firebaseError?ZP(decodeURIComponent(a.firebaseError)):null,c=(s=(n=l==null?void 0:l.code)===null||n===void 0?void 0:n.split("auth/"))===null||s===void 0?void 0:s[1],d=c?ot(c):null;return d?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function XP(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<KP;n++){const s=Math.floor(Math.random()*e.length);t.push(e.charAt(s))}return t.join("")}function Om(){return un(yx)}function Dm(t){return vi("authEvent",t.config.apiKey,t.name)}function ZP(t){try{return JSON.parse(t)}catch{return null}}function eA(t){const e=Gd(t),n=e.link?decodeURIComponent(e.link):void 0,s=Gd(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Gd(r).link||r||s||n||t}function Gd(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return wa(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=500;class nA{constructor(){this._redirectPersistence=Ii,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ph,this._overrideRedirectResult=jx}async _initialize(e){const n=e._key();let s=this.eventManagers.get(n);return s||(s=new qP(e),this.eventManagers.set(n,s),this.attachCallbackListeners(e,s)),s}_openPopup(e){kt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,s,r){VP(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),QR(),await this._originValidation(e);const l=YP(e,s,r);await QP(e,l);const c=await $P(e,l,n),d=await zP(c);return BP(e,a,d)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WP(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:s,handleOpenURL:r,BuildInfo:a}=Ei(),l=setTimeout(async()=>{await v_(e),n.onEvent(y_())},tA),c=async g=>{clearTimeout(l);const m=await v_(e);let y=null;m&&(g!=null&&g.url)&&(y=JP(m,g.url)),n.onEvent(y||y_())};typeof s<"u"&&typeof s.subscribe=="function"&&s.subscribe(null,c);const d=r,h=`${a.packageName.toLowerCase()}://`;Ei().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(h)&&c({url:g}),typeof d=="function")try{d(g)}catch(m){console.error(m)}}}}const sA=nA;function y_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ot("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e){Ye(t)._logFramework(e)}var iA="@firebase/auth-compat",aA="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1e3;function co(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function oA(){return co()==="http:"||co()==="https:"}function Lj(t=ct()){return!!((co()==="file:"||co()==="ionic:"||co()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cA(){return sh()||EN()}function dA(){return PN()&&(document==null?void 0:document.documentMode)===11}function uA(t=ct()){return/Edge\/\d+/.test(t)}function hA(t=ct()){return dA()||uA(t)}function Fj(){try{const t=self.localStorage,e=lc();if(t)return t.setItem(e,"1"),t.removeItem(e),hA()?yu():!0}catch{return Sx()&&yu()}return!1}function Sx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jp(){return(oA()||RN()||Lj())&&!cA()&&Fj()&&!Sx()}function Uj(){return Lj()&&typeof document<"u"}async function fA(){return Uj()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},lA);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function pA(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on={LOCAL:"local",NONE:"none",SESSION:"session"},$l=U,$j="persistence";function mA(t,e){if($l(Object.values(on).includes(e),t,"invalid-persistence-type"),sh()){$l(e!==on.SESSION,t,"unsupported-persistence-type");return}if(EN()){$l(e===on.NONE,t,"unsupported-persistence-type");return}if(Sx()){$l(e===on.NONE||e===on.LOCAL&&yu(),t,"unsupported-persistence-type");return}$l(e===on.NONE||Fj(),t,"unsupported-persistence-type")}async function Mm(t){await t._initializationPromise;const e=Wj(),n=vi($j,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function gA(t,e){const n=Wj();if(!n)return[];const s=vi($j,t,e);switch(n.getItem(s)){case on.NONE:return[Va];case on.LOCAL:return[$o,Ii];case on.SESSION:return[Ii];default:return[]}}function Wj(){var t;try{return((t=pA())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=U;class fr{constructor(){this.browserResolver=un(PP),this.cordovaResolver=un(sA),this.underlyingResolver=null,this._redirectPersistence=Ii,this._completeRedirectFn=ph,this._overrideRedirectResult=jx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,s,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,s,r)}async _openRedirect(e,n,s,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,s,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Uj()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xA(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await fA();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){return t.unwrap()}function vA(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){return Bj(t)}function _A(t,e){var n;const s=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new bA(t,rR(t,e))}else if(s){const r=Bj(e),a=e;r&&(a.credential=r,a.tenantId=s.tenantId||void 0,a.email=s.email||void 0,a.phoneNumber=s.phoneNumber||void 0)}}function Bj(t){const{_tokenResponse:e}=t instanceof tn?t.customData:t;if(!e)return null;if(!(t instanceof tn)&&"temporaryProof"in e&&"phoneNumber"in e)return ki.credentialFromResult(t);const n=e.providerId;if(!n||n===Ul.PASSWORD)return null;let s;switch(n){case Ul.GOOGLE:s=rs;break;case Ul.FACEBOOK:s=ss;break;case Ul.GITHUB:s=is;break;case Ul.TWITTER:s=as;break;default:const{oauthIdToken:r,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:c,nonce:d}=e;return!a&&!l&&!r&&!c?null:c?n.startsWith("saml.")?Ha._create(n,c):us._fromParams({providerId:n,signInMethod:n,pendingToken:c,idToken:r,accessToken:a}):new Ra(n).credential({idToken:r,accessToken:a,rawNonce:d})}return t instanceof tn?s.credentialFromError(t):s.credentialFromResult(t)}function Kt(t,e){return e.catch(n=>{throw n instanceof tn&&_A(t,n),n}).then(n=>{const s=n.operationType,r=n.user;return{operationType:s,credential:yA(n),additionalUserInfo:sR(n),user:Ds.getOrCreate(r)}})}async function Lm(t,e){const n=await e;return{verificationId:n.verificationId,confirm:s=>Kt(t,n.confirm(s))}}class bA{constructor(e,n){this.resolver=n,this.auth=vA(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Kt(zj(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this._delegate=e,this.multiFactor=oR(e)}static getOrCreate(e){return Ds.USER_MAP.has(e)||Ds.USER_MAP.set(e,new Ds(e)),Ds.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Kt(this.auth,xj(this._delegate,e))}async linkWithPhoneNumber(e,n){return Lm(this.auth,LR(this._delegate,e,n))}async linkWithPopup(e){return Kt(this.auth,GR(this._delegate,e,fr))}async linkWithRedirect(e){return await Mm(Ye(this.auth)),tP(this._delegate,e,fr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Kt(this.auth,vj(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Lm(this.auth,FR(this._delegate,e,n))}reauthenticateWithPopup(e){return Kt(this.auth,HR(this._delegate,e,fr))}async reauthenticateWithRedirect(e){return await Mm(Ye(this.auth)),ZR(this._delegate,e,fr)}sendEmailVerification(e){return G3(this._delegate,e)}async unlink(e){return await P3(this._delegate,e),this}updateEmail(e){return Q3(this._delegate,e)}updatePassword(e){return J3(this._delegate,e)}updatePhoneNumber(e){return UR(this._delegate,e)}updateProfile(e){return Y3(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return K3(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ds.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=U;class Fm{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:s}=e.options;Wl(s,"invalid-api-key",{appName:e.name}),Wl(s,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?fr:void 0;this._delegate=n.initialize({options:{persistence:wA(s,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(CT),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ds.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){o3(this._delegate,e,n)}applyActionCode(e){return L3(this._delegate,e)}checkActionCode(e){return yj(this._delegate,e)}confirmPasswordReset(e,n){return M3(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Kt(this._delegate,U3(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return H3(this._delegate,e)}isSignInWithEmailLink(e){return z3(this._delegate,e)}async getRedirectResult(){Wl(jp(),this._delegate,"operation-not-supported-in-this-environment");const e=await sP(this._delegate,fr);return e?Kt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){rA(this._delegate,e)}onAuthStateChanged(e,n,s){const{next:r,error:a,complete:l}=__(e,n,s);return this._delegate.onAuthStateChanged(r,a,l)}onIdTokenChanged(e,n,s){const{next:r,error:a,complete:l}=__(e,n,s);return this._delegate.onIdTokenChanged(r,a,l)}sendSignInLinkToEmail(e,n){return W3(this._delegate,e,n)}sendPasswordResetEmail(e,n){return D3(this._delegate,e,n||void 0)}async setPersistence(e){mA(this._delegate,e);let n;switch(e){case on.SESSION:n=Ii;break;case on.LOCAL:n=await un($o)._isAvailable()?$o:yx;break;case on.NONE:n=Va;break;default:return kt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Kt(this._delegate,R3(this._delegate))}signInWithCredential(e){return Kt(this._delegate,ch(this._delegate,e))}signInWithCustomToken(e){return Kt(this._delegate,O3(this._delegate,e))}signInWithEmailAndPassword(e,n){return Kt(this._delegate,$3(this._delegate,e,n))}signInWithEmailLink(e,n){return Kt(this._delegate,B3(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Lm(this._delegate,MR(this._delegate,e,n))}async signInWithPopup(e){return Wl(jp(),this._delegate,"operation-not-supported-in-this-environment"),Kt(this._delegate,VR(this._delegate,e,fr))}async signInWithRedirect(e){return Wl(jp(),this._delegate,"operation-not-supported-in-this-environment"),await Mm(this._delegate),JR(this._delegate,e,fr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return F3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Fm.Persistence=on;function __(t,e,n){let s=t;typeof t!="function"&&({next:s,error:e,complete:n}=t);const r=s;return{next:l=>r(l&&Ds.getOrCreate(l)),error:e,complete:n}}function wA(t,e){const n=gA(t,e);if(typeof self<"u"&&!n.includes($o)&&n.push($o),typeof window<"u")for(const s of[yx,Ii])n.includes(s)||n.push(s);return n.includes(Va)||n.push(Va),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.providerId="phone",this._delegate=new ki(zj(ln.auth()))}static credential(e,n){return ki.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Ix.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD;Ix.PROVIDER_ID=ki.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=U;class jA{constructor(e,n,s=ln.app()){var r;NA((r=s.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:s.name}),this._delegate=new OR(s.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="auth-compat";function SA(t){t.INTERNAL.registerComponent(new Rn(CA,e=>{const n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("auth");return new Fm(n,s)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:oa.EMAIL_SIGNIN,PASSWORD_RESET:oa.PASSWORD_RESET,RECOVER_EMAIL:oa.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:oa.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:oa.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:oa.VERIFY_EMAIL}},EmailAuthProvider:zr,FacebookAuthProvider:ss,GithubAuthProvider:is,GoogleAuthProvider:rs,OAuthProvider:Ra,SAMLAuthProvider:ju,PhoneAuthProvider:Ix,PhoneMultiFactorGenerator:Mj,RecaptchaVerifier:jA,TwitterAuthProvider:as,Auth:Fm,AuthCredential:nl,Error:tn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(iA,aA)}SA(ln);var b_={};const w_="@firebase/database",N_="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vj="";function Hj(t){Vj=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),at(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ao(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IA(e)}}catch{}return new kA},mi=Gj("localStorage"),Um=Gj("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new tc("@firebase/database"),Kj=function(){let t=1;return function(){return t++}}(),qj=function(t){const e=s2(t),n=new e2;n.update(e);const s=n.digest();return Zg.encodeByteArray(s)},cc=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=cc.apply(null,s):typeof s=="object"?e+=at(s):e+=s,e+=" "}return e};let _i=null,j_=!0;const Yj=function(t,e){W(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Aa.logLevel=ke.VERBOSE,_i=Aa.log.bind(Aa),e&&Um.set("logging_enabled",!0)):typeof t=="function"?_i=t:(_i=null,Um.remove("logging_enabled"))},yt=function(...t){if(j_===!0&&(j_=!1,_i===null&&Um.get("logging_enabled")===!0&&Yj(!0)),_i){const e=cc.apply(null,t);_i(e)}},dc=function(t){return function(...e){yt(t,...e)}},$m=function(...t){const e="FIREBASE INTERNAL ERROR: "+cc(...t);Aa.error(e)},hs=function(...t){const e=`FIREBASE FATAL ERROR: ${cc(...t)}`;throw Aa.error(e),new Error(e)},Ot=function(...t){const e="FIREBASE WARNING: "+cc(...t);Aa.warn(e)},EA=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mh=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},TA=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ar="[MIN_NAME]",Gs="[MAX_NAME]",Fi=function(t,e){if(t===e)return 0;if(t===Ar||e===Gs)return-1;if(e===Ar||t===Gs)return 1;{const n=C_(t),s=C_(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},RA=function(t,e){return t===e?0:t<e?-1:1},zl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+at(e))},kx=function(t){if(typeof t!="object"||t===null)return at(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=at(e[s]),n+=":",n+=kx(t[e[s]]);return n+="}",n},Qj=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function wt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Jj=function(t){W(!mh(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,a,l,c,d;t===0?(a=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=c+s,l=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(a=0,l=Math.round(t/Math.pow(2,1-s-n))));const h=[];for(d=n;d;d-=1)h.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)h.push(a%2?1:0),a=Math.floor(a/2);h.push(r?1:0),h.reverse();const g=h.join("");let m="";for(d=0;d<64;d+=8){let y=parseInt(g.substr(d,8),2).toString(16);y.length===1&&(y="0"+y),m=m+y}return m.toLowerCase()},PA=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},AA=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OA(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const DA=new RegExp("^-?(0*)\\d{1,10}$"),MA=-2147483648,LA=2147483647,C_=function(t){if(DA.test(t)){const e=Number(t);if(e>=MA&&e<=LA)return e}return null},rl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ot("Exception was thrown by user callback.",n),e},Math.floor(0))}},FA=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},uo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(e)}}class Oa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Oa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="5",Xj="v",Zj="s",e1="r",t1="f",n1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,s1="ls",r1="p",Wm="ac",i1="websocket",a1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,s,r,a=!1,l="",c=!1,d=!1){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function WA(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function o1(t,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let s;if(e===i1)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===a1)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);WA(t)&&(n.ns=t.namespace);const r=[];return wt(n,(a,l)=>{r.push(a+"="+l)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.counters_={}}incrementCounter(e,n=1){pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return FE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp={},Sp={};function Tx(t){const e=t.toString();return Cp[e]||(Cp[e]=new zA),Cp[e]}function BA(t,e){const n=t.toString();return Sp[n]||(Sp[n]=e()),Sp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&rl(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="start",HA="close",GA="pLPCommand",KA="pRTLPCB",c1="id",d1="pw",u1="ser",qA="cb",YA="seg",QA="ts",JA="d",XA="dframe",h1=1870,f1=30,ZA=h1-f1,e4=25e3,t4=3e4;class pr{constructor(e,n,s,r,a,l,c){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dc(e),this.stats_=Tx(n),this.urlFn=d=>(this.appCheckToken&&(d[Wm]=this.appCheckToken),o1(n,a1,d))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new VA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t4)),TA(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rx((...a)=>{const[l,c,d,h,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===S_)this.id=c,this.password=d;else if(l===HA)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,c]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const s={};s[S_]="t",s[u1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[qA]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Xj]=Ex,this.transportSessionId&&(s[Zj]=this.transportSessionId),this.lastSessionId&&(s[s1]=this.lastSessionId),this.applicationId&&(s[r1]=this.applicationId),this.appCheckToken&&(s[Wm]=this.appCheckToken),typeof location<"u"&&location.hostname&&n1.test(location.hostname)&&(s[e1]=t1);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pr.forceAllow_=!0}static forceDisallow(){pr.forceDisallow_=!0}static isAvailable(){return pr.forceAllow_?!0:!pr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!PA()&&!AA()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=at(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=SN(n),r=Qj(s,ZA);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[XA]="t",s[c1]=e,s[d1]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=at(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Rx{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Kj(),window[GA+this.uniqueCallbackIdentifier]=e,window[KA+this.uniqueCallbackIdentifier]=n,this.myIFrame=Rx.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){yt("frame writing exception"),c.stack&&yt(c.stack),yt(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||yt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[c1]=this.myID,e[d1]=this.myPW,e[u1]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+f1+s.length<=h1;){const l=this.pendingSegs.shift();s=s+"&"+YA+r+"="+l.seg+"&"+QA+r+"="+l.ts+"&"+JA+r+"="+l.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(e4)),a=()=>{clearTimeout(r),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{yt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=16384,s4=45e3;let ku=null;typeof MozWebSocket<"u"?ku=MozWebSocket:typeof WebSocket<"u"&&(ku=WebSocket);class Nn{constructor(e,n,s,r,a,l,c){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dc(this.connId),this.stats_=Tx(n),this.connURL=Nn.connectionURL_(n,l,c,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,a){const l={};return l[Xj]=Ex,typeof location<"u"&&location.hostname&&n1.test(location.hostname)&&(l[e1]=t1),n&&(l[Zj]=n),s&&(l[s1]=s),r&&(l[Wm]=r),a&&(l[r1]=a),o1(e,i1,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mi.set("previous_websocket_failure",!0);try{let s;KE(),this.mySock=new ku(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Nn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&ku!==null&&!Nn.forceDisallow_}static previouslyFailed(){return mi.isInMemoryStorage||mi.get("previous_websocket_failure")===!0}markConnectionHealthy(){mi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Ao(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=at(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Qj(n,n4);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(s4))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nn.responsesRequiredToBeHealthy=2;Nn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[pr,Nn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Nn&&Nn.isAvailable();let s=n&&!Nn.previouslyFailed();if(e.webSocketOnly&&(n||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Nn];else{const r=this.transports_=[];for(const a of Ga.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);Ga.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ga.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=6e4,i4=5e3,a4=10*1024,l4=100*1024,Ip="t",I_="d",o4="s",k_="r",c4="e",E_="o",T_="a",R_="n",P_="p",d4="h";class u4{constructor(e,n,s,r,a,l,c,d,h,g){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=d,this.onKill_=h,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dc("c:"+this.id+":"),this.transportManager_=new Ga(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=uo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>l4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>a4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ip in e){const n=e[Ip];n===T_?this.upgradeIfSecondaryHealthy_():n===k_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===E_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=zl("t",e),s=zl("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:P_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:T_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:R_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=zl("t",e),s=zl("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=zl(Ip,e);if(I_ in e){const s=e[I_];if(n===d4){const r=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===R_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===o4?this.onConnectionShutdown_(s):n===k_?this.onReset_(s):n===c4?$m("Server Error: "+s):n===E_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$m("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ex!==s&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),uo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(r4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(i4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:P_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===n&&(!s||s===r[a].context)){r.splice(a,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends m1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!tx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Eu}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=32,O_=768;class Se{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function we(){return new Se("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Or(t){return t.pieces_.length-t.pieceNum_}function Pe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Se(t.pieces_,e)}function Px(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function h4(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Wo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function g1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Se(e,0)}function We(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Se)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new Se(n,0)}function xe(t){return t.pieceNum_>=t.pieces_.length}function Ut(t,e){const n=ge(t),s=ge(e);if(n===null)return e;if(n===s)return Ut(Pe(t),Pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function f4(t,e){const n=Wo(t,0),s=Wo(e,0);for(let r=0;r<n.length&&r<s.length;r++){const a=Fi(n[r],s[r]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function Ax(t,e){if(Or(t)!==Or(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Cn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Or(t)>Or(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class p4{constructor(e,n){this.errorPrefix_=n,this.parts_=Wo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=rh(this.parts_[s]);x1(this)}}function m4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=rh(e),x1(t)}function g4(t){const e=t.parts_.pop();t.byteLength_-=rh(e),t.parts_.length>0&&(t.byteLength_-=1)}function x1(t){if(t.byteLength_>O_)throw new Error(t.errorPrefix_+"has a key path longer than "+O_+" bytes ("+t.byteLength_+").");if(t.parts_.length>A_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+A_+") or object contains a cycle "+di(t))}function di(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends m1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Ox}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=1e3,x4=60*5*1e3,D_=30*1e3,v4=1.3,y4=3e4,_4="server_kill",M_=3;class Us extends p1{constructor(e,n,s,r,a,l,c,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=Us.nextPersistentConnectionId_++,this.log_=dc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bl,this.maxReconnectDelay_=x4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ox.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Eu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,a={r,a:e,b:n};this.log_(at(a)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new Yt,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,r){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(l).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const a={p:s},l="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,c=>{const d=c.d,h=c.s;Us.warnOnListenWarnings_(d,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(h,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&pn(e,"w")){const s=Si(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ZE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=D_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=XE(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const a=r.s,l=r.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const a={p:e},l="n";r&&(a.q=s,a.t=r),this.sendRequest(l,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,a){this.initConnection_();const l={p:n,d:s};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+at(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):$m("Unrecognized action received from server: "+at(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Bl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>y4&&(this.reconnectDelay_=Bl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*v4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Us.nextConnectionId_++,a=this.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,s())},h=function(m){W(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:d,sendRequest:h};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,y]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?yt("getToken() completed but was canceled"):(yt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new u4(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,I=>{Ot(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(_4)},a))}catch(m){this.log_("Failed to get token: "+m),l||(this.repoInfo_.nodeAdmin&&Ot(m),d())}}}interrupt(e){yt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],_u(this.interruptReasons_)&&(this.reconnectDelay_=Bl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>kx(a)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new Se(e).toString();let r;if(this.listens.has(s)){const a=this.listens.get(s);r=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){yt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=M_&&(this.reconnectDelay_=D_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){yt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=M_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Vj.replace(/\./g,"-")]=1,tx()?e["framework.cordova"]=1:sh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Eu.getInstance().currentlyOnline();return _u(this.interruptReasons_)&&e}}Us.nextPersistentConnectionId_=0;Us.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ve(Ar,e),r=new ve(Ar,n);return this.compare(s,r)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd;class v1 extends gh{static get __EMPTY_NODE(){return kd}static set __EMPTY_NODE(e){kd=e}compare(e,n){return Fi(e.name,n.name)}isDefinedOn(e){throw el("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Gs,kd)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,kd)}toString(){return".key"}}const ds=new v1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,s,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?s(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class vt{constructor(e,n,s,r,a){this.key=e,this.value=n,this.color=s??vt.RED,this.left=r??Jt.EMPTY_NODE,this.right=a??Jt.EMPTY_NODE}copy(e,n,s,r,a){return new vt(e??this.key,n??this.value,s??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const a=s(e,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):a===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}vt.RED=!0;vt.BLACK=!1;class b4{copy(e,n,s,r,a){return this}insert(e,n,s){return new vt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Jt{constructor(e,n=Jt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Jt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(e){return new Jt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ed(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ed(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ed(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ed(this.root_,null,this.comparator_,!0,e)}}Jt.EMPTY_NODE=new b4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e){return Fi(t.name,e.name)}function Dx(t,e){return Fi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zm;function N4(t){zm=t}const y1=function(t){return typeof t=="number"?"number:"+Jj(t):"string:"+t},_1=function(t){if(t.isLeafNode()){const e=t.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pn(e,".sv"),"Priority must be a string or number.")}else W(t===zm||t.isEmpty(),"priority of unexpected type.");W(t===zm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L_;class mt{constructor(e,n=mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_1(this.priorityNode_)}static set __childrenNodeConstructor(e){L_=e}static get __childrenNodeConstructor(){return L_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new mt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:mt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:ge(e)===".priority"?this.priorityNode_:mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ge(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(W(s!==".priority"||Or(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+y1(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Jj(this.value_):e+=this.value_,this.lazyHash_=qj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===mt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof mt.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=mt.VALUE_TYPE_ORDER.indexOf(n),a=mt.VALUE_TYPE_ORDER.indexOf(s);return W(r>=0,"Unknown leaf type: "+n),W(a>=0,"Unknown leaf type: "+s),r===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1,w1;function j4(t){b1=t}function C4(t){w1=t}class S4 extends gh{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),a=s.compareTo(r);return a===0?Fi(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Gs,new mt("[PRIORITY-POST]",w1))}makePost(e,n){const s=b1(e);return new ve(n,new mt("[PRIORITY-POST]",s))}toString(){return".priority"}}const De=new S4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=Math.log(2);class k4{constructor(e){const n=a=>parseInt(Math.log(a)/I4,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Tu=function(t,e,n,s){t.sort(e);const r=function(d,h){const g=h-d;let m,y;if(g===0)return null;if(g===1)return m=t[d],y=n?n(m):m,new vt(y,m.node,vt.BLACK,null,null);{const I=parseInt(g/2,10)+d,T=r(d,I),L=r(I+1,h);return m=t[I],y=n?n(m):m,new vt(y,m.node,vt.BLACK,T,L)}},a=function(d){let h=null,g=null,m=t.length;const y=function(T,L){const ne=m-T,C=m;m-=T;const N=r(ne+1,C),S=t[ne],R=n?n(S):S;I(new vt(R,S.node,L,null,N))},I=function(T){h?(h.left=T,h=T):(g=T,h=T)};for(let T=0;T<d.count;++T){const L=d.nextBitIsOne(),ne=Math.pow(2,d.count-(T+1));L?y(ne,vt.BLACK):(y(ne,vt.BLACK),y(ne,vt.RED))}return g},l=new k4(t.length),c=a(l);return new Jt(s||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp;const ca={};class Ms{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return W(ca&&De,"ChildrenNode.ts has not been loaded"),kp=kp||new Ms({".priority":ca},{".priority":De}),kp}get(e){const n=Si(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Jt?n:null}hasIndex(e){return pn(this.indexSet_,e.toString())}addIndex(e,n){W(e!==ds,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const a=n.getIterator(ve.Wrap);let l=a.getNext();for(;l;)r=r||e.isDefinedOn(l.node),s.push(l),l=a.getNext();let c;r?c=Tu(s,e.getCompare()):c=ca;const d=e.toString(),h=Object.assign({},this.indexSet_);h[d]=e;const g=Object.assign({},this.indexes_);return g[d]=c,new Ms(g,h)}addToIndexes(e,n){const s=bu(this.indexes_,(r,a)=>{const l=Si(this.indexSet_,a);if(W(l,"Missing index implementation for "+a),r===ca)if(l.isDefinedOn(e.node)){const c=[],d=n.getIterator(ve.Wrap);let h=d.getNext();for(;h;)h.name!==e.name&&c.push(h),h=d.getNext();return c.push(e),Tu(c,l.getCompare())}else return ca;else{const c=n.get(e.name);let d=r;return c&&(d=d.remove(new ve(e.name,c))),d.insert(e,e.node)}});return new Ms(s,this.indexSet_)}removeFromIndexes(e,n){const s=bu(this.indexes_,r=>{if(r===ca)return r;{const a=n.get(e.name);return a?r.remove(new ve(e.name,a)):r}});return new Ms(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl;class ie{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&_1(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vl||(Vl=new ie(new Jt(Dx),null,Ms.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vl}updatePriority(e){return this.children_.isEmpty()?this:new ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Vl:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(Pe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ve(e,n);let r,a;n.isEmpty()?(r=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const l=r.isEmpty()?Vl:this.priorityNode_;return new ie(r,l,a)}}updateChild(e,n){const s=ge(e);if(s===null)return n;{W(ge(e)!==".priority"||Or(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(Pe(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,a=!0;if(this.forEachChild(De,(l,c)=>{n[l]=c.val(e),s++,a&&ie.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):a=!1}),!e&&a&&r<2*s){const l=[];for(const c in n)l[c]=n[c];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+y1(this.getPriority().val())+":"),this.forEachChild(De,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":qj(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const a=r.getPredecessorKey(new ve(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,ve.Wrap);let a=r.peek();for(;a!=null&&n.compare(a,e)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let a=r.peek();for(;a!=null&&n.compare(a,e)>0;)r.getNext(),a=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uc?-1:0}withIndex(e){if(e===ds||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ds||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(De),r=n.getIterator(De);let a=s.getNext(),l=r.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=s.getNext(),l=r.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===ds?null:this.indexMap_.get(e.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class E4 extends ie{constructor(){super(new Jt(Dx),ie.EMPTY_NODE,Ms.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ie.EMPTY_NODE}isEmpty(){return!1}}const uc=new E4;Object.defineProperties(ve,{MIN:{value:new ve(Ar,ie.EMPTY_NODE)},MAX:{value:new ve(Gs,uc)}});v1.__EMPTY_NODE=ie.EMPTY_NODE;mt.__childrenNodeConstructor=ie;N4(uc);C4(uc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=!0;function Ve(t,e=null){if(t===null)return ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new mt(n,Ve(e))}if(!(t instanceof Array)&&T4){const n=[];let s=!1;if(wt(t,(l,c)=>{if(l.substring(0,1)!=="."){const d=Ve(c);d.isEmpty()||(s=s||!d.getPriority().isEmpty(),n.push(new ve(l,d)))}}),n.length===0)return ie.EMPTY_NODE;const a=Tu(n,w4,l=>l.name,Dx);if(s){const l=Tu(n,De.getCompare());return new ie(a,Ve(e),new Ms({".priority":l},{".priority":De}))}else return new ie(a,Ve(e),Ms.Default)}else{let n=ie.EMPTY_NODE;return wt(t,(s,r)=>{if(pn(t,s)&&s.substring(0,1)!=="."){const a=Ve(r);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(Ve(e))}}j4(Ve);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends gh{constructor(e){super(),this.indexPath_=e,W(!xe(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),a=s.compareTo(r);return a===0?Fi(e.name,n.name):a}makePost(e,n){const s=Ve(e),r=ie.EMPTY_NODE.updateChild(this.indexPath_,s);return new ve(n,r)}maxPost(){const e=ie.EMPTY_NODE.updateChild(this.indexPath_,uc);return new ve(Gs,e)}toString(){return Wo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4 extends gh{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Fi(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const s=Ve(e);return new ve(n,s)}toString(){return".value"}}const Lx=new R4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){return{type:"value",snapshotNode:t}}function Ka(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Bo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function P4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.index_=e}updateChild(e,n,s,r,a,l){W(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(r).equals(s.getChild(r))&&c.isEmpty()===s.isEmpty()||(l!=null&&(s.isEmpty()?e.hasChild(n)?l.trackChildChange(zo(n,c)):W(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(Ka(n,s)):l.trackChildChange(Bo(n,s,c))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(De,(r,a)=>{n.hasChild(r)||s.trackChildChange(zo(r,a))}),n.isLeafNode()||n.forEachChild(De,(r,a)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(a)||s.trackChildChange(Bo(r,a,l))}else s.trackChildChange(Ka(r,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.indexedFilter_=new Fx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vo.getStartPost_(e),this.endPost_=Vo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,a,l){return this.matches(new ve(n,s))||(s=ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,a,l)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ie.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);const a=this;return n.forEachChild(De,(l,c)=>{a.matches(new ve(l,c))||(r=r.updateImmediateChild(l,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Vo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,a,l){return this.rangedFilter_.matches(new ve(n,s))||(s=ie.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,a,l):this.fullLimitUpdateChild_(e,n,s,a,l)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const c=a.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ie.EMPTY_NODE);let a;this.reverse_?a=r.getReverseIterator(this.index_):a=r.getIterator(this.index_);let l=0;for(;a.hasNext();){const c=a.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:r=r.updateImmediateChild(c.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,a){let l;if(this.reverse_){const m=this.index_.getCompare();l=(y,I)=>m(I,y)}else l=this.index_.getCompare();const c=e;W(c.numChildren()===this.limit_,"");const d=new ve(n,s),h=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(c.hasChild(n)){const m=c.getImmediateChild(n);let y=r.getChildAfterChild(this.index_,h,this.reverse_);for(;y!=null&&(y.name===n||c.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);const I=y==null?1:l(y,d);if(g&&!s.isEmpty()&&I>=0)return a!=null&&a.trackChildChange(Bo(n,s,m)),c.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(zo(n,m));const L=c.updateImmediateChild(n,ie.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(a!=null&&a.trackChildChange(Ka(y.name,y.node)),L.updateImmediateChild(y.name,y.node)):L}}else return s.isEmpty()?e:g&&l(h,d)>=0?(a!=null&&(a.trackChildChange(zo(h.name,h.node)),a.trackChildChange(Ka(n,s))),c.updateImmediateChild(n,s).updateImmediateChild(h.name,ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=De}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ar}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===De}copy(){const e=new xh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function O4(t){return t.loadsAllData()?new Fx(t.getIndex()):t.hasLimit()?new A4(t):new Vo(t)}function D4(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function M4(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Bm(t,e,n){const s=t.copy();return s.startSet_=!0,e===void 0&&(e=null),s.indexStartValue_=e,n!=null?(s.startNameSet_=!0,s.indexStartName_=n):(s.startNameSet_=!1,s.indexStartName_=""),s}function L4(t,e,n){let s;return t.index_===ds||n?s=Bm(t,e,n):s=Bm(t,e,Gs),s.startAfterSet_=!0,s}function Vm(t,e,n){const s=t.copy();return s.endSet_=!0,e===void 0&&(e=null),s.indexEndValue_=e,n!==void 0?(s.endNameSet_=!0,s.indexEndName_=n):(s.endNameSet_=!1,s.indexEndName_=""),s}function F4(t,e,n){let s;return t.index_===ds||n?s=Vm(t,e,n):s=Vm(t,e,Ar),s.endBeforeSet_=!0,s}function vh(t,e){const n=t.copy();return n.index_=e,n}function F_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===De?n="$priority":t.index_===Lx?n="$value":t.index_===ds?n="$key":(W(t.index_ instanceof Mx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=at(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=at(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+at(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=at(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+at(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function U_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==De&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends p1{constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=dc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Ru.getListenId_(e,s),c={};this.listens_[l]=c;const d=F_(e._queryParams);this.restRequest_(a+".json",d,(h,g)=>{let m=g;if(h===404&&(m=null,h=null),h===null&&this.onDataUpdate_(a,m,!1,s),Si(this.listens_,l)===c){let y;h?h===401?y="permission_denied":y="rest_error:"+h:y="ok",r(y,null)}})}unlisten(e,n){const s=Ru.getListenId_(e,n);delete this.listens_[s]}get(e){const n=F_(e._queryParams),s=e._path.toString(),r=new Yt;return this.restRequest_(s+".json",n,(a,l)=>{let c=l;a===404&&(c=null,a=null),a===null?(this.onDataUpdate_(s,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(n.auth=r.accessToken),a&&a.token&&(n.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Mi(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(s&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=Ao(c.responseText)}catch{Ot("Failed to parse JSON response for "+l+": "+c.responseText)}s(null,d)}else c.status!==401&&c.status!==404&&Ot("Got unsuccessful REST response for "+l+" Status: "+c.status),s(c.status);s=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(){return{value:null,children:new Map}}function il(t,e,n){if(xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=ge(e);t.children.has(s)||t.children.set(s,Pu());const r=t.children.get(s);e=Pe(e),il(r,e,n)}}function Hm(t,e){if(xe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(De,(s,r)=>{il(t,new Se(s),r)}),Hm(t,e)}}else if(t.children.size>0){const n=ge(e);return e=Pe(e),t.children.has(n)&&Hm(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Gm(t,e,n){t.value!==null?n(e,t.value):$4(t,(s,r)=>{const a=new Se(e.toString()+"/"+s);Gm(r,a,n)})}function $4(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&wt(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=10*1e3,z4=30*1e3,B4=5*60*1e3;class V4{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new W4(e);const s=$_+(z4-$_)*Math.random();uo(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;wt(e,(r,a)=>{a>0&&pn(this.statsToReport_,r)&&(n[r]=a,s=!0)}),s&&this.server_.reportStats(n),uo(this.reportStats_.bind(this),Math.floor(Math.random()*2*B4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Wn||(Wn={}));function Ux(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $x(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Wn.ACK_USER_WRITE,this.source=Ux()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Se(e));return new Au(we(),n,this.revert)}}else return W(ge(this.path)===e,"operationForChild called for unrelated child."),new Au(Pe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.source=e,this.path=n,this.type=Wn.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new Ho(this.source,we()):new Ho(this.source,Pe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Wn.OVERWRITE}operationForChild(e){return xe(this.path)?new Ti(this.source,we(),this.snap.getImmediateChild(e)):new Ti(this.source,Pe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Wn.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new Se(e));return n.isEmpty()?null:n.value?new Ti(this.source,we(),n.value):new qa(this.source,we(),n)}else return W(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qa(this.source,Pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function G4(t,e,n,s){const r=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(P4(l.childName,l.snapshotNode))}),Hl(t,r,"child_removed",e,s,n),Hl(t,r,"child_added",e,s,n),Hl(t,r,"child_moved",a,s,n),Hl(t,r,"child_changed",e,s,n),Hl(t,r,"value",e,s,n),r}function Hl(t,e,n,s,r,a){const l=s.filter(c=>c.type===n);l.sort((c,d)=>q4(t,c,d)),l.forEach(c=>{const d=K4(t,c,a);r.forEach(h=>{h.respondsTo(c.type)&&e.push(h.createEvent(d,t.query_))})})}function K4(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function q4(t,e,n){if(e.childName==null||n.childName==null)throw el("Should only compare child_ events.");const s=new ve(e.childName,e.snapshotNode),r=new ve(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e){return{eventCache:t,serverCache:e}}function ho(t,e,n,s){return yh(new Dr(e,n,s),t.serverCache)}function j1(t,e,n,s){return yh(t.eventCache,new Dr(e,n,s))}function Ou(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ri(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep;const Y4=()=>(Ep||(Ep=new Jt(RA)),Ep);class Ae{constructor(e,n=Y4()){this.value=e,this.children=n}static fromObject(e){let n=new Ae(null);return wt(e,(s,r)=>{n=n.set(new Se(s),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:we(),value:this.value};if(xe(e))return null;{const s=ge(e),r=this.children.get(s);if(r!==null){const a=r.findRootMostMatchingPathAndValue(Pe(e),n);return a!=null?{path:We(new Se(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=ge(e),s=this.children.get(n);return s!==null?s.subtree(Pe(e)):new Ae(null)}}set(e,n){if(xe(e))return new Ae(n,this.children);{const s=ge(e),a=(this.children.get(s)||new Ae(null)).set(Pe(e),n),l=this.children.insert(s,a);return new Ae(this.value,l)}}remove(e){if(xe(e))return this.children.isEmpty()?new Ae(null):new Ae(null,this.children);{const n=ge(e),s=this.children.get(n);if(s){const r=s.remove(Pe(e));let a;return r.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,r),this.value===null&&a.isEmpty()?new Ae(null):new Ae(this.value,a)}else return this}}get(e){if(xe(e))return this.value;{const n=ge(e),s=this.children.get(n);return s?s.get(Pe(e)):null}}setTree(e,n){if(xe(e))return n;{const s=ge(e),a=(this.children.get(s)||new Ae(null)).setTree(Pe(e),n);let l;return a.isEmpty()?l=this.children.remove(s):l=this.children.insert(s,a),new Ae(this.value,l)}}fold(e){return this.fold_(we(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,a)=>{s[r]=a.fold_(We(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,we(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(xe(e))return null;{const a=ge(e),l=this.children.get(a);return l?l.findOnPath_(Pe(e),We(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,we(),n)}foreachOnPath_(e,n,s){if(xe(e))return this;{this.value&&s(n,this.value);const r=ge(e),a=this.children.get(r);return a?a.foreachOnPath_(Pe(e),We(n,r),s):new Ae(null)}}foreach(e){this.foreach_(we(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(We(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.writeTree_=e}static empty(){return new Hn(new Ae(null))}}function fo(t,e,n){if(xe(e))return new Hn(new Ae(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let a=s.value;const l=Ut(r,e);return a=a.updateChild(l,n),new Hn(t.writeTree_.set(r,a))}else{const r=new Ae(n),a=t.writeTree_.setTree(e,r);return new Hn(a)}}}function Km(t,e,n){let s=t;return wt(n,(r,a)=>{s=fo(s,We(e,r),a)}),s}function W_(t,e){if(xe(e))return Hn.empty();{const n=t.writeTree_.setTree(e,new Ae(null));return new Hn(n)}}function qm(t,e){return Ui(t,e)!=null}function Ui(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ut(n.path,e)):null}function z_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(De,(s,r)=>{e.push(new ve(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new ve(s,r.value))}),e}function Cr(t,e){if(xe(e))return t;{const n=Ui(t,e);return n!=null?new Hn(new Ae(n)):new Hn(t.writeTree_.subtree(e))}}function Ym(t){return t.writeTree_.isEmpty()}function Ya(t,e){return C1(we(),t.writeTree_,e)}function C1(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,a)=>{r===".priority"?(W(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=C1(We(t,r),a,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(We(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t,e){return E1(e,t)}function Q4(t,e,n,s,r){W(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=fo(t.visibleWrites,e,n)),t.lastWriteId=s}function J4(t,e,n,s){W(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=Km(t.visibleWrites,e,n),t.lastWriteId=s}function X4(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Z4(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,a=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const c=t.allWrites[l];c.visible&&(l>=n&&eO(c,s.path)?r=!1:Cn(s.path,c.path)&&(a=!0)),l--}if(r){if(a)return tO(t),!0;if(s.snap)t.visibleWrites=W_(t.visibleWrites,s.path);else{const c=s.children;wt(c,d=>{t.visibleWrites=W_(t.visibleWrites,We(s.path,d))})}return!0}else return!1}function eO(t,e){if(t.snap)return Cn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Cn(We(t.path,n),e))return!0;return!1}function tO(t){t.visibleWrites=S1(t.allWrites,nO,we()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nO(t){return t.visible}function S1(t,e,n){let s=Hn.empty();for(let r=0;r<t.length;++r){const a=t[r];if(e(a)){const l=a.path;let c;if(a.snap)Cn(n,l)?(c=Ut(n,l),s=fo(s,c,a.snap)):Cn(l,n)&&(c=Ut(l,n),s=fo(s,we(),a.snap.getChild(c)));else if(a.children){if(Cn(n,l))c=Ut(n,l),s=Km(s,c,a.children);else if(Cn(l,n))if(c=Ut(l,n),xe(c))s=Km(s,we(),a.children);else{const d=Si(a.children,ge(c));if(d){const h=d.getChild(Pe(c));s=fo(s,we(),h)}}}else throw el("WriteRecord should have .snap or .children")}}return s}function I1(t,e,n,s,r){if(!s&&!r){const a=Ui(t.visibleWrites,e);if(a!=null)return a;{const l=Cr(t.visibleWrites,e);if(Ym(l))return n;if(n==null&&!qm(l,we()))return null;{const c=n||ie.EMPTY_NODE;return Ya(l,c)}}}else{const a=Cr(t.visibleWrites,e);if(!r&&Ym(a))return n;if(!r&&n==null&&!qm(a,we()))return null;{const l=function(h){return(h.visible||r)&&(!s||!~s.indexOf(h.writeId))&&(Cn(h.path,e)||Cn(e,h.path))},c=S1(t.allWrites,l,e),d=n||ie.EMPTY_NODE;return Ya(c,d)}}}function sO(t,e,n){let s=ie.EMPTY_NODE;const r=Ui(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(De,(a,l)=>{s=s.updateImmediateChild(a,l)}),s;if(n){const a=Cr(t.visibleWrites,e);return n.forEachChild(De,(l,c)=>{const d=Ya(Cr(a,new Se(l)),c);s=s.updateImmediateChild(l,d)}),z_(a).forEach(l=>{s=s.updateImmediateChild(l.name,l.node)}),s}else{const a=Cr(t.visibleWrites,e);return z_(a).forEach(l=>{s=s.updateImmediateChild(l.name,l.node)}),s}}function rO(t,e,n,s,r){W(s||r,"Either existingEventSnap or existingServerSnap must exist");const a=We(e,n);if(qm(t.visibleWrites,a))return null;{const l=Cr(t.visibleWrites,a);return Ym(l)?r.getChild(n):Ya(l,r.getChild(n))}}function iO(t,e,n,s){const r=We(e,n),a=Ui(t.visibleWrites,r);if(a!=null)return a;if(s.isCompleteForChild(n)){const l=Cr(t.visibleWrites,r);return Ya(l,s.getNode().getImmediateChild(n))}else return null}function aO(t,e){return Ui(t.visibleWrites,e)}function lO(t,e,n,s,r,a,l){let c;const d=Cr(t.visibleWrites,e),h=Ui(d,we());if(h!=null)c=h;else if(n!=null)c=Ya(d,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const g=[],m=l.getCompare(),y=a?c.getReverseIteratorFrom(s,l):c.getIteratorFrom(s,l);let I=y.getNext();for(;I&&g.length<r;)m(I,s)!==0&&g.push(I),I=y.getNext();return g}else return[]}function oO(){return{visibleWrites:Hn.empty(),allWrites:[],lastWriteId:-1}}function Du(t,e,n,s){return I1(t.writeTree,t.treePath,e,n,s)}function zx(t,e){return sO(t.writeTree,t.treePath,e)}function B_(t,e,n,s){return rO(t.writeTree,t.treePath,e,n,s)}function Mu(t,e){return aO(t.writeTree,We(t.treePath,e))}function cO(t,e,n,s,r,a){return lO(t.writeTree,t.treePath,e,n,s,r,a)}function Bx(t,e,n){return iO(t.writeTree,t.treePath,e,n)}function k1(t,e){return E1(We(t.treePath,e),t.writeTree)}function E1(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const a=r.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,Bo(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,zo(s,r.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,Ka(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,Bo(s,e.snapshotNode,r.oldSnap));else throw el("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const T1=new uO;class Vx{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Dr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bx(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ri(this.viewCache_),a=cO(this.writes_,r,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){return{filter:t}}function fO(t,e){W(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function pO(t,e,n,s,r){const a=new dO;let l,c;if(n.type===Wn.OVERWRITE){const h=n;h.source.fromUser?l=Qm(t,e,h.path,h.snap,s,r,a):(W(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered()&&!xe(h.path),l=Lu(t,e,h.path,h.snap,s,r,c,a))}else if(n.type===Wn.MERGE){const h=n;h.source.fromUser?l=gO(t,e,h.path,h.children,s,r,a):(W(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered(),l=Jm(t,e,h.path,h.children,s,r,c,a))}else if(n.type===Wn.ACK_USER_WRITE){const h=n;h.revert?l=yO(t,e,h.path,s,r,a):l=xO(t,e,h.path,h.affectedTree,s,r,a)}else if(n.type===Wn.LISTEN_COMPLETE)l=vO(t,e,n.path,s,a);else throw el("Unknown operation type: "+n.type);const d=a.getChanges();return mO(e,l,d),{viewCache:l,changes:d}}function mO(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Ou(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(N1(Ou(e)))}}function R1(t,e,n,s,r,a){const l=e.eventCache;if(Mu(s,n)!=null)return e;{let c,d;if(xe(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Ri(e),g=h instanceof ie?h:ie.EMPTY_NODE,m=zx(s,g);c=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const h=Du(s,Ri(e));c=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{const h=ge(n);if(h===".priority"){W(Or(n)===1,"Can't have a priority with additional path components");const g=l.getNode();d=e.serverCache.getNode();const m=B_(s,n,g,d);m!=null?c=t.filter.updatePriority(g,m):c=l.getNode()}else{const g=Pe(n);let m;if(l.isCompleteForChild(h)){d=e.serverCache.getNode();const y=B_(s,n,l.getNode(),d);y!=null?m=l.getNode().getImmediateChild(h).updateChild(g,y):m=l.getNode().getImmediateChild(h)}else m=Bx(s,h,e.serverCache);m!=null?c=t.filter.updateChild(l.getNode(),h,m,g,r,a):c=l.getNode()}}return ho(e,c,l.isFullyInitialized()||xe(n),t.filter.filtersNodes())}}function Lu(t,e,n,s,r,a,l,c){const d=e.serverCache;let h;const g=l?t.filter:t.filter.getIndexedFilter();if(xe(n))h=g.updateFullNode(d.getNode(),s,null);else if(g.filtersNodes()&&!d.isFiltered()){const I=d.getNode().updateChild(n,s);h=g.updateFullNode(d.getNode(),I,null)}else{const I=ge(n);if(!d.isCompleteForPath(n)&&Or(n)>1)return e;const T=Pe(n),ne=d.getNode().getImmediateChild(I).updateChild(T,s);I===".priority"?h=g.updatePriority(d.getNode(),ne):h=g.updateChild(d.getNode(),I,ne,T,T1,null)}const m=j1(e,h,d.isFullyInitialized()||xe(n),g.filtersNodes()),y=new Vx(r,m,a);return R1(t,m,n,r,y,c)}function Qm(t,e,n,s,r,a,l){const c=e.eventCache;let d,h;const g=new Vx(r,e,a);if(xe(n))h=t.filter.updateFullNode(e.eventCache.getNode(),s,l),d=ho(e,h,!0,t.filter.filtersNodes());else{const m=ge(n);if(m===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),s),d=ho(e,h,c.isFullyInitialized(),c.isFiltered());else{const y=Pe(n),I=c.getNode().getImmediateChild(m);let T;if(xe(y))T=s;else{const L=g.getCompleteChild(m);L!=null?Px(y)===".priority"&&L.getChild(g1(y)).isEmpty()?T=L:T=L.updateChild(y,s):T=ie.EMPTY_NODE}if(I.equals(T))d=e;else{const L=t.filter.updateChild(c.getNode(),m,T,y,g,l);d=ho(e,L,c.isFullyInitialized(),t.filter.filtersNodes())}}}return d}function V_(t,e){return t.eventCache.isCompleteForChild(e)}function gO(t,e,n,s,r,a,l){let c=e;return s.foreach((d,h)=>{const g=We(n,d);V_(e,ge(g))&&(c=Qm(t,c,g,h,r,a,l))}),s.foreach((d,h)=>{const g=We(n,d);V_(e,ge(g))||(c=Qm(t,c,g,h,r,a,l))}),c}function H_(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function Jm(t,e,n,s,r,a,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,h;xe(n)?h=s:h=new Ae(null).setTree(n,s);const g=e.serverCache.getNode();return h.children.inorderTraversal((m,y)=>{if(g.hasChild(m)){const I=e.serverCache.getNode().getImmediateChild(m),T=H_(t,I,y);d=Lu(t,d,new Se(m),T,r,a,l,c)}}),h.children.inorderTraversal((m,y)=>{const I=!e.serverCache.isCompleteForChild(m)&&y.value===null;if(!g.hasChild(m)&&!I){const T=e.serverCache.getNode().getImmediateChild(m),L=H_(t,T,y);d=Lu(t,d,new Se(m),L,r,a,l,c)}}),d}function xO(t,e,n,s,r,a,l){if(Mu(r,n)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(s.value!=null){if(xe(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return Lu(t,e,n,d.getNode().getChild(n),r,a,c,l);if(xe(n)){let h=new Ae(null);return d.getNode().forEachChild(ds,(g,m)=>{h=h.set(new Se(g),m)}),Jm(t,e,n,h,r,a,c,l)}else return e}else{let h=new Ae(null);return s.foreach((g,m)=>{const y=We(n,g);d.isCompleteForPath(y)&&(h=h.set(g,d.getNode().getChild(y)))}),Jm(t,e,n,h,r,a,c,l)}}function vO(t,e,n,s,r){const a=e.serverCache,l=j1(e,a.getNode(),a.isFullyInitialized()||xe(n),a.isFiltered());return R1(t,l,n,s,T1,r)}function yO(t,e,n,s,r,a){let l;if(Mu(s,n)!=null)return e;{const c=new Vx(s,e,r),d=e.eventCache.getNode();let h;if(xe(n)||ge(n)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Du(s,Ri(e));else{const m=e.serverCache.getNode();W(m instanceof ie,"serverChildren would be complete if leaf node"),g=zx(s,m)}g=g,h=t.filter.updateFullNode(d,g,a)}else{const g=ge(n);let m=Bx(s,g,e.serverCache);m==null&&e.serverCache.isCompleteForChild(g)&&(m=d.getImmediateChild(g)),m!=null?h=t.filter.updateChild(d,g,m,Pe(n),c,a):e.eventCache.getNode().hasChild(g)?h=t.filter.updateChild(d,g,ie.EMPTY_NODE,Pe(n),c,a):h=d,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Du(s,Ri(e)),l.isLeafNode()&&(h=t.filter.updateFullNode(h,l,a)))}return l=e.serverCache.isFullyInitialized()||Mu(s,we())!=null,ho(e,h,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new Fx(s.getIndex()),a=O4(s);this.processor_=hO(a);const l=n.serverCache,c=n.eventCache,d=r.updateFullNode(ie.EMPTY_NODE,l.getNode(),null),h=a.updateFullNode(ie.EMPTY_NODE,c.getNode(),null),g=new Dr(d,l.isFullyInitialized(),r.filtersNodes()),m=new Dr(h,c.isFullyInitialized(),a.filtersNodes());this.viewCache_=yh(m,g),this.eventGenerator_=new H4(this.query_)}get query(){return this.query_}}function bO(t){return t.viewCache_.serverCache.getNode()}function wO(t){return Ou(t.viewCache_)}function NO(t,e){const n=Ri(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function G_(t){return t.eventRegistrations_.length===0}function jO(t,e){t.eventRegistrations_.push(e)}function K_(t,e,n){const s=[];if(n){W(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(n,r);l&&s.push(l)})}if(e){let r=[];for(let a=0;a<t.eventRegistrations_.length;++a){const l=t.eventRegistrations_[a];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function q_(t,e,n,s){e.type===Wn.MERGE&&e.source.queryId!==null&&(W(Ri(t.viewCache_),"We should always have a full cache before handling merges"),W(Ou(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,a=pO(t.processor_,r,e,n,s);return fO(t.processor_,a.viewCache),W(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,P1(t,a.changes,a.viewCache.eventCache.getNode(),null)}function CO(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(De,(a,l)=>{s.push(Ka(a,l))}),n.isFullyInitialized()&&s.push(N1(n.getNode())),P1(t,s,n.getNode(),e)}function P1(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return G4(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu;class A1{constructor(){this.views=new Map}}function SO(t){W(!Fu,"__referenceConstructor has already been defined"),Fu=t}function IO(){return W(Fu,"Reference.ts has not been loaded"),Fu}function kO(t){return t.views.size===0}function Hx(t,e,n,s){const r=e.source.queryId;if(r!==null){const a=t.views.get(r);return W(a!=null,"SyncTree gave us an op for an invalid query."),q_(a,e,n,s)}else{let a=[];for(const l of t.views.values())a=a.concat(q_(l,e,n,s));return a}}function O1(t,e,n,s,r){const a=e._queryIdentifier,l=t.views.get(a);if(!l){let c=Du(n,r?s:null),d=!1;c?d=!0:s instanceof ie?(c=zx(n,s),d=!1):(c=ie.EMPTY_NODE,d=!1);const h=yh(new Dr(c,d,!1),new Dr(s,r,!1));return new _O(e,h)}return l}function EO(t,e,n,s,r,a){const l=O1(t,e,s,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),jO(l,n),CO(l,n)}function TO(t,e,n,s){const r=e._queryIdentifier,a=[];let l=[];const c=Mr(t);if(r==="default")for(const[d,h]of t.views.entries())l=l.concat(K_(h,n,s)),G_(h)&&(t.views.delete(d),h.query._queryParams.loadsAllData()||a.push(h.query));else{const d=t.views.get(r);d&&(l=l.concat(K_(d,n,s)),G_(d)&&(t.views.delete(r),d.query._queryParams.loadsAllData()||a.push(d.query)))}return c&&!Mr(t)&&a.push(new(IO())(e._repo,e._path)),{removed:a,events:l}}function D1(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Sr(t,e){let n=null;for(const s of t.views.values())n=n||NO(s,e);return n}function M1(t,e){if(e._queryParams.loadsAllData())return bh(t);{const s=e._queryIdentifier;return t.views.get(s)}}function L1(t,e){return M1(t,e)!=null}function Mr(t){return bh(t)!=null}function bh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;function RO(t){W(!Uu,"__referenceConstructor has already been defined"),Uu=t}function PO(){return W(Uu,"Reference.ts has not been loaded"),Uu}let AO=1;class Y_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ae(null),this.pendingWriteTree_=oO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Gx(t,e,n,s,r){return Q4(t.pendingWriteTree_,e,n,s,r),r?al(t,new Ti(Ux(),e,n)):[]}function OO(t,e,n,s){J4(t.pendingWriteTree_,e,n,s);const r=Ae.fromObject(n);return al(t,new qa(Ux(),e,r))}function mr(t,e,n=!1){const s=X4(t.pendingWriteTree_,e);if(Z4(t.pendingWriteTree_,e)){let a=new Ae(null);return s.snap!=null?a=a.set(we(),!0):wt(s.children,l=>{a=a.set(new Se(l),!0)}),al(t,new Au(s.path,a,n))}else return[]}function hc(t,e,n){return al(t,new Ti($x(),e,n))}function DO(t,e,n){const s=Ae.fromObject(n);return al(t,new qa($x(),e,s))}function MO(t,e){return al(t,new Ho($x(),e))}function LO(t,e,n){const s=Kx(t,n);if(s){const r=qx(s),a=r.path,l=r.queryId,c=Ut(a,e),d=new Ho(Wx(l),c);return Yx(t,a,d)}else return[]}function $u(t,e,n,s,r=!1){const a=e._path,l=t.syncPointTree_.get(a);let c=[];if(l&&(e._queryIdentifier==="default"||L1(l,e))){const d=TO(l,e,n,s);kO(l)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const h=d.removed;if(c=d.events,!r){const g=h.findIndex(y=>y._queryParams.loadsAllData())!==-1,m=t.syncPointTree_.findOnPath(a,(y,I)=>Mr(I));if(g&&!m){const y=t.syncPointTree_.subtree(a);if(!y.isEmpty()){const I=$O(y);for(let T=0;T<I.length;++T){const L=I[T],ne=L.query,C=W1(t,L);t.listenProvider_.startListening(po(ne),Go(t,ne),C.hashFn,C.onComplete)}}}!m&&h.length>0&&!s&&(g?t.listenProvider_.stopListening(po(e),null):h.forEach(y=>{const I=t.queryToTagMap.get(Nh(y));t.listenProvider_.stopListening(po(y),I)}))}WO(t,h)}return c}function F1(t,e,n,s){const r=Kx(t,s);if(r!=null){const a=qx(r),l=a.path,c=a.queryId,d=Ut(l,e),h=new Ti(Wx(c),d,n);return Yx(t,l,h)}else return[]}function FO(t,e,n,s){const r=Kx(t,s);if(r){const a=qx(r),l=a.path,c=a.queryId,d=Ut(l,e),h=Ae.fromObject(n),g=new qa(Wx(c),d,h);return Yx(t,l,g)}else return[]}function Xm(t,e,n,s=!1){const r=e._path;let a=null,l=!1;t.syncPointTree_.foreachOnPath(r,(y,I)=>{const T=Ut(y,r);a=a||Sr(I,T),l=l||Mr(I)});let c=t.syncPointTree_.get(r);c?(l=l||Mr(c),a=a||Sr(c,we())):(c=new A1,t.syncPointTree_=t.syncPointTree_.set(r,c));let d;a!=null?d=!0:(d=!1,a=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((I,T)=>{const L=Sr(T,we());L&&(a=a.updateImmediateChild(I,L))}));const h=L1(c,e);if(!h&&!e._queryParams.loadsAllData()){const y=Nh(e);W(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const I=zO();t.queryToTagMap.set(y,I),t.tagToQueryMap.set(I,y)}const g=_h(t.pendingWriteTree_,r);let m=EO(c,e,n,g,a,d);if(!h&&!l&&!s){const y=M1(c,e);m=m.concat(BO(t,e,y))}return m}function wh(t,e,n){const r=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(l,c)=>{const d=Ut(l,e),h=Sr(c,d);if(h)return h});return I1(r,e,a,n,!0)}function UO(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(h,g)=>{const m=Ut(h,n);s=s||Sr(g,m)});let r=t.syncPointTree_.get(n);r?s=s||Sr(r,we()):(r=new A1,t.syncPointTree_=t.syncPointTree_.set(n,r));const a=s!=null,l=a?new Dr(s,!0,!1):null,c=_h(t.pendingWriteTree_,e._path),d=O1(r,e,c,a?l.getNode():ie.EMPTY_NODE,a);return wO(d)}function al(t,e){return U1(e,t.syncPointTree_,null,_h(t.pendingWriteTree_,we()))}function U1(t,e,n,s){if(xe(t.path))return $1(t,e,n,s);{const r=e.get(we());n==null&&r!=null&&(n=Sr(r,we()));let a=[];const l=ge(t.path),c=t.operationForChild(l),d=e.children.get(l);if(d&&c){const h=n?n.getImmediateChild(l):null,g=k1(s,l);a=a.concat(U1(c,d,h,g))}return r&&(a=a.concat(Hx(r,t,s,n))),a}}function $1(t,e,n,s){const r=e.get(we());n==null&&r!=null&&(n=Sr(r,we()));let a=[];return e.children.inorderTraversal((l,c)=>{const d=n?n.getImmediateChild(l):null,h=k1(s,l),g=t.operationForChild(l);g&&(a=a.concat($1(g,c,d,h)))}),r&&(a=a.concat(Hx(r,t,s,n))),a}function W1(t,e){const n=e.query,s=Go(t,n);return{hashFn:()=>(bO(e)||ie.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?LO(t,n._path,s):MO(t,n._path);{const a=OA(r,n);return $u(t,n,null,a)}}}}function Go(t,e){const n=Nh(e);return t.queryToTagMap.get(n)}function Nh(t){return t._path.toString()+"$"+t._queryIdentifier}function Kx(t,e){return t.tagToQueryMap.get(e)}function qx(t){const e=t.indexOf("$");return W(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Se(t.substr(0,e))}}function Yx(t,e,n){const s=t.syncPointTree_.get(e);W(s,"Missing sync point for query tag that we're tracking");const r=_h(t.pendingWriteTree_,e);return Hx(s,n,r,null)}function $O(t){return t.fold((e,n,s)=>{if(n&&Mr(n))return[bh(n)];{let r=[];return n&&(r=D1(n)),wt(s,(a,l)=>{r=r.concat(l)}),r}})}function po(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(PO())(t._repo,t._path):t}function WO(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=Nh(s),a=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(a)}}}function zO(){return AO++}function BO(t,e,n){const s=e._path,r=Go(t,e),a=W1(t,n),l=t.listenProvider_.startListening(po(e),r,a.hashFn,a.onComplete),c=t.syncPointTree_.subtree(s);if(r)W(!Mr(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((h,g,m)=>{if(!xe(h)&&g&&Mr(g))return[bh(g).query];{let y=[];return g&&(y=y.concat(D1(g).map(I=>I.query))),wt(m,(I,T)=>{y=y.concat(T)}),y}});for(let h=0;h<d.length;++h){const g=d[h];t.listenProvider_.stopListening(po(g),Go(t,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Qx(n)}node(){return this.node_}}class Jx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=We(this.path_,e);return new Jx(this.syncTree_,n)}node(){return wh(this.syncTree_,this.path_)}}const VO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Q_=function(t,e,n){if(!t||typeof t!="object")return t;if(W(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return HO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return GO(t[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},HO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+t)}},GO=function(t,e,n){t.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&W(!1,"Unexpected increment value: "+s);const r=e.node();if(W(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const l=r.getValue();return typeof l!="number"?s:l+s},z1=function(t,e,n,s){return Zx(e,new Jx(n,t),s)},Xx=function(t,e,n){return Zx(t,new Qx(e),n)};function Zx(t,e,n){const s=t.getPriority().val(),r=Q_(s,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const l=t,c=Q_(l.getValue(),e,n);return c!==l.getValue()||r!==l.getPriority().val()?new mt(c,Ve(r)):t}else{const l=t;return a=l,r!==l.getPriority().val()&&(a=a.updatePriority(new mt(r))),l.forEachChild(De,(c,d)=>{const h=Zx(d,e.getImmediateChild(c),n);h!==d&&(a=a.updateImmediateChild(c,h))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function jh(t,e){let n=e instanceof Se?e:new Se(e),s=t,r=ge(n);for(;r!==null;){const a=Si(s.node.children,r)||{children:{},childCount:0};s=new e0(r,s,a),n=Pe(n),r=ge(n)}return s}function $i(t){return t.node.value}function t0(t,e){t.node.value=e,Zm(t)}function B1(t){return t.node.childCount>0}function KO(t){return $i(t)===void 0&&!B1(t)}function Ch(t,e){wt(t.node.children,(n,s)=>{e(new e0(n,t,s))})}function V1(t,e,n,s){n&&e(t),Ch(t,r=>{V1(r,e,!0)})}function qO(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function fc(t){return new Se(t.parent===null?t.name:fc(t.parent)+"/"+t.name)}function Zm(t){t.parent!==null&&YO(t.parent,t.name,t)}function YO(t,e,n){const s=KO(n),r=pn(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,Zm(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Zm(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=/[\[\].#$\/\u0000-\u001F\u007F]/,JO=/[\[\].#$\u0000-\u001F\u007F]/,Tp=10*1024*1024,Sh=function(t){return typeof t=="string"&&t.length!==0&&!QO.test(t)},H1=function(t){return typeof t=="string"&&t.length!==0&&!JO.test(t)},XO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),H1(t)},Ko=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!mh(t)||t&&typeof t=="object"&&pn(t,".sv")},fs=function(t,e,n,s){s&&e===void 0||pc(nn(t,"value"),e,n)},pc=function(t,e,n){const s=n instanceof Se?new p4(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+di(s));if(typeof e=="function")throw new Error(t+"contains a function "+di(s)+" with contents = "+e.toString());if(mh(e))throw new Error(t+"contains "+e.toString()+" "+di(s));if(typeof e=="string"&&e.length>Tp/3&&rh(e)>Tp)throw new Error(t+"contains a string greater than "+Tp+" utf8 bytes "+di(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,a=!1;if(wt(e,(l,c)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!Sh(l)))throw new Error(t+" contains an invalid key ("+l+") "+di(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);m4(s,l),pc(t,c,s),g4(s)}),r&&a)throw new Error(t+' contains ".value" child '+di(s)+" in addition to actual children.")}},ZO=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=Wo(s);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!Sh(a[l]))throw new Error(t+"contains an invalid key ("+a[l]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(f4);let r=null;for(n=0;n<e.length;n++){if(s=e[n],r!==null&&Cn(r,s))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+s.toString());r=s}},G1=function(t,e,n,s){const r=nn(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];wt(e,(l,c)=>{const d=new Se(l);if(pc(r,c,We(n,d)),Px(d)===".priority"&&!Ko(c))throw new Error(r+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(d)}),ZO(r,a)},n0=function(t,e,n){if(mh(e))throw new Error(nn(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ko(e))throw new Error(nn(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},mc=function(t,e,n,s){if(n!==void 0&&!Sh(n))throw new Error(nn(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},qo=function(t,e,n,s){if(!H1(n))throw new Error(nn(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},e5=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qo(t,e,n)},Sn=function(t,e){if(ge(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},K1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Sh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!XO(n))throw new Error(nn(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ih(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],a=r.getPath();n!==null&&!Ax(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(r)}n&&t.eventLists_.push(n)}function q1(t,e,n){Ih(t,n),Y1(t,s=>Ax(s,e))}function mn(t,e,n){Ih(t,n),Y1(t,s=>Cn(s,e)||Cn(e,s))}function Y1(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const a=r.path;e(a)?(n5(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function n5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();_i&&yt("event: "+n.toString()),rl(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="repo_interrupt",s5=25;class r5{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new t5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pu(),this.transactionQueueTree_=new e0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function i5(t,e,n){if(t.stats_=Tx(t.repoInfo_),t.forceRestClient_||FA())t.server_=new Ru(t.repoInfo_,(s,r,a,l)=>{J_(t,s,r,a,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>X_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{at(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Us(t.repoInfo_,e,(s,r,a,l)=>{J_(t,s,r,a,l)},s=>{X_(t,s)},s=>{a5(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=BA(t.repoInfo_,()=>new V4(t.stats_,t.server_)),t.infoData_=new U4,t.infoSyncTree_=new Y_({startListening:(s,r,a,l)=>{let c=[];const d=t.infoData_.getNode(s._path);return d.isEmpty()||(c=hc(t.infoSyncTree_,s._path,d),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),s0(t,"connected",!1),t.serverSyncTree_=new Y_({startListening:(s,r,a,l)=>(t.server_.listen(s,a,r,(c,d)=>{const h=l(c,d);mn(t.eventQueue_,s._path,h)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function J1(t){const n=t.infoData_.getNode(new Se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function gc(t){return VO({timestamp:J1(t)})}function J_(t,e,n,s,r){t.dataUpdateCount++;const a=new Se(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(s){const d=bu(n,h=>Ve(h));l=FO(t.serverSyncTree_,a,d,r)}else{const d=Ve(n);l=F1(t.serverSyncTree_,a,d,r)}else if(s){const d=bu(n,h=>Ve(h));l=DO(t.serverSyncTree_,a,d)}else{const d=Ve(n);l=hc(t.serverSyncTree_,a,d)}let c=a;l.length>0&&(c=Qa(t,a)),mn(t.eventQueue_,c,l)}function X_(t,e){s0(t,"connected",e),e===!1&&c5(t)}function a5(t,e){wt(e,(n,s)=>{s0(t,n,s)})}function s0(t,e,n){const s=new Se("/.info/"+e),r=Ve(n);t.infoData_.updateSnapshot(s,r);const a=hc(t.infoSyncTree_,s,r);mn(t.eventQueue_,s,a)}function kh(t){return t.nextWriteId_++}function l5(t,e,n){const s=UO(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const a=Ve(r).withIndex(e._queryParams.getIndex());Xm(t.serverSyncTree_,e,n,!0);let l;if(e._queryParams.loadsAllData())l=hc(t.serverSyncTree_,e._path,a);else{const c=Go(t.serverSyncTree_,e);l=F1(t.serverSyncTree_,e._path,a,c)}return mn(t.eventQueue_,e._path,l),$u(t.serverSyncTree_,e,n,null,!0),a},r=>(ll(t,"get for query "+at(e)+" failed: "+r),Promise.reject(new Error(r))))}function r0(t,e,n,s,r){ll(t,"set",{path:e.toString(),value:n,priority:s});const a=gc(t),l=Ve(n,s),c=wh(t.serverSyncTree_,e),d=Xx(l,c,a),h=kh(t),g=Gx(t.serverSyncTree_,e,d,h,!0);Ih(t.eventQueue_,g),t.server_.put(e.toString(),l.val(!0),(y,I)=>{const T=y==="ok";T||Ot("set at "+e+" failed: "+y);const L=mr(t.serverSyncTree_,h,!T);mn(t.eventQueue_,e,L),Lr(t,r,y,I)});const m=a0(t,e);Qa(t,m),mn(t.eventQueue_,m,[])}function o5(t,e,n,s){ll(t,"update",{path:e.toString(),value:n});let r=!0;const a=gc(t),l={};if(wt(n,(c,d)=>{r=!1,l[c]=z1(We(e,c),Ve(d),t.serverSyncTree_,a)}),r)yt("update() called with empty data.  Don't do anything."),Lr(t,s,"ok",void 0);else{const c=kh(t),d=OO(t.serverSyncTree_,e,l,c);Ih(t.eventQueue_,d),t.server_.merge(e.toString(),n,(h,g)=>{const m=h==="ok";m||Ot("update at "+e+" failed: "+h);const y=mr(t.serverSyncTree_,c,!m),I=y.length>0?Qa(t,e):e;mn(t.eventQueue_,I,y),Lr(t,s,h,g)}),wt(n,h=>{const g=a0(t,We(e,h));Qa(t,g)}),mn(t.eventQueue_,e,[])}}function c5(t){ll(t,"onDisconnectEvents");const e=gc(t),n=Pu();Gm(t.onDisconnect_,we(),(r,a)=>{const l=z1(r,a,t.serverSyncTree_,e);il(n,r,l)});let s=[];Gm(n,we(),(r,a)=>{s=s.concat(hc(t.serverSyncTree_,r,a));const l=a0(t,r);Qa(t,l)}),t.onDisconnect_=Pu(),mn(t.eventQueue_,we(),s)}function d5(t,e,n){t.server_.onDisconnectCancel(e.toString(),(s,r)=>{s==="ok"&&Hm(t.onDisconnect_,e),Lr(t,n,s,r)})}function Z_(t,e,n,s){const r=Ve(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(a,l)=>{a==="ok"&&il(t.onDisconnect_,e,r),Lr(t,s,a,l)})}function u5(t,e,n,s,r){const a=Ve(n,s);t.server_.onDisconnectPut(e.toString(),a.val(!0),(l,c)=>{l==="ok"&&il(t.onDisconnect_,e,a),Lr(t,r,l,c)})}function h5(t,e,n,s){if(_u(n)){yt("onDisconnect().update() called with empty data.  Don't do anything."),Lr(t,s,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,a)=>{r==="ok"&&wt(n,(l,c)=>{const d=Ve(c);il(t.onDisconnect_,We(e,l),d)}),Lr(t,s,r,a)})}function f5(t,e,n){let s;ge(e._path)===".info"?s=Xm(t.infoSyncTree_,e,n):s=Xm(t.serverSyncTree_,e,n),q1(t.eventQueue_,e._path,s)}function eg(t,e,n){let s;ge(e._path)===".info"?s=$u(t.infoSyncTree_,e,n):s=$u(t.serverSyncTree_,e,n),q1(t.eventQueue_,e._path,s)}function X1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Q1)}function p5(t){t.persistentConnection_&&t.persistentConnection_.resume(Q1)}function ll(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),yt(n,...e)}function Lr(t,e,n,s){e&&rl(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let a=r;s&&(a+=": "+s);const l=new Error(a);l.code=r,e(l)}})}function m5(t,e,n,s,r,a){ll(t,"transaction on "+e);const l={path:e,update:n,onComplete:s,status:null,order:Kj(),applyLocally:a,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=i0(t,e,void 0);l.currentInputSnapshot=c;const d=l.update(c.val());if(d===void 0)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{pc("transaction failed: Data returned ",d,l.path),l.status=0;const h=jh(t.transactionQueueTree_,e),g=$i(h)||[];g.push(l),t0(h,g);let m;typeof d=="object"&&d!==null&&pn(d,".priority")?(m=Si(d,".priority"),W(Ko(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(wh(t.serverSyncTree_,e)||ie.EMPTY_NODE).getPriority().val();const y=gc(t),I=Ve(d,m),T=Xx(I,c,y);l.currentOutputSnapshotRaw=I,l.currentOutputSnapshotResolved=T,l.currentWriteId=kh(t);const L=Gx(t.serverSyncTree_,e,T,l.currentWriteId,l.applyLocally);mn(t.eventQueue_,e,L),Eh(t,t.transactionQueueTree_)}}function i0(t,e,n){return wh(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function Eh(t,e=t.transactionQueueTree_){if(e||Th(t,e),$i(e)){const n=eC(t,e);W(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&g5(t,fc(e),n)}else B1(e)&&Ch(e,n=>{Eh(t,n)})}function g5(t,e,n){const s=n.map(h=>h.currentWriteId),r=i0(t,e,s);let a=r;const l=r.hash();for(let h=0;h<n.length;h++){const g=n[h];W(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const m=Ut(e,g.path);a=a.updateChild(m,g.currentOutputSnapshotRaw)}const c=a.val(!0),d=e;t.server_.put(d.toString(),c,h=>{ll(t,"transaction put response",{path:d.toString(),status:h});let g=[];if(h==="ok"){const m=[];for(let y=0;y<n.length;y++)n[y].status=2,g=g.concat(mr(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&m.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Th(t,jh(t.transactionQueueTree_,e)),Eh(t,t.transactionQueueTree_),mn(t.eventQueue_,e,g);for(let y=0;y<m.length;y++)rl(m[y])}else{if(h==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{Ot("transaction at "+d.toString()+" failed: "+h);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=h}Qa(t,e)}},l)}function Qa(t,e){const n=Z1(t,e),s=fc(n),r=eC(t,n);return x5(t,r,s),s}function x5(t,e,n){if(e.length===0)return;const s=[];let r=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],h=Ut(n,d.path);let g=!1,m;if(W(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)g=!0,m=d.abortReason,r=r.concat(mr(t.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=s5)g=!0,m="maxretry",r=r.concat(mr(t.serverSyncTree_,d.currentWriteId,!0));else{const y=i0(t,d.path,l);d.currentInputSnapshot=y;const I=e[c].update(y.val());if(I!==void 0){pc("transaction failed: Data returned ",I,d.path);let T=Ve(I);typeof I=="object"&&I!=null&&pn(I,".priority")||(T=T.updatePriority(y.getPriority()));const ne=d.currentWriteId,C=gc(t),N=Xx(T,y,C);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=N,d.currentWriteId=kh(t),l.splice(l.indexOf(ne),1),r=r.concat(Gx(t.serverSyncTree_,d.path,N,d.currentWriteId,d.applyLocally)),r=r.concat(mr(t.serverSyncTree_,ne,!0))}else g=!0,m="nodata",r=r.concat(mr(t.serverSyncTree_,d.currentWriteId,!0))}mn(t.eventQueue_,n,r),r=[],g&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(m==="nodata"?s.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):s.push(()=>e[c].onComplete(new Error(m),!1,null))))}Th(t,t.transactionQueueTree_);for(let c=0;c<s.length;c++)rl(s[c]);Eh(t,t.transactionQueueTree_)}function Z1(t,e){let n,s=t.transactionQueueTree_;for(n=ge(e);n!==null&&$i(s)===void 0;)s=jh(s,n),e=Pe(e),n=ge(e);return s}function eC(t,e){const n=[];return tC(t,e,n),n.sort((s,r)=>s.order-r.order),n}function tC(t,e,n){const s=$i(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);Ch(e,r=>{tC(t,r,n)})}function Th(t,e){const n=$i(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,t0(e,n.length>0?n:void 0)}Ch(e,s=>{Th(t,s)})}function a0(t,e){const n=fc(Z1(t,e)),s=jh(t.transactionQueueTree_,e);return qO(s,r=>{Rp(t,r)}),Rp(t,s),V1(s,r=>{Rp(t,r)}),n}function Rp(t,e){const n=$i(e);if(n){const s=[];let r=[],a=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(W(a===l-1,"All SENT items should be at beginning of queue."),a=l,n[l].status=3,n[l].abortReason="set"):(W(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(mr(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&s.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?t0(e,void 0):n.length=a+1,mn(t.eventQueue_,fc(e),r);for(let l=0;l<s.length;l++)rl(s[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function y5(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ot(`Invalid query segment '${n}' in query '${t}'`)}return e}const tg=function(t,e){const n=_5(t),s=n.namespace;n.domain==="firebase.com"&&hs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&hs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||EA();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new l1(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new Se(n.pathString)}},_5=function(t){let e="",n="",s="",r="",a="",l=!0,c="https",d=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(c=t.substring(0,h-1),t=t.substring(h+2));let g=t.indexOf("/");g===-1&&(g=t.length);let m=t.indexOf("?");m===-1&&(m=t.length),e=t.substring(0,Math.min(g,m)),g<m&&(r=v5(t.substring(g,m)));const y=y5(t.substring(Math.min(t.length,m)));h=e.indexOf(":"),h>=0?(l=c==="https"||c==="wss",d=parseInt(e.substring(h+1),10)):h=e.length;const I=e.slice(0,h);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{const T=e.indexOf(".");s=e.substring(0,T).toLowerCase(),n=e.substring(T+1),a=s}"ns"in y&&(a=y.ns)}return{host:e,port:d,domain:n,subdomain:s,secure:l,scheme:c,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",b5=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let r;const a=new Array(8);for(r=7;r>=0;r--)a[r]=eb.charAt(n%64),n=Math.floor(n/64);W(n===0,"Cannot push at time == 0");let l=a.join("");if(s){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)l+=eb.charAt(e[r]);return W(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+at(this.snapshot.exportVal())}}class sC{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return W(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w5=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Yt;return d5(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Sn("OnDisconnect.remove",this._path);const e=new Yt;return Z_(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Sn("OnDisconnect.set",this._path),fs("OnDisconnect.set",e,this._path,!1);const n=new Yt;return Z_(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Sn("OnDisconnect.setWithPriority",this._path),fs("OnDisconnect.setWithPriority",e,this._path,!1),n0("OnDisconnect.setWithPriority",n);const s=new Yt;return u5(this._repo,this._path,e,n,s.wrapCallback(()=>{})),s.promise}update(e){Sn("OnDisconnect.update",this._path),G1("OnDisconnect.update",e,this._path);const n=new Yt;return h5(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return xe(this._path)?null:Px(this._path)}get ref(){return new An(this._repo,this._path)}get _queryIdentifier(){const e=U_(this._queryParams),n=kx(e);return n==="{}"?"default":n}get _queryObject(){return U_(this._queryParams)}isEqual(e){if(e=fe(e),!(e instanceof sn))return!1;const n=this._repo===e._repo,s=Ax(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+h4(this._path)}}function Rh(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Br(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ds){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ar)throw new Error(s);if(typeof e!="string")throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==Gs)throw new Error(s);if(typeof n!="string")throw new Error(r)}}else if(t.getIndex()===De){if(e!=null&&!Ko(e)||n!=null&&!Ko(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(W(t.getIndex()instanceof Mx||t.getIndex()===Lx,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ph(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class An extends sn{constructor(e,n){super(e,n,new xh,!1)}get parent(){const e=g1(this._path);return e===null?null:new An(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let Ah=class ng{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Se(e),s=Pi(this.ref,e);return new ng(this._node.getChild(n),s,De)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new ng(r,Pi(this.ref,s),De)))}hasChild(e){const n=new Se(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function rC(t,e){return t=fe(t),t._checkNotDeleted("ref"),e!==void 0?Pi(t._root,e):t._root}function tb(t,e){t=fe(t),t._checkNotDeleted("refFromURL");const n=tg(e,t._repo.repoInfo_.nodeAdmin);K1("refFromURL",n);const s=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&s.host!==t._repo.repoInfo_.host&&hs("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+t._repo.repoInfo_.host+")"),rC(t,n.path.toString())}function Pi(t,e){return t=fe(t),ge(t._path)===null?e5("child","path",e):qo("child","path",e),new An(t._repo,We(t._path,e))}function N5(t,e){t=fe(t),Sn("push",t._path),fs("push",e,t._path,!0);const n=J1(t._repo),s=b5(n),r=Pi(t,s),a=Pi(t,s);let l;return e!=null?l=o0(a,e).then(()=>a):l=Promise.resolve(a),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}function j5(t){return Sn("remove",t._path),o0(t,null)}function o0(t,e){t=fe(t),Sn("set",t._path),fs("set",e,t._path,!1);const n=new Yt;return r0(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function C5(t,e){t=fe(t),Sn("setPriority",t._path),n0("setPriority",e);const n=new Yt;return r0(t._repo,We(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function S5(t,e,n){if(Sn("setWithPriority",t._path),fs("setWithPriority",e,t._path,!1),n0("setWithPriority",n),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const s=new Yt;return r0(t._repo,t._path,e,n,s.wrapCallback(()=>{})),s.promise}function I5(t,e){G1("update",e,t._path);const n=new Yt;return o5(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function k5(t){t=fe(t);const e=new l0(()=>{}),n=new xc(e);return l5(t._repo,t,n).then(s=>new Ah(s,new An(t._repo,t._path),t._queryParams.getIndex()))}class xc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new nC("value",this,new Ah(e.snapshotNode,new An(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new sC(this,e,n):null}matches(e){return e instanceof xc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Oh{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new sC(this,e,n):null}createEvent(e,n){W(e.childName!=null,"Child events should have a childName.");const s=Pi(new An(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new nC(e.type,this,new Ah(e.snapshotNode,s,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Oh?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function vc(t,e,n,s,r){let a;if(typeof s=="object"&&(a=void 0,r=s),typeof s=="function"&&(a=s),r&&r.onlyOnce){const d=n,h=(g,m)=>{eg(t._repo,t,c),d(g,m)};h.userCallback=n.userCallback,h.context=n.context,n=h}const l=new l0(n,a||void 0),c=e==="value"?new xc(l):new Oh(e,l);return f5(t._repo,t,c),()=>eg(t._repo,t,c)}function sg(t,e,n,s){return vc(t,"value",e,n,s)}function nb(t,e,n,s){return vc(t,"child_added",e,n,s)}function sb(t,e,n,s){return vc(t,"child_changed",e,n,s)}function rb(t,e,n,s){return vc(t,"child_moved",e,n,s)}function ib(t,e,n,s){return vc(t,"child_removed",e,n,s)}function ab(t,e,n){let s=null;const r=n?new l0(n):null;e==="value"?s=new xc(r):e&&(s=new Oh(e,r)),eg(t._repo,t,s)}class qn{}class iC extends qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){fs("endAt",this._value,e._path,!0);const n=Vm(e._queryParams,this._value,this._key);if(Ph(n),Br(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sn(e._repo,e._path,n,e._orderByCalled)}}function E5(t,e){return mc("endAt","key",e),new iC(t,e)}class T5 extends qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){fs("endBefore",this._value,e._path,!1);const n=F4(e._queryParams,this._value,this._key);if(Ph(n),Br(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sn(e._repo,e._path,n,e._orderByCalled)}}function R5(t,e){return mc("endBefore","key",e),new T5(t,e)}class aC extends qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){fs("startAt",this._value,e._path,!0);const n=Bm(e._queryParams,this._value,this._key);if(Ph(n),Br(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new sn(e._repo,e._path,n,e._orderByCalled)}}function P5(t=null,e){return mc("startAt","key",e),new aC(t,e)}class A5 extends qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){fs("startAfter",this._value,e._path,!1);const n=L4(e._queryParams,this._value,this._key);if(Ph(n),Br(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new sn(e._repo,e._path,n,e._orderByCalled)}}function O5(t,e){return mc("startAfter","key",e),new A5(t,e)}class D5 extends qn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new sn(e._repo,e._path,D4(e._queryParams,this._limit),e._orderByCalled)}}function M5(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new D5(t)}class L5 extends qn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new sn(e._repo,e._path,M4(e._queryParams,this._limit),e._orderByCalled)}}function F5(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new L5(t)}class U5 extends qn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Rh(e,"orderByChild");const n=new Se(this._path);if(xe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new Mx(n),r=vh(e._queryParams,s);return Br(r),new sn(e._repo,e._path,r,!0)}}function $5(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qo("orderByChild","path",t),new U5(t)}class W5 extends qn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Rh(e,"orderByKey");const n=vh(e._queryParams,ds);return Br(n),new sn(e._repo,e._path,n,!0)}}function z5(){return new W5}class B5 extends qn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Rh(e,"orderByPriority");const n=vh(e._queryParams,De);return Br(n),new sn(e._repo,e._path,n,!0)}}function V5(){return new B5}class H5 extends qn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Rh(e,"orderByValue");const n=vh(e._queryParams,Lx);return Br(n),new sn(e._repo,e._path,n,!0)}}function G5(){return new H5}class K5 extends qn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(fs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new iC(this._value,this._key)._apply(new aC(this._value,this._key)._apply(e))}}function q5(t,e){return mc("equalTo","key",e),new K5(t,e)}function Ln(t,...e){let n=fe(t);for(const s of e)n=s._apply(n);return n}SO(An);RO(An);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="FIREBASE_DATABASE_EMULATOR_HOST",rg={};let Q5=!1;function J5(t,e,n,s){t.repoInfo_=new l1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function lC(t,e,n,s,r){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||hs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=tg(a,r),c=l.repoInfo,d,h;typeof process<"u"&&b_&&(h=b_[Y5]),h?(d=!0,a=`http://${h}?ns=${c.namespace}`,l=tg(a,r),c=l.repoInfo):d=!l.repoInfo.secure;const g=r&&d?new Oa(Oa.OWNER):new $A(t.name,t.options,e);K1("Invalid Firebase Database URL",l),xe(l.path)||hs("Database URL must point to the root of a Firebase Database (not including a child path).");const m=Z5(c,t,g,new UA(t.name,n));return new eD(m,t)}function X5(t,e){const n=rg[e];(!n||n[t.key]!==t)&&hs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),X1(t),delete n[t.key]}function Z5(t,e,n,s){let r=rg[e.name];r||(r={},rg[e.name]=r);let a=r[t.toURLString()];return a&&hs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new r5(t,Q5,n,s),r[t.toURLString()]=a,a}let eD=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(i5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new An(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(X5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hs("Cannot call "+e+" on a deleted database.")}};function oC(){Ga.IS_TRANSPORT_INITIALIZED&&Ot("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tD(){oC(),pr.forceDisallow()}function nD(){oC(),Nn.forceDisallow(),pr.forceAllow()}function sD(t,e,n,s={}){t=fe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hs("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let a;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&hs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Oa(Oa.OWNER);else if(s.mockUserToken){const l=typeof s.mockUserToken=="string"?s.mockUserToken:VE(s.mockUserToken,t.app.options.projectId);a=new Oa(l)}J5(r,e,n,a)}function rD(t){t=fe(t),t._checkNotDeleted("goOffline"),X1(t._repo)}function iD(t){t=fe(t),t._checkNotDeleted("goOnline"),p5(t._repo)}function aD(t,e){Yj(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){Hj(Wr),Pr(new Rn("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return lC(s,r,a,n)},"PUBLIC").setMultipleInstances(!0)),Vn(w_,N_,t),Vn(w_,N_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={".sv":"timestamp"};function cD(){return oD}function dD(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uD=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function hD(t,e,n){var s;if(t=fe(t),Sn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=(s=n==null?void 0:n.applyLocally)!==null&&s!==void 0?s:!0,a=new Yt,l=(d,h,g)=>{let m=null;d?a.reject(d):(m=new Ah(g,new An(t._repo,t._path),De),a.resolve(new uD(h,m)))},c=sg(t,()=>{});return m5(t._repo,t._path,e,l,c,r),a.promise}Us.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Us.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};lD();const fD="@firebase/database-compat",pD="1.0.8";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new tc("@firebase/database-compat"),cC=function(t){const e="FIREBASE WARNING: "+t;mD.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=function(t,e,n,s){if(n!==void 0&&typeof n!="boolean")throw new Error(nn(t,e)+"must be a boolean.")},xD=function(t,e,n){if(e!==void 0)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(nn(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this._delegate=e}cancel(e){le("OnDisconnect.cancel",0,1,arguments.length),xt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),s=>e(s)),n}remove(e){le("OnDisconnect.remove",0,1,arguments.length),xt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),s=>e(s)),n}set(e,n){le("OnDisconnect.set",1,2,arguments.length),xt("OnDisconnect.set","onComplete",n,!0);const s=this._delegate.set(e);return n&&s.then(()=>n(null),r=>n(r)),s}setWithPriority(e,n,s){le("OnDisconnect.setWithPriority",2,3,arguments.length),xt("OnDisconnect.setWithPriority","onComplete",s,!0);const r=this._delegate.setWithPriority(e,n);return s&&r.then(()=>s(null),a=>s(a)),r}update(e,n){if(le("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let a=0;a<e.length;++a)r[""+a]=e[a];e=r,cC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xt("OnDisconnect.update","onComplete",n,!0);const s=this._delegate.update(e);return n&&s.then(()=>n(null),r=>n(r)),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return le("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){this._database=e,this._delegate=n}val(){return le("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return le("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return le("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return le("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return le("DataSnapshot.child",0,1,arguments.length),e=String(e),qo("DataSnapshot.child","path",e),new Ir(this._database,this._delegate.child(e))}hasChild(e){return le("DataSnapshot.hasChild",1,1,arguments.length),qo("DataSnapshot.hasChild","path",e),this._delegate.hasChild(e)}getPriority(){return le("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return le("DataSnapshot.forEach",1,1,arguments.length),xt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Ir(this._database,n)))}hasChildren(){return le("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return le("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return le("DataSnapshot.ref",0,0,arguments.length),new cn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class jt{constructor(e,n){this.database=e,this._delegate=n}on(e,n,s,r){var a;le("Query.on",2,4,arguments.length),xt("Query.on","callback",n,!1);const l=jt.getCancelAndContextArgs_("Query.on",s,r),c=(h,g)=>{n.call(l.context,new Ir(this.database,h),g)};c.userCallback=n,c.context=l.context;const d=(a=l.cancel)===null||a===void 0?void 0:a.bind(l.context);switch(e){case"value":return sg(this._delegate,c,d),n;case"child_added":return nb(this._delegate,c,d),n;case"child_removed":return ib(this._delegate,c,d),n;case"child_changed":return sb(this._delegate,c,d),n;case"child_moved":return rb(this._delegate,c,d),n;default:throw new Error(nn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,s){if(le("Query.off",0,3,arguments.length),xD("Query.off",e),xt("Query.off","callback",n,!0),Gy("Query.off","context",s),n){const r=()=>{};r.userCallback=n,r.context=s,ab(this._delegate,e,r)}else ab(this._delegate,e)}get(){return k5(this._delegate).then(e=>new Ir(this.database,e))}once(e,n,s,r){le("Query.once",1,4,arguments.length),xt("Query.once","callback",n,!0);const a=jt.getCancelAndContextArgs_("Query.once",s,r),l=new Yt,c=(h,g)=>{const m=new Ir(this.database,h);n&&n.call(a.context,m,g),l.resolve(m)};c.userCallback=n,c.context=a.context;const d=h=>{a.cancel&&a.cancel.call(a.context,h),l.reject(h)};switch(e){case"value":sg(this._delegate,c,d,{onlyOnce:!0});break;case"child_added":nb(this._delegate,c,d,{onlyOnce:!0});break;case"child_removed":ib(this._delegate,c,d,{onlyOnce:!0});break;case"child_changed":sb(this._delegate,c,d,{onlyOnce:!0});break;case"child_moved":rb(this._delegate,c,d,{onlyOnce:!0});break;default:throw new Error(nn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return le("Query.limitToFirst",1,1,arguments.length),new jt(this.database,Ln(this._delegate,M5(e)))}limitToLast(e){return le("Query.limitToLast",1,1,arguments.length),new jt(this.database,Ln(this._delegate,F5(e)))}orderByChild(e){return le("Query.orderByChild",1,1,arguments.length),new jt(this.database,Ln(this._delegate,$5(e)))}orderByKey(){return le("Query.orderByKey",0,0,arguments.length),new jt(this.database,Ln(this._delegate,z5()))}orderByPriority(){return le("Query.orderByPriority",0,0,arguments.length),new jt(this.database,Ln(this._delegate,V5()))}orderByValue(){return le("Query.orderByValue",0,0,arguments.length),new jt(this.database,Ln(this._delegate,G5()))}startAt(e=null,n){return le("Query.startAt",0,2,arguments.length),new jt(this.database,Ln(this._delegate,P5(e,n)))}startAfter(e=null,n){return le("Query.startAfter",0,2,arguments.length),new jt(this.database,Ln(this._delegate,O5(e,n)))}endAt(e=null,n){return le("Query.endAt",0,2,arguments.length),new jt(this.database,Ln(this._delegate,E5(e,n)))}endBefore(e=null,n){return le("Query.endBefore",0,2,arguments.length),new jt(this.database,Ln(this._delegate,R5(e,n)))}equalTo(e,n){return le("Query.equalTo",1,2,arguments.length),new jt(this.database,Ln(this._delegate,q5(e,n)))}toString(){return le("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return le("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(le("Query.isEqual",1,1,arguments.length),!(e instanceof jt)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,s){const r={cancel:void 0,context:void 0};if(n&&s)r.cancel=n,xt(e,"cancel",r.cancel,!0),r.context=s,Gy(e,"context",r.context);else if(n)if(typeof n=="object"&&n!==null)r.context=n;else if(typeof n=="function")r.cancel=n;else throw new Error(nn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new cn(this.database,new An(this._delegate._repo,this._delegate._path))}}class cn extends jt{constructor(e,n){super(e,new sn(n._repo,n._path,new xh,!1)),this.database=e,this._delegate=n}getKey(){return le("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return le("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new cn(this.database,Pi(this._delegate,e))}getParent(){le("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new cn(this.database,e):null}getRoot(){return le("Reference.root",0,0,arguments.length),new cn(this.database,this._delegate.root)}set(e,n){le("Reference.set",1,2,arguments.length),xt("Reference.set","onComplete",n,!0);const s=o0(this._delegate,e);return n&&s.then(()=>n(null),r=>n(r)),s}update(e,n){if(le("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let a=0;a<e.length;++a)r[""+a]=e[a];e=r,cC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sn("Reference.update",this._delegate._path),xt("Reference.update","onComplete",n,!0);const s=I5(this._delegate,e);return n&&s.then(()=>n(null),r=>n(r)),s}setWithPriority(e,n,s){le("Reference.setWithPriority",2,3,arguments.length),xt("Reference.setWithPriority","onComplete",s,!0);const r=S5(this._delegate,e,n);return s&&r.then(()=>s(null),a=>s(a)),r}remove(e){le("Reference.remove",0,1,arguments.length),xt("Reference.remove","onComplete",e,!0);const n=j5(this._delegate);return e&&n.then(()=>e(null),s=>e(s)),n}transaction(e,n,s){le("Reference.transaction",1,3,arguments.length),xt("Reference.transaction","transactionUpdate",e,!1),xt("Reference.transaction","onComplete",n,!0),gD("Reference.transaction","applyLocally",s);const r=hD(this._delegate,e,{applyLocally:s}).then(a=>new yD(a.committed,new Ir(this.database,a.snapshot)));return n&&r.then(a=>n(null,a.committed,a.snapshot),a=>n(a,!1,null)),r}setPriority(e,n){le("Reference.setPriority",1,2,arguments.length),xt("Reference.setPriority","onComplete",n,!0);const s=C5(this._delegate,e);return n&&s.then(()=>n(null),r=>n(r)),s}push(e,n){le("Reference.push",0,2,arguments.length),xt("Reference.push","onComplete",n,!0);const s=N5(this._delegate,e),r=s.then(l=>new cn(this.database,l));n&&r.then(()=>n(null),l=>n(l));const a=new cn(this.database,s);return a.then=r.then.bind(r),a.catch=r.catch.bind(r,void 0),a}onDisconnect(){return Sn("Reference.onDisconnect",this._delegate._path),new vD(new w5(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:tD,forceLongPolling:nD}}useEmulator(e,n,s={}){sD(this._delegate,e,n,s)}ref(e){if(le("database.ref",0,1,arguments.length),e instanceof cn){const n=tb(this._delegate,e.toString());return new cn(this,n)}else{const n=rC(this._delegate,e);return new cn(this,n)}}refFromURL(e){le("database.refFromURL",1,1,arguments.length);const s=tb(this._delegate,e);return new cn(this,s)}goOffline(){return le("database.goOffline",0,0,arguments.length),rD(this._delegate)}goOnline(){return le("database.goOnline",0,0,arguments.length),iD(this._delegate)}}Yo.ServerValue={TIMESTAMP:cD(),increment:t=>dD(t)};function _D({app:t,url:e,version:n,customAuthImpl:s,customAppCheckImpl:r,namespace:a,nodeAdmin:l=!1}){Hj(n);const c=new nx("database-standalone"),d=new Im("auth-internal",c);d.setComponent(new Rn("auth-internal",()=>s,"PRIVATE"));let h;return r&&(h=new Im("app-check-internal",c),h.setComponent(new Rn("app-check-internal",()=>r,"PRIVATE"))),{instance:new Yo(lC(t,d,h,e,l),t),namespace:a}}var bD=Object.freeze({__proto__:null,initStandalone:_D});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=Yo.ServerValue;function ND(t){t.INTERNAL.registerComponent(new Rn("database-compat",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:n});return new Yo(r,s)},"PUBLIC").setServiceProps({Reference:cn,Query:jt,Database:Yo,DataSnapshot:Ir,enableLogging:aD,INTERNAL:bD,ServerValue:wD}).setMultipleInstances(!0)),t.registerVersion(fD,pD)}ND(ln);const jD={apiKey:"AIzaSyBRrxkXnyGd3HKXFKEUB2o15sY8U2N2Mic",authDomain:"beancraft-sales-team.firebaseapp.com",databaseURL:"https://beancraft-sales-team-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"beancraft-sales-team",storageBucket:"beancraft-sales-team.firebasestorage.app",messagingSenderId:"803745881200",appId:"1:803745881200:web:fb430162f761e3ecdba8b5"};ln.initializeApp(jD);const re=ln.database(),lb=["  ,     .","       .","        ."," .    .","       .","  ,      .","     .  .","  .  ,     .","    .","      .","   .     .","   .    .","1%  ,   .","          .","   .    .","   ,  .","      .","      .","  ,   .","   ,   .",' "NO" " "  ,   .',"       .","     ,   .","    .","  ,    .","        .","   .","      .","      .","     .","   .   .","      .","      .   .","  .    .","       .","      .","     .","     .","     ,    .","       .","      .","  .     .","       .","  .   .","  .    .","        .","  ,     .","    .  .","     .","   .    .","     .","       .","     .  .","     ?","  .    .","  .    .","       .","      .","     .  .","     ."," 3  .    .","     .","   .  .","      .","      .","       .","      .","     .","    .","    ,    .","  .   .","    .   .","      .","      .","   ,     .","  ,   .","      ."," .     .","    .   .","   ,     .","      .  .","   ."," .    .","    .   .","  ,    .","  .   .","      .","     ."," .     .","      .","     .","     .","    .   .","  .   .","      .","     .  .","     .","      .","      .","    .   .","      .","    ,    .","      .","        .","          .","        .","   .  .","   .    .","        .","      .",'" "      .',"    .","    .","      .","       .","      .","  ,      .","       .","   .   .","      .","      .","   .    .","     .","   ,     .","           .","    .","   ,     .","      .","  10     .","   ,    .","        .","    .","     .  ."," .    .","         .","  .  .","    ,     .","    .","      .","    .","  ,    .","      .","       .","  .    .","     .","  .     .","       .","    .","     .","        ,   .","  .     .","   .","   ,   .","     .","       .","     .","     .","       .",'  "   "   .',"     .","     .","       ."," . ()   .","  .    ."," ,    .","       .","     .","      .","      .","''     ''   .","     .","       .","     .","     .","  .    .","       .","    ."," .     .","     .","     .","    .","     ,    .","  ,    .","  .    .","       .","   .","    .","     .","     .","       .","   ,   .","      .","      .","     .","    .","       .","       .","    .","   .      ."],ob=[".     .","''   ,      .","   .  .","     ,   .","   .     ."," .       .","        .","   ,    .","   .     .","      ."," ,    ''  .","   ,     .","   ,    .","         .","       .",".       .","  .    .","  ,    .","   VIP      .","         .","   .  .","  DB     .","      .","        .","  ,   .","    .   .","       ."," ,    .","       ."," .    .","    .      .","      .","   ,    .","     ."," ,   .","    .","   ,    .","       .","          .","     .","  .    .","  ,   .","       ."," .     .","   ,  ?",'"."     .',"     .","    .  .",".      .","  .   .","    .  ."," ,  .  .","     .","    ,    .","      .","     .","       .","   1    .","    ,  ."," .    .","  .  .","     .","    ,    .","     .","  . ."," ?    .","   .","     .","      .","     .","  .    .","    .    .","     .","   .   .","       .","      .","    ,   .","       .","  .   .","      .","       .","     .","   ,     .",".    .","     .","  .    ."," ''  ''   .","  .  ,  .","  ,   .","  . ."," , ,   .","       .","     .","   ,    .","      .","   ,    .","      ."," .     ."," .   .",".    .","       .","   ,   .","       .","        .","      .","    .","    .","      .","       .","        ."," .    .","  .  .","        .","    .","    .","        .","      .","  .   ?","   ."," ,     .","     .","      .","         .","     .","    .  .","        .","      .","    .","    .","      .","    .","        .","   .   .","    .","  ,   .","     ."," ,    .","    .","   ,     ."," ,  . .","      .","      .","      .","  .   .","  ,   .","     .","      .","     'YES'.","     .","    .","     .","      .","    .","       .","   .   .","     .","   ,   .","         .","    .","  ,   .","  .    .","     .","      .","    ,   .","    .","   .","        .","     ."," .     .","    .","      .","     .","       .","  ,   .","      .","       .","    ."," ,   .","        .","      .","     .","    ,     .","    .","   ,    .","     .","  .  .","   ,   .","    .","    .","  ,   .","     .","      .","    .","     .","      .","     .","    .","   .  .",".    .","  .  .",".        ."],pt={negative:{bg:"#9ca3af",label:""},neutral:{bg:"#f97316",label:""},positive:{bg:"#22c55e",label:""},special:{bg:"#ef4444",label:"",blink:!0},missed:{bg:"#eab308",label:""}},ar=()=>new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),Pp=()=>{const t=new Date,n=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),s=r=>{var a;return((a=n.find(l=>l.type===r))==null?void 0:a.value)||"0"};return{year:parseInt(s("year")),month:parseInt(s("month"))-1,day:parseInt(s("day")),hour:parseInt(s("hour")),minute:parseInt(s("minute")),dayOfWeek:new Date(parseInt(s("year")),parseInt(s("month"))-1,parseInt(s("day"))).getDay()}},cb=["","","",""],CD="AIzaSyDcz5e1qre9QMbrKmUSjT9nEsajSnhIhAI",SD=["","","","","","","","","","","","","","","","","","",""],db=t=>t.split("").map(e=>{const n=e.charCodeAt(0)-44032;return n>=0&&n<=11171?SD[Math.floor(n/588)]:e}).join(""),ID=(t,e)=>{if(!e)return!0;const n=t.toLowerCase(),s=e.toLowerCase();return n.includes(s)?!0:db(t).includes(db(e))},ub=t=>{if(!t)return"";const e=t.split(" ");return e.length>=2?e.slice(-2).join(" "):t},Td=[{id:1,name:"",color:"#3b82f6",username:"sm001",password:"1234",promo:{:0,:0,:0,:0}},{id:2,name:"",color:"#10b981",username:"sm002",password:"1234",promo:{:0,:0,:0,:0}}],kD=()=>{var wv,Nv,jv,Cv,Sv,Iv,kv,Ev,Tv,Rv,Pv,Av;const[t,e]=_.useState(!1),[n,s]=_.useState(null),[r,a]=_.useState(""),[l,c]=_.useState(""),[d,h]=_.useState(!1),[g,m]=_.useState("admin"),[y]=_.useState(()=>lb[Math.floor(Math.random()*lb.length)]),[I,T]=_.useState("quote"),[L,ne]=_.useState("connecting"),[C,N]=_.useState(!1),S=localStorage.getItem("bc_current_tab")||"map",[R,K]=_.useState(S),[B,J]=_.useState(null),[Z,Te]=_.useState("basic"),[pe,Mt]=_.useState([]),[Vr,ps]=_.useState(0),[Wi,zi]=_.useState("single"),[Hr,Bi]=_.useState(""),[Y,he]=_.useState(""),[ee,Me]=_.useState(null),[Le,ms]=_.useState(!1),[vn,Vi]=_.useState(null),[dt,Xe]=_.useState(null),[gs,c0]=_.useState(null),[d0,Dh]=_.useState(null),[yc,Mh]=_.useState(""),[Lh,u0]=_.useState([]),[dC,Hi]=_.useState(!1),[Bt,Fh]=_.useState(null),[Et,Yn]=_.useState({name:"",content:"",type:"broker",memo:""}),[_c,h0]=_.useState([]),[uC,bc]=_.useState(!1),[xs,hC]=_.useState(null),[ol,Uh]=_.useState(""),[f0,p0]=_.useState(""),[Qs,wc]=_.useState("theme"),[m0,fC]=_.useState([]),[pC,mC]=_.useState(""),[$h,Nc]=_.useState(null),[g0,Gi]=_.useState(null),[vs,Wh]=_.useState(null),[TD,gC]=_.useState(()=>{const o=localStorage.getItem("bc_team_feedback");return o?JSON.parse(o):[]}),[zh,x0]=_.useState(""),[Bh,v0]=_.useState(""),[jc,Vh]=_.useState(null),[cl,y0]=_.useState([]),[RD,PD]=_.useState("");_.useEffect(()=>(re.ref("teamFeedback").orderByChild("timestamp").limitToLast(100).on("value",o=>{const u=o.val();if(u){const f=Object.values(u).sort((p,x)=>new Date(x.timestamp)-new Date(p.timestamp));gC(f)}}),()=>re.ref("teamFeedback").off()),[]);const _0="AIzaSyAl0PfvfKlD-nZxtAJOC6qhME-A-V_u2L8",b0=`    /.

[]
-        
-         
-  :    

[ ]
- :   ( )
- :  (  ,      )
- :  ( 6,900~1.3,   )
-  : / ,   , / 

[]
- /    
-     
-    
-       

[ ]
-         
-   /   
-    
-     
-  `,[Vt,dl]=_.useState(null),[Cc,Js]=_.useState(!1),[Ki,AD]=_.useState(null),[OD,DD]=_.useState(!1),Hh=async(o,u=0)=>{var v,b,w,j,D;Js(!0),Xe(null);const f=new Date().toLocaleString("ko-KR"),p=Math.floor(Math.random()*1e3),x=b0+`


    ( : `+f+", ID: "+p+`)


 
- : `+o.managerName+`
-   : `+o.thisVisits+" (  "+(o.visitChange>=0?"+":"")+o.visitChange+`%)
-  : `+o.newCompanies+`
-  : `+o.consults+`
-  : `+o.positiveRate+`%

  
- : `+o.positive+" | : "+o.special+`
- : `+o.neutral+" | : "+o.missed+`

  -   
1. comment:     (2,   )
2. analysis:    (/,  )
3. suggestion:     (   )
4. encouragement:    (  )
5. focus:    

  (JSON):
{"comment": "...", "analysis": "...", "suggestion": "...", "encouragement": "...", "focus": "..."}

JSON .     .`;try{const P=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${_0}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:x}]}],generationConfig:{temperature:.9,maxOutputTokens:1024}})});if(!P.ok)if(P.status===429){if(u<3)return console.log(`429  - ${u+1}  ... (5 )`),Xe(`API   - ${u+1}  ...`),await new Promise(ce=>setTimeout(ce,5e3)),Hh(o,u+1);Xe("API   .    ."),Js(!1);return}else if(P.status===400){Xe("API      ."),Js(!1);return}else if(P.status===403){Xe("API   .  ."),Js(!1);return}else{Xe(`  . (: ${P.status})`),Js(!1);return}const A=await P.json();if(A.error){console.error("Gemini API Error:",A.error),Xe(`API : ${A.error.message||"   "}`),Js(!1);return}const M=((D=(j=(w=(b=(v=A.candidates)==null?void 0:v[0])==null?void 0:b.content)==null?void 0:w.parts)==null?void 0:j[0])==null?void 0:D.text)||"";if(!M){Xe("AI  .  ."),Js(!1);return}const H=M.match(/\{[\s\S]*\}/);if(H){const ce=JSON.parse(H[0]);dl(ce),Vi(new Date)}else dl({comment:M,analysis:"",suggestion:"",encouragement:""}),Vi(new Date)}catch(P){console.error("AI Report Error:",P),Xe(` : ${P.message||" ."}`),dl(null)}Js(!1)},Sc=async o=>{var b,w,j,D,P;if(!o.trim())return;ms(!0),Xe(null),Me(null);const u=new Date().toLocaleString("ko-KR"),f=oe.filter(A=>{var M,H,ce,k;return((M=A.name)==null?void 0:M.includes(o))||((H=A.address)==null?void 0:H.includes(o))||((ce=A.memo)==null?void 0:ce.includes(o))||((k=A.region)==null?void 0:k.includes(o))}),p=Jr.filter(A=>{var M,H,ce;return((M=A.name)==null?void 0:M.includes(o))||((H=A.address)==null?void 0:H.includes(o))||((ce=A.region)==null?void 0:ce.includes(o))}),x=pe.filter(A=>{var M,H,ce;return((M=A.title)==null?void 0:M.includes(o))||((H=A.content)==null?void 0:H.includes(o))||((ce=A.region)==null?void 0:ce.includes(o))}),v=b0+`


   : "${o}" ( : ${u})


  
-  : ${f.length}
${f.slice(0,5).map(A=>`   ${A.name} (${A.address||""}) - : ${A.reaction||""}`).join(`
`)}
-  : ${p.length}
${p.slice(0,5).map(A=>`   ${A.name} (${A.address||""})`).join(`
`)}
-   : ${x.length}
${x.slice(0,3).map(A=>{var M;return`   ${A.title}: ${(M=A.content)==null?void 0:M.slice(0,50)}...`}).join(`
`)}

 
"${o}"       .

1. summary:     (2-3)
2. insights:    (3 , )
3. salesTips:      (2)
4. relatedTopics:     (3, )
5. actionItems:       (2)

  (JSON):
{
  "summary": " ",
  "insights": ["1", "2", "3"],
  "salesTips": ["1", "2"],
  "relatedTopics": ["1", "2", "3"],
  "actionItems": ["1", "2"]
}

JSON .      /    .`;try{const A=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${_0}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:v}]}],generationConfig:{temperature:.8,maxOutputTokens:1500}})});if(!A.ok){A.status===429?Xe("API   .    ."):Xe(`  . (: ${A.status})`),ms(!1);return}const M=await A.json();if(M.error){Xe(`API : ${M.error.message||"   "}`),ms(!1);return}const H=((P=(D=(j=(w=(b=M.candidates)==null?void 0:b[0])==null?void 0:w.content)==null?void 0:j.parts)==null?void 0:D[0])==null?void 0:P.text)||"",ce=H.match(/\{[\s\S]*\}/);if(ce){const k=JSON.parse(ce[0]);Me({...k,keyword:o,searchedAt:new Date,relatedCompaniesCount:f.length,relatedRealtorsCount:p.length,relatedIssuesCount:x.length})}else Me({summary:H,insights:[],salesTips:[],relatedTopics:[],actionItems:[],keyword:o,searchedAt:new Date})}catch(A){console.error("AI Keyword Search Error:",A),Xe(` : ${A.message||" ."}`)}ms(!1)},[MD,LD]=_.useState(!1),[FD,UD]=_.useState([]),[$D,WD]=_.useState(!1),xC=()=>localStorage.getItem("bc_theme_mode")||"dark",vC=()=>{const o=localStorage.getItem("bc_theme_mode")||"dark";return o==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o},[ys,Gh]=_.useState(xC),[yC,_C]=_.useState(vC),[Ic,Kh]=_.useState([]),[bC,w0]=_.useState(!1),[wC,qh]=_.useState(!1),[N0,Yh]=_.useState(!1),[NC,kc]=_.useState(!1),[j0,Ec]=_.useState(!1),[_s,ul]=_.useState(null),[et,hl]=_.useState(null),[X,fl]=_.useState(null),[jC,Tc]=_.useState(null),[Nt,ut]=_.useState(null),[Qh,Jh]=_.useState(null),[CC,Rc]=_.useState(!1),[ht,yn]=_.useState(null),[pl,Pc]=_.useState(null),[SC,Ac]=_.useState(!1),[Xh,Oc]=_.useState(null),[Dc,Zh]=_.useState(!1),[Gr,Mc]=_.useState([]),[IC,Lc]=_.useState(!1),[kC,ef]=_.useState(!1),[EC,tf]=_.useState(null),[C0,Fc]=_.useState(!1),[_n,Qn]=_.useState([]),nf=_.useRef(null),S0=_.useRef(null),[TC,sf]=_.useState(!1),[rf,RC]=_.useState([]),[PC,af]=_.useState(!1),[lf,I0]=_.useState(""),[k0,E0]=_.useState(null),[AC,OC]=_.useState(""),[zD,DC]=_.useState(""),[T0,R0]=_.useState("neutral"),[Jn,Uc]=_.useState(""),[$c,Wc]=_.useState(""),[ml,P0]=_.useState(""),[A0,O0]=_.useState(""),[of,cf]=_.useState({:!1,:!1,:!1,:!1}),[zc,df]=_.useState([]),[Kr,qi]=_.useState([]),Bc=_.useRef(null),Re=_.useRef(null),uf=_.useRef([]),qr=_.useRef([]),[ye,MC]=_.useState(Td),[gl,LC]=_.useState([]),[oe,FC]=_.useState([]),[Vc,UC]=_.useState([]),[Hc,D0]=_.useState([]),[M0,$C]=_.useState([]),[WC,zC]=_.useState({}),[ze,L0]=_.useState([]),[Lt,F0]=_.useState([]),[je,Ht]=_.useState([]),[Gc,Yi]=_.useState(ar()),[Kc,xl]=_.useState("09:00"),[BD,VD]=_.useState(""),[HD,GD]=_.useState(""),[vl,yl]=_.useState(""),[hf,Xs]=_.useState(null),[Yr,qc]=_.useState(null),[KD,qD]=_.useState(null),[rn,bs]=_.useState(null),[YD,QD]=_.useState(""),[Qi,Yc]=_.useState(0),[Zs,U0]=_.useState(new Date),[_l,ff]=_.useState(null),[Tt,bl]=_.useState(null),[BC,Qr]=_.useState(!1),[pf,Ji]=_.useState(null),[wl,mf]=_.useState(null),[Qc,gf]=_.useState(null),[Xn,ws]=_.useState({title:"",time:"09:00",memo:""}),[Nl,Xi]=_.useState(null),[Zi,xf]=_.useState(""),[vf,yf]=_.useState(""),[Ns,jl]=_.useState([]),[JD,XD]=_.useState([]),[$0,_f]=_.useState(!1),[ZD,eM]=_.useState(""),[tM,nM]=_.useState(""),[sM,Jc]=_.useState([]),[bf,VC]=_.useState(""),[wf,HC]=_.useState(""),[Xc,GC]=_.useState("listings"),[Nf,W0]=_.useState(""),[Cl,KC]=_.useState(""),[Sl,z0]=_.useState(""),[rM,iM]=_.useState("all"),[aM,lM]=_.useState(1),[oM,cM]=_.useState(null),[Jr,Zc]=_.useState(()=>{try{const o=localStorage.getItem("bc_collected_realtors");return o?JSON.parse(o):[]}catch{return[]}}),[qC,jf]=_.useState(()=>!localStorage.getItem("bc_collected_realtors")),[dM,uM]=_.useState(""),[hM,fM]=_.useState([]),[pM,mM]=_.useState(!1),[YC,QC]=_.useState(!1),[gM,xM]=_.useState(!1),[vM,yM]=_.useState(""),[_M,bM]=_.useState([]),[wM,NM]=_.useState(null),[jM,JC]=_.useState([]),[CM,XC]=_.useState([]),[SM,IM]=_.useState(""),[kM,EM]=_.useState(""),[TM,RM]=_.useState(!1),[PM,AM]=_.useState(200),[OM,ZC]=_.useState({phase:"",current:0,total:0,found:0,message:""}),[DM,MM]=_.useState(!1),[LM,FM]=_.useState(""),[UM,$M]=_.useState(""),[WM,zM]=_.useState("");_.useRef([]);const B0=_.useRef([]),Cf=_.useRef([]),Sf=_.useRef(null),te=_.useRef(null),js=_.useRef([]),Cs=_.useRef([]),V0=_.useRef([]),[ed,If]=_.useState(!1),[td,H0]=_.useState(null),ea=_.useRef(null),Ss=_.useRef(null),Is=_.useRef(null),ta=_.useRef(null),nd=_.useRef(0),er=_.useRef(null),[kf,sd]=_.useState(null),[Xr,G0]=_.useState("all"),[Zr,K0]=_.useState("all"),[Ef,eS]=_.useState(""),[Tf,BM]=_.useState(null),[Rf,VM]=_.useState(""),[HM,GM]=_.useState(""),[se,rt]=_.useState({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),[Pf,tS]=_.useState(""),[Il,nS]=_.useState("all"),[Af,sS]=_.useState("all"),[KM,qM]=_.useState({}),[YM,rS]=_.useState(""),[Gt,ei]=_.useState({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""}),[On,rd]=_.useState({managerId:null,companyId:null,amount:"",date:"",note:""}),na=o=>{try{const u=localStorage.getItem("bc_"+o);return u?JSON.parse(u):null}catch{return null}},iS=async()=>{if(localStorage.getItem("bc_migration_done"))return;console.log(" ...");const u=na("managers"),f=na("pins"),p=na("companies"),x=na("customers"),v=na("sales"),b=na("requests");if(u&&u.length>0){console.log(" managers :",u.length);for(const w of u)await re.ref("managers/"+w.id).set(w)}if(f&&f.length>0){console.log(" pins :",f.length);for(const w of f)await re.ref("pins/"+w.id).set(w)}if(p&&p.length>0){console.log(" companies :",p.length);for(const w of p)await re.ref("companies/"+w.id).set(w)}if(x&&x.length>0){console.log(" customers :",x.length);for(const w of x)await re.ref("customers/"+w.id).set(w)}if(v&&v.length>0){console.log(" sales :",v.length);for(const w of v)await re.ref("sales/"+w.id).set(w)}if(b&&b.length>0){console.log(" requests :",b.length);for(const w of b)await re.ref("requests/"+w.id).set(w)}localStorage.setItem("bc_migration_done","true"),console.log(" !")},ti=_.useRef({});_.useEffect(()=>{const o=u=>{let f=u;u==="auto"&&(f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),_C(f),f==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.body.style.removeProperty("background"),document.body.style.removeProperty("color")};if(o(ys),localStorage.setItem("bc_theme_mode",ys),ys==="auto"){const u=window.matchMedia("(prefers-color-scheme: dark)"),f=p=>o("auto");return u.addEventListener("change",f),()=>u.removeEventListener("change",f)}},[ys]),_.useEffect(()=>{const o=u=>{if(u.source===window){if(u.data.type==="BEANCRAFT_EXTENSION_READY"&&(console.log("  v"+u.data.version),QC(!0),lS("0000000000")),u.data.type==="BEANCRAFT_RESPONSE"){const{requestId:f,response:p}=u.data;ti.current[f]&&(ti.current[f](p),delete ti.current[f])}u.data.type==="BEANCRAFT_SCRAPE_PROGRESS"&&ZC({phase:u.data.phase||"",current:u.data.current||0,total:u.data.total||0,found:u.data.found||0,message:u.data.message||""})}};return window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}},[]);const aS=(o,u={})=>new Promise(f=>{const p=Date.now()+Math.random();ti.current[p]=f,window.postMessage({type:"BEANCRAFT_REQUEST",action:o,requestId:p,...u},"*"),setTimeout(()=>{ti.current[p]&&(ti.current[p]({success:!1,error:""}),delete ti.current[p])},1e4)}),lS=async(o,u="sido")=>{if(!YC)return;const f=await aS("GET_REGIONS",{cortarNo:o});f&&f.success&&f.regions?(console.log("[] "+u+" :",f.regions.length+""),u==="sido"?JC(f.regions):u==="gugun"&&XC(f.regions)):console.error("   :",f==null?void 0:f.error)};_.useEffect(()=>{if(!n){ne("disconnected");return}ne("connecting"),iS();const o={managers:re.ref("managers"),pins:re.ref("pins"),companies:re.ref("companies"),customers:re.ref("customers"),sales:re.ref("sales"),requests:re.ref("requests"),adminPassword:re.ref("adminPassword"),userStatus:re.ref("userStatus"),routes:re.ref("routes"),realtorCollections:re.ref("realtorCollections"),realtors:re.ref("realtors"),marketIssues:re.ref("marketIssues").limitToLast(20)};return o.managers.on("value",u=>{const f=u.val();f&&MC(Object.values(f)),ne("connected")}),o.pins.on("value",u=>{const f=u.val();LC(f?Object.values(f):[])}),o.companies.on("value",u=>{const f=u.val();FC(f?Object.values(f):[])}),o.customers.on("value",u=>{const f=u.val();UC(f?Object.values(f):[])}),o.sales.on("value",u=>{const f=u.val();D0(f?Object.values(f):[])}),o.requests.on("value",u=>{const f=u.val();$C(f?Object.values(f):[])}),o.adminPassword.on("value",u=>{const f=u.val();f&&m(f)}),o.userStatus.on("value",u=>{const f=u.val();zC(f||{})}),o.routes.on("value",u=>{const f=u.val();L0(f?Object.values(f):[])}),o.realtorCollections.on("value",u=>{try{const f=u.val();if(f){const p=Object.entries(f).map(([x,v])=>({id:x,...v}));p.sort((x,v)=>v.exportedAt-x.exportedAt),Jc(p)}else Jc([])}catch(f){console.error("RealtorCollections  :",f),Jc([])}},u=>{console.error("Firebase realtorCollections  :",u),Jc([])}),o.calendarEvents=re.ref("calendarEvents"),o.calendarEvents.on("value",u=>{const f=u.val();F0(f?Object.values(f):[])}),o.realtors.on("value",u=>{try{const f=u.val();if(f){const p=Object.entries(f).map(([x,v])=>({id:x,...v}));p.sort((x,v)=>(v.listings||0)-(x.listings||0)),Zc(p);try{localStorage.setItem("bc_collected_realtors",JSON.stringify(p))}catch{}}else Zc([]);jf(!1)}catch(f){console.error("Realtors   :",f),Zc([]),jf(!1)}},u=>{console.error("Firebase realtors  :",u),Zc([]),jf(!1)}),o.marketIssues.on("value",u=>{try{const f=u.val();if(f){const p=Object.entries(f).map(([b,w])=>({id:b,...w})),x=Date.now()-365*24*60*60*1e3,v=p.filter(b=>new Date(b.||b.createdAt).getTime()<x?(re.ref("marketIssues/"+b.id).remove(),!1):!0);v.sort((b,w)=>new Date(w.||w.createdAt)-new Date(b.||b.createdAt)),Mt(v)}else Mt([])}catch(f){console.error("MarketIssues   :",f),Mt([])}}),N(!0),ne("connected"),()=>{Object.values(o).forEach(u=>u.off())}},[n]),_.useEffect(()=>{if(!(n!=null&&n.managerId))return;const o=n.managerId,u=re.ref(`userMents/${o}`),f=re.ref(`mentFeedbacks/${o}`);return u.on("value",p=>{const x=p.val();if(x){const v=Object.keys(x).map(b=>({id:b,...x[b]}));u0(v)}else u0([])}),f.on("value",p=>{const x=p.val();if(x){const v=Object.keys(x).map(b=>({id:b,...x[b]}));h0(v)}else h0([])}),()=>{u.off(),f.off()}},[n==null?void 0:n.managerId]),_.useEffect(()=>{const o=re.ref("teamFeedbacks");return o.orderByChild("timestamp").limitToLast(50).on("value",u=>{const f=u.val();if(f){const p=Object.keys(f).map(x=>({id:x,...f[x]})).sort((x,v)=>new Date(v.timestamp)-new Date(x.timestamp));y0(p)}else y0([])}),()=>o.off()},[]),_.useEffect(()=>{if(!t)return;const o=new Date().toISOString().split("T")[0];if(Lt.length>0){const u=Lt.filter(f=>f.date===o&&f.type==="followup");u.length>0&&Nc(f=>{if(f)return f;const p=u.slice(0,3).map(v=>v.title).join(", "),x=u.length>3?`  ${u.length-3}`:"";return{count:u.length,preview:p+x,events:u}})}if(ze.length>0){const u=new Date;u.setDate(u.getDate()-1);const f=u.toISOString().split("T")[0],p=ze.filter(x=>{var b;return!x.date||x.date>f||x.status==="completed"?!1:(b=x.stops)==null?void 0:b.some(w=>!w.visited)});p.length>0?Gi({count:p.length,routes:p}):Gi(null)}else Gi(null)},[t,Lt,ze]),_.useEffect(()=>{if(!t||!n||oe.length===0)return;const o=x=>{if(!x)return{hasIssue:!0,issue:" "};const v=[{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "}];for(const{pattern:M,issue:H}of v)if(M.test(x))return{hasIssue:!0,issue:H};const b=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=["","","","","","","","","","","","","","","","","","","","","","","","",""],j=/|||||||||||||||||||/.test(x),D=b.some(M=>x.includes(M+"")||x.includes(M+" ")),P=w.some(M=>x.includes(M+"")||x.includes(M+" ")||x.includes(M+""));return!j&&!D&&!P&&x.length>5?{hasIssue:!0,issue:"/  "}:!/[-]+(|||||||||)\s*\d*/.test(x)&&x.length>3?{hasIssue:!0,issue:"   "}:{hasIssue:!1}},u=n.managerId||n.id,f=oe.filter(x=>x.managerId===u),p=[];f.forEach(x=>{const{hasIssue:v,issue:b}=o(x.address),w=!x.lat||!x.lng;(v||w)&&p.push({id:x.id,name:x.name,address:x.address,issue:v?b:"   (  )"})}),p.length>0?gf({count:p.length,companies:p}):gf(null)},[t,n,oe]);const Of=o=>re.ref("managers/"+o.id).set(o),Df=o=>re.ref("pins/"+o.id).set(o),q0=o=>re.ref("pins/"+o).remove(),ks=o=>re.ref("companies/"+o.id).set(o),oS=o=>re.ref("companies/"+o).remove(),Y0=o=>re.ref("customers/"+o.id).set(o),cS=o=>re.ref("customers/"+o).remove(),Q0=o=>re.ref("sales/"+o.id).set(o),dS=o=>re.ref("sales/"+o).remove(),J0=o=>re.ref("requests/"+o.id).set(o),id=o=>re.ref("routes/"+o.id).set(o),X0=o=>re.ref("routes/"+o).remove(),Z0=o=>{const u=(n==null?void 0:n.managerId)||"admin";re.ref(`userMents/${u}/${o.id}`).set(o)},uS=o=>{const u=(n==null?void 0:n.managerId)||"admin";re.ref(`userMents/${u}/${o}`).remove()},hS=o=>{const u=(n==null?void 0:n.managerId)||"admin";re.ref(`mentFeedbacks/${u}/${o.id}`).set(o)},fS=(o,u=!1)=>{const f=Lh.find(p=>p.id===o);if(f){const p={...f,useCount:(f.useCount||0)+1,successCount:u?(f.successCount||0)+1:f.successCount||0};Z0(p)}},Mf=o=>re.ref("calendarEvents/"+o.id).set(o),pS=o=>re.ref("calendarEvents/"+o).remove();_.useEffect(()=>{var u;const o=localStorage.getItem("bc_remember_login");if(o)try{const f=JSON.parse(o);f.expiry>Date.now()?(a(f.id||""),c(f.pw||""),h(!0)):localStorage.removeItem("bc_remember_login")}catch{localStorage.removeItem("bc_remember_login")}try{const f=localStorage.getItem("bc_temp_route");if(f){const p=JSON.parse(f);((u=p.stops)==null?void 0:u.length)>0&&(Ht(p.stops),p.name&&yl(p.name),p.date&&Yi(p.date),p.time&&xl(p.time),p.managerId&&Xs(p.managerId),p.editingId&&qc(p.editingId))}}catch{}},[]),_.useEffect(()=>{const o=ln.auth().onAuthStateChanged(async u=>{if(u&&!t){const f=localStorage.getItem("bc_session");if(f)try{const b=JSON.parse(f);if(b.expiry>Date.now()&&b.user){let w=b.user;if(w.username){const j=Td.find(D=>D.username===w.username);j&&(!w.name||w.name.length<2||w.name.includes(""))&&(console.log(`[]   : ${w.name} -> ${j.name}`),w={...w,name:j.name},localStorage.setItem("bc_session",JSON.stringify({user:w,expiry:b.expiry})))}if(w){s(w),e(!0),w.managerId&&(Xs(w.managerId),kl(w.managerId,!0)),console.log("  :",w.name);return}}}catch{}const p=u.email,x=p.split("@")[0];let v=null;if(x==="admin")v={name:"admin",role:"super",email:p};else try{const w=(await re.ref("managers").once("value")).val(),D=(w?Object.values(w):[]).find(P=>P.username===x||P.email===p);if(D){let P=D.name;const A=Td.find(M=>M.username===x||M.id===D.id);A&&(!D.name||D.name.length<2||D.name.includes(""))&&(P=A.name,console.log(`[]   : ${D.name} -> ${P}`),re.ref("managers/"+D.id).update({name:P})),v={name:P,role:"manager",managerId:D.id,username:D.username,email:p}}else v={name:x,role:"manager",email:p}}catch(b){console.error("managers  :",b),v={name:x,role:"manager",email:p}}s(v),e(!0),v.managerId&&(Xs(v.managerId),kl(v.managerId,!0)),localStorage.setItem("bc_session",JSON.stringify({user:v,expiry:Date.now()+216e5})),console.log("Firebase  :",v.name)}else!u&&t&&(e(!1),s(null),localStorage.removeItem("bc_session"))});return()=>o()},[t]),_.useEffect(()=>{const o=()=>{if(Ic.length>0){const u=[...Ic],f=u.pop();Kh(u),K(f)}};return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[Ic]);const ni=o=>{o!==R&&(window.history.pushState({tab:o},""),Kh([...Ic,R]),K(o),localStorage.setItem("bc_current_tab",o))};_.useEffect(()=>{localStorage.setItem("bc_current_tab",R)},[R]);const ev=_.useRef(Tf),tv=_.useRef(Rf),Lf=_.useRef(gl),nv=_.useRef(oe),sv=_.useRef(ye),rv=_.useRef(zc);_.useEffect(()=>{ev.current=Tf},[Tf]),_.useEffect(()=>{tv.current=Rf},[Rf]),_.useEffect(()=>{Lf.current=gl},[gl]),_.useEffect(()=>{nv.current=oe},[oe]),_.useEffect(()=>{sv.current=ye},[ye]),_.useEffect(()=>{rv.current=zc},[zc]),_.useEffect(()=>{if(je.length>0){const o={stops:je,name:vl,date:Gc,time:Kc,managerId:hf,editingId:Yr,savedAt:new Date().toISOString()};localStorage.setItem("bc_temp_route",JSON.stringify(o))}else localStorage.removeItem("bc_temp_route")},[je]);const mS=(o,u)=>u?Math.max(28,o*2.5):o<=8?14:o<=10?18:o<=12?22:o<=14?26:30;_.useEffect(()=>{if(t&&R==="map"&&Bc.current){Re.current=null;const o=()=>{var u;if(!((u=window.naver)!=null&&u.maps)){setTimeout(o,100);return}if(!Bc.current){setTimeout(o,100);return}Re.current=new naver.maps.Map(Bc.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(Re.current,"zoom_changed",()=>{sa()}),naver.maps.Event.addListener(Re.current,"click",f=>{const p=ev.current,x=tv.current;if(!p)return;const v=f.coord.lat(),b=f.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(v,b)},(w,j)=>{var M,H,ce;let D=v.toFixed(4)+", "+b.toFixed(4);if(w===naver.maps.Service.Status.OK&&j.v2.results[0]){const k=j.v2.results[0].region;k&&(D=[(M=k.area1)==null?void 0:M.name,(H=k.area2)==null?void 0:H.name,(ce=k.area3)==null?void 0:ce.name].filter(Boolean).join(" "))}const P=x?"planned":"confirmed",A={id:Date.now(),managerId:p,status:P,region:D,lat:v,lng:b,date:x||"",createdAt:new Date().toISOString()};Df(A)})}),setTimeout(()=>sa(),500)};setTimeout(o,300)}},[t,R]),_.useEffect(()=>{t&&R==="map"&&Re.current&&setTimeout(()=>{naver.maps.Event.trigger(Re.current,"resize"),sa()},100)},[t,R]),_.useEffect(()=>{t&&R==="route"&&te.current&&setTimeout(()=>{naver.maps.Event.trigger(te.current,"resize")},100)},[t,R]);const gS=()=>{let o=Lf.current;Xr!=="all"&&(o=o.filter(u=>u.managerId===Number(Xr))),Zr!=="all"&&(o=o.filter(u=>u.status===Zr)),df(o.map(u=>u.id)),setTimeout(()=>sa(),100)},sa=_.useCallback(()=>{var v;if(!Re.current||!((v=window.naver)!=null&&v.maps))return;uf.current.forEach(b=>b.setMap(null)),uf.current=[];const o=nv.current,u=sv.current,f=rv.current,p=Re.current.getZoom();let x=o.filter(b=>b.lat&&b.lng);Xr!=="all"&&(x=x.filter(b=>b.managerId===Number(Xr))),Zr!=="all"&&(x=x.filter(b=>b.reaction===Zr)),x.forEach(b=>{const w=u.find(H=>H.id===b.managerId);pt[b.reaction]||pt.neutral;const j=f.includes(b.id)||b.reaction==="special",D=mS(p,j),P=Math.max(2,Math.floor(D/5));let A="#9ca3af";b.reaction==="special"?A="#ef4444":b.reaction==="positive"?A="#22c55e":b.reaction==="neutral"?A="#f97316":b.reaction==="missed"&&(A="#eab308");const M=new naver.maps.Marker({position:new naver.maps.LatLng(b.lat,b.lng),map:Re.current,icon:{content:`<div class="${j?b.reaction==="special"?"special-blink":"marker-pulse":""}" style="width:${D}px;height:${D}px;background:${A};border-radius:50%;border:${P}px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.4);cursor:pointer;display:flex;align-items:center;justify-content:center;">
 <span style="font-size:${Math.max(8,D/2.5)}px;color:white;font-weight:bold;">${b.name.charAt(0)}</span>
 </div>`,anchor:new naver.maps.Point(D/2,D/2)}});naver.maps.Event.addListener(M,"click",()=>{hl({...b,manager:w})}),uf.current.push(M)}),f.length>0&&setTimeout(()=>df([]),5e3)},[Xr,Zr]);_.useEffect(()=>{Re.current&&sa()},[oe,ye,Xr,Zr,zc,sa]),_.useEffect(()=>{if(t)return;const o=setTimeout(()=>T("logo"),4e3),u=setTimeout(()=>T("form"),6e3);return()=>{clearTimeout(o),clearTimeout(u)}},[t]),_.useEffect(()=>{var p,x;if(!t||oe.length===0||!((x=(p=window.naver)==null?void 0:p.maps)!=null&&x.Service))return;const o=oe.filter(v=>(!v.lat||!v.lng)&&(v.address||v.name));if(o.length===0)return;const f=setTimeout(async()=>{let v=0;for(const b of o){const w=await $f(b.address,b.name);if(w){const j={...b,lat:w.lat,lng:w.lng};ks(j),v++}await new Promise(j=>setTimeout(j,300))}v>0&&console.log(`  ${v}    `)},2e3);return()=>clearTimeout(f)},[t,oe.length]),_.useEffect(()=>{if(t&&R==="route"){te.current&&(te.current=null);const o=()=>{var u;if(!Sf.current){console.log("[] routeMapRef ..."),setTimeout(o,100);return}if(!((u=window.naver)!=null&&u.maps)){console.log("[] naver.maps ..."),setTimeout(o,100);return}te.current||(console.log("[]  "),te.current=new naver.maps.Map(Sf.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(te.current,"click",f=>{const p=f.coord.lat(),x=f.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(p,x),orders:"roadaddr,addr"},(v,b)=>{var P,A;let w=" ",j="";if(v===naver.maps.Service.Status.OK&&((P=b.v2.results)==null?void 0:P.length)>0){const M=b.v2.results[0];if(M.land){const H=M.land;j=`${M.region.area1.name} ${M.region.area2.name} ${M.region.area3.name} ${H.name||""} ${H.number1||""}`.trim(),(A=H.addition0)!=null&&A.value?w=H.addition0.value:w=`${M.region.area3.name} ${H.number1||""}`.trim()}}const D={id:Date.now(),name:w,address:j,lat:p,lng:x,type:"click"};Ht(M=>[...M,D])})}),console.log("[]  !"),setTimeout(()=>ld(),500))};setTimeout(o,300)}},[t,R]),_.useEffect(()=>{if(!te.current){R==="route"&&je.length>0&&setTimeout(()=>{te.current&&ld()},500);return}ld()},[je,R]);const ad=()=>{js.current.forEach(o=>o.setMap(null)),js.current=[],Cs.current.forEach(o=>o.setMap(null)),Cs.current=[],V0.current.forEach(o=>o.setMap(null)),V0.current=[],er.current&&(er.current.setMap(null),er.current=null),sd(null)},ld=()=>{if(!te.current)return;ad();const o=je.filter(u=>u.lat&&u.lng);o.length!==0&&setTimeout(()=>{if(!te.current)return;const u={};if(o.forEach((f,p)=>{const x=`${f.lat.toFixed(5)}_${f.lng.toFixed(5)}`;u[x]||(u[x]=[]),u[x].push({...f,originalIdx:p})}),Object.values(u).forEach(f=>{const p=f.length;f.forEach((x,v)=>{let b=0,w=0;if(p>1){const P=2*Math.PI/p*v,A=15e-5;b=Math.cos(P)*A,w=Math.sin(P)*A}const j=p>1,D=new naver.maps.Marker({position:new naver.maps.LatLng(x.lat+b,x.lng+w),map:te.current,icon:{content:`<div style="background:linear-gradient(135deg,${j?"#f59e0b":"#14b8a6"},${j?"#d97706":"#0d9488"});color:white;width:${j?"32px":"28px"};height:${j?"32px":"28px"};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:${j?"11px":"12px"};box-shadow:0 3px 8px rgba(0,0,0,0.4);border:2px solid ${j?"#fbbf24":"white"}">${x.originalIdx+1}</div>`,anchor:new naver.maps.Point(j?16:14,j?16:14)},zIndex:100+x.originalIdx});naver.maps.Event.addListener(D,"click",()=>{Yc(x.originalIdx)}),js.current.push(D)})}),o.length>=2){const f=o.map(x=>new naver.maps.LatLng(x.lat,x.lng)),p=new naver.maps.Polyline({map:te.current,path:f,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.9});Cs.current.push(p)}if(o.length===1)te.current.setCenter(new naver.maps.LatLng(o[0].lat,o[0].lng)),te.current.setZoom(15);else if(o.length>=2){const f=new naver.maps.LatLngBounds;o.forEach(p=>f.extend(new naver.maps.LatLng(p.lat,p.lng))),te.current.fitBounds(f,{padding:50})}},100)},xS=o=>{o.length!==0&&(G0("all"),K0("all"),df(o.map(u=>u.id)),ni("map"),setTimeout(()=>{if(Re.current&&o.length>0)if(o.length===1)Re.current.setCenter(new naver.maps.LatLng(o[0].lat,o[0].lng)),Re.current.setZoom(14);else{const u=new naver.maps.LatLngBounds;o.forEach(f=>u.extend(new naver.maps.LatLng(f.lat,f.lng))),Re.current.fitBounds(u,{padding:50})}},300))},vS=o=>(n==null?void 0:n.role)==="super"||o.managerId===(n==null?void 0:n.managerId),yS=o=>{q0(o),ul(null)},_S=(o,u)=>{const f=gl.find(p=>p.id===o);f&&Df({...f,date:u,status:u?"planned":"confirmed"})},bS=()=>{Kr.forEach(o=>{const u=gl.find(f=>f.id===o);u&&Df({...u,status:"confirmed",expiredChecked:!0})}),qi([]),Pc(null)},wS=()=>{confirm(`${Kr.length}  ?`)&&(Kr.forEach(o=>q0(o)),qi([]),Pc(null))},tr={:{lat:37.5547,lng:126.9707},:{lat:37.5659,lng:126.9773},:{lat:37.5701,lng:126.9822},3:{lat:37.5714,lng:126.9916},5:{lat:37.5707,lng:126.9992},:{lat:37.5711,lng:127.0095},:{lat:37.5762,lng:127.0251},:{lat:37.4979,lng:127.0276},:{lat:37.5007,lng:127.0365},:{lat:37.5045,lng:127.049},:{lat:37.5089,lng:127.0637},:{lat:37.5108,lng:127.0736},:{lat:37.5133,lng:127.1001},:{lat:37.5571,lng:126.9244},:{lat:37.5495,lng:126.9138},:{lat:37.5552,lng:126.9366},:{lat:37.5569,lng:126.9463},:{lat:37.5575,lng:126.9559},:{lat:37.5601,lng:126.9635},:{lat:37.566,lng:126.9823},3:{lat:37.5665,lng:126.9918},4:{lat:37.5669,lng:126.9983},:{lat:37.5653,lng:127.0076},:{lat:37.5659,lng:127.0176},:{lat:37.565,lng:127.0296},:{lat:37.5614,lng:127.0378},:{lat:37.5568,lng:127.0441},:{lat:37.5474,lng:127.0473},:{lat:37.5446,lng:127.0558},:{lat:37.5404,lng:127.07},:{lat:37.5358,lng:127.0863},:{lat:37.5352,lng:127.0948},:{lat:37.521,lng:127.1028},:{lat:37.5114,lng:127.0833},:{lat:37.4934,lng:127.0148},:{lat:37.492,lng:127.0077},:{lat:37.4815,lng:126.9976},:{lat:37.4766,lng:126.9816},:{lat:37.4769,lng:126.9637},:{lat:37.4812,lng:126.9527},:{lat:37.4824,lng:126.9418},:{lat:37.4842,lng:126.9296},:{lat:37.4876,lng:126.9131},:{lat:37.4854,lng:126.9015},:{lat:37.4929,lng:126.8966},:{lat:37.5088,lng:126.8913},:{lat:37.5178,lng:126.8956},:{lat:37.5247,lng:126.8964},:{lat:37.5349,lng:126.9024},:{lat:37.4856,lng:127.0165},:{lat:37.4844,lng:127.0343},:{lat:37.4871,lng:127.0467},:{lat:37.4908,lng:127.0555},:{lat:37.4946,lng:127.0634},:{lat:37.4968,lng:127.0716},:{lat:37.4987,lng:127.0792},:{lat:37.4838,lng:127.0858},:{lat:37.4874,lng:127.1017},:{lat:37.5271,lng:127.0284},:{lat:37.5168,lng:127.0203},:{lat:37.5112,lng:127.0132},:{lat:37.5048,lng:127.0049},:{lat:37.5405,lng:127.0172},:{lat:37.5476,lng:127.0131},:{lat:37.5541,lng:127.0103},:{lat:37.5588,lng:127.0096},:{lat:37.5614,lng:126.9943},:{lat:37.5759,lng:126.9735},:{lat:37.5766,lng:126.9855},:{lat:37.5608,lng:126.986},:{lat:37.5587,lng:126.9785},:{lat:37.5447,lng:126.972},:{lat:37.5349,lng:126.9732},:{lat:37.5295,lng:126.9686},:{lat:37.5214,lng:126.971},:{lat:37.5082,lng:126.979},:{lat:37.4868,lng:126.9816},:{lat:37.4698,lng:126.9853},:{lat:37.5822,lng:127.0019},:{lat:37.5884,lng:127.0064},:{lat:37.5929,lng:127.0166},:{lat:37.6035,lng:127.0251},:{lat:37.6131,lng:127.03},:{lat:37.6215,lng:127.0298},:{lat:37.6381,lng:127.0257},:{lat:37.6483,lng:127.0345},:{lat:37.6531,lng:127.0476},:{lat:37.6559,lng:127.0619},:{lat:37.6612,lng:127.073},:{lat:37.6702,lng:127.0799},:{lat:37.5708,lng:126.9768},:{lat:37.5653,lng:126.9666},:{lat:37.5476,lng:126.9312},:{lat:37.5247,lng:126.856},:{lat:37.5263,lng:126.875},:{lat:37.5242,lng:126.887},:{lat:37.5256,lng:126.8845},:{lat:37.5225,lng:126.9057},:{lat:37.5216,lng:126.9242},:{lat:37.5271,lng:126.9328},:{lat:37.5392,lng:126.946},:{lat:37.544,lng:126.9517},:{lat:37.5532,lng:126.9568},:{lat:37.5571,lng:127.0296},:{lat:37.5669,lng:127.052},:{lat:37.5613,lng:127.0641},:{lat:37.557,lng:127.0793},:{lat:37.5513,lng:127.0882},:{lat:37.5452,lng:127.1031},:{lat:37.5389,lng:127.1236},:{lat:37.5352,lng:127.1323},:{lat:37.5343,lng:127.1427},:{lat:37.5352,lng:127.152},:{lat:37.5424,lng:127.1441},:{lat:37.555,lng:127.1541},:{lat:37.5571,lng:127.167},:{lat:37.5344,lng:126.9945},:{lat:37.5342,lng:126.9874},:{lat:37.539,lng:126.9617},:{lat:37.5474,lng:126.9434},:{lat:37.5477,lng:126.9225},:{lat:37.5555,lng:126.9105},:{lat:37.5635,lng:126.904},:{lat:37.5681,lng:126.8972},:{lat:37.5769,lng:126.8997},:{lat:37.583,lng:126.9096},:{lat:37.5851,lng:126.918},:{lat:37.5933,lng:126.9179},:{lat:37.6017,lng:126.9214},:{lat:37.6107,lng:126.9301},:{lat:37.6149,lng:126.9391},:{lat:37.6189,lng:126.9209},:{lat:37.6159,lng:126.9114},:{lat:37.5397,lng:127.0019},:{lat:37.5474,lng:127.0071},:{lat:37.5602,lng:127.0149},:{lat:37.5718,lng:127.0166},:{lat:37.5798,lng:127.0147},:{lat:37.5868,lng:127.0195},:{lat:37.5863,lng:127.029},:{lat:37.5895,lng:127.034},:{lat:37.6017,lng:127.038},:{lat:37.6062,lng:127.0442},:{lat:37.6105,lng:127.0512},:{lat:37.6153,lng:127.0661},:{lat:37.6177,lng:127.0754},:{lat:37.6199,lng:127.0842},:{lat:37.6188,lng:127.0914},:{lat:37.5109,lng:127.0218},:{lat:37.5145,lng:127.0316},:{lat:37.5172,lng:127.0412},:{lat:37.5198,lng:127.0535},:{lat:37.5316,lng:127.0667},:{lat:37.5475,lng:127.0743},:{lat:37.5656,lng:127.084},:{lat:37.5735,lng:127.0869},:{lat:37.5802,lng:127.089},:{lat:37.5887,lng:127.087},:{lat:37.5966,lng:127.0851},:{lat:37.6026,lng:127.079},:{lat:37.6107,lng:127.0768},:{lat:37.6253,lng:127.0729},:{lat:37.6371,lng:127.0669},:{lat:37.6442,lng:127.064},:{lat:37.665,lng:127.0581},:{lat:37.6748,lng:127.0565},:{lat:37.6896,lng:127.0449},:{lat:37.6986,lng:127.0531},:{lat:37.5021,lng:126.9958},:{lat:37.4874,lng:126.9877},:{lat:37.4852,lng:126.9817},:{lat:37.4838,lng:126.9726},:{lat:37.4965,lng:126.9535},:{lat:37.5027,lng:126.9504},:{lat:37.5082,lng:126.9396},:{lat:37.4994,lng:126.9269},:{lat:37.4997,lng:126.9184},:{lat:37.503,lng:126.9086},:{lat:37.4865,lng:126.8873},:{lat:37.4813,lng:126.8828},:{lat:37.4762,lng:126.8687},:{lat:37.4762,lng:126.8563},:{lat:37.4792,lng:126.8421},:{lat:37.4927,lng:126.8234},:{lat:37.517,lng:127.1117},:{lat:37.5303,lng:127.1238},:{lat:37.5502,lng:127.1279},:{lat:37.5059,lng:127.1016},:{lat:37.5007,lng:127.1062},:{lat:37.4929,lng:127.1182},:{lat:37.4858,lng:127.1224},:{lat:37.4781,lng:127.1264},:{lat:37.4703,lng:127.1267},:{lat:37.4584,lng:127.15},:{lat:37.4507,lng:127.1573},:{lat:37.4455,lng:127.1574},:{lat:37.4389,lng:127.1538},:{lat:37.4345,lng:127.1508},:{lat:37.4322,lng:127.1291},:{lat:37.5794,lng:126.7975},:{lat:37.5622,lng:126.8011},:{lat:37.5596,lng:126.81},:{lat:37.5619,lng:126.8167},:{lat:37.5671,lng:126.8277},:{lat:37.5607,lng:126.8438},:{lat:37.5614,lng:126.854},:{lat:37.5587,lng:126.8622},:{lat:37.5516,lng:126.8718},:{lat:37.5471,lng:126.8773},:{lat:37.5392,lng:126.8785},:{lat:37.5331,lng:126.8936},:{lat:37.5284,lng:126.9182},:{lat:37.5176,lng:126.9324},:{lat:37.5131,lng:126.9426},:{lat:37.5122,lng:126.9527},:{lat:37.5083,lng:126.9633},:{lat:37.5079,lng:126.9882},:{lat:37.5082,lng:126.9961},:{lat:37.5027,lng:127.0147},:{lat:37.5048,lng:127.0249},:{lat:37.5075,lng:127.0345},:{lat:37.5104,lng:127.0433},:{lat:37.5114,lng:127.052},:{lat:37.5145,lng:127.0593},:{lat:37.5046,lng:127.0862},:{lat:37.5018,lng:127.0935},:{lat:37.5098,lng:127.1089},:{lat:37.5173,lng:127.1117},:{lat:37.5213,lng:127.1249},:{lat:37.5239,lng:127.1354},:{lat:37.5284,lng:127.148},:{lat:37.5416,lng:126.9714},:{lat:37.5299,lng:126.9647},:{lat:37.4984,lng:126.9265},:{lat:37.5174,lng:126.9141},:{lat:37.5159,lng:126.9073},:{lat:37.5032,lng:126.8822},:{lat:37.4569,lng:126.8957},:{lat:37.4679,lng:126.8958},:{lat:37.4796,lng:126.888},:{lat:37.5434,lng:127.0446},:{lat:37.5273,lng:127.0393},:{lat:37.4996,lng:127.0556},:{lat:37.4858,lng:127.0534},:{lat:37.48,lng:127.0509},:{lat:37.4747,lng:127.064},:{lat:37.45,lng:127.127},:{lat:37.44,lng:127.127},:{lat:37.4116,lng:127.1278},:{lat:37.3953,lng:127.1268},:{lat:37.385,lng:127.1234},:{lat:37.378,lng:127.1167},:{lat:37.3665,lng:127.1085},:{lat:37.3607,lng:127.1089},:{lat:37.3397,lng:127.1088},:{lat:37.3253,lng:127.1073},:{lat:37.3127,lng:127.1116},:{lat:37.2997,lng:127.1078},:{lat:37.2853,lng:127.1092},:{lat:37.275,lng:127.116},:{lat:37.265,lng:127.1182},:{lat:37.252,lng:127.0773},:{lat:37.2519,lng:127.0549},:{lat:37.244,lng:127.0471},:{lat:37.2399,lng:127.036},:{lat:37.2634,lng:127.0323},:{lat:37.267,lng:127.0119},:{lat:37.266,lng:126.9996},:{lat:37.47,lng:127.0391},:{lat:37.4509,lng:127.0538},:{lat:37.3947,lng:127.1115},:{lat:37.5313,lng:127.0369},:{lat:37.5805,lng:127.047},:{lat:37.5895,lng:127.0575},:{lat:37.5971,lng:127.0665},:{lat:37.5992,lng:127.0919},:{lat:37.6079,lng:127.1071},:{lat:37.5988,lng:127.1394},:{lat:37.6084,lng:127.1475},:{lat:37.6102,lng:127.162},:{lat:37.5879,lng:127.1901},:{lat:37.58,lng:127.2083},:{lat:37.5231,lng:127.2798},:{lat:37.5411,lng:127.312},:{lat:37.5456,lng:127.3204},:{lat:37.5508,lng:127.3459},:{lat:37.5633,lng:127.3704},:{lat:37.5664,lng:127.3964},:{lat:37.563,lng:127.4163},:{lat:37.4858,lng:127.4623},:{lat:37.4319,lng:127.5053},:{lat:37.6635,lng:127.0115},:{lat:37.6575,lng:127.0123},"4.19":{lat:37.6517,lng:127.0134},:{lat:37.6459,lng:127.0147},:{lat:37.6398,lng:127.0161},:{lat:37.6316,lng:127.0183},:{lat:37.6263,lng:127.0197},:{lat:37.6188,lng:127.0215},:{lat:37.6135,lng:127.0224},:{lat:37.6073,lng:127.0243},:{lat:37.5359,lng:126.7385},:{lat:37.559,lng:126.6882},:{lat:37.5323,lng:126.6416},:{lat:37.4929,lng:126.4939},:{lat:37.4974,lng:126.4692},:{lat:37.4465,lng:126.4519},1:{lat:37.4493,lng:126.4514},2:{lat:37.4604,lng:126.4419},:{lat:37.512,lng:127.059},:{lat:37.5111,lng:127.098},:{lat:37.5512,lng:126.9882},:{lat:37.5796,lng:126.977},:{lat:37.5794,lng:126.991},:{lat:37.5658,lng:126.9749},:{lat:37.5673,lng:127.0095},DDP:{lat:37.5673,lng:127.0095},:{lat:37.5344,lng:126.9945},:{lat:37.5608,lng:126.986},:{lat:37.574,lng:126.985},:{lat:37.5825,lng:126.985},:{lat:37.5716,lng:126.9769},:{lat:37.5695,lng:126.978},:{lat:37.5256,lng:126.9227},:{lat:37.5284,lng:126.934},:{lat:37.5213,lng:127.1249},:{lat:37.5434,lng:127.0446},:{lat:37.6207,lng:127.0404},:{lat:37.5681,lng:126.8972},:{lat:37.5151,lng:127.073},:{lat:37.4982,lng:126.8671},:{lat:37.5203,lng:127.023},:{lat:37.5198,lng:127.0535},:{lat:37.5273,lng:127.0393},:{lat:37.5446,lng:127.0558},:{lat:37.5665,lng:126.9918},:{lat:37.574,lng:126.989},:{lat:37.56,lng:126.922},:{lat:37.55,lng:126.91},:{lat:37.542,lng:126.985},:{lat:37.537,lng:126.992}},iv=o=>{const u=o.trim();if(tr[u])return tr[u];if(tr[u+""])return tr[u+""];if(u.endsWith("")&&tr[u.slice(0,-1)])return tr[u.slice(0,-1)];const p=Object.keys(tr).find(x=>x.includes(u)||u.includes(x));return p?tr[p]:null},av=()=>{if(Ef.trim()&&Re.current){const o=Ef.trim(),u=iv(o);if(u){Re.current.setCenter(new naver.maps.LatLng(u.lat,u.lng)),Re.current.setZoom(16),qr.current.forEach(x=>x.setMap(null)),qr.current=[];const p=new naver.maps.Circle({map:Re.current,center:new naver.maps.LatLng(u.lat,u.lng),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});qr.current.push(p),setTimeout(()=>p.setMap(null),5e3);return}const f=Lf.current.filter(p=>p.region&&p.region.toLowerCase().includes(o.toLowerCase()));if(f.length>0){xS(f);return}naver.maps.Service.geocode({query:o},(p,x)=>{if(p===naver.maps.Service.Status.OK&&x.v2.addresses&&x.v2.addresses.length>0){const v=x.v2.addresses[0],b=parseFloat(v.y),w=parseFloat(v.x);Re.current.setCenter(new naver.maps.LatLng(b,w)),Re.current.setZoom(16),qr.current.forEach(D=>D.setMap(null)),qr.current=[];const j=new naver.maps.Circle({map:Re.current,center:new naver.maps.LatLng(b,w),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});qr.current.push(j),setTimeout(()=>j.setMap(null),5e3)}else alert("  .")})}else gS()},si=o=>o?o.replace(/[^0-9]/g,""):"",NS=(o,u,f,p)=>{if(!o||!u||!f||!p)return 1/0;const x=6371e3,v=(f-o)*Math.PI/180,b=(p-u)*Math.PI/180,w=Math.sin(v/2)*Math.sin(v/2)+Math.cos(o*Math.PI/180)*Math.cos(f*Math.PI/180)*Math.sin(b/2)*Math.sin(b/2),j=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return x*j},Ff=(o,u)=>{if(!o||!u||u.length===0)return{isDuplicate:!1,matchedCompany:null};const f=o.name||o.officeName||o.realtorName||"",p=o.address||"",x=o.regNo||"",v=o.lat,b=o.lng,w=[si(o.phone||""),si(o.cellPhone||""),si(o.officePhone||""),si(o.mobile||"")].filter(M=>M&&M.length>=4),j=M=>(M||"").replace(/||||||/g,"").replace(/\s+/g,"").trim(),D=M=>{if(!M)return"";const ce=M.replace(/|||||/g,"").replace(/\([^)]*\)/g,"").trim().match(/(\S+)\s*(\S+(?:||))\s*(\d+(?:-\d+)?)/);return ce?`${ce[1]}_${ce[2]}_${ce[3]}`:""},P=j(f),A=D(p);for(const M of u){const H=M.name||"",ce=M.address||"",k=M.regNo||"",de=M.lat,$=M.lng,V=[si(M.phone||""),si(M.contact||""),si(M.mobile||"")].filter(ue=>ue&&ue.length>=4),q=j(H),z=D(ce);if(x&&k&&x===k)return{isDuplicate:!0,matchedCompany:M,reason:"regNo"};if(NS(v,b,de,$)<=30&&P&&q&&P===q)return{isDuplicate:!0,matchedCompany:M,reason:"location+name"};if(w.some(ue=>V.some(me=>ue===me)))return{isDuplicate:!0,matchedCompany:M,reason:"phone"};if(A&&z&&A===z&&P&&q&&P===q)return{isDuplicate:!0,matchedCompany:M,reason:"address+name"};if(P&&q&&P===q){const ue=p.match(/(\S+)/),me=ce.match(/(\S+)/);if(ue&&me&&ue[1]===me[1])return{isDuplicate:!0,matchedCompany:M,reason:"name_in_gu"}}}return{isDuplicate:!1,matchedCompany:null}},Uf=(o,u)=>Ff(o,u).isDuplicate,$f=(o,u=null)=>new Promise(f=>{var v,b;if(!((b=(v=window.naver)==null?void 0:v.maps)!=null&&b.Service)){f(null);return}const p=w=>new Promise(j=>{if(!w){j(null);return}naver.maps.Service.geocode({query:w},(D,P)=>{var A;if(D===naver.maps.Service.Status.OK&&((A=P.v2.addresses)==null?void 0:A.length)>0){const M=P.v2.addresses[0];j({lat:parseFloat(M.y),lng:parseFloat(M.x)})}else j(null)})});(async()=>{if(o){const w=await p(o);if(w)return f(w)}if(u){const w=await p(u);if(w)return f(w)}if(o){const w=o.replace(/\s*\d+.*$/,"").replace(/\s*\d+.*$/,"").replace(/\s*,.*$/,"").trim();if(w!==o){const j=await p(w);if(j)return f(j)}}if(o){const w=o.match(/(||||||||||||||||)[^\s]*\s+[^\s]+/);if(w){const j=await p(w[0]);if(j)return f(j)}}f(null)})()}),jS=o=>{const u=ar(),f=Lt.filter(v=>v.date!==u?!1:o.role==="super"?!0:v.managerId===o.managerId),p=ze.filter(v=>v.date!==u?!1:o.role==="super"?!0:v.managerId===o.managerId),x=[...f.map(v=>({type:"calendar",...v})),...p.map(v=>{var b;return{type:"route",title:`: ${((b=v.stops)==null?void 0:b.length)||0} `,...v}})];x.length>0&&(RC(x),sf(!0))},CS=()=>{const o=Pp();return o.dayOfWeek!==1?!1:o.day>=22&&o.day<=28},SS=o=>{if(o.role==="super"||!CS())return;const u=Pp(),f=u.month+1>11?0:u.month+1,x=`${u.month+1>11?u.year+1:u.year}-${String(f+1).padStart(2,"0")}`;Lt.some(b=>{var w;return b.managerId===o.managerId&&((w=b.date)==null?void 0:w.startsWith(x))})||af(!0)},lv=async o=>new Promise((u,f)=>{const p=new FileReader;p.onload=async()=>{var x,v,b,w;try{const j=p.result.split(",")[1],P=await(await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${CD}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:j},features:[{type:"TEXT_DETECTION"}]}]})})).json();if((w=(b=(v=(x=P.responses)==null?void 0:x[0])==null?void 0:v.textAnnotations)==null?void 0:b[0])!=null&&w.description){const A=P.responses[0].textAnnotations[0].description,M=IS(A);u(M)}else u({raw:"",name:"",contact:"",phone:"",address:""})}catch(j){f(j)}},p.onerror=f,p.readAsDataURL(o)}),IS=o=>{const u=o.split(`
`).map(P=>P.trim()).filter(P=>P);let f="",p="",x="",v="";const b=[/010[-\s]?\d{4}[-\s]?\d{4}/,/02[-\s]?\d{3,4}[-\s]?\d{4}/,/0\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/];for(const P of u){for(const A of b){const M=P.match(A);if(M){x=M[0].replace(/[-\s]/g,"");break}}if(x)break}const w=/(||||||||||||||||)[^\n]+?(|||||)[^\n]*\d*/;for(const P of u){const A=P.match(w);if(A){v=A[0];break}}const j=[/\s*[:\s]*([-]{2,4})/,/([-]{2,4})\s*(|||||||)/,/^([-]{2,4})$/];for(const P of u){for(const A of j){const M=P.match(A);if(M){p=M[1]||M[0];break}}if(p)break}const D=[/([-]+)/,/([-]+)/,/([-]+)/];for(const P of u){for(const A of D){const M=P.match(A);if(M){f=M[1];break}}if(f)break}return{raw:o,name:f,contact:p,phone:x,address:v}},kS=async o=>{var f;const u=(f=o.target.files)==null?void 0:f[0];if(u){Fc(!0),Lc(!0);try{const p=await lv(u);tf(p),rt({...se,name:p.name||"",contact:p.contact||"",phone:p.phone||"",address:p.address||""})}catch(p){console.error("OCR :",p),alert("  .")}finally{Fc(!1),o.target.value=""}}},ES=async o=>{const u=Array.from(o.target.files||[]).slice(0,10);if(u.length!==0){Fc(!0),ef(!0),Qn([]);try{const f=[];for(let p=0;p<u.length;p++){const x=await lv(u[p]);f.push({...x,managerId:(n==null?void 0:n.managerId)||null,reaction:"neutral",memo:""})}Qn(f)}catch(f){console.error("OCR :",f),alert("    .")}finally{Fc(!1),o.target.value=""}}},TS=()=>{const o=_n.filter(u=>u.name);if(o.length===0)return alert("  .");o.forEach((u,f)=>{const p={id:Date.now()+f,name:u.name,contact:u.contact,phone:u.phone,address:u.address,region:u.address,managerId:u.managerId,reaction:u.reaction,memo:u.memo,createdAt:new Date().toLocaleString("ko-KR")};ks(p)}),alert(`${o.length}  .`),Qn([]),ef(!1)},RS=(o,u,f,p)=>{const x=P=>P*Math.PI/180,v=P=>P*180/Math.PI,b=x(p-u),w=Math.sin(b)*Math.cos(x(f)),j=Math.cos(x(o))*Math.sin(x(f))-Math.sin(x(o))*Math.cos(x(f))*Math.cos(b);return(v(Math.atan2(w,j))+360)%360},PS=(o,u,f,p)=>{if(!te.current)return;const x=new naver.maps.LatLng(o,u);Ss.current||(Ss.current=new naver.maps.Marker({position:x,map:te.current,icon:{content:"",anchor:new naver.maps.Point(20,20)},zIndex:1e3})),Ss.current.setPosition(x);const v=f||0;Ss.current.setIcon({content:`<div style="position: relative; width: 40px; height: 40px;">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(${v}deg);">
 <div style="width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 20px solid #4285f4; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));"></div>
 </div>
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #4285f4; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6px; height: 6px; background: white; border-radius: 50%;"></div>
 </div>
 </div>`,anchor:new naver.maps.Point(20,20)}),p&&p<500&&(Is.current?(Is.current.setCenter(x),Is.current.setRadius(p)):Is.current=new naver.maps.Circle({map:te.current,center:x,radius:p,fillColor:"#4285f4",fillOpacity:.1,strokeColor:"#4285f4",strokeOpacity:.3,strokeWeight:1}))},AS=()=>{if(ed)ea.current&&(navigator.geolocation.clearWatch(ea.current),ea.current=null),Ss.current&&(Ss.current.setMap(null),Ss.current=null),Is.current&&(Is.current.setMap(null),Is.current=null),ta.current=null,nd.current=0,If(!1),H0(null);else{if(!navigator.geolocation)return alert("GPS   .");If(!0),ea.current=navigator.geolocation.watchPosition(o=>{const{latitude:u,longitude:f,accuracy:p,heading:x,speed:v}=o.coords,b={lat:u,lng:f};H0(b);let w=nd.current;if(ta.current){const j=ta.current.lat,D=ta.current.lng;Math.sqrt(Math.pow(u-j,2)+Math.pow(f-D,2))*111e3>2&&(w=RS(j,D,u,f),nd.current=w,ta.current=b)}else ta.current=b;x&&!isNaN(x)&&v>.3&&(w=x,nd.current=x),PS(u,f,w,p)},o=>{console.error("GPS :",o);let u="GPS  .";o.code===1?u="GPS  .    .":o.code===2?u="GPS    .":o.code===3&&(u="GPS   ."),alert(u),If(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},OS=()=>{td&&te.current?(te.current.setCenter(new naver.maps.LatLng(td.lat,td.lng)),te.current.setZoom(16)):alert("    . GPS .")};_.useEffect(()=>()=>{ea.current&&navigator.geolocation.clearWatch(ea.current),Ss.current&&Ss.current.setMap(null),Is.current&&Is.current.setMap(null),er.current&&er.current.setMap(null)},[]),_.useEffect(()=>{if(t&&C&&n&&(Lt.length>0||ze.length>0)){const o=`bc_alert_shown_${ar()}_${n.managerId||"admin"}`;sessionStorage.getItem(o)||setTimeout(()=>{jS(n),sessionStorage.setItem(o,"true")},1e3)}},[t,C,Lt,ze,n]),_.useEffect(()=>{t&&R==="calendar"&&n&&n.role!=="super"&&SS(n)},[R,t,n,Lt]);const od=_.useRef([]),ov=()=>{od.current.forEach(o=>o.setMap(null)),od.current=[]},Wf=async()=>{if(!Zi.trim())return alert(" ");if(Ns.length>=10)return alert(` 10   .
    .`);_f(!0);const o=iv(Zi);if(o&&te.current){_f(!1),te.current.setCenter(new naver.maps.LatLng(o.lat,o.lng)),te.current.setZoom(16),Ns.some(f=>f.lat===o.lat&&f.lng===o.lng)||jl(f=>[...f,{id:Date.now(),name:vf.trim()||Zi,address:"",lat:o.lat,lng:o.lng}]),xf(""),yf(""),setTimeout(()=>{const f=new naver.maps.Marker({position:new naver.maps.LatLng(o.lat,o.lng),map:te.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});od.current.push(f)},200);return}naver.maps.Service.geocode({query:Zi},async(u,f)=>{var w;if(_f(!1),u!==naver.maps.Service.Status.OK||!((w=f.v2.addresses)!=null&&w.length))return alert("    ");const p=f.v2.addresses[0],x=parseFloat(p.y),v=parseFloat(p.x);Ns.some(j=>j.lat===x&&j.lng===v)||jl(j=>[...j,{id:Date.now(),name:vf.trim()||Zi,address:p.roadAddress||p.jibunAddress||"",lat:x,lng:v}]),xf(""),yf(""),te.current&&(te.current.setCenter(new naver.maps.LatLng(x,v)),te.current.setZoom(16),setTimeout(()=>{const j=new naver.maps.Marker({position:new naver.maps.LatLng(x,v),map:te.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});od.current.push(j)},200))})},DS=o=>{jl(u=>u.filter(f=>f.id!==o))},MS=()=>{if(Ns.length===0)return alert("  ");let o=0;const u=[];Ns.forEach(f=>{je.some(x=>x.lat===f.lat&&x.lng===f.lng)||(u.push({id:Date.now()+Math.random(),name:f.name,address:f.address,lat:f.lat,lng:f.lng,type:"search"}),o++)}),u.length>0&&Ht(f=>[...f,...u]),jl([]),ov(),alert(`${o}   !`)},[QM,JM]=_.useState(!1);_.useRef(null);const LS=o=>{Ht(u=>u.filter(f=>f.id!==o))},cv=(o,u)=>{const f=[...je],p=o+u;p<0||p>=f.length||([f[o],f[p]]=[f[p],f[o]],Ht(f))},cd=(o,u,f,p)=>{const v=(f-o)*Math.PI/180,b=(p-u)*Math.PI/180,w=Math.sin(v/2)*Math.sin(v/2)+Math.cos(o*Math.PI/180)*Math.cos(f*Math.PI/180)*Math.sin(b/2)*Math.sin(b/2);return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},dv=(o,u,f)=>{const p=[...o],x=[];let v=u,b=f;for(;p.length>0;){let w=0,j=1/0;for(let P=0;P<p.length;P++){const A=cd(v,b,p[P].lat,p[P].lng);A<j&&(j=A,w=P)}const D=p.splice(w,1)[0];x.push(D),v=D.lat,b=D.lng}return x},uv=async(o,u,f)=>{var v,b;if(f.length<1)return null;const p="dx2ymyk2b1",x=localStorage.getItem("ncp_client_secret")||"";if(!x)return console.log("Directions API   -   "),null;try{const w=`${u},${o}`,j=`${f[f.length-1].lng},${f[f.length-1].lat}`;let D="";f.length>1&&(D=f.slice(0,-1).map(ce=>`${ce.lng},${ce.lat}`).join("|"));let P=`https://naveropenapi.apigw.ntruss.com/map-direction-15/v1/driving?start=${w}&goal=${j}&option=trafast`;D&&(P+=`&waypoints=${D}`);const A=await fetch(P,{headers:{"X-NCP-APIGW-API-KEY-ID":p,"X-NCP-APIGW-API-KEY":x}});if(!A.ok)return null;const M=await A.json();if(M.code!==0||!((b=(v=M.route)==null?void 0:v.trafast)!=null&&b[0]))return null;const H=M.route.trafast[0];return{path:H.path,distance:H.summary.distance,duration:H.summary.duration}}catch(w){return console.error("Directions API  :",w),null}},hv=o=>{if(!te.current||!(o!=null&&o.path))return;er.current&&er.current.setMap(null);const u=o.path.map(([x,v])=>new naver.maps.LatLng(v,x));er.current=new naver.maps.Polyline({map:te.current,path:u,strokeColor:"#4285f4",strokeWeight:5,strokeOpacity:.8,strokeLineCap:"round",strokeLineJoin:"round"});const f=(o.distance/1e3).toFixed(1),p=Math.round(o.duration/6e4);sd({distance:f,duration:p})},FS=async()=>{const o=je.filter(f=>f.lat&&f.lng),u=je.filter(f=>!f.lat||!f.lng);if(o.length<2){alert(`   2  .
  .`);return}navigator.geolocation?navigator.geolocation.getCurrentPosition(async f=>{const p=f.coords.latitude,x=f.coords.longitude,v=dv(o,p,x),b=[...v,...u];Ht(b);const w=await uv(p,x,v);if(w){hv(w);const j=(w.distance/1e3).toFixed(1),D=Math.round(w.duration/6e4);alert(`  !

 ${v.length} 
  : ${j}km
  : ${D}

   !`)}else{let j=cd(p,x,v[0].lat,v[0].lng);for(let D=0;D<v.length-1;D++)j+=cd(v[D].lat,v[D].lng,v[D+1].lat,v[D+1].lng);sd(null),alert(`  !

 ${v.length} 
 : ${j.toFixed(1)}km

     API  .`)}},f=>{fv(o,u)},{enableHighAccuracy:!0,timeout:5e3}):fv(o,u)},US=()=>{if(je.length<2){alert(" 2  .");return}Ht([...je].reverse()),alert("   !")},fv=async(o,u)=>{const f=o[0],p=dv(o,f.lat,f.lng),x=[...p,...u];Ht(x);const v=await uv(f.lat,f.lng,p.slice(1));if(v){hv(v);const b=(v.distance/1e3).toFixed(1),w=Math.round(v.duration/6e4);alert(`  !

 ${p.length} 
  : ${b}km
  : ${w}

(GPS   -   )`)}else{let b=0;for(let w=0;w<p.length-1;w++)b+=cd(p[w].lat,p[w].lng,p[w+1].lat,p[w+1].lng);sd(null),alert(`  !

 ${p.length} 
 : ${b.toFixed(1)}km

(GPS   -   )`)}},$S=o=>{const u=(o.stops||[]).filter(f=>f.lat&&f.lng);if(u.length===0)return alert("   .");pv(o),setTimeout(()=>{if(te.current)if(js.current.forEach(f=>f.setMap(null)),js.current=[],Cs.current.forEach(f=>f.setMap(null)),Cs.current=[],u.forEach((f,p)=>{const x=new naver.maps.Marker({position:new naver.maps.LatLng(f.lat,f.lng),map:te.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 3px 8px rgba(0,0,0,0.4); border: 3px solid white;">${p+1}</div>`,anchor:new naver.maps.Point(16,16)}});js.current.push(x)}),u.length>=2){const f=u.map(v=>new naver.maps.LatLng(v.lat,v.lng)),p=new naver.maps.Polyline({map:te.current,path:f,strokeColor:"#14b8a6",strokeWeight:5,strokeOpacity:.9,strokeStyle:"solid"});Cs.current.push(p);const x=new naver.maps.LatLngBounds;u.forEach(v=>x.extend(new naver.maps.LatLng(v.lat,v.lng))),te.current.fitBounds(x,{padding:50})}else te.current.setCenter(new naver.maps.LatLng(u[0].lat,u[0].lng)),te.current.setZoom(15)},400)},pv=o=>{qc(o.id),yl(o.name||""),Yi(o.date||new Date().toISOString().split("T")[0]),xl(o.time||"09:00"),Xs(o.managerId||null),Ht(o.stops||[]),Yc(0),setTimeout(()=>{te.current&&ld()},100),window.scrollTo({top:0,behavior:"smooth"})},WS=o=>{var f;const u=((f=o.stops)==null?void 0:f.filter(p=>!p.visited))||[];u.length>0?mf({route:o,unvisitedStops:u}):zf(o,!1)},zf=(o,u=!1)=>{var x;const f={...o,status:"completed",completedAt:new Date().toISOString()},p=ze.map(v=>v.id===o.id?f:v);if(L0(p),localStorage.setItem("bc_routes",JSON.stringify(p)),u){const v=((x=o.stops)==null?void 0:x.filter(w=>!w.visited))||[];let b=0;v.forEach(w=>{const j=oe.find(D=>{var P,A;return D.name===w.name||((P=D.name)==null?void 0:P.includes(w.name))||((A=w.name)==null?void 0:A.includes(D.name))});if(j&&j.managerId){const D={...j,managerId:null};ks(D),b++}}),b>0?alert(`  .
  ${b}   .`):alert("  .")}else alert("  .");mf(null)},zS=()=>{qc(null),yl(""),Ht([]),Yi(ar()),xl("09:00"),Xs((n==null?void 0:n.managerId)||null),ad(),localStorage.removeItem("bc_temp_route")},mv=()=>{if(je.length===0)return alert(" /  ");if(!vl.trim())return alert("  (:  )");const o=hf||(n==null?void 0:n.managerId)||0;if(!o&&(n==null?void 0:n.role)!=="super")return alert(" ");if(Yr){const f={...ze.find(p=>p.id===Yr),name:vl.trim(),date:Gc,time:Kc,managerId:o,stops:je.map(p=>({...p,visited:p.visited||!1}))};id(f),qc(null),alert(" !")}else{const u={id:Date.now(),name:vl.trim(),date:Gc,time:Kc,managerId:o,stops:je.map(f=>({...f,visited:!1})),status:"planned",createdAt:new Date().toISOString()};id(u),alert(" !")}yl(""),Ht([]),Yi(ar()),xl("09:00"),Xs((n==null?void 0:n.managerId)||null),ad(),localStorage.removeItem("bc_temp_route")},gv=o=>{if(o<0||o>=je.length)return;Yc(o);const u=je[o];u.lat&&u.lng&&te.current&&(te.current.setCenter(new naver.maps.LatLng(u.lat,u.lng)),te.current.setZoom(16))},BS=(o,u)=>{Yc(u),o.lat&&o.lng&&te.current&&(te.current.setCenter(new naver.maps.LatLng(o.lat,o.lng)),te.current.setZoom(16))},VS=(o,u)=>{const f=ze.find(w=>w.id===o);if(!f)return;const p=f.stops.find(w=>w.id===u),x=!(p!=null&&p.visited),v=f.stops.map(w=>w.id===u?{...w,visited:!w.visited}:w),b=v.every(w=>w.visited);if(id({...f,stops:v,status:b?"completed":"planned"}),x&&(p!=null&&p.name)){const w=oe.find(j=>j.name===p.name);w&&ks({...w,lastVisitDate:new Date().toISOString()})}(rn==null?void 0:rn.id)===o&&bs({...f,stops:v,status:b?"completed":"planned"})},HS=o=>{const u=ze.find(x=>x.id===o);if(!u)return;const f=u.stops.map(x=>({...x,visited:!0}));id({...u,stops:f,status:"completed"});const p=(u.stops||[]).filter(x=>x.name&&!oe.find(v=>v.name===x.name));p.forEach(x=>{const v={id:Date.now()+Math.random(),name:x.name,address:x.address||"",managerId:u.managerId,reaction:"positive",fromRoute:u.name,createdAt:new Date().toISOString()};ks(v)}),bs(null),p.length>0?alert(`  !
${p.length}   .`):alert("  !")},GS=o=>{if(!o.lat||!o.lng)return alert("    ");bs(null),ni("map"),setTimeout(()=>{if(!Re.current)return;KS(),Re.current.setCenter(new naver.maps.LatLng(o.lat,o.lng)),Re.current.setZoom(17);const u=new naver.maps.Marker({position:new naver.maps.LatLng(o.lat,o.lng),map:Re.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; padding: 8px 12px; border-radius: 20px; font-weight: bold; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white; white-space: nowrap;">${o.name}</div>`,anchor:new naver.maps.Point(50,20)}});Cf.current.push(u);const f=new naver.maps.Circle({map:Re.current,center:new naver.maps.LatLng(o.lat,o.lng),radius:100,fillColor:"#14b8a6",fillOpacity:.2,strokeColor:"#d97706",strokeWeight:2});qr.current.push(f)},300)},KS=()=>{B0.current.forEach(o=>o.setMap(null)),B0.current=[],Cf.current.forEach(o=>o.setMap(null)),Cf.current=[]},qS=o=>{const u=(o.stops||[]).filter(f=>f.lat&&f.lng);if(u.length===0)return alert("   ");ni("route"),setTimeout(()=>{if(te.current)if(js.current.forEach(f=>f.setMap(null)),js.current=[],Cs.current.forEach(f=>f.setMap(null)),Cs.current=[],u.forEach((f,p)=>{const x=new naver.maps.Marker({position:new naver.maps.LatLng(f.lat,f.lng),map:te.current,icon:{content:`<div style="background: linear-gradient(135deg, #00C73C, #00a832); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 13px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">${p+1}</div>`,anchor:new naver.maps.Point(14,14)}});js.current.push(x)}),u.length>=2){const f=u.map(v=>new naver.maps.LatLng(v.lat,v.lng)),p=new naver.maps.Polyline({map:te.current,path:f,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.8,strokeStyle:"solid"});Cs.current.push(p);const x=new naver.maps.LatLngBounds;u.forEach(v=>x.extend(new naver.maps.LatLng(v.lat,v.lng))),te.current.fitBounds(x,{padding:50})}else te.current.setCenter(new naver.maps.LatLng(u[0].lat,u[0].lng)),te.current.setZoom(15)},300)},kl=(o,u)=>{if(!o)return;const f={isOnline:u,lastSeen:new Date().toISOString()};re.ref("userStatus/"+o).set(f)},xv=async()=>{try{const o=r.includes("@")?r:`${r}@beancraft.com`,f=(await ln.auth().signInWithEmailAndPassword(o,l)).user;let p=null;const x=o.split("@")[0];if(x==="admin")p={name:"admin",role:"super",email:f.email};else{const b=(await re.ref("managers").once("value")).val(),j=(b?Object.values(b):[]).find(D=>D.username===x||D.email===o);if(j){let D=j.name;const P=Td.find(A=>A.username===x||A.id===j.id);P&&(!j.name||j.name.length<2||j.name.includes(""))&&(D=P.name,console.log(`[]   : ${j.name} -> ${D}`),re.ref("managers/"+j.id).update({name:D})),p={name:D,role:"manager",managerId:j.id,username:j.username,email:f.email}}else p={name:x,role:"manager",email:f.email}}s(p),e(!0),setTimeout(()=>{s(v=>v&&{...v})},150),p.managerId&&Xs(p.managerId),localStorage.setItem("bc_session",JSON.stringify({user:p,expiry:Date.now()+6*60*60*1e3})),d?localStorage.setItem("bc_remember_login",JSON.stringify({id:r,pw:l,expiry:Date.now()+30*24*60*60*1e3})):localStorage.removeItem("bc_remember_login"),p.managerId&&kl(p.managerId,!0)}catch(o){console.error(" :",o),o.code==="auth/user-not-found"?alert("  "):o.code==="auth/wrong-password"?alert("  "):o.code==="auth/invalid-email"?alert("   "):alert(" : "+o.message)}},YS=async()=>{n!=null&&n.managerId&&kl(n.managerId,!1);try{await ln.auth().signOut()}catch{}e(!1),s(null),localStorage.removeItem("bc_session"),Re.current=null,te.current=null,Kh([]),Nc(null),Gi(null)};_.useEffect(()=>{const o=()=>{n!=null&&n.managerId&&re.ref("userStatus/"+n.managerId).set({isOnline:!1,lastSeen:new Date().toISOString()})};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[n]),_.useEffect(()=>{if(!(n!=null&&n.managerId))return;const o=setInterval(()=>{kl(n.managerId,!0)},6e4);return()=>clearInterval(o)},[n]);const vv=async()=>{if(!Jn.trim())return alert("  ");if(Jn!==$c)return alert("  ");if(Jn.length<6)return alert(" 6  ");try{const o=ln.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(Jn),qh(!1),Uc(""),Wc(""),alert(" ")}catch(o){console.error("  :",o),o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}},yv=async()=>{if(N0){if(!ml.trim())return alert("  ");if(ml!==A0)return alert("  ");if(ml.length<6)return alert(" 6  ");try{const o=ln.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(ml),Yh(!1),P0(""),O0(""),alert("  ")}catch(o){o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}}else{if(!Jn.trim())return alert("  ");if(Jn!==$c)return alert("  ");if(Jn.length<6)return alert(" 6  ");try{const o=ln.auth().currentUser;if(!o)return alert(" ");await o.updatePassword(Jn),Uc(""),Wc(""),alert("  ")}catch(o){o.code==="auth/requires-recent-login"?alert("     "):alert("  : "+o.message)}}},_v=async()=>{if(!se.name.trim())return alert(" ");let o=null,u=null;if(se.address){const b=await $f(se.address,se.name);b&&(o=b.lat,u=b.lng)}const f=Dn?se.managerId:n==null?void 0:n.managerId,p={id:Date.now(),...se,managerId:f,lat:o,lng:u,isReregistered:se.isReregistered||!1,usedMents:m0,mentMemo:pC,createdAt:new Date().toLocaleString("ko-KR")};ks(p);const x=se.reaction==="positive"||se.reaction==="special";m0.forEach(b=>fS(b,x));const v=ob[Math.floor(Math.random()*ob.length)];if(Jh({companyName:se.name,quote:v}),se.reaction==="positive"||se.reaction==="special"){const b=new Date;b.setDate(b.getDate()+1);const w=b.toISOString().split("T")[0],j={id:Date.now()+1,date:w,title:`${se.name}`,managerId:f,memo:`, .    .    ?

: ${se.contact||"-"}
: ${se.phone||"-"}
: ${se.address||"-"}`,type:"followup",companyId:p.id};Mf(j);const D=new Date;D.setMonth(D.getMonth()+1);const P=D.toISOString().split("T")[0],A={id:Date.now()+2,date:P,title:`${se.name}`,managerId:f,memo:`, . .      ?

: ${se.contact||"-"}
: ${se.phone||"-"}
: ${se.address||"-"}`,type:"followup",companyId:p.id};Mf(A)}rt({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),rS(""),fC([]),mC("")},QS=async()=>{if(!Nt)return;let o={...Nt};if(o.address&&(!o.lat||!o.lng)){const u=await $f(o.address,o.name);u&&(o.lat=u.lat,o.lng=u.lng)}ks(o),ut(null)},bv=o=>{Ji({type:"company",id:o.id,name:o.name})},JS=()=>{if(!lf.trim())return alert(" ");const o=lf.split(`
`).map(f=>f.trim()).filter(f=>f),u=[];o.forEach(f=>{const p=f.split("/").map(A=>A.trim());if(p.length<1||!p[0])return;const[x,v,b,w,j]=p;let D=T0;j&&(j===""?D="negative":j===""?D="neutral":j===""?D="positive":j===""&&(D="special"));const P=w||AC||"";u.push({name:x,contact:v||"",phone:b||"",managerId:k0,region:P,address:P,reaction:D})}),u.forEach((f,p)=>{const x={id:Date.now()+p,...f,createdAt:new Date().toLocaleString("ko-KR")};ks(x)}),I0(""),E0(null),OC(""),DC(""),R0("neutral"),kc(!1),alert(`${u.length}  .`)},XS=()=>{if(!Gt.name.trim())return alert(" ");const o={id:Date.now(),...Gt,createdAt:new Date().toLocaleString("ko-KR")};Y0(o),ei({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""})},ZS=()=>{ht&&(Y0(ht),yn(null))},eI=()=>{if(!On.managerId||!On.amount)return alert("  ");const o={id:Date.now(),...On,amount:Number(On.amount),date:On.date||ar()};Q0(o),rd({managerId:null,companyId:null,amount:"",date:"",note:""}),Ac(!1)},tI=o=>Hc.filter(u=>u.managerId===o).reduce((u,f)=>u+f.amount,0),nI=()=>{const o=Object.entries(of).filter(([f,p])=>p).map(([f])=>f);if(o.length===0)return alert("  ");const u={id:Date.now(),managerId:n.managerId,managerName:n.name,items:o,timestamp:new Date().toLocaleString("ko-KR"),status:"pending"};J0(u),cf({:!1,:!1,:!1,:!1}),Tc(null),alert(" .")},sI=o=>{const u=M0.find(f=>f.id===o);u&&J0({...u,status:"confirmed"})},rI=(o,u,f)=>{const p=String(f).replace(/^0+/,"")||"0",x=ye.find(v=>v.id===o);x&&Of({...x,promo:{...x.promo,[u]:Number(p)||0}})},nr=Pf.trim()?oe.filter(o=>ID(o.name,Pf)):oe,Dn=(n==null?void 0:n.role)==="super",El=M0.filter(o=>o.status==="pending"),iI=()=>ye,aI=o=>{if(!o)return"";const u=new Date(o),p=new Date-u,x=Math.floor(p/6e4),v=Math.floor(p/36e5),b=Math.floor(p/864e5);return x<1?" ":x<60?`${x} `:v<24?`${v} `:b<7?`${b} `:u.toLocaleDateString("ko-KR")};if(!t){const o={transition:"opacity 1.5s ease-in-out, transform 1.5s ease-in-out",willChange:"opacity, transform"};return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 login-gradient-bg overflow-hidden",children:i.jsxs("div",{className:"w-full max-w-md relative",style:{minHeight:"500px"},children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...o,opacity:I==="quote"?1:0,transform:I==="quote"?"translateY(0)":"translateY(-30px)",pointerEvents:I==="quote"?"auto":"none"},children:i.jsxs("p",{className:"text-slate-300 text-sm sm:text-base font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto text-center",style:{wordBreak:"keep-all"},children:['"',y,'"']})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...o,opacity:I==="logo"?1:0,transform:I==="logo"?"scale(1)":I==="quote"?"scale(0.9)":"scale(1.05)",pointerEvents:I==="logo"?"auto":"none"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-40 h-40 sm:w-56 sm:h-56 mx-auto mb-4 object-contain"}),i.jsx("p",{className:"text-slate-200 text-base sm:text-lg tracking-widest font-semibold",children:" "})]})}),i.jsxs("div",{className:"absolute inset-0",style:{...o,opacity:I==="form"?1:0,transform:I==="form"?"translateY(0)":"translateY(50px)",pointerEvents:I==="form"?"auto":"none"},children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-28 h-28 sm:w-40 sm:h-40 mx-auto mb-3 object-contain"}),i.jsx("p",{className:"text-slate-200 text-sm sm:text-base tracking-widest font-semibold",children:" "})]}),i.jsx("div",{className:"text-center mb-5 px-4",children:i.jsxs("p",{className:"text-slate-300 text-xs sm:text-sm font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto",style:{wordBreak:"keep-all"},children:['"',y,'"']})}),i.jsxs("div",{className:"bg-slate-900/80 rounded-xl p-4 sm:p-6 shadow-xl border border-slate-700",children:[i.jsx("input",{type:"text",placeholder:"",value:r,onChange:u=>a(u.target.value),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),i.jsx("input",{type:"password",placeholder:"",value:l,onChange:u=>c(u.target.value),onKeyPress:u=>u.key==="Enter"&&xv(),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),i.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm mb-4 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:d,onChange:u=>h(u.target.checked),className:"w-4 h-4 rounded accent-primary-500"}),"  "]}),i.jsx("button",{type:"button",onClick:xv,className:"w-full p-3 bg-[#1e3a5f] hover:bg-[#264a73] text-white rounded-lg font-semibold transition-all text-sm",children:""})]})]})]})})}const lI=[{key:"sales",icon:"",label:""},{key:"report",icon:"",label:""},{key:"calendar",icon:"",label:""},{key:"route",icon:"",label:""},{key:"map",icon:"",label:""},{key:"managers",icon:"",label:""},{key:"companies",icon:"",label:""},{key:"realtors",icon:"",label:""},{key:"customers",icon:"",label:""},...Dn?[]:[{key:"requests",icon:"",label:""}],{key:"settings",icon:"",label:""}];return i.jsxs("div",{className:`min-h-screen pb-6 ${yC==="dark"?"bg-black":"bg-slate-50"}`,children:[i.jsxs("div",{className:"bg-slate-800 border-b border-slate-600 px-4 py-3 flex justify-between items-center sticky top-0 z-50 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-semibold text-slate-200 text-sm tracking-wide",children:"BEANCRAFT"})]}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Dn&&El.length>0&&i.jsx("span",{className:"bg-rose-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:El.length}),i.jsx("span",{className:"text-sm text-slate-200 bg-slate-700 px-2 py-1 rounded-lg font-medium",children:((wv=ye.find(o=>o.id===(n==null?void 0:n.managerId)))==null?void 0:wv.name)||(n==null?void 0:n.name)}),i.jsx("button",{type:"button",onClick:YS,className:"text-slate-200 hover:text-rose-500 text-sm font-medium transition-colors",children:""})]})]}),i.jsx("div",{className:"bg-slate-800 border-b border-slate-600 tabs-container scrollbar-hide",children:i.jsx("div",{className:"flex justify-start sm:justify-center min-w-max px-2",children:lI.map(o=>i.jsx("button",{onClick:()=>ni(o.key),className:`tab-btn ${R===o.key?"active":""}`,children:o.label},o.key))})}),$h&&i.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-lg",children:""})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",$h.count,""]}),i.jsx("p",{className:"text-white/80 text-xs",children:$h.preview})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{ni("calendar"),Nc(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:" "}),i.jsx("button",{onClick:()=>Nc(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),g0&&i.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-lg",children:""})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-white font-bold text-sm",children:["  ",g0.count,""]}),i.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{ni("calendar"),Gi(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),i.jsx("button",{onClick:()=>Gi(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),Qc&&i.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-pink-600 px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-lg",children:""})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",Qc.count,""]}),i.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{Qc.companies[0],alert(`[  ]

${Qc.companies.map((o,u)=>`${u+1}. ${o.name}
   : ${o.address||""}
   : ${o.issue}`).join(`

`)}

     .`)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),i.jsx("button",{onClick:()=>gf(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),i.jsxs("div",{className:"p-3 sm:p-4 max-w-6xl mx-auto",children:[R==="report"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[i.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),i.jsx("div",{className:"flex gap-2",children:Dn?i.jsxs("select",{className:"select-premium text-sm py-2",value:B||"all",onChange:o=>J(o.target.value==="all"?null:o.target.value),children:[i.jsx("option",{value:"all",children:" "}),ye.filter(o=>o.role!=="super").map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>J(n==null?void 0:n.id),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${!B||B===(n==null?void 0:n.id)?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>J("all"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${B==="all"?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "})]})})]}),i.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800 rounded-xl w-fit",children:[i.jsx("button",{onClick:()=>Te("basic"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${Z==="basic"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:" "}),i.jsx("button",{onClick:()=>{var o;if(Te("ai"),!Cc){dl(null);const u=new Date,f=u.getMonth(),p=u.getFullYear(),x=B==="all"||!B?null:Number(B),v=x?oe.filter(j=>j.managerId===x):oe,w=ze.filter(j=>{const D=new Date(j.date);return D.getMonth()===f&&D.getFullYear()===p&&(!x||j.managerId===x)}).reduce((j,D)=>{var P;return j+(((P=D.stops)==null?void 0:P.length)||0)},0);Hh({managerName:x?((o=ye.find(j=>j.id===x))==null?void 0:o.name)||"":" ",thisVisits:w,visitChange:0,newCompanies:oe.filter(j=>j.createdAt&&new Date(j.createdAt).getMonth()===f&&(!x||j.managerId===x)).length,consults:Vc.filter(j=>j.status==="completed"&&j.createdAt&&new Date(j.createdAt).getMonth()===f).length,positiveRate:Math.round(v.filter(j=>j.reaction==="positive").length/Math.max(v.length,1)*100),positive:v.filter(j=>j.reaction==="positive").length,special:v.filter(j=>j.reaction==="special").length,neutral:v.filter(j=>j.reaction==="neutral").length,missed:v.filter(j=>j.reaction==="missed").length})}},className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${Z==="ai"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:"AI "})]})]}),Z==="basic"&&(()=>{const o=new Date,u=o.getMonth(),f=o.getFullYear(),p=u===0?11:u-1,x=u===0?f-1:f,v=B==="all"||!B?null:Number(B),b=ze.filter(G=>{const ae=new Date(G.date),Ie=ae.getMonth()===u&&ae.getFullYear()===f,Ne=!v||G.managerId===v;return Ie&&Ne}),w=oe.filter(G=>{if(!G.createdAt||G.isReregistered)return!1;const ae=new Date(G.createdAt),Ie=ae.getMonth()===u&&ae.getFullYear()===f,Ne=!v||G.managerId===v;return Ie&&Ne}),j=ze.filter(G=>{const ae=new Date(G.date),Ie=ae.getMonth()===p&&ae.getFullYear()===x,Ne=!v||G.managerId===v;return Ie&&Ne}),D=oe.filter(G=>{if(!G.createdAt||G.isReregistered)return!1;const ae=new Date(G.createdAt),Ie=ae.getMonth()===p&&ae.getFullYear()===x,Ne=!v||G.managerId===v;return Ie&&Ne}),P=b.reduce((G,ae)=>{var Ie;return G+(((Ie=ae.stops)==null?void 0:Ie.length)||0)},0),A=j.reduce((G,ae)=>{var Ie;return G+(((Ie=ae.stops)==null?void 0:Ie.length)||0)},0),M=w.length,H=D.length,ce=v?oe.filter(G=>G.managerId===v):oe,k=ce.filter(G=>G.reaction==="positive"||G.reaction==="special").length,de=ce.length>0?Math.round(k/ce.length*100):0,$=Math.max(0,de-Math.floor(Math.random()*10)+5),V=b.reduce((G,ae)=>{var Ie,Ne;return G+(((Ne=(Ie=ae.stops)==null?void 0:Ie.filter(tt=>tt.visited))==null?void 0:Ne.length)||0)},0),q=j.reduce((G,ae)=>{var Ie,Ne;return G+(((Ne=(Ie=ae.stops)==null?void 0:Ie.filter(tt=>tt.visited))==null?void 0:Ne.length)||0)},0),z=(G,ae)=>ae===0?G>0?100:0:Math.round((G-ae)/ae*100),E=z(P,A),O=z(M,H),ue=z(V,q),me=de-$,sr=(()=>{var tt;const G=v?((tt=ye.find(Zn=>Zn.id===v))==null?void 0:tt.name)||"":" ";let ae="",Ie="",Ne="";return ae=`${G} :    ${P},   ${E>=0?"+":""}${E}%`,Ne=`  ${M} |   ${V} |   ${de}%`,E>=0?Ie="     .":Ie="   .",{comment:ae,suggestion:Ie,analysis:Ne}})(),ia=G=>{const ae=new Date(f,u-G,1),Ie=ae.getMonth(),Ne=ae.getFullYear();return ze.filter(tt=>{const Zn=new Date(tt.date),ft=Zn.getMonth()===Ie&&Zn.getFullYear()===Ne,Ce=!v||tt.managerId===v;return ft&&Ce}).reduce((tt,Zn)=>{var ft;return tt+(((ft=Zn.stops)==null?void 0:ft.length)||0)},0)},aa=["1","2","3","4","5","6","7","8","9","10","11","12"],ri=[{month:aa[(u-2+12)%12],visits:ia(2)},{month:aa[(u-1+12)%12],visits:ia(1)},{month:aa[u],visits:ia(0)}],Tl=Math.max(...ri.map(G=>G.visits),1),ii=ye.filter(G=>G.role!=="super").map(G=>{const Ie=b.filter(ft=>ft.managerId===G.id).reduce((ft,Ce)=>{var ai;return ft+(((ai=Ce.stops)==null?void 0:ai.length)||0)},0),Ne=oe.filter(ft=>ft.managerId===G.id),tt=Ne.filter(ft=>ft.reaction==="positive"||ft.reaction==="special").length,Zn=Ne.length>0?Math.round(tt/Ne.length*100):0;return{...G,visits:Ie,positiveRate:Zn,newCompanies:w.filter(ft=>ft.managerId===G.id).length}}).sort((G,ae)=>ae.visits-G.visits);return i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("div",{className:"text-slate-500 text-xs mb-1",children:""}),i.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[P,i.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),i.jsxs("div",{className:`text-xs mt-1 ${E>=0?"text-emerald-400":"text-rose-400"}`,children:[E>=0?"":""," ",Math.abs(E),"%"]})]}),i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),i.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[M,i.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),i.jsxs("div",{className:`text-xs mt-1 ${O>=0?"text-emerald-400":"text-rose-400"}`,children:[O>=0?"":""," ",Math.abs(O),"%"]})]}),i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),i.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[V,i.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),i.jsxs("div",{className:`text-xs mt-1 ${ue>=0?"text-emerald-400":"text-rose-400"}`,children:[ue>=0?"":""," ",Math.abs(ue),"%"]})]}),i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),i.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[de,i.jsx("span",{className:"text-sm text-slate-500 ml-1",children:"%"})]}),i.jsxs("div",{className:`text-xs mt-1 ${me>=0?"text-emerald-400":"text-rose-400"}`,children:[me>=0?"":""," ",Math.abs(me),"%p"]})]})]}),i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),i.jsx("div",{className:"flex items-end gap-4 h-32",children:ri.map((G,ae)=>i.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[i.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[G.visits,""]}),i.jsx("div",{className:"w-full rounded-t transition-all duration-500 bg-slate-600",style:{height:`${Math.max(G.visits/Tl*100,8)}%`,background:ae===ri.length-1?"#475569":"#334155"}}),i.jsx("div",{className:"text-xs text-slate-400 mt-2",children:G.month})]},ae))})]}),i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),i.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"positive",label:"",count:ce.filter(G=>G.reaction==="positive").length},{key:"special",label:"",count:ce.filter(G=>G.reaction==="special").length},{key:"neutral",label:"",count:ce.filter(G=>G.reaction==="neutral").length},{key:"missed",label:"",count:ce.filter(G=>G.reaction==="missed").length}].map(G=>i.jsxs("div",{className:"text-center p-3 rounded-xl border border-slate-600",children:[i.jsx("div",{className:"text-xl font-bold text-slate-100",children:G.count}),i.jsx("div",{className:"text-xs text-slate-500",children:G.label})]},G.key))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"font-bold text-slate-100",children:"AI "}),i.jsx("button",{onClick:()=>{var ft;dl(null);const G=new Date,ae=G.getMonth(),Ie=G.getFullYear(),Ne=B==="all"||!B?null:Number(B),tt=Ne?oe.filter(Ce=>Ce.managerId===Ne):oe,Zn=ze.filter(Ce=>{const ai=new Date(Ce.date);return ai.getMonth()===ae&&ai.getFullYear()===Ie&&(!Ne||Ce.managerId===Ne)});Hh({managerName:Ne?((ft=ye.find(Ce=>Ce.id===Ne))==null?void 0:ft.name)||"":" ",thisVisits:Zn.reduce((Ce,ai)=>{var Ov;return Ce+(((Ov=ai.stops)==null?void 0:Ov.length)||0)},0),visitChange:0,newCompanies:oe.filter(Ce=>Ce.createdAt&&new Date(Ce.createdAt).getMonth()===ae&&(!Ne||Ce.managerId===Ne)).length,consults:Vc.filter(Ce=>Ce.status==="completed"&&Ce.createdAt&&new Date(Ce.createdAt).getMonth()===ae).length,positiveRate:Math.round(tt.filter(Ce=>Ce.reaction==="positive").length/Math.max(tt.length,1)*100),positive:tt.filter(Ce=>Ce.reaction==="positive").length,special:tt.filter(Ce=>Ce.reaction==="special").length,neutral:tt.filter(Ce=>Ce.reaction==="neutral").length,missed:tt.filter(Ce=>Ce.reaction==="missed").length})},disabled:Cc,className:"text-xs px-2 py-1 rounded-full border border-slate-600 text-slate-400 hover:border-slate-500 disabled:opacity-50",children:" "})]}),Cc?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-2",children:[i.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),i.jsx("span",{className:"text-slate-400 text-sm",children:"AI  ..."}),dt&&i.jsx("span",{className:"text-yellow-400 text-xs",children:dt})]}):dt&&!Vt?i.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[i.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"  "}),i.jsx("p",{className:"text-slate-300 text-sm",children:dt}),i.jsx("button",{onClick:()=>Xe(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:""})]}):Vt?i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsx("p",{className:"text-slate-300",children:Vt.comment}),Vt.analysis&&i.jsx("p",{className:"text-slate-400 text-xs",children:Vt.analysis}),i.jsx("div",{className:"pt-2 border-t border-slate-700",children:i.jsx("p",{className:"text-slate-400 text-xs",children:Vt.suggestion})}),vn&&i.jsxs("p",{className:"text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[" : ",vn.toLocaleString("ko-KR")]})]}):i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsx("p",{className:"text-slate-300",children:sr.comment}),sr.analysis&&i.jsx("p",{className:"text-slate-400 text-xs",children:sr.analysis}),i.jsx("div",{className:"pt-2 border-t border-slate-700",children:i.jsx("p",{className:"text-slate-400 text-xs",children:sr.suggestion})})]})]}),Dn&&(!B||B==="all")&&ii.length>0&&i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("h3",{className:"font-bold text-slate-200 mb-3",children:" "}),i.jsx("div",{className:"space-y-2",children:ii.slice(0,5).map((G,ae)=>i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:ae<3?["","",""][ae]:`${ae+1}`}),i.jsx("span",{className:"text-slate-200 text-sm",children:G.name})]}),i.jsxs("span",{className:"text-slate-400 text-sm",children:[G.visits,""]})]},G.id))})]})]})]})})(),Z==="ai"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"card p-4 border border-brand-purple/30 bg-brand-purple/5",children:[i.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""})," AI  ",i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:"NEW"})]}),i.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"   AI   ."}),i.jsxs("div",{className:"flex gap-2 mb-3",children:[i.jsx("input",{type:"text",value:Y,onChange:o=>he(o.target.value),onKeyPress:o=>o.key==="Enter"&&Sc(Y),placeholder:":  , , , ...",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-brand-purple"}),i.jsx("button",{onClick:()=>Sc(Y),disabled:Le||!Y.trim(),className:"px-5 py-3 bg-brand-purple text-white rounded-lg font-bold hover:bg-brand-purple/80 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Le?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"})," "]}):""})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:["","",""," "," ",""].map(o=>i.jsx("button",{onClick:()=>{he(o),Sc(o)},disabled:Le,className:"px-3 py-1.5 rounded-full bg-slate-700 text-slate-300 text-xs hover:bg-slate-600 transition-all disabled:opacity-50",children:o},o))}),Le&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[i.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),i.jsxs("span",{className:"text-slate-400 text-sm",children:['"',Y,'"  ...']})]}),dt&&!Le&&i.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 mb-3",children:i.jsx("p",{className:"text-red-400 text-sm",children:dt})}),ee&&!Le&&i.jsxs("div",{className:"space-y-3 mt-4 pt-4 border-t border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-bold text-slate-100 flex items-center gap-2",children:[i.jsxs("span",{className:"text-brand-purple",children:['"',ee.keyword,'"']}),"  "]}),i.jsx("span",{className:"text-xs text-slate-500",children:(Nv=ee.searchedAt)==null?void 0:Nv.toLocaleString("ko-KR")})]}),(ee.relatedCompaniesCount>0||ee.relatedRealtorsCount>0)&&i.jsxs("div",{className:"flex gap-3 text-xs",children:[ee.relatedCompaniesCount>0&&i.jsxs("span",{className:"px-2 py-1 rounded bg-emerald-500/20 text-emerald-400",children:["  ",ee.relatedCompaniesCount,""]}),ee.relatedRealtorsCount>0&&i.jsxs("span",{className:"px-2 py-1 rounded bg-blue-500/20 text-blue-400",children:["  ",ee.relatedRealtorsCount,""]}),ee.relatedIssuesCount>0&&i.jsxs("span",{className:"px-2 py-1 rounded bg-yellow-500/20 text-yellow-400",children:["  ",ee.relatedIssuesCount,""]})]}),i.jsx("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:i.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:ee.summary})}),((jv=ee.insights)==null?void 0:jv.length)>0&&i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),i.jsx("ul",{className:"space-y-1",children:ee.insights.map((o,u)=>i.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-400",children:""}),o]},u))})]}),((Cv=ee.salesTips)==null?void 0:Cv.length)>0&&i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"   "}),i.jsx("ul",{className:"space-y-1",children:ee.salesTips.map((o,u)=>i.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[i.jsxs("span",{className:"text-emerald-400",children:[u+1,"."]}),o]},u))})]}),((Sv=ee.actionItems)==null?void 0:Sv.length)>0&&i.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-brand-purple/30",children:[i.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"   "}),i.jsx("ul",{className:"space-y-1",children:ee.actionItems.map((o,u)=>i.jsxs("li",{className:"text-sm text-slate-300 flex items-start gap-2",children:[i.jsx("span",{className:"text-brand-purple",children:""}),o]},u))})]}),((Iv=ee.relatedTopics)==null?void 0:Iv.length)>0&&i.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[i.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),i.jsx("div",{className:"flex flex-wrap gap-2",children:ee.relatedTopics.map((o,u)=>i.jsx("button",{onClick:()=>{he(o),Sc(o)},className:"px-3 py-1.5 rounded-full bg-slate-700 text-slate-300 text-xs hover:bg-slate-600 transition-all",children:o},u))})]})]})]}),(()=>{var de;const o=B==="all"||!B?null:Number(B),u=o?oe.filter($=>$.managerId===o):oe,f=o?((de=ye.find($=>$.id===o))==null?void 0:de.name)||"":" ",p=u.filter($=>$.reaction==="positive"),x=u.filter($=>$.reaction==="special"),v=u.filter($=>$.reaction==="neutral"),b=u.filter($=>$.reaction==="missed"),w=u.map($=>$.memo||"").filter($=>$.length>0),j=["","","","","","","",""],D=["","","","","","",""];let P=0,A=0;w.forEach($=>{j.some(V=>$.includes(V))&&P++,D.some(V=>$.includes(V))&&A++});const H=(()=>{const $=u.length;if($===0)return{main:"   .   .",suggestion:"    .",analysis:"",encouragement:""};const V=Math.round((p.length+x.length)/$*100),q=Math.round(v.length/$*100),z=Math.round(b.length/$*100);let E="",O="",ue="",me="";return E=`${f} :  ${$}    ${p.length}(${V}%),  ${x.length},  ${v.length}(${q}%),  ${b.length}(${z}%)`,ue=`+: ${p.length+x.length} | : ${v.length} | : ${b.length}`,V>=50?(O="     .",me="   ."):V>=30?(O="     .",me=" ."):V>=10?(O="    .",me=" ."):(O="   .",me="  ."),z>30&&(O+=`  ${z}%    .`),x.length>0&&(O+=`  ${x.length}   .`),{main:E,suggestion:O,analysis:ue,encouragement:me}})(),k=(()=>{const $={:{cafeCount:2596,startupTrend:"+12%",avgRent:" 10~15",competition:" ( 15+)",targetCustomer:"30~40   ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:" 2,596  .   14.1%( 10.0% ).    ",smalltalkTip:"  2,596  .  14.1%  ,   52.6% 3  .     .",brokerMent:",   2,596  .  14%           .",customerMent:",   2,596,  14.1%  .        .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:2135,startupTrend:"+18%",avgRent:" 8~12",competition:"",targetCustomer:"20~30 MZ  ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:" 2,135  2.   18% .      2~3",smalltalkTip:"  2,135  2.   18%       2~3.    .",brokerMent:",               .     .",customerMent:",       2~3.          .",sourceUrl:"https://eventmoa.kr/2024%EB%85%84-%EC%84%9C%EC%9A%B8-%EC%B9%B4%ED%8E%98-%EC%8B%9C%EC%9E%A5-%ED%98%84%ED%99%A9/",sourceName:"2024     ( 2,135)"},:{cafeCount:1850,startupTrend:"+8%",avgRent:" 12~18",competition:"",targetCustomer:"30~50   ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:"   12~18   . /      ",smalltalkTip:"   12~18   . /     1.5  .",brokerMent:",    1.5  .              .",customerMent:",    1.5  .     ,  ,  .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:1720,startupTrend:"+15%",avgRent:" 8~12",competition:"",targetCustomer:"30~40  ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:"  .    40% . /   ",smalltalkTip:"       40% .     2        .",brokerMent:",        .             .",customerMent:",        40% . /       .",sourceUrl:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",sourceName:"IN:     "},:{cafeCount:1450,startupTrend:"+22%",avgRent:" 6~10",competition:"",targetCustomer:"20~40 ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:"  22%  .   .   1~2  ",smalltalkTip:"   22%  .      1~2 .  6     .",brokerMent:",      1~2 .              .",customerMent:",   .    ,   ,   .     .",sourceUrl:"https://www.kgnews.co.kr/news/article.html?no=822924",sourceName:":    "}," ":{cafeCount:1200,startupTrend:"+10%",avgRent:" 6~9",competition:"",targetCustomer:"30~50 ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:"IT .      .  2~5 ",smalltalkTip:" IT   .      ,  2~5 . / .",brokerMent:",  IT    .              .",customerMent:",  IT  .        .",sourceUrl:"https://blog.opensurvey.co.kr/trendreport/cafe-2024/",sourceName:":    2024"}," ":{cafeCount:850,startupTrend:"+25%",avgRent:" 4~7",competition:"",targetCustomer:"20~30  ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:" 12 , 2025     ",smalltalkTip:"  12  .     50% ( 4~7)   .        .",brokerMent:",   12     .             .",customerMent:",   12      .   ,   ,   .    .",sourceUrl:"https://www.bizhankook.com/bk/article/29822",sourceName:":    "}," ":{cafeCount:980,startupTrend:"+20%",avgRent:" 5~8",competition:"",targetCustomer:" + ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:" (7~8)    3.     2~3 ",smalltalkTip:"  (7~8)   3.    2~3  .  6    .",brokerMent:",   /   3.              .",customerMent:",   (7~8)   3.  6    .",sourceUrl:"https://gyver.co.kr/cafe-startup-market-analysis/",sourceName:" : 2025   "}," ":{cafeCount:620,startupTrend:"+15%",avgRent:" 3~5",competition:"",targetCustomer:" + ",teamPositive:u.filter(O=>O.reaction==="positive"&&(O.address||"").includes("")).length,teamTotal:u.filter(O=>(O.address||"").includes("")).length,issue:"  3~5   70% .   (12~2, 6~8)  50% ",smalltalkTip:"   3~5   70% .    (12~2, 6~8)  50% .",brokerMent:",      50% .              .",customerMent:",    (12~2, 6~8)  50% .      .",sourceUrl:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",sourceName:"KB:   "}},V=Object.keys($).map(O=>{const ue=$[O],me=ue.teamPositive*10+ue.teamTotal*2,ra=parseInt(ue.startupTrend)||0;return{region:O,...ue,score:me+ra,category:O.includes("")&&!O.includes("")?"":O.includes("")?"":""}}).sort((O,ue)=>ue.score-O.score),q=Vr%V.length,z=V[q],E=[];return z.teamPositive>0&&E.push(`   ${z.teamPositive}`),parseInt(z.startupTrend)>=15&&E.push(`   ${z.startupTrend} `),z.competition===""&&E.push("  "),{...z,aiReason:E.length>0?E:["   "],totalCount:V.length,currentIndex:q+1}})();return i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"card p-4 border border-slate-700/30",children:[i.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[i.jsx("span",{className:"text-xl"}),"     "]}),i.jsx("div",{className:"bg-transparent rounded-xl p-4 mb-4 border border-slate-700/50",children:i.jsxs("div",{className:"flex items-center justify-center gap-8",children:[i.jsxs("div",{className:"relative w-32 h-32",children:[i.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:(()=>{const $=Math.max(u.length,1),V=[{value:p.length,color:"#10b981"},{value:x.length,color:"#f43f5e"},{value:v.length,color:"#f97316"},{value:b.length,color:"#eab308"}];let q=0;return V.map((z,E)=>{const O=z.value/$*100,ue=`${O} ${100-O}`,me=-q;return q+=O,i.jsx("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",strokeWidth:"3.5",stroke:z.color,strokeDasharray:ue,strokeDashoffset:me},E)})})()}),i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:u.length}),i.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),i.jsxs("span",{className:"text-xs text-slate-300",children:[" ",p.length," (",Math.round(p.length/Math.max(u.length,1)*100),"%)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),i.jsxs("span",{className:"text-xs text-slate-300",children:[" ",x.length," (",Math.round(x.length/Math.max(u.length,1)*100),"%)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),i.jsxs("span",{className:"text-xs text-slate-300",children:[" ",v.length," (",Math.round(v.length/Math.max(u.length,1)*100),"%)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),i.jsxs("span",{className:"text-xs text-slate-300",children:[" ",b.length," (",Math.round(b.length/Math.max(u.length,1)*100),"%)"]})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[i.jsxs("div",{className:"text-center p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:[i.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:p.length}),i.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg border border-rose-500/30 bg-rose-500/5",children:[i.jsx("div",{className:"text-xl sm:text-2xl font-bold text-rose-400",children:x.length}),i.jsx("div",{className:"text-xs text-slate-400",children:""})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg border border-orange-500/30 bg-orange-500/5",children:[i.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-400",children:v.length}),i.jsx("div",{className:"text-xs text-slate-400",children:""})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[i.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400",children:b.length}),i.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),i.jsx("div",{className:"space-y-3",children:Cc?i.jsxs("div",{className:"flex flex-col items-center justify-center py-6 gap-2",children:[i.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),i.jsx("span",{className:"text-slate-400 text-sm",children:"AI  ..."}),dt&&i.jsx("span",{className:"text-yellow-400 text-xs",children:dt})]}):dt&&!Vt?i.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/30",children:[i.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"  "}),i.jsx("p",{className:"text-slate-300 text-sm",children:dt}),i.jsx("button",{onClick:()=>Xe(null),className:"mt-2 text-xs text-slate-400 hover:text-white",children:""})]}):Vt?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:i.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:Vt.comment})}),Vt.analysis&&i.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[i.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"AI "}),i.jsx("p",{className:"text-sm text-slate-300",children:Vt.analysis})]}),i.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[i.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:"AI  "}),i.jsx("p",{className:"text-sm text-slate-300",children:Vt.suggestion})]}),Vt.encouragement&&i.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:i.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:Vt.encouragement})}),vn&&i.jsxs("p",{className:"text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[" : ",vn.toLocaleString("ko-KR")]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:i.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:H.main})}),H.analysis&&i.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[i.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"  "}),i.jsx("p",{className:"text-sm text-slate-300",children:H.analysis})]}),i.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[i.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:""}),i.jsx("p",{className:"text-sm text-slate-300",children:H.suggestion})]}),i.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:i.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:H.encouragement})})]})})]}),w.length>0&&i.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[i.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-xl"}),"   (",w.length,")"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-500/10",children:[i.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-400",children:P}),i.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg bg-slate-700/50",children:[i.jsx("div",{className:"text-lg sm:text-xl font-bold text-slate-400",children:A}),i.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),i.jsx("div",{className:"space-y-2",children:(()=>{const $=u.filter(z=>z.reaction==="positive"),V=u.filter(z=>z.reaction==="negative"),q=u.filter(z=>!z.reaction||z.reaction==="neutral");return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-emerald-400",children:" "}),i.jsxs("span",{className:"text-slate-300",children:[$.length," "]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-rose-400",children:" "}),i.jsxs("span",{className:"text-slate-300",children:[V.length," "]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsxs("span",{className:"text-slate-300",children:[q.length," "]})]})]})})()})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"  "}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-emerald-400 font-bold min-w-[60px]",children:""}),i.jsx("span",{className:"text-slate-300",children:'    ("  .  OOO.")'})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-400 font-bold min-w-[60px]",children:"1"}),i.jsx("span",{className:"text-slate-300",children:"    (   ,   )"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-400 font-bold min-w-[60px]",children:"1"}),i.jsx("span",{className:"text-slate-300",children:'     ("      ?")'})]})]})]}),P>0&&i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"    "}),i.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"     .   :"}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[i.jsx("li",{children:" 1        "}),i.jsx("li",{children:" 2    "}),i.jsx("li",{children:"     "})]})]}),k&&i.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[i.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"    "}),i.jsx("p",{className:"text-sm text-slate-300",children:k.issue||"   ."}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"   1    ."})]})]})]}),i.jsxs("div",{className:"card p-4 border border-slate-700 bg-transparent",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2 text-lg",children:[i.jsx("span",{className:"text-xl"})," AI  ",i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-medium ml-2",children:" "}),i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-700 text-slate-400 text-xs font-normal ml-1",children:"2024 "})]}),i.jsxs("div",{className:"flex gap-1 p-1 bg-slate-800 rounded-lg",children:[i.jsx("button",{onClick:()=>zi("single"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${Wi==="single"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""}),i.jsx("button",{onClick:()=>zi("list"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${Wi==="list"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""})]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",placeholder:"  (: , , )",value:Hr,onChange:$=>Bi($.target.value),className:"input-premium flex-1 text-sm"}),i.jsx("button",{onClick:()=>{if(!Hr.trim())return;const V=["","","","",""," "," "," "," "].findIndex(q=>q.includes(Hr.trim()));V>=0?(ps(V),zi("single"),Bi("")):alert("   .")},className:"btn-premium bg-brand-purple text-white px-4",children:""})]})}),Wi==="single"?i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"border border-slate-700/30 rounded-xl p-4 bg-transparent",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-brand-purple/20 text-brand-purple",children:k.category}),i.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:k.region})]}),i.jsxs("span",{className:"text-xs text-slate-500",children:[k.currentIndex,"/",k.totalCount]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-slate-700/30 mb-3",children:[i.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"AI    "}),i.jsx("div",{className:"flex flex-wrap gap-2",children:k.aiReason&&k.aiReason.map(($,V)=>i.jsx("span",{className:"px-2 py-1 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:$},V))})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[i.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[i.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[k.cafeCount||"-",""]}),i.jsx("div",{className:"text-xs text-slate-400",children:"  "})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[i.jsx("div",{className:"text-lg font-bold text-emerald-400",children:k.startupTrend||"-"}),i.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[i.jsx("div",{className:"text-lg font-bold text-yellow-400",children:k.avgRent||"-"}),i.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[i.jsx("div",{className:"text-lg font-bold text-orange-400",children:k.competition||"-"}),i.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),(k.teamTotal>0||k.teamPositive>0)&&i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 mb-3 cursor-pointer hover:bg-emerald-500/20 transition-all",onClick:()=>Dh(k.region),children:[i.jsxs("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:["   ",i.jsx("span",{className:"text-slate-500",children:"(  )"})]}),i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:k.teamTotal||0}),i.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-400",children:k.teamPositive||0}),i.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),k.teamTotal>0&&i.jsxs("div",{className:"text-center",children:[i.jsxs("span",{className:"text-lg sm:text-xl font-bold text-brand-purple",children:[Math.round(k.teamPositive/k.teamTotal*100)||0,"%"]}),i.jsx("span",{className:"text-xs text-slate-400 block",children:""})]})]})]})]}),k.issue&&i.jsxs("div",{className:"p-4 rounded-xl border border-yellow-500/30 bg-yellow-500/5",children:[i.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),i.jsx("p",{className:"text-sm text-slate-200",children:k.issue})]}),k.targetCustomer&&i.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/30 bg-blue-500/5",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),i.jsx("p",{className:"text-sm text-slate-200",children:k.targetCustomer})]}),k.brokerMent&&i.jsxs("div",{className:"p-4 rounded-xl border border-emerald-500/30 bg-emerald-500/5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),i.jsx("button",{onClick:$=>{const V=$.currentTarget;navigator.clipboard.writeText((Ki==null?void 0:Ki.brokerMent)||k.brokerMent),V.innerText="",V.classList.add("text-emerald-400"),setTimeout(()=>{V.innerText="",V.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600",children:""})]}),i.jsxs("p",{className:"text-sm text-slate-200 leading-relaxed",children:['"',(Ki==null?void 0:Ki.brokerMent)||k.brokerMent,'"']}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"    .   ."})]}),k.sourceUrl&&i.jsxs("a",{href:k.sourceUrl,target:"_blank",rel:"noopener",className:"flex items-center justify-between p-3 rounded-xl border border-slate-700/30 hover:bg-brand-purple/10 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-brand-purple"}),i.jsxs("span",{className:"text-sm text-brand-purple font-medium",children:[": ",k.sourceName||""]})]}),i.jsx("span",{className:"text-slate-500",children:""})]}),i.jsx("button",{onClick:()=>ps($=>$+1),className:"w-full py-3 rounded-xl bg-brand-purple/20 hover:bg-brand-purple/30 border border-slate-600 text-brand-purple font-medium transition-all",children:"    "})]}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:["","","","",""," "," "," "," "].map(($,V)=>{const q=$.includes("")&&!$.includes(""),z=$.includes(""),E=q?"":z?"":"";return i.jsx("div",{onClick:()=>{ps(V),zi("single")},className:"p-3 rounded-lg border border-slate-700/30 hover:border-slate-600 bg-transparent cursor-pointer transition-all",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-brand-purple/20 text-brand-purple",children:E}),i.jsx("span",{className:"text-sm font-medium text-slate-200",children:$})]}),i.jsx("span",{className:"text-slate-500",children:""})]})},V)})})]}),i.jsxs("div",{className:"card p-4 border-l-4 border-yellow-500",children:[i.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-xl"}),"   (",pe.length,")"]}),pe.length===0?i.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-500",children:[i.jsx("p",{className:"mb-2",children:"   ."}),i.jsx("p",{className:"text-xs",children:"      ."})]}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:pe.slice(0,10).map(($,V)=>i.jsxs("div",{className:"p-3 rounded-lg bg-transparent hover:bg-slate-700/50 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-400",children:$.||$.region||""}),i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-600 text-slate-300",children:$.||$.type||""})]}),i.jsx("p",{className:"text-sm text-slate-200 font-medium",children:$.||$.title}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[$.||$.source,"  ",$.||$.date]})]},$.id||V))})]}),i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsxs("h3",{className:"font-bold text-slate-100 mb-4 text-lg",children:[" ",i.jsx("span",{className:"text-xs text-slate-500 ml-2 font-normal",children:"   "})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-rose-400",children:"  14.1% ( )"}),i.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"  52.6% 3  "}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),i.jsx("p",{className:"text-sm text-slate-300",children:'" "   . "       " .'})]})]}),i.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-orange-400",children:"   2 "}),i.jsx("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),i.jsx("p",{className:"text-xs text-slate-500",children:" 3,200+,  2,500+   "}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),i.jsx("p",{className:"text-sm text-slate-300",children:'"   ,   15~50 5  900.   0."'})]})]}),i.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-blue-400",children:"   "}),i.jsx("a",{href:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"KB:   +    "}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),i.jsx("p",{className:"text-sm text-slate-300",children:'"   ,  ,   .       ."'})]})]}),i.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-yellow-400",children:"    1 "}),i.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),i.jsx("p",{className:"text-xs text-slate-500",children:", ,      "}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),i.jsx("p",{className:"text-sm text-slate-300",children:'"   ,            ."'})]})]})]}),i.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),i.jsx("p",{className:"text-sm text-slate-300",children:'  " "   .  "  " .      .'})]})]}),d0&&(()=>{const $=d0,V=oe.filter(z=>(z.address||"").includes($)),q=yc?V.filter(z=>(z.name||"").toLowerCase().includes(yc.toLowerCase())||(z.address||"").toLowerCase().includes(yc.toLowerCase())):V;return i.jsx("div",{className:"modal-overlay",onClick:()=>{Dh(null),Mh("")},children:i.jsxs("div",{className:"modal-content max-w-lg",onClick:z=>z.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-100",children:[$,"   (",V.length,")"]}),i.jsx("button",{type:"button",onClick:()=>{Dh(null),Mh("")},className:"text-slate-400 hover:text-white text-xl",children:""})]}),i.jsx("input",{type:"text",placeholder:"/ ",value:yc,onChange:z=>Mh(z.target.value),className:"input-premium w-full mb-4"}),i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:q.length===0?i.jsx("p",{className:"text-center text-slate-500 py-4",children:"   ."}):q.map(z=>{const E=pt[z.reaction]||pt.neutral;return i.jsxs("div",{className:"p-3 rounded-lg border border-slate-700 bg-slate-800/50",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-200",children:z.name}),i.jsx("p",{className:"text-xs text-slate-400",children:z.address})]}),i.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:E.bg+"30",color:E.bg},children:E.label})]}),z.memo&&i.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[": ",z.memo]})]},z.id)})})]})})})(),gs&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>c0(null),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl max-w-[95vw] sm:max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-slate-600",onClick:$=>$.stopPropagation(),children:[i.jsxs("div",{className:"sticky top-0 bg-slate-800 p-4 border-b border-slate-600 flex justify-between items-center",children:[i.jsxs("h3",{className:"font-bold text-lg text-white",children:[gs==="specialty"&&"   ",gs==="lowcost"&&"   ",gs==="differentiation"&&"  ",gs==="delivery"&&"/  "]}),i.jsx("button",{type:"button",onClick:()=>c0(null),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),i.jsxs("div",{className:"p-4 space-y-3 sm:space-y-4",children:[gs==="specialty"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:" ?"}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:" SCA()  80    "}),i.jsx("li",{children:" , ,    "}),i.jsx("li",{children:"      (  5,000~8,000)"})]})]}),i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:""}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:"       "}),i.jsx("li",{children:"  ,     "}),i.jsx("li",{children:"  ,      "})]})]}),i.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[i.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),i.jsx("p",{className:"text-xs text-slate-400",children:"  ,     :"}),i.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[i.jsx("li",{children:" (aT)   "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"    "})]})]})]}),gs==="lowcost"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"  "}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:"  1,500~2,000  "}),i.jsx("li",{children:"     "}),i.jsx("li",{children:"  : , ,  "})]})]}),i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-rose-400 font-semibold mb-2",children:""}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:"       "}),i.jsx("li",{children:" ,    "}),i.jsx("li",{children:"    "})]})]}),i.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[i.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),i.jsx("p",{className:"text-xs text-slate-400",children:" ,     :"}),i.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[i.jsx("li",{children:"   (franchise.ftc.go.kr)"}),i.jsx("li",{children:"    "})]})]})]}),gs==="differentiation"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-emerald-400 font-semibold mb-2",children:"  "}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:"    (, )"}),i.jsx("li",{children:"   (, )"}),i.jsx("li",{children:"   "})]})]}),i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:" "}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:" SNS  (,  )"}),i.jsx("li",{children:"   (, )"}),i.jsx("li",{children:"  "})]})]})]}),gs==="delivery"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"/"}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:" : , ,  "}),i.jsx("li",{children:"      "}),i.jsx("li",{children:"     "})]})]}),i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[i.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:"  "}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[i.jsx("li",{children:"     (   )"}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"   vs   "})]})]})]})]})]})})]})})(),i.jsxs("div",{className:"card p-4 border-2 border-rose-500/30",children:[i.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[i.jsx("span",{className:"text-xl"}),"    (  )"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{onClick:()=>Wh(vs==="closure"?null:"closure"),className:"p-4 rounded-xl border border-rose-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-rose-400 font-bold",children:"  "}),i.jsx("span",{className:"text-2xl font-black text-rose-400 ml-3",children:"14.1%"})]}),i.jsx("span",{className:"text-slate-500 text-lg",children:vs==="closure"?"":""})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (2018 ,  10.0% )"}),i.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"   3     "'})]}),vs==="closure"&&i.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),i.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     ?      .       .      ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),i.jsxs("p",{className:"text-sm text-slate-200",children:['",     ?  ',i.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),"    .       . ",i.jsx("span",{className:"text-emerald-400 font-semibold",children:"   "}),'  ."']})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:" "}),i.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText("  5    (/ ), /   ,      "),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),i.jsxs("p",{className:"text-sm text-slate-200",children:["  ",i.jsx("span",{className:"text-blue-400 font-semibold",children:"5   "})," (/ ), /   ,      "]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/30",children:[i.jsx("p",{className:"text-xs text-purple-400 font-semibold mb-2",children:"  TOP 3 ( )"}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"1:  "}),i.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"2:   "}),i.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"3:  "})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"  :   +  "})]}),i.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:":   14%,   "})]}),i.jsxs("div",{onClick:()=>Wh(vs==="survival"?null:"survival"),className:"p-4 rounded-xl border border-blue-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-400 font-bold",children:"  "}),i.jsx("span",{className:"text-lg font-bold text-blue-400 ml-2",children:" 1,050"}),i.jsx("span",{className:"text-slate-500 mx-2",children:"(10  1 )"})]}),i.jsx("span",{className:"text-slate-500 text-lg",children:vs==="survival"?"":""})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (   3,475 1/3)"}),i.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"     "'})]}),vs==="survival"&&i.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),i.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     1,050.  87.  .     ,       ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),i.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',i.jsx("span",{className:"text-emerald-400 font-semibold",children:" 1,050"}),".  87.  .   ",i.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),'  ,       ."']})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),i.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",     1,050.   3,475 1/3.     .     ,  ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),i.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',i.jsx("span",{className:"text-blue-400 font-semibold",children:" 1,050"}),".   3,475 1/3.     .    ",i.jsx("span",{className:"text-blue-400 font-semibold",children:" , "}),' ."']})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:[i.jsx("p",{className:"text-xs text-cyan-400 font-semibold mb-2",children:"   "}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[i.jsx("span",{children:"  500m   "}),i.jsx("span",{children:"  "}),i.jsx("span",{children:"   "}),i.jsx("span",{children:"   "})]})]}),i.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:"IN:      "})]}),i.jsxs("div",{onClick:()=>Wh(vs==="royalty"?null:"royalty"),className:"p-4 rounded-xl border border-yellow-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-yellow-400 font-bold",children:"  "}),i.jsx("span",{className:"text-2xl font-black text-yellow-400 ml-3",children:"6,900~1.3"})]}),i.jsx("span",{className:"text-slate-500 text-lg",children:vs==="royalty"?"":""})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    (/ )"}),i.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"    "'})]}),vs==="royalty"&&i.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),i.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",    . 1 15 ,   .      .         ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),i.jsxs("p",{className:"text-sm text-slate-200",children:['",    . ',i.jsx("span",{className:"text-emerald-400 font-semibold",children:"1 15 ,  "}),' .      .         ."']})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),i.jsx("button",{type:"button",onClick:o=>{o.stopPropagation();const u=o.currentTarget;navigator.clipboard.writeText(",   6,900~1.3.    .        ."),u.innerText="",u.classList.add("text-emerald-400"),setTimeout(()=>{u.innerText="",u.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),i.jsxs("p",{className:"text-sm text-slate-200",children:['",   ',i.jsx("span",{className:"text-blue-400 font-semibold",children:"6,900~1.3"}),'.    .        ."']})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[i.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[i.jsx("span",{children:"  : 6,900"}),i.jsx("span",{children:"  :  15"}),i.jsx("span",{children:"  : 1.3"}),i.jsx("span",{children:"  :  25"})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" , ,   / :   "})]})]})]})]}),i.jsxs("div",{className:"card p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:" vs   "}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-600",children:[i.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),i.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),i.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),i.jsxs("tbody",{className:"text-slate-300",children:[i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400 (15)"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"2~5 ( )"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:""})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"~   "}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-orange-400 font-medium",children:""}),i.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  150 + /"})]}),i.jsx("span",{className:"text-slate-300 font-bold",children:"6,900~1"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-orange-400 font-medium",children:""}),i.jsx("span",{className:"text-xs text-slate-500",children:" 300 +  150 + /"})]}),i.jsx("span",{className:"text-slate-300 font-bold",children:"5,500~8,000"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-orange-400 font-medium",children:""}),i.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  200 + /"})]}),i.jsx("span",{className:"text-slate-300 font-bold",children:"6,000~9,000"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-orange-400 font-medium",children:""}),i.jsx("span",{className:"text-xs text-slate-500",children:" 1,000 +  300 + /"})]}),i.jsx("span",{className:"text-slate-300 font-bold",children:"8,000~1.3"})]})]}),i.jsx("a",{href:"https://franchise.ftc.go.kr/mnu/00013/program/userRqst/list.do",target:"_blank",rel:"noopener",className:"flex items-center justify-center gap-2 mt-3 p-3 rounded-lg border border-brand-purple/50 bg-brand-purple/10 hover:bg-brand-purple/20 transition-all",children:i.jsx("span",{className:"text-sm text-brand-purple font-medium",children:"     "})}),i.jsx("p",{className:"text-xs text-slate-500 mt-3 text-center",children:"*    , ,    ."})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2",children:[i.jsx("span",{className:"text-xl"}),"    ",i.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full",children:""})]})}),i.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"     AI      ."}),i.jsxs("div",{className:"p-4 rounded-xl bg-transparent border border-slate-700 mb-4",children:[i.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"    "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("select",{value:zh,onChange:o=>x0(o.target.value),className:"w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm",children:[i.jsx("option",{value:"",children:" ?"}),i.jsx("option",{value:"broker",children:"  "}),i.jsx("option",{value:"broker-followup",children:" "}),i.jsx("option",{value:"franchise",children:"   "})]}),i.jsx("textarea",{value:Bh,onChange:o=>v0(o.target.value),placeholder:`    .

:     .   .`,className:"w-full px-3 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm resize-none h-24"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Vh("success"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${jc==="success"?"bg-emerald-500 text-white":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30"}`,children:"  "}),i.jsx("button",{onClick:()=>Vh("fail"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${jc==="fail"?"bg-rose-500 text-white":"bg-rose-500/20 text-rose-400 border border-rose-500/30 hover:bg-rose-500/30"}`,children:" "})]}),i.jsx("button",{type:"button",onClick:()=>{if(!zh||!Bh||!jc){alert(", ,   .");return}const o={id:Date.now(),situation:zh,memo:Bh,result:jc,timestamp:new Date().toISOString(),managerId:n==null?void 0:n.managerId,managerName:(n==null?void 0:n.name)||""};re.ref(`teamFeedbacks/${o.id}`).set(o),x0(""),v0(""),Vh(null),alert(" !")},className:"w-full px-4 py-3 rounded-lg bg-brand-purple text-white font-semibold hover:bg-brand-purple/80 transition-all",children:" "})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-300 font-semibold",children:"   ( 7)"}),cl&&cl.length>0?cl.slice(0,5).map((o,u)=>i.jsx("div",{className:`p-3 rounded-lg ${o.result==="success"?"bg-emerald-500/10 border border-emerald-500/30":"bg-rose-500/10 border border-rose-500/30"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-xs font-semibold ${o.result==="success"?"text-emerald-400":"text-rose-400"}`,children:o.result==="success"?"  ":"  "}),i.jsx("p",{className:"text-sm text-slate-200 mt-1",children:o.situation||" "}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:o.memo||" "})]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${o.result==="success"?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:o.result==="success"?"":""})]})},u)):i.jsxs("div",{className:"p-4 rounded-lg border border-slate-700 bg-slate-800/30 text-center",children:[i.jsx("p",{className:"text-slate-400 text-sm",children:"   ."}),i.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"   ."})]}),cl&&cl.length>=3&&i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),i.jsx("p",{className:"text-sm text-slate-300",children:"    ..."}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" 5   AI  ."})]})]})]})]})]})]}),R==="calendar"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>U0(new Date(Zs.getFullYear(),Zs.getMonth()-1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""}),i.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[Zs.getFullYear()," ",Zs.getMonth()+1,""]}),i.jsx("button",{onClick:()=>U0(new Date(Zs.getFullYear(),Zs.getMonth()+1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""})]}),i.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 mb-2",children:["","","","","","",""].map((o,u)=>i.jsx("div",{className:`text-center text-sm font-bold py-2 ${u===0?"text-rose-600":u===6?"text-primary-600":"text-slate-200"}`,children:o},o))}),i.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1",children:(()=>{const o=Zs.getFullYear(),u=Zs.getMonth(),f=new Date(o,u,1).getDay(),p=new Date(o,u+1,0).getDate(),x=ar(),v=[];for(let b=0;b<f;b++)v.push(i.jsx("div",{className:"h-24 sm:h-28"},`empty-${b}`));for(let b=1;b<=p;b++){const w=`${o}-${String(u+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`,j=ze.filter(H=>H.date===w),D=Lt.filter(H=>H.date===w),P=[...j.map(H=>({...H,itemType:"route"})),...D.map(H=>({...H,itemType:"event"}))];P.sort((H,ce)=>(H.time||"00:00").localeCompare(ce.time||"00:00"));const A=w===x,M=new Date(o,u,b).getDay();v.push(i.jsxs("div",{className:`h-24 sm:h-28 p-1 border rounded-lg overflow-hidden cursor-pointer transition-all hover:shadow-md ${A?"bg-slate-700 border-primary-300":"border-slate-600 hover:border-primary-300"}`,onClick:()=>{ff(w),ws({title:"",time:"09:00",memo:""}),Xi(null),Qr(!0)},children:[i.jsx("div",{className:`text-sm font-bold mb-1 ${M===0?"text-rose-600":M===6?"text-primary-600":"text-slate-200"}`,children:b}),i.jsxs("div",{className:"space-y-0.5 overflow-y-auto max-h-14",children:[P.slice(0,3).map((H,ce)=>{var k,de,$,V;if(H.itemType==="route"){const q=ye.find(z=>z.id===H.managerId);return i.jsxs("div",{onClick:z=>{z.stopPropagation(),bs(H)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight",style:{background:(q==null?void 0:q.color)||"#888"},title:`${(k=H.time)==null?void 0:k.slice(0,5)} ${H.name}`,children:[(de=H.time)==null?void 0:de.slice(0,5)," ",H.name]},`r-${H.id}`)}else{const q=ye.find(E=>E.id===H.managerId),z=H.managerId&&q?q.color:"#6b7280";return i.jsxs("div",{onClick:E=>{E.stopPropagation(),bl(H)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight cursor-pointer hover:opacity-80",style:{background:z},title:`${($=H.time)==null?void 0:$.slice(0,5)} ${H.title}`,children:[(V=H.time)==null?void 0:V.slice(0,5)," ",H.title]},`e-${H.id}`)}}),P.length>3&&i.jsxs("div",{className:"text-xs text-slate-200",children:["+",P.length-3,""]})]})]},b))}return v})()})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("p",{className:"font-bold text-slate-200 mb-3",children:"  "}),(()=>{const o=new Date,u=new Date(o);u.setDate(o.getDate()-o.getDay());const f=new Date(u);f.setDate(u.getDate()+6);const p=ze.filter(b=>{const w=new Date(b.date);return w>=u&&w<=f}).map(b=>({...b,itemType:"route"})),x=Lt.filter(b=>{const w=new Date(b.date);return w>=u&&w<=f}).map(b=>({...b,itemType:"event"})),v=[...p,...x].sort((b,w)=>{const j=new Date(b.date+" "+(b.time||"00:00")),D=new Date(w.date+" "+(w.time||"00:00"));return j-D});return v.length===0?i.jsx("p",{className:"text-center text-slate-200 py-4",children:"   "}):i.jsx("div",{className:"space-y-2",children:v.map(b=>{var w;if(b.itemType==="route"){const j=ye.find(P=>P.id===b.managerId),D=b.status==="completed";return i.jsxs("div",{onClick:()=>bs(b),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md ${D?"bg-emerald-900/30":"bg-slate-700"}`,children:[i.jsxs("div",{className:"text-center min-w-[40px]",children:[i.jsx("p",{className:"text-xs text-slate-200",children:new Date(b.date).toLocaleDateString("ko-KR",{weekday:"short"})}),i.jsx("p",{className:"font-bold text-slate-100",children:b.date.slice(8)})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:b.name}),i.jsxs("p",{className:"text-xs text-slate-200",children:[b.time||"","  ",((w=b.stops)==null?void 0:w.length)||0,""]})]}),j&&i.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white",style:{background:j.color},children:j.name})]},`r-${b.id}`)}else return i.jsxs("div",{onClick:()=>{ff(b.date),ws({title:b.title,time:b.time,memo:b.memo||""}),Xi(b.id),Qr(!0)},className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md bg-purple-50",children:[i.jsxs("div",{className:"text-center min-w-[40px]",children:[i.jsx("p",{className:"text-xs text-slate-200",children:new Date(b.date).toLocaleDateString("ko-KR",{weekday:"short"})}),i.jsx("p",{className:"font-bold text-slate-100",children:b.date.slice(8)})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:b.title}),i.jsxs("p",{className:"text-xs text-slate-200 break-words",children:[b.time||""," ",b.memo?` ${b.memo}`:""]})]}),i.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white bg-purple-500",children:""})]},`e-${b.id}`)})})})()]})]}),R==="route"&&i.jsx("div",{children:i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("p",{className:"text-sm text-slate-200 font-bold",children:Yr?"  ":" "}),Yr&&i.jsx("span",{className:"text-xs text-primary-600 bg-slate-700 px-2 py-1 rounded",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3",children:[i.jsx("input",{type:"text",placeholder:" (:  )",value:vl,onChange:o=>yl(o.target.value),className:"input-premium text-sm col-span-2"}),i.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("routeDateInput")).showPicker)==null?void 0:u.call(o)},children:i.jsx("input",{id:"routeDateInput",type:"date",value:Gc,onChange:o=>Yi(o.target.value),className:"input-premium text-sm w-full cursor-pointer"})}),i.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("routeTimeInput")).showPicker)==null?void 0:u.call(o)},children:i.jsx("input",{id:"routeTimeInput",type:"time",value:Kc,onChange:o=>xl(o.target.value),className:"input-premium text-sm w-full cursor-pointer"})})]}),i.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.jsxs("select",{value:hf||"",onChange:o=>Xs(Number(o.target.value)||null),className:"select-premium text-sm",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]})})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("div",{className:"flex justify-between items-center mb-3",children:i.jsx("p",{className:"font-bold text-slate-200",children:" "})}),i.jsxs("div",{className:"bg-slate-700 rounded-xl p-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex gap-2 flex-1",children:[i.jsx("input",{type:"text",placeholder:", ,  ",value:Zi,onChange:o=>xf(o.target.value),onKeyPress:o=>o.key==="Enter"&&Wf(),className:"input-premium text-sm",style:{flex:6}}),i.jsx("input",{type:"text",placeholder:" ()",value:vf,onChange:o=>yf(o.target.value),onKeyPress:o=>o.key==="Enter"&&Wf(),className:"input-premium text-sm",style:{flex:4}})]}),i.jsx("button",{onClick:Wf,disabled:$0,className:"btn-premium bg-slate-600 text-white text-sm px-4",children:$0?"...":""})]}),Ns.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-slate-700 rounded-lg border border-primary-300",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("p",{className:"text-xs text-primary-600 font-bold",children:["  (",Ns.length,"/10)"]}),i.jsx("div",{className:"flex gap-2",children:i.jsx("button",{onClick:()=>{jl([]),ov()},className:"text-xs text-rose-600",children:" "})})]}),i.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Ns.map((o,u)=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-700 rounded px-2 py-1",children:[i.jsxs("span",{className:"text-xs text-slate-200 truncate flex-1",children:[u+1,". ",o.name]}),i.jsx("button",{onClick:()=>DS(o.id),className:"ml-2 text-rose-600 hover:text-rose-600 text-xs",children:""})]},o.id))}),i.jsxs("button",{onClick:MS,className:"w-full mt-2 py-2 bg-primary-500 text-white rounded-lg text-sm font-bold",children:[Ns.length,"   "]})]}),i.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"       "})]})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("p",{className:"font-bold text-slate-200 mb-3",children:" "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:Nf,onChange:o=>W0(o.target.value),className:"select-premium text-sm",children:[i.jsx("option",{value:"",children:" "}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsx("optgroup",{label:"",children:i.jsx("option",{value:"",children:""})}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}),i.jsxs("optgroup",{label:"",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]})]}),i.jsx("input",{type:"number",placeholder:" (: 10)",value:Cl,onChange:o=>KC(o.target.value),className:"input-premium text-sm",min:"1",max:"50"})]}),i.jsx("input",{type:"text",placeholder:" /   (: , , OO)",value:Sl,onChange:o=>{z0(o.target.value),o.target.value&&W0("")},className:"input-premium text-sm"}),i.jsx("button",{onClick:()=>{const o=Sl||Nf;if(!o)return alert("   ");if(!Cl||Cl<1)return alert("   (1~50)");const u=v=>{if(!v)return null;const b=v.split(/\s+/);for(const w of b)if((w.endsWith("")||w.endsWith("")||w.endsWith(""))&&w.length>=2&&w.length<=10)return w;return null},f=o.replace(/\(.*\)/,""),p=Jr.filter(v=>{if(v.regions&&v.regions[f]||u(v.address)===f)return!0;if(Sl){const w=Sl.toLowerCase(),j=(v.name||v.officeName||v.realtorName||"").toLowerCase(),D=(v.address||"").toLowerCase();if(j.includes(w)||D.includes(w))return!0}return!1}).filter(v=>!Uf(v,oe)).filter(v=>!je.some(b=>b.name===(v.realtorName||v.officeName||v.name))).sort((v,b)=>(b.listings||b.listingCount||1)-(v.listings||v.listingCount||1)).slice(0,Math.min(Number(Cl),200));if(p.length===0)return alert(" /    .");const x=p.map(v=>({id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:v.realtorName||v.officeName||v.name,address:v.address||"",phone:v.cellPhone||v.phone||"",lat:null,lng:null,visited:!1,listings:v.listings||v.listingCount||1}));Ht(v=>[...v,...x]),z0(""),alert(""+x.length+"   !")},disabled:!Nf&&!Sl||!Cl,className:"w-full btn-premium bg-teal-900/300 text-white py-3 font-bold disabled:opacity-50",children:"  "}),i.jsx("p",{className:"text-xs text-slate-400",children:"*  ,    "})]})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-200",children:["  (",je.length,")"]}),kf&&i.jsxs("p",{className:"text-xs text-primary-400 mt-1",children:[" ",kf.distance,"km   ",kf.duration,""]})]}),i.jsxs("div",{className:"flex gap-2",children:[je.length>=2&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:FS,className:"text-xs text-primary-600 font-bold",children:""}),i.jsx("button",{type:"button",onClick:US,className:"text-xs text-primary-600 font-bold",children:" "})]}),je.length>0&&i.jsx("button",{type:"button",onClick:()=>{Ht([]),ad()},className:"text-xs text-rose-600",children:" "})]})]}),je.length===0?i.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:[i.jsx("p",{className:"text-2xl mb-2"}),i.jsx("p",{className:"text-sm",children:"/ "})]}):i.jsx("div",{className:"space-y-0 max-h-48 overflow-y-auto",children:je.map((o,u)=>{var x;const f=oe.find(v=>{var b;return v.name===o.name||v.address&&o.address&&v.address.includes((b=o.address)==null?void 0:b.split(" ").slice(0,3).join(" "))}),p=f?ye.find(v=>v.id===f.managerId):null;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-900 rounded-lg",children:[i.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-teal-500 to-teal-600 text-white flex items-center justify-center font-bold text-xs shadow flex-shrink-0",children:u+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[i.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:o.name}),p&&i.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:p.color},children:(x=p.name)==null?void 0:x.slice(0,1)})]}),o.address&&i.jsx("p",{className:"text-xs text-slate-200 break-words",children:o.address}),o.phone&&i.jsx("p",{className:"text-xs text-navy-300",children:o.phone})]}),i.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[u>0&&i.jsx("button",{type:"button",onClick:()=>cv(u,-1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),u<je.length-1&&i.jsx("button",{type:"button",onClick:()=>cv(u,1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),i.jsx("button",{type:"button",onClick:()=>LS(o.id),className:"w-6 h-6 rounded bg-rose-100 text-rose-600 text-xs",children:""})]})]}),u<je.length-1&&i.jsx("div",{className:"flex items-center pl-3 py-0.5",children:i.jsx("span",{className:"text-primary-600 text-sm",children:""})})]},o.id)})}),(je.length>0||Yr)&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-600",children:Yr?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:zS,className:"flex-1 btn-premium btn-outline py-3 font-bold",children:""}),i.jsx("button",{type:"button",onClick:mv,className:"flex-1 btn-premium btn-gold py-3 font-bold",children:" "})]}):i.jsx("button",{type:"button",onClick:mv,className:"w-full btn-premium btn-gold py-3 font-bold",children:" "})})]}),i.jsxs("div",{className:"card overflow-hidden",children:[i.jsx("div",{className:"p-3 border-b border-slate-600",children:je.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>gv(Qi-1),disabled:Qi<=0,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""}),i.jsx("div",{className:"flex-1 overflow-hidden",children:i.jsx("div",{className:"flex gap-2 transition-transform",style:{transform:`translateX(-${Qi*100}%)`},children:je.map((o,u)=>i.jsxs("button",{onClick:()=>BS(o,u),className:`flex-shrink-0 w-full px-3 py-2 rounded-lg text-sm font-bold transition-all ${Qi===u?"bg-slate-700 text-white":"bg-gray-100 text-slate-200"}`,children:[u+1,". ",o.name]},o.id))})}),i.jsx("button",{type:"button",onClick:()=>gv(Qi+1),disabled:Qi>=je.length-1,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{ref:Sf,className:"route-map-container"}),i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2 z-10",children:[i.jsx("button",{onClick:AS,className:`w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all ${ed?"bg-primary-500 text-white":"bg-slate-600 text-slate-200"}`,title:ed?"GPS ":"GPS "}),ed&&td&&i.jsx("button",{onClick:OS,className:"w-10 h-10 rounded-full bg-slate-600 shadow-lg flex items-center justify-center text-primary-600",title:"  "})]})]})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("p",{className:"font-bold text-slate-200",children:" "}),ze.length>0&&i.jsx("div",{className:"flex gap-2",children:Dc?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{if(Gr.length===0)return alert("  .");confirm(`${Gr.length}  ?`)&&(Gr.forEach(o=>X0(o)),Mc([]),Zh(!1),alert("  ."))},className:"px-3 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:[Gr.length," "]}),i.jsx("button",{onClick:()=>{Zh(!1),Mc([])},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-xs font-bold",children:""})]}):i.jsx("button",{onClick:()=>Zh(!0),className:"px-3 py-1 bg-rose-100 text-rose-600 rounded text-xs font-bold",children:" "})})]}),ze.length===0?i.jsx("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:i.jsx("p",{className:"text-sm",children:"  "})}):i.jsx("div",{className:"space-y-2",children:ze.sort((o,u)=>new Date(u.date)-new Date(o.date)).slice(0,50).map(o=>{const u=ye.find(b=>b.id===o.managerId),f=(o.stops||[]).filter(b=>b.visited).length,p=(o.stops||[]).length,x=o.status==="completed",v=Gr.includes(o.id);return i.jsxs("div",{className:`p-3 rounded-lg ${x?"bg-emerald-900/30":"bg-slate-700"} ${Dc&&v?"ring-2 ring-rose-400":""}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[Dc&&i.jsx("input",{type:"checkbox",checked:v,onChange:b=>{b.target.checked?Mc([...Gr,o.id]):Mc(Gr.filter(w=>w!==o.id))},className:"w-5 h-5 mt-1 accent-rose-500"}),i.jsx("div",{className:`w-9 h-9 rounded-lg text-white flex items-center justify-center font-bold text-sm flex-shrink-0 ${x?"bg-emerald-500":"bg-slate-700"}`,children:""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:o.name||o.date}),i.jsxs("p",{className:"text-xs text-slate-200",children:[o.date," ",o.time||"","  ",f,"/",p,""]}),u&&i.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-bold text-white",style:{background:u.color},children:u.name})]})]}),!Dc&&i.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-slate-700/30",children:[i.jsx("button",{type:"button",onClick:()=>pv(o),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),i.jsx("button",{type:"button",onClick:()=>bs(o),className:"px-3 py-1 bg-slate-700 rounded text-xs text-slate-200 border font-medium",children:""}),i.jsx("button",{onClick:()=>$S(o),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),!x&&i.jsx("button",{onClick:()=>WS(o),className:"px-3 py-1 bg-emerald-100 rounded text-xs text-emerald-700 font-medium",children:""}),i.jsx("button",{onClick:()=>Ji({type:"route",id:o.id,name:o.name||o.date}),className:"px-3 py-1 bg-rose-100 rounded text-xs text-rose-600 font-medium",children:""})]})]},o.id)})})]})]})}),R==="map"&&i.jsx("div",{children:i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsxs("div",{className:"bg-slate-900 rounded-xl p-3 mb-4",children:[i.jsx("p",{className:"text-amber-800 font-bold text-sm mb-2",children:"  "}),i.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[i.jsxs("span",{className:"text-slate-200",children:[" : ",i.jsx("b",{children:oe.length})]}),i.jsxs("span",{className:"text-emerald-600",children:[" : ",i.jsx("b",{children:oe.filter(o=>o.lat&&o.lng).length})]}),i.jsxs("span",{className:"text-slate-200 cursor-pointer hover:text-primary-600",onClick:()=>oe.filter(o=>!o.lat||!o.lng).length>0&&Rc(!0),children:[": ",i.jsx("b",{className:"underline",children:oe.filter(o=>!o.lat||!o.lng).length})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[i.jsxs("select",{value:Xr,onChange:o=>G0(o.target.value),className:"select-premium text-sm",children:[i.jsx("option",{value:"all",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsxs("select",{value:Zr,onChange:o=>K0(o.target.value),className:"select-premium text-sm",children:[i.jsx("option",{value:"all",children:" "}),i.jsx("option",{value:"special",children:""}),i.jsx("option",{value:"positive",children:""}),i.jsx("option",{value:"neutral",children:""}),i.jsx("option",{value:"negative",children:" "}),i.jsx("option",{value:"missed",children:""})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",placeholder:"/  (: , )",value:Ef,onChange:o=>eS(o.target.value),onKeyPress:o=>o.key==="Enter"&&av(),className:"input-premium flex-1 text-sm"}),i.jsx("button",{type:"button",onClick:av,className:"btn-premium btn-gold text-sm"})]}),i.jsxs("div",{className:"border-t border-slate-600 mt-4 pt-4",children:[i.jsx("p",{className:"text-sm text-slate-200 mb-2 font-bold",children:"   "}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-600 special-blink"})," "]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"})," "]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-400"})," "]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"})," "]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"})," "]})]}),i.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"      "})]})]}),i.jsx("div",{className:"card overflow-hidden",children:i.jsx("div",{ref:Bc,className:"map-container"})})]})}),R==="managers"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),i.jsx("button",{type:"button",onClick:()=>Ac(!0),className:"btn-premium btn-navy text-sm",children:" "})]}),ye.map(o=>{const u=oe.filter(E=>E.managerId===o.id),f=tI(o.id),p=Dn||(n==null?void 0:n.managerId)===o.id,x=u.filter(E=>E.reaction==="special"),v=u.filter(E=>E.reaction==="positive"),b=u.filter(E=>E.reaction==="neutral"),w=u.filter(E=>E.reaction==="negative"),j=new Date,P=u.filter(E=>E.reaction==="positive"||E.reaction==="special").map(E=>{const O=E.lastVisitDate?new Date(E.lastVisitDate):E.createdAt?new Date(E.createdAt):null,ue=O?Math.floor((j-O)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(ue)?0:ue,dateType:E.lastVisitDate?"":""}}).filter(E=>E.daysPassed>=7).sort((E,O)=>O.daysPassed-E.daysPassed),A=u.filter(E=>E.reaction==="missed").map(E=>{const O=E.createdAt?new Date(E.createdAt):null,ue=O?Math.floor((j-O)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(ue)?0:ue}}).sort((E,O)=>O.daysPassed-E.daysPassed),M=ar(),H=Lt.filter(E=>E.date===M&&E.managerId===o.id),ce=ze.filter(E=>E.date===M&&E.managerId===o.id),k=Pp(),de=new Date(k.year,k.month,k.day-k.dayOfWeek),$=new Date(k.year,k.month,k.day+(6-k.dayOfWeek)),V=E=>{const O=E.getFullYear(),ue=String(E.getMonth()+1).padStart(2,"0"),me=String(E.getDate()).padStart(2,"0");return`${O}-${ue}-${me}`},q=Lt.filter(E=>E.managerId===o.id&&E.date>=V(de)&&E.date<=V($)&&E.date!==M),z=ze.filter(E=>E.managerId===o.id&&E.date>=V(de)&&E.date<=V($)&&E.date!==M);return i.jsxs("div",{className:"card p-5",children:[i.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-xl text-white flex items-center justify-center font-bold text-xl shadow-lg",style:{background:`linear-gradient(135deg, ${o.color}, ${o.color}dd)`},children:o.name[0]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:o.name}),i.jsxs("p",{className:"text-sm text-slate-200",children:[" ",u.length,""]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:[f.toLocaleString(),i.jsx("span",{className:"text-sm font-normal",children:""})]}),p&&i.jsx("button",{onClick:()=>Oc({managerId:o.id,managerName:o.name,currentSales:f}),className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs font-bold hover:bg-emerald-200",children:""})]})})]}),i.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-xl p-4 mb-4",children:[i.jsx("p",{className:"font-bold text-slate-200 text-sm mb-3",children:" "}),i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-red-200",children:[i.jsx("p",{className:"text-lg font-bold text-rose-600",children:x.length}),i.jsx("p",{className:"text-xs text-red-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-green-200",children:[i.jsx("p",{className:"text-lg font-bold text-emerald-600",children:v.length}),i.jsx("p",{className:"text-xs text-green-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[i.jsx("p",{className:"text-lg font-bold text-orange-500",children:b.length}),i.jsx("p",{className:"text-xs text-orange-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[i.jsx("p",{className:"text-lg font-bold text-slate-200",children:w.length}),i.jsx("p",{className:"text-xs text-slate-200",children:""})]})]})]}),(H.length>0||ce.length>0)&&i.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-3 mb-4",children:[i.jsx("p",{className:"font-bold text-primary-600 text-sm mb-2",children:" "}),i.jsxs("div",{className:"space-y-1",children:[ce.map(E=>{var O;return i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"text-primary-600",children:""}),i.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.name," (",((O=E.stops)==null?void 0:O.length)||0,")"]})]},E.id)}),H.map(E=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"text-primary-600"}),i.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.title]})]},E.id))]})]}),P.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"bg-rose-900/30 border border-rose-200 rounded-xl p-3 mb-2",children:[i.jsxs("span",{className:"font-bold text-rose-700 text-sm",children:["  (",P.length,")"]}),i.jsx("span",{className:"text-xs text-rose-600 ml-2",children:"   7 "})]}),i.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[P.slice(0,10).map(E=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-rose-200 cursor-pointer hover:bg-rose-900/30",onClick:()=>{ut(E)},children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${E.reaction==="special"?"bg-rose-600":"bg-emerald-500"}`}),i.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),i.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[i.jsxs("span",{className:"text-xs text-rose-600 font-bold",children:[E.daysPassed,""]}),i.jsxs("span",{className:"text-xs text-rose-600 ml-1",children:["(",E.dateType,")"]})]})]},E.id)),P.length>10&&i.jsxs("p",{className:"text-xs text-rose-600 text-center",children:["+",P.length-10,""]})]})]}),A.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 mb-2",children:[i.jsxs("span",{className:"font-bold text-amber-600 text-sm",children:["  (",A.length,")"]}),i.jsx("span",{className:"text-xs text-yellow-500 ml-2",children:"  "})]}),i.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[A.slice(0,10).map(E=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-amber-200 cursor-pointer hover:bg-amber-900/30",onClick:()=>{ut(E)},children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 bg-yellow-500"}),i.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),i.jsxs("span",{className:"text-xs text-amber-600 flex-shrink-0 ml-2",children:[E.daysPassed,""]})]},E.id)),A.length>10&&i.jsxs("p",{className:"text-xs text-yellow-400 text-center",children:["+",A.length-10,""]})]})]}),(q.length>0||z.length>0)&&i.jsxs("details",{className:"mb-4",children:[i.jsxs("summary",{className:"bg-slate-700 border border-primary-300 rounded-xl p-3 cursor-pointer",children:[i.jsxs("span",{className:"font-bold text-primary-600 text-sm",children:["    (",q.length+z.length,")"]}),i.jsx("span",{className:"text-xs text-primary-600 ml-2",children:" "})]}),i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:[...z.map(E=>({...E,type:"route"})),...q.map(E=>({...E,type:"event"}))].sort((E,O)=>E.date.localeCompare(O.date)||(E.time||"").localeCompare(O.time||"")).map((E,O)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm bg-slate-700 p-2 rounded-lg border border-primary-200",children:[i.jsx("span",{className:"text-primary-600",children:E.type==="route"?"":""}),i.jsx("span",{className:"text-xs text-blue-400 font-bold",children:E.date.slice(5)}),i.jsxs("span",{className:"text-blue-800 truncate",children:[E.time||""," ",E.type==="route"?E.name:E.title]})]},O))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-2",children:[i.jsx("span",{className:"font-bold text-slate-200 text-sm",children:"  "}),p&&i.jsx("button",{type:"button",onClick:()=>{Tc(o),cf({:!1,:!1,:!1,:!1})},className:"ml-3 px-3 py-1 bg-rose-500 rounded-lg font-bold text-xs text-white",children:i.jsx("span",{className:"blink-text",children:" "})})]}),i.jsx("div",{className:"bg-slate-700 rounded-xl p-4",children:i.jsx("div",{className:"grid grid-cols-4 gap-2",children:cb.map(E=>{var O,ue;return i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-slate-200 mb-1",children:E}),p?i.jsx("input",{type:"number",value:((O=o.promo)==null?void 0:O[E])||0,onChange:me=>rI(o.id,E,me.target.value),className:"w-full text-center p-2 border rounded-lg text-sm font-bold bg-white text-slate-900"}):i.jsx("p",{className:"font-bold text-slate-100",children:((ue=o.promo)==null?void 0:ue[E])||0})]},E)})})})]})]},o.id)})]}),R==="sales"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4 shadow-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-10 h-10 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-white font-bold text-lg",children:"BEANCRAFT"}),i.jsx("p",{className:"text-blue-200 text-xs",children:"   "})]})]}),i.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white text-blue-600 rounded-lg font-bold text-sm hover:bg-blue-50 transition-all flex items-center gap-2",children:"  "})]})}),(()=>{const[o,u]=_.useState(""),[f,p]=_.useState(null),[x,v]=_.useState(!1),b=j=>j?pe.find(P=>{var A,M,H;return((A=P.region)==null?void 0:A.includes(j))||((M=P.title)==null?void 0:M.includes(j))||((H=P.content)==null?void 0:H.includes(j))}):null,w=j=>{const D=Jr.filter(A=>{var M;return(M=A.address)==null?void 0:M.includes(j)}),P=oe.filter(A=>{var M;return(M=A.address)==null?void 0:M.includes(j)});return{realtorCount:D.length,companyCount:P.length,totalListings:D.reduce((A,M)=>A+(M.listings||0),0)}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"card p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:"  "}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:o,onChange:j=>u(j.target.value),placeholder:"  (: , , )",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500"}),i.jsx("button",{onClick:()=>{o.trim()&&(p(o.trim()),v(!0))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:""})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["","","","","","","",""].map(j=>i.jsx("button",{onClick:()=>{u(j),p(j),v(!0)},className:"px-3 py-1.5 bg-slate-700 text-slate-300 rounded-full text-sm hover:bg-slate-600 transition-all",children:j},j))})]}),x&&f&&i.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"font-bold text-slate-100 text-lg flex items-center gap-2",children:[" ",f,"  "]}),i.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-slate-200",children:""})]}),(()=>{const j=w(f);return i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-400",children:j.realtorCount}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:j.companyCount}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:j.totalListings.toLocaleString()}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})})(),(()=>{const j=b(f);if(j)return i.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[i.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  "}),i.jsx("p",{className:"text-slate-200 font-medium mb-1",children:j.title}),i.jsx("p",{className:"text-sm text-slate-300",children:j.content}),j.source&&i.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[": ",j.source]})]});{const P={:" 2,596  .   14.1%.   .",:",   .   .",:"//  .    .",:"IT  .    .   .",:"    .    .",:" .    .    .",:" .   . /   .",:"   2.    ."}[f]||"      .      .";return i.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),i.jsx("p",{className:"text-sm text-slate-300",children:P})]})}})()]})]})})(),i.jsxs("div",{className:"card p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"  vs   "}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-600",children:[i.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),i.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),i.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),i.jsxs("tbody",{className:"text-slate-300",children:[i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:""}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),i.jsxs("tr",{className:"border-b border-slate-700/50",children:[i.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"1/15 "}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),i.jsxs("tr",{className:"bg-slate-700/30",children:[i.jsx("td",{className:"py-3 px-2 font-bold text-white",children:"  (5)"}),i.jsx("td",{className:"py-3 px-2 text-center text-orange-400 font-bold",children:"1,500~4,500+"}),i.jsx("td",{className:"py-3 px-2 text-center text-emerald-400 font-bold",children:"1,800+"})]})]})]})}),i.jsxs("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[i.jsx("p",{className:"text-sm text-emerald-400 font-semibold mb-1",children:"   "}),i.jsxs("p",{className:"text-sm text-slate-300",children:["/ 0 5 ",i.jsx("span",{className:"text-emerald-400 font-bold",children:" 900~3,000"})," . //   ."]})]})]}),i.jsxs("div",{className:"card p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"   "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-blue-400",children:" "}),i.jsx("p",{className:"text-xs text-slate-400",children:"   "})]})]}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[i.jsx("li",{children:" /  "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"   "})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-emerald-400",children:""}),i.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[i.jsx("li",{children:"    "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"   "})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 border border-yellow-500/30 rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-yellow-400",children:"/"}),i.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[i.jsx("li",{children:"   ~"}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"   "})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("span",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-purple-400",children:"/"}),i.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),i.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[i.jsx("li",{children:"   "}),i.jsx("li",{children:" //  "}),i.jsx("li",{children:"   "})]})]})]})]}),i.jsxs("div",{className:"card p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2 text-lg",children:"   "}),(()=>{const o={};Jr.forEach(f=>{const p=f.address||"";let x="";p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")||p.includes("")?x="":p.includes("")&&(x=""),o[x]||(o[x]={count:0,listings:0}),o[x].count++,o[x].listings+=f.listings||0});const u=Object.entries(o).filter(([f])=>f!=="").sort((f,p)=>p[1].count-f[1].count);return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-400",children:Jr.length.toLocaleString()}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"bg-emerald-500/20 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:oe.length}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u.length}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),i.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-400",children:Jr.reduce((f,p)=>f+(p.listings||0),0).toLocaleString()}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),i.jsx("div",{className:"flex flex-wrap gap-2",children:u.slice(0,10).map(([f,p])=>i.jsxs("div",{className:"px-3 py-2 bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:f}),i.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:[p.count,""]})]},f))})]})]})})()]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl p-6 text-center",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" ,  "}),i.jsx("p",{className:"text-slate-300 mb-4",children:"  "}),i.jsxs("div",{className:"flex justify-center gap-3",children:[i.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:" "}),i.jsx("a",{href:"tel:1533-4875",className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-all",children:" 1533-4875"})]})]})]}),R==="realtors"&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),(()=>{const o=k=>k.listingCount?k.listingCount:k.listings?k.listings:k.articleCounts&&k.articleCounts.total?k.articleCounts.total:0,u=k=>k.name&&(k.name.includes("")||k.name.includes("")||k.name.includes(""))?k.name:k.officeName?k.officeName:k.realtorName?k.realtorName:k.name||"( )",f=k=>k.agentName||k.agent||"",p=k=>k.agentPosition||"",x=k=>{if(!k)return"";if(k.includes("T")){const $=new Date(k);if(!isNaN($.getTime()))return $.toLocaleDateString("ko-KR")}const de=k.match(/(\d{4})\.\s*(\d{1,2})\.\s*(\d{1,2})/);if(de){const[,$,V,q]=de;return`${$}. ${V}. ${q}.`}return k},v=["","","","","","","","","","","","","","","","",""],b={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},w=k=>{if(!k)return{city:"",district:""};const de=["","","","","","","","","","","","","","","","","","","","","","","","",""],$={:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","",""],:["","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["",""]},V=[{pattern:/(|)?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/(|)?/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?(|)?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/(|)?/,city:""}];let q="";for(const{pattern:O,city:ue}of V)if(O.test(k)){q=ue;break}let z="";const E=k.match(/([-]{1,4})(|)/);if(E){const O=E[1]+E[2];!O.includes("")&&!O.includes("")&&O.length<=5&&(z=O)}if(z===""&&q===""){for(const O of de)if(new RegExp(`${O}(?!\\S*)\\s|${O}(?!\\S*)$|\\s${O}\\s`).test(k)||k.includes(O+" ")||k.includes(O+"")){z=O+"";break}}if(q===""){const O=k.match(/([-]{2,4})(?![])/);if(O){const ue=O[1];for(const[me,ra]of Object.entries($))if(ra.includes(ue)){q=me,z===""&&(z=ue+"");break}}}if(z===""){const O=k.match(/([-]{2,4})(?![])/);O&&(z=O[1]+"")}if(q===""&&z!==""&&z.endsWith("")){const O=z.replace("","");de.includes(O)&&(q="")}return{city:q,district:z}},j=Jr.filter(k=>{const de=u(k),$=de.includes("")||de.includes("")||de.includes(""),V=k.address&&k.address.length>5;return $||V}),D=k=>k.replace(/\s+/g,"").replace(/[^\w-]/g,"").toLowerCase(),P=new Map,A=j.filter(k=>{const de=u(k).trim(),$=D(de),{city:V,district:q}=w(k.address),z=`${$}-${V}-${q}`;if(P.has(z)){const E=P.get(z);return o(k)>o(E.data)?(j[E.index]=null,P.set(z,{data:k,index:j.indexOf(k)}),!0):!1}return P.set(z,{data:k,index:j.indexOf(k)}),!0}).filter(k=>k!==null);oe.forEach(k=>{Ff(k,A).isDuplicate||A.push({id:`company-${k.id}`,name:k.name,address:k.address,phone:k.phone,cellPhone:k.phone,listings:0,isFromCompany:!0,managerId:k.managerId,collected_at:k.createdAt,agentName:k.contact||"",memo:k.memo||"",reaction:k.reaction||"",lat:k.lat,lng:k.lng,companyId:k.id})});const M={};A.forEach(k=>{const{city:de,district:$}=w(k.address);de!==""&&(M[de]||(M[de]=new Set),$!==""&&M[de].add($))});const H=v.filter(k=>M[k]);A.reduce((k,de)=>k+o(de),0);const ce=A.length>0&&A.some(k=>k.collected_at)?new Date(Math.max(...A.filter(k=>k.collected_at).map(k=>new Date(k.collected_at).getTime()))):null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card p-3 sm:p-4",children:i.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-teal-600",children:qC?" ...":A.length}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),ce&&i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-slate-300",children:ce.toLocaleDateString("ko-KR")}),i.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})}),i.jsx("div",{className:"card p-3 sm:p-4",children:i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsx("input",{type:"text",placeholder:"()   ...",value:bf,onChange:k=>VC(k.target.value),className:"input-premium flex-1 min-w-[150px]"}),i.jsxs("select",{value:wf,onChange:k=>HC(k.target.value),className:"select-premium",children:[i.jsx("option",{value:"",children:" "}),H.map(k=>i.jsx("optgroup",{label:`${b[k]||k}`,children:[...M[k]].sort().map(de=>i.jsx("option",{value:`${k}|${de}`,children:de},`${k}-${de}`))},k))]}),i.jsxs("select",{value:Xc,onChange:k=>GC(k.target.value),className:"select-premium",children:[i.jsx("option",{value:"listings",children:"  "}),i.jsx("option",{value:"recent",children:"  "}),i.jsx("option",{value:"name",children:" "}),i.jsx("option",{value:"unvisited",children:" "})]})]})}),A.length===0?i.jsxs("div",{className:"card p-8 text-center text-slate-400",children:[i.jsx("p",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"  "}),i.jsx("p",{className:"text-xs mt-2",children:"Chrome   "})]}):i.jsx("div",{className:"space-y-3",children:(()=>{let k=[...A];if(bf){const z=bf.trim().replace(/$/,"").toLowerCase();k=k.filter(E=>{const O=(E.address||"").toLowerCase(),ue=u(E).toLowerCase(),me=f(E).toLowerCase();return O.includes(z)||ue.includes(z)||me.includes(z)})}if(wf){const[V,q]=wf.split("|");k=k.filter(z=>{const{city:E,district:O}=w(z.address);return V&&q?E===V&&O===q:!1})}Xc==="recent"?k.sort((V,q)=>new Date(q.collected_at||0)-new Date(V.collected_at||0)):Xc==="name"?k.sort((V,q)=>u(V).localeCompare(u(q))):Xc==="unvisited"?k.sort((V,q)=>{const z=Uf(V,oe)?1:0,E=Uf(q,oe)?1:0;return z-E}):k.sort((V,q)=>o(q)-o(V));const de={};k.forEach(V=>{const{city:q,district:z}=w(V.address);q!==""&&(de[q]||(de[q]={}),de[q][z]||(de[q][z]=[]),de[q][z].push(V))});const $=v.filter(V=>de[V]);return $.length===0?i.jsx("div",{className:"card p-4 text-center text-slate-400",children:"  "}):$.map(V=>{const q=de[V],z=Object.values(q).flat().length,E=Object.keys(q).sort();return i.jsxs("details",{className:"card overflow-hidden",open:$.length===1,children:[i.jsxs("summary",{className:"p-4 cursor-pointer hover:bg-slate-700 flex justify-between items-center font-bold text-slate-200 bg-slate-800",children:[i.jsxs("span",{children:[" ",b[V]||V," (",z,")"]}),i.jsxs("span",{className:"text-xs text-slate-400",children:[E.length," /"]})]}),i.jsx("div",{className:"border-t border-slate-600",children:E.map(O=>{const ue=q[O];return i.jsxs("details",{className:"border-b border-slate-700",children:[i.jsx("summary",{className:"p-3 pl-6 cursor-pointer hover:bg-slate-700 flex justify-between items-center text-slate-300",children:i.jsxs("span",{className:"font-bold",children:[O," (",ue.length,")"]})}),i.jsxs("div",{className:"max-h-80 overflow-y-auto bg-slate-900",children:[ue.map((me,ra)=>{const sr=u(me),ia=o(me),aa=Ff(me,oe),ri=aa.isDuplicate||me.isFromCompany,Tl=aa.matchedCompany,ii=me.isFromCompany?ye.find(ae=>ae.id===me.managerId):Tl?ye.find(ae=>ae.id===Tl.managerId):null,G=je.some(ae=>ae.name===sr);return i.jsxs("div",{className:`p-3 pl-8 border-b border-slate-800 cursor-pointer hover:bg-slate-800 ${G?"bg-teal-900/20":ri?"bg-green-900/20":""}`,onClick:()=>fl({...me,officeName:sr,listingCount:ia,agentName:me.isFromCompany?me.agentName:f(me),agentPosition:p(me),isRegistered:ri,isInRoute:G,assignedManager:ii,matchedCompany:Tl,collectedDate:me.collected_at?x(me.collected_at):""}),children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-bold text-slate-100 text-sm",children:sr}),i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900 text-teal-300 font-bold",children:[ia,""]}),G&&i.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-900 text-purple-300",children:""}),ri&&i.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900 text-green-300",children:""}),ii?i.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:ii.color},children:ii.name}):i.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-slate-600 text-slate-300 font-bold",children:""})]}),i.jsx("span",{className:"text-slate-500 text-sm",children:""})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:me.address||" "})]},me.id||ra)}),ue.length>50&&i.jsxs("p",{className:"text-center text-xs text-slate-500 py-2",children:["... ",ue.length-50,""]})]})]},O)})})]},V)})})()})]})})()]}),R==="companies"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsx("div",{className:"lg:col-span-1 lg:order-2",children:i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("h3",{className:"font-bold text-slate-100",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:nf,onChange:kS,className:"hidden"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:S0,onChange:ES,className:"hidden"}),i.jsx("button",{onClick:()=>Ec(!j0),className:"px-3 py-1 rounded-full border border-slate-600 text-xs text-slate-300 hover:border-slate-500",children:"+  "}),j0&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50 min-w-[120px]",children:[i.jsx("button",{onClick:()=>{Ec(!1),setTimeout(()=>{var o;return(o=nf.current)==null?void 0:o.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),i.jsx("button",{onClick:()=>{Ec(!1),setTimeout(()=>{var o;return(o=S0.current)==null?void 0:o.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),i.jsx("button",{onClick:()=>{kc(!0),Ec(!1)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700",children:" "})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",placeholder:"",value:se.name,onChange:o=>rt({...se,name:o.target.value}),className:"input-premium text-sm w-full"}),i.jsx("input",{type:"text",placeholder:"",value:se.contact,onChange:o=>rt({...se,contact:o.target.value}),className:"input-premium text-sm w-full"}),i.jsx("input",{type:"text",placeholder:"",value:se.phone,onChange:o=>rt({...se,phone:o.target.value}),className:"input-premium text-sm w-full"}),i.jsx("input",{type:"text",placeholder:"",value:se.address,onChange:o=>rt({...se,address:o.target.value}),className:"input-premium text-sm w-full"}),Dn?i.jsxs("select",{value:se.managerId||"",onChange:o=>rt({...se,managerId:Number(o.target.value)||null}),className:"select-premium text-sm w-full",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}):i.jsxs("div",{className:"input-premium text-sm flex items-center text-slate-400",children:[(n==null?void 0:n.name)||""," ()"]}),i.jsx("input",{type:"text",placeholder:"",value:se.memo,onChange:o=>rt({...se,memo:o.target.value}),className:"input-premium text-sm w-full"})]}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:Object.entries(pt).map(([o,u])=>i.jsx("button",{onClick:()=>rt({...se,reaction:o}),className:`px-2 py-1 rounded-full text-xs text-white transition-all ${se.reaction===o?"ring-1 ring-offset-1 ring-white":"opacity-50"}`,style:{background:u.bg},children:u.label},o))}),i.jsxs("label",{className:"flex items-center gap-2 mt-3 text-xs text-slate-400 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:se.isReregistered||!1,onChange:o=>rt({...se,isReregistered:o.target.checked}),className:"w-3 h-3 rounded"})," (  )"]}),i.jsx("button",{type:"button",onClick:_v,className:"w-full mt-3 py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})}),i.jsx("div",{className:"lg:col-span-2 lg:order-1",children:i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("div",{className:"flex justify-between items-center mb-3",children:i.jsxs("h3",{className:"font-bold text-slate-100",children:["  (",nr.length,")"]})}),(()=>{const o={special:nr.filter(u=>u.reaction==="special").length,positive:nr.filter(u=>u.reaction==="positive").length,neutral:nr.filter(u=>u.reaction==="neutral").length,negative:nr.filter(u=>u.reaction==="negative").length};return i.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[i.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[i.jsx("p",{className:"text-lg font-bold text-rose-400",children:o.special}),i.jsx("p",{className:"text-xs text-slate-500",children:""})]}),i.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[i.jsx("p",{className:"text-lg font-bold text-emerald-400",children:o.positive}),i.jsx("p",{className:"text-xs text-slate-500",children:""})]}),i.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[i.jsx("p",{className:"text-lg font-bold text-orange-400",children:o.neutral}),i.jsx("p",{className:"text-xs text-slate-500",children:""})]}),i.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[i.jsx("p",{className:"text-lg font-bold text-slate-400",children:o.negative}),i.jsx("p",{className:"text-xs text-slate-500",children:""})]})]})})(),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[i.jsx("input",{type:"text",placeholder:" ",value:Pf,onChange:o=>tS(o.target.value),className:"input-premium text-sm"}),i.jsxs("select",{value:Af,onChange:o=>sS(o.target.value),className:"select-premium text-sm",children:[i.jsx("option",{value:"all",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsxs("select",{value:Il,onChange:o=>nS(o.target.value),className:"select-premium text-sm",children:[i.jsx("option",{value:"all",children:" "}),Object.entries(pt).map(([o,u])=>i.jsx("option",{value:o,children:u.label},o))]})]}),ye.filter(o=>Af==="all"||o.id===Number(Af)).map(o=>{let u=nr.filter(v=>v.managerId===o.id);if(Il!=="all"&&(u=u.filter(v=>v.reaction===Il)),u.length===0)return null;const f=["special","positive","neutral","negative","missed"],p={};f.forEach(v=>{const b=u.filter(w=>w.reaction===v);b.length>0&&(p[v]=b)});const x=v=>{if(!v)return" ";const b=v.match(/(||||||||||||||||)[^\s]*\s*([^\s]+[])/);if(b)return b[2];const w=v.match(/([^\s]+[])/);return w?w[1]:""};return i.jsxs("details",{className:"mb-4",children:[i.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl cursor-pointer",style:{background:`${o.color}15`},children:[i.jsx("div",{className:"w-5 h-5 rounded-full",style:{background:o.color}}),i.jsx("span",{className:"font-bold text-slate-200 text-lg",children:o.name}),i.jsxs("span",{className:"text-sm text-slate-200",children:["(",u.length,")"]})]}),i.jsx("div",{className:"mt-2 ml-2",children:f.map(v=>{const b=p[v];if(!b)return null;const w=pt[v],j={};return b.forEach(D=>{const P=x(D.address);j[P]||(j[P]=[]),j[P].push(D)}),i.jsxs("details",{className:"mb-3",children:[i.jsxs("summary",{className:"flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer",style:{background:`${w.bg}20`},children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:w.bg}}),i.jsx("span",{className:"font-bold text-sm",style:{color:w.bg},children:w.label}),i.jsxs("span",{className:"text-xs text-slate-200",children:["(",b.length,")"]})]}),i.jsx("div",{className:"mt-2 ml-3",children:Object.entries(j).map(([D,P])=>i.jsxs("details",{className:"mb-2",children:[i.jsxs("summary",{className:"text-xs text-slate-200 font-bold px-2 py-1 cursor-pointer hover:bg-slate-700 rounded",children:[D," (",P.length,")"]}),i.jsx("div",{className:"space-y-1 mt-1 ml-2",children:P.map(A=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>ut({...A}),children:[i.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:i.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:A.name})}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),ut({...A})},className:"text-slate-200 font-bold text-xs",children:""}),i.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),bv(A)},className:"text-rose-600 font-bold text-xs",children:""})]})]},A.id))})]},D))})]},v)})})]},o.id)}),(()=>{let o=nr.filter(u=>!u.managerId);return Il!=="all"&&(o=o.filter(u=>u.reaction===Il)),o.length===0?null:i.jsxs("details",{className:"mb-4",children:[i.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl bg-gray-100 cursor-pointer",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400"}),i.jsx("span",{className:"font-bold text-slate-200",children:""}),i.jsxs("span",{className:"text-sm text-slate-200",children:["(",o.length,")"]})]}),i.jsx("div",{className:"space-y-2 mt-2 ml-2",children:o.map(u=>{const f=pt[u.reaction]||pt.neutral;return i.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>ut({...u}),children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{background:f.bg}}),i.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:u.name})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("span",{className:"px-2 py-0.5 rounded text-xs text-white font-bold",style:{background:f.bg},children:f.label}),i.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),bv(u)},className:"text-rose-600 font-bold text-xs",children:""})]})]},u.id)})})]})})(),nr.length===0&&i.jsx("p",{className:"text-navy-300 text-center py-10",children:"  "})]})})]}),R==="customers"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),Vc.length===0?i.jsx("p",{className:"text-slate-500 text-center py-8",children:"  "}):i.jsx("div",{className:"space-y-2",children:Vc.map(o=>{var f;const u=ye.find(p=>p.id===o.managerId);return i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-600 hover:border-slate-500 cursor-pointer",onClick:()=>yn(o),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs",style:{background:(u==null?void 0:u.color)||"#666"},children:((f=u==null?void 0:u.name)==null?void 0:f[0])||"?"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-200 text-sm",children:o.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:[o.phone,"  ",o.consultDate]})]})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.status==="completed"?"text-emerald-400":o.status==="contract"?"text-blue-400":"text-slate-400"}`,children:o.status==="completed"?"":o.status==="contract"?"":""})]},o.id)})})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("select",{value:Gt.managerId||"",onChange:o=>ei({...Gt,managerId:Number(o.target.value)||null}),className:"select-premium text-sm w-full",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsx("input",{type:"text",placeholder:" *",value:Gt.name,onChange:o=>ei({...Gt,name:o.target.value}),className:"input-premium text-sm w-full"}),i.jsx("input",{type:"text",placeholder:"",value:Gt.phone,onChange:o=>ei({...Gt,phone:o.target.value}),className:"input-premium text-sm w-full"}),i.jsx("input",{type:"date",value:Gt.consultDate,onChange:o=>ei({...Gt,consultDate:o.target.value}),className:"input-premium text-sm w-full"}),i.jsx("div",{className:"flex gap-2",children:["consult","contract","completed"].map(o=>i.jsx("button",{onClick:()=>ei({...Gt,status:o}),className:`flex-1 px-2 py-2 rounded-full text-xs ${Gt.status===o?"bg-slate-600 text-white":"border border-slate-600 text-slate-400"}`,children:o==="consult"?"":o==="contract"?"":""},o))}),i.jsx("textarea",{placeholder:"",value:Gt.memo,onChange:o=>ei({...Gt,memo:o.target.value}),className:"input-premium text-sm w-full h-20 resize-none"}),i.jsx("button",{type:"button",onClick:XS,className:"w-full py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})]})})]}),R==="settings"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:""}),i.jsxs("div",{className:"flex gap-2 p-1 rounded-full border border-slate-600 w-fit flex-wrap",children:[i.jsx("button",{type:"button",onClick:()=>wc("theme"),className:`px-4 py-2 rounded-full text-sm transition-all ${Qs==="theme"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>wc("ments"),className:`px-4 py-2 rounded-full text-sm transition-all ${Qs==="ments"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>wc("account"),className:`px-4 py-2 rounded-full text-sm transition-all ${Qs==="account"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),Dn&&i.jsx("button",{type:"button",onClick:()=>wc("admin"),className:`px-4 py-2 rounded-full text-sm transition-all ${Qs==="admin"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""})]}),Qs==="ments"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100",children:"  "}),i.jsx("button",{type:"button",onClick:()=>{Fh(null),Hi(!0)},className:"px-3 py-1 rounded-full border border-slate-600 text-sm text-slate-300 hover:border-slate-500",children:"+  "})]}),Lh.length===0?i.jsx("p",{className:"text-center py-8 text-slate-500",children:"  "}):i.jsx("div",{className:"space-y-3",children:Lh.map(o=>i.jsxs("div",{className:"p-4 rounded-xl border border-slate-600 hover:border-slate-500",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o.type==="broker"?"text-blue-400":"text-emerald-400"}`,children:o.type==="broker"?"":""}),i.jsx("span",{className:"font-bold text-slate-100",children:o.name})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{type:"button",onClick:()=>{hC(o),Uh(o.content),bc(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:"AI"}),i.jsx("button",{type:"button",onClick:()=>{Fh(o),Yn({name:o.name,content:o.content,type:o.type||"broker",memo:o.memo||""}),Hi(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:""}),i.jsx("button",{type:"button",onClick:()=>{confirm("?")&&uS(o.id)},className:"px-2 py-1 rounded-full text-xs border border-rose-600/50 text-rose-400 hover:border-rose-500",children:""})]})]}),i.jsx("p",{className:"text-sm text-slate-300 mb-2 whitespace-pre-wrap",children:o.content}),i.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[i.jsxs("span",{children:[" ",o.useCount||0,""]}),i.jsxs("span",{children:[" ",o.useCount>0?Math.round((o.successCount||0)/o.useCount*100):0,"%"]})]})]},o.id))})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:"AI  "}),_c.length===0?i.jsx("p",{className:"text-center py-4 text-slate-500 text-sm",children:" "}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:_c.slice().reverse().slice(0,10).map(o=>i.jsxs("div",{className:"p-3 rounded-xl border border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"font-medium text-slate-200 text-sm",children:o.mentName}),i.jsx("span",{className:"text-xs text-slate-500",children:new Date(o.createdAt).toLocaleDateString()})]}),i.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:o.question})]},o.id))})]})})]}),Qs==="theme"&&i.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[i.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("button",{onClick:()=>Gh("light"),className:`p-4 rounded-xl border transition-all ${ys==="light"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[i.jsx("div",{className:"text-xl mb-1",children:""}),i.jsx("div",{className:"text-xs text-slate-300",children:""})]}),i.jsxs("button",{onClick:()=>Gh("dark"),className:`p-4 rounded-xl border transition-all ${ys==="dark"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[i.jsx("div",{className:"text-xl mb-1",children:""}),i.jsx("div",{className:"text-xs text-slate-300",children:""})]}),i.jsxs("button",{onClick:()=>Gh("auto"),className:`p-4 rounded-xl border transition-all ${ys==="auto"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[i.jsx("div",{className:"text-xl mb-1"}),i.jsx("div",{className:"text-xs text-slate-300",children:""})]})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:ys==="auto"?"    .":ys==="light"?"  .":"  ."})]}),Qs==="account"&&i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"   "}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"password",placeholder:" ",value:Jn,onChange:o=>Uc(o.target.value),className:"input-premium"}),i.jsx("input",{type:"password",placeholder:" ",value:$c,onChange:o=>Wc(o.target.value),className:"input-premium"}),i.jsx("button",{type:"button",onClick:Dn?yv:vv,className:"btn-premium btn-gold w-full",children:" "})]}),i.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:["  4  . ",Dn?"( )":""]})]}),Qs==="admin"&&Dn&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-3",children:"  "}),i.jsxs("p",{className:"text-sm text-slate-400 mb-3",children:["  : ",oe.filter(o=>o.isReregistered).length,""]}),i.jsx("button",{onClick:()=>{const o=oe.filter(u=>u.isReregistered);if(o.length===0){alert("   .");return}confirm(`  ${o.length}    ?
(  ,    )`)&&(o.forEach(u=>{ks({...u,isReregistered:!1})}),alert("   ."))},className:"btn-premium bg-rose-600 hover:bg-rose-700 text-white w-full",children:"   "}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"        ."})]}),El.length>0&&i.jsxs("div",{className:"card p-4 border-2 border-rose-200",children:[i.jsxs("h3",{className:"font-bold text-rose-600 text-lg mb-4",children:["  (",El.length,")"]}),i.jsx("div",{className:"space-y-3",children:El.map(o=>{var u;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-rose-900/30 rounded-xl",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-200",children:o.managerName}),i.jsx("p",{className:"text-sm text-slate-200",children:(u=o.items)==null?void 0:u.join(", ")})]}),i.jsx("button",{type:"button",onClick:()=>sI(o.id),className:"btn-premium btn-gold text-sm",children:""})]},o.id)})})]}),i.jsxs("div",{className:"card p-3 sm:p-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:" "}),ye.map(o=>{const u=WC[o.id],f=(u==null?void 0:u.isOnline)&&Date.now()-new Date(u.lastSeen).getTime()<12e4;return i.jsxs("div",{className:"flex items-center gap-3 mb-3 p-3 bg-slate-700 rounded-xl",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg flex-shrink-0",style:{background:o.color}}),i.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${f?"bg-emerald-500":"bg-gray-400"}`})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("input",{type:"text",value:o.name,onChange:p=>Of({...o,name:p.target.value}),className:"input-premium w-full mb-1"}),i.jsxs("p",{className:"text-xs text-slate-200",children:[f?"":`${aI(u==null?void 0:u.lastSeen)}`,"  ",o.username]})]}),i.jsx("input",{type:"color",value:o.color,onChange:p=>Of({...o,color:p.target.value}),className:"w-10 h-10 rounded cursor-pointer flex-shrink-0"}),i.jsx("button",{type:"button",onClick:()=>{confirm("?")&&re.ref("managers/"+o.id).remove()},className:"text-rose-600 font-bold text-sm flex-shrink-0",children:""})]},o.id)})]})]})]})]}),_s&&i.jsx("div",{className:"modal-overlay",onClick:()=>ul(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:ub(_s.region)}),i.jsx("button",{type:"button",onClick:()=>ul(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("p",{className:"text-slate-200 mb-4",children:[_s.status==="confirmed"?"":"",": ",(kv=_s.manager)==null?void 0:kv.name]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-sm text-slate-200 mb-2 block",children:""}),i.jsx("input",{type:"date",value:_s.date||"",onChange:o=>{_S(_s.id,o.target.value),ul({..._s,date:o.target.value})},className:"input-premium"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>ul(null),className:"btn-premium btn-outline flex-1",children:""}),vS(_s)&&i.jsx("button",{type:"button",onClick:()=>yS(_s.id),className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),X&&i.jsx("div",{className:"modal-overlay",onClick:()=>fl(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>fl(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[i.jsx("p",{className:"font-bold text-slate-100 text-lg mb-1",children:X.officeName}),i.jsx("p",{className:"text-sm text-slate-400",children:X.address||" "}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-100 text-teal-700 font-bold",children:[X.listingCount,""]}),X.isInRoute&&i.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900/300 text-white",children:""}),X.isRegistered&&i.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500 text-white",children:""})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),i.jsx("p",{className:"font-bold text-slate-200",children:X.phone||"-"})]}),i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),i.jsx("p",{className:"font-bold text-slate-200",children:X.cellPhone||"-"})]}),i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:X.isFromCompany?" ":""}),i.jsx("p",{className:"font-bold text-slate-200",children:X.assignedManager?i.jsx("span",{className:"px-2 py-0.5 rounded-full text-white text-xs",style:{backgroundColor:X.assignedManager.color},children:X.assignedManager.name}):X.agentPosition||X.agentName?`${X.agentPosition} ${X.agentName}`.trim():""})]}),i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:X.isFromCompany?"":""}),i.jsx("p",{className:"font-bold text-slate-200",children:X.collectedDate||"-"})]}),X.isFromCompany&&X.agentName&&i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:" "}),i.jsx("p",{className:"font-bold text-slate-200",children:X.agentName})]}),X.isFromCompany&&X.reaction&&i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),i.jsxs("p",{className:"font-bold text-slate-200",children:[X.reaction==="negative"&&i.jsx("span",{className:"px-2 py-0.5 rounded bg-slate-600 text-slate-300",children:""}),X.reaction==="positive"&&i.jsx("span",{className:"px-2 py-0.5 rounded bg-amber-600 text-white",children:""}),X.reaction==="good"&&i.jsx("span",{className:"px-2 py-0.5 rounded bg-green-600 text-white",children:""}),X.reaction==="special"&&i.jsx("span",{className:"px-2 py-0.5 rounded bg-red-600 text-white",children:""}),X.reaction==="skip"&&i.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-600 text-white",children:""})]})]}),X.isFromCompany&&X.memo&&i.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[i.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),i.jsx("p",{className:"text-slate-200 text-sm",children:X.memo})]})]}),X.articleCounts&&i.jsxs("div",{className:"flex flex-wrap gap-1",children:[X.articleCounts.sale>0&&i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700",children:[" ",X.articleCounts.sale]}),X.articleCounts.jeonse>0&&i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 text-green-700",children:[" ",X.articleCounts.jeonse]}),X.articleCounts.monthly>0&&i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700",children:[" ",X.articleCounts.monthly]}),X.articleCounts.short>0&&i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-100 text-purple-700",children:[" ",X.articleCounts.short]})]}),X.regions&&Object.keys(X.regions).length>0&&i.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(X.regions).sort((o,u)=>u[1]-o[1]).map(([o,u])=>i.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-slate-600 text-slate-300",children:[o,": ",u,""]},o))}),i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-600",children:[!X.isInRoute&&i.jsx("button",{type:"button",onClick:()=>{var f,p;const o=X.address,u=(x,v)=>{Ht(b=>[...b,{id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:X.officeName,address:o||"",phone:X.cellPhone||X.phone||"",lat:x,lng:v,visited:!1,listings:X.listingCount,companyId:X.companyId||null}]),fl(null),alert(" !")};X.lat&&X.lng?u(X.lat,X.lng):o&&((p=(f=window.naver)==null?void 0:f.maps)!=null&&p.Service)?naver.maps.Service.geocode({query:o},(x,v)=>{if(x===naver.maps.Service.Status.OK&&v.v2.addresses.length>0){const b=v.v2.addresses[0];u(parseFloat(b.y),parseFloat(b.x))}else u(null,null)}):u(null,null)},className:"btn-premium btn-gold text-sm flex-1",children:"+  "}),!X.isRegistered&&i.jsx("button",{type:"button",onClick:()=>{rt({name:X.officeName,contact:X.agentName!==""?X.agentName:"",phone:X.cellPhone||X.phone||"",address:X.address||"",managerId:null,memo:` ${X.listingCount} | : ${X.collectedDate}`,reaction:"none"}),fl(null),K("companies")},className:"btn-premium btn-navy text-sm flex-1",children:" "})]})]})]})}),et&&i.jsx("div",{className:"modal-overlay",onClick:()=>hl(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${(Ev=pt[et.reaction])!=null&&Ev.blink?"special-blink":""}`,style:{background:((Tv=pt[et.reaction])==null?void 0:Tv.bg)||"#f97316"}}),i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:et.name})]}),i.jsx("button",{type:"button",onClick:()=>hl(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[et.contact&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),i.jsx("span",{className:"font-bold text-slate-200",children:et.contact})]}),et.phone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),i.jsx("a",{href:`tel:${et.phone}`,className:"font-bold text-primary-600 md:pointer-events-none md:text-slate-200",children:et.phone})]}),et.address&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),i.jsx("span",{className:"text-slate-200 text-sm",children:et.address})]}),et.manager&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),i.jsx("span",{className:"font-bold",style:{color:et.manager.color},children:et.manager.name})]}),et.memo&&i.jsxs("div",{className:"bg-slate-700 p-3 rounded-lg",children:[i.jsx("p",{className:"text-xs text-primary-600 font-bold mb-1",children:""}),i.jsx("p",{className:"text-sm text-amber-800",children:et.memo})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"text-sm text-slate-200",children:":"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs text-white font-bold ${(Rv=pt[et.reaction])!=null&&Rv.blink?"special-blink":""}`,style:{background:((Pv=pt[et.reaction])==null?void 0:Pv.bg)||"#f97316"},children:((Av=pt[et.reaction])==null?void 0:Av.label)||""})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{ut({...et}),hl(null)},className:"btn-premium btn-gold flex-1",children:""}),i.jsx("button",{type:"button",onClick:()=>hl(null),className:"btn-premium btn-outline flex-1",children:""})]})]})}),jC&&i.jsx("div",{className:"modal-overlay",onClick:()=>Tc(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"  "}),i.jsx("div",{className:"space-y-3 mb-4",children:cb.map(o=>i.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:of[o],onChange:u=>cf({...of,[o]:u.target.checked}),className:"w-5 h-5 accent-gold-500"}),i.jsx("span",{className:"font-bold text-slate-200",children:o})]},o))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>Tc(null),className:"btn-premium btn-outline flex-1",children:""}),i.jsx("button",{type:"button",onClick:nI,className:"btn-premium btn-gold flex-1",children:" "})]})]})}),Nt&&i.jsx("div",{className:"modal-overlay",onClick:()=>ut(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>ut(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"text",placeholder:"",value:Nt.name,onChange:o=>ut({...Nt,name:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:Nt.contact||"",onChange:o=>ut({...Nt,contact:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:Nt.phone||"",onChange:o=>ut({...Nt,phone:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:Nt.address||"",onChange:o=>ut({...Nt,address:o.target.value}),className:"input-premium"}),i.jsxs("select",{value:Nt.managerId||"",onChange:o=>ut({...Nt,managerId:Number(o.target.value)||null}),className:"select-premium",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsx("input",{type:"text",placeholder:"",value:Nt.memo||"",onChange:o=>ut({...Nt,memo:o.target.value}),className:"input-premium"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(pt).map(([o,u])=>i.jsx("button",{onClick:()=>ut({...Nt,reaction:o}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${Nt.reaction===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{type:"button",onClick:()=>ut(null),className:"btn-premium btn-outline flex-1",children:""}),i.jsx("button",{type:"button",onClick:QS,className:"btn-premium btn-gold flex-1",children:""})]})]})}),ht&&i.jsx("div",{className:"modal-overlay",onClick:()=>yn(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>yn(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"text",placeholder:"",value:ht.name,onChange:o=>yn({...ht,name:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:ht.phone||"",onChange:o=>yn({...ht,phone:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"date",value:ht.consultDate||"",onChange:o=>yn({...ht,consultDate:o.target.value}),className:"input-premium"}),i.jsxs("select",{value:ht.managerId||"",onChange:o=>yn({...ht,managerId:Number(o.target.value)||null}),className:"select-premium",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-200 mb-2",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>yn({...ht,status:"consult"}),className:`px-4 py-2 rounded-full text-sm font-bold ${ht.status==="consult"||!ht.status?"bg-primary-500 text-white":"bg-slate-700 text-primary-600"}`,children:""}),i.jsx("button",{onClick:()=>yn({...ht,status:"contract"}),className:`px-4 py-2 rounded-full text-sm font-bold ${ht.status==="contract"?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600"}`,children:""})]})]}),i.jsx("textarea",{placeholder:"",value:ht.memo||"",onChange:o=>yn({...ht,memo:o.target.value}),className:"input-premium h-20"})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{type:"button",onClick:()=>yn(null),className:"btn-premium btn-outline flex-1",children:""}),i.jsx("button",{type:"button",onClick:ZS,className:"btn-premium btn-navy flex-1",children:""})]})]})}),pl&&i.jsx("div",{className:"modal-overlay",onClick:()=>Pc(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[pl.status==="planned"?"":"","  "]}),i.jsx("button",{type:"button",onClick:()=>Pc(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>qi(pl.pins.map(o=>o.id)),className:"text-sm text-gold-600 font-bold",children:" "}),i.jsx("button",{type:"button",onClick:()=>qi([]),className:"text-sm text-slate-200 font-bold",children:" "})]}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:pl.pins.map(o=>i.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Kr.includes(o.id),onChange:u=>{u.target.checked?qi([...Kr,o.id]):qi(Kr.filter(f=>f!==o.id))},className:"w-5 h-5 accent-gold-500"}),i.jsx("span",{className:"font-bold text-slate-200",children:ub(o.region)})]},o.id))}),Kr.length>0&&i.jsxs("div",{className:"flex gap-2",children:[pl.status==="planned"&&i.jsx("button",{type:"button",onClick:bS,className:"btn-premium btn-gold flex-1",children:" "}),i.jsx("button",{type:"button",onClick:wS,className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),Qh&&i.jsx("div",{className:"modal-overlay",onClick:()=>Jh(null),children:i.jsxs("div",{className:"modal-content max-w-sm p-0 overflow-hidden",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-4 sm:p-6 text-center",children:[i.jsx("div",{className:"w-14 h-14 bg-slate-800/10 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-3 border border-white/20",children:i.jsx("span",{className:"text-2xl text-emerald-400"})}),i.jsx("p",{className:"text-slate-400 text-xs tracking-widest mb-1",children:"REGISTERED"}),i.jsx("h3",{className:"font-bold text-white text-lg",children:Qh.companyName})]}),i.jsxs("div",{className:"p-5 bg-slate-800",children:[i.jsx("div",{className:"bg-slate-900 rounded-lg p-4 mb-4 border-l-4 border-teal-500",children:i.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:Qh.quote})}),i.jsx("button",{type:"button",onClick:()=>Jh(null),className:"w-full py-3 bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 text-white rounded-lg font-medium transition-all border border-slate-500",children:""})]})]})}),N0&&i.jsx("div",{className:"modal-overlay",onClick:()=>Yh(!1),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),i.jsx("button",{type:"button",onClick:()=>Yh(!1),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"password",placeholder:" ",value:ml,onChange:o=>P0(o.target.value),className:"input-premium"}),i.jsx("input",{type:"password",placeholder:" ",value:A0,onChange:o=>O0(o.target.value),className:"input-premium"}),i.jsx("button",{type:"button",onClick:yv,className:"btn-premium btn-gold w-full",children:""})]})]})}),bC&&i.jsx("div",{className:"modal-overlay",onClick:()=>w0(!1),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>w0(!1),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"bg-emerald-900/30 p-4 rounded-xl",children:[i.jsx("p",{className:"text-emerald-700 font-bold mb-2",children:"  "}),i.jsx("p",{className:"text-emerald-600 text-sm",children:"      ."}),i.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"PC, ,    ."})]})]})}),Xh&&i.jsx("div",{className:"modal-overlay",onClick:()=>Oc(null),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>Oc(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("p",{className:"text-sm text-slate-200 mb-4",children:[Xh.managerName," "]}),i.jsx("div",{className:"space-y-3",children:(()=>{const o=Hc.filter(u=>u.managerId===Xh.managerId);return o.length===0?i.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:o.map(u=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-100",children:[Number(u.amount).toLocaleString(),""]}),i.jsx("p",{className:"text-xs text-slate-200",children:u.date})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{const f=prompt("  :",u.amount);f&&!isNaN(f)&&(Q0({...u,amount:Number(f)}),alert(" ."))},className:"px-2 py-1 bg-primary-500 text-white rounded text-xs font-bold",children:""}),i.jsx("button",{onClick:()=>{confirm("  ?")&&(dS(u.id),alert(" ."))},className:"px-2 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:""})]})]},u.id))})})()}),i.jsx("button",{type:"button",onClick:()=>Oc(null),className:"btn-premium btn-outline w-full mt-4",children:""})]})}),SC&&i.jsx("div",{className:"modal-overlay",onClick:()=>Ac(!1),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>Ac(!1),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("select",{value:On.managerId||"",onChange:o=>rd({...On,managerId:Number(o.target.value)||null}),className:"select-premium",children:[i.jsx("option",{value:"",children:"  *"}),iI().map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsx("input",{type:"number",placeholder:" *",value:On.amount,onChange:o=>rd({...On,amount:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"date",value:On.date,onChange:o=>rd({...On,date:o.target.value}),className:"input-premium"}),i.jsx("button",{type:"button",onClick:eI,className:"btn-premium btn-gold w-full",children:""})]})]})}),wC&&i.jsx("div",{className:"modal-overlay",onClick:()=>qh(!1),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>qh(!1),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"password",placeholder:" ",value:Jn,onChange:o=>Uc(o.target.value),className:"input-premium"}),i.jsx("input",{type:"password",placeholder:" ",value:$c,onChange:o=>Wc(o.target.value),className:"input-premium"}),i.jsx("button",{type:"button",onClick:vv,className:"btn-premium btn-gold w-full",children:""})]})]})}),NC&&i.jsx("div",{className:"modal-overlay",onClick:()=>kc(!1),children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>kc(!1),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-4",children:[i.jsx("p",{className:"text-slate-200 font-bold mb-1",children:" "}),i.jsx("p",{className:"text-slate-200 text-sm",children:"////"})]}),i.jsx("textarea",{value:lf,onChange:o=>I0(o.target.value),placeholder:"////",className:"input-premium h-32 mb-3"}),i.jsxs("select",{value:k0||"",onChange:o=>E0(Number(o.target.value)||null),className:"select-premium mb-3",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[i.jsx("span",{className:"text-sm text-slate-200",children:" :"}),Object.entries(pt).map(([o,u])=>i.jsx("button",{onClick:()=>R0(o),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${T0===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]}),i.jsx("button",{type:"button",onClick:JS,className:"btn-premium btn-navy w-full",children:" "})]})}),IC&&i.jsx("div",{className:"modal-overlay",onClick:()=>Lc(!1),style:{overflow:"hidden"},children:i.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),i.jsx("button",{type:"button",onClick:()=>Lc(!1),className:"text-slate-200 text-2xl",children:""})]}),C0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full spin mx-auto mb-3"}),i.jsx("p",{className:"text-slate-200",children:"  ..."})]}):EC?i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-200 font-bold",children:"   ( )"}),i.jsx("input",{type:"text",placeholder:"",value:se.name,onChange:o=>rt({...se,name:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:se.contact,onChange:o=>rt({...se,contact:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:se.phone,onChange:o=>rt({...se,phone:o.target.value}),className:"input-premium"}),i.jsx("input",{type:"text",placeholder:"",value:se.address,onChange:o=>rt({...se,address:o.target.value}),className:"input-premium"}),i.jsxs("select",{value:se.managerId||"",onChange:o=>rt({...se,managerId:Number(o.target.value)||null}),className:"select-premium",children:[i.jsx("option",{value:"",children:" "}),ye.map(o=>i.jsx("option",{value:o.id,children:o.name},o.id))]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(pt).map(([o,u])=>i.jsx("button",{onClick:()=>rt({...se,reaction:o}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${se.reaction===o?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:u.bg},children:u.label},o))]}),i.jsx("input",{type:"text",placeholder:"",value:se.memo,onChange:o=>rt({...se,memo:o.target.value}),className:"input-premium"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{var o;tf(null),rt({name:"",contact:"",phone:"",address:"",managerId:(n==null?void 0:n.managerId)||null,memo:"",reaction:"neutral"}),(o=nf.current)==null||o.click()},className:"flex-1 py-3 border border-slate-600 rounded-xl font-bold text-slate-200",children:""}),i.jsx("button",{onClick:async()=>{await _v(),Lc(!1),tf(null)},className:"flex-1 btn-premium btn-gold",children:" "})]})]}):null]})}),kC&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content max-w-2xl",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:["   (",_n.length,")"]}),i.jsx("button",{type:"button",onClick:()=>ef(!1),className:"text-slate-200 text-2xl",children:""})]}),C0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full spin mx-auto mb-3"}),i.jsx("p",{className:"text-slate-200",children:"  ..."})]}):i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[_n.map((o,u)=>i.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 border",children:[i.jsxs("p",{className:"font-bold text-slate-200 text-sm mb-2",children:[" #",u+1]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{type:"text",placeholder:"",value:o.name,onChange:f=>{const p=[..._n];p[u].name=f.target.value,Qn(p)},className:"input-premium text-sm"}),i.jsx("input",{type:"text",placeholder:"",value:o.contact,onChange:f=>{const p=[..._n];p[u].contact=f.target.value,Qn(p)},className:"input-premium text-sm"}),i.jsx("input",{type:"text",placeholder:"",value:o.phone,onChange:f=>{const p=[..._n];p[u].phone=f.target.value,Qn(p)},className:"input-premium text-sm"}),i.jsx("input",{type:"text",placeholder:"",value:o.address,onChange:f=>{const p=[..._n];p[u].address=f.target.value,Qn(p)},className:"input-premium text-sm"})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[i.jsxs("select",{value:o.managerId||"",onChange:f=>{const p=[..._n];p[u].managerId=Number(f.target.value)||null,Qn(p)},className:"select-premium text-sm py-1",children:[i.jsx("option",{value:"",children:""}),ye.map(f=>i.jsx("option",{value:f.id,children:f.name},f.id))]}),Object.entries(pt).map(([f,p])=>i.jsx("button",{onClick:()=>{const x=[..._n];x[u].reaction=f,Qn(x)},className:`px-2 py-1 rounded-full text-xs text-white font-bold ${o.reaction===f?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:p.bg},children:p.label},f))]}),i.jsx("input",{type:"text",placeholder:"",value:o.memo,onChange:f=>{const p=[..._n];p[u].memo=f.target.value,Qn(p)},className:"input-premium text-sm mt-2"})]},u)),_n.length>0&&i.jsxs("button",{onClick:TS,className:"btn-premium btn-gold w-full",children:[_n.filter(o=>o.name).length,"  "]})]})]})}),PC&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx("span",{className:"text-3xl"})}),i.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),i.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long"})," 4"]})]}),i.jsxs("div",{className:"bg-slate-700 border border-primary-300 rounded-xl p-4 mb-4",children:[i.jsxs("p",{className:"text-blue-800 font-bold text-center text-lg",children:["  ",i.jsx("br",{}),"."]}),i.jsxs("p",{className:"text-primary-600 text-sm text-center mt-2",children:["    ",i.jsx("br",{}),"  ."]})]}),i.jsx("button",{onClick:()=>af(!1),className:"btn-premium btn-gold w-full",children:""})]})}),wl&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>mf(null),children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),i.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[" ",i.jsxs("b",{className:"text-amber-500",children:[wl.unvisitedStops.length,""]}),"   ."]})]}),i.jsx("div",{className:"bg-slate-800 rounded-xl p-3 mb-4 max-h-40 overflow-y-auto",children:wl.unvisitedStops.map((o,u)=>i.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-slate-700 last:border-0",children:[i.jsx("span",{className:"w-6 h-6 bg-rose-500/20 text-rose-400 rounded-full flex items-center justify-center text-xs font-bold",children:u+1}),i.jsx("span",{className:"text-slate-200 text-sm",children:o.name})]},u))}),i.jsxs("p",{className:"text-xs text-slate-300 mb-4 text-center",children:["       ",i.jsx("br",{}),"    ."]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>zf(wl.route,!1),className:"flex-1 px-4 py-2 bg-slate-600 rounded-xl font-bold text-slate-200 text-sm",children:" "}),i.jsx("button",{onClick:()=>zf(wl.route,!0),className:"flex-1 px-4 py-2 bg-amber-600 rounded-xl font-bold text-white text-sm",children:" "})]})]})}),pf&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>Ji(null),children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-sm",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-14 h-14 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx("span",{className:"text-2xl"})}),i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[i.jsx("b",{className:"text-rose-600",children:pf.name}),"() ?"]}),i.jsx("p",{className:"text-xs text-slate-200 mt-1",children:"    ."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Ji(null),className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl font-bold text-gray-700",children:""}),i.jsx("button",{onClick:()=>{const{type:o,id:u}=pf;o==="route"?X0(u):o==="company"?oS(u):o==="customer"?cS(u):o==="calendar"?(F0(Lt.filter(f=>f.id!==u)),localStorage.setItem("bc_calendar_events",JSON.stringify(Lt.filter(f=>f.id!==u)))):o==="sale"&&(D0(Hc.filter(f=>f.id!==u)),localStorage.setItem("bc_sales",JSON.stringify(Hc.filter(f=>f.id!==u)))),Ji(null),alert(".")},className:"flex-1 px-4 py-2 bg-rose-500 rounded-xl font-bold text-white",children:""})]})]})}),TC&&rf.length>0&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1100] p-4",children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx("span",{className:"text-3xl"})}),i.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),i.jsx("p",{className:"text-slate-200 text-sm mt-1",children:new Date().toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),i.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-4 mb-4 max-h-60 overflow-y-auto",children:[i.jsxs("p",{className:"text-primary-600 font-bold text-sm mb-3",children:[rf.length,"  "]}),i.jsx("div",{className:"space-y-2",children:rf.map((o,u)=>{const f=ye.find(p=>p.id===o.managerId);return i.jsx("div",{className:"bg-slate-700 p-3 rounded-lg border border-slate-600",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-lg",children:o.type==="route"?"":""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:o.title}),f&&i.jsxs("p",{className:"text-xs text-slate-200",children:[": ",f.name]}),o.memo&&i.jsx("p",{className:"text-xs text-slate-200 mt-1 break-words whitespace-pre-wrap",children:o.memo})]})]})},u)})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{sf(!1),K("calendar")},className:"flex-1 btn-premium btn-gold",children:" "}),i.jsx("button",{onClick:()=>sf(!1),className:"flex-1 btn-premium btn-outline",children:""})]})]})}),CC&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Rc(!1),children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-hidden",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>Rc(!1),className:"text-slate-200 text-2xl",children:""})]}),i.jsx("p",{className:"text-sm text-slate-200 mb-3",children:"   ."}),i.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[oe.filter(o=>!o.lat||!o.lng).map(o=>{const u=ye.find(f=>f.id===o.managerId);return i.jsx("div",{className:"p-3 bg-slate-700 rounded-xl cursor-pointer hover:bg-slate-700 border border-slate-600",onClick:()=>{Rc(!1),ut(o)},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:"font-bold text-slate-100 truncate",children:o.name}),i.jsx("p",{className:"text-xs text-slate-200 truncate",children:o.address||" "})]}),i.jsx("div",{className:"flex-shrink-0 ml-2",children:i.jsx("span",{className:"px-2 py-1 rounded text-xs text-white font-bold",style:{background:(u==null?void 0:u.color)||"#9ca3af"},children:(u==null?void 0:u.name)||""})})]})},o.id)}),oe.filter(o=>!o.lat||!o.lng).length===0&&i.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."})]})]})}),Tt&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>bl(null),children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),i.jsx("button",{type:"button",onClick:()=>bl(null),className:"text-slate-200 text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[i.jsx("p",{className:"text-purple-800 font-bold text-lg",children:Tt.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-purple-600",children:[i.jsxs("span",{children:[" ",Tt.date]}),Tt.time&&i.jsx("span",{children:Tt.time})]}),Tt.memo&&i.jsxs("div",{className:"mt-3 p-3 bg-slate-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-slate-200 mb-1",children:""}),i.jsx("p",{className:"text-slate-200 whitespace-pre-wrap",children:Tt.memo})]}),Tt.company&&i.jsx("div",{className:"mt-2 text-sm text-purple-600",children:i.jsx("span",{children:Tt.company})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{ff(Tt.date),ws({title:Tt.title,time:Tt.time||"09:00",memo:Tt.memo||""}),Xi(Tt.id),Qr(!0),bl(null)},className:"flex-1 py-2 bg-slate-700 text-primary-600 rounded-xl font-bold",children:""}),i.jsx("button",{onClick:()=>{Ji({type:"calendar",id:Tt.id,name:Tt.title}),bl(null)},className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-xl font-bold",children:""})]})]})]})}),BC&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Qr(!1),children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[_l," "]}),i.jsx("button",{type:"button",onClick:()=>Qr(!1),className:"text-slate-200 text-2xl",children:""})]}),(()=>{const o=ze.filter(f=>f.date===_l),u=Lt.filter(f=>f.date===_l);return o.length>0||u.length>0?i.jsxs("div",{className:"mb-4 p-3 bg-slate-700 rounded-xl max-h-32 overflow-y-auto",children:[i.jsx("p",{className:"text-xs text-slate-200 mb-2 font-bold",children:"  "}),o.map(f=>{var x;const p=ye.find(v=>v.id===f.managerId);return i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:(p==null?void 0:p.color)||"#888"}}),i.jsxs("span",{className:"text-sm text-slate-200",children:[(x=f.time)==null?void 0:x.slice(0,5)," ",f.name]}),i.jsx("span",{className:"text-xs text-slate-200",children:"()"})]},`r-${f.id}`)}),u.map(f=>{var p;return i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),i.jsxs("span",{className:"text-sm text-slate-200",children:[(p=f.time)==null?void 0:p.slice(0,5)," ",f.title]}),i.jsx("button",{onClick:()=>{ws({title:f.title,time:f.time,memo:f.memo||""}),Xi(f.id)},className:"text-xs text-primary-600 ml-auto",children:""}),i.jsx("button",{onClick:()=>{confirm("?")&&pS(f.id)},className:"text-xs text-rose-600",children:""})]},`e-${f.id}`)})]}):null})(),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-200 font-bold",children:Nl?" ":"  "}),i.jsx("input",{type:"text",placeholder:" ",value:Xn.title,onChange:o=>ws({...Xn,title:o.target.value}),className:"input-premium"}),i.jsx("div",{className:"relative",onClick:()=>{var o,u;return(u=(o=document.getElementById("calEventTime")).showPicker)==null?void 0:u.call(o)},children:i.jsx("input",{id:"calEventTime",type:"time",value:Xn.time,onChange:o=>ws({...Xn,time:o.target.value}),className:"input-premium cursor-pointer"})}),i.jsx("textarea",{placeholder:" ()",value:Xn.memo,onChange:o=>ws({...Xn,memo:o.target.value}),className:"input-premium resize-none h-20"})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[Nl&&i.jsx("button",{onClick:()=>{ws({title:"",time:"09:00",memo:""}),Xi(null)},className:"btn-premium btn-outline flex-1",children:" "}),i.jsx("button",{type:"button",onClick:()=>Qr(!1),className:"btn-premium btn-outline flex-1",children:""}),i.jsx("button",{onClick:()=>{if(!Xn.title.trim())return alert("  ");const o={id:Nl||Date.now(),date:_l,title:Xn.title.trim(),time:Xn.time,memo:Xn.memo.trim(),createdBy:(n==null?void 0:n.name)||"unknown",createdAt:new Date().toISOString()};Mf(o),af(!1),ws({title:"",time:"09:00",memo:""}),Xi(null),alert(Nl?" !":" !")},className:"btn-premium btn-gold flex-1",children:Nl?"":""})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:i.jsx("button",{onClick:()=>{Yi(_l),Qr(!1),ni("route")},className:"w-full text-center text-sm text-slate-200 font-bold",children:"  "})})]})}),rn&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>bs(null),children:i.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:rn.name}),i.jsx("p",{className:"text-sm text-slate-200",children:rn.date})]}),i.jsx("button",{type:"button",onClick:()=>bs(null),className:"text-slate-200 hover:text-slate-200 text-xl",children:""})]}),(()=>{const o=(rn.stops||[]).filter(p=>p.visited).length,u=(rn.stops||[]).length,f=u>0?Math.round(o/u*100):0;return i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm text-slate-200",children:""}),i.jsxs("span",{className:"text-sm font-bold text-slate-200",children:[o,"/",u," (",f,"%)"]})]}),i.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 transition-all duration-300",style:{width:`${f}%`}})})]})})(),i.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:(rn.stops||[]).map((o,u)=>i.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all ${o.visited?"bg-emerald-900/30":"bg-slate-700"}`,children:[i.jsx("button",{onClick:()=>VS(rn.id,o.id),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all flex-shrink-0 ${o.visited?"bg-emerald-500 text-white":"bg-slate-600 border-2 border-slate-600 text-slate-200 hover:border-primary-400"}`,children:o.visited?"":u+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:`font-bold text-sm break-words leading-snug ${o.visited?"text-emerald-700":"text-slate-100"}`,children:o.name}),o.address&&i.jsx("p",{className:"text-xs text-slate-200 break-words",children:o.address})]}),o.lat&&o.lng&&i.jsx("button",{type:"button",onClick:()=>GS(o),className:"w-8 h-8 rounded-lg bg-slate-700 hover:bg-slate-600 text-primary-600 flex items-center justify-center text-sm flex-shrink-0"})]},o.id))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{type:"button",onClick:()=>{bs(null),qS(rn)},className:"w-full btn-premium btn-outline py-2",children:"   "}),rn.status!=="completed"&&i.jsx("button",{type:"button",onClick:()=>HS(rn.id),className:"w-full btn-premium btn-gold py-3 font-bold",children:"  ( )"})]})]})}),dC&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>{Hi(!1),Yn({name:"",content:"",type:"broker",memo:""})},children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:Bt?" ":"  "}),i.jsx("button",{type:"button",onClick:()=>{Hi(!1),Yn({name:"",content:"",type:"broker",memo:""})},className:"text-slate-400 text-2xl hover:text-white",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"text",placeholder:"  (:  )",value:Et.name,onChange:o=>Yn({...Et,name:o.target.value}),className:"input-premium"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Yn({...Et,type:"broker"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Et.type==="broker"?"bg-blue-500/20 text-blue-400 border border-blue-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""}),i.jsx("button",{onClick:()=>Yn({...Et,type:"customer"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Et.type==="customer"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""})]}),i.jsx("textarea",{placeholder:"  ",value:Et.content,onChange:o=>Yn({...Et,content:o.target.value}),rows:"4",className:"input-premium resize-none"}),i.jsx("input",{type:"text",placeholder:" ()",value:Et.memo,onChange:o=>Yn({...Et,memo:o.target.value}),className:"input-premium"})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{type:"button",onClick:()=>{Hi(!1),Yn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-outline",children:""}),i.jsx("button",{onClick:()=>{if(!Et.name.trim()||!Et.content.trim())return alert("   ");const o={id:(Bt==null?void 0:Bt.id)||Date.now(),name:Et.name.trim(),content:Et.content.trim(),type:Et.type,memo:Et.memo.trim(),useCount:(Bt==null?void 0:Bt.useCount)||0,successCount:(Bt==null?void 0:Bt.successCount)||0,createdAt:(Bt==null?void 0:Bt.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};Z0(o),Hi(!1),Fh(null),Yn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-gold",children:Bt?" ":""})]})]})}),uC&&xs&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>bc(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"AI "}),i.jsx("button",{type:"button",onClick:()=>bc(!1),className:"text-slate-400 text-2xl hover:text-white",children:""})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("p",{className:"text-sm text-slate-400 mb-1",children:[" : ",i.jsx("span",{className:"text-brand-purple font-medium",children:xs.name})]}),i.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:i.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:xs.content})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"  :"}),i.jsx("textarea",{value:ol,onChange:o=>Uh(o.target.value),placeholder:"  ",rows:"3",className:"input-premium resize-none w-full"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),i.jsx("input",{type:"text",value:f0,onChange:o=>p0(o.target.value),placeholder:"   ?",className:"input-premium w-full"})]}),i.jsx("button",{onClick:()=>{if(!ol.trim())return alert("  ");const o={id:Date.now(),mentId:xs.id,mentName:xs.name,original:xs.content,modified:ol,question:f0||" ",aiResponse:` !

:
    ${ol.length>xs.content.length?" ":" "} 
 ${ol.includes("?")?"   ":"   "}

 :
    .`,createdAt:new Date().toISOString()};hS(o),alert(" !  ."),bc(!1),Uh(""),p0("")},className:"w-full btn-premium btn-gold",children:"AI  "}),_c.filter(o=>o.mentId===xs.id).length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[i.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"    "}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:_c.filter(o=>o.mentId===xs.id).slice(-3).reverse().map(o=>i.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/30 border border-slate-700/30",children:[i.jsx("p",{className:"text-xs text-slate-500 mb-1",children:new Date(o.createdAt).toLocaleString("ko-KR")}),i.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:o.question})]},o.id))})]})]})})]})},ED=()=>{const t=document.getElementById("initial-loading");t&&(t.classList.add("hidden"),setTimeout(()=>t.remove(),300))};Ap.createRoot(document.getElementById("root")).render(i.jsx(jI.StrictMode,{children:i.jsx(kD,{})}));ED();
