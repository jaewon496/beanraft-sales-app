(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function Zj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dg={exports:{}},bc={},ug={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),e1=Symbol.for("react.portal"),t1=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),s1=Symbol.for("react.profiler"),r1=Symbol.for("react.provider"),l1=Symbol.for("react.context"),a1=Symbol.for("react.forward_ref"),i1=Symbol.for("react.suspense"),o1=Symbol.for("react.memo"),c1=Symbol.for("react.lazy"),rx=Symbol.iterator;function d1(t){return t===null||typeof t!="object"?null:(t=rx&&t[rx]||t["@@iterator"],typeof t=="function"?t:null)}var hg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mg=Object.assign,pg={};function wl(t,e,n){this.props=t,this.context=e,this.refs=pg,this.updater=n||hg}wl.prototype.isReactComponent={};wl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fg(){}fg.prototype=wl.prototype;function Kh(t,e,n){this.props=t,this.context=e,this.refs=pg,this.updater=n||hg}var Yh=Kh.prototype=new fg;Yh.constructor=Kh;mg(Yh,wl.prototype);Yh.isPureReactComponent=!0;var lx=Array.isArray,xg=Object.prototype.hasOwnProperty,Qh={current:null},gg={key:!0,ref:!0,__self:!0,__source:!0};function vg(t,e,n){var r,l={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)xg.call(e,r)&&!gg.hasOwnProperty(r)&&(l[r]=e[r]);var d=arguments.length-2;if(d===1)l.children=n;else if(1<d){for(var h=Array(d),p=0;p<d;p++)h[p]=arguments[p+2];l.children=h}if(t&&t.defaultProps)for(r in d=t.defaultProps,d)l[r]===void 0&&(l[r]=d[r]);return{$$typeof:Za,type:t,key:a,ref:o,props:l,_owner:Qh.current}}function u1(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function h1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ax=/\/+/g;function Xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?h1(""+t.key):e.toString(36)}function Co(t,e,n,r,l){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Za:case e1:o=!0}}if(o)return o=t,l=l(o),t=r===""?"."+Xd(o,0):r,lx(l)?(n="",t!=null&&(n=t.replace(ax,"$&/")+"/"),Co(l,e,n,"",function(p){return p})):l!=null&&(qh(l)&&(l=u1(l,n+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(ax,"$&/")+"/")+t)),e.push(l)),1;if(o=0,r=r===""?".":r+":",lx(t))for(var d=0;d<t.length;d++){a=t[d];var h=r+Xd(a,d);o+=Co(a,e,n,h,l)}else if(h=d1(t),typeof h=="function")for(t=h.call(t),d=0;!(a=t.next()).done;)a=a.value,h=r+Xd(a,d++),o+=Co(a,e,n,h,l);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ro(t,e,n){if(t==null)return t;var r=[],l=0;return Co(t,r,"","",function(a){return e.call(n,a,l++)}),r}function m1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},So={transition:null},p1={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:So,ReactCurrentOwner:Qh};function yg(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ro,forEach:function(t,e,n){ro(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ro(t,function(){e++}),e},toArray:function(t){return ro(t,function(e){return e})||[]},only:function(t){if(!qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=wl;he.Fragment=t1;he.Profiler=s1;he.PureComponent=Kh;he.StrictMode=n1;he.Suspense=i1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p1;he.act=yg;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mg({},t.props),l=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Qh.current),e.key!==void 0&&(l=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)xg.call(e,h)&&!gg.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){d=Array(h);for(var p=0;p<h;p++)d[p]=arguments[p+2];r.children=d}return{$$typeof:Za,type:t.type,key:l,ref:a,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:l1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r1,_context:t},t.Consumer=t};he.createElement=vg;he.createFactory=function(t){var e=vg.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:a1,render:t}};he.isValidElement=qh;he.lazy=function(t){return{$$typeof:c1,_payload:{_status:-1,_result:t},_init:m1}};he.memo=function(t,e){return{$$typeof:o1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=So.transition;So.transition={};try{t()}finally{So.transition=e}};he.unstable_act=yg;he.useCallback=function(t,e){return _t.current.useCallback(t,e)};he.useContext=function(t){return _t.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};he.useEffect=function(t,e){return _t.current.useEffect(t,e)};he.useId=function(){return _t.current.useId()};he.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return _t.current.useMemo(t,e)};he.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};he.useRef=function(t){return _t.current.useRef(t)};he.useState=function(t){return _t.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return _t.current.useTransition()};he.version="18.3.1";ug.exports=he;var g=ug.exports;const f1=Zj(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1=g,g1=Symbol.for("react.element"),v1=Symbol.for("react.fragment"),y1=Object.prototype.hasOwnProperty,b1=x1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N1={key:!0,ref:!0,__self:!0,__source:!0};function bg(t,e,n){var r,l={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)y1.call(e,r)&&!N1.hasOwnProperty(r)&&(l[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)l[r]===void 0&&(l[r]=e[r]);return{$$typeof:g1,type:t,key:a,ref:o,props:l,_owner:b1.current}}bc.Fragment=v1;bc.jsx=bg;bc.jsxs=bg;dg.exports=bc;var s=dg.exports,Au={},Ng={exports:{}},Bt={},jg={exports:{}},wg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ae){var ce=H.length;H.push(ae);e:for(;0<ce;){var Ee=ce-1>>>1,Le=H[Ee];if(0<l(Le,ae))H[Ee]=ae,H[ce]=Le,ce=Ee;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ae=H[0],ce=H.pop();if(ce!==ae){H[0]=ce;e:for(var Ee=0,Le=H.length,rs=Le>>>1;Ee<rs;){var en=2*(Ee+1)-1,Cr=H[en],En=en+1,tn=H[En];if(0>l(Cr,ce))En<Le&&0>l(tn,Cr)?(H[Ee]=tn,H[En]=ce,Ee=En):(H[Ee]=Cr,H[en]=ce,Ee=en);else if(En<Le&&0>l(tn,ce))H[Ee]=tn,H[En]=ce,Ee=En;else break e}}return ae}function l(H,ae){var ce=H.sortIndex-ae.sortIndex;return ce!==0?ce:H.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,d=o.now();t.unstable_now=function(){return o.now()-d}}var h=[],p=[],N=1,y=null,w=3,I=!1,D=!1,$=!1,ie=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var ae=n(p);ae!==null;){if(ae.callback===null)r(p);else if(ae.startTime<=H)r(p),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=n(p)}}function T(H){if($=!1,S(H),!D)if(n(h)!==null)D=!0,Fs(K);else{var ae=n(p);ae!==null&&_r(T,ae.startTime-H)}}function K(H,ae){D=!1,$&&($=!1,C(J),J=-1),I=!0;var ce=w;try{for(S(ae),y=n(h);y!==null&&(!(y.expirationTime>ae)||H&&!bt());){var Ee=y.callback;if(typeof Ee=="function"){y.callback=null,w=y.priorityLevel;var Le=Ee(y.expirationTime<=ae);ae=t.unstable_now(),typeof Le=="function"?y.callback=Le:y===n(h)&&r(h),S(ae)}else r(h);y=n(h)}if(y!==null)var rs=!0;else{var en=n(p);en!==null&&_r(T,en.startTime-ae),rs=!1}return rs}finally{y=null,w=ce,I=!1}}var U=!1,X=null,J=-1,De=5,de=-1;function bt(){return!(t.unstable_now()-de<De)}function Os(){if(X!==null){var H=t.unstable_now();de=H;var ae=!0;try{ae=X(!0,H)}finally{ae?kn():(U=!1,X=null)}}else U=!1}var kn;if(typeof j=="function")kn=function(){j(Os)};else if(typeof MessageChannel<"u"){var jr=new MessageChannel,wr=jr.port2;jr.port1.onmessage=Os,kn=function(){wr.postMessage(null)}}else kn=function(){ie(Os,0)};function Fs(H){X=H,U||(U=!0,kn())}function _r(H,ae){J=ie(function(){H(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){D||I||(D=!0,Fs(K))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(H){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var ce=w;w=ae;try{return H()}finally{w=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ce=w;w=H;try{return ae()}finally{w=ce}},t.unstable_scheduleCallback=function(H,ae,ce){var Ee=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ee+ce:Ee):ce=Ee,H){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ce+Le,H={id:N++,callback:ae,priorityLevel:H,startTime:ce,expirationTime:Le,sortIndex:-1},ce>Ee?(H.sortIndex=ce,e(p,H),n(h)===null&&H===n(p)&&($?(C(J),J=-1):$=!0,_r(T,ce-Ee))):(H.sortIndex=Le,e(h,H),D||I||(D=!0,Fs(K))),H},t.unstable_shouldYield=bt,t.unstable_wrapCallback=function(H){var ae=w;return function(){var ce=w;w=ae;try{return H.apply(this,arguments)}finally{w=ce}}}})(wg);jg.exports=wg;var j1=jg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=g,zt=j1;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _g=new Set,Ra={};function vr(t,e){ml(t,e),ml(t+"Capture",e)}function ml(t,e){for(Ra[t]=e,t=0;t<e.length;t++)_g.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,_1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ix={},ox={};function C1(t){return Lu.call(ox,t)?!0:Lu.call(ix,t)?!1:_1.test(t)?ox[t]=!0:(ix[t]=!0,!1)}function S1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function k1(t,e,n,r){if(e===null||typeof e>"u"||S1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,l,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xh,Jh);ct[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xh,Jh);ct[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xh,Jh);ct[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zh(t,e,n,r){var l=ct.hasOwnProperty(e)?ct[e]:null;(l!==null?l.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k1(e,n,l,r)&&(n=null),r||l===null?C1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):l.mustUseProperty?t[l.propertyName]=n===null?l.type===3?!1:"":n:(e=l.attributeName,r=l.attributeNamespace,n===null?t.removeAttribute(e):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lo=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Sg=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),Fu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),ps=Symbol.for("react.lazy"),kg=Symbol.for("react.offscreen"),cx=Symbol.iterator;function na(t){return t===null||typeof t!="object"?null:(t=cx&&t[cx]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Jd;function pa(t){if(Jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jd=e&&e[1]||""}return`
`+Jd+t}var Zd=!1;function eu(t,e){if(!t||Zd)return"";Zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var l=p.stack.split(`
`),a=r.stack.split(`
`),o=l.length-1,d=a.length-1;1<=o&&0<=d&&l[o]!==a[d];)d--;for(;1<=o&&0<=d;o--,d--)if(l[o]!==a[d]){if(o!==1||d!==1)do if(o--,d--,0>d||l[o]!==a[d]){var h=`
`+l[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=d);break}}}finally{Zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pa(t):""}function E1(t){switch(t.tag){case 5:return pa(t.type);case 16:return pa("Lazy");case 13:return pa("Suspense");case 19:return pa("SuspenseList");case 0:case 2:case 15:return t=eu(t.type,!1),t;case 11:return t=eu(t.type.render,!1),t;case 1:return t=eu(t.type,!0),t;default:return""}}function zu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vr:return"Fragment";case Hr:return"Portal";case Ou:return"Profiler";case em:return"StrictMode";case Fu:return"Suspense";case $u:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sg:return(t.displayName||"Context")+".Consumer";case Cg:return(t._context.displayName||"Context")+".Provider";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:zu(t.type)||"Memo";case ps:e=t._payload,t=t._init;try{return zu(t(e))}catch{}}return null}function I1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zu(e);case 8:return e===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T1(t){var e=Eg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ao(t){t._valueTracker||(t._valueTracker=T1(t))}function Ig(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Eg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bu(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tg(t,e){e=e.checked,e!=null&&Zh(t,"checked",e,!1)}function Uu(t,e){Tg(t,e);var n=Rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wu(t,e.type,Rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ux(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wu(t,e,n){(e!=="number"||Fo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function rl(t,e,n,r){if(t=t.options,e){e={};for(var l=0;l<n.length;l++)e["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=e.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rs(n),e=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,r&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function Hu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(fa(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rs(n)}}function Rg(t,e){var n=Rs(e.value),r=Rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var io,Pg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,l){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,l)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=io.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R1=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(t){R1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),va[e]=va[t]})});function Dg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||va.hasOwnProperty(t)&&va[t]?(""+e).trim():e+"px"}function Ag(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Dg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,l):t[n]=l}}var M1=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gu(t,e){if(e){if(M1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=null;function sm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qu=null,ll=null,al=null;function px(t){if(t=ni(t)){if(typeof Qu!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Cc(e),Qu(t.stateNode,t.type,e))}}function Lg(t){ll?al?al.push(t):al=[t]:ll=t}function Og(){if(ll){var t=ll,e=al;if(al=ll=null,px(t),e)for(t=0;t<e.length;t++)px(e[t])}}function Fg(t,e){return t(e)}function $g(){}var tu=!1;function zg(t,e,n){if(tu)return t(e,n);tu=!0;try{return Fg(t,e,n)}finally{tu=!1,(ll!==null||al!==null)&&($g(),Og())}}function Pa(t,e){var n=t.stateNode;if(n===null)return null;var r=Cc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var qu=!1;if(qn)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){qu=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{qu=!1}function P1(t,e,n,r,l,a,o,d,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(N){this.onError(N)}}var ya=!1,$o=null,zo=!1,Xu=null,D1={onError:function(t){ya=!0,$o=t}};function A1(t,e,n,r,l,a,o,d,h){ya=!1,$o=null,P1.apply(D1,arguments)}function L1(t,e,n,r,l,a,o,d,h){if(A1.apply(this,arguments),ya){if(ya){var p=$o;ya=!1,$o=null}else throw Error(O(198));zo||(zo=!0,Xu=p)}}function yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fx(t){if(yr(t)!==t)throw Error(O(188))}function O1(t){var e=t.alternate;if(!e){if(e=yr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var l=n.return;if(l===null)break;var a=l.alternate;if(a===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return fx(l),t;if(a===r)return fx(l),e;a=a.sibling}throw Error(O(188))}if(n.return!==r.return)n=l,r=a;else{for(var o=!1,d=l.child;d;){if(d===n){o=!0,n=l,r=a;break}if(d===r){o=!0,r=l,n=a;break}d=d.sibling}if(!o){for(d=a.child;d;){if(d===n){o=!0,n=a,r=l;break}if(d===r){o=!0,r=a,n=l;break}d=d.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Ug(t){return t=O1(t),t!==null?Wg(t):null}function Wg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wg(t);if(e!==null)return e;t=t.sibling}return null}var Hg=zt.unstable_scheduleCallback,xx=zt.unstable_cancelCallback,F1=zt.unstable_shouldYield,$1=zt.unstable_requestPaint,We=zt.unstable_now,z1=zt.unstable_getCurrentPriorityLevel,rm=zt.unstable_ImmediatePriority,Vg=zt.unstable_UserBlockingPriority,Bo=zt.unstable_NormalPriority,B1=zt.unstable_LowPriority,Gg=zt.unstable_IdlePriority,Nc=null,Cn=null;function U1(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:V1,W1=Math.log,H1=Math.LN2;function V1(t){return t>>>=0,t===0?32:31-(W1(t)/H1|0)|0}var oo=64,co=4194304;function xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,l=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var d=o&~l;d!==0?r=xa(d):(a&=o,a!==0&&(r=xa(a)))}else o=n&~l,o!==0?r=xa(o):a!==0&&(r=xa(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&l)&&(l=r&-r,a=e&-e,l>=a||l===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),l=1<<n,r|=t[n],e&=~l;return r}function G1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,l=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-un(a),d=1<<o,h=l[o];h===-1?(!(d&n)||d&r)&&(l[o]=G1(d,e)):h<=e&&(t.expiredLanes|=d),a&=~d}}function Ju(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kg(){var t=oo;return oo<<=1,!(oo&4194240)&&(oo=64),t}function nu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ei(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function Y1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var l=31-un(n),a=1<<l;e[l]=0,r[l]=-1,t[l]=-1,n&=~a}}function lm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),l=1<<r;l&e|t[r]&e&&(t[r]|=e),n&=~l}}var we=0;function Yg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qg,am,qg,Xg,Jg,Zu=!1,uo=[],bs=null,Ns=null,js=null,Da=new Map,Aa=new Map,xs=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gx(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(e.pointerId)}}function ra(t,e,n,r,l,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},e!==null&&(e=ni(e),e!==null&&am(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function q1(t,e,n,r,l){switch(e){case"focusin":return bs=ra(bs,t,e,n,r,l),!0;case"dragenter":return Ns=ra(Ns,t,e,n,r,l),!0;case"mouseover":return js=ra(js,t,e,n,r,l),!0;case"pointerover":var a=l.pointerId;return Da.set(a,ra(Da.get(a)||null,t,e,n,r,l)),!0;case"gotpointercapture":return a=l.pointerId,Aa.set(a,ra(Aa.get(a)||null,t,e,n,r,l)),!0}return!1}function Zg(t){var e=rr(t.target);if(e!==null){var n=yr(e);if(n!==null){if(e=n.tag,e===13){if(e=Bg(n),e!==null){t.blockedOn=e,Jg(t.priority,function(){qg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ko(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yu=r,n.target.dispatchEvent(r),Yu=null}else return e=ni(n),e!==null&&am(e),t.blockedOn=n,!1;e.shift()}return!0}function vx(t,e,n){ko(t)&&n.delete(e)}function X1(){Zu=!1,bs!==null&&ko(bs)&&(bs=null),Ns!==null&&ko(Ns)&&(Ns=null),js!==null&&ko(js)&&(js=null),Da.forEach(vx),Aa.forEach(vx)}function la(t,e){t.blockedOn===e&&(t.blockedOn=null,Zu||(Zu=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,X1)))}function La(t){function e(l){return la(l,t)}if(0<uo.length){la(uo[0],t);for(var n=1;n<uo.length;n++){var r=uo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&la(bs,t),Ns!==null&&la(Ns,t),js!==null&&la(js,t),Da.forEach(e),Aa.forEach(e),n=0;n<xs.length;n++)r=xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xs.length&&(n=xs[0],n.blockedOn===null);)Zg(n),n.blockedOn===null&&xs.shift()}var il=ns.ReactCurrentBatchConfig,Wo=!0;function J1(t,e,n,r){var l=we,a=il.transition;il.transition=null;try{we=1,im(t,e,n,r)}finally{we=l,il.transition=a}}function Z1(t,e,n,r){var l=we,a=il.transition;il.transition=null;try{we=4,im(t,e,n,r)}finally{we=l,il.transition=a}}function im(t,e,n,r){if(Wo){var l=eh(t,e,n,r);if(l===null)hu(t,e,r,Ho,n),gx(t,r);else if(q1(l,t,e,n,r))r.stopPropagation();else if(gx(t,r),e&4&&-1<Q1.indexOf(t)){for(;l!==null;){var a=ni(l);if(a!==null&&Qg(a),a=eh(t,e,n,r),a===null&&hu(t,e,r,Ho,n),a===l)break;l=a}l!==null&&r.stopPropagation()}else hu(t,e,r,null,n)}}var Ho=null;function eh(t,e,n,r){if(Ho=null,t=sm(r),t=rr(t),t!==null)if(e=yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ho=t,null}function ev(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z1()){case rm:return 1;case Vg:return 4;case Bo:case B1:return 16;case Gg:return 536870912;default:return 16}default:return 16}}var vs=null,om=null,Eo=null;function tv(){if(Eo)return Eo;var t,e=om,n=e.length,r,l="value"in vs?vs.value:vs.textContent,a=l.length;for(t=0;t<n&&e[t]===l[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===l[a-r];r++);return Eo=l.slice(t,1<r?1-r:void 0)}function Io(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ho(){return!0}function yx(){return!1}function Ut(t){function e(n,r,l,a,o){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ho:yx,this.isPropagationStopped=yx,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),e}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=Ut(_l),ti=Be({},_l,{view:0,detail:0}),ew=Ut(ti),su,ru,aa,jc=Be({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(su=t.screenX-aa.screenX,ru=t.screenY-aa.screenY):ru=su=0,aa=t),su)},movementY:function(t){return"movementY"in t?t.movementY:ru}}),bx=Ut(jc),tw=Be({},jc,{dataTransfer:0}),nw=Ut(tw),sw=Be({},ti,{relatedTarget:0}),lu=Ut(sw),rw=Be({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),lw=Ut(rw),aw=Be({},_l,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iw=Ut(aw),ow=Be({},_l,{data:0}),Nx=Ut(ow),cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uw[t])?!!e[t]:!1}function dm(){return hw}var mw=Be({},ti,{key:function(t){if(t.key){var e=cw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dm,charCode:function(t){return t.type==="keypress"?Io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pw=Ut(mw),fw=Be({},jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jx=Ut(fw),xw=Be({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dm}),gw=Ut(xw),vw=Be({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),yw=Ut(vw),bw=Be({},jc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nw=Ut(bw),jw=[9,13,27,32],um=qn&&"CompositionEvent"in window,ba=null;qn&&"documentMode"in document&&(ba=document.documentMode);var ww=qn&&"TextEvent"in window&&!ba,nv=qn&&(!um||ba&&8<ba&&11>=ba),wx=" ",_x=!1;function sv(t,e){switch(t){case"keyup":return jw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gr=!1;function _w(t,e){switch(t){case"compositionend":return rv(e);case"keypress":return e.which!==32?null:(_x=!0,wx);case"textInput":return t=e.data,t===wx&&_x?null:t;default:return null}}function Cw(t,e){if(Gr)return t==="compositionend"||!um&&sv(t,e)?(t=tv(),Eo=om=vs=null,Gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nv&&e.locale!=="ko"?null:e.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sw[t.type]:e==="textarea"}function lv(t,e,n,r){Lg(r),e=Vo(e,"onChange"),0<e.length&&(n=new cm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Na=null,Oa=null;function kw(t){xv(t,0)}function wc(t){var e=Qr(t);if(Ig(e))return t}function Ew(t,e){if(t==="change")return e}var av=!1;if(qn){var au;if(qn){var iu="oninput"in document;if(!iu){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),iu=typeof Sx.oninput=="function"}au=iu}else au=!1;av=au&&(!document.documentMode||9<document.documentMode)}function kx(){Na&&(Na.detachEvent("onpropertychange",iv),Oa=Na=null)}function iv(t){if(t.propertyName==="value"&&wc(Oa)){var e=[];lv(e,Oa,t,sm(t)),zg(kw,e)}}function Iw(t,e,n){t==="focusin"?(kx(),Na=e,Oa=n,Na.attachEvent("onpropertychange",iv)):t==="focusout"&&kx()}function Tw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(Oa)}function Rw(t,e){if(t==="click")return wc(e)}function Mw(t,e){if(t==="input"||t==="change")return wc(e)}function Pw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:Pw;function Fa(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!Lu.call(e,l)||!pn(t[l],e[l]))return!1}return!0}function Ex(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ix(t,e){var n=Ex(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ex(n)}}function ov(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ov(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cv(){for(var t=window,e=Fo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fo(t.document)}return e}function hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dw(t){var e=cv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ov(n.ownerDocument.documentElement,n)){if(r!==null&&hm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var l=n.textContent.length,a=Math.min(r.start,l);r=r.end===void 0?a:Math.min(r.end,l),!t.extend&&a>r&&(l=r,r=a,a=l),l=Ix(n,a);var o=Ix(n,r);l&&o&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Aw=qn&&"documentMode"in document&&11>=document.documentMode,Kr=null,th=null,ja=null,nh=!1;function Tx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nh||Kr==null||Kr!==Fo(r)||(r=Kr,"selectionStart"in r&&hm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ja&&Fa(ja,r)||(ja=r,r=Vo(th,"onSelect"),0<r.length&&(e=new cm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kr)))}function mo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yr={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionend:mo("Transition","TransitionEnd")},ou={},dv={};qn&&(dv=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function _c(t){if(ou[t])return ou[t];if(!Yr[t])return t;var e=Yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dv)return ou[t]=e[n];return t}var uv=_c("animationend"),hv=_c("animationiteration"),mv=_c("animationstart"),pv=_c("transitionend"),fv=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){fv.set(t,e),vr(e,[t])}for(var cu=0;cu<Rx.length;cu++){var du=Rx[cu],Lw=du.toLowerCase(),Ow=du[0].toUpperCase()+du.slice(1);Ds(Lw,"on"+Ow)}Ds(uv,"onAnimationEnd");Ds(hv,"onAnimationIteration");Ds(mv,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(pv,"onTransitionEnd");ml("onMouseEnter",["mouseout","mouseover"]);ml("onMouseLeave",["mouseout","mouseover"]);ml("onPointerEnter",["pointerout","pointerover"]);ml("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ga));function Mx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,L1(r,e,void 0,t),t.currentTarget=null}function xv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],l=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var d=r[o],h=d.instance,p=d.currentTarget;if(d=d.listener,h!==a&&l.isPropagationStopped())break e;Mx(l,d,p),a=h}else for(o=0;o<r.length;o++){if(d=r[o],h=d.instance,p=d.currentTarget,d=d.listener,h!==a&&l.isPropagationStopped())break e;Mx(l,d,p),a=h}}}if(zo)throw t=Xu,zo=!1,Xu=null,t}function Ie(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(gv(e,t,2,!1),n.add(r))}function uu(t,e,n){var r=0;e&&(r|=4),gv(n,t,r,e)}var po="_reactListening"+Math.random().toString(36).slice(2);function $a(t){if(!t[po]){t[po]=!0,_g.forEach(function(n){n!=="selectionchange"&&(Fw.has(n)||uu(n,!1,t),uu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[po]||(e[po]=!0,uu("selectionchange",!1,e))}}function gv(t,e,n,r){switch(ev(e)){case 1:var l=J1;break;case 4:l=Z1;break;default:l=im}n=l.bind(null,e,n,t),l=void 0,!qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),r?l!==void 0?t.addEventListener(e,n,{capture:!0,passive:l}):t.addEventListener(e,n,!0):l!==void 0?t.addEventListener(e,n,{passive:l}):t.addEventListener(e,n,!1)}function hu(t,e,n,r,l){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var d=r.stateNode.containerInfo;if(d===l||d.nodeType===8&&d.parentNode===l)break;if(o===4)for(o=r.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===l||h.nodeType===8&&h.parentNode===l))return;o=o.return}for(;d!==null;){if(o=rr(d),o===null)return;if(h=o.tag,h===5||h===6){r=a=o;continue e}d=d.parentNode}}r=r.return}zg(function(){var p=a,N=sm(n),y=[];e:{var w=fv.get(t);if(w!==void 0){var I=cm,D=t;switch(t){case"keypress":if(Io(n)===0)break e;case"keydown":case"keyup":I=pw;break;case"focusin":D="focus",I=lu;break;case"focusout":D="blur",I=lu;break;case"beforeblur":case"afterblur":I=lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=bx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=gw;break;case uv:case hv:case mv:I=lw;break;case pv:I=yw;break;case"scroll":I=ew;break;case"wheel":I=Nw;break;case"copy":case"cut":case"paste":I=iw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=jx}var $=(e&4)!==0,ie=!$&&t==="scroll",C=$?w!==null?w+"Capture":null:w;$=[];for(var j=p,S;j!==null;){S=j;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,C!==null&&(T=Pa(j,C),T!=null&&$.push(za(j,T,S)))),ie)break;j=j.return}0<$.length&&(w=new I(w,D,null,n,N),y.push({event:w,listeners:$}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",w&&n!==Yu&&(D=n.relatedTarget||n.fromElement)&&(rr(D)||D[Xn]))break e;if((I||w)&&(w=N.window===N?N:(w=N.ownerDocument)?w.defaultView||w.parentWindow:window,I?(D=n.relatedTarget||n.toElement,I=p,D=D?rr(D):null,D!==null&&(ie=yr(D),D!==ie||D.tag!==5&&D.tag!==6)&&(D=null)):(I=null,D=p),I!==D)){if($=bx,T="onMouseLeave",C="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&($=jx,T="onPointerLeave",C="onPointerEnter",j="pointer"),ie=I==null?w:Qr(I),S=D==null?w:Qr(D),w=new $(T,j+"leave",I,n,N),w.target=ie,w.relatedTarget=S,T=null,rr(N)===p&&($=new $(C,j+"enter",D,n,N),$.target=S,$.relatedTarget=ie,T=$),ie=T,I&&D)t:{for($=I,C=D,j=0,S=$;S;S=Ur(S))j++;for(S=0,T=C;T;T=Ur(T))S++;for(;0<j-S;)$=Ur($),j--;for(;0<S-j;)C=Ur(C),S--;for(;j--;){if($===C||C!==null&&$===C.alternate)break t;$=Ur($),C=Ur(C)}$=null}else $=null;I!==null&&Px(y,w,I,$,!1),D!==null&&ie!==null&&Px(y,ie,D,$,!0)}}e:{if(w=p?Qr(p):window,I=w.nodeName&&w.nodeName.toLowerCase(),I==="select"||I==="input"&&w.type==="file")var K=Ew;else if(Cx(w))if(av)K=Mw;else{K=Tw;var U=Iw}else(I=w.nodeName)&&I.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(K=Rw);if(K&&(K=K(t,p))){lv(y,K,n,N);break e}U&&U(t,w,p),t==="focusout"&&(U=w._wrapperState)&&U.controlled&&w.type==="number"&&Wu(w,"number",w.value)}switch(U=p?Qr(p):window,t){case"focusin":(Cx(U)||U.contentEditable==="true")&&(Kr=U,th=p,ja=null);break;case"focusout":ja=th=Kr=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Tx(y,n,N);break;case"selectionchange":if(Aw)break;case"keydown":case"keyup":Tx(y,n,N)}var X;if(um)e:{switch(t){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else Gr?sv(t,n)&&(J="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(nv&&n.locale!=="ko"&&(Gr||J!=="onCompositionStart"?J==="onCompositionEnd"&&Gr&&(X=tv()):(vs=N,om="value"in vs?vs.value:vs.textContent,Gr=!0)),U=Vo(p,J),0<U.length&&(J=new Nx(J,t,null,n,N),y.push({event:J,listeners:U}),X?J.data=X:(X=rv(n),X!==null&&(J.data=X)))),(X=ww?_w(t,n):Cw(t,n))&&(p=Vo(p,"onBeforeInput"),0<p.length&&(N=new Nx("onBeforeInput","beforeinput",null,n,N),y.push({event:N,listeners:p}),N.data=X))}xv(y,e)})}function za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vo(t,e){for(var n=e+"Capture",r=[];t!==null;){var l=t,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Pa(t,n),a!=null&&r.unshift(za(t,a,l)),a=Pa(t,e),a!=null&&r.push(za(t,a,l))),t=t.return}return r}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Px(t,e,n,r,l){for(var a=e._reactName,o=[];n!==null&&n!==r;){var d=n,h=d.alternate,p=d.stateNode;if(h!==null&&h===r)break;d.tag===5&&p!==null&&(d=p,l?(h=Pa(n,a),h!=null&&o.unshift(za(n,h,d))):l||(h=Pa(n,a),h!=null&&o.push(za(n,h,d)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $w=/\r\n?/g,zw=/\u0000|\uFFFD/g;function Dx(t){return(typeof t=="string"?t:""+t).replace($w,`
`).replace(zw,"")}function fo(t,e,n){if(e=Dx(e),Dx(t)!==e&&n)throw Error(O(425))}function Go(){}var sh=null,rh=null;function lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ah=typeof setTimeout=="function"?setTimeout:void 0,Bw=typeof clearTimeout=="function"?clearTimeout:void 0,Ax=typeof Promise=="function"?Promise:void 0,Uw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ax<"u"?function(t){return Ax.resolve(null).then(t).catch(Ww)}:ah;function Ww(t){setTimeout(function(){throw t})}function mu(t,e){var n=e,r=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){t.removeChild(l),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);La(e)}function ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cl=Math.random().toString(36).slice(2),wn="__reactFiber$"+Cl,Ba="__reactProps$"+Cl,Xn="__reactContainer$"+Cl,ih="__reactEvents$"+Cl,Hw="__reactListeners$"+Cl,Vw="__reactHandles$"+Cl;function rr(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lx(t);t!==null;){if(n=t[wn])return n;t=Lx(t)}return e}t=n,n=t.parentNode}return null}function ni(t){return t=t[wn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Cc(t){return t[Ba]||null}var oh=[],qr=-1;function As(t){return{current:t}}function Me(t){0>qr||(t.current=oh[qr],oh[qr]=null,qr--)}function ke(t,e){qr++,oh[qr]=t.current,t.current=e}var Ms={},yt=As(Ms),Mt=As(!1),dr=Ms;function pl(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in n)l[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=l),l}function Pt(t){return t=t.childContextTypes,t!=null}function Ko(){Me(Mt),Me(yt)}function Ox(t,e,n){if(yt.current!==Ms)throw Error(O(168));ke(yt,e),ke(Mt,n)}function vv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in e))throw Error(O(108,I1(t)||"Unknown",l));return Be({},n,r)}function Yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,dr=yt.current,ke(yt,t),ke(Mt,Mt.current),!0}function Fx(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=vv(t,e,dr),r.__reactInternalMemoizedMergedChildContext=t,Me(Mt),Me(yt),ke(yt,t)):Me(Mt),ke(Mt,n)}var Hn=null,Sc=!1,pu=!1;function yv(t){Hn===null?Hn=[t]:Hn.push(t)}function Gw(t){Sc=!0,yv(t)}function Ls(){if(!pu&&Hn!==null){pu=!0;var t=0,e=we;try{var n=Hn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,Sc=!1}catch(l){throw Hn!==null&&(Hn=Hn.slice(t+1)),Hg(rm,Ls),l}finally{we=e,pu=!1}}return null}var Xr=[],Jr=0,Qo=null,qo=0,Gt=[],Kt=0,ur=null,Vn=1,Gn="";function Zs(t,e){Xr[Jr++]=qo,Xr[Jr++]=Qo,Qo=t,qo=e}function bv(t,e,n){Gt[Kt++]=Vn,Gt[Kt++]=Gn,Gt[Kt++]=ur,ur=t;var r=Vn;t=Gn;var l=32-un(r)-1;r&=~(1<<l),n+=1;var a=32-un(e)+l;if(30<a){var o=l-l%5;a=(r&(1<<o)-1).toString(32),r>>=o,l-=o,Vn=1<<32-un(e)+l|n<<l|r,Gn=a+t}else Vn=1<<a|n<<l|r,Gn=t}function mm(t){t.return!==null&&(Zs(t,1),bv(t,1,0))}function pm(t){for(;t===Qo;)Qo=Xr[--Jr],Xr[Jr]=null,qo=Xr[--Jr],Xr[Jr]=null;for(;t===ur;)ur=Gt[--Kt],Gt[Kt]=null,Gn=Gt[--Kt],Gt[Kt]=null,Vn=Gt[--Kt],Gt[Kt]=null}var Ft=null,Ot=null,Ae=!1,on=null;function Nv(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $x(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Ot=ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ur!==null?{id:Vn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Ot=null,!0):!1;default:return!1}}function ch(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dh(t){if(Ae){var e=Ot;if(e){var n=e;if(!$x(t,e)){if(ch(t))throw Error(O(418));e=ws(n.nextSibling);var r=Ft;e&&$x(t,e)?Nv(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Ft=t)}}else{if(ch(t))throw Error(O(418));t.flags=t.flags&-4097|2,Ae=!1,Ft=t}}}function zx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function xo(t){if(t!==Ft)return!1;if(!Ae)return zx(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lh(t.type,t.memoizedProps)),e&&(e=Ot)){if(ch(t))throw jv(),Error(O(418));for(;e;)Nv(t,e),e=ws(e.nextSibling)}if(zx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=ws(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Ft?ws(t.stateNode.nextSibling):null;return!0}function jv(){for(var t=Ot;t;)t=ws(t.nextSibling)}function fl(){Ot=Ft=null,Ae=!1}function fm(t){on===null?on=[t]:on.push(t)}var Kw=ns.ReactCurrentBatchConfig;function ia(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var l=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var d=l.refs;o===null?delete d[a]:d[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function go(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bx(t){var e=t._init;return e(t._payload)}function wv(t){function e(C,j){if(t){var S=C.deletions;S===null?(C.deletions=[j],C.flags|=16):S.push(j)}}function n(C,j){if(!t)return null;for(;j!==null;)e(C,j),j=j.sibling;return null}function r(C,j){for(C=new Map;j!==null;)j.key!==null?C.set(j.key,j):C.set(j.index,j),j=j.sibling;return C}function l(C,j){return C=ks(C,j),C.index=0,C.sibling=null,C}function a(C,j,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<j?(C.flags|=2,j):S):(C.flags|=2,j)):(C.flags|=1048576,j)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function d(C,j,S,T){return j===null||j.tag!==6?(j=Nu(S,C.mode,T),j.return=C,j):(j=l(j,S),j.return=C,j)}function h(C,j,S,T){var K=S.type;return K===Vr?N(C,j,S.props.children,T,S.key):j!==null&&(j.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===ps&&Bx(K)===j.type)?(T=l(j,S.props),T.ref=ia(C,j,S),T.return=C,T):(T=Lo(S.type,S.key,S.props,null,C.mode,T),T.ref=ia(C,j,S),T.return=C,T)}function p(C,j,S,T){return j===null||j.tag!==4||j.stateNode.containerInfo!==S.containerInfo||j.stateNode.implementation!==S.implementation?(j=ju(S,C.mode,T),j.return=C,j):(j=l(j,S.children||[]),j.return=C,j)}function N(C,j,S,T,K){return j===null||j.tag!==7?(j=cr(S,C.mode,T,K),j.return=C,j):(j=l(j,S),j.return=C,j)}function y(C,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Nu(""+j,C.mode,S),j.return=C,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case lo:return S=Lo(j.type,j.key,j.props,null,C.mode,S),S.ref=ia(C,null,j),S.return=C,S;case Hr:return j=ju(j,C.mode,S),j.return=C,j;case ps:var T=j._init;return y(C,T(j._payload),S)}if(fa(j)||na(j))return j=cr(j,C.mode,S,null),j.return=C,j;go(C,j)}return null}function w(C,j,S,T){var K=j!==null?j.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return K!==null?null:d(C,j,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lo:return S.key===K?h(C,j,S,T):null;case Hr:return S.key===K?p(C,j,S,T):null;case ps:return K=S._init,w(C,j,K(S._payload),T)}if(fa(S)||na(S))return K!==null?null:N(C,j,S,T,null);go(C,S)}return null}function I(C,j,S,T,K){if(typeof T=="string"&&T!==""||typeof T=="number")return C=C.get(S)||null,d(j,C,""+T,K);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case lo:return C=C.get(T.key===null?S:T.key)||null,h(j,C,T,K);case Hr:return C=C.get(T.key===null?S:T.key)||null,p(j,C,T,K);case ps:var U=T._init;return I(C,j,S,U(T._payload),K)}if(fa(T)||na(T))return C=C.get(S)||null,N(j,C,T,K,null);go(j,T)}return null}function D(C,j,S,T){for(var K=null,U=null,X=j,J=j=0,De=null;X!==null&&J<S.length;J++){X.index>J?(De=X,X=null):De=X.sibling;var de=w(C,X,S[J],T);if(de===null){X===null&&(X=De);break}t&&X&&de.alternate===null&&e(C,X),j=a(de,j,J),U===null?K=de:U.sibling=de,U=de,X=De}if(J===S.length)return n(C,X),Ae&&Zs(C,J),K;if(X===null){for(;J<S.length;J++)X=y(C,S[J],T),X!==null&&(j=a(X,j,J),U===null?K=X:U.sibling=X,U=X);return Ae&&Zs(C,J),K}for(X=r(C,X);J<S.length;J++)De=I(X,C,J,S[J],T),De!==null&&(t&&De.alternate!==null&&X.delete(De.key===null?J:De.key),j=a(De,j,J),U===null?K=De:U.sibling=De,U=De);return t&&X.forEach(function(bt){return e(C,bt)}),Ae&&Zs(C,J),K}function $(C,j,S,T){var K=na(S);if(typeof K!="function")throw Error(O(150));if(S=K.call(S),S==null)throw Error(O(151));for(var U=K=null,X=j,J=j=0,De=null,de=S.next();X!==null&&!de.done;J++,de=S.next()){X.index>J?(De=X,X=null):De=X.sibling;var bt=w(C,X,de.value,T);if(bt===null){X===null&&(X=De);break}t&&X&&bt.alternate===null&&e(C,X),j=a(bt,j,J),U===null?K=bt:U.sibling=bt,U=bt,X=De}if(de.done)return n(C,X),Ae&&Zs(C,J),K;if(X===null){for(;!de.done;J++,de=S.next())de=y(C,de.value,T),de!==null&&(j=a(de,j,J),U===null?K=de:U.sibling=de,U=de);return Ae&&Zs(C,J),K}for(X=r(C,X);!de.done;J++,de=S.next())de=I(X,C,J,de.value,T),de!==null&&(t&&de.alternate!==null&&X.delete(de.key===null?J:de.key),j=a(de,j,J),U===null?K=de:U.sibling=de,U=de);return t&&X.forEach(function(Os){return e(C,Os)}),Ae&&Zs(C,J),K}function ie(C,j,S,T){if(typeof S=="object"&&S!==null&&S.type===Vr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case lo:e:{for(var K=S.key,U=j;U!==null;){if(U.key===K){if(K=S.type,K===Vr){if(U.tag===7){n(C,U.sibling),j=l(U,S.props.children),j.return=C,C=j;break e}}else if(U.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===ps&&Bx(K)===U.type){n(C,U.sibling),j=l(U,S.props),j.ref=ia(C,U,S),j.return=C,C=j;break e}n(C,U);break}else e(C,U);U=U.sibling}S.type===Vr?(j=cr(S.props.children,C.mode,T,S.key),j.return=C,C=j):(T=Lo(S.type,S.key,S.props,null,C.mode,T),T.ref=ia(C,j,S),T.return=C,C=T)}return o(C);case Hr:e:{for(U=S.key;j!==null;){if(j.key===U)if(j.tag===4&&j.stateNode.containerInfo===S.containerInfo&&j.stateNode.implementation===S.implementation){n(C,j.sibling),j=l(j,S.children||[]),j.return=C,C=j;break e}else{n(C,j);break}else e(C,j);j=j.sibling}j=ju(S,C.mode,T),j.return=C,C=j}return o(C);case ps:return U=S._init,ie(C,j,U(S._payload),T)}if(fa(S))return D(C,j,S,T);if(na(S))return $(C,j,S,T);go(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,j!==null&&j.tag===6?(n(C,j.sibling),j=l(j,S),j.return=C,C=j):(n(C,j),j=Nu(S,C.mode,T),j.return=C,C=j),o(C)):n(C,j)}return ie}var xl=wv(!0),_v=wv(!1),Xo=As(null),Jo=null,Zr=null,xm=null;function gm(){xm=Zr=Jo=null}function vm(t){var e=Xo.current;Me(Xo),t._currentValue=e}function uh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ol(t,e){Jo=t,xm=Zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(xm!==t)if(t={context:t,memoizedValue:e,next:null},Zr===null){if(Jo===null)throw Error(O(308));Zr=t,Jo.dependencies={lanes:0,firstContext:t}}else Zr=Zr.next=t;return e}var lr=null;function ym(t){lr===null?lr=[t]:lr.push(t)}function Cv(t,e,n,r){var l=e.interleaved;return l===null?(n.next=n,ym(e)):(n.next=l.next,l.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fs=!1;function bm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _s(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var l=r.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),r.pending=e,Jn(t,n)}return l=r.interleaved,l===null?(e.next=e,ym(r)):(e.next=l.next,l.next=e),r.interleaved=e,Jn(t,n)}function To(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lm(t,n)}}function Ux(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?l=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?l=a=e:a=a.next=e}else l=a=e;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zo(t,e,n,r){var l=t.updateQueue;fs=!1;var a=l.firstBaseUpdate,o=l.lastBaseUpdate,d=l.shared.pending;if(d!==null){l.shared.pending=null;var h=d,p=h.next;h.next=null,o===null?a=p:o.next=p,o=h;var N=t.alternate;N!==null&&(N=N.updateQueue,d=N.lastBaseUpdate,d!==o&&(d===null?N.firstBaseUpdate=p:d.next=p,N.lastBaseUpdate=h))}if(a!==null){var y=l.baseState;o=0,N=p=h=null,d=a;do{var w=d.lane,I=d.eventTime;if((r&w)===w){N!==null&&(N=N.next={eventTime:I,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var D=t,$=d;switch(w=e,I=n,$.tag){case 1:if(D=$.payload,typeof D=="function"){y=D.call(I,y,w);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=$.payload,w=typeof D=="function"?D.call(I,y,w):D,w==null)break e;y=Be({},y,w);break e;case 2:fs=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,w=l.effects,w===null?l.effects=[d]:w.push(d))}else I={eventTime:I,lane:w,tag:d.tag,payload:d.payload,callback:d.callback,next:null},N===null?(p=N=I,h=y):N=N.next=I,o|=w;if(d=d.next,d===null){if(d=l.shared.pending,d===null)break;w=d,d=w.next,w.next=null,l.lastBaseUpdate=w,l.shared.pending=null}}while(!0);if(N===null&&(h=y),l.baseState=h,l.firstBaseUpdate=p,l.lastBaseUpdate=N,e=l.shared.interleaved,e!==null){l=e;do o|=l.lane,l=l.next;while(l!==e)}else a===null&&(l.shared.lanes=0);mr|=o,t.lanes=o,t.memoizedState=y}}function Wx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(O(191,l));l.call(r)}}}var si={},Sn=As(si),Ua=As(si),Wa=As(si);function ar(t){if(t===si)throw Error(O(174));return t}function Nm(t,e){switch(ke(Wa,e),ke(Ua,t),ke(Sn,si),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vu(e,t)}Me(Sn),ke(Sn,e)}function gl(){Me(Sn),Me(Ua),Me(Wa)}function kv(t){ar(Wa.current);var e=ar(Sn.current),n=Vu(e,t.type);e!==n&&(ke(Ua,t),ke(Sn,n))}function jm(t){Ua.current===t&&(Me(Sn),Me(Ua))}var $e=As(0);function ec(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fu=[];function wm(){for(var t=0;t<fu.length;t++)fu[t]._workInProgressVersionPrimary=null;fu.length=0}var Ro=ns.ReactCurrentDispatcher,xu=ns.ReactCurrentBatchConfig,hr=0,ze=null,Ye=null,tt=null,tc=!1,wa=!1,Ha=0,Yw=0;function mt(){throw Error(O(321))}function _m(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Cm(t,e,n,r,l,a){if(hr=a,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ro.current=t===null||t.memoizedState===null?Jw:Zw,t=n(r,l),wa){a=0;do{if(wa=!1,Ha=0,25<=a)throw Error(O(301));a+=1,tt=Ye=null,e.updateQueue=null,Ro.current=e2,t=n(r,l)}while(wa)}if(Ro.current=nc,e=Ye!==null&&Ye.next!==null,hr=0,tt=Ye=ze=null,tc=!1,e)throw Error(O(300));return t}function Sm(){var t=Ha!==0;return Ha=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?ze.memoizedState=tt=t:tt=tt.next=t,tt}function Jt(){if(Ye===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?ze.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(O(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?ze.memoizedState=tt=t:tt=tt.next=t}return tt}function Va(t,e){return typeof e=="function"?e(t):e}function gu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Ye,l=r.baseQueue,a=n.pending;if(a!==null){if(l!==null){var o=l.next;l.next=a.next,a.next=o}r.baseQueue=l=a,n.pending=null}if(l!==null){a=l.next,r=r.baseState;var d=o=null,h=null,p=a;do{var N=p.lane;if((hr&N)===N)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:N,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(d=h=y,o=r):h=h.next=y,ze.lanes|=N,mr|=N}p=p.next}while(p!==null&&p!==a);h===null?o=r:h.next=d,pn(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){l=t;do a=l.lane,ze.lanes|=a,mr|=a,l=l.next;while(l!==t)}else l===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,l=n.pending,a=e.memoizedState;if(l!==null){n.pending=null;var o=l=l.next;do a=t(a,o.action),o=o.next;while(o!==l);pn(a,e.memoizedState)||(Tt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Ev(){}function Iv(t,e){var n=ze,r=Jt(),l=e(),a=!pn(r.memoizedState,l);if(a&&(r.memoizedState=l,Tt=!0),r=r.queue,km(Mv.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Ga(9,Rv.bind(null,n,r,l,e),void 0,null),rt===null)throw Error(O(349));hr&30||Tv(n,e,l)}return l}function Tv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rv(t,e,n,r){e.value=n,e.getSnapshot=r,Pv(e)&&Dv(t)}function Mv(t,e,n){return n(function(){Pv(e)&&Dv(t)})}function Pv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Dv(t){var e=Jn(t,1);e!==null&&hn(e,t,1,-1)}function Hx(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},e.queue=t,t=t.dispatch=Xw.bind(null,ze,t),[e.memoizedState,t]}function Ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Av(){return Jt().memoizedState}function Mo(t,e,n,r){var l=jn();ze.flags|=t,l.memoizedState=Ga(1|e,n,void 0,r===void 0?null:r)}function kc(t,e,n,r){var l=Jt();r=r===void 0?null:r;var a=void 0;if(Ye!==null){var o=Ye.memoizedState;if(a=o.destroy,r!==null&&_m(r,o.deps)){l.memoizedState=Ga(e,n,a,r);return}}ze.flags|=t,l.memoizedState=Ga(1|e,n,a,r)}function Vx(t,e){return Mo(8390656,8,t,e)}function km(t,e){return kc(2048,8,t,e)}function Lv(t,e){return kc(4,2,t,e)}function Ov(t,e){return kc(4,4,t,e)}function Fv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $v(t,e,n){return n=n!=null?n.concat([t]):null,kc(4,4,Fv.bind(null,e,t),n)}function Em(){}function zv(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_m(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Bv(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_m(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uv(t,e,n){return hr&21?(pn(n,e)||(n=Kg(),ze.lanes|=n,mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function Qw(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=xu.transition;xu.transition={};try{t(!1),e()}finally{we=n,xu.transition=r}}function Wv(){return Jt().memoizedState}function qw(t,e,n){var r=Ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hv(t))Vv(e,n);else if(n=Cv(t,e,n,r),n!==null){var l=wt();hn(n,t,r,l),Gv(n,e,r)}}function Xw(t,e,n){var r=Ss(t),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hv(t))Vv(e,l);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,d=a(o,n);if(l.hasEagerState=!0,l.eagerState=d,pn(d,o)){var h=e.interleaved;h===null?(l.next=l,ym(e)):(l.next=h.next,h.next=l),e.interleaved=l;return}}catch{}finally{}n=Cv(t,e,l,r),n!==null&&(l=wt(),hn(n,t,r,l),Gv(n,e,r))}}function Hv(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function Vv(t,e){wa=tc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lm(t,n)}}var nc={readContext:Xt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Jw={readContext:Xt,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:Vx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mo(4194308,4,Fv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mo(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qw.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:Hx,useDebugValue:Em,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=Hx(!1),e=t[0];return t=Qw.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,l=jn();if(Ae){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),rt===null)throw Error(O(349));hr&30||Tv(r,e,n)}l.memoizedState=n;var a={value:n,getSnapshot:e};return l.queue=a,Vx(Mv.bind(null,r,a,t),[t]),r.flags|=2048,Ga(9,Rv.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=jn(),e=rt.identifierPrefix;if(Ae){var n=Gn,r=Vn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zw={readContext:Xt,useCallback:zv,useContext:Xt,useEffect:km,useImperativeHandle:$v,useInsertionEffect:Lv,useLayoutEffect:Ov,useMemo:Bv,useReducer:gu,useRef:Av,useState:function(){return gu(Va)},useDebugValue:Em,useDeferredValue:function(t){var e=Jt();return Uv(e,Ye.memoizedState,t)},useTransition:function(){var t=gu(Va)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Ev,useSyncExternalStore:Iv,useId:Wv,unstable_isNewReconciler:!1},e2={readContext:Xt,useCallback:zv,useContext:Xt,useEffect:km,useImperativeHandle:$v,useInsertionEffect:Lv,useLayoutEffect:Ov,useMemo:Bv,useReducer:vu,useRef:Av,useState:function(){return vu(Va)},useDebugValue:Em,useDeferredValue:function(t){var e=Jt();return Ye===null?e.memoizedState=t:Uv(e,Ye.memoizedState,t)},useTransition:function(){var t=vu(Va)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Ev,useSyncExternalStore:Iv,useId:Wv,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ec={isMounted:function(t){return(t=t._reactInternals)?yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),l=Ss(t),a=Yn(r,l);a.payload=e,n!=null&&(a.callback=n),e=_s(t,a,l),e!==null&&(hn(e,t,l,r),To(e,t,l))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),l=Ss(t),a=Yn(r,l);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=_s(t,a,l),e!==null&&(hn(e,t,l,r),To(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Ss(t),l=Yn(n,r);l.tag=2,e!=null&&(l.callback=e),e=_s(t,l,r),e!==null&&(hn(e,t,r,n),To(e,t,r))}};function Gx(t,e,n,r,l,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Fa(n,r)||!Fa(l,a):!0}function Kv(t,e,n){var r=!1,l=Ms,a=e.contextType;return typeof a=="object"&&a!==null?a=Xt(a):(l=Pt(e)?dr:yt.current,r=e.contextTypes,a=(r=r!=null)?pl(t,l):Ms),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ec,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=a),e}function Kx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ec.enqueueReplaceState(e,e.state,null)}function mh(t,e,n,r){var l=t.stateNode;l.props=n,l.state=t.memoizedState,l.refs={},bm(t);var a=e.contextType;typeof a=="object"&&a!==null?l.context=Xt(a):(a=Pt(e)?dr:yt.current,l.context=pl(t,a)),l.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(hh(t,e,a,n),l.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&Ec.enqueueReplaceState(l,l.state,null),Zo(t,n,l,r),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function vl(t,e){try{var n="",r=e;do n+=E1(r),r=r.return;while(r);var l=n}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:l,digest:null}}function yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ph(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t2=typeof WeakMap=="function"?WeakMap:Map;function Yv(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rc||(rc=!0,_h=r),ph(t,e)},n}function Qv(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var l=e.value;n.payload=function(){return r(l)},n.callback=function(){ph(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ph(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new t2;var l=new Set;r.set(e,l)}else l=r.get(e),l===void 0&&(l=new Set,r.set(e,l));l.has(n)||(l.add(n),t=f2.bind(null,t,e,n),e.then(t,t))}function Qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qx(t,e,n,r,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,_s(n,e,1))),n.lanes|=1),t)}var n2=ns.ReactCurrentOwner,Tt=!1;function jt(t,e,n,r){e.child=t===null?_v(e,null,n,r):xl(e,t.child,n,r)}function Xx(t,e,n,r,l){n=n.render;var a=e.ref;return ol(e,l),r=Cm(t,e,n,r,a,l),n=Sm(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,Zn(t,e,l)):(Ae&&n&&mm(e),e.flags|=1,jt(t,e,r,l),e.child)}function Jx(t,e,n,r,l){if(t===null){var a=n.type;return typeof a=="function"&&!Lm(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,qv(t,e,a,r,l)):(t=Lo(n.type,null,r,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&l)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Fa,n(o,r)&&t.ref===e.ref)return Zn(t,e,l)}return e.flags|=1,t=ks(a,r),t.ref=e.ref,t.return=e,e.child=t}function qv(t,e,n,r,l){if(t!==null){var a=t.memoizedProps;if(Fa(a,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=a,(t.lanes&l)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Zn(t,e,l)}return fh(t,e,n,r,l)}function Xv(t,e,n){var r=e.pendingProps,l=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(tl,Lt),Lt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(tl,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ke(tl,Lt),Lt|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ke(tl,Lt),Lt|=r;return jt(t,e,l,n),e.child}function Jv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fh(t,e,n,r,l){var a=Pt(n)?dr:yt.current;return a=pl(e,a),ol(e,l),n=Cm(t,e,n,r,a,l),r=Sm(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,Zn(t,e,l)):(Ae&&r&&mm(e),e.flags|=1,jt(t,e,n,l),e.child)}function Zx(t,e,n,r,l){if(Pt(n)){var a=!0;Yo(e)}else a=!1;if(ol(e,l),e.stateNode===null)Po(t,e),Kv(e,n,r),mh(e,n,r,l),r=!0;else if(t===null){var o=e.stateNode,d=e.memoizedProps;o.props=d;var h=o.context,p=n.contextType;typeof p=="object"&&p!==null?p=Xt(p):(p=Pt(n)?dr:yt.current,p=pl(e,p));var N=n.getDerivedStateFromProps,y=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==r||h!==p)&&Kx(e,o,r,p),fs=!1;var w=e.memoizedState;o.state=w,Zo(e,r,o,l),h=e.memoizedState,d!==r||w!==h||Mt.current||fs?(typeof N=="function"&&(hh(e,n,N,r),h=e.memoizedState),(d=fs||Gx(e,n,d,r,w,h,p))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=p,r=d):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sv(t,e),d=e.memoizedProps,p=e.type===e.elementType?d:ln(e.type,d),o.props=p,y=e.pendingProps,w=o.context,h=n.contextType,typeof h=="object"&&h!==null?h=Xt(h):(h=Pt(n)?dr:yt.current,h=pl(e,h));var I=n.getDerivedStateFromProps;(N=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==y||w!==h)&&Kx(e,o,r,h),fs=!1,w=e.memoizedState,o.state=w,Zo(e,r,o,l);var D=e.memoizedState;d!==y||w!==D||Mt.current||fs?(typeof I=="function"&&(hh(e,n,I,r),D=e.memoizedState),(p=fs||Gx(e,n,p,r,w,D,h)||!1)?(N||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,D,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,D,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=D),o.props=r,o.state=D,o.context=h,r=p):(typeof o.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return xh(t,e,n,r,a,l)}function xh(t,e,n,r,l,a){Jv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return l&&Fx(e,n,!1),Zn(t,e,a);r=e.stateNode,n2.current=e;var d=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xl(e,t.child,null,a),e.child=xl(e,null,d,a)):jt(t,e,d,a),e.memoizedState=r.state,l&&Fx(e,n,!0),e.child}function Zv(t){var e=t.stateNode;e.pendingContext?Ox(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ox(t,e.context,!1),Nm(t,e.containerInfo)}function e0(t,e,n,r,l){return fl(),fm(l),e.flags|=256,jt(t,e,n,r),e.child}var gh={dehydrated:null,treeContext:null,retryLane:0};function vh(t){return{baseLanes:t,cachePool:null,transitions:null}}function ey(t,e,n){var r=e.pendingProps,l=$e.current,a=!1,o=(e.flags&128)!==0,d;if((d=o)||(d=t!==null&&t.memoizedState===null?!1:(l&2)!==0),d?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),ke($e,l&1),t===null)return dh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Rc(o,r,0,null),t=cr(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=vh(n),e.memoizedState=gh,t):Im(e,o));if(l=t.memoizedState,l!==null&&(d=l.dehydrated,d!==null))return s2(t,e,o,r,d,l,n);if(a){a=r.fallback,o=e.mode,l=t.child,d=l.sibling;var h={mode:"hidden",children:r.children};return!(o&1)&&e.child!==l?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=ks(l,h),r.subtreeFlags=l.subtreeFlags&14680064),d!==null?a=ks(d,a):(a=cr(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?vh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=gh,r}return a=t.child,t=a.sibling,r=ks(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Im(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vo(t,e,n,r){return r!==null&&fm(r),xl(e,t.child,null,n),t=Im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s2(t,e,n,r,l,a,o){if(n)return e.flags&256?(e.flags&=-257,r=yu(Error(O(422))),vo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,l=e.mode,r=Rc({mode:"visible",children:r.children},l,0,null),a=cr(a,l,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&xl(e,t.child,null,o),e.child.memoizedState=vh(o),e.memoizedState=gh,a);if(!(e.mode&1))return vo(t,e,o,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var d=r.dgst;return r=d,a=Error(O(419)),r=yu(a,r,void 0),vo(t,e,o,r)}if(d=(o&t.childLanes)!==0,Tt||d){if(r=rt,r!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|o)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,Jn(t,l),hn(r,t,l,-1))}return Am(),r=yu(Error(O(421))),vo(t,e,o,r)}return l.data==="$?"?(e.flags|=128,e.child=t.child,e=x2.bind(null,t),l._reactRetry=e,null):(t=a.treeContext,Ot=ws(l.nextSibling),Ft=e,Ae=!0,on=null,t!==null&&(Gt[Kt++]=Vn,Gt[Kt++]=Gn,Gt[Kt++]=ur,Vn=t.id,Gn=t.overflow,ur=e),e=Im(e,r.children),e.flags|=4096,e)}function t0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uh(t.return,e,n)}function bu(t,e,n,r,l){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=l)}function ty(t,e,n){var r=e.pendingProps,l=r.revealOrder,a=r.tail;if(jt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,n,e);else if(t.tag===19)t0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke($e,r),!(e.mode&1))e.memoizedState=null;else switch(l){case"forwards":for(n=e.child,l=null;n!==null;)t=n.alternate,t!==null&&ec(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=e.child,e.child=null):(l=n.sibling,n.sibling=null),bu(e,!1,l,n,a);break;case"backwards":for(n=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&ec(t)===null){e.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}bu(e,!0,n,null,a);break;case"together":bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Po(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r2(t,e,n){switch(e.tag){case 3:Zv(e),fl();break;case 5:kv(e);break;case 1:Pt(e.type)&&Yo(e);break;case 4:Nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,l=e.memoizedProps.value;ke(Xo,r._currentValue),r._currentValue=l;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?ey(t,e,n):(ke($e,$e.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);ke($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ty(t,e,n);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ke($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,Xv(t,e,n)}return Zn(t,e,n)}var ny,yh,sy,ry;ny=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yh=function(){};sy=function(t,e,n,r){var l=t.memoizedProps;if(l!==r){t=e.stateNode,ar(Sn.current);var a=null;switch(n){case"input":l=Bu(t,l),r=Bu(t,r),a=[];break;case"select":l=Be({},l,{value:void 0}),r=Be({},r,{value:void 0}),a=[];break;case"textarea":l=Hu(t,l),r=Hu(t,r),a=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Go)}Gu(n,r);var o;n=null;for(p in l)if(!r.hasOwnProperty(p)&&l.hasOwnProperty(p)&&l[p]!=null)if(p==="style"){var d=l[p];for(o in d)d.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ra.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in r){var h=r[p];if(d=l!=null?l[p]:void 0,r.hasOwnProperty(p)&&h!==d&&(h!=null||d!=null))if(p==="style")if(d){for(o in d)!d.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in h)h.hasOwnProperty(o)&&d[o]!==h[o]&&(n||(n={}),n[o]=h[o])}else n||(a||(a=[]),a.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(a=a||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ra.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Ie("scroll",t),a||d===h||(a=[])):(a=a||[]).push(p,h))}n&&(a=a||[]).push("style",n);var p=a;(e.updateQueue=p)&&(e.flags|=4)}};ry=function(t,e,n,r){n!==r&&(e.flags|=4)};function oa(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function l2(t,e,n){var r=e.pendingProps;switch(pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Pt(e.type)&&Ko(),pt(e),null;case 3:return r=e.stateNode,gl(),Me(Mt),Me(yt),wm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(kh(on),on=null))),yh(t,e),pt(e),null;case 5:jm(e);var l=ar(Wa.current);if(n=e.type,t!==null&&e.stateNode!=null)sy(t,e,n,r,l),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return pt(e),null}if(t=ar(Sn.current),xo(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[wn]=e,r[Ba]=a,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(l=0;l<ga.length;l++)Ie(ga[l],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":dx(r,a),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ie("invalid",r);break;case"textarea":hx(r,a),Ie("invalid",r)}Gu(n,a),l=null;for(var o in a)if(a.hasOwnProperty(o)){var d=a[o];o==="children"?typeof d=="string"?r.textContent!==d&&(a.suppressHydrationWarning!==!0&&fo(r.textContent,d,t),l=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&fo(r.textContent,d,t),l=["children",""+d]):Ra.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":ao(r),ux(r,a,!0);break;case"textarea":ao(r),mx(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Go)}r=l,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wn]=e,t[Ba]=r,ny(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ku(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),l=r;break;case"iframe":case"object":case"embed":Ie("load",t),l=r;break;case"video":case"audio":for(l=0;l<ga.length;l++)Ie(ga[l],t);l=r;break;case"source":Ie("error",t),l=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),l=r;break;case"details":Ie("toggle",t),l=r;break;case"input":dx(t,r),l=Bu(t,r),Ie("invalid",t);break;case"option":l=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},l=Be({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":hx(t,r),l=Hu(t,r),Ie("invalid",t);break;default:l=r}Gu(n,l),d=l;for(a in d)if(d.hasOwnProperty(a)){var h=d[a];a==="style"?Ag(t,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pg(t,h)):a==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ma(t,h):typeof h=="number"&&Ma(t,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ra.hasOwnProperty(a)?h!=null&&a==="onScroll"&&Ie("scroll",t):h!=null&&Zh(t,a,h,o))}switch(n){case"input":ao(t),ux(t,r,!1);break;case"textarea":ao(t),mx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rs(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?rl(t,!!r.multiple,a,!1):r.defaultValue!=null&&rl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=Go)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)ry(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=ar(Wa.current),ar(Sn.current),xo(e)){if(r=e.stateNode,n=e.memoizedProps,r[wn]=e,(a=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:fo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fo(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=e,e.stateNode=r}return pt(e),null;case 13:if(Me($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Ot!==null&&e.mode&1&&!(e.flags&128))jv(),fl(),e.flags|=98560,a=!1;else if(a=xo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(O(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(O(317));a[wn]=e}else fl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),a=!1}else on!==null&&(kh(on),on=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?Qe===0&&(Qe=3):Am())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return gl(),yh(t,e),t===null&&$a(e.stateNode.containerInfo),pt(e),null;case 10:return vm(e.type._context),pt(e),null;case 17:return Pt(e.type)&&Ko(),pt(e),null;case 19:if(Me($e),a=e.memoizedState,a===null)return pt(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)oa(a,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ec(t),o!==null){for(e.flags|=128,oa(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke($e,$e.current&1|2),e.child}t=t.sibling}a.tail!==null&&We()>yl&&(e.flags|=128,r=!0,oa(a,!1),e.lanes=4194304)}else{if(!r)if(t=ec(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ae)return pt(e),null}else 2*We()-a.renderingStartTime>yl&&n!==1073741824&&(e.flags|=128,r=!0,oa(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=We(),e.sibling=null,n=$e.current,ke($e,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Dm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function a2(t,e){switch(pm(e),e.tag){case 1:return Pt(e.type)&&Ko(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gl(),Me(Mt),Me(yt),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jm(e),null;case 13:if(Me($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));fl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me($e),null;case 4:return gl(),null;case 10:return vm(e.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var yo=!1,ft=!1,i2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function el(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function bh(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var n0=!1;function o2(t,e){if(sh=Wo,t=cv(),hm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,d=-1,h=-1,p=0,N=0,y=t,w=null;t:for(;;){for(var I;y!==n||l!==0&&y.nodeType!==3||(d=o+l),y!==a||r!==0&&y.nodeType!==3||(h=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(I=y.firstChild)!==null;)w=y,y=I;for(;;){if(y===t)break t;if(w===n&&++p===l&&(d=o),w===a&&++N===r&&(h=o),(I=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=I}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(rh={focusedElem:t,selectionRange:n},Wo=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var $=D.memoizedProps,ie=D.memoizedState,C=e.stateNode,j=C.getSnapshotBeforeUpdate(e.elementType===e.type?$:ln(e.type,$),ie);C.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(T){Ue(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return D=n0,n0=!1,D}function _a(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&t)===t){var a=l.destroy;l.destroy=void 0,a!==void 0&&bh(e,n,a)}l=l.next}while(l!==r)}}function Ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ly(t){var e=t.alternate;e!==null&&(t.alternate=null,ly(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[Ba],delete e[ih],delete e[Hw],delete e[Vw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ay(t){return t.tag===5||t.tag===3||t.tag===4}function s0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ay(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Go));else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}function wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,n),t=t.sibling;t!==null;)wh(t,e,n),t=t.sibling}var at=null,an=!1;function hs(t,e,n){for(n=n.child;n!==null;)iy(t,e,n),n=n.sibling}function iy(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:ft||el(n,e);case 6:var r=at,l=an;at=null,hs(t,e,n),at=r,an=l,at!==null&&(an?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(an?(t=at,n=n.stateNode,t.nodeType===8?mu(t.parentNode,n):t.nodeType===1&&mu(t,n),La(t)):mu(at,n.stateNode));break;case 4:r=at,l=an,at=n.stateNode.containerInfo,an=!0,hs(t,e,n),at=r,an=l;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var a=l,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&bh(n,e,o),l=l.next}while(l!==r)}hs(t,e,n);break;case 1:if(!ft&&(el(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){Ue(n,e,d)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,hs(t,e,n),ft=r):hs(t,e,n);break;default:hs(t,e,n)}}function r0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new i2),e.forEach(function(r){var l=g2.bind(null,t,r);n.has(r)||(n.add(r),r.then(l,l))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var a=t,o=e,d=o;e:for(;d!==null;){switch(d.tag){case 5:at=d.stateNode,an=!1;break e;case 3:at=d.stateNode.containerInfo,an=!0;break e;case 4:at=d.stateNode.containerInfo,an=!0;break e}d=d.return}if(at===null)throw Error(O(160));iy(a,o,l),at=null,an=!1;var h=l.alternate;h!==null&&(h.return=null),l.return=null}catch(p){Ue(l,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oy(e,t),e=e.sibling}function oy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),Nn(t),r&4){try{_a(3,t,t.return),Ic(3,t)}catch($){Ue(t,t.return,$)}try{_a(5,t,t.return)}catch($){Ue(t,t.return,$)}}break;case 1:rn(e,t),Nn(t),r&512&&n!==null&&el(n,n.return);break;case 5:if(rn(e,t),Nn(t),r&512&&n!==null&&el(n,n.return),t.flags&32){var l=t.stateNode;try{Ma(l,"")}catch($){Ue(t,t.return,$)}}if(r&4&&(l=t.stateNode,l!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&Tg(l,a),Ku(d,o);var p=Ku(d,a);for(o=0;o<h.length;o+=2){var N=h[o],y=h[o+1];N==="style"?Ag(l,y):N==="dangerouslySetInnerHTML"?Pg(l,y):N==="children"?Ma(l,y):Zh(l,N,y,p)}switch(d){case"input":Uu(l,a);break;case"textarea":Rg(l,a);break;case"select":var w=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var I=a.value;I!=null?rl(l,!!a.multiple,I,!1):w!==!!a.multiple&&(a.defaultValue!=null?rl(l,!!a.multiple,a.defaultValue,!0):rl(l,!!a.multiple,a.multiple?[]:"",!1))}l[Ba]=a}catch($){Ue(t,t.return,$)}}break;case 6:if(rn(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(O(162));l=t.stateNode,a=t.memoizedProps;try{l.nodeValue=a}catch($){Ue(t,t.return,$)}}break;case 3:if(rn(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch($){Ue(t,t.return,$)}break;case 4:rn(e,t),Nn(t);break;case 13:rn(e,t),Nn(t),l=t.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Mm=We())),r&4&&r0(t);break;case 22:if(N=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(p=ft)||N,rn(e,t),ft=p):rn(e,t),Nn(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!N&&t.mode&1)for(Y=t,N=t.child;N!==null;){for(y=Y=N;Y!==null;){switch(w=Y,I=w.child,w.tag){case 0:case 11:case 14:case 15:_a(4,w,w.return);break;case 1:el(w,w.return);var D=w.stateNode;if(typeof D.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch($){Ue(r,n,$)}}break;case 5:el(w,w.return);break;case 22:if(w.memoizedState!==null){a0(y);continue}}I!==null?(I.return=w,Y=I):a0(y)}N=N.sibling}e:for(N=null,y=t;;){if(y.tag===5){if(N===null){N=y;try{l=y.stateNode,p?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=y.stateNode,h=y.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=Dg("display",o))}catch($){Ue(t,t.return,$)}}}else if(y.tag===6){if(N===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch($){Ue(t,t.return,$)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;N===y&&(N=null),y=y.return}N===y&&(N=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:rn(e,t),Nn(t),r&4&&r0(t);break;case 21:break;default:rn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ay(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Ma(l,""),r.flags&=-33);var a=s0(t);wh(t,a,l);break;case 3:case 4:var o=r.stateNode.containerInfo,d=s0(t);jh(t,d,o);break;default:throw Error(O(161))}}catch(h){Ue(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c2(t,e,n){Y=t,cy(t)}function cy(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var l=Y,a=l.child;if(l.tag===22&&r){var o=l.memoizedState!==null||yo;if(!o){var d=l.alternate,h=d!==null&&d.memoizedState!==null||ft;d=yo;var p=ft;if(yo=o,(ft=h)&&!p)for(Y=l;Y!==null;)o=Y,h=o.child,o.tag===22&&o.memoizedState!==null?i0(l):h!==null?(h.return=o,Y=h):i0(l);for(;a!==null;)Y=a,cy(a),a=a.sibling;Y=l,yo=d,ft=p}l0(t)}else l.subtreeFlags&8772&&a!==null?(a.return=l,Y=a):l0(t)}}function l0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var l=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Wx(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wx(e,o,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var N=p.memoizedState;if(N!==null){var y=N.dehydrated;y!==null&&La(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}ft||e.flags&512&&Nh(e)}catch(w){Ue(e,e.return,w)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function a0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function i0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ic(4,e)}catch(h){Ue(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var l=e.return;try{r.componentDidMount()}catch(h){Ue(e,l,h)}}var a=e.return;try{Nh(e)}catch(h){Ue(e,a,h)}break;case 5:var o=e.return;try{Nh(e)}catch(h){Ue(e,o,h)}}}catch(h){Ue(e,e.return,h)}if(e===t){Y=null;break}var d=e.sibling;if(d!==null){d.return=e.return,Y=d;break}Y=e.return}}var d2=Math.ceil,sc=ns.ReactCurrentDispatcher,Tm=ns.ReactCurrentOwner,qt=ns.ReactCurrentBatchConfig,ge=0,rt=null,Ge=null,ot=0,Lt=0,tl=As(0),Qe=0,Ka=null,mr=0,Tc=0,Rm=0,Ca=null,It=null,Mm=0,yl=1/0,Wn=null,rc=!1,_h=null,Cs=null,bo=!1,ys=null,lc=0,Sa=0,Ch=null,Do=-1,Ao=0;function wt(){return ge&6?We():Do!==-1?Do:Do=We()}function Ss(t){return t.mode&1?ge&2&&ot!==0?ot&-ot:Kw.transition!==null?(Ao===0&&(Ao=Kg()),Ao):(t=we,t!==0||(t=window.event,t=t===void 0?16:ev(t.type)),t):1}function hn(t,e,n,r){if(50<Sa)throw Sa=0,Ch=null,Error(O(185));ei(t,n,r),(!(ge&2)||t!==rt)&&(t===rt&&(!(ge&2)&&(Tc|=n),Qe===4&&gs(t,ot)),Dt(t,r),n===1&&ge===0&&!(e.mode&1)&&(yl=We()+500,Sc&&Ls()))}function Dt(t,e){var n=t.callbackNode;K1(t,e);var r=Uo(t,t===rt?ot:0);if(r===0)n!==null&&xx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xx(n),e===1)t.tag===0?Gw(o0.bind(null,t)):yv(o0.bind(null,t)),Uw(function(){!(ge&6)&&Ls()}),n=null;else{switch(Yg(r)){case 1:n=rm;break;case 4:n=Vg;break;case 16:n=Bo;break;case 536870912:n=Gg;break;default:n=Bo}n=gy(n,dy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dy(t,e){if(Do=-1,Ao=0,ge&6)throw Error(O(327));var n=t.callbackNode;if(cl()&&t.callbackNode!==n)return null;var r=Uo(t,t===rt?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ac(t,r);else{e=r;var l=ge;ge|=2;var a=hy();(rt!==t||ot!==e)&&(Wn=null,yl=We()+500,or(t,e));do try{m2();break}catch(d){uy(t,d)}while(!0);gm(),sc.current=a,ge=l,Ge!==null?e=0:(rt=null,ot=0,e=Qe)}if(e!==0){if(e===2&&(l=Ju(t),l!==0&&(r=l,e=Sh(t,l))),e===1)throw n=Ka,or(t,0),gs(t,r),Dt(t,We()),n;if(e===6)gs(t,r);else{if(l=t.current.alternate,!(r&30)&&!u2(l)&&(e=ac(t,r),e===2&&(a=Ju(t),a!==0&&(r=a,e=Sh(t,a))),e===1))throw n=Ka,or(t,0),gs(t,r),Dt(t,We()),n;switch(t.finishedWork=l,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:er(t,It,Wn);break;case 3:if(gs(t,r),(r&130023424)===r&&(e=Mm+500-We(),10<e)){if(Uo(t,0)!==0)break;if(l=t.suspendedLanes,(l&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=ah(er.bind(null,t,It,Wn),e);break}er(t,It,Wn);break;case 4:if(gs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,l=-1;0<r;){var o=31-un(r);a=1<<o,o=e[o],o>l&&(l=o),r&=~a}if(r=l,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*d2(r/1960))-r,10<r){t.timeoutHandle=ah(er.bind(null,t,It,Wn),r);break}er(t,It,Wn);break;case 5:er(t,It,Wn);break;default:throw Error(O(329))}}}return Dt(t,We()),t.callbackNode===n?dy.bind(null,t):null}function Sh(t,e){var n=Ca;return t.current.memoizedState.isDehydrated&&(or(t,e).flags|=256),t=ac(t,e),t!==2&&(e=It,It=n,e!==null&&kh(e)),t}function kh(t){It===null?It=t:It.push.apply(It,t)}function u2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],a=l.getSnapshot;l=l.value;try{if(!pn(a(),l))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gs(t,e){for(e&=~Rm,e&=~Tc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function o0(t){if(ge&6)throw Error(O(327));cl();var e=Uo(t,0);if(!(e&1))return Dt(t,We()),null;var n=ac(t,e);if(t.tag!==0&&n===2){var r=Ju(t);r!==0&&(e=r,n=Sh(t,r))}if(n===1)throw n=Ka,or(t,0),gs(t,e),Dt(t,We()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,er(t,It,Wn),Dt(t,We()),null}function Pm(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(yl=We()+500,Sc&&Ls())}}function pr(t){ys!==null&&ys.tag===0&&!(ge&6)&&cl();var e=ge;ge|=1;var n=qt.transition,r=we;try{if(qt.transition=null,we=1,t)return t()}finally{we=r,qt.transition=n,ge=e,!(ge&6)&&Ls()}}function Dm(){Lt=tl.current,Me(tl)}function or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bw(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(pm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ko();break;case 3:gl(),Me(Mt),Me(yt),wm();break;case 5:jm(r);break;case 4:gl();break;case 13:Me($e);break;case 19:Me($e);break;case 10:vm(r.type._context);break;case 22:case 23:Dm()}n=n.return}if(rt=t,Ge=t=ks(t.current,null),ot=Lt=e,Qe=0,Ka=null,Rm=Tc=mr=0,It=Ca=null,lr!==null){for(e=0;e<lr.length;e++)if(n=lr[e],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=l,r.next=o}n.pending=r}lr=null}return t}function uy(t,e){do{var n=Ge;try{if(gm(),Ro.current=nc,tc){for(var r=ze.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}tc=!1}if(hr=0,tt=Ye=ze=null,wa=!1,Ha=0,Tm.current=null,n===null||n.return===null){Qe=1,Ka=e,Ge=null;break}e:{var a=t,o=n.return,d=n,h=e;if(e=ot,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,N=d,y=N.tag;if(!(N.mode&1)&&(y===0||y===11||y===15)){var w=N.alternate;w?(N.updateQueue=w.updateQueue,N.memoizedState=w.memoizedState,N.lanes=w.lanes):(N.updateQueue=null,N.memoizedState=null)}var I=Qx(o);if(I!==null){I.flags&=-257,qx(I,o,d,a,e),I.mode&1&&Yx(a,p,e),e=I,h=p;var D=e.updateQueue;if(D===null){var $=new Set;$.add(h),e.updateQueue=$}else D.add(h);break e}else{if(!(e&1)){Yx(a,p,e),Am();break e}h=Error(O(426))}}else if(Ae&&d.mode&1){var ie=Qx(o);if(ie!==null){!(ie.flags&65536)&&(ie.flags|=256),qx(ie,o,d,a,e),fm(vl(h,d));break e}}a=h=vl(h,d),Qe!==4&&(Qe=2),Ca===null?Ca=[a]:Ca.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var C=Yv(a,h,e);Ux(a,C);break e;case 1:d=h;var j=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof j.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Cs===null||!Cs.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=Qv(a,d,e);Ux(a,T);break e}}a=a.return}while(a!==null)}py(n)}catch(K){e=K,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function hy(){var t=sc.current;return sc.current=nc,t===null?nc:t}function Am(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),rt===null||!(mr&268435455)&&!(Tc&268435455)||gs(rt,ot)}function ac(t,e){var n=ge;ge|=2;var r=hy();(rt!==t||ot!==e)&&(Wn=null,or(t,e));do try{h2();break}catch(l){uy(t,l)}while(!0);if(gm(),ge=n,sc.current=r,Ge!==null)throw Error(O(261));return rt=null,ot=0,Qe}function h2(){for(;Ge!==null;)my(Ge)}function m2(){for(;Ge!==null&&!F1();)my(Ge)}function my(t){var e=xy(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?py(t):Ge=e,Tm.current=null}function py(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=a2(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,Ge=null;return}}else if(n=l2(n,e,Lt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Qe===0&&(Qe=5)}function er(t,e,n){var r=we,l=qt.transition;try{qt.transition=null,we=1,p2(t,e,n,r)}finally{qt.transition=l,we=r}return null}function p2(t,e,n,r){do cl();while(ys!==null);if(ge&6)throw Error(O(327));n=t.finishedWork;var l=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Y1(t,a),t===rt&&(Ge=rt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bo||(bo=!0,gy(Bo,function(){return cl(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=qt.transition,qt.transition=null;var o=we;we=1;var d=ge;ge|=4,Tm.current=null,o2(t,n),oy(n,t),Dw(rh),Wo=!!sh,rh=sh=null,t.current=n,c2(n),$1(),ge=d,we=o,qt.transition=a}else t.current=n;if(bo&&(bo=!1,ys=t,lc=l),a=t.pendingLanes,a===0&&(Cs=null),U1(n.stateNode),Dt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)l=e[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(rc)throw rc=!1,t=_h,_h=null,t;return lc&1&&t.tag!==0&&cl(),a=t.pendingLanes,a&1?t===Ch?Sa++:(Sa=0,Ch=t):Sa=0,Ls(),null}function cl(){if(ys!==null){var t=Yg(lc),e=qt.transition,n=we;try{if(qt.transition=null,we=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,lc=0,ge&6)throw Error(O(331));var l=ge;for(ge|=4,Y=t.current;Y!==null;){var a=Y,o=a.child;if(Y.flags&16){var d=a.deletions;if(d!==null){for(var h=0;h<d.length;h++){var p=d[h];for(Y=p;Y!==null;){var N=Y;switch(N.tag){case 0:case 11:case 15:_a(8,N,a)}var y=N.child;if(y!==null)y.return=N,Y=y;else for(;Y!==null;){N=Y;var w=N.sibling,I=N.return;if(ly(N),N===p){Y=null;break}if(w!==null){w.return=I,Y=w;break}Y=I}}}var D=a.alternate;if(D!==null){var $=D.child;if($!==null){D.child=null;do{var ie=$.sibling;$.sibling=null,$=ie}while($!==null)}}Y=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Y=o;else e:for(;Y!==null;){if(a=Y,a.flags&2048)switch(a.tag){case 0:case 11:case 15:_a(9,a,a.return)}var C=a.sibling;if(C!==null){C.return=a.return,Y=C;break e}Y=a.return}}var j=t.current;for(Y=j;Y!==null;){o=Y;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Y=S;else e:for(o=j;Y!==null;){if(d=Y,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ic(9,d)}}catch(K){Ue(d,d.return,K)}if(d===o){Y=null;break e}var T=d.sibling;if(T!==null){T.return=d.return,Y=T;break e}Y=d.return}}if(ge=l,Ls(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{we=n,qt.transition=e}}return!1}function c0(t,e,n){e=vl(n,e),e=Yv(t,e,1),t=_s(t,e,1),e=wt(),t!==null&&(ei(t,1,e),Dt(t,e))}function Ue(t,e,n){if(t.tag===3)c0(t,t,n);else for(;e!==null;){if(e.tag===3){c0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=vl(n,t),t=Qv(e,t,1),e=_s(e,t,1),t=wt(),e!==null&&(ei(e,1,t),Dt(e,t));break}}e=e.return}}function f2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ot&n)===n&&(Qe===4||Qe===3&&(ot&130023424)===ot&&500>We()-Mm?or(t,0):Rm|=n),Dt(t,e)}function fy(t,e){e===0&&(t.mode&1?(e=co,co<<=1,!(co&130023424)&&(co=4194304)):e=1);var n=wt();t=Jn(t,e),t!==null&&(ei(t,e,n),Dt(t,n))}function x2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fy(t,n)}function g2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),fy(t,n)}var xy;xy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,r2(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,Ae&&e.flags&1048576&&bv(e,qo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Po(t,e),t=e.pendingProps;var l=pl(e,yt.current);ol(e,n),l=Cm(null,e,r,t,l,n);var a=Sm();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(a=!0,Yo(e)):a=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,bm(e),l.updater=Ec,e.stateNode=l,l._reactInternals=e,mh(e,r,t,n),e=xh(null,e,r,!0,a,n)):(e.tag=0,Ae&&a&&mm(e),jt(null,e,l,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Po(t,e),t=e.pendingProps,l=r._init,r=l(r._payload),e.type=r,l=e.tag=y2(r),t=ln(r,t),l){case 0:e=fh(null,e,r,t,n);break e;case 1:e=Zx(null,e,r,t,n);break e;case 11:e=Xx(null,e,r,t,n);break e;case 14:e=Jx(null,e,r,ln(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ln(r,l),fh(t,e,r,l,n);case 1:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ln(r,l),Zx(t,e,r,l,n);case 3:e:{if(Zv(e),t===null)throw Error(O(387));r=e.pendingProps,a=e.memoizedState,l=a.element,Sv(t,e),Zo(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){l=vl(Error(O(423)),e),e=e0(t,e,r,n,l);break e}else if(r!==l){l=vl(Error(O(424)),e),e=e0(t,e,r,n,l);break e}else for(Ot=ws(e.stateNode.containerInfo.firstChild),Ft=e,Ae=!0,on=null,n=_v(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fl(),r===l){e=Zn(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return kv(e),t===null&&dh(e),r=e.type,l=e.pendingProps,a=t!==null?t.memoizedProps:null,o=l.children,lh(r,l)?o=null:a!==null&&lh(r,a)&&(e.flags|=32),Jv(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&dh(e),null;case 13:return ey(t,e,n);case 4:return Nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xl(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ln(r,l),Xx(t,e,r,l,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,l=e.pendingProps,a=e.memoizedProps,o=l.value,ke(Xo,r._currentValue),r._currentValue=o,a!==null)if(pn(a.value,o)){if(a.children===l.children&&!Mt.current){e=Zn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var d=a.dependencies;if(d!==null){o=a.child;for(var h=d.firstContext;h!==null;){if(h.context===r){if(a.tag===1){h=Yn(-1,n&-n),h.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var N=p.pending;N===null?h.next=h:(h.next=N.next,N.next=h),p.pending=h}}a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),uh(a.return,n,e),d.lanes|=n;break}h=h.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(O(341));o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),uh(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}jt(t,e,l.children,n),e=e.child}return e;case 9:return l=e.type,r=e.pendingProps.children,ol(e,n),l=Xt(l),r=r(l),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,l=ln(r,e.pendingProps),l=ln(r.type,l),Jx(t,e,r,l,n);case 15:return qv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ln(r,l),Po(t,e),e.tag=1,Pt(r)?(t=!0,Yo(e)):t=!1,ol(e,n),Kv(e,r,l),mh(e,r,l,n),xh(null,e,r,!0,t,n);case 19:return ty(t,e,n);case 22:return Xv(t,e,n)}throw Error(O(156,e.tag))};function gy(t,e){return Hg(t,e)}function v2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new v2(t,e,n,r)}function Lm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function y2(t){if(typeof t=="function")return Lm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tm)return 11;if(t===nm)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lo(t,e,n,r,l,a){var o=2;if(r=t,typeof t=="function")Lm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vr:return cr(n.children,l,a,e);case em:o=8,l|=8;break;case Ou:return t=Yt(12,n,e,l|2),t.elementType=Ou,t.lanes=a,t;case Fu:return t=Yt(13,n,e,l),t.elementType=Fu,t.lanes=a,t;case $u:return t=Yt(19,n,e,l),t.elementType=$u,t.lanes=a,t;case kg:return Rc(n,l,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cg:o=10;break e;case Sg:o=9;break e;case tm:o=11;break e;case nm:o=14;break e;case ps:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,l),e.elementType=t,e.type=r,e.lanes=a,e}function cr(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=kg,t.lanes=n,t.stateNode={isHidden:!1},t}function Nu(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function ju(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b2(t,e,n,r,l){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,r,l,a,o,d,h){return t=new b2(t,e,n,d,h),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Yt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bm(a),t}function N2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vy(t){if(!t)return Ms;t=t._reactInternals;e:{if(yr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(Pt(n))return vv(t,n,e)}return e}function yy(t,e,n,r,l,a,o,d,h){return t=Om(n,r,!0,t,l,a,o,d,h),t.context=vy(null),n=t.current,r=wt(),l=Ss(n),a=Yn(r,l),a.callback=e??null,_s(n,a,l),t.current.lanes=l,ei(t,l,r),Dt(t,r),t}function Mc(t,e,n,r){var l=e.current,a=wt(),o=Ss(l);return n=vy(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_s(l,e,o),t!==null&&(hn(t,l,o,a),To(t,l,o)),o}function ic(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fm(t,e){d0(t,e),(t=t.alternate)&&d0(t,e)}function j2(){return null}var by=typeof reportError=="function"?reportError:function(t){console.error(t)};function $m(t){this._internalRoot=t}Pc.prototype.render=$m.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Mc(t,e,null,null)};Pc.prototype.unmount=$m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pr(function(){Mc(null,t,null,null)}),e[Xn]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xs.length&&e!==0&&e<xs[n].priority;n++);xs.splice(n,0,t),n===0&&Zg(t)}};function zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u0(){}function w2(t,e,n,r,l){if(l){if(typeof r=="function"){var a=r;r=function(){var p=ic(o);a.call(p)}}var o=yy(e,r,t,0,null,!1,!1,"",u0);return t._reactRootContainer=o,t[Xn]=o.current,$a(t.nodeType===8?t.parentNode:t),pr(),o}for(;l=t.lastChild;)t.removeChild(l);if(typeof r=="function"){var d=r;r=function(){var p=ic(h);d.call(p)}}var h=Om(t,0,!1,null,null,!1,!1,"",u0);return t._reactRootContainer=h,t[Xn]=h.current,$a(t.nodeType===8?t.parentNode:t),pr(function(){Mc(e,h,n,r)}),h}function Ac(t,e,n,r,l){var a=n._reactRootContainer;if(a){var o=a;if(typeof l=="function"){var d=l;l=function(){var h=ic(o);d.call(h)}}Mc(e,o,t,l)}else o=w2(n,e,t,l,r);return ic(o)}Qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xa(e.pendingLanes);n!==0&&(lm(e,n|1),Dt(e,We()),!(ge&6)&&(yl=We()+500,Ls()))}break;case 13:pr(function(){var r=Jn(t,1);if(r!==null){var l=wt();hn(r,t,1,l)}}),Fm(t,1)}};am=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=wt();hn(e,t,134217728,n)}Fm(t,134217728)}};qg=function(t){if(t.tag===13){var e=Ss(t),n=Jn(t,e);if(n!==null){var r=wt();hn(n,t,e,r)}Fm(t,e)}};Xg=function(){return we};Jg=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Qu=function(t,e,n){switch(e){case"input":if(Uu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var l=Cc(r);if(!l)throw Error(O(90));Ig(r),Uu(r,l)}}}break;case"textarea":Rg(t,n);break;case"select":e=n.value,e!=null&&rl(t,!!n.multiple,e,!1)}};Fg=Pm;$g=pr;var _2={usingClientEntryPoint:!1,Events:[ni,Qr,Cc,Lg,Og,Pm]},ca={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C2={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ug(t),t===null?null:t.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||j2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{Nc=No.inject(C2),Cn=No}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_2;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(e))throw Error(O(200));return N2(t,e,null,n)};Bt.createRoot=function(t,e){if(!zm(t))throw Error(O(299));var n=!1,r="",l=by;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,r,l),t[Xn]=e.current,$a(t.nodeType===8?t.parentNode:t),new $m(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Ug(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return pr(t)};Bt.hydrate=function(t,e,n){if(!Dc(e))throw Error(O(200));return Ac(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!zm(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,l=!1,a="",o=by;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yy(e,null,t,1,n??null,l,!1,a,o),t[Xn]=e.current,$a(t),r)for(t=0;t<r.length;t++)n=r[t],l=n._getVersion,l=l(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,l]:e.mutableSourceEagerHydrationData.push(n,l);return new Pc(e)};Bt.render=function(t,e,n){if(!Dc(e))throw Error(O(200));return Ac(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Dc(t))throw Error(O(40));return t._reactRootContainer?(pr(function(){Ac(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Pm;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dc(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Ac(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Ny(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ny)}catch(t){console.error(t)}}Ny(),Ng.exports=Bt;var S2=Ng.exports,h0=S2;Au.createRoot=h0.createRoot,Au.hydrateRoot=h0.hydrateRoot;var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(t,e){if(!t)throw Sl(e)},Sl=function(t){return new Error("Firebase Database ("+jy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let l=t.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},k2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const l=t[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const a=t[n++];e[r++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=t[n++],o=t[n++],d=t[n++],h=((l&7)<<18|(a&63)<<12|(o&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((l&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Bm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<t.length;l+=3){const a=t[l],o=l+1<t.length,d=o?t[l+1]:0,h=l+2<t.length,p=h?t[l+2]:0,N=a>>2,y=(a&3)<<4|d>>4;let w=(d&15)<<2|p>>6,I=p&63;h||(I=64,o||(w=64)),r.push(n[N],n[y],n[w],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<t.length;){const a=n[t.charAt(l++)],d=l<t.length?n[t.charAt(l)]:0;++l;const p=l<t.length?n[t.charAt(l)]:64;++l;const y=l<t.length?n[t.charAt(l)]:64;if(++l,a==null||d==null||p==null||y==null)throw new E2;const w=a<<2|d>>4;if(r.push(w),p!==64){const I=d<<4&240|p>>2;if(r.push(I),y!==64){const D=p<<6&192|y;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _y=function(t){const e=wy(t);return Bm.encodeByteArray(e,!0)},oc=function(t){return _y(t).replace(/\./g,"")},Eh=function(t){try{return Bm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){return Cy(void 0,t)}function Cy(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!T2(n)||(t[n]=Cy(t[n],e[n]));return t}function T2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=()=>R2().__FIREBASE_DEFAULTS__,P2=()=>{if(typeof process>"u"||typeof m0>"u")return;const t=m0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},D2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Eh(t[1]);return e&&JSON.parse(e)},Sy=()=>{try{return M2()||P2()||D2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A2=t=>{var e,n;return(n=(e=Sy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},L2=t=>{const e=A2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ky=()=>{var t;return(t=Sy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oc(JSON.stringify(n)),oc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ey(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(F2())}function $2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z2(){return jy.NODE_ADMIN===!0}function B2(){try{return typeof indexedDB=="object"}catch{return!1}}function U2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var a;e(((a=l.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="FirebaseError";class ri extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=W2,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iy.prototype.create)}}class Iy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,a=this.errors[e],o=a?H2(a,r):"Error",d=`${this.serviceName}: ${o} (${l}).`;return new ri(l,d,r)}}function H2(t,e){return t.replace(V2,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const V2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){return JSON.parse(t)}function it(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=function(t){let e={},n={},r={},l="";try{const a=t.split(".");e=Ya(Eh(a[0])||""),n=Ya(Eh(a[1])||""),l=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:l}},G2=function(t){const e=Ty(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},K2=function(t){const e=Ty(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function p0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cc(t,e,n){const r={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=e.call(n,t[l],l,t));return r}function Ih(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const a=t[l],o=e[l];if(f0(a)&&f0(o)){if(!Ih(a,o))return!1}else if(a!==o)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function f0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)r[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const w=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(w<<1|w>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],o=this.chain_[2],d=this.chain_[3],h=this.chain_[4],p,N;for(let y=0;y<80;y++){y<40?y<20?(p=d^a&(o^d),N=1518500249):(p=a^o^d,N=1859775393):y<60?(p=a&o|d&(a|o),N=2400959708):(p=a^o^d,N=3395469782);const w=(l<<5|l>>>27)+p+h+N+r[y]&4294967295;h=d,d=o,o=(a<<30|a>>>2)&4294967295,a=l,l=w}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let l=0;const a=this.buf_;let o=this.inbuf_;for(;l<n;){if(o===0)for(;l<=r;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(a[o]=e.charCodeAt(l),++o,++l,o===this.blockSize){this.compress_(a),o=0;break}}else for(;l<n;)if(a[o]=e[l],++o,++l,o===this.blockSize){this.compress_(a),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[l]>>a&255,++r;return e}}function q2(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let l=t.charCodeAt(r);if(l>=55296&&l<=56319){const a=l-55296;r++,W(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;l=65536+(a<<10)+o}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Lc=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){return t&&t._delegate?t._delegate:t}class Qa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Um;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(l)return null;throw a}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e_(e))try{this.getOrInitializeService({instanceIdentifier:tr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:l});r.resolve(a)}catch{}}}}clearInstance(e=tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tr){return this.instances.has(e)}getOptions(e=tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&o.resolve(l)}return l}onInit(e,n){var r;const l=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(l))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(l,a);const o=this.instances.get(l);return o&&e(o,l),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tr){return this.component?this.component.multipleInstances?e:tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z2(t){return t===tr?void 0:t}function e_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const n_={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},s_=Se.INFO,r_={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},l_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),l=r_[e];if(l)console[l](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=s_,this._logHandler=l_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const a_=(t,e)=>e.some(n=>t instanceof n);let x0,g0;function i_(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o_(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Py=new WeakMap,Th=new WeakMap,Dy=new WeakMap,wu=new WeakMap,Wm=new WeakMap;function c_(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Es(t.result)),l()},o=()=>{r(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Py.set(n,t)}).catch(()=>{}),Wm.set(e,t),e}function d_(t){if(Th.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),l()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}let Rh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function u_(t){Rh=t(Rh)}function h_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_u(this),e,...n);return Dy.set(r,e.sort?e.sort():[e]),Es(r)}:o_().includes(t)?function(...e){return t.apply(_u(this),e),Es(Py.get(this))}:function(...e){return Es(t.apply(_u(this),e))}}function m_(t){return typeof t=="function"?h_(t):(t instanceof IDBTransaction&&d_(t),a_(t,i_())?new Proxy(t,Rh):t)}function Es(t){if(t instanceof IDBRequest)return c_(t);if(wu.has(t))return wu.get(t);const e=m_(t);return e!==t&&(wu.set(t,e),Wm.set(e,t)),e}const _u=t=>Wm.get(t);function p_(t,e,{blocked:n,upgrade:r,blocking:l,terminated:a}={}){const o=indexedDB.open(t,e),d=Es(o);return r&&o.addEventListener("upgradeneeded",h=>{r(Es(o.result),h.oldVersion,h.newVersion,Es(o.transaction),h)}),n&&o.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),l&&h.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const f_=["get","getKey","getAll","getAllKeys","count"],x_=["put","add","delete","clear"],Cu=new Map;function v0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cu.get(e))return Cu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=x_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||f_.includes(n)))return;const a=async function(o,...d){const h=this.transaction(o,l?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),l&&h.done]))[0]};return Cu.set(e,a),a}u_(t=>({...t,get:(e,n,r)=>v0(e,n)||t.get(e,n,r),has:(e,n)=>!!v0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mh="@firebase/app",y0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new My("@firebase/app"),y_="@firebase/app-compat",b_="@firebase/analytics-compat",N_="@firebase/analytics",j_="@firebase/app-check-compat",w_="@firebase/app-check",__="@firebase/auth",C_="@firebase/auth-compat",S_="@firebase/database",k_="@firebase/data-connect",E_="@firebase/database-compat",I_="@firebase/functions",T_="@firebase/functions-compat",R_="@firebase/installations",M_="@firebase/installations-compat",P_="@firebase/messaging",D_="@firebase/messaging-compat",A_="@firebase/performance",L_="@firebase/performance-compat",O_="@firebase/remote-config",F_="@firebase/remote-config-compat",$_="@firebase/storage",z_="@firebase/storage-compat",B_="@firebase/firestore",U_="@firebase/vertexai-preview",W_="@firebase/firestore-compat",H_="firebase",V_="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",G_={[Mh]:"fire-core",[y_]:"fire-core-compat",[N_]:"fire-analytics",[b_]:"fire-analytics-compat",[w_]:"fire-app-check",[j_]:"fire-app-check-compat",[__]:"fire-auth",[C_]:"fire-auth-compat",[S_]:"fire-rtdb",[k_]:"fire-data-connect",[E_]:"fire-rtdb-compat",[I_]:"fire-fn",[T_]:"fire-fn-compat",[R_]:"fire-iid",[M_]:"fire-iid-compat",[P_]:"fire-fcm",[D_]:"fire-fcm-compat",[A_]:"fire-perf",[L_]:"fire-perf-compat",[O_]:"fire-rc",[F_]:"fire-rc-compat",[$_]:"fire-gcs",[z_]:"fire-gcs-compat",[B_]:"fire-fst",[W_]:"fire-fst-compat",[U_]:"fire-vertex","fire-js":"fire-js",[H_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,K_=new Map,Dh=new Map;function b0(t,e){try{t.container.addComponent(e)}catch(n){es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uc(t){const e=t.name;if(Dh.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;Dh.set(e,t);for(const n of dc.values())b0(n,t);for(const n of K_.values())b0(n,t);return!0}function Y_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Iy("app","Firebase",Q_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=V_;function Ay(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ph,automaticDataCollectionEnabled:!1},e),l=r.name;if(typeof l!="string"||!l)throw Is.create("bad-app-name",{appName:String(l)});if(n||(n=ky()),!n)throw Is.create("no-options");const a=dc.get(l);if(a){if(Ih(n,a.options)&&Ih(r,a.config))return a;throw Is.create("duplicate-app",{appName:l})}const o=new t_(l);for(const h of Dh.values())o.addComponent(h);const d=new q_(n,r,o);return dc.set(l,d),d}function J_(t=Ph){const e=dc.get(t);if(!e&&t===Ph&&ky())return Ay();if(!e)throw Is.create("no-app",{appName:t});return e}function dl(t,e,n){var r;let l=(r=G_[t])!==null&&r!==void 0?r:t;n&&(l+=`-${n}`);const a=l.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const d=[`Unable to register library "${l}" with version "${e}":`];a&&d.push(`library name "${l}" contains illegal characters (whitespace or "/")`),a&&o&&d.push("and"),o&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(d.join(" "));return}uc(new Qa(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="firebase-heartbeat-database",e3=1,qa="firebase-heartbeat-store";let Su=null;function Ly(){return Su||(Su=p_(Z_,e3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),Su}async function t3(t){try{const n=(await Ly()).transaction(qa),r=await n.objectStore(qa).get(Oy(t));return await n.done,r}catch(e){if(e instanceof ri)es.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});es.warn(n.message)}}}async function N0(t,e){try{const r=(await Ly()).transaction(qa,"readwrite");await r.objectStore(qa).put(e,Oy(t)),await r.done}catch(n){if(n instanceof ri)es.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});es.warn(r.message)}}}function Oy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=1024,s3=30*24*60*60*1e3;class r3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=j0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const d=new Date(o.date).valueOf();return Date.now()-d<=s3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j0(),{heartbeatsToSend:r,unsentEntries:l}=l3(this._heartbeatsCache.heartbeats),a=oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return es.warn(n),""}}}function j0(){return new Date().toISOString().substring(0,10)}function l3(t,e=n3){const n=[];let r=t.slice();for(const l of t){const a=n.find(o=>o.agent===l.agent);if(a){if(a.dates.push(l.date),w0(n)>e){a.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),w0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B2()?U2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return N0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return N0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function w0(t){return oc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t){uc(new Qa("platform-logger",e=>new g_(e),"PRIVATE")),uc(new Qa("heartbeat",e=>new r3(e),"PRIVATE")),dl(Mh,y0,t),dl(Mh,y0,"esm2017"),dl("fire-js","")}i3("");var o3="firebase",c3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dl(o3,c3,"app");var _0={};const C0="@firebase/database",S0="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy="";function d3(t){Fy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ya(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ss(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u3(e)}}catch{}return new h3},ir=$y("localStorage"),m3=$y("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new My("@firebase/database"),p3=function(){let t=1;return function(){return t++}}(),zy=function(t){const e=X2(t),n=new Q2;n.update(e);const r=n.digest();return Bm.encodeByteArray(r)},li=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=li.apply(null,r):typeof r=="object"?e+=it(r):e+=r,e+=" "}return e};let ka=null,k0=!0;const f3=function(t,e){W(!0,"Can't turn on custom loggers persistently."),ul.logLevel=Se.VERBOSE,ka=ul.log.bind(ul)},xt=function(...t){if(k0===!0&&(k0=!1,ka===null&&m3.get("logging_enabled")===!0&&f3()),ka){const e=li.apply(null,t);ka(e)}},ai=function(t){return function(...e){xt(t,...e)}},Ah=function(...t){const e="FIREBASE INTERNAL ERROR: "+li(...t);ul.error(e)},ts=function(...t){const e=`FIREBASE FATAL ERROR: ${li(...t)}`;throw ul.error(e),new Error(e)},$t=function(...t){const e="FIREBASE WARNING: "+li(...t);ul.warn(e)},x3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},By=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},g3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Nl="[MIN_NAME]",fr="[MAX_NAME]",kl=function(t,e){if(t===e)return 0;if(t===Nl||e===fr)return-1;if(e===Nl||t===fr)return 1;{const n=E0(t),r=E0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},v3=function(t,e){return t===e?0:t<e?-1:1},da=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+it(e))},Hm=function(t){if(typeof t!="object"||t===null)return it(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=it(e[r]),n+=":",n+=Hm(t[e[r]]);return n+="}",n},Uy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let l=0;l<n;l+=e)l+e>n?r.push(t.substring(l,n)):r.push(t.substring(l,l+e));return r};function Zt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Wy=function(t){W(!By(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let l,a,o,d,h;t===0?(a=0,o=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=d+r,o=Math.round(t*Math.pow(2,n-d)-Math.pow(2,n))):(a=0,o=Math.round(t/Math.pow(2,1-r-n))));const p=[];for(h=n;h;h-=1)p.push(o%2?1:0),o=Math.floor(o/2);for(h=e;h;h-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(l?1:0),p.reverse();const N=p.join("");let y="";for(h=0;h<64;h+=8){let w=parseInt(N.substr(h,8),2).toString(16);w.length===1&&(w="0"+w),y=y+w}return y.toLowerCase()},y3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},b3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},N3=new RegExp("^-?(0*)\\d{1,10}$"),j3=-2147483648,w3=2147483647,E0=function(t){if(N3.test(t)){const e=Number(t);if(e>=j3&&e<=w3)return e}return null},ii=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw $t("Exception was thrown by user callback.",n),e},Math.floor(0))}},_3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ea=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$t(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$t(e)}}class Oo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Oo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="5",Hy="v",Vy="s",Gy="r",Ky="f",Yy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qy="ls",qy="p",Lh="ac",Xy="websocket",Jy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n,r,l,a=!1,o="",d=!1,h=!1){this.secure=n,this.namespace=r,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ir.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ir.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function k3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function eb(t,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let r;if(e===Xy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Jy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);k3(t)&&(n.ns=t.namespace);const l=[];return Zt(n,(a,o)=>{l.push(a+"="+o)}),r+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.counters_={}}incrementCounter(e,n=1){ss(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return I2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku={},Eu={};function Gm(t){const e=t.toString();return ku[e]||(ku[e]=new E3),ku[e]}function I3(t,e){const n=t.toString();return Eu[n]||(Eu[n]=e()),Eu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<r.length;++l)r[l]&&ii(()=>{this.onMessage_(r[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="start",R3="close",M3="pLPCommand",P3="pRTLPCB",tb="id",nb="pw",sb="ser",D3="cb",A3="seg",L3="ts",O3="d",F3="dframe",rb=1870,lb=30,$3=rb-lb,z3=25e3,B3=3e4;class nl{constructor(e,n,r,l,a,o,d){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=l,this.authToken=a,this.transportSessionId=o,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ai(e),this.stats_=Gm(n),this.urlFn=h=>(this.appCheckToken&&(h[Lh]=this.appCheckToken),eb(n,Jy,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new T3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(B3)),g3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Km((...a)=>{const[o,d,h,p,N]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===I0)this.id=d,this.password=h;else if(o===R3)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...a)=>{const[o,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(o,d)},()=>{this.onClosed_()},this.urlFn);const r={};r[I0]="t",r[sb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[D3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Hy]=Vm,this.transportSessionId&&(r[Vy]=this.transportSessionId),this.lastSessionId&&(r[Qy]=this.lastSessionId),this.applicationId&&(r[qy]=this.applicationId),this.appCheckToken&&(r[Lh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Yy.test(location.hostname)&&(r[Gy]=Ky);const l=this.urlFn(r);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nl.forceAllow_=!0}static forceDisallow(){nl.forceDisallow_=!0}static isAvailable(){return nl.forceAllow_?!0:!nl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!y3()&&!b3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_y(n),l=Uy(r,$3);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[F3]="t",r[tb]=e,r[nb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=it(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Km{constructor(e,n,r,l){this.onDisconnect=r,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=p3(),window[M3+this.uniqueCallbackIdentifier]=e,window[P3+this.uniqueCallbackIdentifier]=n,this.myIFrame=Km.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(d){xt("frame writing exception"),d.stack&&xt(d.stack),xt(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tb]=this.myID,e[nb]=this.myPW,e[sb]=this.currentSerial;let n=this.urlFn(e),r="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lb+r.length<=rb;){const o=this.pendingSegs.shift();r=r+"&"+A3+l+"="+o.seg+"&"+L3+l+"="+o.ts+"&"+O3+l+"="+o.d,l++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(r,Math.floor(z3)),a=()=>{clearTimeout(l),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const l=r.readyState;(!l||l==="loaded"||l==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=16384,W3=45e3;let hc=null;typeof MozWebSocket<"u"?hc=MozWebSocket:typeof WebSocket<"u"&&(hc=WebSocket);class cn{constructor(e,n,r,l,a,o,d){this.connId=e,this.applicationId=r,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ai(this.connId),this.stats_=Gm(n),this.connURL=cn.connectionURL_(n,o,d,l,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,l,a){const o={};return o[Hy]=Vm,typeof location<"u"&&location.hostname&&Yy.test(location.hostname)&&(o[Gy]=Ky),n&&(o[Vy]=n),r&&(o[Qy]=r),l&&(o[Lh]=l),a&&(o[qy]=a),eb(e,Xy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ir.set("previous_websocket_failure",!0);try{let r;z2(),this.mySock=new hc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){cn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&hc!==null&&!cn.forceDisallow_}static previouslyFailed(){return ir.isInMemoryStorage||ir.get("previous_websocket_failure")===!0}markConnectionHealthy(){ir.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ya(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Uy(n,U3);r.length>1&&this.sendString_(String(r.length));for(let l=0;l<r.length;l++)this.sendString_(r[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(W3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}cn.responsesRequiredToBeHealthy=2;cn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nl,cn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=cn&&cn.isAvailable();let r=n&&!cn.previouslyFailed();if(e.webSocketOnly&&(n||$t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[cn];else{const l=this.transports_=[];for(const a of Xa.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);Xa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=6e4,V3=5e3,G3=10*1024,K3=100*1024,Iu="t",T0="d",Y3="s",R0="r",Q3="e",M0="o",P0="a",D0="n",A0="p",q3="h";class X3{constructor(e,n,r,l,a,o,d,h,p,N){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=o,this.onReady_=d,this.onDisconnect_=h,this.onKill_=p,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ai("c:"+this.id+":"),this.transportManager_=new Xa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Ea(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>K3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>G3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Iu in e){const n=e[Iu];n===P0?this.upgradeIfSecondaryHealthy_():n===R0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===M0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=da("t",e),r=da("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:A0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:P0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:D0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=da("t",e),r=da("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=da(Iu,e);if(T0 in e){const r=e[T0];if(n===q3){const l=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===D0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Y3?this.onConnectionShutdown_(r):n===R0?this.onReset_(r):n===Q3?Ah("Server Error: "+r):n===M0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ah("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Vm!==r&&$t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ea(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(H3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ea(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(V3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:A0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ir.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{put(e,n,r,l){}merge(e,n,r,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let l=0;l<r.length;l++)r[l].callback.apply(r[l].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const l=this.getInitialEvent(e);l&&n.apply(r,l)}off(e,n,r){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===n&&(!r||r===l[a].context)){l.splice(a,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends ib{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ey()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mc}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=32,O0=768;class Pe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[r]=this.pieces_[l],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function _e(){return new Pe("")}function pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ps(t){return t.pieces_.length-t.pieceNum_}function Re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Pe(t.pieces_,e)}function ob(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function J3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function cb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function db(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Pe(e,0)}function st(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Pe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let l=0;l<r.length;l++)r[l].length>0&&n.push(r[l])}return new Pe(n,0)}function me(t){return t.pieceNum_>=t.pieces_.length}function Qt(t,e){const n=pe(t),r=pe(e);if(n===null)return e;if(n===r)return Qt(Re(t),Re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ub(t,e){if(Ps(t)!==Ps(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function dn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ps(t)>Ps(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Z3{constructor(e,n){this.errorPrefix_=n,this.parts_=cb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lc(this.parts_[r]);hb(this)}}function eC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lc(e),hb(t)}function tC(t){const e=t.parts_.pop();t.byteLength_-=Lc(e),t.parts_.length>0&&(t.byteLength_-=1)}function hb(t){if(t.byteLength_>O0)throw new Error(t.errorPrefix_+"has a key path longer than "+O0+" bytes ("+t.byteLength_+").");if(t.parts_.length>L0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+L0+") or object contains a cycle "+nr(t))}function nr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends ib{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ym}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=1e3,nC=60*5*1e3,F0=30*1e3,sC=1.3,rC=3e4,lC="server_kill",$0=3;class Qn extends ab{constructor(e,n,r,l,a,o,d,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=d,this.authOverride_=h,this.id=Qn.nextPersistentConnectionId_++,this.log_=ai("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ua,this.maxReconnectDelay_=nC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ym.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const l=++this.requestNumber_,a={r:l,a:e,b:n};this.log_(it(a)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[l]=r)}get(e){this.initConnection_();const n=new Um,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const d=o.d;o.s==="ok"?n.resolve(d):n.reject(d)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,l){this.initConnection_();const a=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+a),this.listens.has(o)||this.listens.set(o,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(o).has(a),"listen() called twice for same path/queryId.");const d={onComplete:l,hashFn:n,query:e,tag:r};this.listens.get(o).set(a,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+r+" for "+l);const a={p:r},o="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(o,a,d=>{const h=d.d,p=d.s;Qn.warnOnListenWarnings_(h,n),(this.listens.get(r)&&this.listens.get(r).get(l))===e&&(this.log_("listen response",d),p!=="ok"&&this.removeListen_(r,l),e.onComplete&&e.onComplete(p,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ss(e,"w")){const r=bl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();$t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||K2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=F0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=G2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,l=>{const a=l.s,o=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+l),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,l)&&this.connected_&&this.sendUnlisten_(r,l,e._queryObject,n)}sendUnlisten_(e,n,r,l){this.log_("Unlisten on "+e+" for "+n);const a={p:e},o="n";l&&(a.q=r,a.t=l),this.sendRequest(o,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,l){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,o=>{l&&setTimeout(()=>{l(o.s,o.d)},Math.floor(0))})}put(e,n,r,l){this.putInternal("p",e,n,r,l)}merge(e,n,r,l){this.putInternal("m",e,n,r,l)}putInternal(e,n,r,l,a){this.initConnection_();const o={p:n,d:r};a!==void 0&&(o.h=a),this.outstandingPuts_.push({action:e,request:o,onComplete:l}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+it(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ah("Unrecognized action received from server: "+it(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>rC&&(this.reconnectDelay_=ua),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Qn.nextConnectionId_++,a=this.lastSessionId;let o=!1,d=null;const h=function(){d?d.close():(o=!0,r())},p=function(y){W(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(y)};this.realtime_={close:h,sendRequest:p};const N=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,w]=await Promise.all([this.authTokenProvider_.getToken(N),this.appCheckTokenProvider_.getToken(N)]);o?xt("getToken() completed but was canceled"):(xt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=w&&w.token,d=new X3(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,I=>{$t(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(lC)},a))}catch(y){this.log_("Failed to get token: "+y),o||(this.repoInfo_.nodeAdmin&&$t(y),h())}}}interrupt(e){xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],p0(this.interruptReasons_)&&(this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>Hm(a)).join("$"):r="default";const l=this.removeListen_(e,r);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const r=new Pe(e).toString();let l;if(this.listens.has(r)){const a=this.listens.get(r);l=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else l=void 0;return l}onAuthRevoked_(e,n){xt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$0&&(this.reconnectDelay_=F0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){xt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Fy.replace(/\./g,"-")]=1,Ey()?e["framework.cordova"]=1:$2()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mc.getInstance().currentlyOnline();return p0(this.interruptReasons_)&&e}}Qn.nextPersistentConnectionId_=0;Qn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new fe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new fe(Nl,e),l=new fe(Nl,n);return this.compare(r,l)!==0}minPost(){return fe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo;class mb extends Oc{static get __EMPTY_NODE(){return jo}static set __EMPTY_NODE(e){jo=e}compare(e,n){return kl(e.name,n.name)}isDefinedOn(e){throw Sl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return fe.MIN}maxPost(){return new fe(fr,jo)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new fe(e,jo)}toString(){return".key"}}const hl=new mb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,r,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,l&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nt{constructor(e,n,r,l,a){this.key=e,this.value=n,this.color=r??nt.RED,this.left=l??Rt.EMPTY_NODE,this.right=a??Rt.EMPTY_NODE}copy(e,n,r,l,a){return new nt(e??this.key,n??this.value,r??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const a=r(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,n,r),null):a===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,l;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY_NODE;l=r.right.min_(),r=r.copy(l.key,l.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nt.RED=!0;nt.BLACK=!1;class aC{copy(e,n,r,l,a){return this}insert(e,n,r){return new nt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Rt{constructor(e,n=Rt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Rt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nt.BLACK,null,null))}remove(e){return new Rt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,l=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return l?l.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(l=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new wo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new wo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new wo(this.root_,null,this.comparator_,!0,e)}}Rt.EMPTY_NODE=new aC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e){return kl(t.name,e.name)}function Qm(t,e){return kl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh;function oC(t){Oh=t}const pb=function(t){return typeof t=="number"?"number:"+Wy(t):"string:"+t},fb=function(t){if(t.isLeafNode()){const e=t.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ss(e,".sv"),"Priority must be a string or number.")}else W(t===Oh||t.isEmpty(),"priority of unexpected type.");W(t===Oh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z0;class et{constructor(e,n=et.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fb(this.priorityNode_)}static set __childrenNodeConstructor(e){z0=e}static get __childrenNodeConstructor(){return z0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new et(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return me(e)?this:pe(e)===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:et.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=pe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(W(r!==".priority"||Ps(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,et.__childrenNodeConstructor.EMPTY_NODE.updateChild(Re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Wy(this.value_):e+=this.value_,this.lazyHash_=zy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===et.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof et.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,l=et.VALUE_TYPE_ORDER.indexOf(n),a=et.VALUE_TYPE_ORDER.indexOf(r);return W(l>=0,"Unknown leaf type: "+n),W(a>=0,"Unknown leaf type: "+r),l===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}et.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xb,gb;function cC(t){xb=t}function dC(t){gb=t}class uC extends Oc{compare(e,n){const r=e.node.getPriority(),l=n.node.getPriority(),a=r.compareTo(l);return a===0?kl(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return fe.MIN}maxPost(){return new fe(fr,new et("[PRIORITY-POST]",gb))}makePost(e,n){const r=xb(e);return new fe(n,new et("[PRIORITY-POST]",r))}toString(){return".priority"}}const vt=new uC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=Math.log(2);class mC{constructor(e){const n=a=>parseInt(Math.log(a)/hC,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=r(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pc=function(t,e,n,r){t.sort(e);const l=function(h,p){const N=p-h;let y,w;if(N===0)return null;if(N===1)return y=t[h],w=n?n(y):y,new nt(w,y.node,nt.BLACK,null,null);{const I=parseInt(N/2,10)+h,D=l(h,I),$=l(I+1,p);return y=t[I],w=n?n(y):y,new nt(w,y.node,nt.BLACK,D,$)}},a=function(h){let p=null,N=null,y=t.length;const w=function(D,$){const ie=y-D,C=y;y-=D;const j=l(ie+1,C),S=t[ie],T=n?n(S):S;I(new nt(T,S.node,$,null,j))},I=function(D){p?(p.left=D,p=D):(N=D,p=D)};for(let D=0;D<h.count;++D){const $=h.nextBitIsOne(),ie=Math.pow(2,h.count-(D+1));$?w(ie,nt.BLACK):(w(ie,nt.BLACK),w(ie,nt.RED))}return N},o=new mC(t.length),d=a(o);return new Rt(r||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu;const Wr={};class Kn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return W(Wr&&vt,"ChildrenNode.ts has not been loaded"),Tu=Tu||new Kn({".priority":Wr},{".priority":vt}),Tu}get(e){const n=bl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Rt?n:null}hasIndex(e){return ss(this.indexSet_,e.toString())}addIndex(e,n){W(e!==hl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let l=!1;const a=n.getIterator(fe.Wrap);let o=a.getNext();for(;o;)l=l||e.isDefinedOn(o.node),r.push(o),o=a.getNext();let d;l?d=pc(r,e.getCompare()):d=Wr;const h=e.toString(),p=Object.assign({},this.indexSet_);p[h]=e;const N=Object.assign({},this.indexes_);return N[h]=d,new Kn(N,p)}addToIndexes(e,n){const r=cc(this.indexes_,(l,a)=>{const o=bl(this.indexSet_,a);if(W(o,"Missing index implementation for "+a),l===Wr)if(o.isDefinedOn(e.node)){const d=[],h=n.getIterator(fe.Wrap);let p=h.getNext();for(;p;)p.name!==e.name&&d.push(p),p=h.getNext();return d.push(e),pc(d,o.getCompare())}else return Wr;else{const d=n.get(e.name);let h=l;return d&&(h=h.remove(new fe(e.name,d))),h.insert(e,e.node)}});return new Kn(r,this.indexSet_)}removeFromIndexes(e,n){const r=cc(this.indexes_,l=>{if(l===Wr)return l;{const a=n.get(e.name);return a?l.remove(new fe(e.name,a)):l}});return new Kn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha;class Ne{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fb(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ha||(ha=new Ne(new Rt(Qm),null,Kn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ha}updatePriority(e){return this.children_.isEmpty()?this:new Ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ha:n}}getChild(e){const n=pe(e);return n===null?this:this.getImmediateChild(n).getChild(Re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new fe(e,n);let l,a;n.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const o=l.isEmpty()?ha:this.priorityNode_;return new Ne(l,o,a)}}updateChild(e,n){const r=pe(e);if(r===null)return n;{W(pe(e)!==".priority"||Ps(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(r).updateChild(Re(e),n);return this.updateImmediateChild(r,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,l=0,a=!0;if(this.forEachChild(vt,(o,d)=>{n[o]=d.val(e),r++,a&&Ne.INTEGER_REGEXP_.test(o)?l=Math.max(l,Number(o)):a=!1}),!e&&a&&l<2*r){const o=[];for(const d in n)o[d]=n[d];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+pb(this.getPriority().val())+":"),this.forEachChild(vt,(n,r)=>{const l=r.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":zy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const l=this.resolveIndex_(r);if(l){const a=l.getPredecessorKey(new fe(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new fe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new fe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,fe.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,fe.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oi?-1:0}withIndex(e){if(e===hl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ne(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===hl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(vt),l=n.getIterator(vt);let a=r.getNext(),o=l.getNext();for(;a&&o;){if(a.name!==o.name||!a.node.equals(o.node))return!1;a=r.getNext(),o=l.getNext()}return a===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===hl?null:this.indexMap_.get(e.toString())}}Ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class pC extends Ne{constructor(){super(new Rt(Qm),Ne.EMPTY_NODE,Kn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ne.EMPTY_NODE}isEmpty(){return!1}}const oi=new pC;Object.defineProperties(fe,{MIN:{value:new fe(Nl,Ne.EMPTY_NODE)},MAX:{value:new fe(fr,oi)}});mb.__EMPTY_NODE=Ne.EMPTY_NODE;et.__childrenNodeConstructor=Ne;oC(oi);dC(oi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=!0;function gt(t,e=null){if(t===null)return Ne.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new et(n,gt(e))}if(!(t instanceof Array)&&fC){const n=[];let r=!1;if(Zt(t,(o,d)=>{if(o.substring(0,1)!=="."){const h=gt(d);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),n.push(new fe(o,h)))}}),n.length===0)return Ne.EMPTY_NODE;const a=pc(n,iC,o=>o.name,Qm);if(r){const o=pc(n,vt.getCompare());return new Ne(a,gt(e),new Kn({".priority":o},{".priority":vt}))}else return new Ne(a,gt(e),Kn.Default)}else{let n=Ne.EMPTY_NODE;return Zt(t,(r,l)=>{if(ss(t,r)&&r.substring(0,1)!=="."){const a=gt(l);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(gt(e))}}cC(gt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC extends Oc{constructor(e){super(),this.indexPath_=e,W(!me(e)&&pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),l=this.extractChild(n.node),a=r.compareTo(l);return a===0?kl(e.name,n.name):a}makePost(e,n){const r=gt(e),l=Ne.EMPTY_NODE.updateChild(this.indexPath_,r);return new fe(n,l)}maxPost(){const e=Ne.EMPTY_NODE.updateChild(this.indexPath_,oi);return new fe(fr,e)}toString(){return cb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC extends Oc{compare(e,n){const r=e.node.compareTo(n.node);return r===0?kl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return fe.MIN}maxPost(){return fe.MAX}makePost(e,n){const r=gt(e);return new fe(n,r)}toString(){return".value"}}const vC=new gC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){return{type:"value",snapshotNode:t}}function bC(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function NC(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function B0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function jC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nl}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vt}copy(){const e=new qm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function U0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===vt?n="$priority":t.index_===vC?n="$value":t.index_===hl?n="$key":(W(t.index_ instanceof xC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=it(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=it(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+it(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=it(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+it(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function W0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==vt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends ab{constructor(e,n,r,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=l,this.log_=ai("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const o=fc.getListenId_(e,r),d={};this.listens_[o]=d;const h=U0(e._queryParams);this.restRequest_(a+".json",h,(p,N)=>{let y=N;if(p===404&&(y=null,p=null),p===null&&this.onDataUpdate_(a,y,!1,r),bl(this.listens_,o)===d){let w;p?p===401?w="permission_denied":w="rest_error:"+p:w="ok",l(w,null)}})}unlisten(e,n){const r=fc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=U0(e._queryParams),r=e._path.toString(),l=new Um;return this.restRequest_(r+".json",n,(a,o)=>{let d=o;a===404&&(d=null,a=null),a===null?(this.onDataUpdate_(r,d,!1,null),l.resolve(d)):l.reject(new Error(d))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(n.auth=l.accessToken),a&&a.token&&(n.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Y2(n);this.log_("Sending REST request for "+o);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&d.readyState===4){this.log_("REST Response for "+o+" received. status:",d.status,"response:",d.responseText);let h=null;if(d.status>=200&&d.status<300){try{h=Ya(d.responseText)}catch{$t("Failed to parse JSON response for "+o+": "+d.responseText)}r(null,h)}else d.status!==401&&d.status!==404&&$t("Got unsuccessful REST response for "+o+" Status: "+d.status),r(d.status);r=null}},d.open("GET",o,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.rootNode_=Ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(){return{value:null,children:new Map}}function vb(t,e,n){if(me(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=pe(e);t.children.has(r)||t.children.set(r,xc());const l=t.children.get(r);e=Re(e),vb(l,e,n)}}function Fh(t,e,n){t.value!==null?n(e,t.value):_C(t,(r,l)=>{const a=new Pe(e.toString()+"/"+r);Fh(l,a,n)})}function _C(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Zt(this.last_,(r,l)=>{n[r]=n[r]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=10*1e3,SC=30*1e3,kC=5*60*1e3;class EC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new CC(e);const r=H0+(SC-H0)*Math.random();Ea(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Zt(e,(l,a)=>{a>0&&ss(this.statsToReport_,l)&&(n[l]=a,r=!0)}),r&&this.server_.reportStats(n),Ea(this.reportStats_.bind(this),Math.floor(Math.random()*2*kC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_n||(_n={}));function yb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Nb(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=_n.ACK_USER_WRITE,this.source=yb()}operationForChild(e){if(me(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Pe(e));return new gc(_e(),n,this.revert)}}else return W(pe(this.path)===e,"operationForChild called for unrelated child."),new gc(Re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=_n.OVERWRITE}operationForChild(e){return me(this.path)?new xr(this.source,_e(),this.snap.getImmediateChild(e)):new xr(this.source,Re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=_n.MERGE}operationForChild(e){if(me(this.path)){const n=this.children.subtree(new Pe(e));return n.isEmpty()?null:n.value?new xr(this.source,_e(),n.value):new Ja(this.source,_e(),n)}else return W(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ja(this.source,Re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;const n=pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function IC(t,e,n,r){const l=[],a=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&a.push(jC(o.childName,o.snapshotNode))}),ma(t,l,"child_removed",e,r,n),ma(t,l,"child_added",e,r,n),ma(t,l,"child_moved",a,r,n),ma(t,l,"child_changed",e,r,n),ma(t,l,"value",e,r,n),l}function ma(t,e,n,r,l,a){const o=r.filter(d=>d.type===n);o.sort((d,h)=>RC(t,d,h)),o.forEach(d=>{const h=TC(t,d,a);l.forEach(p=>{p.respondsTo(d.type)&&e.push(p.createEvent(h,t.query_))})})}function TC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function RC(t,e,n){if(e.childName==null||n.childName==null)throw Sl("Should only compare child_ events.");const r=new fe(e.childName,e.snapshotNode),l=new fe(n.childName,n.snapshotNode);return t.index_.compare(r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t,e){return{eventCache:t,serverCache:e}}function Ia(t,e,n,r){return jb(new Xm(e,n,r),t.serverCache)}function wb(t,e,n,r){return jb(t.eventCache,new Xm(e,n,r))}function $h(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function gr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru;const MC=()=>(Ru||(Ru=new Rt(v3)),Ru);class Te{constructor(e,n=MC()){this.value=e,this.children=n}static fromObject(e){let n=new Te(null);return Zt(e,(r,l)=>{n=n.set(new Pe(r),l)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:_e(),value:this.value};if(me(e))return null;{const r=pe(e),l=this.children.get(r);if(l!==null){const a=l.findRootMostMatchingPathAndValue(Re(e),n);return a!=null?{path:st(new Pe(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{const n=pe(e),r=this.children.get(n);return r!==null?r.subtree(Re(e)):new Te(null)}}set(e,n){if(me(e))return new Te(n,this.children);{const r=pe(e),a=(this.children.get(r)||new Te(null)).set(Re(e),n),o=this.children.insert(r,a);return new Te(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=pe(e),r=this.children.get(n);if(r){const l=r.remove(Re(e));let a;return l.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,l),this.value===null&&a.isEmpty()?new Te(null):new Te(this.value,a)}else return this}}get(e){if(me(e))return this.value;{const n=pe(e),r=this.children.get(n);return r?r.get(Re(e)):null}}setTree(e,n){if(me(e))return n;{const r=pe(e),a=(this.children.get(r)||new Te(null)).setTree(Re(e),n);let o;return a.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,a),new Te(this.value,o)}}fold(e){return this.fold_(_e(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((l,a)=>{r[l]=a.fold_(st(e,l),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,_e(),n)}findOnPath_(e,n,r){const l=this.value?r(n,this.value):!1;if(l)return l;if(me(e))return null;{const a=pe(e),o=this.children.get(a);return o?o.findOnPath_(Re(e),st(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,_e(),n)}foreachOnPath_(e,n,r){if(me(e))return this;{this.value&&r(n,this.value);const l=pe(e),a=this.children.get(l);return a?a.foreachOnPath_(Re(e),st(n,l),r):new Te(null)}}foreach(e){this.foreach_(_e(),e)}foreach_(e,n){this.children.inorderTraversal((r,l)=>{l.foreach_(st(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.writeTree_=e}static empty(){return new mn(new Te(null))}}function Ta(t,e,n){if(me(e))return new mn(new Te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const l=r.path;let a=r.value;const o=Qt(l,e);return a=a.updateChild(o,n),new mn(t.writeTree_.set(l,a))}else{const l=new Te(n),a=t.writeTree_.setTree(e,l);return new mn(a)}}}function V0(t,e,n){let r=t;return Zt(n,(l,a)=>{r=Ta(r,st(e,l),a)}),r}function G0(t,e){if(me(e))return mn.empty();{const n=t.writeTree_.setTree(e,new Te(null));return new mn(n)}}function zh(t,e){return br(t,e)!=null}function br(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qt(n.path,e)):null}function K0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(vt,(r,l)=>{e.push(new fe(r,l))}):t.writeTree_.children.inorderTraversal((r,l)=>{l.value!=null&&e.push(new fe(r,l.value))}),e}function Ts(t,e){if(me(e))return t;{const n=br(t,e);return n!=null?new mn(new Te(n)):new mn(t.writeTree_.subtree(e))}}function Bh(t){return t.writeTree_.isEmpty()}function jl(t,e){return _b(_e(),t.writeTree_,e)}function _b(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(W(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=_b(st(t,l),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(st(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t,e){return Tb(e,t)}function PC(t,e,n,r,l){W(r>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:l}),l&&(t.visibleWrites=Ta(t.visibleWrites,e,n)),t.lastWriteId=r}function DC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function AC(t,e){const n=t.allWrites.findIndex(d=>d.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let l=r.visible,a=!1,o=t.allWrites.length-1;for(;l&&o>=0;){const d=t.allWrites[o];d.visible&&(o>=n&&LC(d,r.path)?l=!1:dn(r.path,d.path)&&(a=!0)),o--}if(l){if(a)return OC(t),!0;if(r.snap)t.visibleWrites=G0(t.visibleWrites,r.path);else{const d=r.children;Zt(d,h=>{t.visibleWrites=G0(t.visibleWrites,st(r.path,h))})}return!0}else return!1}function LC(t,e){if(t.snap)return dn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&dn(st(t.path,n),e))return!0;return!1}function OC(t){t.visibleWrites=Sb(t.allWrites,FC,_e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function FC(t){return t.visible}function Sb(t,e,n){let r=mn.empty();for(let l=0;l<t.length;++l){const a=t[l];if(e(a)){const o=a.path;let d;if(a.snap)dn(n,o)?(d=Qt(n,o),r=Ta(r,d,a.snap)):dn(o,n)&&(d=Qt(o,n),r=Ta(r,_e(),a.snap.getChild(d)));else if(a.children){if(dn(n,o))d=Qt(n,o),r=V0(r,d,a.children);else if(dn(o,n))if(d=Qt(o,n),me(d))r=V0(r,_e(),a.children);else{const h=bl(a.children,pe(d));if(h){const p=h.getChild(Re(d));r=Ta(r,_e(),p)}}}else throw Sl("WriteRecord should have .snap or .children")}}return r}function kb(t,e,n,r,l){if(!r&&!l){const a=br(t.visibleWrites,e);if(a!=null)return a;{const o=Ts(t.visibleWrites,e);if(Bh(o))return n;if(n==null&&!zh(o,_e()))return null;{const d=n||Ne.EMPTY_NODE;return jl(o,d)}}}else{const a=Ts(t.visibleWrites,e);if(!l&&Bh(a))return n;if(!l&&n==null&&!zh(a,_e()))return null;{const o=function(p){return(p.visible||l)&&(!r||!~r.indexOf(p.writeId))&&(dn(p.path,e)||dn(e,p.path))},d=Sb(t.allWrites,o,e),h=n||Ne.EMPTY_NODE;return jl(d,h)}}}function $C(t,e,n){let r=Ne.EMPTY_NODE;const l=br(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(vt,(a,o)=>{r=r.updateImmediateChild(a,o)}),r;if(n){const a=Ts(t.visibleWrites,e);return n.forEachChild(vt,(o,d)=>{const h=jl(Ts(a,new Pe(o)),d);r=r.updateImmediateChild(o,h)}),K0(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const a=Ts(t.visibleWrites,e);return K0(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function zC(t,e,n,r,l){W(r||l,"Either existingEventSnap or existingServerSnap must exist");const a=st(e,n);if(zh(t.visibleWrites,a))return null;{const o=Ts(t.visibleWrites,a);return Bh(o)?l.getChild(n):jl(o,l.getChild(n))}}function BC(t,e,n,r){const l=st(e,n),a=br(t.visibleWrites,l);if(a!=null)return a;if(r.isCompleteForChild(n)){const o=Ts(t.visibleWrites,l);return jl(o,r.getNode().getImmediateChild(n))}else return null}function UC(t,e){return br(t.visibleWrites,e)}function WC(t,e,n,r,l,a,o){let d;const h=Ts(t.visibleWrites,e),p=br(h,_e());if(p!=null)d=p;else if(n!=null)d=jl(h,n);else return[];if(d=d.withIndex(o),!d.isEmpty()&&!d.isLeafNode()){const N=[],y=o.getCompare(),w=a?d.getReverseIteratorFrom(r,o):d.getIteratorFrom(r,o);let I=w.getNext();for(;I&&N.length<l;)y(I,r)!==0&&N.push(I),I=w.getNext();return N}else return[]}function HC(){return{visibleWrites:mn.empty(),allWrites:[],lastWriteId:-1}}function Uh(t,e,n,r){return kb(t.writeTree,t.treePath,e,n,r)}function Eb(t,e){return $C(t.writeTree,t.treePath,e)}function Y0(t,e,n,r){return zC(t.writeTree,t.treePath,e,n,r)}function vc(t,e){return UC(t.writeTree,st(t.treePath,e))}function VC(t,e,n,r,l,a){return WC(t.writeTree,t.treePath,e,n,r,l,a)}function Jm(t,e,n){return BC(t.writeTree,t.treePath,e,n)}function Ib(t,e){return Tb(st(t.treePath,e),t.writeTree)}function Tb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(r!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(r);if(l){const a=l.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,B0(r,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,NC(r,l.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,bC(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,B0(r,e.snapshotNode,l.oldSnap));else throw Sl("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Rb=new KC;class Zm{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Xm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jm(this.writes_,e,r)}}getChildAfterChild(e,n,r){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gr(this.viewCache_),a=VC(this.writes_,l,n,1,r,e);return a.length===0?null:a[0]}}function YC(t,e){W(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function QC(t,e,n,r,l){const a=new GC;let o,d;if(n.type===_n.OVERWRITE){const p=n;p.source.fromUser?o=Wh(t,e,p.path,p.snap,r,l,a):(W(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered()&&!me(p.path),o=yc(t,e,p.path,p.snap,r,l,d,a))}else if(n.type===_n.MERGE){const p=n;p.source.fromUser?o=XC(t,e,p.path,p.children,r,l,a):(W(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered(),o=Hh(t,e,p.path,p.children,r,l,d,a))}else if(n.type===_n.ACK_USER_WRITE){const p=n;p.revert?o=eS(t,e,p.path,r,l,a):o=JC(t,e,p.path,p.affectedTree,r,l,a)}else if(n.type===_n.LISTEN_COMPLETE)o=ZC(t,e,n.path,r,a);else throw Sl("Unknown operation type: "+n.type);const h=a.getChanges();return qC(e,o,h),{viewCache:o,changes:h}}function qC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const l=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=$h(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(yC($h(e)))}}function Mb(t,e,n,r,l,a){const o=e.eventCache;if(vc(r,n)!=null)return e;{let d,h;if(me(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=gr(e),N=p instanceof Ne?p:Ne.EMPTY_NODE,y=Eb(r,N);d=t.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const p=Uh(r,gr(e));d=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=pe(n);if(p===".priority"){W(Ps(n)===1,"Can't have a priority with additional path components");const N=o.getNode();h=e.serverCache.getNode();const y=Y0(r,n,N,h);y!=null?d=t.filter.updatePriority(N,y):d=o.getNode()}else{const N=Re(n);let y;if(o.isCompleteForChild(p)){h=e.serverCache.getNode();const w=Y0(r,n,o.getNode(),h);w!=null?y=o.getNode().getImmediateChild(p).updateChild(N,w):y=o.getNode().getImmediateChild(p)}else y=Jm(r,p,e.serverCache);y!=null?d=t.filter.updateChild(o.getNode(),p,y,N,l,a):d=o.getNode()}}return Ia(e,d,o.isFullyInitialized()||me(n),t.filter.filtersNodes())}}function yc(t,e,n,r,l,a,o,d){const h=e.serverCache;let p;const N=o?t.filter:t.filter.getIndexedFilter();if(me(n))p=N.updateFullNode(h.getNode(),r,null);else if(N.filtersNodes()&&!h.isFiltered()){const I=h.getNode().updateChild(n,r);p=N.updateFullNode(h.getNode(),I,null)}else{const I=pe(n);if(!h.isCompleteForPath(n)&&Ps(n)>1)return e;const D=Re(n),ie=h.getNode().getImmediateChild(I).updateChild(D,r);I===".priority"?p=N.updatePriority(h.getNode(),ie):p=N.updateChild(h.getNode(),I,ie,D,Rb,null)}const y=wb(e,p,h.isFullyInitialized()||me(n),N.filtersNodes()),w=new Zm(l,y,a);return Mb(t,y,n,l,w,d)}function Wh(t,e,n,r,l,a,o){const d=e.eventCache;let h,p;const N=new Zm(l,e,a);if(me(n))p=t.filter.updateFullNode(e.eventCache.getNode(),r,o),h=Ia(e,p,!0,t.filter.filtersNodes());else{const y=pe(n);if(y===".priority")p=t.filter.updatePriority(e.eventCache.getNode(),r),h=Ia(e,p,d.isFullyInitialized(),d.isFiltered());else{const w=Re(n),I=d.getNode().getImmediateChild(y);let D;if(me(w))D=r;else{const $=N.getCompleteChild(y);$!=null?ob(w)===".priority"&&$.getChild(db(w)).isEmpty()?D=$:D=$.updateChild(w,r):D=Ne.EMPTY_NODE}if(I.equals(D))h=e;else{const $=t.filter.updateChild(d.getNode(),y,D,w,N,o);h=Ia(e,$,d.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function Q0(t,e){return t.eventCache.isCompleteForChild(e)}function XC(t,e,n,r,l,a,o){let d=e;return r.foreach((h,p)=>{const N=st(n,h);Q0(e,pe(N))&&(d=Wh(t,d,N,p,l,a,o))}),r.foreach((h,p)=>{const N=st(n,h);Q0(e,pe(N))||(d=Wh(t,d,N,p,l,a,o))}),d}function q0(t,e,n){return n.foreach((r,l)=>{e=e.updateChild(r,l)}),e}function Hh(t,e,n,r,l,a,o,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,p;me(n)?p=r:p=new Te(null).setTree(n,r);const N=e.serverCache.getNode();return p.children.inorderTraversal((y,w)=>{if(N.hasChild(y)){const I=e.serverCache.getNode().getImmediateChild(y),D=q0(t,I,w);h=yc(t,h,new Pe(y),D,l,a,o,d)}}),p.children.inorderTraversal((y,w)=>{const I=!e.serverCache.isCompleteForChild(y)&&w.value===null;if(!N.hasChild(y)&&!I){const D=e.serverCache.getNode().getImmediateChild(y),$=q0(t,D,w);h=yc(t,h,new Pe(y),$,l,a,o,d)}}),h}function JC(t,e,n,r,l,a,o){if(vc(l,n)!=null)return e;const d=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if(me(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return yc(t,e,n,h.getNode().getChild(n),l,a,d,o);if(me(n)){let p=new Te(null);return h.getNode().forEachChild(hl,(N,y)=>{p=p.set(new Pe(N),y)}),Hh(t,e,n,p,l,a,d,o)}else return e}else{let p=new Te(null);return r.foreach((N,y)=>{const w=st(n,N);h.isCompleteForPath(w)&&(p=p.set(N,h.getNode().getChild(w)))}),Hh(t,e,n,p,l,a,d,o)}}function ZC(t,e,n,r,l){const a=e.serverCache,o=wb(e,a.getNode(),a.isFullyInitialized()||me(n),a.isFiltered());return Mb(t,o,n,r,Rb,l)}function eS(t,e,n,r,l,a){let o;if(vc(r,n)!=null)return e;{const d=new Zm(r,e,l),h=e.eventCache.getNode();let p;if(me(n)||pe(n)===".priority"){let N;if(e.serverCache.isFullyInitialized())N=Uh(r,gr(e));else{const y=e.serverCache.getNode();W(y instanceof Ne,"serverChildren would be complete if leaf node"),N=Eb(r,y)}N=N,p=t.filter.updateFullNode(h,N,a)}else{const N=pe(n);let y=Jm(r,N,e.serverCache);y==null&&e.serverCache.isCompleteForChild(N)&&(y=h.getImmediateChild(N)),y!=null?p=t.filter.updateChild(h,N,y,Re(n),d,a):e.eventCache.getNode().hasChild(N)?p=t.filter.updateChild(h,N,Ne.EMPTY_NODE,Re(n),d,a):p=h,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Uh(r,gr(e)),o.isLeafNode()&&(p=t.filter.updateFullNode(p,o,a)))}return o=e.serverCache.isFullyInitialized()||vc(r,_e())!=null,Ia(e,p,o,t.filter.filtersNodes())}}function tS(t,e){const n=gr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!me(e)&&!n.getImmediateChild(pe(e)).isEmpty())?n.getChild(e):null}function X0(t,e,n,r){e.type===_n.MERGE&&e.source.queryId!==null&&(W(gr(t.viewCache_),"We should always have a full cache before handling merges"),W($h(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,a=QC(t.processor_,l,e,n,r);return YC(t.processor_,a.viewCache),W(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,nS(t,a.changes,a.viewCache.eventCache.getNode())}function nS(t,e,n,r){const l=t.eventRegistrations_;return IC(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J0;function sS(t){W(!J0,"__referenceConstructor has already been defined"),J0=t}function ep(t,e,n,r){const l=e.source.queryId;if(l!==null){const a=t.views.get(l);return W(a!=null,"SyncTree gave us an op for an invalid query."),X0(a,e,n,r)}else{let a=[];for(const o of t.views.values())a=a.concat(X0(o,e,n,r));return a}}function tp(t,e){let n=null;for(const r of t.views.values())n=n||tS(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z0;function rS(t){W(!Z0,"__referenceConstructor has already been defined"),Z0=t}class eg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Te(null),this.pendingWriteTree_=HC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lS(t,e,n,r,l){return PC(t.pendingWriteTree_,e,n,r,l),l?$c(t,new xr(yb(),e,n)):[]}function sl(t,e,n=!1){const r=DC(t.pendingWriteTree_,e);if(AC(t.pendingWriteTree_,e)){let a=new Te(null);return r.snap!=null?a=a.set(_e(),!0):Zt(r.children,o=>{a=a.set(new Pe(o),!0)}),$c(t,new gc(r.path,a,n))}else return[]}function Fc(t,e,n){return $c(t,new xr(bb(),e,n))}function aS(t,e,n){const r=Te.fromObject(n);return $c(t,new Ja(bb(),e,r))}function iS(t,e,n,r){const l=Lb(t,r);if(l!=null){const a=Ob(l),o=a.path,d=a.queryId,h=Qt(o,e),p=new xr(Nb(d),h,n);return Fb(t,o,p)}else return[]}function oS(t,e,n,r){const l=Lb(t,r);if(l){const a=Ob(l),o=a.path,d=a.queryId,h=Qt(o,e),p=Te.fromObject(n),N=new Ja(Nb(d),h,p);return Fb(t,o,N)}else return[]}function Pb(t,e,n){const l=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(o,d)=>{const h=Qt(o,e),p=tp(d,h);if(p)return p});return kb(l,e,a,n,!0)}function $c(t,e){return Db(e,t.syncPointTree_,null,Cb(t.pendingWriteTree_,_e()))}function Db(t,e,n,r){if(me(t.path))return Ab(t,e,n,r);{const l=e.get(_e());n==null&&l!=null&&(n=tp(l,_e()));let a=[];const o=pe(t.path),d=t.operationForChild(o),h=e.children.get(o);if(h&&d){const p=n?n.getImmediateChild(o):null,N=Ib(r,o);a=a.concat(Db(d,h,p,N))}return l&&(a=a.concat(ep(l,t,r,n))),a}}function Ab(t,e,n,r){const l=e.get(_e());n==null&&l!=null&&(n=tp(l,_e()));let a=[];return e.children.inorderTraversal((o,d)=>{const h=n?n.getImmediateChild(o):null,p=Ib(r,o),N=t.operationForChild(o);N&&(a=a.concat(Ab(N,d,h,p)))}),l&&(a=a.concat(ep(l,t,r,n))),a}function Lb(t,e){return t.tagToQueryMap.get(e)}function Ob(t){const e=t.indexOf("$");return W(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pe(t.substr(0,e))}}function Fb(t,e,n){const r=t.syncPointTree_.get(e);W(r,"Missing sync point for query tag that we're tracking");const l=Cb(t.pendingWriteTree_,e);return ep(r,n,l,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new np(n)}node(){return this.node_}}class sp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=st(this.path_,e);return new sp(this.syncTree_,n)}node(){return Pb(this.syncTree_,this.path_)}}const cS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tg=function(t,e,n){if(!t||typeof t!="object")return t;if(W(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dS(t[".sv"],e,n);if(typeof t[".sv"]=="object")return uS(t[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dS=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+t)}},uS=function(t,e,n){t.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&W(!1,"Unexpected increment value: "+r);const l=e.node();if(W(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return r;const o=l.getValue();return typeof o!="number"?r:o+r},hS=function(t,e,n,r){return rp(e,new sp(n,t),r)},mS=function(t,e,n){return rp(t,new np(e),n)};function rp(t,e,n){const r=t.getPriority().val(),l=tg(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const o=t,d=tg(o.getValue(),e,n);return d!==o.getValue()||l!==o.getPriority().val()?new et(d,gt(l)):t}else{const o=t;return a=o,l!==o.getPriority().val()&&(a=a.updatePriority(new et(l))),o.forEachChild(vt,(d,h)=>{const p=rp(h,e.getImmediateChild(d),n);p!==h&&(a=a.updateImmediateChild(d,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function ap(t,e){let n=e instanceof Pe?e:new Pe(e),r=t,l=pe(n);for(;l!==null;){const a=bl(r.node.children,l)||{children:{},childCount:0};r=new lp(l,r,a),n=Re(n),l=pe(n)}return r}function El(t){return t.node.value}function $b(t,e){t.node.value=e,Vh(t)}function zb(t){return t.node.childCount>0}function pS(t){return El(t)===void 0&&!zb(t)}function zc(t,e){Zt(t.node.children,(n,r)=>{e(new lp(n,t,r))})}function Bb(t,e,n,r){n&&e(t),zc(t,l=>{Bb(l,e,!0)})}function fS(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ci(t){return new Pe(t.parent===null?t.name:ci(t.parent)+"/"+t.name)}function Vh(t){t.parent!==null&&xS(t.parent,t.name,t)}function xS(t,e,n){const r=pS(n),l=ss(t.node.children,e);r&&l?(delete t.node.children[e],t.node.childCount--,Vh(t)):!r&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Vh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=/[\[\].#$\/\u0000-\u001F\u007F]/,vS=/[\[\].#$\u0000-\u001F\u007F]/,Mu=10*1024*1024,Ub=function(t){return typeof t=="string"&&t.length!==0&&!gS.test(t)},yS=function(t){return typeof t=="string"&&t.length!==0&&!vS.test(t)},bS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yS(t)},Wb=function(t,e,n){const r=n instanceof Pe?new Z3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+nr(r));if(typeof e=="function")throw new Error(t+"contains a function "+nr(r)+" with contents = "+e.toString());if(By(e))throw new Error(t+"contains "+e.toString()+" "+nr(r));if(typeof e=="string"&&e.length>Mu/3&&Lc(e)>Mu)throw new Error(t+"contains a string greater than "+Mu+" utf8 bytes "+nr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(Zt(e,(o,d)=>{if(o===".value")l=!0;else if(o!==".priority"&&o!==".sv"&&(a=!0,!Ub(o)))throw new Error(t+" contains an invalid key ("+o+") "+nr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);eC(r,o),Wb(t,d,r),tC(r)}),l&&a)throw new Error(t+' contains ".value" child '+nr(r)+" in addition to actual children.")}},NS=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ub(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!bS(n))throw new Error(q2(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wS(t,e){let n=null;for(let r=0;r<e.length;r++){const l=e[r],a=l.getPath();n!==null&&!ub(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(l)}n&&t.eventLists_.push(n)}function Nr(t,e,n){wS(t,n),_S(t,r=>dn(r,e)||dn(e,r))}function _S(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const l=t.eventLists_[r];if(l){const a=l.path;e(a)?(CS(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function CS(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ka&&xt("event: "+n.toString()),ii(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="repo_interrupt",kS=25;class ES{constructor(e,n,r,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xc(),this.transactionQueueTree_=new lp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IS(t,e,n){if(t.stats_=Gm(t.repoInfo_),t.forceRestClient_||_3())t.server_=new fc(t.repoInfo_,(r,l,a,o)=>{ng(t,r,l,a,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>sg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Qn(t.repoInfo_,e,(r,l,a,o)=>{ng(t,r,l,a,o)},r=>{sg(t,r)},r=>{RS(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=I3(t.repoInfo_,()=>new EC(t.stats_,t.server_)),t.infoData_=new wC,t.infoSyncTree_=new eg({startListening:(r,l,a,o)=>{let d=[];const h=t.infoData_.getNode(r._path);return h.isEmpty()||(d=Fc(t.infoSyncTree_,r._path,h),setTimeout(()=>{o("ok")},0)),d},stopListening:()=>{}}),ip(t,"connected",!1),t.serverSyncTree_=new eg({startListening:(r,l,a,o)=>(t.server_.listen(r,a,l,(d,h)=>{const p=o(d,h);Nr(t.eventQueue_,r._path,p)}),[]),stopListening:(r,l)=>{t.server_.unlisten(r,l)}})}function TS(t){const n=t.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Hb(t){return cS({timestamp:TS(t)})}function ng(t,e,n,r,l){t.dataUpdateCount++;const a=new Pe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(l)if(r){const h=cc(n,p=>gt(p));o=oS(t.serverSyncTree_,a,h,l)}else{const h=gt(n);o=iS(t.serverSyncTree_,a,h,l)}else if(r){const h=cc(n,p=>gt(p));o=aS(t.serverSyncTree_,a,h)}else{const h=gt(n);o=Fc(t.serverSyncTree_,a,h)}let d=a;o.length>0&&(d=cp(t,a)),Nr(t.eventQueue_,d,o)}function sg(t,e){ip(t,"connected",e),e===!1&&PS(t)}function RS(t,e){Zt(e,(n,r)=>{ip(t,n,r)})}function ip(t,e,n){const r=new Pe("/.info/"+e),l=gt(n);t.infoData_.updateSnapshot(r,l);const a=Fc(t.infoSyncTree_,r,l);Nr(t.eventQueue_,r,a)}function MS(t){return t.nextWriteId_++}function PS(t){Vb(t,"onDisconnectEvents");const e=Hb(t),n=xc();Fh(t.onDisconnect_,_e(),(l,a)=>{const o=hS(l,a,t.serverSyncTree_,e);vb(n,l,o)});let r=[];Fh(n,_e(),(l,a)=>{r=r.concat(Fc(t.serverSyncTree_,l,a));const o=OS(t,l);cp(t,o)}),t.onDisconnect_=xc(),Nr(t.eventQueue_,_e(),r)}function DS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(SS)}function Vb(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),xt(n,...e)}function Gb(t,e,n){return Pb(t.serverSyncTree_,e,n)||Ne.EMPTY_NODE}function op(t,e=t.transactionQueueTree_){if(e||Bc(t,e),El(e)){const n=Yb(t,e);W(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&AS(t,ci(e),n)}else zb(e)&&zc(e,n=>{op(t,n)})}function AS(t,e,n){const r=n.map(p=>p.currentWriteId),l=Gb(t,e,r);let a=l;const o=l.hash();for(let p=0;p<n.length;p++){const N=n[p];W(N.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const y=Qt(e,N.path);a=a.updateChild(y,N.currentOutputSnapshotRaw)}const d=a.val(!0),h=e;t.server_.put(h.toString(),d,p=>{Vb(t,"transaction put response",{path:h.toString(),status:p});let N=[];if(p==="ok"){const y=[];for(let w=0;w<n.length;w++)n[w].status=2,N=N.concat(sl(t.serverSyncTree_,n[w].currentWriteId)),n[w].onComplete&&y.push(()=>n[w].onComplete(null,!0,n[w].currentOutputSnapshotResolved)),n[w].unwatcher();Bc(t,ap(t.transactionQueueTree_,e)),op(t,t.transactionQueueTree_),Nr(t.eventQueue_,e,N);for(let w=0;w<y.length;w++)ii(y[w])}else{if(p==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{$t("transaction at "+h.toString()+" failed: "+p);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=p}cp(t,e)}},o)}function cp(t,e){const n=Kb(t,e),r=ci(n),l=Yb(t,n);return LS(t,l,r),r}function LS(t,e,n){if(e.length===0)return;const r=[];let l=[];const o=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const h=e[d],p=Qt(n,h.path);let N=!1,y;if(W(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)N=!0,y=h.abortReason,l=l.concat(sl(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=kS)N=!0,y="maxretry",l=l.concat(sl(t.serverSyncTree_,h.currentWriteId,!0));else{const w=Gb(t,h.path,o);h.currentInputSnapshot=w;const I=e[d].update(w.val());if(I!==void 0){Wb("transaction failed: Data returned ",I,h.path);let D=gt(I);typeof I=="object"&&I!=null&&ss(I,".priority")||(D=D.updatePriority(w.getPriority()));const ie=h.currentWriteId,C=Hb(t),j=mS(D,w,C);h.currentOutputSnapshotRaw=D,h.currentOutputSnapshotResolved=j,h.currentWriteId=MS(t),o.splice(o.indexOf(ie),1),l=l.concat(lS(t.serverSyncTree_,h.path,j,h.currentWriteId,h.applyLocally)),l=l.concat(sl(t.serverSyncTree_,ie,!0))}else N=!0,y="nodata",l=l.concat(sl(t.serverSyncTree_,h.currentWriteId,!0))}Nr(t.eventQueue_,n,l),l=[],N&&(e[d].status=2,function(w){setTimeout(w,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(y==="nodata"?r.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):r.push(()=>e[d].onComplete(new Error(y),!1,null))))}Bc(t,t.transactionQueueTree_);for(let d=0;d<r.length;d++)ii(r[d]);op(t,t.transactionQueueTree_)}function Kb(t,e){let n,r=t.transactionQueueTree_;for(n=pe(e);n!==null&&El(r)===void 0;)r=ap(r,n),e=Re(e),n=pe(e);return r}function Yb(t,e){const n=[];return Qb(t,e,n),n.sort((r,l)=>r.order-l.order),n}function Qb(t,e,n){const r=El(e);if(r)for(let l=0;l<r.length;l++)n.push(r[l]);zc(e,l=>{Qb(t,l,n)})}function Bc(t,e){const n=El(e);if(n){let r=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[r]=n[l],r++);n.length=r,$b(e,n.length>0?n:void 0)}zc(e,r=>{Bc(t,r)})}function OS(t,e){const n=ci(Kb(t,e)),r=ap(t.transactionQueueTree_,e);return fS(r,l=>{Pu(t,l)}),Pu(t,r),Bb(r,l=>{Pu(t,l)}),n}function Pu(t,e){const n=El(e);if(n){const r=[];let l=[],a=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(W(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(W(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),l=l.concat(sl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));a===-1?$b(e,void 0):n.length=a+1,Nr(t.eventQueue_,ci(e),l);for(let o=0;o<r.length;o++)ii(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let l=n[r];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function $S(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$t(`Invalid query segment '${n}' in query '${t}'`)}return e}const rg=function(t,e){const n=zS(t),r=n.namespace;n.domain==="firebase.com"&&ts(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ts("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||x3();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Zy(n.host,n.secure,r,l,e,"",r!==n.subdomain),path:new Pe(n.pathString)}},zS=function(t){let e="",n="",r="",l="",a="",o=!0,d="https",h=443;if(typeof t=="string"){let p=t.indexOf("//");p>=0&&(d=t.substring(0,p-1),t=t.substring(p+2));let N=t.indexOf("/");N===-1&&(N=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(N,y)),N<y&&(l=FS(t.substring(N,y)));const w=$S(t.substring(Math.min(t.length,y)));p=e.indexOf(":"),p>=0?(o=d==="https"||d==="wss",h=parseInt(e.substring(p+1),10)):p=e.length;const I=e.slice(0,p);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{const D=e.indexOf(".");r=e.substring(0,D).toLowerCase(),n=e.substring(D+1),a=r}"ns"in w&&(a=w.ns)}return{host:e,port:h,domain:n,subdomain:r,secure:o,scheme:d,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,l){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=l}get key(){return me(this._path)?null:ob(this._path)}get ref(){return new Il(this._repo,this._path)}get _queryIdentifier(){const e=W0(this._queryParams),n=Hm(e);return n==="{}"?"default":n}get _queryObject(){return W0(this._queryParams)}isEqual(e){if(e=Ry(e),!(e instanceof dp))return!1;const n=this._repo===e._repo,r=ub(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&r&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+J3(this._path)}}class Il extends dp{constructor(e,n){super(e,n,new qm,!1)}get parent(){const e=db(this._path);return e===null?null:new Il(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}sS(Il);rS(Il);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="FIREBASE_DATABASE_EMULATOR_HOST",Gh={};let US=!1;function WS(t,e,n,r){t.repoInfo_=new Zy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function HS(t,e,n,r,l){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||ts("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=rg(a,l),d=o.repoInfo,h;typeof process<"u"&&_0&&(h=_0[BS]),h?(a=`http://${h}?ns=${d.namespace}`,o=rg(a,l),d=o.repoInfo):o.repoInfo.secure;const p=new S3(t.name,t.options,e);NS("Invalid Firebase Database URL",o),me(o.path)||ts("Database URL must point to the root of a Firebase Database (not including a child path).");const N=GS(d,t,p,new C3(t.name,n));return new KS(N,t)}function VS(t,e){const n=Gh[e];(!n||n[t.key]!==t)&&ts(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DS(t),delete n[t.key]}function GS(t,e,n,r){let l=Gh[e.name];l||(l={},Gh[e.name]=l);let a=l[t.toURLString()];return a&&ts("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new ES(t,US,n,r),l[t.toURLString()]=a,a}class KS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Il(this._repo,_e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(VS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ts("Cannot call "+e+" on a deleted database.")}}function YS(t=J_(),e){const n=Y_(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=L2("database");r&&QS(n,...r)}return n}function QS(t,e,n,r={}){t=Ry(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ts("Cannot call useEmulator() after instance has already been initialized.");const l=t._repoInternal;let a;if(l.repoInfo_.nodeAdmin)r.mockUserToken&&ts('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Oo(Oo.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:O2(r.mockUserToken,t.app.options.projectId);a=new Oo(o)}WS(l,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){d3(X_),uc(new Qa("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return HS(r,l,a,n)},"PUBLIC").setMultipleInstances(!0)),dl(C0,S0,t),dl(C0,S0,"esm2017")}Qn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Qn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};qS();const XS={apiKey:"AIzaSyBRrxkXnyGd3HKXFKEUB2o15sY8U2N2Mic",authDomain:"beancraft-sales-team.firebaseapp.com",databaseURL:"https://beancraft-sales-team-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"beancraft-sales-team",storageBucket:"beancraft-sales-team.firebasestorage.app",messagingSenderId:"995629604879",appId:"1:995629604879:web:eb60f4b66c6c5c936f1d77"},sr=Ay(XS),te=YS(sr),lg=["  ,     .","       .","        ."," .    .","       .","  ,      .","     .  .","  .  ,     .","    .","      .","   .     .","   .    .","1%  ,   .","          .","   .    .","   ,  .","      .","      .","  ,   .","   ,   .",' "NO" " "  ,   .',"       .","     ,   .","    .","  ,    .","        .","   .","      .","      .","     .","   .   .","      .","      .   .","  .    .","       .","      .","     .","     .","     ,    .","       .","      .","  .     .","       .","  .   .","  .    .","        .","  ,     .","    .  .","     .","   .    .","     .","       .","     .  .","     ?","  .    .","  .    .","       .","      .","     .  .","     ."," 3  .    .","     .","   .  .","      .","      .","       .","      .","     .","    .","    ,    .","  .   .","    .   .","      .","      .","   ,     .","  ,   .","      ."," .     .","    .   .","   ,     .","      .  .","   ."," .    .","    .   .","  ,    .","  .   .","      .","     ."," .     .","      .","     .","     .","    .   .","  .   .","      .","     .  .","     .","      .","      .","    .   .","      .","    ,    .","      .","        .","          .","        .","   .  .","   .    .","        .","      .",'" "      .',"    .","    .","      .","       .","      .","  ,      .","       .","   .   .","      .","      .","   .    .","     .","   ,     .","           .","    .","   ,     .","      .","  10     .","   ,    .","        .","    .","     .  ."," .    .","         .","  .  .","    ,     .","    .","      .","    .","  ,    .","      .","       .","  .    .","     .","  .     .","       .","    .","     .","        ,   .","  .     .","   .","   ,   .","     .","       .","     .","     .","       .",'  "   "   .',"     .","     .","       ."," . ()   .","  .    ."," ,    .","       .","     .","      .","      .","''     ''   .","     .","       .","     .","     .","  .    .","       .","    ."," .     .","     .","     .","    .","     ,    .","  ,    .","  .    .","       .","   .","    .","     .","     .","       .","   ,   .","      .","      .","     .","    .","       .","       .","    .","   .      ."],ag=[".     .","''   ,      .","   .  .","     ,   .","   .     ."," .       .","        .","   ,    .","   .     .","      ."," ,    ''  .","   ,     .","   ,    .","         .","       .",".       .","  .    .","  ,    .","   VIP      .","         .","   .  .","  DB     .","      .","        .","  ,   .","    .   .","       ."," ,    .","       ."," .    .","    .      .","      .","   ,    .","     ."," ,   .","    .","   ,    .","       .","          .","     .","  .    .","  ,   .","       ."," .     .","   ,  ?",'"."     .',"     .","    .  .",".      .","  .   .","    .  ."," ,  .  .","     .","    ,    .","      .","     .","       .","   1    .","    ,  ."," .    .","  .  .","     .","    ,    .","     .","  . ."," ?    .","   .","     .","      .","     .","  .    .","    .    .","     .","   .   .","       .","      .","    ,   .","       .","  .   .","      .","       .","     .","   ,     .",".    .","     .","  .    ."," ''  ''   .","  .  ,  .","  ,   .","  . ."," , ,   .","       .","     .","   ,    .","      .","   ,    .","      ."," .     ."," .   .",".    .","       .","   ,   .","       .","        .","      .","    .","    .","      .","       .","        ."," .    .","  .  .","        .","    .","    .","        .","      .","  .   ?","   ."," ,     .","     .","      .","         .","     .","    .  .","        .","      .","    .","    .","      .","    .","        .","   .   .","    .","  ,   .","     ."," ,    .","    .","   ,     ."," ,  . .","      .","      .","      .","  .   .","  ,   .","     .","      .","     'YES'.","     .","    .","     .","      .","    .","       .","   .   .","     .","   ,   .","         .","    .","  ,   .","  .    .","     .","      .","    ,   .","    .","   .","        .","     ."," .     .","    .","      .","     .","       .","  ,   .","      .","       .","    ."," ,   .","        .","      .","     .","    ,     .","    .","   ,    .","     .","  .  .","   ,   .","    .","    .","  ,   .","     .","      .","    .","     .","      .","     .","    .","   .  .",".    .","  .  .",".        ."],Ze={negative:{bg:"#9ca3af",label:""},neutral:{bg:"#f97316",label:""},positive:{bg:"#22c55e",label:""},special:{bg:"#ef4444",label:"",blink:!0},missed:{bg:"#eab308",label:""}},ms=()=>new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),Du=()=>{const t=new Date,n=new Intl.DateTimeFormat("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),r=l=>{var a;return((a=n.find(o=>o.type===l))==null?void 0:a.value)||"0"};return{year:parseInt(r("year")),month:parseInt(r("month"))-1,day:parseInt(r("day")),hour:parseInt(r("hour")),minute:parseInt(r("minute")),dayOfWeek:new Date(parseInt(r("year")),parseInt(r("month"))-1,parseInt(r("day"))).getDay()}},ig=["","","",""],JS="AIzaSyDcz5e1qre9QMbrKmUSjT9nEsajSnhIhAI",ZS=["","","","","","","","","","","","","","","","","","",""],og=t=>t.split("").map(e=>{const n=e.charCodeAt(0)-44032;return n>=0&&n<=11171?ZS[Math.floor(n/588)]:e}).join(""),ek=(t,e)=>{if(!e)return!0;const n=t.toLowerCase(),r=e.toLowerCase();return n.includes(r)?!0:og(t).includes(og(e))},cg=t=>{if(!t)return"";const e=t.split(" ");return e.length>=2?e.slice(-2).join(" "):t},_o=[{id:1,name:"",color:"#3b82f6",username:"sm001",password:"1234",promo:{:0,:0,:0,:0}},{id:2,name:"",color:"#10b981",username:"sm002",password:"1234",promo:{:0,:0,:0,:0}}],tk=()=>{var If,Tf,Rf,Mf,Pf,Df,Af,Lf,Of,Ff,$f,zf,Bf,Uf,Wf,Hf,Vf,Gf,Kf,Yf,Qf,qf,Xf,Jf,Zf,ex,tx,nx;const[t,e]=g.useState(!1),[n,r]=g.useState(null),[l,a]=g.useState(""),[o,d]=g.useState(""),[h,p]=g.useState(!1),[N,y]=g.useState("admin"),[w]=g.useState(()=>lg[Math.floor(Math.random()*lg.length)]),[I,D]=g.useState("quote"),[$,ie]=g.useState("connecting"),[C,j]=g.useState(!1),S=localStorage.getItem("bc_current_tab")||"map",[T,K]=g.useState(S),[U,X]=g.useState(null),[J,De]=g.useState("basic"),[de,bt]=g.useState([]),[Os,kn]=g.useState(0),[jr,wr]=g.useState("single"),[Fs,_r]=g.useState(""),[H,ae]=g.useState(null),[ce,Ee]=g.useState(null),[Le,rs]=g.useState(""),[en,Cr]=g.useState([]),[En,tn]=g.useState(!1),[St,Uc]=g.useState(null),[dt,fn]=g.useState({name:"",content:"",type:"broker",memo:""}),[di,up]=g.useState([]),[qb,ui]=g.useState(!1),[In,Xb]=g.useState(null),[Tl,Wc]=g.useState(""),[hp,mp]=g.useState(""),[ls,hi]=g.useState("theme"),[pp,Jb]=g.useState([]),[Zb,eN]=g.useState(""),[Hc,mi]=g.useState(null),[fp,Sr]=g.useState(null),[Tn,Vc]=g.useState(null),[nk,tN]=g.useState(()=>{const i=localStorage.getItem("bc_team_feedback");return i?JSON.parse(i):[]}),[Gc,xp]=g.useState(""),[Kc,gp]=g.useState(""),[pi,Yc]=g.useState(null),[Rl,vp]=g.useState([]),[sk,rk]=g.useState(""),[Qc,qc]=g.useState(!1),[fi,xi]=g.useState(null),[gi,yp]=g.useState("analysis"),[vi,nN]=g.useState(""),[Oe,bp]=g.useState(null),[Xc,Np]=g.useState(!1),[Ml,Jc]=g.useState(!1),[jp,Pl]=g.useState(""),[lk,sN]=g.useState(Date.now()),[Dl,xn]=g.useState(null),[rN,Zc]=g.useState(!1),[Rn,Mn]=g.useState({seats:20,unitPrice:6e3,turnover:4,occupancy:40,rent:300,labor:400,materialRate:32,otherCost:150}),wp=g.useRef(Date.now()),_p=g.useRef(null),ut=g.useCallback(()=>{wp.current=Date.now(),sN(Date.now())},[]);g.useEffect(()=>Qc&&fi==="client"&&!Ml?(_p.current=setInterval(()=>{Date.now()-wp.current>6e4&&(Jc(!0),Pl(""))},1e3),()=>clearInterval(_p.current)):()=>{},[Qc,fi,Ml]);const Cp="AIzaSyAl0PfvfKlD-nZxtAJOC6qhME-A-V_u2L8",lN=async i=>{var c,u,m,f,x;try{return((x=(f=(m=(u=(c=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Cp}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i}]}],generationConfig:{temperature:.7,maxOutputTokens:4096}})})).json()).candidates)==null?void 0:c[0])==null?void 0:u.content)==null?void 0:m.parts)==null?void 0:f[0])==null?void 0:x.text)||""}catch(v){return console.error("Gemini API :",v),null}},Sp=async()=>{if(!vi.trim())return;Np(!0),ut();const i=`    . "${vi}"      .

  JSON  .    JSON:
{
  "region": "${vi}",
  "overview": {
    "cafeCount": "  (:  150)",
    "recentOpen": " 6  ",
    "recentClose": " 6  ",
    "avgRent": "  ()",
    "avgCoffeePrice": " "
  },
  "consumers": {
    "main": " ",
    "secondary": "2 ",
    "characteristics": " "
  },
  "franchise": {
    "starbucks": "  ",
    "mega": "  ",
    "compose": "  ",
    "ediya": "  ",
    "paik": "  "
  },
  "development": {
    "news": ["  1", "  2"],
    "timeline": " "
  },
  "risk": {
    "factors": [" 1", " 2"],
    "level": "//"
  },
  "simulation": {
    "suggestedSeats": 20,
    "suggestedUnitPrice": 6500,
    "suggestedTurnover": 4.2,
    "suggestedOccupancy": 38,
    "suggestedRent": 350,
    "suggestedLabor": 450,
    "explanation": "  "
  },
  "insight": "AI   (  )",
  "sources": ["1", "2", "3"]
}`;try{const c=await lN(i);if(c){const u=c.match(/\{[\s\S]*\}/);if(u){const m=JSON.parse(u[0]);bp(m),m.simulation&&Mn(f=>({...f,seats:m.simulation.suggestedSeats||f.seats,unitPrice:m.simulation.suggestedUnitPrice||f.unitPrice,turnover:m.simulation.suggestedTurnover||f.turnover,occupancy:m.simulation.suggestedOccupancy||f.occupancy,rent:m.simulation.suggestedRent||f.rent,labor:m.simulation.suggestedLabor||f.labor}))}}}catch(c){console.error(" :",c)}Np(!1)},aN=()=>{const{seats:i,unitPrice:c,turnover:u,occupancy:m,rent:f,labor:x,materialRate:v,otherCost:b}=Rn,_=i*u*(m/100),M=_*c*30,L=M*(v/100),A=f+x+L+b,Q=M-A,xe=Math.ceil(A/(c*(1-v/100)));return{monthlyRevenue:M,totalCost:A,profit:Q,bepCups:xe,dailyCustomers:Math.round(_)}},yi={seats:{title:" ",definition:"         .",calculation:"  1.5~2  (10 = 15~20)",standard:" : 10~15 / : 20~30 / : 40 "},unitPrice:{title:"",definition:" 1   .",calculation:"  /   ",standard:" : 3,000~4,000 / : 5,000~7,000 / : 8,000 "},turnover:{title:"",definition:" 1     .     .",calculation:" =    /   ",standard:" : 4~5 / /: 2~3 /  : 6~10"},occupancy:{title:"",definition:"      .",calculation:"    /    x 100",standard:"  40% (   30~35%)"},rent:{title:" ",definition:"    .     .",calculation:" + ( x   / 12)",standard:"  .  500+ /  150~250"},labor:{title:" ",definition:" , 4,      .",calculation:" x  x 30 x  x 1.15 (4)",standard:"2025  10,030 . 2   400~500"},materialRate:{title:"",definition:"  (, ,  )  .",calculation:" /  x 100",standard:" : 25~35% /  : 35~45%"},otherCost:{title:"",definition:", ,      .",calculation:" +  +  +  +  +  + ",standard:": 100~130 / : 130~180 / : 180 "}};g.useEffect(()=>(te.ref("teamFeedback").orderByChild("timestamp").limitToLast(100).on("value",i=>{const c=i.val();if(c){const u=Object.values(c).sort((m,f)=>new Date(f.timestamp)-new Date(m.timestamp));tN(u)}}),()=>te.ref("teamFeedback").off()),[]);const iN=`    /.

[]
-        
-         
-  :    

[ ]
- :   ( )
- :  (  ,      )
- :  ( 6,900~1.3,   )
-  : / ,   , / 

[]
- /    
-     
-    
-       

[ ]
-         
-   /   
-    
-     
-  `,[Wt,Al]=g.useState(null),[bi,kp]=g.useState(!1),[kr,ak]=g.useState(null),[ik,ok]=g.useState(!1),ed=async(i,c=0)=>{var m,f,x,v,b;kp(!0);const u=iN+`


   


 
- : `+i.managerName+`
-   : `+i.thisVisits+" (  "+(i.visitChange>=0?"+":"")+i.visitChange+`%)
-  : `+i.newCompanies+`
-  : `+i.consults+`
-  : `+i.positiveRate+`%

  
- : `+i.positive+" | : "+i.special+`
- : `+i.neutral+" | : "+i.missed+`

 
1. comment:     (2)
2. analysis:    (/)
3. suggestion:     ()
4. encouragement:   
5. focus:    

  (JSON):
{"comment": "...", "analysis": "...", "suggestion": "...", "encouragement": "...", "focus": "..."}

JSON .`;try{const _=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Cp}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:u}]}],generationConfig:{temperature:.7,maxOutputTokens:1024}})});if(_.status===429&&c<3)return console.log(`429  - ${c+1}  ... (5 )`),await new Promise(A=>setTimeout(A,5e3)),ed(i,c+1);const M=((b=(v=(x=(f=(m=(await _.json()).candidates)==null?void 0:m[0])==null?void 0:f.content)==null?void 0:x.parts)==null?void 0:v[0])==null?void 0:b.text)||"",L=M.match(/\{[\s\S]*\}/);if(L){const A=JSON.parse(L[0]);Al(A)}else Al({comment:M,analysis:"",suggestion:"",encouragement:""})}catch(_){console.error("AI Report Error:",_),Al({comment:"   .",analysis:"",suggestion:" .",encouragement:""})}kp(!1)},[ck,dk]=g.useState(!1),[uk,hk]=g.useState([]),[mk,pk]=g.useState(!1),oN=()=>localStorage.getItem("bc_theme_mode")||"dark",cN=()=>{const i=localStorage.getItem("bc_theme_mode")||"dark";return i==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":i},[Pn,td]=g.useState(oN),[dN,uN]=g.useState(cN),[Ni,nd]=g.useState([]),[hN,Ep]=g.useState(!1),[mN,sd]=g.useState(!1),[Ip,rd]=g.useState(!1),[pN,ji]=g.useState(!1),[Tp,wi]=g.useState(!1),[Dn,Ll]=g.useState(null),[He,Ol]=g.useState(null),[q,Fl]=g.useState(null),[fN,_i]=g.useState(null),[lt,qe]=g.useState(null),[ld,ad]=g.useState(null),[xN,Ci]=g.useState(!1),[Xe,Ht]=g.useState(null),[$l,Si]=g.useState(null),[gN,ki]=g.useState(!1),[id,Ei]=g.useState(null),[Ii,od]=g.useState(!1),[$s,Ti]=g.useState([]),[vN,Ri]=g.useState(!1),[yN,cd]=g.useState(!1),[bN,dd]=g.useState(null),[Rp,Mi]=g.useState(!1),[Vt,gn]=g.useState([]),ud=g.useRef(null),Mp=g.useRef(null),[NN,hd]=g.useState(!1),[md,jN]=g.useState([]),[wN,pd]=g.useState(!1),[fd,Pp]=g.useState(""),[Dp,Ap]=g.useState(null),[_N,CN]=g.useState(""),[fk,SN]=g.useState(""),[Lp,Op]=g.useState("neutral"),[vn,Pi]=g.useState(""),[Di,Ai]=g.useState(""),[zl,Fp]=g.useState(""),[$p,zp]=g.useState(""),[xd,gd]=g.useState({:!1,:!1,:!1,:!1}),[Li,vd]=g.useState([]),[zs,Er]=g.useState([]),Oi=g.useRef(null),Ce=g.useRef(null),yd=g.useRef([]),Bs=g.useRef([]),[ue,kN]=g.useState(_o),[Bl,EN]=g.useState([]),[le,IN]=g.useState([]),[Fi,TN]=g.useState([]),[$i,Bp]=g.useState([]),[Up,RN]=g.useState([]),[MN,PN]=g.useState({}),[Fe,Wp]=g.useState([]),[Nt,Hp]=g.useState([]),[ye,kt]=g.useState([]),[zi,Ir]=g.useState(ms()),[Bi,Ul]=g.useState("09:00"),[xk,gk]=g.useState(""),[vk,yk]=g.useState(""),[Wl,Hl]=g.useState(""),[bd,as]=g.useState(null),[Us,Ui]=g.useState(null),[bk,Nk]=g.useState(null),[At,An]=g.useState(null),[jk,wk]=g.useState(""),[Tr,Wi]=g.useState(0),[is,Vp]=g.useState(new Date),[Vl,Nd]=g.useState(null),[ht,Gl]=g.useState(null),[DN,Ws]=g.useState(!1),[jd,Rr]=g.useState(null),[Kl,wd]=g.useState(null),[Hi,_d]=g.useState(null),[yn,Ln]=g.useState({title:"",time:"09:00",memo:""}),[Yl,Mr]=g.useState(null),[Pr,Cd]=g.useState(""),[Sd,kd]=g.useState(""),[On,Ql]=g.useState([]),[_k,Ck]=g.useState([]),[Gp,Ed]=g.useState(!1),[Sk,kk]=g.useState(""),[Ek,Ik]=g.useState(""),[Tk,Vi]=g.useState([]),[Id,AN]=g.useState(""),[Td,LN]=g.useState(""),[Gi,ON]=g.useState("listings"),[Rd,Kp]=g.useState(""),[ql,FN]=g.useState(""),[Xl,Yp]=g.useState(""),[Rk,Mk]=g.useState("all"),[Pk,Dk]=g.useState(1),[Ak,Lk]=g.useState(null),[Dr,Ki]=g.useState(()=>{try{const i=localStorage.getItem("bc_collected_realtors");return i?JSON.parse(i):[]}catch{return[]}}),[$N,Md]=g.useState(()=>!localStorage.getItem("bc_collected_realtors")),[Ok,Fk]=g.useState(""),[$k,zk]=g.useState([]),[Bk,Uk]=g.useState(!1),[zN,BN]=g.useState(!1),[Wk,Hk]=g.useState(!1),[Vk,Gk]=g.useState(""),[Kk,Yk]=g.useState([]),[Qk,qk]=g.useState(null),[Xk,UN]=g.useState([]),[Jk,WN]=g.useState([]),[Zk,e4]=g.useState(""),[t4,n4]=g.useState(""),[s4,r4]=g.useState(!1),[l4,a4]=g.useState(200),[i4,HN]=g.useState({phase:"",current:0,total:0,found:0,message:""}),[o4,c4]=g.useState(!1),[d4,u4]=g.useState(""),[h4,m4]=g.useState(""),[p4,f4]=g.useState("");g.useRef([]);const Qp=g.useRef([]),Pd=g.useRef([]),Dd=g.useRef(null),Z=g.useRef(null),Fn=g.useRef([]),$n=g.useRef([]),qp=g.useRef([]),[Yi,Ad]=g.useState(!1),[Qi,Xp]=g.useState(null),Ar=g.useRef(null),zn=g.useRef(null),Bn=g.useRef(null),Lr=g.useRef(null),qi=g.useRef(0),os=g.useRef(null),[Ld,Xi]=g.useState(null),[Hs,Jp]=g.useState("all"),[Vs,Zp]=g.useState("all"),[Od,VN]=g.useState(""),[Fd,x4]=g.useState(null),[$d,g4]=g.useState(""),[v4,y4]=g.useState(""),[ee,Ke]=g.useState({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),[zd,GN]=g.useState(""),[Jl,KN]=g.useState("all"),[Bd,YN]=g.useState("all"),[b4,N4]=g.useState({}),[j4,QN]=g.useState(""),[Et,Gs]=g.useState({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""}),[nn,Ji]=g.useState({managerId:null,companyId:null,amount:"",date:"",note:""}),Or=i=>{try{const c=localStorage.getItem("bc_"+i);return c?JSON.parse(c):null}catch{return null}},qN=async()=>{if(localStorage.getItem("bc_migration_done"))return;console.log(" ...");const c=Or("managers"),u=Or("pins"),m=Or("companies"),f=Or("customers"),x=Or("sales"),v=Or("requests");if(c&&c.length>0){console.log(" managers :",c.length);for(const b of c)await te.ref("managers/"+b.id).set(b)}if(u&&u.length>0){console.log(" pins :",u.length);for(const b of u)await te.ref("pins/"+b.id).set(b)}if(m&&m.length>0){console.log(" companies :",m.length);for(const b of m)await te.ref("companies/"+b.id).set(b)}if(f&&f.length>0){console.log(" customers :",f.length);for(const b of f)await te.ref("customers/"+b.id).set(b)}if(x&&x.length>0){console.log(" sales :",x.length);for(const b of x)await te.ref("sales/"+b.id).set(b)}if(v&&v.length>0){console.log(" requests :",v.length);for(const b of v)await te.ref("requests/"+b.id).set(b)}localStorage.setItem("bc_migration_done","true"),console.log(" !")},Ks=g.useRef({});g.useEffect(()=>{const i=c=>{let u=c;c==="auto"&&(u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),uN(u),u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.body.style.removeProperty("background"),document.body.style.removeProperty("color")};if(i(Pn),localStorage.setItem("bc_theme_mode",Pn),Pn==="auto"){const c=window.matchMedia("(prefers-color-scheme: dark)"),u=m=>i("auto");return c.addEventListener("change",u),()=>c.removeEventListener("change",u)}},[Pn]),g.useEffect(()=>{const i=c=>{if(c.source===window){if(c.data.type==="BEANCRAFT_EXTENSION_READY"&&(console.log("  v"+c.data.version),BN(!0),JN("0000000000")),c.data.type==="BEANCRAFT_RESPONSE"){const{requestId:u,response:m}=c.data;Ks.current[u]&&(Ks.current[u](m),delete Ks.current[u])}c.data.type==="BEANCRAFT_SCRAPE_PROGRESS"&&HN({phase:c.data.phase||"",current:c.data.current||0,total:c.data.total||0,found:c.data.found||0,message:c.data.message||""})}};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}},[]);const XN=(i,c={})=>new Promise(u=>{const m=Date.now()+Math.random();Ks.current[m]=u,window.postMessage({type:"BEANCRAFT_REQUEST",action:i,requestId:m,...c},"*"),setTimeout(()=>{Ks.current[m]&&(Ks.current[m]({success:!1,error:""}),delete Ks.current[m])},1e4)}),JN=async(i,c="sido")=>{if(!zN)return;const u=await XN("GET_REGIONS",{cortarNo:i});u&&u.success&&u.regions?(console.log("[] "+c+" :",u.regions.length+""),c==="sido"?UN(u.regions):c==="gugun"&&WN(u.regions)):console.error("   :",u==null?void 0:u.error)};g.useEffect(()=>{if(!n){ie("disconnected");return}ie("connecting"),qN();const i={managers:te.ref("managers"),pins:te.ref("pins"),companies:te.ref("companies"),customers:te.ref("customers"),sales:te.ref("sales"),requests:te.ref("requests"),adminPassword:te.ref("adminPassword"),userStatus:te.ref("userStatus"),routes:te.ref("routes"),realtorCollections:te.ref("realtorCollections"),realtors:te.ref("realtors"),marketIssues:te.ref("marketIssues").limitToLast(20)};return i.managers.on("value",c=>{const u=c.val();u&&kN(Object.values(u)),ie("connected")}),i.pins.on("value",c=>{const u=c.val();EN(u?Object.values(u):[])}),i.companies.on("value",c=>{const u=c.val();IN(u?Object.values(u):[])}),i.customers.on("value",c=>{const u=c.val();TN(u?Object.values(u):[])}),i.sales.on("value",c=>{const u=c.val();Bp(u?Object.values(u):[])}),i.requests.on("value",c=>{const u=c.val();RN(u?Object.values(u):[])}),i.adminPassword.on("value",c=>{const u=c.val();u&&y(u)}),i.userStatus.on("value",c=>{const u=c.val();PN(u||{})}),i.routes.on("value",c=>{const u=c.val();Wp(u?Object.values(u):[])}),i.realtorCollections.on("value",c=>{try{const u=c.val();if(u){const m=Object.entries(u).map(([f,x])=>({id:f,...x}));m.sort((f,x)=>x.exportedAt-f.exportedAt),Vi(m)}else Vi([])}catch(u){console.error("RealtorCollections  :",u),Vi([])}},c=>{console.error("Firebase realtorCollections  :",c),Vi([])}),i.calendarEvents=te.ref("calendarEvents"),i.calendarEvents.on("value",c=>{const u=c.val();Hp(u?Object.values(u):[])}),i.realtors.on("value",c=>{try{const u=c.val();if(u){const m=Object.entries(u).map(([f,x])=>({id:f,...x}));m.sort((f,x)=>(x.listings||0)-(f.listings||0)),Ki(m);try{localStorage.setItem("bc_collected_realtors",JSON.stringify(m))}catch{}}else Ki([]);Md(!1)}catch(u){console.error("Realtors   :",u),Ki([]),Md(!1)}},c=>{console.error("Firebase realtors  :",c),Ki([]),Md(!1)}),i.marketIssues.on("value",c=>{try{const u=c.val();if(u){const m=Object.entries(u).map(([v,b])=>({id:v,...b})),f=Date.now()-365*24*60*60*1e3,x=m.filter(v=>new Date(v.||v.createdAt).getTime()<f?(te.ref("marketIssues/"+v.id).remove(),!1):!0);x.sort((v,b)=>new Date(b.||b.createdAt)-new Date(v.||v.createdAt)),bt(x)}else bt([])}catch(u){console.error("MarketIssues   :",u),bt([])}}),j(!0),ie("connected"),()=>{Object.values(i).forEach(c=>c.off())}},[n]),g.useEffect(()=>{if(!(n!=null&&n.managerId))return;const i=n.managerId,c=te.ref(`userMents/${i}`),u=te.ref(`mentFeedbacks/${i}`);return c.on("value",m=>{const f=m.val();if(f){const x=Object.keys(f).map(v=>({id:v,...f[v]}));Cr(x)}else Cr([])}),u.on("value",m=>{const f=m.val();if(f){const x=Object.keys(f).map(v=>({id:v,...f[v]}));up(x)}else up([])}),()=>{c.off(),u.off()}},[n==null?void 0:n.managerId]),g.useEffect(()=>{const i=te.ref("teamFeedbacks");return i.orderByChild("timestamp").limitToLast(50).on("value",c=>{const u=c.val();if(u){const m=Object.keys(u).map(f=>({id:f,...u[f]})).sort((f,x)=>new Date(x.timestamp)-new Date(f.timestamp));vp(m)}else vp([])}),()=>i.off()},[]),g.useEffect(()=>{if(!t)return;const i=new Date().toISOString().split("T")[0];if(Nt.length>0){const c=Nt.filter(u=>u.date===i&&u.type==="followup");c.length>0&&mi(u=>{if(u)return u;const m=c.slice(0,3).map(x=>x.title).join(", "),f=c.length>3?`  ${c.length-3}`:"";return{count:c.length,preview:m+f,events:c}})}if(Fe.length>0){const c=new Date;c.setDate(c.getDate()-1);const u=c.toISOString().split("T")[0],m=Fe.filter(f=>{var v;return!f.date||f.date>u||f.status==="completed"?!1:(v=f.stops)==null?void 0:v.some(b=>!b.visited)});m.length>0?Sr({count:m.length,routes:m}):Sr(null)}else Sr(null)},[t,Nt,Fe]),g.useEffect(()=>{if(!t||!n||le.length===0)return;const i=f=>{if(!f)return{hasIssue:!0,issue:" "};const x=[{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "},{pattern://,correct:"",issue:":   "}];for(const{pattern:A,issue:Q}of x)if(A.test(f))return{hasIssue:!0,issue:Q};const v=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=["","","","","","","","","","","","","","","","","","","","","","","","",""],_=/|||||||||||||||||||/.test(f),P=v.some(A=>f.includes(A+"")||f.includes(A+" ")),M=b.some(A=>f.includes(A+"")||f.includes(A+" ")||f.includes(A+""));return!_&&!P&&!M&&f.length>5?{hasIssue:!0,issue:"/  "}:!/[-]+(|||||||||)\s*\d*/.test(f)&&f.length>3?{hasIssue:!0,issue:"   "}:{hasIssue:!1}},c=n.managerId||n.id,u=le.filter(f=>f.managerId===c),m=[];u.forEach(f=>{const{hasIssue:x,issue:v}=i(f.address),b=!f.lat||!f.lng;(x||b)&&m.push({id:f.id,name:f.name,address:f.address,issue:x?v:"   (  )"})}),m.length>0?_d({count:m.length,companies:m}):_d(null)},[t,n,le]);const Ud=i=>te.ref("managers/"+i.id).set(i),Wd=i=>te.ref("pins/"+i.id).set(i),ef=i=>te.ref("pins/"+i).remove(),Un=i=>te.ref("companies/"+i.id).set(i),ZN=i=>te.ref("companies/"+i).remove(),tf=i=>te.ref("customers/"+i.id).set(i),ej=i=>te.ref("customers/"+i).remove(),nf=i=>te.ref("sales/"+i.id).set(i),tj=i=>te.ref("sales/"+i).remove(),sf=i=>te.ref("requests/"+i.id).set(i),Zi=i=>te.ref("routes/"+i.id).set(i),rf=i=>te.ref("routes/"+i).remove(),lf=i=>{const c=(n==null?void 0:n.managerId)||"admin";te.ref(`userMents/${c}/${i.id}`).set(i)},nj=i=>{const c=(n==null?void 0:n.managerId)||"admin";te.ref(`userMents/${c}/${i}`).remove()},sj=i=>{const c=(n==null?void 0:n.managerId)||"admin";te.ref(`mentFeedbacks/${c}/${i.id}`).set(i)},rj=(i,c=!1)=>{const u=en.find(m=>m.id===i);if(u){const m={...u,useCount:(u.useCount||0)+1,successCount:c?(u.successCount||0)+1:u.successCount||0};lf(m)}},Hd=i=>te.ref("calendarEvents/"+i.id).set(i),lj=i=>te.ref("calendarEvents/"+i).remove();g.useEffect(()=>{var c;const i=localStorage.getItem("bc_remember_login");if(i)try{const u=JSON.parse(i);u.expiry>Date.now()?(a(u.id||""),d(u.pw||""),p(!0)):localStorage.removeItem("bc_remember_login")}catch{localStorage.removeItem("bc_remember_login")}try{const u=localStorage.getItem("bc_temp_route");if(u){const m=JSON.parse(u);((c=m.stops)==null?void 0:c.length)>0&&(kt(m.stops),m.name&&Hl(m.name),m.date&&Ir(m.date),m.time&&Ul(m.time),m.managerId&&as(m.managerId),m.editingId&&Ui(m.editingId))}}catch{}},[]),g.useEffect(()=>{const i=sr.auth().onAuthStateChanged(async c=>{if(c&&!t){const u=localStorage.getItem("bc_session");if(u)try{const v=JSON.parse(u);if(v.expiry>Date.now()&&v.user){let b=v.user;if(b.username){const _=_o.find(P=>P.username===b.username);_&&(!b.name||b.name.length<2||b.name.includes(""))&&(console.log(`[]   : ${b.name} -> ${_.name}`),b={...b,name:_.name},localStorage.setItem("bc_session",JSON.stringify({user:b,expiry:v.expiry})))}if(b){r(b),e(!0),b.managerId&&(as(b.managerId),Zl(b.managerId,!0)),console.log("  :",b.name);return}}}catch{}const m=c.email,f=m.split("@")[0];let x=null;if(f==="admin")x={name:"admin",role:"super",email:m};else try{const b=(await te.ref("managers").once("value")).val(),P=(b?Object.values(b):[]).find(M=>M.username===f||M.email===m);if(P){let M=P.name;const L=_o.find(A=>A.username===f||A.id===P.id);L&&(!P.name||P.name.length<2||P.name.includes(""))&&(M=L.name,console.log(`[]   : ${P.name} -> ${M}`),te.ref("managers/"+P.id).update({name:M})),x={name:M,role:"manager",managerId:P.id,username:P.username,email:m}}else x={name:f,role:"manager",email:m}}catch(v){console.error("managers  :",v),x={name:f,role:"manager",email:m}}r(x),e(!0),x.managerId&&(as(x.managerId),Zl(x.managerId,!0)),localStorage.setItem("bc_session",JSON.stringify({user:x,expiry:Date.now()+216e5})),console.log("Firebase  :",x.name)}else!c&&t&&(e(!1),r(null),localStorage.removeItem("bc_session"))});return()=>i()},[t]),g.useEffect(()=>{const i=()=>{if(Ni.length>0){const c=[...Ni],u=c.pop();nd(c),K(u)}};return window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[Ni]);const Ys=i=>{i!==T&&(window.history.pushState({tab:i},""),nd([...Ni,T]),K(i),localStorage.setItem("bc_current_tab",i))};g.useEffect(()=>{localStorage.setItem("bc_current_tab",T)},[T]);const af=g.useRef(Fd),of=g.useRef($d),Vd=g.useRef(Bl),cf=g.useRef(le),df=g.useRef(ue),uf=g.useRef(Li);g.useEffect(()=>{af.current=Fd},[Fd]),g.useEffect(()=>{of.current=$d},[$d]),g.useEffect(()=>{Vd.current=Bl},[Bl]),g.useEffect(()=>{cf.current=le},[le]),g.useEffect(()=>{df.current=ue},[ue]),g.useEffect(()=>{uf.current=Li},[Li]),g.useEffect(()=>{if(ye.length>0){const i={stops:ye,name:Wl,date:zi,time:Bi,managerId:bd,editingId:Us,savedAt:new Date().toISOString()};localStorage.setItem("bc_temp_route",JSON.stringify(i))}else localStorage.removeItem("bc_temp_route")},[ye]);const aj=(i,c)=>c?Math.max(28,i*2.5):i<=8?14:i<=10?18:i<=12?22:i<=14?26:30;g.useEffect(()=>{if(t&&T==="map"&&Oi.current){Ce.current=null;const i=()=>{var c;if(!((c=window.naver)!=null&&c.maps)){setTimeout(i,100);return}if(!Oi.current){setTimeout(i,100);return}Ce.current=new naver.maps.Map(Oi.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(Ce.current,"zoom_changed",()=>{Fr()}),naver.maps.Event.addListener(Ce.current,"click",u=>{const m=af.current,f=of.current;if(!m)return;const x=u.coord.lat(),v=u.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(x,v)},(b,_)=>{var A,Q,xe;let P=x.toFixed(4)+", "+v.toFixed(4);if(b===naver.maps.Service.Status.OK&&_.v2.results[0]){const k=_.v2.results[0].region;k&&(P=[(A=k.area1)==null?void 0:A.name,(Q=k.area2)==null?void 0:Q.name,(xe=k.area3)==null?void 0:xe.name].filter(Boolean).join(" "))}const M=f?"planned":"confirmed",L={id:Date.now(),managerId:m,status:M,region:P,lat:x,lng:v,date:f||"",createdAt:new Date().toISOString()};Wd(L)})}),setTimeout(()=>Fr(),500)};setTimeout(i,300)}},[t,T]),g.useEffect(()=>{t&&T==="map"&&Ce.current&&setTimeout(()=>{naver.maps.Event.trigger(Ce.current,"resize"),Fr()},100)},[t,T]),g.useEffect(()=>{t&&T==="route"&&Z.current&&setTimeout(()=>{naver.maps.Event.trigger(Z.current,"resize")},100)},[t,T]);const ij=()=>{let i=Vd.current;Hs!=="all"&&(i=i.filter(c=>c.managerId===Number(Hs))),Vs!=="all"&&(i=i.filter(c=>c.status===Vs)),vd(i.map(c=>c.id)),setTimeout(()=>Fr(),100)},Fr=g.useCallback(()=>{var x;if(!Ce.current||!((x=window.naver)!=null&&x.maps))return;yd.current.forEach(v=>v.setMap(null)),yd.current=[];const i=cf.current,c=df.current,u=uf.current,m=Ce.current.getZoom();let f=i.filter(v=>v.lat&&v.lng);Hs!=="all"&&(f=f.filter(v=>v.managerId===Number(Hs))),Vs!=="all"&&(f=f.filter(v=>v.reaction===Vs)),f.forEach(v=>{const b=c.find(Q=>Q.id===v.managerId);Ze[v.reaction]||Ze.neutral;const _=u.includes(v.id)||v.reaction==="special",P=aj(m,_),M=Math.max(2,Math.floor(P/5));let L="#9ca3af";v.reaction==="special"?L="#ef4444":v.reaction==="positive"?L="#22c55e":v.reaction==="neutral"?L="#f97316":v.reaction==="missed"&&(L="#eab308");const A=new naver.maps.Marker({position:new naver.maps.LatLng(v.lat,v.lng),map:Ce.current,icon:{content:`<div class="${_?v.reaction==="special"?"special-blink":"marker-pulse":""}" style="width:${P}px;height:${P}px;background:${L};border-radius:50%;border:${M}px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.4);cursor:pointer;display:flex;align-items:center;justify-content:center;">
 <span style="font-size:${Math.max(8,P/2.5)}px;color:white;font-weight:bold;">${v.name.charAt(0)}</span>
 </div>`,anchor:new naver.maps.Point(P/2,P/2)}});naver.maps.Event.addListener(A,"click",()=>{Ol({...v,manager:b})}),yd.current.push(A)}),u.length>0&&setTimeout(()=>vd([]),5e3)},[Hs,Vs]);g.useEffect(()=>{Ce.current&&Fr()},[le,ue,Hs,Vs,Li,Fr]),g.useEffect(()=>{if(t)return;const i=setTimeout(()=>D("logo"),4e3),c=setTimeout(()=>D("form"),6e3);return()=>{clearTimeout(i),clearTimeout(c)}},[t]),g.useEffect(()=>{var m,f;if(!t||le.length===0||!((f=(m=window.naver)==null?void 0:m.maps)!=null&&f.Service))return;const i=le.filter(x=>(!x.lat||!x.lng)&&(x.address||x.name));if(i.length===0)return;const u=setTimeout(async()=>{let x=0;for(const v of i){const b=await Yd(v.address,v.name);if(b){const _={...v,lat:b.lat,lng:b.lng};Un(_),x++}await new Promise(_=>setTimeout(_,300))}x>0&&console.log(`  ${x}    `)},2e3);return()=>clearTimeout(u)},[t,le.length]),g.useEffect(()=>{if(t&&T==="route"){Z.current&&(Z.current=null);const i=()=>{var c;if(!Dd.current){console.log("[] routeMapRef ..."),setTimeout(i,100);return}if(!((c=window.naver)!=null&&c.maps)){console.log("[] naver.maps ..."),setTimeout(i,100);return}Z.current||(console.log("[]  "),Z.current=new naver.maps.Map(Dd.current,{center:new naver.maps.LatLng(37.5665,126.978),zoom:11}),naver.maps.Event.addListener(Z.current,"click",u=>{const m=u.coord.lat(),f=u.coord.lng();naver.maps.Service.reverseGeocode({coords:new naver.maps.LatLng(m,f),orders:"roadaddr,addr"},(x,v)=>{var M,L;let b=" ",_="";if(x===naver.maps.Service.Status.OK&&((M=v.v2.results)==null?void 0:M.length)>0){const A=v.v2.results[0];if(A.land){const Q=A.land;_=`${A.region.area1.name} ${A.region.area2.name} ${A.region.area3.name} ${Q.name||""} ${Q.number1||""}`.trim(),(L=Q.addition0)!=null&&L.value?b=Q.addition0.value:b=`${A.region.area3.name} ${Q.number1||""}`.trim()}}const P={id:Date.now(),name:b,address:_,lat:m,lng:f,type:"click"};kt(A=>[...A,P])})}),console.log("[]  !"),setTimeout(()=>to(),500))};setTimeout(i,300)}},[t,T]),g.useEffect(()=>{if(!Z.current){T==="route"&&ye.length>0&&setTimeout(()=>{Z.current&&to()},500);return}to()},[ye,T]);const eo=()=>{Fn.current.forEach(i=>i.setMap(null)),Fn.current=[],$n.current.forEach(i=>i.setMap(null)),$n.current=[],qp.current.forEach(i=>i.setMap(null)),qp.current=[],os.current&&(os.current.setMap(null),os.current=null),Xi(null)},to=()=>{if(!Z.current)return;eo();const i=ye.filter(c=>c.lat&&c.lng);i.length!==0&&setTimeout(()=>{if(!Z.current)return;const c={};if(i.forEach((u,m)=>{const f=`${u.lat.toFixed(5)}_${u.lng.toFixed(5)}`;c[f]||(c[f]=[]),c[f].push({...u,originalIdx:m})}),Object.values(c).forEach(u=>{const m=u.length;u.forEach((f,x)=>{let v=0,b=0;if(m>1){const M=2*Math.PI/m*x,L=15e-5;v=Math.cos(M)*L,b=Math.sin(M)*L}const _=m>1,P=new naver.maps.Marker({position:new naver.maps.LatLng(f.lat+v,f.lng+b),map:Z.current,icon:{content:`<div style="background:linear-gradient(135deg,${_?"#f59e0b":"#14b8a6"},${_?"#d97706":"#0d9488"});color:white;width:${_?"32px":"28px"};height:${_?"32px":"28px"};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:${_?"11px":"12px"};box-shadow:0 3px 8px rgba(0,0,0,0.4);border:2px solid ${_?"#fbbf24":"white"}">${f.originalIdx+1}</div>`,anchor:new naver.maps.Point(_?16:14,_?16:14)},zIndex:100+f.originalIdx});naver.maps.Event.addListener(P,"click",()=>{Wi(f.originalIdx)}),Fn.current.push(P)})}),i.length>=2){const u=i.map(f=>new naver.maps.LatLng(f.lat,f.lng)),m=new naver.maps.Polyline({map:Z.current,path:u,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.9});$n.current.push(m)}if(i.length===1)Z.current.setCenter(new naver.maps.LatLng(i[0].lat,i[0].lng)),Z.current.setZoom(15);else if(i.length>=2){const u=new naver.maps.LatLngBounds;i.forEach(m=>u.extend(new naver.maps.LatLng(m.lat,m.lng))),Z.current.fitBounds(u,{padding:50})}},100)},oj=i=>{i.length!==0&&(Jp("all"),Zp("all"),vd(i.map(c=>c.id)),Ys("map"),setTimeout(()=>{if(Ce.current&&i.length>0)if(i.length===1)Ce.current.setCenter(new naver.maps.LatLng(i[0].lat,i[0].lng)),Ce.current.setZoom(14);else{const c=new naver.maps.LatLngBounds;i.forEach(u=>c.extend(new naver.maps.LatLng(u.lat,u.lng))),Ce.current.fitBounds(c,{padding:50})}},300))},cj=i=>(n==null?void 0:n.role)==="super"||i.managerId===(n==null?void 0:n.managerId),dj=i=>{ef(i),Ll(null)},uj=(i,c)=>{const u=Bl.find(m=>m.id===i);u&&Wd({...u,date:c,status:c?"planned":"confirmed"})},hj=()=>{zs.forEach(i=>{const c=Bl.find(u=>u.id===i);c&&Wd({...c,status:"confirmed",expiredChecked:!0})}),Er([]),Si(null)},mj=()=>{confirm(`${zs.length}  ?`)&&(zs.forEach(i=>ef(i)),Er([]),Si(null))},cs={:{lat:37.5547,lng:126.9707},:{lat:37.5659,lng:126.9773},:{lat:37.5701,lng:126.9822},3:{lat:37.5714,lng:126.9916},5:{lat:37.5707,lng:126.9992},:{lat:37.5711,lng:127.0095},:{lat:37.5762,lng:127.0251},:{lat:37.4979,lng:127.0276},:{lat:37.5007,lng:127.0365},:{lat:37.5045,lng:127.049},:{lat:37.5089,lng:127.0637},:{lat:37.5108,lng:127.0736},:{lat:37.5133,lng:127.1001},:{lat:37.5571,lng:126.9244},:{lat:37.5495,lng:126.9138},:{lat:37.5552,lng:126.9366},:{lat:37.5569,lng:126.9463},:{lat:37.5575,lng:126.9559},:{lat:37.5601,lng:126.9635},:{lat:37.566,lng:126.9823},3:{lat:37.5665,lng:126.9918},4:{lat:37.5669,lng:126.9983},:{lat:37.5653,lng:127.0076},:{lat:37.5659,lng:127.0176},:{lat:37.565,lng:127.0296},:{lat:37.5614,lng:127.0378},:{lat:37.5568,lng:127.0441},:{lat:37.5474,lng:127.0473},:{lat:37.5446,lng:127.0558},:{lat:37.5404,lng:127.07},:{lat:37.5358,lng:127.0863},:{lat:37.5352,lng:127.0948},:{lat:37.521,lng:127.1028},:{lat:37.5114,lng:127.0833},:{lat:37.4934,lng:127.0148},:{lat:37.492,lng:127.0077},:{lat:37.4815,lng:126.9976},:{lat:37.4766,lng:126.9816},:{lat:37.4769,lng:126.9637},:{lat:37.4812,lng:126.9527},:{lat:37.4824,lng:126.9418},:{lat:37.4842,lng:126.9296},:{lat:37.4876,lng:126.9131},:{lat:37.4854,lng:126.9015},:{lat:37.4929,lng:126.8966},:{lat:37.5088,lng:126.8913},:{lat:37.5178,lng:126.8956},:{lat:37.5247,lng:126.8964},:{lat:37.5349,lng:126.9024},:{lat:37.4856,lng:127.0165},:{lat:37.4844,lng:127.0343},:{lat:37.4871,lng:127.0467},:{lat:37.4908,lng:127.0555},:{lat:37.4946,lng:127.0634},:{lat:37.4968,lng:127.0716},:{lat:37.4987,lng:127.0792},:{lat:37.4838,lng:127.0858},:{lat:37.4874,lng:127.1017},:{lat:37.5271,lng:127.0284},:{lat:37.5168,lng:127.0203},:{lat:37.5112,lng:127.0132},:{lat:37.5048,lng:127.0049},:{lat:37.5405,lng:127.0172},:{lat:37.5476,lng:127.0131},:{lat:37.5541,lng:127.0103},:{lat:37.5588,lng:127.0096},:{lat:37.5614,lng:126.9943},:{lat:37.5759,lng:126.9735},:{lat:37.5766,lng:126.9855},:{lat:37.5608,lng:126.986},:{lat:37.5587,lng:126.9785},:{lat:37.5447,lng:126.972},:{lat:37.5349,lng:126.9732},:{lat:37.5295,lng:126.9686},:{lat:37.5214,lng:126.971},:{lat:37.5082,lng:126.979},:{lat:37.4868,lng:126.9816},:{lat:37.4698,lng:126.9853},:{lat:37.5822,lng:127.0019},:{lat:37.5884,lng:127.0064},:{lat:37.5929,lng:127.0166},:{lat:37.6035,lng:127.0251},:{lat:37.6131,lng:127.03},:{lat:37.6215,lng:127.0298},:{lat:37.6381,lng:127.0257},:{lat:37.6483,lng:127.0345},:{lat:37.6531,lng:127.0476},:{lat:37.6559,lng:127.0619},:{lat:37.6612,lng:127.073},:{lat:37.6702,lng:127.0799},:{lat:37.5708,lng:126.9768},:{lat:37.5653,lng:126.9666},:{lat:37.5476,lng:126.9312},:{lat:37.5247,lng:126.856},:{lat:37.5263,lng:126.875},:{lat:37.5242,lng:126.887},:{lat:37.5256,lng:126.8845},:{lat:37.5225,lng:126.9057},:{lat:37.5216,lng:126.9242},:{lat:37.5271,lng:126.9328},:{lat:37.5392,lng:126.946},:{lat:37.544,lng:126.9517},:{lat:37.5532,lng:126.9568},:{lat:37.5571,lng:127.0296},:{lat:37.5669,lng:127.052},:{lat:37.5613,lng:127.0641},:{lat:37.557,lng:127.0793},:{lat:37.5513,lng:127.0882},:{lat:37.5452,lng:127.1031},:{lat:37.5389,lng:127.1236},:{lat:37.5352,lng:127.1323},:{lat:37.5343,lng:127.1427},:{lat:37.5352,lng:127.152},:{lat:37.5424,lng:127.1441},:{lat:37.555,lng:127.1541},:{lat:37.5571,lng:127.167},:{lat:37.5344,lng:126.9945},:{lat:37.5342,lng:126.9874},:{lat:37.539,lng:126.9617},:{lat:37.5474,lng:126.9434},:{lat:37.5477,lng:126.9225},:{lat:37.5555,lng:126.9105},:{lat:37.5635,lng:126.904},:{lat:37.5681,lng:126.8972},:{lat:37.5769,lng:126.8997},:{lat:37.583,lng:126.9096},:{lat:37.5851,lng:126.918},:{lat:37.5933,lng:126.9179},:{lat:37.6017,lng:126.9214},:{lat:37.6107,lng:126.9301},:{lat:37.6149,lng:126.9391},:{lat:37.6189,lng:126.9209},:{lat:37.6159,lng:126.9114},:{lat:37.5397,lng:127.0019},:{lat:37.5474,lng:127.0071},:{lat:37.5602,lng:127.0149},:{lat:37.5718,lng:127.0166},:{lat:37.5798,lng:127.0147},:{lat:37.5868,lng:127.0195},:{lat:37.5863,lng:127.029},:{lat:37.5895,lng:127.034},:{lat:37.6017,lng:127.038},:{lat:37.6062,lng:127.0442},:{lat:37.6105,lng:127.0512},:{lat:37.6153,lng:127.0661},:{lat:37.6177,lng:127.0754},:{lat:37.6199,lng:127.0842},:{lat:37.6188,lng:127.0914},:{lat:37.5109,lng:127.0218},:{lat:37.5145,lng:127.0316},:{lat:37.5172,lng:127.0412},:{lat:37.5198,lng:127.0535},:{lat:37.5316,lng:127.0667},:{lat:37.5475,lng:127.0743},:{lat:37.5656,lng:127.084},:{lat:37.5735,lng:127.0869},:{lat:37.5802,lng:127.089},:{lat:37.5887,lng:127.087},:{lat:37.5966,lng:127.0851},:{lat:37.6026,lng:127.079},:{lat:37.6107,lng:127.0768},:{lat:37.6253,lng:127.0729},:{lat:37.6371,lng:127.0669},:{lat:37.6442,lng:127.064},:{lat:37.665,lng:127.0581},:{lat:37.6748,lng:127.0565},:{lat:37.6896,lng:127.0449},:{lat:37.6986,lng:127.0531},:{lat:37.5021,lng:126.9958},:{lat:37.4874,lng:126.9877},:{lat:37.4852,lng:126.9817},:{lat:37.4838,lng:126.9726},:{lat:37.4965,lng:126.9535},:{lat:37.5027,lng:126.9504},:{lat:37.5082,lng:126.9396},:{lat:37.4994,lng:126.9269},:{lat:37.4997,lng:126.9184},:{lat:37.503,lng:126.9086},:{lat:37.4865,lng:126.8873},:{lat:37.4813,lng:126.8828},:{lat:37.4762,lng:126.8687},:{lat:37.4762,lng:126.8563},:{lat:37.4792,lng:126.8421},:{lat:37.4927,lng:126.8234},:{lat:37.517,lng:127.1117},:{lat:37.5303,lng:127.1238},:{lat:37.5502,lng:127.1279},:{lat:37.5059,lng:127.1016},:{lat:37.5007,lng:127.1062},:{lat:37.4929,lng:127.1182},:{lat:37.4858,lng:127.1224},:{lat:37.4781,lng:127.1264},:{lat:37.4703,lng:127.1267},:{lat:37.4584,lng:127.15},:{lat:37.4507,lng:127.1573},:{lat:37.4455,lng:127.1574},:{lat:37.4389,lng:127.1538},:{lat:37.4345,lng:127.1508},:{lat:37.4322,lng:127.1291},:{lat:37.5794,lng:126.7975},:{lat:37.5622,lng:126.8011},:{lat:37.5596,lng:126.81},:{lat:37.5619,lng:126.8167},:{lat:37.5671,lng:126.8277},:{lat:37.5607,lng:126.8438},:{lat:37.5614,lng:126.854},:{lat:37.5587,lng:126.8622},:{lat:37.5516,lng:126.8718},:{lat:37.5471,lng:126.8773},:{lat:37.5392,lng:126.8785},:{lat:37.5331,lng:126.8936},:{lat:37.5284,lng:126.9182},:{lat:37.5176,lng:126.9324},:{lat:37.5131,lng:126.9426},:{lat:37.5122,lng:126.9527},:{lat:37.5083,lng:126.9633},:{lat:37.5079,lng:126.9882},:{lat:37.5082,lng:126.9961},:{lat:37.5027,lng:127.0147},:{lat:37.5048,lng:127.0249},:{lat:37.5075,lng:127.0345},:{lat:37.5104,lng:127.0433},:{lat:37.5114,lng:127.052},:{lat:37.5145,lng:127.0593},:{lat:37.5046,lng:127.0862},:{lat:37.5018,lng:127.0935},:{lat:37.5098,lng:127.1089},:{lat:37.5173,lng:127.1117},:{lat:37.5213,lng:127.1249},:{lat:37.5239,lng:127.1354},:{lat:37.5284,lng:127.148},:{lat:37.5416,lng:126.9714},:{lat:37.5299,lng:126.9647},:{lat:37.4984,lng:126.9265},:{lat:37.5174,lng:126.9141},:{lat:37.5159,lng:126.9073},:{lat:37.5032,lng:126.8822},:{lat:37.4569,lng:126.8957},:{lat:37.4679,lng:126.8958},:{lat:37.4796,lng:126.888},:{lat:37.5434,lng:127.0446},:{lat:37.5273,lng:127.0393},:{lat:37.4996,lng:127.0556},:{lat:37.4858,lng:127.0534},:{lat:37.48,lng:127.0509},:{lat:37.4747,lng:127.064},:{lat:37.45,lng:127.127},:{lat:37.44,lng:127.127},:{lat:37.4116,lng:127.1278},:{lat:37.3953,lng:127.1268},:{lat:37.385,lng:127.1234},:{lat:37.378,lng:127.1167},:{lat:37.3665,lng:127.1085},:{lat:37.3607,lng:127.1089},:{lat:37.3397,lng:127.1088},:{lat:37.3253,lng:127.1073},:{lat:37.3127,lng:127.1116},:{lat:37.2997,lng:127.1078},:{lat:37.2853,lng:127.1092},:{lat:37.275,lng:127.116},:{lat:37.265,lng:127.1182},:{lat:37.252,lng:127.0773},:{lat:37.2519,lng:127.0549},:{lat:37.244,lng:127.0471},:{lat:37.2399,lng:127.036},:{lat:37.2634,lng:127.0323},:{lat:37.267,lng:127.0119},:{lat:37.266,lng:126.9996},:{lat:37.47,lng:127.0391},:{lat:37.4509,lng:127.0538},:{lat:37.3947,lng:127.1115},:{lat:37.5313,lng:127.0369},:{lat:37.5805,lng:127.047},:{lat:37.5895,lng:127.0575},:{lat:37.5971,lng:127.0665},:{lat:37.5992,lng:127.0919},:{lat:37.6079,lng:127.1071},:{lat:37.5988,lng:127.1394},:{lat:37.6084,lng:127.1475},:{lat:37.6102,lng:127.162},:{lat:37.5879,lng:127.1901},:{lat:37.58,lng:127.2083},:{lat:37.5231,lng:127.2798},:{lat:37.5411,lng:127.312},:{lat:37.5456,lng:127.3204},:{lat:37.5508,lng:127.3459},:{lat:37.5633,lng:127.3704},:{lat:37.5664,lng:127.3964},:{lat:37.563,lng:127.4163},:{lat:37.4858,lng:127.4623},:{lat:37.4319,lng:127.5053},:{lat:37.6635,lng:127.0115},:{lat:37.6575,lng:127.0123},"4.19":{lat:37.6517,lng:127.0134},:{lat:37.6459,lng:127.0147},:{lat:37.6398,lng:127.0161},:{lat:37.6316,lng:127.0183},:{lat:37.6263,lng:127.0197},:{lat:37.6188,lng:127.0215},:{lat:37.6135,lng:127.0224},:{lat:37.6073,lng:127.0243},:{lat:37.5359,lng:126.7385},:{lat:37.559,lng:126.6882},:{lat:37.5323,lng:126.6416},:{lat:37.4929,lng:126.4939},:{lat:37.4974,lng:126.4692},:{lat:37.4465,lng:126.4519},1:{lat:37.4493,lng:126.4514},2:{lat:37.4604,lng:126.4419},:{lat:37.512,lng:127.059},:{lat:37.5111,lng:127.098},:{lat:37.5512,lng:126.9882},:{lat:37.5796,lng:126.977},:{lat:37.5794,lng:126.991},:{lat:37.5658,lng:126.9749},:{lat:37.5673,lng:127.0095},DDP:{lat:37.5673,lng:127.0095},:{lat:37.5344,lng:126.9945},:{lat:37.5608,lng:126.986},:{lat:37.574,lng:126.985},:{lat:37.5825,lng:126.985},:{lat:37.5716,lng:126.9769},:{lat:37.5695,lng:126.978},:{lat:37.5256,lng:126.9227},:{lat:37.5284,lng:126.934},:{lat:37.5213,lng:127.1249},:{lat:37.5434,lng:127.0446},:{lat:37.6207,lng:127.0404},:{lat:37.5681,lng:126.8972},:{lat:37.5151,lng:127.073},:{lat:37.4982,lng:126.8671},:{lat:37.5203,lng:127.023},:{lat:37.5198,lng:127.0535},:{lat:37.5273,lng:127.0393},:{lat:37.5446,lng:127.0558},:{lat:37.5665,lng:126.9918},:{lat:37.574,lng:126.989},:{lat:37.56,lng:126.922},:{lat:37.55,lng:126.91},:{lat:37.542,lng:126.985},:{lat:37.537,lng:126.992}},hf=i=>{const c=i.trim();if(cs[c])return cs[c];if(cs[c+""])return cs[c+""];if(c.endsWith("")&&cs[c.slice(0,-1)])return cs[c.slice(0,-1)];const m=Object.keys(cs).find(f=>f.includes(c)||c.includes(f));return m?cs[m]:null},mf=()=>{if(Od.trim()&&Ce.current){const i=Od.trim(),c=hf(i);if(c){Ce.current.setCenter(new naver.maps.LatLng(c.lat,c.lng)),Ce.current.setZoom(16),Bs.current.forEach(f=>f.setMap(null)),Bs.current=[];const m=new naver.maps.Circle({map:Ce.current,center:new naver.maps.LatLng(c.lat,c.lng),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});Bs.current.push(m),setTimeout(()=>m.setMap(null),5e3);return}const u=Vd.current.filter(m=>m.region&&m.region.toLowerCase().includes(i.toLowerCase()));if(u.length>0){oj(u);return}naver.maps.Service.geocode({query:i},(m,f)=>{if(m===naver.maps.Service.Status.OK&&f.v2.addresses&&f.v2.addresses.length>0){const x=f.v2.addresses[0],v=parseFloat(x.y),b=parseFloat(x.x);Ce.current.setCenter(new naver.maps.LatLng(v,b)),Ce.current.setZoom(16),Bs.current.forEach(P=>P.setMap(null)),Bs.current=[];const _=new naver.maps.Circle({map:Ce.current,center:new naver.maps.LatLng(v,b),radius:200,fillColor:"#14b8a6",fillOpacity:.3,strokeColor:"#0d9488",strokeWeight:2});Bs.current.push(_),setTimeout(()=>_.setMap(null),5e3)}else alert("  .")})}else ij()},Qs=i=>i?i.replace(/[^0-9]/g,""):"",pj=(i,c,u,m)=>{if(!i||!c||!u||!m)return 1/0;const f=6371e3,x=(u-i)*Math.PI/180,v=(m-c)*Math.PI/180,b=Math.sin(x/2)*Math.sin(x/2)+Math.cos(i*Math.PI/180)*Math.cos(u*Math.PI/180)*Math.sin(v/2)*Math.sin(v/2),_=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return f*_},Gd=(i,c)=>{if(!i||!c||c.length===0)return{isDuplicate:!1,matchedCompany:null};const u=i.name||i.officeName||i.realtorName||"",m=i.address||"",f=i.regNo||"",x=i.lat,v=i.lng,b=[Qs(i.phone||""),Qs(i.cellPhone||""),Qs(i.officePhone||""),Qs(i.mobile||"")].filter(A=>A&&A.length>=4),_=A=>(A||"").replace(/||||||/g,"").replace(/\s+/g,"").trim(),P=A=>{if(!A)return"";const xe=A.replace(/|||||/g,"").replace(/\([^)]*\)/g,"").trim().match(/(\S+)\s*(\S+(?:||))\s*(\d+(?:-\d+)?)/);return xe?`${xe[1]}_${xe[2]}_${xe[3]}`:""},M=_(u),L=P(m);for(const A of c){const Q=A.name||"",xe=A.address||"",k=A.regNo||"",se=A.lat,F=A.lng,B=[Qs(A.phone||""),Qs(A.contact||""),Qs(A.mobile||"")].filter(re=>re&&re.length>=4),G=_(Q),z=P(xe);if(f&&k&&f===k)return{isDuplicate:!0,matchedCompany:A,reason:"regNo"};if(pj(x,v,se,F)<=30&&M&&G&&M===G)return{isDuplicate:!0,matchedCompany:A,reason:"location+name"};if(b.some(re=>B.some(oe=>re===oe)))return{isDuplicate:!0,matchedCompany:A,reason:"phone"};if(L&&z&&L===z&&M&&G&&M===G)return{isDuplicate:!0,matchedCompany:A,reason:"address+name"};if(M&&G&&M===G){const re=m.match(/(\S+)/),oe=xe.match(/(\S+)/);if(re&&oe&&re[1]===oe[1])return{isDuplicate:!0,matchedCompany:A,reason:"name_in_gu"}}}return{isDuplicate:!1,matchedCompany:null}},Kd=(i,c)=>Gd(i,c).isDuplicate,Yd=(i,c=null)=>new Promise(u=>{var x,v;if(!((v=(x=window.naver)==null?void 0:x.maps)!=null&&v.Service)){u(null);return}const m=b=>new Promise(_=>{if(!b){_(null);return}naver.maps.Service.geocode({query:b},(P,M)=>{var L;if(P===naver.maps.Service.Status.OK&&((L=M.v2.addresses)==null?void 0:L.length)>0){const A=M.v2.addresses[0];_({lat:parseFloat(A.y),lng:parseFloat(A.x)})}else _(null)})});(async()=>{if(i){const b=await m(i);if(b)return u(b)}if(c){const b=await m(c);if(b)return u(b)}if(i){const b=i.replace(/\s*\d+.*$/,"").replace(/\s*\d+.*$/,"").replace(/\s*,.*$/,"").trim();if(b!==i){const _=await m(b);if(_)return u(_)}}if(i){const b=i.match(/(||||||||||||||||)[^\s]*\s+[^\s]+/);if(b){const _=await m(b[0]);if(_)return u(_)}}u(null)})()}),fj=i=>{const c=ms(),u=Nt.filter(x=>x.date!==c?!1:i.role==="super"?!0:x.managerId===i.managerId),m=Fe.filter(x=>x.date!==c?!1:i.role==="super"?!0:x.managerId===i.managerId),f=[...u.map(x=>({type:"calendar",...x})),...m.map(x=>{var v;return{type:"route",title:`: ${((v=x.stops)==null?void 0:v.length)||0} `,...x}})];f.length>0&&(jN(f),hd(!0))},xj=()=>{const i=Du();return i.dayOfWeek!==1?!1:i.day>=22&&i.day<=28},gj=i=>{if(i.role==="super"||!xj())return;const c=Du(),u=c.month+1>11?0:c.month+1,f=`${c.month+1>11?c.year+1:c.year}-${String(u+1).padStart(2,"0")}`;Nt.some(v=>{var b;return v.managerId===i.managerId&&((b=v.date)==null?void 0:b.startsWith(f))})||pd(!0)},pf=async i=>new Promise((c,u)=>{const m=new FileReader;m.onload=async()=>{var f,x,v,b;try{const _=m.result.split(",")[1],M=await(await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${JS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:_},features:[{type:"TEXT_DETECTION"}]}]})})).json();if((b=(v=(x=(f=M.responses)==null?void 0:f[0])==null?void 0:x.textAnnotations)==null?void 0:v[0])!=null&&b.description){const L=M.responses[0].textAnnotations[0].description,A=vj(L);c(A)}else c({raw:"",name:"",contact:"",phone:"",address:""})}catch(_){u(_)}},m.onerror=u,m.readAsDataURL(i)}),vj=i=>{const c=i.split(`
`).map(M=>M.trim()).filter(M=>M);let u="",m="",f="",x="";const v=[/010[-\s]?\d{4}[-\s]?\d{4}/,/02[-\s]?\d{3,4}[-\s]?\d{4}/,/0\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/];for(const M of c){for(const L of v){const A=M.match(L);if(A){f=A[0].replace(/[-\s]/g,"");break}}if(f)break}const b=/(||||||||||||||||)[^\n]+?(|||||)[^\n]*\d*/;for(const M of c){const L=M.match(b);if(L){x=L[0];break}}const _=[/\s*[:\s]*([-]{2,4})/,/([-]{2,4})\s*(|||||||)/,/^([-]{2,4})$/];for(const M of c){for(const L of _){const A=M.match(L);if(A){m=A[1]||A[0];break}}if(m)break}const P=[/([-]+)/,/([-]+)/,/([-]+)/];for(const M of c){for(const L of P){const A=M.match(L);if(A){u=A[1];break}}if(u)break}return{raw:i,name:u,contact:m,phone:f,address:x}},yj=async i=>{var u;const c=(u=i.target.files)==null?void 0:u[0];if(c){Mi(!0),Ri(!0);try{const m=await pf(c);dd(m),Ke({...ee,name:m.name||"",contact:m.contact||"",phone:m.phone||"",address:m.address||""})}catch(m){console.error("OCR :",m),alert("  .")}finally{Mi(!1),i.target.value=""}}},bj=async i=>{const c=Array.from(i.target.files||[]).slice(0,10);if(c.length!==0){Mi(!0),cd(!0),gn([]);try{const u=[];for(let m=0;m<c.length;m++){const f=await pf(c[m]);u.push({...f,managerId:(n==null?void 0:n.managerId)||null,reaction:"neutral",memo:""})}gn(u)}catch(u){console.error("OCR :",u),alert("    .")}finally{Mi(!1),i.target.value=""}}},Nj=()=>{const i=Vt.filter(c=>c.name);if(i.length===0)return alert("  .");i.forEach((c,u)=>{const m={id:Date.now()+u,name:c.name,contact:c.contact,phone:c.phone,address:c.address,region:c.address,managerId:c.managerId,reaction:c.reaction,memo:c.memo,createdAt:new Date().toLocaleString("ko-KR")};Un(m)}),alert(`${i.length}  .`),gn([]),cd(!1)},jj=(i,c,u,m)=>{const f=M=>M*Math.PI/180,x=M=>M*180/Math.PI,v=f(m-c),b=Math.sin(v)*Math.cos(f(u)),_=Math.cos(f(i))*Math.sin(f(u))-Math.sin(f(i))*Math.cos(f(u))*Math.cos(v);return(x(Math.atan2(b,_))+360)%360},wj=(i,c,u,m)=>{if(!Z.current)return;const f=new naver.maps.LatLng(i,c);zn.current||(zn.current=new naver.maps.Marker({position:f,map:Z.current,icon:{content:"",anchor:new naver.maps.Point(20,20)},zIndex:1e3})),zn.current.setPosition(f);const x=u||0;zn.current.setIcon({content:`<div style="position: relative; width: 40px; height: 40px;">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(${x}deg);">
 <div style="width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 20px solid #4285f4; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));"></div>
 </div>
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #4285f4; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">
 <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6px; height: 6px; background: white; border-radius: 50%;"></div>
 </div>
 </div>`,anchor:new naver.maps.Point(20,20)}),m&&m<500&&(Bn.current?(Bn.current.setCenter(f),Bn.current.setRadius(m)):Bn.current=new naver.maps.Circle({map:Z.current,center:f,radius:m,fillColor:"#4285f4",fillOpacity:.1,strokeColor:"#4285f4",strokeOpacity:.3,strokeWeight:1}))},_j=()=>{if(Yi)Ar.current&&(navigator.geolocation.clearWatch(Ar.current),Ar.current=null),zn.current&&(zn.current.setMap(null),zn.current=null),Bn.current&&(Bn.current.setMap(null),Bn.current=null),Lr.current=null,qi.current=0,Ad(!1),Xp(null);else{if(!navigator.geolocation)return alert("GPS   .");Ad(!0),Ar.current=navigator.geolocation.watchPosition(i=>{const{latitude:c,longitude:u,accuracy:m,heading:f,speed:x}=i.coords,v={lat:c,lng:u};Xp(v);let b=qi.current;if(Lr.current){const _=Lr.current.lat,P=Lr.current.lng;Math.sqrt(Math.pow(c-_,2)+Math.pow(u-P,2))*111e3>2&&(b=jj(_,P,c,u),qi.current=b,Lr.current=v)}else Lr.current=v;f&&!isNaN(f)&&x>.3&&(b=f,qi.current=f),wj(c,u,b,m)},i=>{console.error("GPS :",i);let c="GPS  .";i.code===1?c="GPS  .    .":i.code===2?c="GPS    .":i.code===3&&(c="GPS   ."),alert(c),Ad(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},Cj=()=>{Qi&&Z.current?(Z.current.setCenter(new naver.maps.LatLng(Qi.lat,Qi.lng)),Z.current.setZoom(16)):alert("    . GPS .")};g.useEffect(()=>()=>{Ar.current&&navigator.geolocation.clearWatch(Ar.current),zn.current&&zn.current.setMap(null),Bn.current&&Bn.current.setMap(null),os.current&&os.current.setMap(null)},[]),g.useEffect(()=>{if(t&&C&&n&&(Nt.length>0||Fe.length>0)){const i=`bc_alert_shown_${ms()}_${n.managerId||"admin"}`;sessionStorage.getItem(i)||setTimeout(()=>{fj(n),sessionStorage.setItem(i,"true")},1e3)}},[t,C,Nt,Fe,n]),g.useEffect(()=>{t&&T==="calendar"&&n&&n.role!=="super"&&gj(n)},[T,t,n,Nt]);const no=g.useRef([]),ff=()=>{no.current.forEach(i=>i.setMap(null)),no.current=[]},Qd=async()=>{if(!Pr.trim())return alert(" ");if(On.length>=10)return alert(` 10   .
    .`);Ed(!0);const i=hf(Pr);if(i&&Z.current){Ed(!1),Z.current.setCenter(new naver.maps.LatLng(i.lat,i.lng)),Z.current.setZoom(16),On.some(u=>u.lat===i.lat&&u.lng===i.lng)||Ql(u=>[...u,{id:Date.now(),name:Sd.trim()||Pr,address:"",lat:i.lat,lng:i.lng}]),Cd(""),kd(""),setTimeout(()=>{const u=new naver.maps.Marker({position:new naver.maps.LatLng(i.lat,i.lng),map:Z.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});no.current.push(u)},200);return}naver.maps.Service.geocode({query:Pr},async(c,u)=>{var b;if(Ed(!1),c!==naver.maps.Service.Status.OK||!((b=u.v2.addresses)!=null&&b.length))return alert("    ");const m=u.v2.addresses[0],f=parseFloat(m.y),x=parseFloat(m.x);On.some(_=>_.lat===f&&_.lng===x)||Ql(_=>[..._,{id:Date.now(),name:Sd.trim()||Pr,address:m.roadAddress||m.jibunAddress||"",lat:f,lng:x}]),Cd(""),kd(""),Z.current&&(Z.current.setCenter(new naver.maps.LatLng(f,x)),Z.current.setZoom(16),setTimeout(()=>{const _=new naver.maps.Marker({position:new naver.maps.LatLng(f,x),map:Z.current,icon:{content:'<div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;"></div>',anchor:new naver.maps.Point(14,14)}});no.current.push(_)},200))})},Sj=i=>{Ql(c=>c.filter(u=>u.id!==i))},kj=()=>{if(On.length===0)return alert("  ");let i=0;const c=[];On.forEach(u=>{ye.some(f=>f.lat===u.lat&&f.lng===u.lng)||(c.push({id:Date.now()+Math.random(),name:u.name,address:u.address,lat:u.lat,lng:u.lng,type:"search"}),i++)}),c.length>0&&kt(u=>[...u,...c]),Ql([]),ff(),alert(`${i}   !`)},[w4,_4]=g.useState(!1);g.useRef(null);const Ej=i=>{kt(c=>c.filter(u=>u.id!==i))},xf=(i,c)=>{const u=[...ye],m=i+c;m<0||m>=u.length||([u[i],u[m]]=[u[m],u[i]],kt(u))},so=(i,c,u,m)=>{const x=(u-i)*Math.PI/180,v=(m-c)*Math.PI/180,b=Math.sin(x/2)*Math.sin(x/2)+Math.cos(i*Math.PI/180)*Math.cos(u*Math.PI/180)*Math.sin(v/2)*Math.sin(v/2);return 6371*(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)))},gf=(i,c,u)=>{const m=[...i],f=[];let x=c,v=u;for(;m.length>0;){let b=0,_=1/0;for(let M=0;M<m.length;M++){const L=so(x,v,m[M].lat,m[M].lng);L<_&&(_=L,b=M)}const P=m.splice(b,1)[0];f.push(P),x=P.lat,v=P.lng}return f},vf=async(i,c,u)=>{var x,v;if(u.length<1)return null;const m="dx2ymyk2b1",f=localStorage.getItem("ncp_client_secret")||"";if(!f)return console.log("Directions API   -   "),null;try{const b=`${c},${i}`,_=`${u[u.length-1].lng},${u[u.length-1].lat}`;let P="";u.length>1&&(P=u.slice(0,-1).map(xe=>`${xe.lng},${xe.lat}`).join("|"));let M=`https://naveropenapi.apigw.ntruss.com/map-direction-15/v1/driving?start=${b}&goal=${_}&option=trafast`;P&&(M+=`&waypoints=${P}`);const L=await fetch(M,{headers:{"X-NCP-APIGW-API-KEY-ID":m,"X-NCP-APIGW-API-KEY":f}});if(!L.ok)return null;const A=await L.json();if(A.code!==0||!((v=(x=A.route)==null?void 0:x.trafast)!=null&&v[0]))return null;const Q=A.route.trafast[0];return{path:Q.path,distance:Q.summary.distance,duration:Q.summary.duration}}catch(b){return console.error("Directions API  :",b),null}},yf=i=>{if(!Z.current||!(i!=null&&i.path))return;os.current&&os.current.setMap(null);const c=i.path.map(([f,x])=>new naver.maps.LatLng(x,f));os.current=new naver.maps.Polyline({map:Z.current,path:c,strokeColor:"#4285f4",strokeWeight:5,strokeOpacity:.8,strokeLineCap:"round",strokeLineJoin:"round"});const u=(i.distance/1e3).toFixed(1),m=Math.round(i.duration/6e4);Xi({distance:u,duration:m})},Ij=async()=>{const i=ye.filter(u=>u.lat&&u.lng),c=ye.filter(u=>!u.lat||!u.lng);if(i.length<2){alert(`   2  .
  .`);return}navigator.geolocation?navigator.geolocation.getCurrentPosition(async u=>{const m=u.coords.latitude,f=u.coords.longitude,x=gf(i,m,f),v=[...x,...c];kt(v);const b=await vf(m,f,x);if(b){yf(b);const _=(b.distance/1e3).toFixed(1),P=Math.round(b.duration/6e4);alert(`  !

 ${x.length} 
  : ${_}km
  : ${P}

   !`)}else{let _=so(m,f,x[0].lat,x[0].lng);for(let P=0;P<x.length-1;P++)_+=so(x[P].lat,x[P].lng,x[P+1].lat,x[P+1].lng);Xi(null),alert(`  !

 ${x.length} 
 : ${_.toFixed(1)}km

     API  .`)}},u=>{bf(i,c)},{enableHighAccuracy:!0,timeout:5e3}):bf(i,c)},Tj=()=>{if(ye.length<2){alert(" 2  .");return}kt([...ye].reverse()),alert("   !")},bf=async(i,c)=>{const u=i[0],m=gf(i,u.lat,u.lng),f=[...m,...c];kt(f);const x=await vf(u.lat,u.lng,m.slice(1));if(x){yf(x);const v=(x.distance/1e3).toFixed(1),b=Math.round(x.duration/6e4);alert(`  !

 ${m.length} 
  : ${v}km
  : ${b}

(GPS   -   )`)}else{let v=0;for(let b=0;b<m.length-1;b++)v+=so(m[b].lat,m[b].lng,m[b+1].lat,m[b+1].lng);Xi(null),alert(`  !

 ${m.length} 
 : ${v.toFixed(1)}km

(GPS   -   )`)}},Rj=i=>{const c=(i.stops||[]).filter(u=>u.lat&&u.lng);if(c.length===0)return alert("   .");Nf(i),setTimeout(()=>{if(Z.current)if(Fn.current.forEach(u=>u.setMap(null)),Fn.current=[],$n.current.forEach(u=>u.setMap(null)),$n.current=[],c.forEach((u,m)=>{const f=new naver.maps.Marker({position:new naver.maps.LatLng(u.lat,u.lng),map:Z.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; box-shadow: 0 3px 8px rgba(0,0,0,0.4); border: 3px solid white;">${m+1}</div>`,anchor:new naver.maps.Point(16,16)}});Fn.current.push(f)}),c.length>=2){const u=c.map(x=>new naver.maps.LatLng(x.lat,x.lng)),m=new naver.maps.Polyline({map:Z.current,path:u,strokeColor:"#14b8a6",strokeWeight:5,strokeOpacity:.9,strokeStyle:"solid"});$n.current.push(m);const f=new naver.maps.LatLngBounds;c.forEach(x=>f.extend(new naver.maps.LatLng(x.lat,x.lng))),Z.current.fitBounds(f,{padding:50})}else Z.current.setCenter(new naver.maps.LatLng(c[0].lat,c[0].lng)),Z.current.setZoom(15)},400)},Nf=i=>{Ui(i.id),Hl(i.name||""),Ir(i.date||new Date().toISOString().split("T")[0]),Ul(i.time||"09:00"),as(i.managerId||null),kt(i.stops||[]),Wi(0),setTimeout(()=>{Z.current&&to()},100),window.scrollTo({top:0,behavior:"smooth"})},Mj=i=>{var u;const c=((u=i.stops)==null?void 0:u.filter(m=>!m.visited))||[];c.length>0?wd({route:i,unvisitedStops:c}):qd(i,!1)},qd=(i,c=!1)=>{var f;const u={...i,status:"completed",completedAt:new Date().toISOString()},m=Fe.map(x=>x.id===i.id?u:x);if(Wp(m),localStorage.setItem("bc_routes",JSON.stringify(m)),c){const x=((f=i.stops)==null?void 0:f.filter(b=>!b.visited))||[];let v=0;x.forEach(b=>{const _=le.find(P=>{var M,L;return P.name===b.name||((M=P.name)==null?void 0:M.includes(b.name))||((L=b.name)==null?void 0:L.includes(P.name))});if(_&&_.managerId){const P={..._,managerId:null};Un(P),v++}}),v>0?alert(`  .
  ${v}   .`):alert("  .")}else alert("  .");wd(null)},Pj=()=>{Ui(null),Hl(""),kt([]),Ir(ms()),Ul("09:00"),as((n==null?void 0:n.managerId)||null),eo(),localStorage.removeItem("bc_temp_route")},jf=()=>{if(ye.length===0)return alert(" /  ");if(!Wl.trim())return alert("  (:  )");const i=bd||(n==null?void 0:n.managerId)||0;if(!i&&(n==null?void 0:n.role)!=="super")return alert(" ");if(Us){const u={...Fe.find(m=>m.id===Us),name:Wl.trim(),date:zi,time:Bi,managerId:i,stops:ye.map(m=>({...m,visited:m.visited||!1}))};Zi(u),Ui(null),alert(" !")}else{const c={id:Date.now(),name:Wl.trim(),date:zi,time:Bi,managerId:i,stops:ye.map(u=>({...u,visited:!1})),status:"planned",createdAt:new Date().toISOString()};Zi(c),alert(" !")}Hl(""),kt([]),Ir(ms()),Ul("09:00"),as((n==null?void 0:n.managerId)||null),eo(),localStorage.removeItem("bc_temp_route")},wf=i=>{if(i<0||i>=ye.length)return;Wi(i);const c=ye[i];c.lat&&c.lng&&Z.current&&(Z.current.setCenter(new naver.maps.LatLng(c.lat,c.lng)),Z.current.setZoom(16))},Dj=(i,c)=>{Wi(c),i.lat&&i.lng&&Z.current&&(Z.current.setCenter(new naver.maps.LatLng(i.lat,i.lng)),Z.current.setZoom(16))},Aj=(i,c)=>{const u=Fe.find(b=>b.id===i);if(!u)return;const m=u.stops.find(b=>b.id===c),f=!(m!=null&&m.visited),x=u.stops.map(b=>b.id===c?{...b,visited:!b.visited}:b),v=x.every(b=>b.visited);if(Zi({...u,stops:x,status:v?"completed":"planned"}),f&&(m!=null&&m.name)){const b=le.find(_=>_.name===m.name);b&&Un({...b,lastVisitDate:new Date().toISOString()})}(At==null?void 0:At.id)===i&&An({...u,stops:x,status:v?"completed":"planned"})},Lj=i=>{const c=Fe.find(f=>f.id===i);if(!c)return;const u=c.stops.map(f=>({...f,visited:!0}));Zi({...c,stops:u,status:"completed"});const m=(c.stops||[]).filter(f=>f.name&&!le.find(x=>x.name===f.name));m.forEach(f=>{const x={id:Date.now()+Math.random(),name:f.name,address:f.address||"",managerId:c.managerId,reaction:"positive",fromRoute:c.name,createdAt:new Date().toISOString()};Un(x)}),An(null),m.length>0?alert(`  !
${m.length}   .`):alert("  !")},Oj=i=>{if(!i.lat||!i.lng)return alert("    ");An(null),Ys("map"),setTimeout(()=>{if(!Ce.current)return;Fj(),Ce.current.setCenter(new naver.maps.LatLng(i.lat,i.lng)),Ce.current.setZoom(17);const c=new naver.maps.Marker({position:new naver.maps.LatLng(i.lat,i.lng),map:Ce.current,icon:{content:`<div style="background: linear-gradient(135deg, #14b8a6, #0d9488); color: white; padding: 8px 12px; border-radius: 20px; font-weight: bold; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white; white-space: nowrap;">${i.name}</div>`,anchor:new naver.maps.Point(50,20)}});Pd.current.push(c);const u=new naver.maps.Circle({map:Ce.current,center:new naver.maps.LatLng(i.lat,i.lng),radius:100,fillColor:"#14b8a6",fillOpacity:.2,strokeColor:"#d97706",strokeWeight:2});Bs.current.push(u)},300)},Fj=()=>{Qp.current.forEach(i=>i.setMap(null)),Qp.current=[],Pd.current.forEach(i=>i.setMap(null)),Pd.current=[]},$j=i=>{const c=(i.stops||[]).filter(u=>u.lat&&u.lng);if(c.length===0)return alert("   ");Ys("route"),setTimeout(()=>{if(Z.current)if(Fn.current.forEach(u=>u.setMap(null)),Fn.current=[],$n.current.forEach(u=>u.setMap(null)),$n.current=[],c.forEach((u,m)=>{const f=new naver.maps.Marker({position:new naver.maps.LatLng(u.lat,u.lng),map:Z.current,icon:{content:`<div style="background: linear-gradient(135deg, #00C73C, #00a832); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 13px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); border: 2px solid white;">${m+1}</div>`,anchor:new naver.maps.Point(14,14)}});Fn.current.push(f)}),c.length>=2){const u=c.map(x=>new naver.maps.LatLng(x.lat,x.lng)),m=new naver.maps.Polyline({map:Z.current,path:u,strokeColor:"#14b8a6",strokeWeight:4,strokeOpacity:.8,strokeStyle:"solid"});$n.current.push(m);const f=new naver.maps.LatLngBounds;c.forEach(x=>f.extend(new naver.maps.LatLng(x.lat,x.lng))),Z.current.fitBounds(f,{padding:50})}else Z.current.setCenter(new naver.maps.LatLng(c[0].lat,c[0].lng)),Z.current.setZoom(15)},300)},Zl=(i,c)=>{if(!i)return;const u={isOnline:c,lastSeen:new Date().toISOString()};te.ref("userStatus/"+i).set(u)},_f=async()=>{try{const i=l.includes("@")?l:`${l}@beancraft.com`,u=(await sr.auth().signInWithEmailAndPassword(i,o)).user;let m=null;const f=i.split("@")[0];if(f==="admin")m={name:"admin",role:"super",email:u.email};else{const v=(await te.ref("managers").once("value")).val(),_=(v?Object.values(v):[]).find(P=>P.username===f||P.email===i);if(_){let P=_.name;const M=_o.find(L=>L.username===f||L.id===_.id);M&&(!_.name||_.name.length<2||_.name.includes(""))&&(P=M.name,console.log(`[]   : ${_.name} -> ${P}`),te.ref("managers/"+_.id).update({name:P})),m={name:P,role:"manager",managerId:_.id,username:_.username,email:u.email}}else m={name:f,role:"manager",email:u.email}}r(m),e(!0),setTimeout(()=>{r(x=>x&&{...x})},150),m.managerId&&as(m.managerId),localStorage.setItem("bc_session",JSON.stringify({user:m,expiry:Date.now()+6*60*60*1e3})),h?localStorage.setItem("bc_remember_login",JSON.stringify({id:l,pw:o,expiry:Date.now()+30*24*60*60*1e3})):localStorage.removeItem("bc_remember_login"),m.managerId&&Zl(m.managerId,!0)}catch(i){console.error(" :",i),i.code==="auth/user-not-found"?alert("  "):i.code==="auth/wrong-password"?alert("  "):i.code==="auth/invalid-email"?alert("   "):alert(" : "+i.message)}},zj=async()=>{n!=null&&n.managerId&&Zl(n.managerId,!1);try{await sr.auth().signOut()}catch{}e(!1),r(null),localStorage.removeItem("bc_session"),Ce.current=null,Z.current=null,nd([]),mi(null),Sr(null)};g.useEffect(()=>{const i=()=>{n!=null&&n.managerId&&te.ref("userStatus/"+n.managerId).set({isOnline:!1,lastSeen:new Date().toISOString()})};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[n]),g.useEffect(()=>{if(!(n!=null&&n.managerId))return;const i=setInterval(()=>{Zl(n.managerId,!0)},6e4);return()=>clearInterval(i)},[n]);const Cf=async()=>{if(!vn.trim())return alert("  ");if(vn!==Di)return alert("  ");if(vn.length<6)return alert(" 6  ");try{const i=sr.auth().currentUser;if(!i)return alert(" ");await i.updatePassword(vn),sd(!1),Pi(""),Ai(""),alert(" ")}catch(i){console.error("  :",i),i.code==="auth/requires-recent-login"?alert("     "):alert("  : "+i.message)}},Sf=async()=>{if(Ip){if(!zl.trim())return alert("  ");if(zl!==$p)return alert("  ");if(zl.length<6)return alert(" 6  ");try{const i=sr.auth().currentUser;if(!i)return alert(" ");await i.updatePassword(zl),rd(!1),Fp(""),zp(""),alert("  ")}catch(i){i.code==="auth/requires-recent-login"?alert("     "):alert("  : "+i.message)}}else{if(!vn.trim())return alert("  ");if(vn!==Di)return alert("  ");if(vn.length<6)return alert(" 6  ");try{const i=sr.auth().currentUser;if(!i)return alert(" ");await i.updatePassword(vn),Pi(""),Ai(""),alert("  ")}catch(i){i.code==="auth/requires-recent-login"?alert("     "):alert("  : "+i.message)}}},kf=async()=>{if(!ee.name.trim())return alert(" ");let i=null,c=null;if(ee.address){const v=await Yd(ee.address,ee.name);v&&(i=v.lat,c=v.lng)}const u=sn?ee.managerId:n==null?void 0:n.managerId,m={id:Date.now(),...ee,managerId:u,lat:i,lng:c,isReregistered:ee.isReregistered||!1,usedMents:pp,mentMemo:Zb,createdAt:new Date().toLocaleString("ko-KR")};Un(m);const f=ee.reaction==="positive"||ee.reaction==="special";pp.forEach(v=>rj(v,f));const x=ag[Math.floor(Math.random()*ag.length)];if(ad({companyName:ee.name,quote:x}),ee.reaction==="positive"||ee.reaction==="special"){const v=new Date;v.setDate(v.getDate()+1);const b=v.toISOString().split("T")[0],_={id:Date.now()+1,date:b,title:`${ee.name}`,managerId:u,memo:`, .    .    ?

: ${ee.contact||"-"}
: ${ee.phone||"-"}
: ${ee.address||"-"}`,type:"followup",companyId:m.id};Hd(_);const P=new Date;P.setMonth(P.getMonth()+1);const M=P.toISOString().split("T")[0],L={id:Date.now()+2,date:M,title:`${ee.name}`,managerId:u,memo:`, . .      ?

: ${ee.contact||"-"}
: ${ee.phone||"-"}
: ${ee.address||"-"}`,type:"followup",companyId:m.id};Hd(L)}Ke({name:"",contact:"",address:"",phone:"",region:"",managerId:null,reaction:"neutral",memo:"",isReregistered:!1}),QN(""),Jb([]),eN("")},Bj=async()=>{if(!lt)return;let i={...lt};if(i.address&&(!i.lat||!i.lng)){const c=await Yd(i.address,i.name);c&&(i.lat=c.lat,i.lng=c.lng)}Un(i),qe(null)},Ef=i=>{Rr({type:"company",id:i.id,name:i.name})},Uj=()=>{if(!fd.trim())return alert(" ");const i=fd.split(`
`).map(u=>u.trim()).filter(u=>u),c=[];i.forEach(u=>{const m=u.split("/").map(L=>L.trim());if(m.length<1||!m[0])return;const[f,x,v,b,_]=m;let P=Lp;_&&(_===""?P="negative":_===""?P="neutral":_===""?P="positive":_===""&&(P="special"));const M=b||_N||"";c.push({name:f,contact:x||"",phone:v||"",managerId:Dp,region:M,address:M,reaction:P})}),c.forEach((u,m)=>{const f={id:Date.now()+m,...u,createdAt:new Date().toLocaleString("ko-KR")};Un(f)}),Pp(""),Ap(null),CN(""),SN(""),Op("neutral"),ji(!1),alert(`${c.length}  .`)},Wj=()=>{if(!Et.name.trim())return alert(" ");const i={id:Date.now(),...Et,createdAt:new Date().toLocaleString("ko-KR")};tf(i),Gs({name:"",phone:"",managerId:null,consultDate:"",note:"",status:"consult",memo:""})},Hj=()=>{Xe&&(tf(Xe),Ht(null))},Vj=()=>{if(!nn.managerId||!nn.amount)return alert("  ");const i={id:Date.now(),...nn,amount:Number(nn.amount),date:nn.date||ms()};nf(i),Ji({managerId:null,companyId:null,amount:"",date:"",note:""}),ki(!1)},Gj=i=>$i.filter(c=>c.managerId===i).reduce((c,u)=>c+u.amount,0),Kj=()=>{const i=Object.entries(xd).filter(([u,m])=>m).map(([u])=>u);if(i.length===0)return alert("  ");const c={id:Date.now(),managerId:n.managerId,managerName:n.name,items:i,timestamp:new Date().toLocaleString("ko-KR"),status:"pending"};sf(c),gd({:!1,:!1,:!1,:!1}),_i(null),alert(" .")},Yj=i=>{const c=Up.find(u=>u.id===i);c&&sf({...c,status:"confirmed"})},Qj=(i,c,u)=>{const m=String(u).replace(/^0+/,"")||"0",f=ue.find(x=>x.id===i);f&&Ud({...f,promo:{...f.promo,[c]:Number(m)||0}})},ds=zd.trim()?le.filter(i=>ek(i.name,zd)):le,sn=(n==null?void 0:n.role)==="super",ea=Up.filter(i=>i.status==="pending"),qj=()=>ue,Xj=i=>{if(!i)return"";const c=new Date(i),m=new Date-c,f=Math.floor(m/6e4),x=Math.floor(m/36e5),v=Math.floor(m/864e5);return f<1?" ":f<60?`${f} `:x<24?`${x} `:v<7?`${v} `:c.toLocaleDateString("ko-KR")};if(!t){const i={transition:"opacity 1.5s ease-in-out, transform 1.5s ease-in-out",willChange:"opacity, transform"};return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 login-gradient-bg overflow-hidden",children:s.jsxs("div",{className:"w-full max-w-md relative",style:{minHeight:"500px"},children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...i,opacity:I==="quote"?1:0,transform:I==="quote"?"translateY(0)":"translateY(-30px)",pointerEvents:I==="quote"?"auto":"none"},children:s.jsxs("p",{className:"text-slate-300 text-sm sm:text-base font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto text-center",style:{wordBreak:"keep-all"},children:['"',w,'"']})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{...i,opacity:I==="logo"?1:0,transform:I==="logo"?"scale(1)":I==="quote"?"scale(0.9)":"scale(1.05)",pointerEvents:I==="logo"?"auto":"none"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-40 h-40 sm:w-56 sm:h-56 mx-auto mb-4 object-contain"}),s.jsx("p",{className:"text-slate-200 text-base sm:text-lg tracking-widest font-semibold",children:" "})]})}),s.jsxs("div",{className:"absolute inset-0",style:{...i,opacity:I==="form"?1:0,transform:I==="form"?"translateY(0)":"translateY(50px)",pointerEvents:I==="form"?"auto":"none"},children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-28 h-28 sm:w-40 sm:h-40 mx-auto mb-3 object-contain"}),s.jsx("p",{className:"text-slate-200 text-sm sm:text-base tracking-widest font-semibold",children:" "})]}),s.jsx("div",{className:"text-center mb-5 px-4",children:s.jsxs("p",{className:"text-slate-300 text-xs sm:text-sm font-normal leading-relaxed max-w-xs sm:max-w-sm mx-auto",style:{wordBreak:"keep-all"},children:['"',w,'"']})}),s.jsxs("div",{className:"bg-slate-900/80 rounded-xl p-4 sm:p-6 shadow-xl border border-slate-700",children:[s.jsx("input",{type:"text",placeholder:"",value:l,onChange:c=>a(c.target.value),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),s.jsx("input",{type:"password",placeholder:"",value:o,onChange:c=>d(c.target.value),onKeyPress:c=>c.key==="Enter"&&_f(),className:"w-full p-2.5 sm:p-3 rounded-lg mb-2 sm:mb-3 bg-slate-700/50 text-white placeholder-slate-400 outline-none focus:ring-2 focus:ring-primary-500/50 border border-slate-600 text-sm font-medium"}),s.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm mb-4 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:c=>p(c.target.checked),className:"w-4 h-4 rounded accent-primary-500"}),"  "]}),s.jsx("button",{type:"button",onClick:_f,className:"w-full p-3 bg-[#1e3a5f] hover:bg-[#264a73] text-white rounded-lg font-semibold transition-all text-sm",children:""})]})]})]})})}const Jj=[{key:"sales",icon:"",label:""},{key:"report",icon:"",label:""},{key:"calendar",icon:"",label:""},{key:"route",icon:"",label:""},{key:"map",icon:"",label:""},{key:"managers",icon:"",label:""},{key:"companies",icon:"",label:""},{key:"realtors",icon:"",label:""},{key:"customers",icon:"",label:""},...sn?[]:[{key:"requests",icon:"",label:""}],{key:"settings",icon:"",label:""}];return s.jsxs("div",{className:`min-h-screen pb-6 ${dN==="dark"?"bg-black":"bg-slate-50"}`,children:[s.jsxs("div",{className:"bg-slate-800 border-b border-slate-600 px-4 py-3 flex justify-between items-center sticky top-0 z-50 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-8 h-8 object-contain"}),s.jsx("span",{className:"font-semibold text-slate-200 text-sm tracking-wide",children:"BEANCRAFT"})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[sn&&ea.length>0&&s.jsx("span",{className:"bg-rose-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:ea.length}),s.jsx("span",{className:"text-sm text-slate-200 bg-slate-700 px-2 py-1 rounded-lg font-medium",children:((If=ue.find(i=>i.id===(n==null?void 0:n.managerId)))==null?void 0:If.name)||(n==null?void 0:n.name)}),s.jsx("button",{type:"button",onClick:zj,className:"text-slate-200 hover:text-rose-500 text-sm font-medium transition-colors",children:""})]})]}),s.jsx("div",{className:"bg-slate-800 border-b border-slate-600 tabs-container scrollbar-hide",children:s.jsx("div",{className:"flex justify-start sm:justify-center min-w-max px-2",children:Jj.map(i=>s.jsx("button",{onClick:()=>Ys(i.key),className:`tab-btn ${T===i.key?"active":""}`,children:i.label},i.key))})}),Hc&&s.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-lg",children:""})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",Hc.count,""]}),s.jsx("p",{className:"text-white/80 text-xs",children:Hc.preview})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{Ys("calendar"),mi(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:" "}),s.jsx("button",{onClick:()=>mi(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),fp&&s.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-lg",children:""})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-bold text-sm",children:["  ",fp.count,""]}),s.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{Ys("calendar"),Sr(null)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),s.jsx("button",{onClick:()=>Sr(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),Hi&&s.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-pink-600 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-lg",children:""})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-bold text-sm",children:["   ",Hi.count,""]}),s.jsx("p",{className:"text-white/80 text-xs",children:"     "})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{Hi.companies[0],alert(`[  ]

${Hi.companies.map((i,c)=>`${c+1}. ${i.name}
   : ${i.address||""}
   : ${i.issue}`).join(`

`)}

     .`)},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white text-xs font-bold rounded-lg transition-all",children:""}),s.jsx("button",{onClick:()=>_d(null),className:"w-6 h-6 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""})]})]}),s.jsxs("div",{className:"p-3 sm:p-4 max-w-6xl mx-auto",children:[T==="report"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[s.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),s.jsx("div",{className:"flex gap-2",children:sn?s.jsxs("select",{className:"select-premium text-sm py-2",value:U||"all",onChange:i=>X(i.target.value==="all"?null:i.target.value),children:[s.jsx("option",{value:"all",children:" "}),ue.filter(i=>i.role!=="super").map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>X(n==null?void 0:n.id),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${!U||U===(n==null?void 0:n.id)?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),s.jsx("button",{onClick:()=>X("all"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${U==="all"?"bg-brand-purple text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "})]})})]}),s.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800 rounded-xl w-fit",children:[s.jsx("button",{onClick:()=>De("basic"),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${J==="basic"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:" "}),s.jsx("button",{onClick:()=>{var i;if(De("ai"),!bi){Al(null);const c=new Date,u=c.getMonth(),m=c.getFullYear(),f=U==="all"||!U?null:Number(U),x=f?le.filter(_=>_.managerId===f):le,b=Fe.filter(_=>{const P=new Date(_.date);return P.getMonth()===u&&P.getFullYear()===m&&(!f||_.managerId===f)}).reduce((_,P)=>{var M;return _+(((M=P.stops)==null?void 0:M.length)||0)},0);ed({managerName:f?((i=ue.find(_=>_.id===f))==null?void 0:i.name)||"":" ",thisVisits:b,visitChange:0,newCompanies:le.filter(_=>_.createdAt&&new Date(_.createdAt).getMonth()===u&&(!f||_.managerId===f)).length,consults:Fi.filter(_=>_.status==="completed"&&_.createdAt&&new Date(_.createdAt).getMonth()===u).length,positiveRate:Math.round(x.filter(_=>_.reaction==="positive").length/Math.max(x.length,1)*100),positive:x.filter(_=>_.reaction==="positive").length,special:x.filter(_=>_.reaction==="special").length,neutral:x.filter(_=>_.reaction==="neutral").length,missed:x.filter(_=>_.reaction==="missed").length})}},className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${J==="ai"?"bg-brand-purple text-white":"text-slate-400 hover:text-slate-200"}`,children:"AI "})]})]}),J==="basic"&&(()=>{const i=new Date,c=i.getMonth(),u=i.getFullYear(),m=c===0?11:c-1,f=c===0?u-1:u,x=U==="all"||!U?null:Number(U),v=Fe.filter(V=>{const ne=new Date(V.date),je=ne.getMonth()===c&&ne.getFullYear()===u,ve=!x||V.managerId===x;return je&&ve}),b=le.filter(V=>{if(!V.createdAt||V.isReregistered)return!1;const ne=new Date(V.createdAt),je=ne.getMonth()===c&&ne.getFullYear()===u,ve=!x||V.managerId===x;return je&&ve}),_=Fe.filter(V=>{const ne=new Date(V.date),je=ne.getMonth()===m&&ne.getFullYear()===f,ve=!x||V.managerId===x;return je&&ve}),P=le.filter(V=>{if(!V.createdAt||V.isReregistered)return!1;const ne=new Date(V.createdAt),je=ne.getMonth()===m&&ne.getFullYear()===f,ve=!x||V.managerId===x;return je&&ve}),M=v.reduce((V,ne)=>{var je;return V+(((je=ne.stops)==null?void 0:je.length)||0)},0),L=_.reduce((V,ne)=>{var je;return V+(((je=ne.stops)==null?void 0:je.length)||0)},0),A=b.length,Q=P.length,xe=x?le.filter(V=>V.managerId===x):le,k=xe.filter(V=>V.reaction==="positive"||V.reaction==="special").length,se=xe.length>0?Math.round(k/xe.length*100):0,F=Math.max(0,se-Math.floor(Math.random()*10)+5),B=v.reduce((V,ne)=>{var je,ve;return V+(((ve=(je=ne.stops)==null?void 0:je.filter(Ve=>Ve.visited))==null?void 0:ve.length)||0)},0),G=_.reduce((V,ne)=>{var je,ve;return V+(((ve=(je=ne.stops)==null?void 0:je.filter(Ve=>Ve.visited))==null?void 0:ve.length)||0)},0),z=(V,ne)=>ne===0?V>0?100:0:Math.round((V-ne)/ne*100),E=z(M,L),R=z(A,Q),re=z(B,G),oe=se-F,us=(()=>{var Ve;const V=x?((Ve=ue.find(bn=>bn.id===x))==null?void 0:Ve.name)||"":" ";let ne="",je="",ve="";return ne=`${V} :    ${M},   ${E>=0?"+":""}${E}%`,ve=`  ${A} |   ${B} |   ${se}%`,E>=0?je="     .":je="   .",{comment:ne,suggestion:je,analysis:ve}})(),zr=V=>{const ne=new Date(u,c-V,1),je=ne.getMonth(),ve=ne.getFullYear();return Fe.filter(Ve=>{const bn=new Date(Ve.date),Je=bn.getMonth()===je&&bn.getFullYear()===ve,be=!x||Ve.managerId===x;return Je&&be}).reduce((Ve,bn)=>{var Je;return Ve+(((Je=bn.stops)==null?void 0:Je.length)||0)},0)},Br=["1","2","3","4","5","6","7","8","9","10","11","12"],qs=[{month:Br[(c-2+12)%12],visits:zr(2)},{month:Br[(c-1+12)%12],visits:zr(1)},{month:Br[c],visits:zr(0)}],ta=Math.max(...qs.map(V=>V.visits),1),Xs=ue.filter(V=>V.role!=="super").map(V=>{const je=v.filter(Je=>Je.managerId===V.id).reduce((Je,be)=>{var Js;return Je+(((Js=be.stops)==null?void 0:Js.length)||0)},0),ve=le.filter(Je=>Je.managerId===V.id),Ve=ve.filter(Je=>Je.reaction==="positive"||Je.reaction==="special").length,bn=ve.length>0?Math.round(Ve/ve.length*100):0;return{...V,visits:je,positiveRate:bn,newCompanies:b.filter(Je=>Je.managerId===V.id).length}}).sort((V,ne)=>ne.visits-V.visits);return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("div",{className:"text-slate-500 text-xs mb-1",children:""}),s.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[M,s.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),s.jsxs("div",{className:`text-xs mt-1 ${E>=0?"text-emerald-400":"text-rose-400"}`,children:[E>=0?"":""," ",Math.abs(E),"%"]})]}),s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),s.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[A,s.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),s.jsxs("div",{className:`text-xs mt-1 ${R>=0?"text-emerald-400":"text-rose-400"}`,children:[R>=0?"":""," ",Math.abs(R),"%"]})]}),s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),s.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[B,s.jsx("span",{className:"text-sm text-slate-500 ml-1",children:""})]}),s.jsxs("div",{className:`text-xs mt-1 ${re>=0?"text-emerald-400":"text-rose-400"}`,children:[re>=0?"":""," ",Math.abs(re),"%"]})]}),s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("div",{className:"text-slate-500 text-xs mb-1",children:" "}),s.jsxs("div",{className:"text-2xl font-bold text-slate-100",children:[se,s.jsx("span",{className:"text-sm text-slate-500 ml-1",children:"%"})]}),s.jsxs("div",{className:`text-xs mt-1 ${oe>=0?"text-emerald-400":"text-rose-400"}`,children:[oe>=0?"":""," ",Math.abs(oe),"%p"]})]})]}),s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),s.jsx("div",{className:"flex items-end gap-4 h-32",children:qs.map((V,ne)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[V.visits,""]}),s.jsx("div",{className:"w-full rounded-t transition-all duration-500 bg-slate-600",style:{height:`${Math.max(V.visits/ta*100,8)}%`,background:ne===qs.length-1?"#475569":"#334155"}}),s.jsx("div",{className:"text-xs text-slate-400 mt-2",children:V.month})]},ne))})]}),s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("h3",{className:"font-bold text-slate-200 mb-4",children:"  "}),s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"positive",label:"",count:xe.filter(V=>V.reaction==="positive").length},{key:"special",label:"",count:xe.filter(V=>V.reaction==="special").length},{key:"neutral",label:"",count:xe.filter(V=>V.reaction==="neutral").length},{key:"missed",label:"",count:xe.filter(V=>V.reaction==="missed").length}].map(V=>s.jsxs("div",{className:"text-center p-3 rounded-xl border border-slate-600",children:[s.jsx("div",{className:"text-xl font-bold text-slate-100",children:V.count}),s.jsx("div",{className:"text-xs text-slate-500",children:V.label})]},V.key))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-bold text-slate-100",children:"AI "}),s.jsx("button",{onClick:()=>{var Je;Al(null);const V=new Date,ne=V.getMonth(),je=V.getFullYear(),ve=U==="all"||!U?null:Number(U),Ve=ve?le.filter(be=>be.managerId===ve):le,bn=Fe.filter(be=>{const Js=new Date(be.date);return Js.getMonth()===ne&&Js.getFullYear()===je&&(!ve||be.managerId===ve)});ed({managerName:ve?((Je=ue.find(be=>be.id===ve))==null?void 0:Je.name)||"":" ",thisVisits:bn.reduce((be,Js)=>{var sx;return be+(((sx=Js.stops)==null?void 0:sx.length)||0)},0),visitChange:0,newCompanies:le.filter(be=>be.createdAt&&new Date(be.createdAt).getMonth()===ne&&(!ve||be.managerId===ve)).length,consults:Fi.filter(be=>be.status==="completed"&&be.createdAt&&new Date(be.createdAt).getMonth()===ne).length,positiveRate:Math.round(Ve.filter(be=>be.reaction==="positive").length/Math.max(Ve.length,1)*100),positive:Ve.filter(be=>be.reaction==="positive").length,special:Ve.filter(be=>be.reaction==="special").length,neutral:Ve.filter(be=>be.reaction==="neutral").length,missed:Ve.filter(be=>be.reaction==="missed").length})},disabled:bi,className:"text-xs px-2 py-1 rounded-full border border-slate-600 text-slate-400 hover:border-slate-500 disabled:opacity-50",children:" "})]}),bi?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("span",{className:"text-slate-500 text-sm",children:"AI  ..."})}):Wt?s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{className:"text-slate-300",children:Wt.comment}),Wt.analysis&&s.jsx("p",{className:"text-slate-400 text-xs",children:Wt.analysis}),s.jsx("div",{className:"pt-2 border-t border-slate-700",children:s.jsx("p",{className:"text-slate-400 text-xs",children:Wt.suggestion})})]}):s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{className:"text-slate-300",children:us.comment}),us.analysis&&s.jsx("p",{className:"text-slate-400 text-xs",children:us.analysis}),s.jsx("div",{className:"pt-2 border-t border-slate-700",children:s.jsx("p",{className:"text-slate-400 text-xs",children:us.suggestion})})]})]}),sn&&(!U||U==="all")&&Xs.length>0&&s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("h3",{className:"font-bold text-slate-200 mb-3",children:" "}),s.jsx("div",{className:"space-y-2",children:Xs.slice(0,5).map((V,ne)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",children:ne<3?["","",""][ne]:`${ne+1}`}),s.jsx("span",{className:"text-slate-200 text-sm",children:V.name})]}),s.jsxs("span",{className:"text-slate-400 text-sm",children:[V.visits,""]})]},V.id))})]})]})]})})(),J==="ai"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[(()=>{var se;const i=U==="all"||!U?null:Number(U),c=i?le.filter(F=>F.managerId===i):le,u=i?((se=ue.find(F=>F.id===i))==null?void 0:se.name)||"":" ",m=c.filter(F=>F.reaction==="positive"),f=c.filter(F=>F.reaction==="special"),x=c.filter(F=>F.reaction==="neutral"),v=c.filter(F=>F.reaction==="missed"),b=c.map(F=>F.memo||"").filter(F=>F.length>0),_=["","","","","","","",""],P=["","","","","","",""];let M=0,L=0;b.forEach(F=>{_.some(B=>F.includes(B))&&M++,P.some(B=>F.includes(B))&&L++});const Q=(()=>{const F=c.length;if(F===0)return{main:"   .   .",suggestion:"    .",analysis:"",encouragement:""};const B=Math.round((m.length+f.length)/F*100),G=Math.round(x.length/F*100),z=Math.round(v.length/F*100);let E="",R="",re="",oe="";return E=`${u} :  ${F}    ${m.length}(${B}%),  ${f.length},  ${x.length}(${G}%),  ${v.length}(${z}%)`,re=`+: ${m.length+f.length} | : ${x.length} | : ${v.length}`,B>=50?(R="     .",oe="   ."):B>=30?(R="     .",oe=" ."):B>=10?(R="    .",oe=" ."):(R="   .",oe="  ."),z>30&&(R+=`  ${z}%    .`),f.length>0&&(R+=`  ${f.length}   .`),{main:E,suggestion:R,analysis:re,encouragement:oe}})(),k=(()=>{const F={:{cafeCount:2596,startupTrend:"+12%",avgRent:" 10~15",competition:" ( 15+)",targetCustomer:"30~40   ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:" 2,596  .   14.1%( 10.0% ).    ",smalltalkTip:"  2,596  .  14.1%  ,   52.6% 3  .     .",brokerMent:",   2,596  .  14%           .",customerMent:",   2,596,  14.1%  .        .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:2135,startupTrend:"+18%",avgRent:" 8~12",competition:"",targetCustomer:"20~30 MZ  ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:" 2,135  2.   18% .      2~3",smalltalkTip:"  2,135  2.   18%       2~3.    .",brokerMent:",               .     .",customerMent:",       2~3.          .",sourceUrl:"https://eventmoa.kr/2024%EB%85%84-%EC%84%9C%EC%9A%B8-%EC%B9%B4%ED%8E%98-%EC%8B%9C%EC%9E%A5-%ED%98%84%ED%99%A9/",sourceName:"2024     ( 2,135)"},:{cafeCount:1850,startupTrend:"+8%",avgRent:" 12~18",competition:"",targetCustomer:"30~50   ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:"   12~18   . /      ",smalltalkTip:"   12~18   . /     1.5  .",brokerMent:",    1.5  .              .",customerMent:",    1.5  .     ,  ,  .",sourceUrl:"https://www.sisajournal.com/news/articleView.html?idxno=195110",sourceName:":   14%,  "},:{cafeCount:1720,startupTrend:"+15%",avgRent:" 8~12",competition:"",targetCustomer:"30~40  ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:"  .    40% . /   ",smalltalkTip:"       40% .     2        .",brokerMent:",        .             .",customerMent:",        40% . /       .",sourceUrl:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",sourceName:"IN:     "},:{cafeCount:1450,startupTrend:"+22%",avgRent:" 6~10",competition:"",targetCustomer:"20~40 ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:"  22%  .   .   1~2  ",smalltalkTip:"   22%  .      1~2 .  6     .",brokerMent:",      1~2 .              .",customerMent:",   .    ,   ,   .     .",sourceUrl:"https://www.kgnews.co.kr/news/article.html?no=822924",sourceName:":    "}," ":{cafeCount:1200,startupTrend:"+10%",avgRent:" 6~9",competition:"",targetCustomer:"30~50 ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:"IT .      .  2~5 ",smalltalkTip:" IT   .      ,  2~5 . / .",brokerMent:",  IT    .              .",customerMent:",  IT  .        .",sourceUrl:"https://blog.opensurvey.co.kr/trendreport/cafe-2024/",sourceName:":    2024"}," ":{cafeCount:850,startupTrend:"+25%",avgRent:" 4~7",competition:"",targetCustomer:"20~30  ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:" 12 , 2025     ",smalltalkTip:"  12  .     50% ( 4~7)   .        .",brokerMent:",   12     .             .",customerMent:",   12      .   ,   ,   .    .",sourceUrl:"https://www.bizhankook.com/bk/article/29822",sourceName:":    "}," ":{cafeCount:980,startupTrend:"+20%",avgRent:" 5~8",competition:"",targetCustomer:" + ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:" (7~8)    3.     2~3 ",smalltalkTip:"  (7~8)   3.    2~3  .  6    .",brokerMent:",   /   3.              .",customerMent:",   (7~8)   3.  6    .",sourceUrl:"https://gyver.co.kr/cafe-startup-market-analysis/",sourceName:" : 2025   "}," ":{cafeCount:620,startupTrend:"+15%",avgRent:" 3~5",competition:"",targetCustomer:" + ",teamPositive:c.filter(R=>R.reaction==="positive"&&(R.address||"").includes("")).length,teamTotal:c.filter(R=>(R.address||"").includes("")).length,issue:"  3~5   70% .   (12~2, 6~8)  50% ",smalltalkTip:"   3~5   70% .    (12~2, 6~8)  50% .",brokerMent:",      50% .              .",customerMent:",    (12~2, 6~8)  50% .      .",sourceUrl:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",sourceName:"KB:   "}},B=Object.keys(F).map(R=>{const re=F[R],oe=re.teamPositive*10+re.teamTotal*2,$r=parseInt(re.startupTrend)||0;return{region:R,...re,score:oe+$r,category:R.includes("")&&!R.includes("")?"":R.includes("")?"":""}}).sort((R,re)=>re.score-R.score),G=Os%B.length,z=B[G],E=[];return z.teamPositive>0&&E.push(`   ${z.teamPositive}`),parseInt(z.startupTrend)>=15&&E.push(`   ${z.startupTrend} `),z.competition===""&&E.push("  "),{...z,aiReason:E.length>0?E:["   "],totalCount:B.length,currentIndex:G+1}})();return s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"card p-4 border border-slate-700/30",children:[s.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[s.jsx("span",{className:"text-xl"}),"     "]}),s.jsx("div",{className:"bg-transparent rounded-xl p-4 mb-4 border border-slate-700/50",children:s.jsxs("div",{className:"flex items-center justify-center gap-8",children:[s.jsxs("div",{className:"relative w-32 h-32",children:[s.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:(()=>{const F=Math.max(c.length,1),B=[{value:m.length,color:"#10b981"},{value:f.length,color:"#f43f5e"},{value:x.length,color:"#f97316"},{value:v.length,color:"#eab308"}];let G=0;return B.map((z,E)=>{const R=z.value/F*100,re=`${R} ${100-R}`,oe=-G;return G+=R,s.jsx("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",strokeWidth:"3.5",stroke:z.color,strokeDasharray:re,strokeDashoffset:oe},E)})})()}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:c.length}),s.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),s.jsxs("span",{className:"text-xs text-slate-300",children:[" ",m.length," (",Math.round(m.length/Math.max(c.length,1)*100),"%)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),s.jsxs("span",{className:"text-xs text-slate-300",children:[" ",f.length," (",Math.round(f.length/Math.max(c.length,1)*100),"%)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),s.jsxs("span",{className:"text-xs text-slate-300",children:[" ",x.length," (",Math.round(x.length/Math.max(c.length,1)*100),"%)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),s.jsxs("span",{className:"text-xs text-slate-300",children:[" ",v.length," (",Math.round(v.length/Math.max(c.length,1)*100),"%)"]})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-400",children:m.length}),s.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg border border-rose-500/30 bg-rose-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-rose-400",children:f.length}),s.jsx("div",{className:"text-xs text-slate-400",children:""})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg border border-orange-500/30 bg-orange-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-400",children:x.length}),s.jsx("div",{className:"text-xs text-slate-400",children:""})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400",children:v.length}),s.jsx("div",{className:"text-xs text-slate-400",children:""})]})]}),s.jsx("div",{className:"space-y-3",children:bi?s.jsxs("div",{className:"flex items-center justify-center py-6",children:[s.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-brand-purple border-t-transparent rounded-full"}),s.jsx("span",{className:"ml-2 text-slate-400 text-sm",children:"AI  ..."})]}):Wt?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:s.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:Wt.comment})}),Wt.analysis&&s.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[s.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"AI "}),s.jsx("p",{className:"text-sm text-slate-300",children:Wt.analysis})]}),s.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[s.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:"AI  "}),s.jsx("p",{className:"text-sm text-slate-300",children:Wt.suggestion})]}),Wt.encouragement&&s.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:s.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:Wt.encouragement})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-slate-800/30",children:s.jsx("p",{className:"text-sm text-slate-200 leading-relaxed",children:Q.main})}),Q.analysis&&s.jsxs("div",{className:"p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:[s.jsx("p",{className:"text-xs text-blue-400 mb-1 font-semibold",children:"  "}),s.jsx("p",{className:"text-sm text-slate-300",children:Q.analysis})]}),s.jsxs("div",{className:"p-3 rounded-lg border border-slate-700/30 bg-brand-purple/5",children:[s.jsx("p",{className:"text-xs text-brand-purple mb-1 font-semibold",children:""}),s.jsx("p",{className:"text-sm text-slate-300",children:Q.suggestion})]}),s.jsx("div",{className:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5",children:s.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:Q.encouragement})})]})})]}),b.length>0&&s.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[s.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl"}),"   (",b.length,")"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-500/10",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-400",children:M}),s.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-slate-700/50",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold text-slate-400",children:L}),s.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),s.jsx("div",{className:"space-y-2",children:(()=>{const F=c.filter(z=>z.reaction==="positive"),B=c.filter(z=>z.reaction==="negative"),G=c.filter(z=>!z.reaction||z.reaction==="neutral");return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-400",children:" "}),s.jsxs("span",{className:"text-slate-300",children:[F.length," "]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-rose-400",children:" "}),s.jsxs("span",{className:"text-slate-300",children:[B.length," "]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-400",children:""}),s.jsxs("span",{className:"text-slate-300",children:[G.length," "]})]})]})})()})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:"  "}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-emerald-400 font-bold min-w-[60px]",children:""}),s.jsx("span",{className:"text-slate-300",children:'    ("  .  OOO.")'})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-400 font-bold min-w-[60px]",children:"1"}),s.jsx("span",{className:"text-slate-300",children:"    (   ,   )"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-yellow-400 font-bold min-w-[60px]",children:"1"}),s.jsx("span",{className:"text-slate-300",children:'     ("      ?")'})]})]})]}),M>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"    "}),s.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"     .   :"}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[s.jsx("li",{children:" 1        "}),s.jsx("li",{children:" 2    "}),s.jsx("li",{children:"     "})]})]}),k&&s.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"    "}),s.jsx("p",{className:"text-sm text-slate-300",children:k.issue||"   ."}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"   1    ."})]})]})]}),s.jsxs("div",{className:"card p-4 border border-slate-700 bg-transparent",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2 text-lg",children:[s.jsx("span",{className:"text-xl"})," AI  ",s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400 text-xs font-medium ml-2",children:" "}),s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-700 text-slate-400 text-xs font-normal ml-1",children:"2024 "})]}),s.jsxs("div",{className:"flex gap-1 p-1 bg-slate-800 rounded-lg",children:[s.jsx("button",{onClick:()=>wr("single"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${jr==="single"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""}),s.jsx("button",{onClick:()=>wr("list"),className:`px-3 py-1 rounded text-xs font-medium transition-all ${jr==="list"?"bg-brand-purple text-white":"text-slate-400 hover:text-white"}`,children:""})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"  (: , , )",value:Fs,onChange:F=>_r(F.target.value),className:"input-premium flex-1 text-sm"}),s.jsx("button",{onClick:()=>{if(!Fs.trim())return;const B=["","","","",""," "," "," "," "].findIndex(G=>G.includes(Fs.trim()));B>=0?(kn(B),wr("single"),_r("")):alert("   .")},className:"btn-premium bg-brand-purple text-white px-4",children:""})]})}),jr==="single"?s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"border border-slate-700/30 rounded-xl p-4 bg-transparent",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-brand-purple/20 text-brand-purple",children:k.category}),s.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:k.region})]}),s.jsxs("span",{className:"text-xs text-slate-500",children:[k.currentIndex,"/",k.totalCount]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-brand-purple/10 border border-slate-700/30 mb-3",children:[s.jsx("p",{className:"text-xs text-brand-purple font-semibold mb-2",children:"AI    "}),s.jsx("div",{className:"flex flex-wrap gap-2",children:k.aiReason&&k.aiReason.map((F,B)=>s.jsx("span",{className:"px-2 py-1 rounded-full bg-brand-purple/20 text-brand-purple text-xs",children:F},B))})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[s.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[k.cafeCount||"-",""]}),s.jsx("div",{className:"text-xs text-slate-400",children:"  "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[s.jsx("div",{className:"text-lg font-bold text-emerald-400",children:k.startupTrend||"-"}),s.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[s.jsx("div",{className:"text-lg font-bold text-yellow-400",children:k.avgRent||"-"}),s.jsx("div",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg bg-transparent border border-slate-700/30",children:[s.jsx("div",{className:"text-lg font-bold text-orange-400",children:k.competition||"-"}),s.jsx("div",{className:"text-xs text-slate-400",children:" "})]})]}),(k.teamTotal>0||k.teamPositive>0)&&s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 mb-3 cursor-pointer hover:bg-emerald-500/20 transition-all",onClick:()=>Ee(k.region),children:[s.jsxs("p",{className:"text-xs text-emerald-400 font-semibold mb-2",children:["   ",s.jsx("span",{className:"text-slate-500",children:"(  )"})]}),s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:k.teamTotal||0}),s.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-400",children:k.teamPositive||0}),s.jsx("span",{className:"text-xs text-slate-400 block",children:" "})]}),k.teamTotal>0&&s.jsxs("div",{className:"text-center",children:[s.jsxs("span",{className:"text-lg sm:text-xl font-bold text-brand-purple",children:[Math.round(k.teamPositive/k.teamTotal*100)||0,"%"]}),s.jsx("span",{className:"text-xs text-slate-400 block",children:""})]})]})]})]}),k.issue&&s.jsxs("div",{className:"p-4 rounded-xl border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),s.jsx("p",{className:"text-sm text-slate-200",children:k.issue})]}),k.targetCustomer&&s.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/30 bg-blue-500/5",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),s.jsx("p",{className:"text-sm text-slate-200",children:k.targetCustomer})]}),k.brokerMent&&s.jsxs("div",{className:"p-4 rounded-xl border border-emerald-500/30 bg-emerald-500/5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{onClick:F=>{const B=F.currentTarget;navigator.clipboard.writeText((kr==null?void 0:kr.brokerMent)||k.brokerMent),B.innerText="",B.classList.add("text-emerald-400"),setTimeout(()=>{B.innerText="",B.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600",children:""})]}),s.jsxs("p",{className:"text-sm text-slate-200 leading-relaxed",children:['"',(kr==null?void 0:kr.brokerMent)||k.brokerMent,'"']}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"    .   ."})]}),k.sourceUrl&&s.jsxs("a",{href:k.sourceUrl,target:"_blank",rel:"noopener",className:"flex items-center justify-between p-3 rounded-xl border border-slate-700/30 hover:bg-brand-purple/10 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-brand-purple"}),s.jsxs("span",{className:"text-sm text-brand-purple font-medium",children:[": ",k.sourceName||""]})]}),s.jsx("span",{className:"text-slate-500",children:""})]}),s.jsx("button",{onClick:()=>kn(F=>F+1),className:"w-full py-3 rounded-xl bg-brand-purple/20 hover:bg-brand-purple/30 border border-slate-600 text-brand-purple font-medium transition-all",children:"    "})]}):s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:["","","","",""," "," "," "," "].map((F,B)=>{const G=F.includes("")&&!F.includes(""),z=F.includes(""),E=G?"":z?"":"";return s.jsx("div",{onClick:()=>{kn(B),wr("single")},className:"p-3 rounded-lg border border-slate-700/30 hover:border-slate-600 bg-transparent cursor-pointer transition-all",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-brand-purple/20 text-brand-purple",children:E}),s.jsx("span",{className:"text-sm font-medium text-slate-200",children:F})]}),s.jsx("span",{className:"text-slate-500",children:""})]})},B)})})]}),s.jsxs("div",{className:"card p-4 border-l-4 border-yellow-500",children:[s.jsxs("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl"}),"   (",de.length,")"]}),de.length===0?s.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-500",children:[s.jsx("p",{className:"mb-2",children:"   ."}),s.jsx("p",{className:"text-xs",children:"      ."})]}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:de.slice(0,10).map((F,B)=>s.jsxs("div",{className:"p-3 rounded-lg bg-transparent hover:bg-slate-700/50 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-400",children:F.||F.region||""}),s.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-slate-600 text-slate-300",children:F.||F.type||""})]}),s.jsx("p",{className:"text-sm text-slate-200 font-medium",children:F.||F.title}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[F.||F.source,"  ",F.||F.date]})]},F.id||B))})]}),s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsxs("h3",{className:"font-bold text-slate-100 mb-4 text-lg",children:[" ",s.jsx("span",{className:"text-xs text-slate-500 ml-2 font-normal",children:"   "})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-rose-400",children:"  14.1% ( )"}),s.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-slate-500",children:"  52.6% 3  "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-slate-300",children:'" "   . "       " .'})]})]}),s.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-orange-400",children:"   2 "}),s.jsx("a",{href:"https://franchise.ftc.go.kr",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-slate-500",children:" 3,200+,  2,500+   "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-slate-300",children:'"   ,   15~50 5  900.   0."'})]})]}),s.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-blue-400",children:"   "}),s.jsx("a",{href:"https://www.kbfg.com/kbresearch/report/reportView.do?reportId=1003869",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-slate-500",children:"KB:   +    "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-slate-300",children:'"   ,  ,   .       ."'})]})]}),s.jsxs("div",{className:"p-4 rounded-2xl border border-slate-600 hover:border-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-yellow-400",children:"    1 "}),s.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"text-xs text-brand-purple hover:underline",children:" "})]}),s.jsx("p",{className:"text-xs text-slate-500",children:", ,      "}),s.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold mb-1",children:"  "}),s.jsx("p",{className:"text-sm text-slate-300",children:'"   ,            ."'})]})]})]}),s.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),s.jsx("p",{className:"text-sm text-slate-300",children:'  " "   .  "  " .      .'})]})]}),ce&&(()=>{const F=ce,B=le.filter(z=>(z.address||"").includes(F)),G=Le?B.filter(z=>(z.name||"").toLowerCase().includes(Le.toLowerCase())||(z.address||"").toLowerCase().includes(Le.toLowerCase())):B;return s.jsx("div",{className:"modal-overlay",onClick:()=>{Ee(null),rs("")},children:s.jsxs("div",{className:"modal-content max-w-lg",onClick:z=>z.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-100",children:[F,"   (",B.length,")"]}),s.jsx("button",{type:"button",onClick:()=>{Ee(null),rs("")},className:"text-slate-400 hover:text-white text-xl",children:""})]}),s.jsx("input",{type:"text",placeholder:"/ ",value:Le,onChange:z=>rs(z.target.value),className:"input-premium w-full mb-4"}),s.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:G.length===0?s.jsx("p",{className:"text-center text-slate-500 py-4",children:"   ."}):G.map(z=>{const E=Ze[z.reaction]||Ze.neutral;return s.jsxs("div",{className:"p-3 rounded-lg border border-slate-700 bg-slate-800/50",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-200",children:z.name}),s.jsx("p",{className:"text-xs text-slate-400",children:z.address})]}),s.jsx("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:E.bg+"30",color:E.bg},children:E.label})]}),z.memo&&s.jsxs("p",{className:"text-xs text-slate-500 mt-2 truncate",children:[": ",z.memo]})]},z.id)})})]})})})(),H&&s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>ae(null),children:s.jsxs("div",{className:"bg-slate-800 rounded-2xl max-w-[95vw] sm:max-w-2xl w-full max-h-[80vh] overflow-y-auto border border-slate-600",onClick:F=>F.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-slate-800 p-4 border-b border-slate-600 flex justify-between items-center",children:[s.jsxs("h3",{className:"font-bold text-lg text-white",children:[H==="specialty"&&"   ",H==="lowcost"&&"   ",H==="differentiation"&&"  ",H==="delivery"&&"/  "]}),s.jsx("button",{type:"button",onClick:()=>ae(null),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),s.jsxs("div",{className:"p-4 space-y-3 sm:space-y-4",children:[H==="specialty"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:" ?"}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:" SCA()  80    "}),s.jsx("li",{children:" , ,    "}),s.jsx("li",{children:"      (  5,000~8,000)"})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:""}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:"       "}),s.jsx("li",{children:"  ,     "}),s.jsx("li",{children:"  ,      "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),s.jsx("p",{className:"text-xs text-slate-400",children:"  ,     :"}),s.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[s.jsx("li",{children:" (aT)   "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"    "})]})]})]}),H==="lowcost"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:"  1,500~2,000  "}),s.jsx("li",{children:"     "}),s.jsx("li",{children:"  : , ,  "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-rose-400 font-semibold mb-2",children:""}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:"       "}),s.jsx("li",{children:" ,    "}),s.jsx("li",{children:"    "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-yellow-500/30 bg-yellow-500/5",children:[s.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:" "}),s.jsx("p",{className:"text-xs text-slate-400",children:" ,     :"}),s.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[s.jsx("li",{children:"   (franchise.ftc.go.kr)"}),s.jsx("li",{children:"    "})]})]})]}),H==="differentiation"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-emerald-400 font-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:"    (, )"}),s.jsx("li",{children:"   (, )"}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:" "}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:" SNS  (,  )"}),s.jsx("li",{children:"   (, )"}),s.jsx("li",{children:"  "})]})]})]}),H==="delivery"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-orange-400 font-semibold mb-2",children:"/"}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:" : , ,  "}),s.jsx("li",{children:"      "}),s.jsx("li",{children:"     "})]})]}),s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700/30 bg-transparent",children:[s.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-2",children:[s.jsx("li",{children:"     (   )"}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   vs   "})]})]})]})]})]})})]})})(),s.jsxs("div",{className:"card p-4 border-2 border-rose-500/30",children:[s.jsxs("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:[s.jsx("span",{className:"text-xl"}),"    (  )"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{onClick:()=>Vc(Tn==="closure"?null:"closure"),className:"p-4 rounded-xl border border-rose-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-rose-400 font-bold",children:"  "}),s.jsx("span",{className:"text-2xl font-black text-rose-400 ml-3",children:"14.1%"})]}),s.jsx("span",{className:"text-slate-500 text-lg",children:Tn==="closure"?"":""})]}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (2018 ,  10.0% )"}),s.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"   3     "'})]}),Tn==="closure"&&s.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:i=>{i.stopPropagation();const c=i.currentTarget;navigator.clipboard.writeText(",     ?      .       .      ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),s.jsxs("p",{className:"text-sm text-slate-200",children:['",     ?  ',s.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),"    .       . ",s.jsx("span",{className:"text-emerald-400 font-semibold",children:"   "}),'  ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:" "}),s.jsx("button",{type:"button",onClick:i=>{i.stopPropagation();const c=i.currentTarget;navigator.clipboard.writeText("  5    (/ ), /   ,      "),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),s.jsxs("p",{className:"text-sm text-slate-200",children:["  ",s.jsx("span",{className:"text-blue-400 font-semibold",children:"5   "})," (/ ), /   ,      "]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/30",children:[s.jsx("p",{className:"text-xs text-purple-400 font-semibold mb-2",children:"  TOP 3 ( )"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"1:  "}),s.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"2:   "}),s.jsx("span",{className:"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs",children:"3:  "})]}),s.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"  :   +  "})]}),s.jsx("a",{href:"https://www.sisajournal.com/news/articleView.html?idxno=195110",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:":   14%,   "})]}),s.jsxs("div",{onClick:()=>Vc(Tn==="survival"?null:"survival"),className:"p-4 rounded-xl border border-blue-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-400 font-bold",children:"  "}),s.jsx("span",{className:"text-lg font-bold text-blue-400 ml-2",children:" 1,050"}),s.jsx("span",{className:"text-slate-500 mx-2",children:"(10  1 )"})]}),s.jsx("span",{className:"text-slate-500 text-lg",children:Tn==="survival"?"":""})]}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:": KB (   3,475 1/3)"}),s.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"     "'})]}),Tn==="survival"&&s.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:i=>{i.stopPropagation();const c=i.currentTarget;navigator.clipboard.writeText(",     1,050.  87.  .     ,       ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),s.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',s.jsx("span",{className:"text-emerald-400 font-semibold",children:" 1,050"}),".  87.  .   ",s.jsx("span",{className:"text-emerald-400 font-semibold",children:""}),'  ,       ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:i=>{i.stopPropagation();const c=i.currentTarget;navigator.clipboard.writeText(",     1,050.   3,475 1/3.     .     ,  ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),s.jsxs("p",{className:"text-sm text-slate-200",children:['",    ',s.jsx("span",{className:"text-blue-400 font-semibold",children:" 1,050"}),".   3,475 1/3.     .    ",s.jsx("span",{className:"text-blue-400 font-semibold",children:" , "}),' ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-cyan-500/10 border border-cyan-500/30",children:[s.jsx("p",{className:"text-xs text-cyan-400 font-semibold mb-2",children:"   "}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[s.jsx("span",{children:"  500m   "}),s.jsx("span",{children:"  "}),s.jsx("span",{children:"   "}),s.jsx("span",{children:"   "})]})]}),s.jsx("a",{href:"https://www.sisain.co.kr/news/articleView.html?idxno=52312",target:"_blank",rel:"noopener",className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-600 hover:bg-brand-purple/10 text-brand-purple text-sm transition-all",children:"IN:      "})]}),s.jsxs("div",{onClick:()=>Vc(Tn==="royalty"?null:"royalty"),className:"p-4 rounded-xl border border-yellow-500/30 bg-transparent cursor-pointer hover:border-slate-600 transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-400 font-bold",children:"  "}),s.jsx("span",{className:"text-2xl font-black text-yellow-400 ml-3",children:"6,900~1.3"})]}),s.jsx("span",{className:"text-slate-500 text-lg",children:Tn==="royalty"?"":""})]}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    (/ )"}),s.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:'"    "'})]}),Tn==="royalty"&&s.jsxs("div",{className:"p-4 rounded-xl border border-slate-700/30 bg-transparent space-y-3 animate-fadeIn",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:i=>{i.stopPropagation();const c=i.currentTarget;navigator.clipboard.writeText(",    . 1 15 ,   .      .         ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),s.jsxs("p",{className:"text-sm text-slate-200",children:['",    . ',s.jsx("span",{className:"text-emerald-400 font-semibold",children:"1 15 ,  "}),' .      .         ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold",children:"  "}),s.jsx("button",{type:"button",onClick:i=>{i.stopPropagation();const c=i.currentTarget;navigator.clipboard.writeText(",   6,900~1.3.    .        ."),c.innerText="",c.classList.add("text-emerald-400"),setTimeout(()=>{c.innerText="",c.classList.remove("text-emerald-400")},1500)},className:"px-2 py-1 rounded bg-slate-700 text-xs text-slate-300 hover:bg-slate-600"})]}),s.jsxs("p",{className:"text-sm text-slate-200",children:['",   ',s.jsx("span",{className:"text-blue-400 font-semibold",children:"6,900~1.3"}),'.    .        ."']})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  (  )"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[s.jsx("span",{children:"  : 6,900"}),s.jsx("span",{children:"  :  15"}),s.jsx("span",{children:"  : 1.3"}),s.jsx("span",{children:"  :  25"})]}),s.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" , ,   / :   "})]})]})]})]}),s.jsxs("div",{className:"card p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:" vs   "}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-600",children:[s.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),s.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),s.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),s.jsxs("tbody",{className:"text-slate-300",children:[s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400 (15)"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"2~5 ( )"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:""})]})]})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"~   "}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  150 + /"})]}),s.jsx("span",{className:"text-slate-300 font-bold",children:"6,900~1"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-slate-500",children:" 300 +  150 + /"})]}),s.jsx("span",{className:"text-slate-300 font-bold",children:"5,500~8,000"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-slate-500",children:" 500 +  200 + /"})]}),s.jsx("span",{className:"text-slate-300 font-bold",children:"6,000~9,000"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-700 bg-slate-800/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:""}),s.jsx("span",{className:"text-xs text-slate-500",children:" 1,000 +  300 + /"})]}),s.jsx("span",{className:"text-slate-300 font-bold",children:"8,000~1.3"})]})]}),s.jsx("a",{href:"https://franchise.ftc.go.kr/mnu/00013/program/userRqst/list.do",target:"_blank",rel:"noopener",className:"flex items-center justify-center gap-2 mt-3 p-3 rounded-lg border border-brand-purple/50 bg-brand-purple/10 hover:bg-brand-purple/20 transition-all",children:s.jsx("span",{className:"text-sm text-brand-purple font-medium",children:"     "})}),s.jsx("p",{className:"text-xs text-slate-500 mt-3 text-center",children:"*    , ,    ."})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl"}),"    ",s.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full",children:""})]})}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"     AI      ."}),s.jsxs("div",{className:"p-4 rounded-xl bg-transparent border border-slate-700 mb-4",children:[s.jsx("p",{className:"text-sm text-slate-300 font-semibold mb-3",children:"    "}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:Gc,onChange:i=>xp(i.target.value),className:"w-full px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm",children:[s.jsx("option",{value:"",children:" ?"}),s.jsx("option",{value:"broker",children:"  "}),s.jsx("option",{value:"broker-followup",children:" "}),s.jsx("option",{value:"franchise",children:"   "})]}),s.jsx("textarea",{value:Kc,onChange:i=>gp(i.target.value),placeholder:`    .

:     .   .`,className:"w-full px-3 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-200 text-sm resize-none h-24"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Yc("success"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${pi==="success"?"bg-emerald-500 text-white":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30"}`,children:"  "}),s.jsx("button",{onClick:()=>Yc("fail"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${pi==="fail"?"bg-rose-500 text-white":"bg-rose-500/20 text-rose-400 border border-rose-500/30 hover:bg-rose-500/30"}`,children:" "})]}),s.jsx("button",{type:"button",onClick:()=>{if(!Gc||!Kc||!pi){alert(", ,   .");return}const i={id:Date.now(),situation:Gc,memo:Kc,result:pi,timestamp:new Date().toISOString(),managerId:n==null?void 0:n.managerId,managerName:(n==null?void 0:n.name)||""};te.ref(`teamFeedbacks/${i.id}`).set(i),xp(""),gp(""),Yc(null),alert(" !")},className:"w-full px-4 py-3 rounded-lg bg-brand-purple text-white font-semibold hover:bg-brand-purple/80 transition-all",children:" "})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-slate-300 font-semibold",children:"   ( 7)"}),Rl&&Rl.length>0?Rl.slice(0,5).map((i,c)=>s.jsx("div",{className:`p-3 rounded-lg ${i.result==="success"?"bg-emerald-500/10 border border-emerald-500/30":"bg-rose-500/10 border border-rose-500/30"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-semibold ${i.result==="success"?"text-emerald-400":"text-rose-400"}`,children:i.result==="success"?"  ":"  "}),s.jsx("p",{className:"text-sm text-slate-200 mt-1",children:i.situation||" "}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:i.memo||" "})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${i.result==="success"?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:i.result==="success"?"":""})]})},c)):s.jsxs("div",{className:"p-4 rounded-lg border border-slate-700 bg-slate-800/30 text-center",children:[s.jsx("p",{className:"text-slate-400 text-sm",children:"   ."}),s.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"   ."})]}),Rl&&Rl.length>=3&&s.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"AI  "}),s.jsx("p",{className:"text-sm text-slate-300",children:"    ..."}),s.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" 5   AI  ."})]})]})]})]})]})]}),T==="calendar"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("button",{onClick:()=>Vp(new Date(is.getFullYear(),is.getMonth()-1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""}),s.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[is.getFullYear()," ",is.getMonth()+1,""]}),s.jsx("button",{onClick:()=>Vp(new Date(is.getFullYear(),is.getMonth()+1)),className:"w-10 h-10 rounded-lg bg-slate-600 text-slate-200 font-bold",children:""})]}),s.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 mb-2",children:["","","","","","",""].map((i,c)=>s.jsx("div",{className:`text-center text-sm font-bold py-2 ${c===0?"text-rose-600":c===6?"text-primary-600":"text-slate-200"}`,children:i},i))}),s.jsx("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1",children:(()=>{const i=is.getFullYear(),c=is.getMonth(),u=new Date(i,c,1).getDay(),m=new Date(i,c+1,0).getDate(),f=ms(),x=[];for(let v=0;v<u;v++)x.push(s.jsx("div",{className:"h-24 sm:h-28"},`empty-${v}`));for(let v=1;v<=m;v++){const b=`${i}-${String(c+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,_=Fe.filter(Q=>Q.date===b),P=Nt.filter(Q=>Q.date===b),M=[..._.map(Q=>({...Q,itemType:"route"})),...P.map(Q=>({...Q,itemType:"event"}))];M.sort((Q,xe)=>(Q.time||"00:00").localeCompare(xe.time||"00:00"));const L=b===f,A=new Date(i,c,v).getDay();x.push(s.jsxs("div",{className:`h-24 sm:h-28 p-1 border rounded-lg overflow-hidden cursor-pointer transition-all hover:shadow-md ${L?"bg-slate-700 border-primary-300":"border-slate-600 hover:border-primary-300"}`,onClick:()=>{Nd(b),Ln({title:"",time:"09:00",memo:""}),Mr(null),Ws(!0)},children:[s.jsx("div",{className:`text-sm font-bold mb-1 ${A===0?"text-rose-600":A===6?"text-primary-600":"text-slate-200"}`,children:v}),s.jsxs("div",{className:"space-y-0.5 overflow-y-auto max-h-14",children:[M.slice(0,3).map((Q,xe)=>{var k,se,F,B;if(Q.itemType==="route"){const G=ue.find(z=>z.id===Q.managerId);return s.jsxs("div",{onClick:z=>{z.stopPropagation(),An(Q)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight",style:{background:(G==null?void 0:G.color)||"#888"},title:`${(k=Q.time)==null?void 0:k.slice(0,5)} ${Q.name}`,children:[(se=Q.time)==null?void 0:se.slice(0,5)," ",Q.name]},`r-${Q.id}`)}else{const G=ue.find(E=>E.id===Q.managerId),z=Q.managerId&&G?G.color:"#6b7280";return s.jsxs("div",{onClick:E=>{E.stopPropagation(),Gl(Q)},className:"text-xs px-1 py-0.5 rounded text-white leading-tight cursor-pointer hover:opacity-80",style:{background:z},title:`${(F=Q.time)==null?void 0:F.slice(0,5)} ${Q.title}`,children:[(B=Q.time)==null?void 0:B.slice(0,5)," ",Q.title]},`e-${Q.id}`)}}),M.length>3&&s.jsxs("div",{className:"text-xs text-slate-200",children:["+",M.length-3,""]})]})]},v))}return x})()})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("p",{className:"font-bold text-slate-200 mb-3",children:"  "}),(()=>{const i=new Date,c=new Date(i);c.setDate(i.getDate()-i.getDay());const u=new Date(c);u.setDate(c.getDate()+6);const m=Fe.filter(v=>{const b=new Date(v.date);return b>=c&&b<=u}).map(v=>({...v,itemType:"route"})),f=Nt.filter(v=>{const b=new Date(v.date);return b>=c&&b<=u}).map(v=>({...v,itemType:"event"})),x=[...m,...f].sort((v,b)=>{const _=new Date(v.date+" "+(v.time||"00:00")),P=new Date(b.date+" "+(b.time||"00:00"));return _-P});return x.length===0?s.jsx("p",{className:"text-center text-slate-200 py-4",children:"   "}):s.jsx("div",{className:"space-y-2",children:x.map(v=>{var b;if(v.itemType==="route"){const _=ue.find(M=>M.id===v.managerId),P=v.status==="completed";return s.jsxs("div",{onClick:()=>An(v),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md ${P?"bg-emerald-900/30":"bg-slate-700"}`,children:[s.jsxs("div",{className:"text-center min-w-[40px]",children:[s.jsx("p",{className:"text-xs text-slate-200",children:new Date(v.date).toLocaleDateString("ko-KR",{weekday:"short"})}),s.jsx("p",{className:"font-bold text-slate-100",children:v.date.slice(8)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:v.name}),s.jsxs("p",{className:"text-xs text-slate-200",children:[v.time||"","  ",((b=v.stops)==null?void 0:b.length)||0,""]})]}),_&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white",style:{background:_.color},children:_.name})]},`r-${v.id}`)}else return s.jsxs("div",{onClick:()=>{Nd(v.date),Ln({title:v.title,time:v.time,memo:v.memo||""}),Mr(v.id),Ws(!0)},className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all hover:shadow-md bg-purple-50",children:[s.jsxs("div",{className:"text-center min-w-[40px]",children:[s.jsx("p",{className:"text-xs text-slate-200",children:new Date(v.date).toLocaleDateString("ko-KR",{weekday:"short"})}),s.jsx("p",{className:"font-bold text-slate-100",children:v.date.slice(8)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:v.title}),s.jsxs("p",{className:"text-xs text-slate-200 break-words",children:[v.time||""," ",v.memo?` ${v.memo}`:""]})]}),s.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold text-white bg-purple-500",children:""})]},`e-${v.id}`)})})})()]})]}),T==="route"&&s.jsx("div",{children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("p",{className:"text-sm text-slate-200 font-bold",children:Us?"  ":" "}),Us&&s.jsx("span",{className:"text-xs text-primary-600 bg-slate-700 px-2 py-1 rounded",children:" "})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3",children:[s.jsx("input",{type:"text",placeholder:" (:  )",value:Wl,onChange:i=>Hl(i.target.value),className:"input-premium text-sm col-span-2"}),s.jsx("div",{className:"relative",onClick:()=>{var i,c;return(c=(i=document.getElementById("routeDateInput")).showPicker)==null?void 0:c.call(i)},children:s.jsx("input",{id:"routeDateInput",type:"date",value:zi,onChange:i=>Ir(i.target.value),className:"input-premium text-sm w-full cursor-pointer"})}),s.jsx("div",{className:"relative",onClick:()=>{var i,c;return(c=(i=document.getElementById("routeTimeInput")).showPicker)==null?void 0:c.call(i)},children:s.jsx("input",{id:"routeTimeInput",type:"time",value:Bi,onChange:i=>Ul(i.target.value),className:"input-premium text-sm w-full cursor-pointer"})})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.jsxs("select",{value:bd||"",onChange:i=>as(Number(i.target.value)||null),className:"select-premium text-sm",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]})})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("div",{className:"flex justify-between items-center mb-3",children:s.jsx("p",{className:"font-bold text-slate-200",children:" "})}),s.jsxs("div",{className:"bg-slate-700 rounded-xl p-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex gap-2 flex-1",children:[s.jsx("input",{type:"text",placeholder:", ,  ",value:Pr,onChange:i=>Cd(i.target.value),onKeyPress:i=>i.key==="Enter"&&Qd(),className:"input-premium text-sm",style:{flex:6}}),s.jsx("input",{type:"text",placeholder:" ()",value:Sd,onChange:i=>kd(i.target.value),onKeyPress:i=>i.key==="Enter"&&Qd(),className:"input-premium text-sm",style:{flex:4}})]}),s.jsx("button",{onClick:Qd,disabled:Gp,className:"btn-premium bg-slate-600 text-white text-sm px-4",children:Gp?"...":""})]}),On.length>0&&s.jsxs("div",{className:"mt-2 p-2 bg-slate-700 rounded-lg border border-primary-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("p",{className:"text-xs text-primary-600 font-bold",children:["  (",On.length,"/10)"]}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:()=>{Ql([]),ff()},className:"text-xs text-rose-600",children:" "})})]}),s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:On.map((i,c)=>s.jsxs("div",{className:"flex items-center justify-between bg-slate-700 rounded px-2 py-1",children:[s.jsxs("span",{className:"text-xs text-slate-200 truncate flex-1",children:[c+1,". ",i.name]}),s.jsx("button",{onClick:()=>Sj(i.id),className:"ml-2 text-rose-600 hover:text-rose-600 text-xs",children:""})]},i.id))}),s.jsxs("button",{onClick:kj,className:"w-full mt-2 py-2 bg-primary-500 text-white rounded-lg text-sm font-bold",children:[On.length,"   "]})]}),s.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"       "})]})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("p",{className:"font-bold text-slate-200 mb-3",children:" "}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("select",{value:Rd,onChange:i=>Kp(i.target.value),className:"select-premium text-sm",children:[s.jsx("option",{value:"",children:" "}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsx("optgroup",{label:"",children:s.jsx("option",{value:"",children:""})}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]}),s.jsxs("optgroup",{label:"",children:[s.jsx("option",{value:"",children:""}),s.jsx("option",{value:"",children:""})]})]}),s.jsx("input",{type:"number",placeholder:" (: 10)",value:ql,onChange:i=>FN(i.target.value),className:"input-premium text-sm",min:"1",max:"50"})]}),s.jsx("input",{type:"text",placeholder:" /   (: , , OO)",value:Xl,onChange:i=>{Yp(i.target.value),i.target.value&&Kp("")},className:"input-premium text-sm"}),s.jsx("button",{onClick:()=>{const i=Xl||Rd;if(!i)return alert("   ");if(!ql||ql<1)return alert("   (1~50)");const c=x=>{if(!x)return null;const v=x.split(/\s+/);for(const b of v)if((b.endsWith("")||b.endsWith("")||b.endsWith(""))&&b.length>=2&&b.length<=10)return b;return null},u=i.replace(/\(.*\)/,""),m=Dr.filter(x=>{if(x.regions&&x.regions[u]||c(x.address)===u)return!0;if(Xl){const b=Xl.toLowerCase(),_=(x.name||x.officeName||x.realtorName||"").toLowerCase(),P=(x.address||"").toLowerCase();if(_.includes(b)||P.includes(b))return!0}return!1}).filter(x=>!Kd(x,le)).filter(x=>!ye.some(v=>v.name===(x.realtorName||x.officeName||x.name))).sort((x,v)=>(v.listings||v.listingCount||1)-(x.listings||x.listingCount||1)).slice(0,Math.min(Number(ql),200));if(m.length===0)return alert(" /    .");const f=m.map(x=>({id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:x.realtorName||x.officeName||x.name,address:x.address||"",phone:x.cellPhone||x.phone||"",lat:null,lng:null,visited:!1,listings:x.listings||x.listingCount||1}));kt(x=>[...x,...f]),Yp(""),alert(""+f.length+"   !")},disabled:!Rd&&!Xl||!ql,className:"w-full btn-premium bg-teal-900/300 text-white py-3 font-bold disabled:opacity-50",children:"  "}),s.jsx("p",{className:"text-xs text-slate-400",children:"*  ,    "})]})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-200",children:["  (",ye.length,")"]}),Ld&&s.jsxs("p",{className:"text-xs text-primary-400 mt-1",children:[" ",Ld.distance,"km   ",Ld.duration,""]})]}),s.jsxs("div",{className:"flex gap-2",children:[ye.length>=2&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:Ij,className:"text-xs text-primary-600 font-bold",children:""}),s.jsx("button",{type:"button",onClick:Tj,className:"text-xs text-primary-600 font-bold",children:" "})]}),ye.length>0&&s.jsx("button",{type:"button",onClick:()=>{kt([]),eo()},className:"text-xs text-rose-600",children:" "})]})]}),ye.length===0?s.jsxs("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:[s.jsx("p",{className:"text-2xl mb-2"}),s.jsx("p",{className:"text-sm",children:"/ "})]}):s.jsx("div",{className:"space-y-0 max-h-48 overflow-y-auto",children:ye.map((i,c)=>{var f;const u=le.find(x=>{var v;return x.name===i.name||x.address&&i.address&&x.address.includes((v=i.address)==null?void 0:v.split(" ").slice(0,3).join(" "))}),m=u?ue.find(x=>x.id===u.managerId):null;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-900 rounded-lg",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-teal-500 to-teal-600 text-white flex items-center justify-center font-bold text-xs shadow flex-shrink-0",children:c+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[s.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:i.name}),m&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:m.color},children:(f=m.name)==null?void 0:f.slice(0,1)})]}),i.address&&s.jsx("p",{className:"text-xs text-slate-200 break-words",children:i.address}),i.phone&&s.jsx("p",{className:"text-xs text-navy-300",children:i.phone})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[c>0&&s.jsx("button",{type:"button",onClick:()=>xf(c,-1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),c<ye.length-1&&s.jsx("button",{type:"button",onClick:()=>xf(c,1),className:"w-6 h-6 rounded bg-slate-600 text-slate-200 text-xs",children:""}),s.jsx("button",{type:"button",onClick:()=>Ej(i.id),className:"w-6 h-6 rounded bg-rose-100 text-rose-600 text-xs",children:""})]})]}),c<ye.length-1&&s.jsx("div",{className:"flex items-center pl-3 py-0.5",children:s.jsx("span",{className:"text-primary-600 text-sm",children:""})})]},i.id)})}),(ye.length>0||Us)&&s.jsx("div",{className:"mt-3 pt-3 border-t border-slate-600",children:Us?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Pj,className:"flex-1 btn-premium btn-outline py-3 font-bold",children:""}),s.jsx("button",{type:"button",onClick:jf,className:"flex-1 btn-premium btn-gold py-3 font-bold",children:" "})]}):s.jsx("button",{type:"button",onClick:jf,className:"w-full btn-premium btn-gold py-3 font-bold",children:" "})})]}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-3 border-b border-slate-600",children:ye.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>wf(Tr-1),disabled:Tr<=0,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"flex gap-2 transition-transform",style:{transform:`translateX(-${Tr*100}%)`},children:ye.map((i,c)=>s.jsxs("button",{onClick:()=>Dj(i,c),className:`flex-shrink-0 w-full px-3 py-2 rounded-lg text-sm font-bold transition-all ${Tr===c?"bg-slate-700 text-white":"bg-gray-100 text-slate-200"}`,children:[c+1,". ",i.name]},i.id))})}),s.jsx("button",{type:"button",onClick:()=>wf(Tr+1),disabled:Tr>=ye.length-1,className:"w-8 h-8 rounded bg-slate-600 text-slate-200 disabled:opacity-30",children:""})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{ref:Dd,className:"route-map-container"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2 z-10",children:[s.jsx("button",{onClick:_j,className:`w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all ${Yi?"bg-primary-500 text-white":"bg-slate-600 text-slate-200"}`,title:Yi?"GPS ":"GPS "}),Yi&&Qi&&s.jsx("button",{onClick:Cj,className:"w-10 h-10 rounded-full bg-slate-600 shadow-lg flex items-center justify-center text-primary-600",title:"  "})]})]})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("p",{className:"font-bold text-slate-200",children:" "}),Fe.length>0&&s.jsx("div",{className:"flex gap-2",children:Ii?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{if($s.length===0)return alert("  .");confirm(`${$s.length}  ?`)&&($s.forEach(i=>rf(i)),Ti([]),od(!1),alert("  ."))},className:"px-3 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:[$s.length," "]}),s.jsx("button",{onClick:()=>{od(!1),Ti([])},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-xs font-bold",children:""})]}):s.jsx("button",{onClick:()=>od(!0),className:"px-3 py-1 bg-rose-100 text-rose-600 rounded text-xs font-bold",children:" "})})]}),Fe.length===0?s.jsx("div",{className:"text-center py-4 sm:py-6 text-slate-200",children:s.jsx("p",{className:"text-sm",children:"  "})}):s.jsx("div",{className:"space-y-2",children:Fe.sort((i,c)=>new Date(c.date)-new Date(i.date)).slice(0,50).map(i=>{const c=ue.find(v=>v.id===i.managerId),u=(i.stops||[]).filter(v=>v.visited).length,m=(i.stops||[]).length,f=i.status==="completed",x=$s.includes(i.id);return s.jsxs("div",{className:`p-3 rounded-lg ${f?"bg-emerald-900/30":"bg-slate-700"} ${Ii&&x?"ring-2 ring-rose-400":""}`,children:[s.jsxs("div",{className:"flex items-start gap-3",children:[Ii&&s.jsx("input",{type:"checkbox",checked:x,onChange:v=>{v.target.checked?Ti([...$s,i.id]):Ti($s.filter(b=>b!==i.id))},className:"w-5 h-5 mt-1 accent-rose-500"}),s.jsx("div",{className:`w-9 h-9 rounded-lg text-white flex items-center justify-center font-bold text-sm flex-shrink-0 ${f?"bg-emerald-500":"bg-slate-700"}`,children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-slate-100 text-sm break-words leading-snug",children:i.name||i.date}),s.jsxs("p",{className:"text-xs text-slate-200",children:[i.date," ",i.time||"","  ",u,"/",m,""]}),c&&s.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded text-xs font-bold text-white",style:{background:c.color},children:c.name})]})]}),!Ii&&s.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-slate-700/30",children:[s.jsx("button",{type:"button",onClick:()=>Nf(i),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),s.jsx("button",{type:"button",onClick:()=>An(i),className:"px-3 py-1 bg-slate-700 rounded text-xs text-slate-200 border font-medium",children:""}),s.jsx("button",{onClick:()=>Rj(i),className:"px-3 py-1 bg-slate-700 rounded text-xs text-primary-600 font-medium",children:""}),!f&&s.jsx("button",{onClick:()=>Mj(i),className:"px-3 py-1 bg-emerald-100 rounded text-xs text-emerald-700 font-medium",children:""}),s.jsx("button",{onClick:()=>Rr({type:"route",id:i.id,name:i.name||i.date}),className:"px-3 py-1 bg-rose-100 rounded text-xs text-rose-600 font-medium",children:""})]})]},i.id)})})]})]})}),T==="map"&&s.jsx("div",{children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsxs("div",{className:"bg-slate-900 rounded-xl p-3 mb-4",children:[s.jsx("p",{className:"text-amber-800 font-bold text-sm mb-2",children:"  "}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[s.jsxs("span",{className:"text-slate-200",children:[" : ",s.jsx("b",{children:le.length})]}),s.jsxs("span",{className:"text-emerald-600",children:[" : ",s.jsx("b",{children:le.filter(i=>i.lat&&i.lng).length})]}),s.jsxs("span",{className:"text-slate-200 cursor-pointer hover:text-primary-600",onClick:()=>le.filter(i=>!i.lat||!i.lng).length>0&&Ci(!0),children:[": ",s.jsx("b",{className:"underline",children:le.filter(i=>!i.lat||!i.lng).length})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[s.jsxs("select",{value:Hs,onChange:i=>Jp(i.target.value),className:"select-premium text-sm",children:[s.jsx("option",{value:"all",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsxs("select",{value:Vs,onChange:i=>Zp(i.target.value),className:"select-premium text-sm",children:[s.jsx("option",{value:"all",children:" "}),s.jsx("option",{value:"special",children:""}),s.jsx("option",{value:"positive",children:""}),s.jsx("option",{value:"neutral",children:""}),s.jsx("option",{value:"negative",children:" "}),s.jsx("option",{value:"missed",children:""})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"/  (: , )",value:Od,onChange:i=>VN(i.target.value),onKeyPress:i=>i.key==="Enter"&&mf(),className:"input-premium flex-1 text-sm"}),s.jsx("button",{type:"button",onClick:mf,className:"btn-premium btn-gold text-sm"})]}),s.jsxs("div",{className:"border-t border-slate-600 mt-4 pt-4",children:[s.jsx("p",{className:"text-sm text-slate-200 mb-2 font-bold",children:"   "}),s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-600 special-blink"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-400"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"})," "]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"})," "]})]}),s.jsx("p",{className:"text-xs text-slate-200 mt-2",children:"      "})]})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsx("div",{ref:Oi,className:"map-container"})})]})}),T==="managers"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),s.jsx("button",{type:"button",onClick:()=>ki(!0),className:"btn-premium btn-navy text-sm",children:" "})]}),ue.map(i=>{const c=le.filter(E=>E.managerId===i.id),u=Gj(i.id),m=sn||(n==null?void 0:n.managerId)===i.id,f=c.filter(E=>E.reaction==="special"),x=c.filter(E=>E.reaction==="positive"),v=c.filter(E=>E.reaction==="neutral"),b=c.filter(E=>E.reaction==="negative"),_=new Date,M=c.filter(E=>E.reaction==="positive"||E.reaction==="special").map(E=>{const R=E.lastVisitDate?new Date(E.lastVisitDate):E.createdAt?new Date(E.createdAt):null,re=R?Math.floor((_-R)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(re)?0:re,dateType:E.lastVisitDate?"":""}}).filter(E=>E.daysPassed>=7).sort((E,R)=>R.daysPassed-E.daysPassed),L=c.filter(E=>E.reaction==="missed").map(E=>{const R=E.createdAt?new Date(E.createdAt):null,re=R?Math.floor((_-R)/(1e3*60*60*24)):0;return{...E,daysPassed:isNaN(re)?0:re}}).sort((E,R)=>R.daysPassed-E.daysPassed),A=ms(),Q=Nt.filter(E=>E.date===A&&E.managerId===i.id),xe=Fe.filter(E=>E.date===A&&E.managerId===i.id),k=Du(),se=new Date(k.year,k.month,k.day-k.dayOfWeek),F=new Date(k.year,k.month,k.day+(6-k.dayOfWeek)),B=E=>{const R=E.getFullYear(),re=String(E.getMonth()+1).padStart(2,"0"),oe=String(E.getDate()).padStart(2,"0");return`${R}-${re}-${oe}`},G=Nt.filter(E=>E.managerId===i.id&&E.date>=B(se)&&E.date<=B(F)&&E.date!==A),z=Fe.filter(E=>E.managerId===i.id&&E.date>=B(se)&&E.date<=B(F)&&E.date!==A);return s.jsxs("div",{className:"card p-5",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl text-white flex items-center justify-center font-bold text-xl shadow-lg",style:{background:`linear-gradient(135deg, ${i.color}, ${i.color}dd)`},children:i.name[0]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:i.name}),s.jsxs("p",{className:"text-sm text-slate-200",children:[" ",c.length,""]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:[u.toLocaleString(),s.jsx("span",{className:"text-sm font-normal",children:""})]}),m&&s.jsx("button",{onClick:()=>Ei({managerId:i.id,managerName:i.name,currentSales:u}),className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs font-bold hover:bg-emerald-200",children:""})]})})]}),s.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-xl p-4 mb-4",children:[s.jsx("p",{className:"font-bold text-slate-200 text-sm mb-3",children:" "}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-red-200",children:[s.jsx("p",{className:"text-lg font-bold text-rose-600",children:f.length}),s.jsx("p",{className:"text-xs text-red-400",children:""})]}),s.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-green-200",children:[s.jsx("p",{className:"text-lg font-bold text-emerald-600",children:x.length}),s.jsx("p",{className:"text-xs text-green-400",children:""})]}),s.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[s.jsx("p",{className:"text-lg font-bold text-orange-500",children:v.length}),s.jsx("p",{className:"text-xs text-orange-400",children:""})]}),s.jsxs("div",{className:"bg-slate-700 rounded-lg p-2 text-center border border-slate-600",children:[s.jsx("p",{className:"text-lg font-bold text-slate-200",children:b.length}),s.jsx("p",{className:"text-xs text-slate-200",children:""})]})]})]}),(Q.length>0||xe.length>0)&&s.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-3 mb-4",children:[s.jsx("p",{className:"font-bold text-primary-600 text-sm mb-2",children:" "}),s.jsxs("div",{className:"space-y-1",children:[xe.map(E=>{var R;return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-primary-600",children:""}),s.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.name," (",((R=E.stops)==null?void 0:R.length)||0,")"]})]},E.id)}),Q.map(E=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-primary-600"}),s.jsxs("span",{className:"text-amber-800",children:[E.time," - ",E.title]})]},E.id))]})]}),M.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-rose-900/30 border border-rose-200 rounded-xl p-3 mb-2",children:[s.jsxs("span",{className:"font-bold text-rose-700 text-sm",children:["  (",M.length,")"]}),s.jsx("span",{className:"text-xs text-rose-600 ml-2",children:"   7 "})]}),s.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[M.slice(0,10).map(E=>s.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-rose-200 cursor-pointer hover:bg-rose-900/30",onClick:()=>{qe(E)},children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${E.reaction==="special"?"bg-rose-600":"bg-emerald-500"}`}),s.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),s.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[s.jsxs("span",{className:"text-xs text-rose-600 font-bold",children:[E.daysPassed,""]}),s.jsxs("span",{className:"text-xs text-rose-600 ml-1",children:["(",E.dateType,")"]})]})]},E.id)),M.length>10&&s.jsxs("p",{className:"text-xs text-rose-600 text-center",children:["+",M.length-10,""]})]})]}),L.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 mb-2",children:[s.jsxs("span",{className:"font-bold text-amber-600 text-sm",children:["  (",L.length,")"]}),s.jsx("span",{className:"text-xs text-yellow-500 ml-2",children:"  "})]}),s.jsxs("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[L.slice(0,10).map(E=>s.jsxs("div",{className:"flex items-center justify-between bg-slate-700 p-2 rounded-lg border border-amber-200 cursor-pointer hover:bg-amber-900/30",onClick:()=>{qe(E)},children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 bg-yellow-500"}),s.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:E.name})]}),s.jsxs("span",{className:"text-xs text-amber-600 flex-shrink-0 ml-2",children:[E.daysPassed,""]})]},E.id)),L.length>10&&s.jsxs("p",{className:"text-xs text-yellow-400 text-center",children:["+",L.length-10,""]})]})]}),(G.length>0||z.length>0)&&s.jsxs("details",{className:"mb-4",children:[s.jsxs("summary",{className:"bg-slate-700 border border-primary-300 rounded-xl p-3 cursor-pointer",children:[s.jsxs("span",{className:"font-bold text-primary-600 text-sm",children:["    (",G.length+z.length,")"]}),s.jsx("span",{className:"text-xs text-primary-600 ml-2",children:" "})]}),s.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:[...z.map(E=>({...E,type:"route"})),...G.map(E=>({...E,type:"event"}))].sort((E,R)=>E.date.localeCompare(R.date)||(E.time||"").localeCompare(R.time||"")).map((E,R)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm bg-slate-700 p-2 rounded-lg border border-primary-200",children:[s.jsx("span",{className:"text-primary-600",children:E.type==="route"?"":""}),s.jsx("span",{className:"text-xs text-blue-400 font-bold",children:E.date.slice(5)}),s.jsxs("span",{className:"text-blue-800 truncate",children:[E.time||""," ",E.type==="route"?E.name:E.title]})]},R))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-2",children:[s.jsx("span",{className:"font-bold text-slate-200 text-sm",children:"  "}),m&&s.jsx("button",{type:"button",onClick:()=>{_i(i),gd({:!1,:!1,:!1,:!1})},className:"ml-3 px-3 py-1 bg-rose-500 rounded-lg font-bold text-xs text-white",children:s.jsx("span",{className:"blink-text",children:" "})})]}),s.jsx("div",{className:"bg-slate-700 rounded-xl p-4",children:s.jsx("div",{className:"grid grid-cols-4 gap-2",children:ig.map(E=>{var R,re;return s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-slate-200 mb-1",children:E}),m?s.jsx("input",{type:"number",value:((R=i.promo)==null?void 0:R[E])||0,onChange:oe=>Qj(i.id,E,oe.target.value),className:"w-full text-center p-2 border rounded-lg text-sm font-bold bg-white text-slate-900"}):s.jsx("p",{className:"font-bold text-slate-100",children:((re=i.promo)==null?void 0:re[E])||0})]},E)})})})]})]},i.id)})]}),T==="sales"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-4 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-10 h-10 object-contain"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-lg",children:"BEANCRAFT"}),s.jsx("p",{className:"text-blue-200 text-xs",children:"   "})]})]}),s.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white text-blue-600 rounded-lg font-bold text-sm hover:bg-blue-50 transition-all flex items-center gap-2",children:"  "})]})}),(()=>{const[i,c]=g.useState(""),[u,m]=g.useState(null),[f,x]=g.useState(!1),v=_=>_?de.find(M=>{var L,A,Q;return((L=M.region)==null?void 0:L.includes(_))||((A=M.title)==null?void 0:A.includes(_))||((Q=M.content)==null?void 0:Q.includes(_))}):null,b=_=>{const P=Dr.filter(L=>{var A;return(A=L.address)==null?void 0:A.includes(_)}),M=le.filter(L=>{var A;return(A=L.address)==null?void 0:A.includes(_)});return{realtorCount:P.length,companyCount:M.length,totalListings:P.reduce((L,A)=>L+(A.listings||0),0)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2",children:"  "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i,onChange:_=>c(_.target.value),placeholder:"  (: , , )",className:"flex-1 px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500"}),s.jsx("button",{onClick:()=>{i.trim()&&(m(i.trim()),x(!0))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:""})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["","","","","","","",""].map(_=>s.jsx("button",{onClick:()=>{c(_),m(_),x(!0)},className:"px-3 py-1.5 bg-slate-700 text-slate-300 rounded-full text-sm hover:bg-slate-600 transition-all",children:_},_))})]}),f&&u&&s.jsxs("div",{className:"card p-4 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"font-bold text-slate-100 text-lg flex items-center gap-2",children:[" ",u,"  "]}),s.jsx("button",{onClick:()=>x(!1),className:"text-slate-400 hover:text-slate-200",children:""})]}),(()=>{const _=b(u);return s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[s.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-400",children:_.realtorCount}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:_.companyCount}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:_.totalListings.toLocaleString()}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})})(),(()=>{const _=v(u);if(_)return s.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[s.jsx("p",{className:"text-xs text-yellow-400 font-semibold mb-2",children:"  "}),s.jsx("p",{className:"text-slate-200 font-medium mb-1",children:_.title}),s.jsx("p",{className:"text-sm text-slate-300",children:_.content}),_.source&&s.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[": ",_.source]})]});{const M={:" 2,596  .   14.1%.   .",:",   .   .",:"//  .    .",:"IT  .    .   .",:"    .    .",:" .    .    .",:" .   . /   .",:"   2.    ."}[u]||"      .      .";return s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[s.jsx("p",{className:"text-xs text-blue-400 font-semibold mb-2",children:"  "}),s.jsx("p",{className:"text-sm text-slate-300",children:M})]})}})()]})]})})(),s.jsxs("div",{className:"card p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"  vs   "}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-600",children:[s.jsx("th",{className:"py-3 px-2 text-left text-slate-400 font-medium",children:""}),s.jsx("th",{className:"py-3 px-2 text-center text-orange-400 font-medium",children:" "}),s.jsx("th",{className:"py-3 px-2 text-center text-emerald-400 font-medium",children:""})]})}),s.jsxs("tbody",{className:"text-slate-300",children:[s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"500~1,500"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"100~300"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"-"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"1,000"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"15~50"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" (5)"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"900~3,000"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"10~30"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300 font-bold",children:"0"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"400+ "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:""}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"  ()"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:"  ()"})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"border-b border-slate-700/50",children:[s.jsx("td",{className:"py-3 px-2 font-medium",children:" "}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-300",children:"1/15 "}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-300",children:" "})]}),s.jsxs("tr",{className:"bg-slate-700/30",children:[s.jsx("td",{className:"py-3 px-2 font-bold text-white",children:"  (5)"}),s.jsx("td",{className:"py-3 px-2 text-center text-orange-400 font-bold",children:"1,500~4,500+"}),s.jsx("td",{className:"py-3 px-2 text-center text-emerald-400 font-bold",children:"1,800+"})]})]})]})}),s.jsxs("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[s.jsx("p",{className:"text-sm text-emerald-400 font-semibold mb-1",children:"   "}),s.jsxs("p",{className:"text-sm text-slate-300",children:["/ 0 5 ",s.jsx("span",{className:"text-emerald-400 font-bold",children:" 900~3,000"})," . //   ."]})]})]}),s.jsxs("div",{className:"card p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4 flex items-center gap-2 text-lg",children:"   "}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl",children:""}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-blue-400",children:" "}),s.jsx("p",{className:"text-xs text-slate-400",children:"   "})]})]}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[s.jsx("li",{children:" /  "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl",children:""}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-emerald-400",children:""}),s.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[s.jsx("li",{children:"    "}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 border border-yellow-500/30 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl",children:""}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-yellow-400",children:"/"}),s.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[s.jsx("li",{children:"   ~"}),s.jsx("li",{children:"   "}),s.jsx("li",{children:"   "})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl",children:""}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-purple-400",children:"/"}),s.jsx("p",{className:"text-xs text-slate-400",children:"  "})]})]}),s.jsxs("ul",{className:"text-sm text-slate-300 space-y-1",children:[s.jsx("li",{children:"   "}),s.jsx("li",{children:" //  "}),s.jsx("li",{children:"   "})]})]})]})]}),s.jsxs("div",{className:"card p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-3 flex items-center gap-2 text-lg",children:"   "}),(()=>{const i={};Dr.forEach(u=>{const m=u.address||"";let f="";m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")?f="":m.includes("")||m.includes("")?f="":m.includes("")||m.includes("")?f="":m.includes("")||m.includes("")?f="":m.includes("")||m.includes("")?f="":m.includes("")||m.includes("")?f="":m.includes("")||m.includes("")?f="":m.includes("")&&(f=""),i[f]||(i[f]={count:0,listings:0}),i[f].count++,i[f].listings+=u.listings||0});const c=Object.entries(i).filter(([u])=>u!=="").sort((u,m)=>m[1].count-u[1].count);return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-400",children:Dr.length.toLocaleString()}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"bg-emerald-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:le.length}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"bg-yellow-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:c.length}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),s.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-400",children:Dr.reduce((u,m)=>u+(m.listings||0),0).toLocaleString()}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"  "}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.slice(0,10).map(([u,m])=>s.jsxs("div",{className:"px-3 py-2 bg-slate-700/50 rounded-lg",children:[s.jsx("span",{className:"text-slate-200 font-medium",children:u}),s.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:[m.count,""]})]},u))})]})]})})()]}),s.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl p-6 text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" ,  "}),s.jsx("p",{className:"text-slate-300 mb-4",children:"  "}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx("a",{href:"https://www.beancraft.co.kr",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all",children:" "}),s.jsx("a",{href:"tel:1533-4875",className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-all",children:" 1533-4875"})]})]})]}),T==="realtors"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:" "}),(()=>{const i=k=>k.listingCount?k.listingCount:k.listings?k.listings:k.articleCounts&&k.articleCounts.total?k.articleCounts.total:0,c=k=>k.name&&(k.name.includes("")||k.name.includes("")||k.name.includes(""))?k.name:k.officeName?k.officeName:k.realtorName?k.realtorName:k.name||"( )",u=k=>k.agentName||k.agent||"",m=k=>k.agentPosition||"",f=k=>{if(!k)return"";if(k.includes("T")){const F=new Date(k);if(!isNaN(F.getTime()))return F.toLocaleDateString("ko-KR")}const se=k.match(/(\d{4})\.\s*(\d{1,2})\.\s*(\d{1,2})/);if(se){const[,F,B,G]=se;return`${F}. ${B}. ${G}.`}return k},x=["","","","","","","","","","","","","","","","",""],v={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},b=k=>{if(!k)return{city:"",district:""};const se=["","","","","","","","","","","","","","","","","","","","","","","","",""],F={:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","",""],:["","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","","","","","","",""],:["","","","","","","","","","","","","","","","","",""],:["",""]},B=[{pattern:/(|)?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/()?/,city:""},{pattern:/(|)?/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?(|)?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/?()?|/,city:""},{pattern:/(|)?/,city:""}];let G="";for(const{pattern:R,city:re}of B)if(R.test(k)){G=re;break}let z="";const E=k.match(/([-]{1,4})(|)/);if(E){const R=E[1]+E[2];!R.includes("")&&!R.includes("")&&R.length<=5&&(z=R)}if(z===""&&G===""){for(const R of se)if(new RegExp(`${R}(?!\\S*)\\s|${R}(?!\\S*)$|\\s${R}\\s`).test(k)||k.includes(R+" ")||k.includes(R+"")){z=R+"";break}}if(G===""){const R=k.match(/([-]{2,4})(?![])/);if(R){const re=R[1];for(const[oe,$r]of Object.entries(F))if($r.includes(re)){G=oe,z===""&&(z=re+"");break}}}if(z===""){const R=k.match(/([-]{2,4})(?![])/);R&&(z=R[1]+"")}if(G===""&&z!==""&&z.endsWith("")){const R=z.replace("","");se.includes(R)&&(G="")}return{city:G,district:z}},_=Dr.filter(k=>{const se=c(k),F=se.includes("")||se.includes("")||se.includes(""),B=k.address&&k.address.length>5;return F||B}),P=k=>k.replace(/\s+/g,"").replace(/[^\w-]/g,"").toLowerCase(),M=new Map,L=_.filter(k=>{const se=c(k).trim(),F=P(se),{city:B,district:G}=b(k.address),z=`${F}-${B}-${G}`;if(M.has(z)){const E=M.get(z);return i(k)>i(E.data)?(_[E.index]=null,M.set(z,{data:k,index:_.indexOf(k)}),!0):!1}return M.set(z,{data:k,index:_.indexOf(k)}),!0}).filter(k=>k!==null);le.forEach(k=>{Gd(k,L).isDuplicate||L.push({id:`company-${k.id}`,name:k.name,address:k.address,phone:k.phone,cellPhone:k.phone,listings:0,isFromCompany:!0,managerId:k.managerId,collected_at:k.createdAt,agentName:k.contact||"",memo:k.memo||"",reaction:k.reaction||"",lat:k.lat,lng:k.lng,companyId:k.id})});const A={};L.forEach(k=>{const{city:se,district:F}=b(k.address);se!==""&&(A[se]||(A[se]=new Set),F!==""&&A[se].add(F))});const Q=x.filter(k=>A[k]);L.reduce((k,se)=>k+i(se),0);const xe=L.length>0&&L.some(k=>k.collected_at)?new Date(Math.max(...L.filter(k=>k.collected_at).map(k=>new Date(k.collected_at).getTime()))):null;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"card p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-teal-600",children:$N?" ...":L.length}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]}),xe&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg font-bold text-slate-300",children:xe.toLocaleDateString("ko-KR")}),s.jsx("p",{className:"text-xs text-slate-400",children:" "})]})]})}),s.jsx("div",{className:"card p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsx("input",{type:"text",placeholder:"()   ...",value:Id,onChange:k=>AN(k.target.value),className:"input-premium flex-1 min-w-[150px]"}),s.jsxs("select",{value:Td,onChange:k=>LN(k.target.value),className:"select-premium",children:[s.jsx("option",{value:"",children:" "}),Q.map(k=>s.jsx("optgroup",{label:`${v[k]||k}`,children:[...A[k]].sort().map(se=>s.jsx("option",{value:`${k}|${se}`,children:se},`${k}-${se}`))},k))]}),s.jsxs("select",{value:Gi,onChange:k=>ON(k.target.value),className:"select-premium",children:[s.jsx("option",{value:"listings",children:"  "}),s.jsx("option",{value:"recent",children:"  "}),s.jsx("option",{value:"name",children:" "}),s.jsx("option",{value:"unvisited",children:" "})]})]})}),L.length===0?s.jsxs("div",{className:"card p-8 text-center text-slate-400",children:[s.jsx("p",{className:"text-4xl mb-2",children:""}),s.jsx("p",{children:"  "}),s.jsx("p",{className:"text-xs mt-2",children:"Chrome   "})]}):s.jsx("div",{className:"space-y-3",children:(()=>{let k=[...L];if(Id){const z=Id.trim().replace(/$/,"").toLowerCase();k=k.filter(E=>{const R=(E.address||"").toLowerCase(),re=c(E).toLowerCase(),oe=u(E).toLowerCase();return R.includes(z)||re.includes(z)||oe.includes(z)})}if(Td){const[B,G]=Td.split("|");k=k.filter(z=>{const{city:E,district:R}=b(z.address);return B&&G?E===B&&R===G:!1})}Gi==="recent"?k.sort((B,G)=>new Date(G.collected_at||0)-new Date(B.collected_at||0)):Gi==="name"?k.sort((B,G)=>c(B).localeCompare(c(G))):Gi==="unvisited"?k.sort((B,G)=>{const z=Kd(B,le)?1:0,E=Kd(G,le)?1:0;return z-E}):k.sort((B,G)=>i(G)-i(B));const se={};k.forEach(B=>{const{city:G,district:z}=b(B.address);G!==""&&(se[G]||(se[G]={}),se[G][z]||(se[G][z]=[]),se[G][z].push(B))});const F=x.filter(B=>se[B]);return F.length===0?s.jsx("div",{className:"card p-4 text-center text-slate-400",children:"  "}):F.map(B=>{const G=se[B],z=Object.values(G).flat().length,E=Object.keys(G).sort();return s.jsxs("details",{className:"card overflow-hidden",open:F.length===1,children:[s.jsxs("summary",{className:"p-4 cursor-pointer hover:bg-slate-700 flex justify-between items-center font-bold text-slate-200 bg-slate-800",children:[s.jsxs("span",{children:[" ",v[B]||B," (",z,")"]}),s.jsxs("span",{className:"text-xs text-slate-400",children:[E.length," /"]})]}),s.jsx("div",{className:"border-t border-slate-600",children:E.map(R=>{const re=G[R];return s.jsxs("details",{className:"border-b border-slate-700",children:[s.jsx("summary",{className:"p-3 pl-6 cursor-pointer hover:bg-slate-700 flex justify-between items-center text-slate-300",children:s.jsxs("span",{className:"font-bold",children:[R," (",re.length,")"]})}),s.jsxs("div",{className:"max-h-80 overflow-y-auto bg-slate-900",children:[re.map((oe,$r)=>{const us=c(oe),zr=i(oe),Br=Gd(oe,le),qs=Br.isDuplicate||oe.isFromCompany,ta=Br.matchedCompany,Xs=oe.isFromCompany?ue.find(ne=>ne.id===oe.managerId):ta?ue.find(ne=>ne.id===ta.managerId):null,V=ye.some(ne=>ne.name===us);return s.jsxs("div",{className:`p-3 pl-8 border-b border-slate-800 cursor-pointer hover:bg-slate-800 ${V?"bg-teal-900/20":qs?"bg-green-900/20":""}`,onClick:()=>Fl({...oe,officeName:us,listingCount:zr,agentName:oe.isFromCompany?oe.agentName:u(oe),agentPosition:m(oe),isRegistered:qs,isInRoute:V,assignedManager:Xs,matchedCompany:ta,collectedDate:oe.collected_at?f(oe.collected_at):""}),children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-bold text-slate-100 text-sm",children:us}),s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900 text-teal-300 font-bold",children:[zr,""]}),V&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-900 text-purple-300",children:""}),qs&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900 text-green-300",children:""}),Xs?s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full text-white font-bold",style:{backgroundColor:Xs.color},children:Xs.name}):s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-slate-600 text-slate-300 font-bold",children:""})]}),s.jsx("span",{className:"text-slate-500 text-sm",children:""})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:oe.address||" "})]},oe.id||$r)}),re.length>50&&s.jsxs("p",{className:"text-center text-xs text-slate-500 py-2",children:["... ",re.length-50,""]})]})]},R)})})]},B)})})()})]})})()]}),T==="companies"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-1 lg:order-2",children:s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"font-bold text-slate-100",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:ud,onChange:yj,className:"hidden"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:Mp,onChange:bj,className:"hidden"}),s.jsx("button",{onClick:()=>wi(!Tp),className:"px-3 py-1 rounded-full border border-slate-600 text-xs text-slate-300 hover:border-slate-500",children:"+  "}),Tp&&s.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50 min-w-[120px]",children:[s.jsx("button",{onClick:()=>{wi(!1),setTimeout(()=>{var i;return(i=ud.current)==null?void 0:i.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),s.jsx("button",{onClick:()=>{wi(!1),setTimeout(()=>{var i;return(i=Mp.current)==null?void 0:i.click()},100)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700 border-b border-slate-700",children:" "}),s.jsx("button",{onClick:()=>{ji(!0),wi(!1)},className:"w-full px-3 py-2 text-left text-xs text-slate-300 hover:bg-slate-700",children:" "})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",placeholder:"",value:ee.name,onChange:i=>Ke({...ee,name:i.target.value}),className:"input-premium text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:ee.contact,onChange:i=>Ke({...ee,contact:i.target.value}),className:"input-premium text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:ee.phone,onChange:i=>Ke({...ee,phone:i.target.value}),className:"input-premium text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:ee.address,onChange:i=>Ke({...ee,address:i.target.value}),className:"input-premium text-sm w-full"}),sn?s.jsxs("select",{value:ee.managerId||"",onChange:i=>Ke({...ee,managerId:Number(i.target.value)||null}),className:"select-premium text-sm w-full",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}):s.jsxs("div",{className:"input-premium text-sm flex items-center text-slate-400",children:[(n==null?void 0:n.name)||""," ()"]}),s.jsx("input",{type:"text",placeholder:"",value:ee.memo,onChange:i=>Ke({...ee,memo:i.target.value}),className:"input-premium text-sm w-full"})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:Object.entries(Ze).map(([i,c])=>s.jsx("button",{onClick:()=>Ke({...ee,reaction:i}),className:`px-2 py-1 rounded-full text-xs text-white transition-all ${ee.reaction===i?"ring-1 ring-offset-1 ring-white":"opacity-50"}`,style:{background:c.bg},children:c.label},i))}),s.jsxs("label",{className:"flex items-center gap-2 mt-3 text-xs text-slate-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ee.isReregistered||!1,onChange:i=>Ke({...ee,isReregistered:i.target.checked}),className:"w-3 h-3 rounded"})," (  )"]}),s.jsx("button",{type:"button",onClick:kf,className:"w-full mt-3 py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})}),s.jsx("div",{className:"lg:col-span-2 lg:order-1",children:s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("div",{className:"flex justify-between items-center mb-3",children:s.jsxs("h3",{className:"font-bold text-slate-100",children:["  (",ds.length,")"]})}),(()=>{const i={special:ds.filter(c=>c.reaction==="special").length,positive:ds.filter(c=>c.reaction==="positive").length,neutral:ds.filter(c=>c.reaction==="neutral").length,negative:ds.filter(c=>c.reaction==="negative").length};return s.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[s.jsx("p",{className:"text-lg font-bold text-rose-400",children:i.special}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[s.jsx("p",{className:"text-lg font-bold text-emerald-400",children:i.positive}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[s.jsx("p",{className:"text-lg font-bold text-orange-400",children:i.neutral}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl border border-slate-600",children:[s.jsx("p",{className:"text-lg font-bold text-slate-400",children:i.negative}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]})]})})(),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.jsx("input",{type:"text",placeholder:" ",value:zd,onChange:i=>GN(i.target.value),className:"input-premium text-sm"}),s.jsxs("select",{value:Bd,onChange:i=>YN(i.target.value),className:"select-premium text-sm",children:[s.jsx("option",{value:"all",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsxs("select",{value:Jl,onChange:i=>KN(i.target.value),className:"select-premium text-sm",children:[s.jsx("option",{value:"all",children:" "}),Object.entries(Ze).map(([i,c])=>s.jsx("option",{value:i,children:c.label},i))]})]}),ue.filter(i=>Bd==="all"||i.id===Number(Bd)).map(i=>{let c=ds.filter(x=>x.managerId===i.id);if(Jl!=="all"&&(c=c.filter(x=>x.reaction===Jl)),c.length===0)return null;const u=["special","positive","neutral","negative","missed"],m={};u.forEach(x=>{const v=c.filter(b=>b.reaction===x);v.length>0&&(m[x]=v)});const f=x=>{if(!x)return" ";const v=x.match(/(||||||||||||||||)[^\s]*\s*([^\s]+[])/);if(v)return v[2];const b=x.match(/([^\s]+[])/);return b?b[1]:""};return s.jsxs("details",{className:"mb-4",children:[s.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl cursor-pointer",style:{background:`${i.color}15`},children:[s.jsx("div",{className:"w-5 h-5 rounded-full",style:{background:i.color}}),s.jsx("span",{className:"font-bold text-slate-200 text-lg",children:i.name}),s.jsxs("span",{className:"text-sm text-slate-200",children:["(",c.length,")"]})]}),s.jsx("div",{className:"mt-2 ml-2",children:u.map(x=>{const v=m[x];if(!v)return null;const b=Ze[x],_={};return v.forEach(P=>{const M=f(P.address);_[M]||(_[M]=[]),_[M].push(P)}),s.jsxs("details",{className:"mb-3",children:[s.jsxs("summary",{className:"flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer",style:{background:`${b.bg}20`},children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:b.bg}}),s.jsx("span",{className:"font-bold text-sm",style:{color:b.bg},children:b.label}),s.jsxs("span",{className:"text-xs text-slate-200",children:["(",v.length,")"]})]}),s.jsx("div",{className:"mt-2 ml-3",children:Object.entries(_).map(([P,M])=>s.jsxs("details",{className:"mb-2",children:[s.jsxs("summary",{className:"text-xs text-slate-200 font-bold px-2 py-1 cursor-pointer hover:bg-slate-700 rounded",children:[P," (",M.length,")"]}),s.jsx("div",{className:"space-y-1 mt-1 ml-2",children:M.map(L=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>qe({...L}),children:[s.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:s.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:L.name})}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),qe({...L})},className:"text-slate-200 font-bold text-xs",children:""}),s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),Ef(L)},className:"text-rose-600 font-bold text-xs",children:""})]})]},L.id))})]},P))})]},x)})})]},i.id)}),(()=>{let i=ds.filter(c=>!c.managerId);return Jl!=="all"&&(i=i.filter(c=>c.reaction===Jl)),i.length===0?null:s.jsxs("details",{className:"mb-4",children:[s.jsxs("summary",{className:"flex items-center gap-2 p-3 rounded-xl bg-gray-100 cursor-pointer",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400"}),s.jsx("span",{className:"font-bold text-slate-200",children:""}),s.jsxs("span",{className:"text-sm text-slate-200",children:["(",i.length,")"]})]}),s.jsx("div",{className:"space-y-2 mt-2 ml-2",children:i.map(c=>{const u=Ze[c.reaction]||Ze.neutral;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded-lg border border-slate-600 cursor-pointer hover:bg-slate-700",onClick:()=>qe({...c}),children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{background:u.bg}}),s.jsx("span",{className:"font-bold text-slate-100 text-sm truncate",children:c.name})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("span",{className:"px-2 py-0.5 rounded text-xs text-white font-bold",style:{background:u.bg},children:u.label}),s.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),Ef(c)},className:"text-rose-600 font-bold text-xs",children:""})]})]},c.id)})})]})})(),ds.length===0&&s.jsx("p",{className:"text-navy-300 text-center py-10",children:"  "})]})})]}),T==="customers"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),Fi.length===0?s.jsx("p",{className:"text-slate-500 text-center py-8",children:"  "}):s.jsx("div",{className:"space-y-2",children:Fi.map(i=>{var u;const c=ue.find(m=>m.id===i.managerId);return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-600 hover:border-slate-500 cursor-pointer",onClick:()=>Ht(i),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs",style:{background:(c==null?void 0:c.color)||"#666"},children:((u=c==null?void 0:c.name)==null?void 0:u[0])||"?"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-200 text-sm",children:i.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:[i.phone,"  ",i.consultDate]})]})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${i.status==="completed"?"text-emerald-400":i.status==="contract"?"text-blue-400":"text-slate-400"}`,children:i.status==="completed"?"":i.status==="contract"?"":""})]},i.id)})})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600 sticky top-20",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:Et.managerId||"",onChange:i=>Gs({...Et,managerId:Number(i.target.value)||null}),className:"select-premium text-sm w-full",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsx("input",{type:"text",placeholder:" *",value:Et.name,onChange:i=>Gs({...Et,name:i.target.value}),className:"input-premium text-sm w-full"}),s.jsx("input",{type:"text",placeholder:"",value:Et.phone,onChange:i=>Gs({...Et,phone:i.target.value}),className:"input-premium text-sm w-full"}),s.jsx("input",{type:"date",value:Et.consultDate,onChange:i=>Gs({...Et,consultDate:i.target.value}),className:"input-premium text-sm w-full"}),s.jsx("div",{className:"flex gap-2",children:["consult","contract","completed"].map(i=>s.jsx("button",{onClick:()=>Gs({...Et,status:i}),className:`flex-1 px-2 py-2 rounded-full text-xs ${Et.status===i?"bg-slate-600 text-white":"border border-slate-600 text-slate-400"}`,children:i==="consult"?"":i==="contract"?"":""},i))}),s.jsx("textarea",{placeholder:"",value:Et.memo,onChange:i=>Gs({...Et,memo:i.target.value}),className:"input-premium text-sm w-full h-20 resize-none"}),s.jsx("button",{type:"button",onClick:Wj,className:"w-full py-2 rounded-full border border-slate-600 text-slate-300 text-sm hover:border-slate-500",children:""})]})]})})]}),T==="settings"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"font-bold text-slate-100 text-xl",children:""}),s.jsxs("div",{className:"flex gap-2 p-1 rounded-full border border-slate-600 w-fit flex-wrap",children:[s.jsx("button",{type:"button",onClick:()=>hi("theme"),className:`px-4 py-2 rounded-full text-sm transition-all ${ls==="theme"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),s.jsx("button",{type:"button",onClick:()=>hi("ments"),className:`px-4 py-2 rounded-full text-sm transition-all ${ls==="ments"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),s.jsx("button",{type:"button",onClick:()=>hi("account"),className:`px-4 py-2 rounded-full text-sm transition-all ${ls==="account"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""}),sn&&s.jsx("button",{type:"button",onClick:()=>hi("admin"),className:`px-4 py-2 rounded-full text-sm transition-all ${ls==="admin"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:""})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-6 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-xl mb-1",children:""}),s.jsx("p",{className:"text-blue-200 text-sm",children:"  "})]}),s.jsx("button",{type:"button",onClick:()=>{qc(!0),xi(null),Jc(!1)},className:"px-6 py-3 bg-white text-blue-600 rounded-xl font-bold hover:bg-blue-50 transition-all",children:""})]})}),ls==="ments"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100",children:"  "}),s.jsx("button",{type:"button",onClick:()=>{Uc(null),tn(!0)},className:"px-3 py-1 rounded-full border border-slate-600 text-sm text-slate-300 hover:border-slate-500",children:"+  "})]}),en.length===0?s.jsx("p",{className:"text-center py-8 text-slate-500",children:"  "}):s.jsx("div",{className:"space-y-3",children:en.map(i=>s.jsxs("div",{className:"p-4 rounded-xl border border-slate-600 hover:border-slate-500",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${i.type==="broker"?"text-blue-400":"text-emerald-400"}`,children:i.type==="broker"?"":""}),s.jsx("span",{className:"font-bold text-slate-100",children:i.name})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{type:"button",onClick:()=>{Xb(i),Wc(i.content),ui(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:"AI"}),s.jsx("button",{type:"button",onClick:()=>{Uc(i),fn({name:i.name,content:i.content,type:i.type||"broker",memo:i.memo||""}),tn(!0)},className:"px-2 py-1 rounded-full text-xs border border-slate-600 text-slate-400 hover:border-slate-500",children:""}),s.jsx("button",{type:"button",onClick:()=>{confirm("?")&&nj(i.id)},className:"px-2 py-1 rounded-full text-xs border border-rose-600/50 text-rose-400 hover:border-rose-500",children:""})]})]}),s.jsx("p",{className:"text-sm text-slate-300 mb-2 whitespace-pre-wrap",children:i.content}),s.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[s.jsxs("span",{children:[" ",i.useCount||0,""]}),s.jsxs("span",{children:[" ",i.useCount>0?Math.round((i.successCount||0)/i.useCount*100):0,"%"]})]})]},i.id))})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:"AI  "}),di.length===0?s.jsx("p",{className:"text-center py-4 text-slate-500 text-sm",children:" "}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:di.slice().reverse().slice(0,10).map(i=>s.jsxs("div",{className:"p-3 rounded-xl border border-slate-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"font-medium text-slate-200 text-sm",children:i.mentName}),s.jsx("span",{className:"text-xs text-slate-500",children:new Date(i.createdAt).toLocaleDateString()})]}),s.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:i.question})]},i.id))})]})})]}),ls==="theme"&&s.jsxs("div",{className:"card p-4 rounded-2xl border border-slate-600",children:[s.jsx("h3",{className:"font-bold text-slate-100 mb-4",children:" "}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{onClick:()=>td("light"),className:`p-4 rounded-xl border transition-all ${Pn==="light"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[s.jsx("div",{className:"text-xl mb-1",children:""}),s.jsx("div",{className:"text-xs text-slate-300",children:""})]}),s.jsxs("button",{onClick:()=>td("dark"),className:`p-4 rounded-xl border transition-all ${Pn==="dark"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[s.jsx("div",{className:"text-xl mb-1",children:""}),s.jsx("div",{className:"text-xs text-slate-300",children:""})]}),s.jsxs("button",{onClick:()=>td("auto"),className:`p-4 rounded-xl border transition-all ${Pn==="auto"?"border-slate-400":"border-slate-600 hover:border-slate-500"}`,children:[s.jsx("div",{className:"text-xl mb-1"}),s.jsx("div",{className:"text-xs text-slate-300",children:""})]})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-3",children:Pn==="auto"?"    .":Pn==="light"?"  .":"  ."})]}),ls==="account"&&s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"   "}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"password",placeholder:" ",value:vn,onChange:i=>Pi(i.target.value),className:"input-premium"}),s.jsx("input",{type:"password",placeholder:" ",value:Di,onChange:i=>Ai(i.target.value),className:"input-premium"}),s.jsx("button",{type:"button",onClick:sn?Sf:Cf,className:"btn-premium btn-gold w-full",children:" "})]}),s.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:["  4  . ",sn?"( )":""]})]}),ls==="admin"&&sn&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-3",children:"  "}),s.jsxs("p",{className:"text-sm text-slate-400 mb-3",children:["  : ",le.filter(i=>i.isReregistered).length,""]}),s.jsx("button",{onClick:()=>{const i=le.filter(c=>c.isReregistered);if(i.length===0){alert("   .");return}confirm(`  ${i.length}    ?
(  ,    )`)&&(i.forEach(c=>{Un({...c,isReregistered:!1})}),alert("   ."))},className:"btn-premium bg-rose-600 hover:bg-rose-700 text-white w-full",children:"   "}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"        ."})]}),ea.length>0&&s.jsxs("div",{className:"card p-4 border-2 border-rose-200",children:[s.jsxs("h3",{className:"font-bold text-rose-600 text-lg mb-4",children:["  (",ea.length,")"]}),s.jsx("div",{className:"space-y-3",children:ea.map(i=>{var c;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-rose-900/30 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-200",children:i.managerName}),s.jsx("p",{className:"text-sm text-slate-200",children:(c=i.items)==null?void 0:c.join(", ")})]}),s.jsx("button",{type:"button",onClick:()=>Yj(i.id),className:"btn-premium btn-gold text-sm",children:""})]},i.id)})})]}),s.jsxs("div",{className:"card p-3 sm:p-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:" "}),ue.map(i=>{const c=MN[i.id],u=(c==null?void 0:c.isOnline)&&Date.now()-new Date(c.lastSeen).getTime()<12e4;return s.jsxs("div",{className:"flex items-center gap-3 mb-3 p-3 bg-slate-700 rounded-xl",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex-shrink-0",style:{background:i.color}}),s.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${u?"bg-emerald-500":"bg-gray-400"}`})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("input",{type:"text",value:i.name,onChange:m=>Ud({...i,name:m.target.value}),className:"input-premium w-full mb-1"}),s.jsxs("p",{className:"text-xs text-slate-200",children:[u?"":`${Xj(c==null?void 0:c.lastSeen)}`,"  ",i.username]})]}),s.jsx("input",{type:"color",value:i.color,onChange:m=>Ud({...i,color:m.target.value}),className:"w-10 h-10 rounded cursor-pointer flex-shrink-0"}),s.jsx("button",{type:"button",onClick:()=>{confirm("?")&&te.ref("managers/"+i.id).remove()},className:"text-rose-600 font-bold text-sm flex-shrink-0",children:""})]},i.id)})]})]})]})]}),Dn&&s.jsx("div",{className:"modal-overlay",onClick:()=>Ll(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:cg(Dn.region)}),s.jsx("button",{type:"button",onClick:()=>Ll(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("p",{className:"text-slate-200 mb-4",children:[Dn.status==="confirmed"?"":"",": ",(Tf=Dn.manager)==null?void 0:Tf.name]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-slate-200 mb-2 block",children:""}),s.jsx("input",{type:"date",value:Dn.date||"",onChange:i=>{uj(Dn.id,i.target.value),Ll({...Dn,date:i.target.value})},className:"input-premium"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Ll(null),className:"btn-premium btn-outline flex-1",children:""}),cj(Dn)&&s.jsx("button",{type:"button",onClick:()=>dj(Dn.id),className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),q&&s.jsx("div",{className:"modal-overlay",onClick:()=>Fl(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Fl(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"bg-slate-900 rounded-xl p-4",children:[s.jsx("p",{className:"font-bold text-slate-100 text-lg mb-1",children:q.officeName}),s.jsx("p",{className:"text-sm text-slate-400",children:q.address||" "}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-100 text-teal-700 font-bold",children:[q.listingCount,""]}),q.isInRoute&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-teal-900/300 text-white",children:""}),q.isRegistered&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500 text-white",children:""})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),s.jsx("p",{className:"font-bold text-slate-200",children:q.phone||"-"})]}),s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),s.jsx("p",{className:"font-bold text-slate-200",children:q.cellPhone||"-"})]}),s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:q.isFromCompany?" ":""}),s.jsx("p",{className:"font-bold text-slate-200",children:q.assignedManager?s.jsx("span",{className:"px-2 py-0.5 rounded-full text-white text-xs",style:{backgroundColor:q.assignedManager.color},children:q.assignedManager.name}):q.agentPosition||q.agentName?`${q.agentPosition} ${q.agentName}`.trim():""})]}),s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:q.isFromCompany?"":""}),s.jsx("p",{className:"font-bold text-slate-200",children:q.collectedDate||"-"})]}),q.isFromCompany&&q.agentName&&s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:" "}),s.jsx("p",{className:"font-bold text-slate-200",children:q.agentName})]}),q.isFromCompany&&q.reaction&&s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),s.jsxs("p",{className:"font-bold text-slate-200",children:[q.reaction==="negative"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-slate-600 text-slate-300",children:""}),q.reaction==="positive"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-amber-600 text-white",children:""}),q.reaction==="good"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-green-600 text-white",children:""}),q.reaction==="special"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-red-600 text-white",children:""}),q.reaction==="skip"&&s.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-600 text-white",children:""})]})]}),q.isFromCompany&&q.memo&&s.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 col-span-2",children:[s.jsx("p",{className:"text-slate-400 text-xs mb-1",children:""}),s.jsx("p",{className:"text-slate-200 text-sm",children:q.memo})]})]}),q.articleCounts&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[q.articleCounts.sale>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700",children:[" ",q.articleCounts.sale]}),q.articleCounts.jeonse>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 text-green-700",children:[" ",q.articleCounts.jeonse]}),q.articleCounts.monthly>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700",children:[" ",q.articleCounts.monthly]}),q.articleCounts.short>0&&s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-100 text-purple-700",children:[" ",q.articleCounts.short]})]}),q.regions&&Object.keys(q.regions).length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(q.regions).sort((i,c)=>c[1]-i[1]).map(([i,c])=>s.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-slate-600 text-slate-300",children:[i,": ",c,""]},i))}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-slate-600",children:[!q.isInRoute&&s.jsx("button",{type:"button",onClick:()=>{var u,m;const i=q.address,c=(f,x)=>{kt(v=>[...v,{id:"stop_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),name:q.officeName,address:i||"",phone:q.cellPhone||q.phone||"",lat:f,lng:x,visited:!1,listings:q.listingCount,companyId:q.companyId||null}]),Fl(null),alert(" !")};q.lat&&q.lng?c(q.lat,q.lng):i&&((m=(u=window.naver)==null?void 0:u.maps)!=null&&m.Service)?naver.maps.Service.geocode({query:i},(f,x)=>{if(f===naver.maps.Service.Status.OK&&x.v2.addresses.length>0){const v=x.v2.addresses[0];c(parseFloat(v.y),parseFloat(v.x))}else c(null,null)}):c(null,null)},className:"btn-premium btn-gold text-sm flex-1",children:"+  "}),!q.isRegistered&&s.jsx("button",{type:"button",onClick:()=>{Ke({name:q.officeName,contact:q.agentName!==""?q.agentName:"",phone:q.cellPhone||q.phone||"",address:q.address||"",managerId:null,memo:` ${q.listingCount} | : ${q.collectedDate}`,reaction:"none"}),Fl(null),K("companies")},className:"btn-premium btn-navy text-sm flex-1",children:" "})]})]})]})}),He&&s.jsx("div",{className:"modal-overlay",onClick:()=>Ol(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${(Rf=Ze[He.reaction])!=null&&Rf.blink?"special-blink":""}`,style:{background:((Mf=Ze[He.reaction])==null?void 0:Mf.bg)||"#f97316"}}),s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:He.name})]}),s.jsx("button",{type:"button",onClick:()=>Ol(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[He.contact&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),s.jsx("span",{className:"font-bold text-slate-200",children:He.contact})]}),He.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),s.jsx("a",{href:`tel:${He.phone}`,className:"font-bold text-primary-600 md:pointer-events-none md:text-slate-200",children:He.phone})]}),He.address&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),s.jsx("span",{className:"text-slate-200 text-sm",children:He.address})]}),He.manager&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-slate-200 text-sm w-16",children:""}),s.jsx("span",{className:"font-bold",style:{color:He.manager.color},children:He.manager.name})]}),He.memo&&s.jsxs("div",{className:"bg-slate-700 p-3 rounded-lg",children:[s.jsx("p",{className:"text-xs text-primary-600 font-bold mb-1",children:""}),s.jsx("p",{className:"text-sm text-amber-800",children:He.memo})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"text-sm text-slate-200",children:":"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs text-white font-bold ${(Pf=Ze[He.reaction])!=null&&Pf.blink?"special-blink":""}`,style:{background:((Df=Ze[He.reaction])==null?void 0:Df.bg)||"#f97316"},children:((Af=Ze[He.reaction])==null?void 0:Af.label)||""})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{qe({...He}),Ol(null)},className:"btn-premium btn-gold flex-1",children:""}),s.jsx("button",{type:"button",onClick:()=>Ol(null),className:"btn-premium btn-outline flex-1",children:""})]})]})}),fN&&s.jsx("div",{className:"modal-overlay",onClick:()=>_i(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg mb-4",children:"  "}),s.jsx("div",{className:"space-y-3 mb-4",children:ig.map(i=>s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:xd[i],onChange:c=>gd({...xd,[i]:c.target.checked}),className:"w-5 h-5 accent-gold-500"}),s.jsx("span",{className:"font-bold text-slate-200",children:i})]},i))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>_i(null),className:"btn-premium btn-outline flex-1",children:""}),s.jsx("button",{type:"button",onClick:Kj,className:"btn-premium btn-gold flex-1",children:" "})]})]})}),lt&&s.jsx("div",{className:"modal-overlay",onClick:()=>qe(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>qe(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"",value:lt.name,onChange:i=>qe({...lt,name:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:lt.contact||"",onChange:i=>qe({...lt,contact:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:lt.phone||"",onChange:i=>qe({...lt,phone:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:lt.address||"",onChange:i=>qe({...lt,address:i.target.value}),className:"input-premium"}),s.jsxs("select",{value:lt.managerId||"",onChange:i=>qe({...lt,managerId:Number(i.target.value)||null}),className:"select-premium",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsx("input",{type:"text",placeholder:"",value:lt.memo||"",onChange:i=>qe({...lt,memo:i.target.value}),className:"input-premium"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(Ze).map(([i,c])=>s.jsx("button",{onClick:()=>qe({...lt,reaction:i}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${lt.reaction===i?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:c.bg},children:c.label},i))]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>qe(null),className:"btn-premium btn-outline flex-1",children:""}),s.jsx("button",{type:"button",onClick:Bj,className:"btn-premium btn-gold flex-1",children:""})]})]})}),Xe&&s.jsx("div",{className:"modal-overlay",onClick:()=>Ht(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Ht(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"",value:Xe.name,onChange:i=>Ht({...Xe,name:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:Xe.phone||"",onChange:i=>Ht({...Xe,phone:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"date",value:Xe.consultDate||"",onChange:i=>Ht({...Xe,consultDate:i.target.value}),className:"input-premium"}),s.jsxs("select",{value:Xe.managerId||"",onChange:i=>Ht({...Xe,managerId:Number(i.target.value)||null}),className:"select-premium",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-200 mb-2",children:""}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Ht({...Xe,status:"consult"}),className:`px-4 py-2 rounded-full text-sm font-bold ${Xe.status==="consult"||!Xe.status?"bg-primary-500 text-white":"bg-slate-700 text-primary-600"}`,children:""}),s.jsx("button",{onClick:()=>Ht({...Xe,status:"contract"}),className:`px-4 py-2 rounded-full text-sm font-bold ${Xe.status==="contract"?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-600"}`,children:""})]})]}),s.jsx("textarea",{placeholder:"",value:Xe.memo||"",onChange:i=>Ht({...Xe,memo:i.target.value}),className:"input-premium h-20"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>Ht(null),className:"btn-premium btn-outline flex-1",children:""}),s.jsx("button",{type:"button",onClick:Hj,className:"btn-premium btn-navy flex-1",children:""})]})]})}),$l&&s.jsx("div",{className:"modal-overlay",onClick:()=>Si(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[$l.status==="planned"?"":"","  "]}),s.jsx("button",{type:"button",onClick:()=>Si(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("button",{type:"button",onClick:()=>Er($l.pins.map(i=>i.id)),className:"text-sm text-gold-600 font-bold",children:" "}),s.jsx("button",{type:"button",onClick:()=>Er([]),className:"text-sm text-slate-200 font-bold",children:" "})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:$l.pins.map(i=>s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-xl cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:zs.includes(i.id),onChange:c=>{c.target.checked?Er([...zs,i.id]):Er(zs.filter(u=>u!==i.id))},className:"w-5 h-5 accent-gold-500"}),s.jsx("span",{className:"font-bold text-slate-200",children:cg(i.region)})]},i.id))}),zs.length>0&&s.jsxs("div",{className:"flex gap-2",children:[$l.status==="planned"&&s.jsx("button",{type:"button",onClick:hj,className:"btn-premium btn-gold flex-1",children:" "}),s.jsx("button",{type:"button",onClick:mj,className:"btn-premium bg-rose-500 text-white flex-1",children:""})]})]})}),ld&&s.jsx("div",{className:"modal-overlay",onClick:()=>ad(null),children:s.jsxs("div",{className:"modal-content max-w-sm p-0 overflow-hidden",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-4 sm:p-6 text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-slate-800/10 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-3 border border-white/20",children:s.jsx("span",{className:"text-2xl text-emerald-400"})}),s.jsx("p",{className:"text-slate-400 text-xs tracking-widest mb-1",children:"REGISTERED"}),s.jsx("h3",{className:"font-bold text-white text-lg",children:ld.companyName})]}),s.jsxs("div",{className:"p-5 bg-slate-800",children:[s.jsx("div",{className:"bg-slate-900 rounded-lg p-4 mb-4 border-l-4 border-teal-500",children:s.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:ld.quote})}),s.jsx("button",{type:"button",onClick:()=>ad(null),className:"w-full py-3 bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 text-white rounded-lg font-medium transition-all border border-slate-500",children:""})]})]})}),Ip&&s.jsx("div",{className:"modal-overlay",onClick:()=>rd(!1),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),s.jsx("button",{type:"button",onClick:()=>rd(!1),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"password",placeholder:" ",value:zl,onChange:i=>Fp(i.target.value),className:"input-premium"}),s.jsx("input",{type:"password",placeholder:" ",value:$p,onChange:i=>zp(i.target.value),className:"input-premium"}),s.jsx("button",{type:"button",onClick:Sf,className:"btn-premium btn-gold w-full",children:""})]})]})}),hN&&s.jsx("div",{className:"modal-overlay",onClick:()=>Ep(!1),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Ep(!1),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"bg-emerald-900/30 p-4 rounded-xl",children:[s.jsx("p",{className:"text-emerald-700 font-bold mb-2",children:"  "}),s.jsx("p",{className:"text-emerald-600 text-sm",children:"      ."}),s.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:"PC, ,    ."})]})]})}),id&&s.jsx("div",{className:"modal-overlay",onClick:()=>Ei(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Ei(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("p",{className:"text-sm text-slate-200 mb-4",children:[id.managerName," "]}),s.jsx("div",{className:"space-y-3",children:(()=>{const i=$i.filter(c=>c.managerId===id.managerId);return i.length===0?s.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.map(c=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-slate-100",children:[Number(c.amount).toLocaleString(),""]}),s.jsx("p",{className:"text-xs text-slate-200",children:c.date})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{const u=prompt("  :",c.amount);u&&!isNaN(u)&&(nf({...c,amount:Number(u)}),alert(" ."))},className:"px-2 py-1 bg-primary-500 text-white rounded text-xs font-bold",children:""}),s.jsx("button",{onClick:()=>{confirm("  ?")&&(tj(c.id),alert(" ."))},className:"px-2 py-1 bg-slate-600 text-white rounded text-xs font-bold",children:""})]})]},c.id))})})()}),s.jsx("button",{type:"button",onClick:()=>Ei(null),className:"btn-premium btn-outline w-full mt-4",children:""})]})}),gN&&s.jsx("div",{className:"modal-overlay",onClick:()=>ki(!1),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>ki(!1),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:nn.managerId||"",onChange:i=>Ji({...nn,managerId:Number(i.target.value)||null}),className:"select-premium",children:[s.jsx("option",{value:"",children:"  *"}),qj().map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsx("input",{type:"number",placeholder:" *",value:nn.amount,onChange:i=>Ji({...nn,amount:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"date",value:nn.date,onChange:i=>Ji({...nn,date:i.target.value}),className:"input-premium"}),s.jsx("button",{type:"button",onClick:Vj,className:"btn-premium btn-gold w-full",children:""})]})]})}),mN&&s.jsx("div",{className:"modal-overlay",onClick:()=>sd(!1),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>sd(!1),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"password",placeholder:" ",value:vn,onChange:i=>Pi(i.target.value),className:"input-premium"}),s.jsx("input",{type:"password",placeholder:" ",value:Di,onChange:i=>Ai(i.target.value),className:"input-premium"}),s.jsx("button",{type:"button",onClick:Cf,className:"btn-premium btn-gold w-full",children:""})]})]})}),pN&&s.jsx("div",{className:"modal-overlay",onClick:()=>ji(!1),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>ji(!1),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 mb-4",children:[s.jsx("p",{className:"text-slate-200 font-bold mb-1",children:" "}),s.jsx("p",{className:"text-slate-200 text-sm",children:"////"})]}),s.jsx("textarea",{value:fd,onChange:i=>Pp(i.target.value),placeholder:"////",className:"input-premium h-32 mb-3"}),s.jsxs("select",{value:Dp||"",onChange:i=>Ap(Number(i.target.value)||null),className:"select-premium mb-3",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[s.jsx("span",{className:"text-sm text-slate-200",children:" :"}),Object.entries(Ze).map(([i,c])=>s.jsx("button",{onClick:()=>Op(i),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${Lp===i?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:c.bg},children:c.label},i))]}),s.jsx("button",{type:"button",onClick:Uj,className:"btn-premium btn-navy w-full",children:" "})]})}),vN&&s.jsx("div",{className:"modal-overlay",onClick:()=>Ri(!1),style:{overflow:"hidden"},children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),s.jsx("button",{type:"button",onClick:()=>Ri(!1),className:"text-slate-200 text-2xl",children:""})]}),Rp?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full spin mx-auto mb-3"}),s.jsx("p",{className:"text-slate-200",children:"  ..."})]}):bN?s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-slate-200 font-bold",children:"   ( )"}),s.jsx("input",{type:"text",placeholder:"",value:ee.name,onChange:i=>Ke({...ee,name:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:ee.contact,onChange:i=>Ke({...ee,contact:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:ee.phone,onChange:i=>Ke({...ee,phone:i.target.value}),className:"input-premium"}),s.jsx("input",{type:"text",placeholder:"",value:ee.address,onChange:i=>Ke({...ee,address:i.target.value}),className:"input-premium"}),s.jsxs("select",{value:ee.managerId||"",onChange:i=>Ke({...ee,managerId:Number(i.target.value)||null}),className:"select-premium",children:[s.jsx("option",{value:"",children:" "}),ue.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm text-slate-200",children:":"}),Object.entries(Ze).map(([i,c])=>s.jsx("button",{onClick:()=>Ke({...ee,reaction:i}),className:`px-3 py-1.5 rounded-full text-xs text-white font-bold ${ee.reaction===i?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:c.bg},children:c.label},i))]}),s.jsx("input",{type:"text",placeholder:"",value:ee.memo,onChange:i=>Ke({...ee,memo:i.target.value}),className:"input-premium"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{var i;dd(null),Ke({name:"",contact:"",phone:"",address:"",managerId:(n==null?void 0:n.managerId)||null,memo:"",reaction:"neutral"}),(i=ud.current)==null||i.click()},className:"flex-1 py-3 border border-slate-600 rounded-xl font-bold text-slate-200",children:""}),s.jsx("button",{onClick:async()=>{await kf(),Ri(!1),dd(null)},className:"flex-1 btn-premium btn-gold",children:" "})]})]}):null]})}),yN&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content max-w-2xl",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:["   (",Vt.length,")"]}),s.jsx("button",{type:"button",onClick:()=>cd(!1),className:"text-slate-200 text-2xl",children:""})]}),Rp?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full spin mx-auto mb-3"}),s.jsx("p",{className:"text-slate-200",children:"  ..."})]}):s.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[Vt.map((i,c)=>s.jsxs("div",{className:"bg-slate-700 rounded-xl p-3 border",children:[s.jsxs("p",{className:"font-bold text-slate-200 text-sm mb-2",children:[" #",c+1]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",placeholder:"",value:i.name,onChange:u=>{const m=[...Vt];m[c].name=u.target.value,gn(m)},className:"input-premium text-sm"}),s.jsx("input",{type:"text",placeholder:"",value:i.contact,onChange:u=>{const m=[...Vt];m[c].contact=u.target.value,gn(m)},className:"input-premium text-sm"}),s.jsx("input",{type:"text",placeholder:"",value:i.phone,onChange:u=>{const m=[...Vt];m[c].phone=u.target.value,gn(m)},className:"input-premium text-sm"}),s.jsx("input",{type:"text",placeholder:"",value:i.address,onChange:u=>{const m=[...Vt];m[c].address=u.target.value,gn(m)},className:"input-premium text-sm"})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsxs("select",{value:i.managerId||"",onChange:u=>{const m=[...Vt];m[c].managerId=Number(u.target.value)||null,gn(m)},className:"select-premium text-sm py-1",children:[s.jsx("option",{value:"",children:""}),ue.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))]}),Object.entries(Ze).map(([u,m])=>s.jsx("button",{onClick:()=>{const f=[...Vt];f[c].reaction=u,gn(f)},className:`px-2 py-1 rounded-full text-xs text-white font-bold ${i.reaction===u?"ring-2 ring-offset-1":"opacity-50"}`,style:{background:m.bg},children:m.label},u))]}),s.jsx("input",{type:"text",placeholder:"",value:i.memo,onChange:u=>{const m=[...Vt];m[c].memo=u.target.value,gn(m)},className:"input-premium text-sm mt-2"})]},c)),Vt.length>0&&s.jsxs("button",{onClick:Nj,className:"btn-premium btn-gold w-full",children:[Vt.filter(i=>i.name).length,"  "]})]})]})}),wN&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-3xl"})}),s.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),s.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long"})," 4"]})]}),s.jsxs("div",{className:"bg-slate-700 border border-primary-300 rounded-xl p-4 mb-4",children:[s.jsxs("p",{className:"text-blue-800 font-bold text-center text-lg",children:["  ",s.jsx("br",{}),"."]}),s.jsxs("p",{className:"text-primary-600 text-sm text-center mt-2",children:["    ",s.jsx("br",{}),"  ."]})]}),s.jsx("button",{onClick:()=>pd(!1),className:"btn-premium btn-gold w-full",children:""})]})}),Kl&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>wd(null),children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"  "}),s.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[" ",s.jsxs("b",{className:"text-amber-500",children:[Kl.unvisitedStops.length,""]}),"   ."]})]}),s.jsx("div",{className:"bg-slate-800 rounded-xl p-3 mb-4 max-h-40 overflow-y-auto",children:Kl.unvisitedStops.map((i,c)=>s.jsxs("div",{className:"flex items-center gap-2 py-2 border-b border-slate-700 last:border-0",children:[s.jsx("span",{className:"w-6 h-6 bg-rose-500/20 text-rose-400 rounded-full flex items-center justify-center text-xs font-bold",children:c+1}),s.jsx("span",{className:"text-slate-200 text-sm",children:i.name})]},c))}),s.jsxs("p",{className:"text-xs text-slate-300 mb-4 text-center",children:["       ",s.jsx("br",{}),"    ."]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>qd(Kl.route,!1),className:"flex-1 px-4 py-2 bg-slate-600 rounded-xl font-bold text-slate-200 text-sm",children:" "}),s.jsx("button",{onClick:()=>qd(Kl.route,!0),className:"flex-1 px-4 py-2 bg-amber-600 rounded-xl font-bold text-white text-sm",children:" "})]})]})}),jd&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1200] p-4",onClick:()=>Rr(null),children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-sm",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-14 h-14 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-2xl"})}),s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsxs("p",{className:"text-slate-200 text-sm mt-2",children:[s.jsx("b",{className:"text-rose-600",children:jd.name}),"() ?"]}),s.jsx("p",{className:"text-xs text-slate-200 mt-1",children:"    ."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Rr(null),className:"flex-1 px-4 py-2 bg-gray-100 rounded-xl font-bold text-gray-700",children:""}),s.jsx("button",{onClick:()=>{const{type:i,id:c}=jd;i==="route"?rf(c):i==="company"?ZN(c):i==="customer"?ej(c):i==="calendar"?(Hp(Nt.filter(u=>u.id!==c)),localStorage.setItem("bc_calendar_events",JSON.stringify(Nt.filter(u=>u.id!==c)))):i==="sale"&&(Bp($i.filter(u=>u.id!==c)),localStorage.setItem("bc_sales",JSON.stringify($i.filter(u=>u.id!==c)))),Rr(null),alert(".")},className:"flex-1 px-4 py-2 bg-rose-500 rounded-xl font-bold text-white",children:""})]})]})}),NN&&md.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1100] p-4",children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-3xl"})}),s.jsx("h3",{className:"font-bold text-slate-100 text-xl",children:"  "}),s.jsx("p",{className:"text-slate-200 text-sm mt-1",children:new Date().toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),s.jsxs("div",{className:"bg-slate-700 border border-slate-600 rounded-xl p-4 mb-4 max-h-60 overflow-y-auto",children:[s.jsxs("p",{className:"text-primary-600 font-bold text-sm mb-3",children:[md.length,"  "]}),s.jsx("div",{className:"space-y-2",children:md.map((i,c)=>{const u=ue.find(m=>m.id===i.managerId);return s.jsx("div",{className:"bg-slate-700 p-3 rounded-lg border border-slate-600",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-lg",children:i.type==="route"?"":""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-bold text-slate-100 text-sm break-words",children:i.title}),u&&s.jsxs("p",{className:"text-xs text-slate-200",children:[": ",u.name]}),i.memo&&s.jsx("p",{className:"text-xs text-slate-200 mt-1 break-words whitespace-pre-wrap",children:i.memo})]})]})},c)})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{hd(!1),K("calendar")},className:"flex-1 btn-premium btn-gold",children:" "}),s.jsx("button",{onClick:()=>hd(!1),className:"flex-1 btn-premium btn-outline",children:""})]})]})}),xN&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Ci(!1),children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-hidden",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Ci(!1),className:"text-slate-200 text-2xl",children:""})]}),s.jsx("p",{className:"text-sm text-slate-200 mb-3",children:"   ."}),s.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[le.filter(i=>!i.lat||!i.lng).map(i=>{const c=ue.find(u=>u.id===i.managerId);return s.jsx("div",{className:"p-3 bg-slate-700 rounded-xl cursor-pointer hover:bg-slate-700 border border-slate-600",onClick:()=>{Ci(!1),qe(i)},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-bold text-slate-100 truncate",children:i.name}),s.jsx("p",{className:"text-xs text-slate-200 truncate",children:i.address||" "})]}),s.jsx("div",{className:"flex-shrink-0 ml-2",children:s.jsx("span",{className:"px-2 py-1 rounded text-xs text-white font-bold",style:{background:(c==null?void 0:c.color)||"#9ca3af"},children:(c==null?void 0:c.name)||""})})]})},i.id)}),le.filter(i=>!i.lat||!i.lng).length===0&&s.jsx("p",{className:"text-center text-slate-200 py-4",children:"  ."})]})]})}),ht&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Gl(null),children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:" "}),s.jsx("button",{type:"button",onClick:()=>Gl(null),className:"text-slate-200 text-2xl",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl",children:[s.jsx("p",{className:"text-purple-800 font-bold text-lg",children:ht.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-purple-600",children:[s.jsxs("span",{children:[" ",ht.date]}),ht.time&&s.jsx("span",{children:ht.time})]}),ht.memo&&s.jsxs("div",{className:"mt-3 p-3 bg-slate-700 rounded-lg",children:[s.jsx("p",{className:"text-xs text-slate-200 mb-1",children:""}),s.jsx("p",{className:"text-slate-200 whitespace-pre-wrap",children:ht.memo})]}),ht.company&&s.jsx("div",{className:"mt-2 text-sm text-purple-600",children:s.jsx("span",{children:ht.company})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{Nd(ht.date),Ln({title:ht.title,time:ht.time||"09:00",memo:ht.memo||""}),Mr(ht.id),Ws(!0),Gl(null)},className:"flex-1 py-2 bg-slate-700 text-primary-600 rounded-xl font-bold",children:""}),s.jsx("button",{onClick:()=>{Rr({type:"calendar",id:ht.id,name:ht.title}),Gl(null)},className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-xl font-bold",children:""})]})]})]})}),DN&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Ws(!1),children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-slate-100 text-lg",children:[Vl," "]}),s.jsx("button",{type:"button",onClick:()=>Ws(!1),className:"text-slate-200 text-2xl",children:""})]}),(()=>{const i=Fe.filter(u=>u.date===Vl),c=Nt.filter(u=>u.date===Vl);return i.length>0||c.length>0?s.jsxs("div",{className:"mb-4 p-3 bg-slate-700 rounded-xl max-h-32 overflow-y-auto",children:[s.jsx("p",{className:"text-xs text-slate-200 mb-2 font-bold",children:"  "}),i.map(u=>{var f;const m=ue.find(x=>x.id===u.managerId);return s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full",style:{background:(m==null?void 0:m.color)||"#888"}}),s.jsxs("span",{className:"text-sm text-slate-200",children:[(f=u.time)==null?void 0:f.slice(0,5)," ",u.name]}),s.jsx("span",{className:"text-xs text-slate-200",children:"()"})]},`r-${u.id}`)}),c.map(u=>{var m;return s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),s.jsxs("span",{className:"text-sm text-slate-200",children:[(m=u.time)==null?void 0:m.slice(0,5)," ",u.title]}),s.jsx("button",{onClick:()=>{Ln({title:u.title,time:u.time,memo:u.memo||""}),Mr(u.id)},className:"text-xs text-primary-600 ml-auto",children:""}),s.jsx("button",{onClick:()=>{confirm("?")&&lj(u.id)},className:"text-xs text-rose-600",children:""})]},`e-${u.id}`)})]}):null})(),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-slate-200 font-bold",children:Yl?" ":"  "}),s.jsx("input",{type:"text",placeholder:" ",value:yn.title,onChange:i=>Ln({...yn,title:i.target.value}),className:"input-premium"}),s.jsx("div",{className:"relative",onClick:()=>{var i,c;return(c=(i=document.getElementById("calEventTime")).showPicker)==null?void 0:c.call(i)},children:s.jsx("input",{id:"calEventTime",type:"time",value:yn.time,onChange:i=>Ln({...yn,time:i.target.value}),className:"input-premium cursor-pointer"})}),s.jsx("textarea",{placeholder:" ()",value:yn.memo,onChange:i=>Ln({...yn,memo:i.target.value}),className:"input-premium resize-none h-20"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[Yl&&s.jsx("button",{onClick:()=>{Ln({title:"",time:"09:00",memo:""}),Mr(null)},className:"btn-premium btn-outline flex-1",children:" "}),s.jsx("button",{type:"button",onClick:()=>Ws(!1),className:"btn-premium btn-outline flex-1",children:""}),s.jsx("button",{onClick:()=>{if(!yn.title.trim())return alert("  ");const i={id:Yl||Date.now(),date:Vl,title:yn.title.trim(),time:yn.time,memo:yn.memo.trim(),createdBy:(n==null?void 0:n.name)||"unknown",createdAt:new Date().toISOString()};Hd(i),pd(!1),Ln({title:"",time:"09:00",memo:""}),Mr(null),alert(Yl?" !":" !")},className:"btn-premium btn-gold flex-1",children:Yl?"":""})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:s.jsx("button",{onClick:()=>{Ir(Vl),Ws(!1),Ys("route")},className:"w-full text-center text-sm text-slate-200 font-bold",children:"  "})})]})}),At&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>An(null),children:s.jsxs("div",{className:"bg-slate-700 rounded-2xl p-5 w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:At.name}),s.jsx("p",{className:"text-sm text-slate-200",children:At.date})]}),s.jsx("button",{type:"button",onClick:()=>An(null),className:"text-slate-200 hover:text-slate-200 text-xl",children:""})]}),(()=>{const i=(At.stops||[]).filter(m=>m.visited).length,c=(At.stops||[]).length,u=c>0?Math.round(i/c*100):0;return s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-slate-200",children:""}),s.jsxs("span",{className:"text-sm font-bold text-slate-200",children:[i,"/",c," (",u,"%)"]})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 transition-all duration-300",style:{width:`${u}%`}})})]})})(),s.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:(At.stops||[]).map((i,c)=>s.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all ${i.visited?"bg-emerald-900/30":"bg-slate-700"}`,children:[s.jsx("button",{onClick:()=>Aj(At.id,i.id),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all flex-shrink-0 ${i.visited?"bg-emerald-500 text-white":"bg-slate-600 border-2 border-slate-600 text-slate-200 hover:border-primary-400"}`,children:i.visited?"":c+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-bold text-sm break-words leading-snug ${i.visited?"text-emerald-700":"text-slate-100"}`,children:i.name}),i.address&&s.jsx("p",{className:"text-xs text-slate-200 break-words",children:i.address})]}),i.lat&&i.lng&&s.jsx("button",{type:"button",onClick:()=>Oj(i),className:"w-8 h-8 rounded-lg bg-slate-700 hover:bg-slate-600 text-primary-600 flex items-center justify-center text-sm flex-shrink-0"})]},i.id))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{type:"button",onClick:()=>{An(null),$j(At)},className:"w-full btn-premium btn-outline py-2",children:"   "}),At.status!=="completed"&&s.jsx("button",{type:"button",onClick:()=>Lj(At.id),className:"w-full btn-premium btn-gold py-3 font-bold",children:"  ( )"})]})]})}),En&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>{tn(!1),fn({name:"",content:"",type:"broker",memo:""})},children:s.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-md",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:St?" ":"  "}),s.jsx("button",{type:"button",onClick:()=>{tn(!1),fn({name:"",content:"",type:"broker",memo:""})},className:"text-slate-400 text-2xl hover:text-white",children:""})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"  (:  )",value:dt.name,onChange:i=>fn({...dt,name:i.target.value}),className:"input-premium"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>fn({...dt,type:"broker"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${dt.type==="broker"?"bg-blue-500/20 text-blue-400 border border-blue-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""}),s.jsx("button",{onClick:()=>fn({...dt,type:"customer"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${dt.type==="customer"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""})]}),s.jsx("textarea",{placeholder:"  ",value:dt.content,onChange:i=>fn({...dt,content:i.target.value}),rows:"4",className:"input-premium resize-none"}),s.jsx("input",{type:"text",placeholder:" ()",value:dt.memo,onChange:i=>fn({...dt,memo:i.target.value}),className:"input-premium"})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>{tn(!1),fn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-outline",children:""}),s.jsx("button",{onClick:()=>{if(!dt.name.trim()||!dt.content.trim())return alert("   ");const i={id:(St==null?void 0:St.id)||Date.now(),name:dt.name.trim(),content:dt.content.trim(),type:dt.type,memo:dt.memo.trim(),useCount:(St==null?void 0:St.useCount)||0,successCount:(St==null?void 0:St.successCount)||0,createdAt:(St==null?void 0:St.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};lf(i),tn(!1),Uc(null),fn({name:"",content:"",type:"broker",memo:""})},className:"flex-1 btn-premium btn-gold",children:St?" ":""})]})]})}),qb&&In&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[1200] p-4",onClick:()=>ui(!1),children:s.jsxs("div",{className:"bg-slate-800 rounded-2xl p-5 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-100 text-lg",children:"AI "}),s.jsx("button",{type:"button",onClick:()=>ui(!1),className:"text-slate-400 text-2xl hover:text-white",children:""})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-slate-400 mb-1",children:[" : ",s.jsx("span",{className:"text-brand-purple font-medium",children:In.name})]}),s.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:s.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:In.content})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"  :"}),s.jsx("textarea",{value:Tl,onChange:i=>Wc(i.target.value),placeholder:"  ",rows:"3",className:"input-premium resize-none w-full"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),s.jsx("input",{type:"text",value:hp,onChange:i=>mp(i.target.value),placeholder:"   ?",className:"input-premium w-full"})]}),s.jsx("button",{onClick:()=>{if(!Tl.trim())return alert("  ");const i={id:Date.now(),mentId:In.id,mentName:In.name,original:In.content,modified:Tl,question:hp||" ",aiResponse:` !

:
    ${Tl.length>In.content.length?" ":" "} 
 ${Tl.includes("?")?"   ":"   "}

 :
    .`,createdAt:new Date().toISOString()};sj(i),alert(" !  ."),ui(!1),Wc(""),mp("")},className:"w-full btn-premium btn-gold",children:"AI  "}),di.filter(i=>i.mentId===In.id).length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[s.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"    "}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:di.filter(i=>i.mentId===In.id).slice(-3).reverse().map(i=>s.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/30 border border-slate-700/30",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:new Date(i.createdAt).toLocaleString("ko-KR")}),s.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:i.question})]},i.id))})]})]})}),Qc&&s.jsxs("div",{className:"fixed inset-0 z-[2000] bg-white",onClick:ut,children:[Ml&&s.jsxs("div",{className:"absolute inset-0 z-[2100] bg-white flex flex-col items-center justify-center",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-32 h-32 object-contain mb-8"}),s.jsx("p",{className:"text-neutral-500 text-sm mb-6",children:" "}),s.jsx("div",{className:"flex gap-2 mb-4",children:[1,2,3,4].map((i,c)=>s.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${jp.length>c?"bg-neutral-900 border-neutral-900":"border-neutral-300"}`},c))}),s.jsx("div",{className:"grid grid-cols-3 gap-3 w-60",children:[1,2,3,4,5,6,7,8,9,"",0,""].map((i,c)=>s.jsx("button",{onClick:()=>{if(i==="")Pl(u=>u.slice(0,-1));else if(i!==""){const u=jp+i;Pl(u),u.length===4&&(u==="1004"?(Jc(!1),Pl(""),ut()):(alert("PIN ."),Pl("")))}},className:`h-14 rounded-xl text-xl font-medium transition-all ${i===""?"invisible":"bg-neutral-100 hover:bg-neutral-200 text-neutral-900"}`,children:i},c))})]}),!fi&&!Ml&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 bg-white",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"w-24 h-24 object-contain mb-6"}),s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:""}),s.jsx("p",{className:"text-neutral-500 mb-8",children:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-sm",children:[s.jsxs("button",{onClick:()=>{xi("internal"),ut()},className:"aspect-square rounded-xl border-2 border-neutral-200 bg-white p-6 flex flex-col items-center justify-center gap-3 hover:border-neutral-400 transition-all",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl border border-neutral-300 flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-bold text-neutral-600",children:""})}),s.jsx("span",{className:"font-bold text-neutral-700",children:" "}),s.jsx("span",{className:"text-xs text-neutral-400",children:" "})]}),s.jsxs("button",{onClick:()=>{xi("client"),ut()},className:"aspect-square rounded-xl border-2 border-neutral-900 bg-white p-6 flex flex-col items-center justify-center gap-3 hover:bg-neutral-50 transition-all",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl border-2 border-neutral-900 flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-bold text-neutral-900",children:""})}),s.jsx("span",{className:"font-bold text-neutral-900",children:""}),s.jsx("span",{className:"text-xs text-neutral-500",children:"1  "})]})]}),s.jsx("button",{onClick:()=>qc(!1),className:"mt-8 px-6 py-2 text-neutral-500 hover:text-neutral-700",children:""})]}),fi&&!Ml&&s.jsxs("div",{className:"h-full flex flex-col bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 bg-white",children:[s.jsx("img",{src:"/logo.png",alt:"BEANCRAFT",className:"h-8 object-contain"}),s.jsx("button",{onClick:()=>{qc(!1),xi(null),bp(null)},className:"px-3 py-1 text-sm text-neutral-500 hover:text-neutral-700",children:""})]}),s.jsxs("div",{className:"flex border-b border-neutral-200 bg-white",children:[s.jsx("button",{onClick:()=>{yp("analysis"),ut()},className:`flex-1 py-3 text-center font-medium transition-all ${gi==="analysis"?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:""}),s.jsx("button",{onClick:()=>{yp("website"),ut()},className:`flex-1 py-3 text-center font-medium transition-all ${gi==="website"?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400"}`,children:""})]}),gi==="analysis"&&s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:"  "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:vi,onChange:i=>{nN(i.target.value),ut()},onKeyDown:i=>i.key==="Enter"&&Sp(),placeholder:": , , ",className:"flex-1 px-4 py-3 rounded-lg border border-neutral-200 text-neutral-900 text-sm focus:outline-none focus:border-neutral-400"}),s.jsx("button",{onClick:Sp,disabled:Xc,className:"px-6 py-3 bg-neutral-900 text-white rounded-lg font-medium hover:bg-neutral-800 disabled:opacity-50",children:Xc?"...":""})]})]}),Oe&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:""}),s.jsx("div",{className:"h-48 bg-neutral-100 rounded-lg flex items-center justify-center",children:s.jsxs("p",{className:"text-neutral-400 text-sm",children:[Oe.region,"  "]})}),s.jsx("p",{className:"text-xs text-neutral-400 mt-2",children:"*   API  "})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:" "}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:" "}),s.jsx("p",{className:"font-bold text-neutral-900",children:((Lf=Oe.overview)==null?void 0:Lf.cafeCount)||"-"})]}),s.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:" "}),s.jsxs("p",{className:"font-bold text-neutral-900",children:[((Of=Oe.overview)==null?void 0:Of.avgRent)||"-",""]})]}),s.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:" "}),s.jsx("p",{className:"font-bold text-neutral-900",children:((Ff=Oe.overview)==null?void 0:Ff.recentOpen)||"-"})]}),s.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:" "}),s.jsx("p",{className:"font-bold text-neutral-900",children:(($f=Oe.overview)==null?void 0:$f.recentClose)||"-"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:" "}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"text-neutral-500",children:" :"})," ",s.jsx("span",{className:"text-neutral-900 font-medium",children:((zf=Oe.consumers)==null?void 0:zf.main)||"-"})]}),s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"text-neutral-500",children:"2:"})," ",s.jsx("span",{className:"text-neutral-900",children:((Bf=Oe.consumers)==null?void 0:Bf.secondary)||"-"})]}),s.jsx("p",{className:"text-sm text-neutral-600",children:(Uf=Oe.consumers)==null?void 0:Uf.characteristics})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:" "}),s.jsx("div",{className:"grid grid-cols-5 gap-2 text-center",children:["","","","",""].map((i,c)=>{var m;const u=["starbucks","mega","compose","ediya","paik"];return s.jsxs("div",{className:"p-2 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:i}),s.jsx("p",{className:"font-bold text-neutral-900",children:((m=Oe.franchise)==null?void 0:m[u[c]])||"-"})]},i)})})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:" "}),s.jsx("ul",{className:"space-y-2",children:(Hf=(Wf=Oe.development)==null?void 0:Wf.news)==null?void 0:Hf.map((i,c)=>s.jsxs("li",{className:"text-sm text-neutral-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-400",children:""})," ",i]},c))}),((Vf=Oe.development)==null?void 0:Vf.timeline)&&s.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:[" : ",Oe.development.timeline]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsxs("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:["  ",s.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs ${((Gf=Oe.risk)==null?void 0:Gf.level)===""?"bg-red-100 text-red-600":((Kf=Oe.risk)==null?void 0:Kf.level)===""?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:((Yf=Oe.risk)==null?void 0:Yf.level)||"-"})]}),s.jsx("ul",{className:"space-y-2",children:(qf=(Qf=Oe.risk)==null?void 0:Qf.factors)==null?void 0:qf.map((i,c)=>s.jsxs("li",{className:"text-sm text-neutral-700 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-400",children:""})," ",i]},c))})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:" "}),s.jsx("p",{className:"text-xs text-neutral-500 mb-4",children:(Xf=Oe.simulation)==null?void 0:Xf.explanation}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:" "}),s.jsx("button",{onClick:()=>xn("seats"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.seats,onChange:i=>{Mn(c=>({...c,seats:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:" ()"}),s.jsx("button",{onClick:()=>xn("unitPrice"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.unitPrice,onChange:i=>{Mn(c=>({...c,unitPrice:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:" (/)"}),s.jsx("button",{onClick:()=>xn("turnover"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",step:"0.1",value:Rn.turnover,onChange:i=>{Mn(c=>({...c,turnover:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:" (%)"}),s.jsx("button",{onClick:()=>xn("occupancy"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.occupancy,onChange:i=>{Mn(c=>({...c,occupancy:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:"  ()"}),s.jsx("button",{onClick:()=>xn("rent"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.rent,onChange:i=>{Mn(c=>({...c,rent:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:"  ()"}),s.jsx("button",{onClick:()=>xn("labor"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.labor,onChange:i=>{Mn(c=>({...c,labor:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:" (%)"}),s.jsx("button",{onClick:()=>xn("materialRate"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.materialRate,onChange:i=>{Mn(c=>({...c,materialRate:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:" ()"}),s.jsx("button",{onClick:()=>xn("otherCost"),className:"w-4 h-4 rounded-full bg-blue-100 text-blue-600 text-xs flex items-center justify-center",children:"i"})]}),s.jsx("input",{type:"number",value:Rn.otherCost,onChange:i=>{Mn(c=>({...c,otherCost:Number(i.target.value)})),ut()},className:"w-full px-3 py-2 rounded border border-neutral-200 text-sm"})]})]}),(()=>{const i=aN();return s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-neutral-600",children:"  "}),s.jsxs("span",{className:"font-bold text-neutral-900",children:[Math.round(i.monthlyRevenue/1e4).toLocaleString(),""]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-neutral-600",children:"  "}),s.jsxs("span",{className:"font-medium text-neutral-700",children:[Math.round(i.totalCost).toLocaleString(),""]})]}),s.jsxs("div",{className:"flex justify-between border-t border-neutral-200 pt-2",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"  "}),s.jsxs("span",{className:`font-bold ${i.profit>=0?"text-blue-600":"text-red-600"}`,children:[Math.round(i.profit).toLocaleString(),""]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-neutral-600",children:""}),s.jsxs("span",{className:"font-medium text-neutral-700",children:[" ",i.bepCups,""]})]})]})})(),s.jsx("p",{className:"text-xs text-neutral-400 mt-3",children:"*      "})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:"  "}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-500 mb-1",children:" "}),s.jsx("p",{className:"text-sm text-neutral-700",children:"  8~12"}),s.jsx("p",{className:"text-sm text-neutral-700",children:"3   35%"})]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-xs text-blue-600 mb-1",children:" "}),s.jsx("p",{className:"text-sm text-neutral-900 font-medium",children:"  5~7"}),s.jsx("p",{className:"text-sm text-neutral-900 font-medium",children:"3   68%"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-3",children:"AI  "}),s.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:Oe.insight})]}),s.jsx("button",{onClick:()=>Zc(!0),className:"w-full py-3 text-sm text-neutral-500 hover:text-neutral-700 border border-neutral-200 rounded-lg",children:" "})]}),!Oe&&!Xc&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-neutral-400",children:"     "})})]}),gi==="website"&&s.jsx("div",{className:"flex-1 bg-white",children:s.jsx("iframe",{src:"https://www.beancraft.co.kr",className:"w-full h-full border-0",title:" "})})]}),Dl&&s.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[2200] p-4",onClick:()=>xn(null),children:s.jsxs("div",{className:"bg-white rounded-xl p-5 w-full max-w-md",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-neutral-900",children:(Jf=yi[Dl])==null?void 0:Jf.title}),s.jsx("button",{onClick:()=>xn(null),className:"text-2xl text-neutral-400",children:""})]}),s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-neutral-500 mb-1",children:""}),s.jsx("p",{className:"text-neutral-900",children:(Zf=yi[Dl])==null?void 0:Zf.definition})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-neutral-500 mb-1",children:""}),s.jsx("p",{className:"text-neutral-900",children:(ex=yi[Dl])==null?void 0:ex.calculation})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-neutral-500 mb-1",children:" "}),s.jsx("p",{className:"text-neutral-900",children:(tx=yi[Dl])==null?void 0:tx.standard})]})]})]})}),rN&&s.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[2200] p-4",onClick:()=>Zc(!1),children:s.jsxs("div",{className:"bg-white rounded-xl p-5 w-full max-w-md max-h-[70vh] overflow-y-auto",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-bold text-neutral-900",children:""}),s.jsx("button",{onClick:()=>Zc(!1),className:"text-2xl text-neutral-400",children:""})]}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[(nx=Oe==null?void 0:Oe.sources)==null?void 0:nx.map((i,c)=>s.jsxs("li",{className:"text-neutral-600 flex items-start gap-2",children:[s.jsxs("span",{className:"text-neutral-400",children:[c+1,"."]})," ",i]},c)),s.jsxs("li",{className:"text-neutral-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-400",children:""})," Gemini AI   "]}),s.jsxs("li",{className:"text-neutral-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-400",children:""}),"  "]}),s.jsxs("li",{className:"text-neutral-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-400",children:""}),"   "]}),s.jsxs("li",{className:"text-neutral-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-neutral-400",children:""}),"  "]})]}),s.jsx("p",{className:"text-xs text-neutral-400 mt-4",children:"*  AI      "})]})})]})]})};Au.createRoot(document.getElementById("root")).render(s.jsx(f1.StrictMode,{children:s.jsx(tk,{})}));
